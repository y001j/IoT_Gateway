{"version":3,"file":"echarts-core-DHH3aYep.js","sources":["../../../node_modules/echarts/lib/util/number.js","../../../node_modules/echarts/lib/util/log.js","../../../node_modules/echarts/lib/util/model.js","../../../node_modules/echarts/lib/util/clazz.js","../../../node_modules/echarts/lib/model/mixin/makeStyleMapper.js","../../../node_modules/echarts/lib/model/mixin/areaStyle.js","../../../node_modules/echarts/lib/util/innerStore.js","../../../node_modules/echarts/lib/util/states.js","../../../node_modules/echarts/lib/animation/basicTransition.js","../../../node_modules/echarts/lib/util/graphic.js","../../../node_modules/echarts/lib/label/labelStyle.js","../../../node_modules/echarts/lib/model/mixin/textStyle.js","../../../node_modules/echarts/lib/model/mixin/lineStyle.js","../../../node_modules/echarts/lib/model/mixin/itemStyle.js","../../../node_modules/echarts/lib/model/Model.js","../../../node_modules/echarts/lib/util/component.js","../../../node_modules/echarts/lib/core/locale.js","../../../node_modules/echarts/lib/i18n/langEN.js","../../../node_modules/echarts/lib/i18n/langZH.js","../../../node_modules/echarts/lib/util/time.js","../../../node_modules/echarts/lib/util/format.js","../../../node_modules/echarts/lib/util/layout.js","../../../node_modules/echarts/lib/model/Component.js","../../../node_modules/echarts/lib/model/globalDefault.js","../../../node_modules/echarts/lib/util/types.js","../../../node_modules/echarts/lib/data/helper/sourceHelper.js","../../../node_modules/echarts/lib/model/internalComponentCreator.js","../../../node_modules/echarts/lib/model/mixin/palette.js","../../../node_modules/echarts/lib/model/Global.js","../../../node_modules/echarts/lib/core/ExtensionAPI.js","../../../node_modules/echarts/lib/core/CoordinateSystem.js","../../../node_modules/echarts/lib/model/OptionManager.js","../../../node_modules/echarts/lib/preprocessor/helper/compatStyle.js","../../../node_modules/echarts/lib/preprocessor/backwardCompat.js","../../../node_modules/echarts/lib/processor/dataStack.js","../../../node_modules/echarts/lib/data/Source.js","../../../node_modules/echarts/lib/data/helper/dataProvider.js","../../../node_modules/echarts/lib/model/mixin/dataFormat.js","../../../node_modules/echarts/lib/core/task.js","../../../node_modules/echarts/lib/data/helper/dataValueHelper.js","../../../node_modules/echarts/lib/data/helper/transform.js","../../../node_modules/echarts/lib/data/DataStore.js","../../../node_modules/echarts/lib/data/helper/sourceManager.js","../../../node_modules/echarts/lib/model/Series.js","../../../node_modules/echarts/lib/view/Component.js","../../../node_modules/echarts/lib/view/Chart.js","../../../node_modules/echarts/lib/util/throttle.js","../../../node_modules/echarts/lib/visual/style.js","../../../node_modules/echarts/lib/loading/default.js","../../../node_modules/echarts/lib/core/Scheduler.js","../../../node_modules/echarts/lib/theme/light.js","../../../node_modules/echarts/lib/theme/dark.js","../../../node_modules/echarts/lib/util/ECEventProcessor.js","../../../node_modules/echarts/lib/visual/symbol.js","../../../node_modules/echarts/lib/visual/helper.js","../../../node_modules/echarts/lib/legacy/dataSelectAction.js","../../../node_modules/echarts/lib/util/event.js","../../../node_modules/echarts/lib/util/symbol.js","../../../node_modules/echarts/lib/util/decal.js","../../../node_modules/echarts/lib/core/lifecycle.js","../../../node_modules/echarts/lib/core/impl.js","../../../node_modules/echarts/lib/core/echarts.js","../../../node_modules/echarts/lib/visual/decal.js","../../../node_modules/echarts/lib/extension.js","../../../node_modules/echarts/lib/data/DataDiffer.js","../../../node_modules/echarts/lib/data/helper/dimensionHelper.js","../../../node_modules/echarts/lib/data/SeriesDimensionDefine.js","../../../node_modules/echarts/lib/data/helper/SeriesDataSchema.js","../../../node_modules/echarts/lib/data/SeriesData.js","../../../node_modules/echarts/lib/data/helper/createDimensions.js","../../../node_modules/echarts/lib/model/referHelper.js","../../../node_modules/echarts/lib/data/helper/dataStackHelper.js","../../../node_modules/echarts/lib/scale/Scale.js","../../../node_modules/echarts/lib/data/OrdinalMeta.js","../../../node_modules/echarts/lib/scale/helper.js","../../../node_modules/echarts/lib/scale/Ordinal.js","../../../node_modules/echarts/lib/scale/Interval.js","../../../node_modules/echarts/lib/util/vendor.js","../../../node_modules/echarts/lib/layout/barGrid.js","../../../node_modules/echarts/lib/scale/Time.js","../../../node_modules/echarts/lib/scale/Log.js","../../../node_modules/echarts/lib/coord/scaleRawExtentInfo.js","../../../node_modules/echarts/lib/coord/axisHelper.js","../../../node_modules/echarts/lib/coord/axisModelCommonMixin.js","../../../node_modules/echarts/lib/coord/geo/Region.js","../../../node_modules/echarts/lib/coord/geo/parseGeoJson.js","../../../node_modules/echarts/lib/coord/axisTickLabelBuilder.js","../../../node_modules/echarts/lib/coord/Axis.js","../../../node_modules/echarts/lib/label/labelGuideHelper.js","../../../node_modules/echarts/lib/label/labelLayoutHelper.js","../../../node_modules/echarts/lib/label/LabelManager.js","../../../node_modules/echarts/lib/label/installLabelLayout.js","../../../node_modules/echarts/lib/renderer/installSVGRenderer.js","../../../node_modules/echarts/lib/renderer/installCanvasRenderer.js","../../../node_modules/echarts/lib/coord/CoordinateSystem.js","../../../node_modules/echarts/lib/layout/points.js","../../../node_modules/echarts/lib/processor/dataSample.js","../../../node_modules/echarts/lib/util/shape/sausage.js","../../../node_modules/echarts/lib/label/sectorLabel.js","../../../node_modules/echarts/lib/processor/dataFilter.js","../../../node_modules/echarts/lib/visual/LegendVisualProvider.js","../../../node_modules/echarts/lib/processor/negativeDataFilter.js","../../../node_modules/echarts/lib/coord/cartesian/GridModel.js","../../../node_modules/echarts/lib/coord/cartesian/AxisModel.js","../../../node_modules/echarts/lib/coord/axisDefault.js","../../../node_modules/echarts/lib/coord/axisCommonTypes.js","../../../node_modules/echarts/lib/coord/axisModelCreator.js","../../../node_modules/echarts/lib/coord/cartesian/Cartesian.js","../../../node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../../../node_modules/echarts/lib/coord/cartesian/Axis2D.js","../../../node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","../../../node_modules/echarts/lib/coord/axisAlignTicks.js","../../../node_modules/echarts/lib/coord/cartesian/Grid.js","../../../node_modules/echarts/lib/coord/radar/RadarModel.js","../../../node_modules/echarts/lib/coord/radar/IndicatorAxis.js","../../../node_modules/echarts/lib/coord/radar/Radar.js","../../../node_modules/echarts/lib/coord/geo/GeoSVGResource.js","../../../node_modules/echarts/lib/coord/geo/fix/nanhai.js","../../../node_modules/echarts/lib/coord/geo/fix/textCoord.js","../../../node_modules/echarts/lib/coord/geo/fix/diaoyuIsland.js","../../../node_modules/echarts/lib/coord/geo/GeoJSONResource.js","../../../node_modules/echarts/lib/coord/geo/geoSourceManager.js","../../../node_modules/echarts/lib/coord/View.js","../../../node_modules/echarts/lib/coord/geo/Geo.js","../../../node_modules/echarts/lib/coord/geo/geoCreator.js","../../../node_modules/echarts/lib/coord/geo/GeoModel.js","../../../node_modules/echarts/lib/action/roamHelper.js","../../../node_modules/echarts/lib/data/helper/linkSeriesData.js","../../../node_modules/echarts/lib/data/Tree.js","../../../node_modules/echarts/lib/util/animation.js","../../../node_modules/echarts/lib/visual/VisualMapping.js","../../../node_modules/echarts/lib/data/Graph.js","../../../node_modules/echarts/lib/coord/parallel/parallelPreprocessor.js","../../../node_modules/echarts/lib/coord/parallel/ParallelModel.js","../../../node_modules/echarts/lib/coord/parallel/ParallelAxis.js","../../../node_modules/echarts/lib/coord/parallel/Parallel.js","../../../node_modules/echarts/lib/coord/parallel/parallelCreator.js","../../../node_modules/echarts/lib/coord/parallel/AxisModel.js","../../../node_modules/echarts/lib/coord/cartesian/prepareCustom.js","../../../node_modules/echarts/lib/coord/geo/prepareCustom.js","../../../node_modules/echarts/lib/coord/single/prepareCustom.js","../../../node_modules/echarts/lib/coord/polar/prepareCustom.js","../../../node_modules/echarts/lib/coord/calendar/prepareCustom.js","../../../node_modules/echarts/lib/util/styleCompat.js","../../../node_modules/echarts/lib/animation/customGraphicTransition.js","../../../node_modules/echarts/lib/animation/customGraphicKeyframeAnimation.js","../../../node_modules/echarts/lib/coord/polar/PolarModel.js","../../../node_modules/echarts/lib/coord/polar/AxisModel.js","../../../node_modules/echarts/lib/coord/polar/RadiusAxis.js","../../../node_modules/echarts/lib/coord/polar/AngleAxis.js","../../../node_modules/echarts/lib/coord/polar/Polar.js","../../../node_modules/echarts/lib/coord/polar/polarCreator.js","../../../node_modules/echarts/lib/layout/barPolar.js","../../../node_modules/echarts/lib/coord/single/singleAxisHelper.js","../../../node_modules/echarts/lib/coord/single/AxisModel.js","../../../node_modules/echarts/lib/coord/single/SingleAxis.js","../../../node_modules/echarts/lib/coord/single/Single.js","../../../node_modules/echarts/lib/coord/single/singleCreator.js","../../../node_modules/echarts/lib/coord/calendar/CalendarModel.js","../../../node_modules/echarts/lib/coord/calendar/Calendar.js","../../../node_modules/echarts/lib/visual/visualSolution.js","../../../node_modules/echarts/lib/visual/visualDefault.js","../../../node_modules/echarts/lib/visual/aria.js","../../../node_modules/echarts/lib/util/conditionalExpression.js","../../../node_modules/echarts/lib/animation/morphTransitionHelper.js","../../../node_modules/echarts/lib/animation/universalTransition.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The method \"quantile\" was copied from \"d3.js\".\r\n* (See more details in the comment of the method below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar RADIAN_EPSILON = 1e-4;\n// Although chrome already enlarge this number to 100 for `toFixed`, but\n// we sill follow the spec for compatibility.\nvar ROUND_SUPPORTED_PRECISION_MAX = 20;\nfunction _trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n/**\r\n * Linear mapping a value from domain to range\r\n * @param  val\r\n * @param  domain Domain extent domain[0] can be bigger than domain[1]\r\n * @param  range  Range extent range[0] can be bigger than range[1]\r\n * @param  clamp Default to be false\r\n */\nexport function linearMap(val, domain, range, clamp) {\n  var d0 = domain[0];\n  var d1 = domain[1];\n  var r0 = range[0];\n  var r1 = range[1];\n  var subDomain = d1 - d0;\n  var subRange = r1 - r0;\n  if (subDomain === 0) {\n    return subRange === 0 ? r0 : (r0 + r1) / 2;\n  }\n  // Avoid accuracy problem in edge, such as\n  // 146.39 - 62.83 === 83.55999999999999.\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n  // It is a little verbose for efficiency considering this method\n  // is a hotspot.\n  if (clamp) {\n    if (subDomain > 0) {\n      if (val <= d0) {\n        return r0;\n      } else if (val >= d1) {\n        return r1;\n      }\n    } else {\n      if (val >= d0) {\n        return r0;\n      } else if (val <= d1) {\n        return r1;\n      }\n    }\n  } else {\n    if (val === d0) {\n      return r0;\n    }\n    if (val === d1) {\n      return r1;\n    }\n  }\n  return (val - d0) / subDomain * subRange + r0;\n}\n/**\r\n * Convert a percent string to absolute number.\r\n * Returns NaN if percent is not a valid string or number\r\n */\nexport function parsePercent(percent, all) {\n  switch (percent) {\n    case 'center':\n    case 'middle':\n      percent = '50%';\n      break;\n    case 'left':\n    case 'top':\n      percent = '0%';\n      break;\n    case 'right':\n    case 'bottom':\n      percent = '100%';\n      break;\n  }\n  if (zrUtil.isString(percent)) {\n    if (_trim(percent).match(/%$/)) {\n      return parseFloat(percent) / 100 * all;\n    }\n    return parseFloat(percent);\n  }\n  return percent == null ? NaN : +percent;\n}\nexport function round(x, precision, returnStr) {\n  if (precision == null) {\n    precision = 10;\n  }\n  // Avoid range error\n  precision = Math.min(Math.max(0, precision), ROUND_SUPPORTED_PRECISION_MAX);\n  // PENDING: 1.005.toFixed(2) is '1.00' rather than '1.01'\n  x = (+x).toFixed(precision);\n  return returnStr ? x : +x;\n}\n/**\r\n * Inplacd asc sort arr.\r\n * The input arr will be modified.\r\n */\nexport function asc(arr) {\n  arr.sort(function (a, b) {\n    return a - b;\n  });\n  return arr;\n}\n/**\r\n * Get precision.\r\n */\nexport function getPrecision(val) {\n  val = +val;\n  if (isNaN(val)) {\n    return 0;\n  }\n  // It is much faster than methods converting number to string as follows\n  //      let tmp = val.toString();\n  //      return tmp.length - 1 - tmp.indexOf('.');\n  // especially when precision is low\n  // Notice:\n  // (1) If the loop count is over about 20, it is slower than `getPrecisionSafe`.\n  //     (see https://jsbench.me/2vkpcekkvw/1)\n  // (2) If the val is less than for example 1e-15, the result may be incorrect.\n  //     (see test/ut/spec/util/number.test.ts `getPrecision_equal_random`)\n  if (val > 1e-14) {\n    var e = 1;\n    for (var i = 0; i < 15; i++, e *= 10) {\n      if (Math.round(val * e) / e === val) {\n        return i;\n      }\n    }\n  }\n  return getPrecisionSafe(val);\n}\n/**\r\n * Get precision with slow but safe method\r\n */\nexport function getPrecisionSafe(val) {\n  // toLowerCase for: '3.4E-12'\n  var str = val.toString().toLowerCase();\n  // Consider scientific notation: '3.4e-12' '3.4e+12'\n  var eIndex = str.indexOf('e');\n  var exp = eIndex > 0 ? +str.slice(eIndex + 1) : 0;\n  var significandPartLen = eIndex > 0 ? eIndex : str.length;\n  var dotIndex = str.indexOf('.');\n  var decimalPartLen = dotIndex < 0 ? 0 : significandPartLen - 1 - dotIndex;\n  return Math.max(0, decimalPartLen - exp);\n}\n/**\r\n * Minimal dicernible data precisioin according to a single pixel.\r\n */\nexport function getPixelPrecision(dataExtent, pixelExtent) {\n  var log = Math.log;\n  var LN10 = Math.LN10;\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n  var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10);\n  // toFixed() digits argument must be between 0 and 20.\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n  return !isFinite(precision) ? 20 : precision;\n}\n/**\r\n * Get a data of given precision, assuring the sum of percentages\r\n * in valueList is 1.\r\n * The largest remainder method is used.\r\n * https://en.wikipedia.org/wiki/Largest_remainder_method\r\n *\r\n * @param valueList a list of all data\r\n * @param idx index of the data to be processed in valueList\r\n * @param precision integer number showing digits of precision\r\n * @return percent ranging from 0 to 100\r\n */\nexport function getPercentWithPrecision(valueList, idx, precision) {\n  if (!valueList[idx]) {\n    return 0;\n  }\n  var seats = getPercentSeats(valueList, precision);\n  return seats[idx] || 0;\n}\n/**\r\n * Get a data of given precision, assuring the sum of percentages\r\n * in valueList is 1.\r\n * The largest remainder method is used.\r\n * https://en.wikipedia.org/wiki/Largest_remainder_method\r\n *\r\n * @param valueList a list of all data\r\n * @param precision integer number showing digits of precision\r\n * @return {Array<number>}\r\n */\nexport function getPercentSeats(valueList, precision) {\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\n    return acc + (isNaN(val) ? 0 : val);\n  }, 0);\n  if (sum === 0) {\n    return [];\n  }\n  var digits = Math.pow(10, precision);\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\n  });\n  var targetSeats = digits * 100;\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\n    // Assign automatic seats.\n    return Math.floor(votes);\n  });\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\n    return acc + val;\n  }, 0);\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\n    return votes - seats[idx];\n  });\n  // Has remainding votes.\n  while (currentSum < targetSeats) {\n    // Find next largest remainder.\n    var max = Number.NEGATIVE_INFINITY;\n    var maxId = null;\n    for (var i = 0, len = remainder.length; i < len; ++i) {\n      if (remainder[i] > max) {\n        max = remainder[i];\n        maxId = i;\n      }\n    }\n    // Add a vote to max remainder.\n    ++seats[maxId];\n    remainder[maxId] = 0;\n    ++currentSum;\n  }\n  return zrUtil.map(seats, function (seat) {\n    return seat / digits;\n  });\n}\n/**\r\n * Solve the floating point adding problem like 0.1 + 0.2 === 0.30000000000000004\r\n * See <http://0.30000000000000004.com/>\r\n */\nexport function addSafe(val0, val1) {\n  var maxPrecision = Math.max(getPrecision(val0), getPrecision(val1));\n  // const multiplier = Math.pow(10, maxPrecision);\n  // return (Math.round(val0 * multiplier) + Math.round(val1 * multiplier)) / multiplier;\n  var sum = val0 + val1;\n  // // PENDING: support more?\n  return maxPrecision > ROUND_SUPPORTED_PRECISION_MAX ? sum : round(sum, maxPrecision);\n}\n// Number.MAX_SAFE_INTEGER, ie do not support.\nexport var MAX_SAFE_INTEGER = 9007199254740991;\n/**\r\n * To 0 - 2 * PI, considering negative radian.\r\n */\nexport function remRadian(radian) {\n  var pi2 = Math.PI * 2;\n  return (radian % pi2 + pi2) % pi2;\n}\n/**\r\n * @param {type} radian\r\n * @return {boolean}\r\n */\nexport function isRadianAroundZero(val) {\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n}\n// eslint-disable-next-line\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n/**\r\n * @param value valid type: number | string | Date, otherwise return `new Date(NaN)`\r\n *   These values can be accepted:\r\n *   + An instance of Date, represent a time in its own time zone.\r\n *   + Or string in a subset of ISO 8601, only including:\r\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\r\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\r\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\r\n *     all of which will be treated as local time if time zone is not specified\r\n *     (see <https://momentjs.com/>).\r\n *   + Or other string format, including (all of which will be treated as local time):\r\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\r\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\r\n *   + a timestamp, which represent a time in UTC.\r\n * @return date Never be null/undefined. If invalid, return `new Date(NaN)`.\r\n */\nexport function parseDate(value) {\n  if (value instanceof Date) {\n    return value;\n  } else if (zrUtil.isString(value)) {\n    // Different browsers parse date in different way, so we parse it manually.\n    // Some other issues:\n    // new Date('1970-01-01') is UTC,\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\n    // See issue #3623\n    var match = TIME_REG.exec(value);\n    if (!match) {\n      // return Invalid Date.\n      return new Date(NaN);\n    }\n    // Use local time when no timezone offset is specified.\n    if (!match[8]) {\n      // match[n] can only be string or undefined.\n      // But take care of '12' + 1 => '121'.\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0);\n    }\n    // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\n    // then these code will get different result:\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n    // So we should not use `new Date`, but use `Date.UTC`.\n    else {\n      var hour = +match[4] || 0;\n      if (match[8].toUpperCase() !== 'Z') {\n        hour -= +match[8].slice(0, 3);\n      }\n      return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0));\n    }\n  } else if (value == null) {\n    return new Date(NaN);\n  }\n  return new Date(Math.round(value));\n}\n/**\r\n * Quantity of a number. e.g. 0.1, 1, 10, 100\r\n *\r\n * @param val\r\n * @return\r\n */\nexport function quantity(val) {\n  return Math.pow(10, quantityExponent(val));\n}\n/**\r\n * Exponent of the quantity of a number\r\n * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\r\n *\r\n * @param val non-negative value\r\n * @return\r\n */\nexport function quantityExponent(val) {\n  if (val === 0) {\n    return 0;\n  }\n  var exp = Math.floor(Math.log(val) / Math.LN10);\n  /**\r\n   * exp is expected to be the rounded-down result of the base-10 log of val.\r\n   * But due to the precision loss with Math.log(val), we need to restore it\r\n   * using 10^exp to make sure we can get val back from exp. #11249\r\n   */\n  if (val / Math.pow(10, exp) >= 10) {\n    exp++;\n  }\n  return exp;\n}\n/**\r\n * find a “nice” number approximately equal to x. Round the number if round = true,\r\n * take ceiling if round = false. The primary observation is that the “nicest”\r\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\r\n *\r\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\r\n *\r\n * @param  val Non-negative value.\r\n * @param  round\r\n * @return Niced number\r\n */\nexport function nice(val, round) {\n  var exponent = quantityExponent(val);\n  var exp10 = Math.pow(10, exponent);\n  var f = val / exp10; // 1 <= f < 10\n  var nf;\n  if (round) {\n    if (f < 1.5) {\n      nf = 1;\n    } else if (f < 2.5) {\n      nf = 2;\n    } else if (f < 4) {\n      nf = 3;\n    } else if (f < 7) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  } else {\n    if (f < 1) {\n      nf = 1;\n    } else if (f < 2) {\n      nf = 2;\n    } else if (f < 3) {\n      nf = 3;\n    } else if (f < 5) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  }\n  val = nf * exp10;\n  // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n  // 20 is the uppper bound of toFixed.\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n}\n/**\r\n * This code was copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\r\n * See the license statement at the head of this file.\r\n * @param ascArr\r\n */\nexport function quantile(ascArr, p) {\n  var H = (ascArr.length - 1) * p + 1;\n  var h = Math.floor(H);\n  var v = +ascArr[h - 1];\n  var e = H - h;\n  return e ? v + e * (ascArr[h] - v) : v;\n}\n/**\r\n * Order intervals asc, and split them when overlap.\r\n * expect(numberUtil.reformIntervals([\r\n *     {interval: [18, 62], close: [1, 1]},\r\n *     {interval: [-Infinity, -70], close: [0, 0]},\r\n *     {interval: [-70, -26], close: [1, 1]},\r\n *     {interval: [-26, 18], close: [1, 1]},\r\n *     {interval: [62, 150], close: [1, 1]},\r\n *     {interval: [106, 150], close: [1, 1]},\r\n *     {interval: [150, Infinity], close: [0, 0]}\r\n * ])).toEqual([\r\n *     {interval: [-Infinity, -70], close: [0, 0]},\r\n *     {interval: [-70, -26], close: [1, 1]},\r\n *     {interval: [-26, 18], close: [0, 1]},\r\n *     {interval: [18, 62], close: [0, 1]},\r\n *     {interval: [62, 150], close: [0, 1]},\r\n *     {interval: [150, Infinity], close: [0, 0]}\r\n * ]);\r\n * @param list, where `close` mean open or close\r\n *        of the interval, and Infinity can be used.\r\n * @return The origin list, which has been reformed.\r\n */\nexport function reformIntervals(list) {\n  list.sort(function (a, b) {\n    return littleThan(a, b, 0) ? -1 : 1;\n  });\n  var curr = -Infinity;\n  var currClose = 1;\n  for (var i = 0; i < list.length;) {\n    var interval = list[i].interval;\n    var close_1 = list[i].close;\n    for (var lg = 0; lg < 2; lg++) {\n      if (interval[lg] <= curr) {\n        interval[lg] = curr;\n        close_1[lg] = !lg ? 1 - currClose : 1;\n      }\n      curr = interval[lg];\n      currClose = close_1[lg];\n    }\n    if (interval[0] === interval[1] && close_1[0] * close_1[1] !== 1) {\n      list.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n  return list;\n  function littleThan(a, b, lg) {\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n  }\n}\n/**\r\n * [Numeric is defined as]:\r\n *     `parseFloat(val) == val`\r\n * For example:\r\n * numeric:\r\n *     typeof number except NaN, '-123', '123', '2e3', '-2e3', '011', 'Infinity', Infinity,\r\n *     and they rounded by white-spaces or line-terminal like ' -123 \\n ' (see es spec)\r\n * not-numeric:\r\n *     null, undefined, [], {}, true, false, 'NaN', NaN, '123ab',\r\n *     empty string, string with only white-spaces or line-terminal (see es spec),\r\n *     0x12, '0x12', '-0x12', 012, '012', '-012',\r\n *     non-string, ...\r\n *\r\n * @test See full test cases in `test/ut/spec/util/number.js`.\r\n * @return Must be a typeof number. If not numeric, return NaN.\r\n */\nexport function numericToNumber(val) {\n  var valFloat = parseFloat(val);\n  return valFloat == val // eslint-disable-line eqeqeq\n  && (valFloat !== 0 || !zrUtil.isString(val) || val.indexOf('x') <= 0) // For case ' 0x0 '.\n  ? valFloat : NaN;\n}\n/**\r\n * Definition of \"numeric\": see `numericToNumber`.\r\n */\nexport function isNumeric(val) {\n  return !isNaN(numericToNumber(val));\n}\n/**\r\n * Use random base to prevent users hard code depending on\r\n * this auto generated marker id.\r\n * @return An positive integer.\r\n */\nexport function getRandomIdBase() {\n  return Math.round(Math.random() * 9);\n}\n/**\r\n * Get the greatest common divisor.\r\n *\r\n * @param {number} a one number\r\n * @param {number} b the other number\r\n */\nexport function getGreatestCommonDividor(a, b) {\n  if (b === 0) {\n    return a;\n  }\n  return getGreatestCommonDividor(b, a % b);\n}\n/**\r\n * Get the least common multiple.\r\n *\r\n * @param {number} a one number\r\n * @param {number} b the other number\r\n */\nexport function getLeastCommonMultiple(a, b) {\n  if (a == null) {\n    return b;\n  }\n  if (b == null) {\n    return a;\n  }\n  return a * b / getGreatestCommonDividor(a, b);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { map, isString, isFunction, eqNaN, isRegExp } from 'zrender/lib/core/util.js';\nvar ECHARTS_PREFIX = '[ECharts] ';\nvar storedLogs = {};\nvar hasConsole = typeof console !== 'undefined'\n// eslint-disable-next-line\n&& console.warn && console.log;\nfunction outputLog(type, str, onlyOnce) {\n  if (hasConsole) {\n    if (onlyOnce) {\n      if (storedLogs[str]) {\n        return;\n      }\n      storedLogs[str] = true;\n    }\n    // eslint-disable-next-line\n    console[type](ECHARTS_PREFIX + str);\n  }\n}\nexport function log(str, onlyOnce) {\n  outputLog('log', str, onlyOnce);\n}\nexport function warn(str, onlyOnce) {\n  outputLog('warn', str, onlyOnce);\n}\nexport function error(str, onlyOnce) {\n  outputLog('error', str, onlyOnce);\n}\nexport function deprecateLog(str) {\n  if (process.env.NODE_ENV !== 'production') {\n    // Not display duplicate message.\n    outputLog('warn', 'DEPRECATED: ' + str, true);\n  }\n}\nexport function deprecateReplaceLog(oldOpt, newOpt, scope) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated, use \" + newOpt + \" instead.\"));\n  }\n}\n/**\r\n * If in __DEV__ environment, get console printable message for users hint.\r\n * Parameters are separated by ' '.\r\n * @usage\r\n * makePrintable('This is an error on', someVar, someObj);\r\n *\r\n * @param hintInfo anything about the current execution context to hint users.\r\n * @throws Error\r\n */\nexport function makePrintable() {\n  var hintInfo = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    hintInfo[_i] = arguments[_i];\n  }\n  var msg = '';\n  if (process.env.NODE_ENV !== 'production') {\n    // Fuzzy stringify for print.\n    // This code only exist in dev environment.\n    var makePrintableStringIfPossible_1 = function (val) {\n      return val === void 0 ? 'undefined' : val === Infinity ? 'Infinity' : val === -Infinity ? '-Infinity' : eqNaN(val) ? 'NaN' : val instanceof Date ? 'Date(' + val.toISOString() + ')' : isFunction(val) ? 'function () { ... }' : isRegExp(val) ? val + '' : null;\n    };\n    msg = map(hintInfo, function (arg) {\n      if (isString(arg)) {\n        // Print without quotation mark for some statement.\n        return arg;\n      } else {\n        var printableStr = makePrintableStringIfPossible_1(arg);\n        if (printableStr != null) {\n          return printableStr;\n        } else if (typeof JSON !== 'undefined' && JSON.stringify) {\n          try {\n            return JSON.stringify(arg, function (n, val) {\n              var printableStr = makePrintableStringIfPossible_1(val);\n              return printableStr == null ? val : printableStr;\n            });\n            // In most cases the info object is small, so do not line break.\n          } catch (err) {\n            return '?';\n          }\n        } else {\n          return '?';\n        }\n      }\n    }).join(' ');\n  }\n  return msg;\n}\n/**\r\n * @throws Error\r\n */\nexport function throwError(msg) {\n  throw new Error(msg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, isObject, isArray, createHashMap, map, assert, isString, indexOf, isStringSafe, isNumber } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { isNumeric, getRandomIdBase, getPrecision, round } from './number.js';\nimport { warn } from './log.js';\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\r\n * Make the name displayable. But we should\r\n * make sure it is not duplicated with user\r\n * specified name, so use '\\0';\r\n */\nvar DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\nvar INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\n/**\r\n * If value is not array, then translate it to array.\r\n * @param  {*} value\r\n * @return {Array} [value] or value\r\n */\nexport function normalizeToArray(value) {\n  return value instanceof Array ? value : value == null ? [] : [value];\n}\n/**\r\n * Sync default option between normal and emphasis like `position` and `show`\r\n * In case some one will write code like\r\n *     label: {\r\n *          show: false,\r\n *          position: 'outside',\r\n *          fontSize: 18\r\n *     },\r\n *     emphasis: {\r\n *          label: { show: true }\r\n *     }\r\n */\nexport function defaultEmphasis(opt, key, subOpts) {\n  // Caution: performance sensitive.\n  if (opt) {\n    opt[key] = opt[key] || {};\n    opt.emphasis = opt.emphasis || {};\n    opt.emphasis[key] = opt.emphasis[key] || {};\n    // Default emphasis option from normal\n    for (var i = 0, len = subOpts.length; i < len; i++) {\n      var subOptName = subOpts[i];\n      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n        opt.emphasis[key][subOptName] = opt[key][subOptName];\n      }\n    }\n  }\n}\nexport var TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding'];\n// modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n//     // FIXME: deprecated, check and remove it.\n//     'textStyle'\n// ]);\n/**\r\n * The method does not ensure performance.\r\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\r\n * This helper method retrieves value from data.\r\n */\nexport function getDataItemValue(dataItem) {\n  return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n}\n/**\r\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\r\n * This helper method determine if dataItem has extra option besides value\r\n */\nexport function isDataItemOption(dataItem) {\n  return isObject(dataItem) && !(dataItem instanceof Array);\n  // // markLine data can be array\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n}\n;\n/**\r\n * Mapping to existings for merge.\r\n *\r\n * Mode \"normalMege\":\r\n *     The mapping result (merge result) will keep the order of the existing\r\n *     component, rather than the order of new option. Because we should ensure\r\n *     some specified index reference (like xAxisIndex) keep work.\r\n *     And in most cases, \"merge option\" is used to update partial option but not\r\n *     be expected to change the order.\r\n *\r\n * Mode \"replaceMege\":\r\n *     (1) Only the id mapped components will be merged.\r\n *     (2) Other existing components (except internal components) will be removed.\r\n *     (3) Other new options will be used to create new component.\r\n *     (4) The index of the existing components will not be modified.\r\n *     That means their might be \"hole\" after the removal.\r\n *     The new components are created first at those available index.\r\n *\r\n * Mode \"replaceAll\":\r\n *     This mode try to support that reproduce an echarts instance from another\r\n *     echarts instance (via `getOption`) in some simple cases.\r\n *     In this scenario, the `result` index are exactly the consistent with the `newCmptOptions`,\r\n *     which ensures the component index referring (like `xAxisIndex: ?`) corrent. That is,\r\n *     the \"hole\" in `newCmptOptions` will also be kept.\r\n *     On the contrary, other modes try best to eliminate holes.\r\n *     PENDING: This is an experimental mode yet.\r\n *\r\n * @return See the comment of <MappingResult>.\r\n */\nexport function mappingToExists(existings, newCmptOptions, mode) {\n  var isNormalMergeMode = mode === 'normalMerge';\n  var isReplaceMergeMode = mode === 'replaceMerge';\n  var isReplaceAllMode = mode === 'replaceAll';\n  existings = existings || [];\n  newCmptOptions = (newCmptOptions || []).slice();\n  var existingIdIdxMap = createHashMap();\n  // Validate id and name on user input option.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!isObject(cmptOption)) {\n      newCmptOptions[index] = null;\n      return;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      // There is some legacy case that name is set as `false`.\n      // But should work normally rather than throw error.\n      if (cmptOption.id != null && !isValidIdOrName(cmptOption.id)) {\n        warnInvalidateIdOrName(cmptOption.id);\n      }\n      if (cmptOption.name != null && !isValidIdOrName(cmptOption.name)) {\n        warnInvalidateIdOrName(cmptOption.name);\n      }\n    }\n  });\n  var result = prepareResult(existings, existingIdIdxMap, mode);\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingById(result, existings, existingIdIdxMap, newCmptOptions);\n  }\n  if (isNormalMergeMode) {\n    mappingByName(result, newCmptOptions);\n  }\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\n  } else if (isReplaceAllMode) {\n    mappingInReplaceAllMode(result, newCmptOptions);\n  }\n  makeIdAndName(result);\n  // The array `result` MUST NOT contain elided items, otherwise the\n  // forEach will omit those items and result in incorrect result.\n  return result;\n}\nfunction prepareResult(existings, existingIdIdxMap, mode) {\n  var result = [];\n  if (mode === 'replaceAll') {\n    return result;\n  }\n  // Do not use native `map` to in case that the array `existings`\n  // contains elided items, which will be omitted.\n  for (var index = 0; index < existings.length; index++) {\n    var existing = existings[index];\n    // Because of replaceMerge, `existing` may be null/undefined.\n    if (existing && existing.id != null) {\n      existingIdIdxMap.set(existing.id, index);\n    }\n    // For non-internal-componnets:\n    //     Mode \"normalMerge\": all existings kept.\n    //     Mode \"replaceMerge\": all existing removed unless mapped by id.\n    // For internal-components:\n    //     go with \"replaceMerge\" approach in both mode.\n    result.push({\n      existing: mode === 'replaceMerge' || isComponentIdInternal(existing) ? null : existing,\n      newOption: null,\n      keyInfo: null,\n      brandNew: null\n    });\n  }\n  return result;\n}\nfunction mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\n  // Mapping by id if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.id == null) {\n      return;\n    }\n    var optionId = makeComparableKey(cmptOption.id);\n    var existingIdx = existingIdIdxMap.get(optionId);\n    if (existingIdx != null) {\n      var resultItem = result[existingIdx];\n      assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\n      resultItem.newOption = cmptOption;\n      // In both mode, if id matched, new option will be merged to\n      // the existings rather than creating new component model.\n      resultItem.existing = existings[existingIdx];\n      newCmptOptions[index] = null;\n    }\n  });\n}\nfunction mappingByName(result, newCmptOptions) {\n  // Mapping by name if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.name == null) {\n      return;\n    }\n    for (var i = 0; i < result.length; i++) {\n      var existing = result[i].existing;\n      if (!result[i].newOption // Consider name: two map to one.\n      // Can not match when both ids existing but different.\n      && existing && (existing.id == null || cmptOption.id == null) && !isComponentIdInternal(cmptOption) && !isComponentIdInternal(existing) && keyExistAndEqual('name', existing, cmptOption)) {\n        result[i].newOption = cmptOption;\n        newCmptOptions[index] = null;\n        return;\n      }\n    }\n  });\n}\nfunction mappingByIndex(result, newCmptOptions, brandNew) {\n  each(newCmptOptions, function (cmptOption) {\n    if (!cmptOption) {\n      return;\n    }\n    // Find the first place that not mapped by id and not internal component (consider the \"hole\").\n    var resultItem;\n    var nextIdx = 0;\n    while (\n    // Be `!resultItem` only when `nextIdx >= result.length`.\n    (resultItem = result[nextIdx]\n    // (1) Existing models that already have id should be able to mapped to. Because\n    // after mapping performed, model will always be assigned with an id if user not given.\n    // After that all models have id.\n    // (2) If new option has id, it can only set to a hole or append to the last. It should\n    // not be merged to the existings with different id. Because id should not be overwritten.\n    // (3) Name can be overwritten, because axis use name as 'show label text'.\n    ) && (resultItem.newOption || isComponentIdInternal(resultItem.existing) ||\n    // In mode \"replaceMerge\", here no not-mapped-non-internal-existing.\n    resultItem.existing && cmptOption.id != null && !keyExistAndEqual('id', cmptOption, resultItem.existing))) {\n      nextIdx++;\n    }\n    if (resultItem) {\n      resultItem.newOption = cmptOption;\n      resultItem.brandNew = brandNew;\n    } else {\n      result.push({\n        newOption: cmptOption,\n        brandNew: brandNew,\n        existing: null,\n        keyInfo: null\n      });\n    }\n    nextIdx++;\n  });\n}\nfunction mappingInReplaceAllMode(result, newCmptOptions) {\n  each(newCmptOptions, function (cmptOption) {\n    // The feature \"reproduce\" requires \"hole\" will also reproduced\n    // in case that component index referring are broken.\n    result.push({\n      newOption: cmptOption,\n      brandNew: true,\n      existing: null,\n      keyInfo: null\n    });\n  });\n}\n/**\r\n * Make id and name for mapping result (result of mappingToExists)\r\n * into `keyInfo` field.\r\n */\nfunction makeIdAndName(mapResult) {\n  // We use this id to hash component models and view instances\n  // in echarts. id can be specified by user, or auto generated.\n  // The id generation rule ensures new view instance are able\n  // to mapped to old instance when setOption are called in\n  // no-merge mode. So we generate model id by name and plus\n  // type in view id.\n  // name can be duplicated among components, which is convenient\n  // to specify multi components (like series) by one name.\n  // Ensure that each id is distinct.\n  var idMap = createHashMap();\n  each(mapResult, function (item) {\n    var existing = item.existing;\n    existing && idMap.set(existing.id, item);\n  });\n  each(mapResult, function (item) {\n    var opt = item.newOption;\n    // Force ensure id not duplicated.\n    assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n    opt && opt.id != null && idMap.set(opt.id, item);\n    !item.keyInfo && (item.keyInfo = {});\n  });\n  // Make name and id.\n  each(mapResult, function (item, index) {\n    var existing = item.existing;\n    var opt = item.newOption;\n    var keyInfo = item.keyInfo;\n    if (!isObject(opt)) {\n      return;\n    }\n    // Name can be overwritten. Consider case: axis.name = '20km'.\n    // But id generated by name will not be changed, which affect\n    // only in that case: setOption with 'not merge mode' and view\n    // instance will be recreated, which can be accepted.\n    keyInfo.name = opt.name != null ? makeComparableKey(opt.name) : existing ? existing.name\n    // Avoid that different series has the same name,\n    // because name may be used like in color pallet.\n    : DUMMY_COMPONENT_NAME_PREFIX + index;\n    if (existing) {\n      keyInfo.id = makeComparableKey(existing.id);\n    } else if (opt.id != null) {\n      keyInfo.id = makeComparableKey(opt.id);\n    } else {\n      // Consider this situatoin:\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n      // Series with the same name between optionA and optionB\n      // should be mapped.\n      var idNum = 0;\n      do {\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n      } while (idMap.get(keyInfo.id));\n    }\n    idMap.set(keyInfo.id, item);\n  });\n}\nfunction keyExistAndEqual(attr, obj1, obj2) {\n  var key1 = convertOptionIdName(obj1[attr], null);\n  var key2 = convertOptionIdName(obj2[attr], null);\n  // See `MappingExistingItem`. `id` and `name` trade string equals to number.\n  return key1 != null && key2 != null && key1 === key2;\n}\n/**\r\n * @return return null if not exist.\r\n */\nfunction makeComparableKey(val) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (val == null) {\n      throw new Error();\n    }\n  }\n  return convertOptionIdName(val, '');\n}\nexport function convertOptionIdName(idOrName, defaultValue) {\n  if (idOrName == null) {\n    return defaultValue;\n  }\n  return isString(idOrName) ? idOrName : isNumber(idOrName) || isStringSafe(idOrName) ? idOrName + '' : defaultValue;\n}\nfunction warnInvalidateIdOrName(idOrName) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('`' + idOrName + '` is invalid id or name. Must be a string or number.');\n  }\n}\nfunction isValidIdOrName(idOrName) {\n  return isStringSafe(idOrName) || isNumeric(idOrName);\n}\nexport function isNameSpecified(componentModel) {\n  var name = componentModel.name;\n  // Is specified when `indexOf` get -1 or > 0.\n  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n}\n/**\r\n * @public\r\n * @param {Object} cmptOption\r\n * @return {boolean}\r\n */\nexport function isComponentIdInternal(cmptOption) {\n  return cmptOption && cmptOption.id != null && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\n}\nexport function makeInternalComponentId(idSuffix) {\n  return INTERNAL_COMPONENT_ID_PREFIX + idSuffix;\n}\nexport function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\n  // Set mainType and complete subType.\n  each(mappingResult, function (item) {\n    var newOption = item.newOption;\n    if (isObject(newOption)) {\n      item.keyInfo.mainType = mainType;\n      item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\n    }\n  });\n}\nfunction determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\n  var subType = newCmptOption.type ? newCmptOption.type : existComponent ? existComponent.subType\n  // Use determineSubType only when there is no existComponent.\n  : componentModelCtor.determineSubType(mainType, newCmptOption);\n  // tooltip, markline, markpoint may always has no subType\n  return subType;\n}\n/**\r\n * A helper for removing duplicate items between batchA and batchB,\r\n * and in themselves, and categorize by series.\r\n *\r\n * @param batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\r\n * @param batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\r\n * @return result: [resultBatchA, resultBatchB]\r\n */\nexport function compressBatches(batchA, batchB) {\n  var mapA = {};\n  var mapB = {};\n  makeMap(batchA || [], mapA);\n  makeMap(batchB || [], mapB, mapA);\n  return [mapToArray(mapA), mapToArray(mapB)];\n  function makeMap(sourceBatch, map, otherMap) {\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\n      var seriesId = convertOptionIdName(sourceBatch[i].seriesId, null);\n      if (seriesId == null) {\n        return;\n      }\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\n      var otherDataIndices = otherMap && otherMap[seriesId];\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\n        var dataIndex = dataIndices[j];\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\n          otherDataIndices[dataIndex] = null;\n        } else {\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\n        }\n      }\n    }\n  }\n  function mapToArray(map, isData) {\n    var result = [];\n    for (var i in map) {\n      if (map.hasOwnProperty(i) && map[i] != null) {\n        if (isData) {\n          result.push(+i);\n        } else {\n          var dataIndices = mapToArray(map[i], true);\n          dataIndices.length && result.push({\n            seriesId: i,\n            dataIndex: dataIndices\n          });\n        }\n      }\n    }\n    return result;\n  }\n}\n/**\r\n * @param payload Contains dataIndex (means rawIndex) / dataIndexInside / name\r\n *                         each of which can be Array or primary type.\r\n * @return dataIndex If not found, return undefined/null.\r\n */\nexport function queryDataIndex(data, payload) {\n  if (payload.dataIndexInside != null) {\n    return payload.dataIndexInside;\n  } else if (payload.dataIndex != null) {\n    return isArray(payload.dataIndex) ? map(payload.dataIndex, function (value) {\n      return data.indexOfRawIndex(value);\n    }) : data.indexOfRawIndex(payload.dataIndex);\n  } else if (payload.name != null) {\n    return isArray(payload.name) ? map(payload.name, function (value) {\n      return data.indexOfName(value);\n    }) : data.indexOfName(payload.name);\n  }\n}\n/**\r\n * Enable property storage to any host object.\r\n * Notice: Serialization is not supported.\r\n *\r\n * For example:\r\n * let inner = zrUitl.makeInner();\r\n *\r\n * function some1(hostObj) {\r\n *      inner(hostObj).someProperty = 1212;\r\n *      ...\r\n * }\r\n * function some2() {\r\n *      let fields = inner(this);\r\n *      fields.someProperty1 = 1212;\r\n *      fields.someProperty2 = 'xx';\r\n *      ...\r\n * }\r\n *\r\n * @return {Function}\r\n */\nexport function makeInner() {\n  var key = '__ec_inner_' + innerUniqueIndex++;\n  return function (hostObj) {\n    return hostObj[key] || (hostObj[key] = {});\n  };\n}\nvar innerUniqueIndex = getRandomIdBase();\n/**\r\n * The same behavior as `component.getReferringComponents`.\r\n */\nexport function parseFinder(ecModel, finderInput, opt) {\n  var _a = preParseFinder(finderInput, opt),\n    mainTypeSpecified = _a.mainTypeSpecified,\n    queryOptionMap = _a.queryOptionMap,\n    others = _a.others;\n  var result = others;\n  var defaultMainType = opt ? opt.defaultMainType : null;\n  if (!mainTypeSpecified && defaultMainType) {\n    queryOptionMap.set(defaultMainType, {});\n  }\n  queryOptionMap.each(function (queryOption, mainType) {\n    var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\n      useDefault: defaultMainType === mainType,\n      enableAll: opt && opt.enableAll != null ? opt.enableAll : true,\n      enableNone: opt && opt.enableNone != null ? opt.enableNone : true\n    });\n    result[mainType + 'Models'] = queryResult.models;\n    result[mainType + 'Model'] = queryResult.models[0];\n  });\n  return result;\n}\nexport function preParseFinder(finderInput, opt) {\n  var finder;\n  if (isString(finderInput)) {\n    var obj = {};\n    obj[finderInput + 'Index'] = 0;\n    finder = obj;\n  } else {\n    finder = finderInput;\n  }\n  var queryOptionMap = createHashMap();\n  var others = {};\n  var mainTypeSpecified = false;\n  each(finder, function (value, key) {\n    // Exclude 'dataIndex' and other illgal keys.\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\n      others[key] = value;\n      return;\n    }\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n    var mainType = parsedKey[1];\n    var queryType = (parsedKey[2] || '').toLowerCase();\n    if (!mainType || !queryType || opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0) {\n      return;\n    }\n    mainTypeSpecified = mainTypeSpecified || !!mainType;\n    var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\n    queryOption[queryType] = value;\n  });\n  return {\n    mainTypeSpecified: mainTypeSpecified,\n    queryOptionMap: queryOptionMap,\n    others: others\n  };\n}\nexport var SINGLE_REFERRING = {\n  useDefault: true,\n  enableAll: false,\n  enableNone: false\n};\nexport var MULTIPLE_REFERRING = {\n  useDefault: false,\n  enableAll: true,\n  enableNone: true\n};\nexport function queryReferringComponents(ecModel, mainType, userOption, opt) {\n  opt = opt || SINGLE_REFERRING;\n  var indexOption = userOption.index;\n  var idOption = userOption.id;\n  var nameOption = userOption.name;\n  var result = {\n    models: null,\n    specified: indexOption != null || idOption != null || nameOption != null\n  };\n  if (!result.specified) {\n    // Use the first as default if `useDefault`.\n    var firstCmpt = void 0;\n    result.models = opt.useDefault && (firstCmpt = ecModel.getComponent(mainType)) ? [firstCmpt] : [];\n    return result;\n  }\n  if (indexOption === 'none' || indexOption === false) {\n    assert(opt.enableNone, '`\"none\"` or `false` is not a valid value on index option.');\n    result.models = [];\n    return result;\n  }\n  // `queryComponents` will return all components if\n  // both all of index/id/name are null/undefined.\n  if (indexOption === 'all') {\n    assert(opt.enableAll, '`\"all\"` is not a valid value on index option.');\n    indexOption = idOption = nameOption = null;\n  }\n  result.models = ecModel.queryComponents({\n    mainType: mainType,\n    index: indexOption,\n    id: idOption,\n    name: nameOption\n  });\n  return result;\n}\nexport function setAttribute(dom, key, value) {\n  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n}\nexport function getAttribute(dom, key) {\n  return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n}\nexport function getTooltipRenderMode(renderModeOption) {\n  if (renderModeOption === 'auto') {\n    // Using html when `document` exists, use richText otherwise\n    return env.domSupported ? 'html' : 'richText';\n  } else {\n    return renderModeOption || 'html';\n  }\n}\n/**\r\n * Group a list by key.\r\n */\nexport function groupData(array, getKey // return key\n) {\n  var buckets = createHashMap();\n  var keys = [];\n  each(array, function (item) {\n    var key = getKey(item);\n    (buckets.get(key) || (keys.push(key), buckets.set(key, []))).push(item);\n  });\n  return {\n    keys: keys,\n    buckets: buckets\n  };\n}\n/**\r\n * Interpolate raw values of a series with percent\r\n *\r\n * @param data         data\r\n * @param labelModel   label model of the text element\r\n * @param sourceValue  start value. May be null/undefined when init.\r\n * @param targetValue  end value\r\n * @param percent      0~1 percentage; 0 uses start value while 1 uses end value\r\n * @return             interpolated values\r\n *                     If `sourceValue` and `targetValue` are `number`, return `number`.\r\n *                     If `sourceValue` and `targetValue` are `string`, return `string`.\r\n *                     If `sourceValue` and `targetValue` are `(string | number)[]`, return `(string | number)[]`.\r\n *                     Other cases do not supported.\r\n */\nexport function interpolateRawValues(data, precision, sourceValue, targetValue, percent) {\n  var isAutoPrecision = precision == null || precision === 'auto';\n  if (targetValue == null) {\n    return targetValue;\n  }\n  if (isNumber(targetValue)) {\n    var value = interpolateNumber(sourceValue || 0, targetValue, percent);\n    return round(value, isAutoPrecision ? Math.max(getPrecision(sourceValue || 0), getPrecision(targetValue)) : precision);\n  } else if (isString(targetValue)) {\n    return percent < 1 ? sourceValue : targetValue;\n  } else {\n    var interpolated = [];\n    var leftArr = sourceValue;\n    var rightArr = targetValue;\n    var length_1 = Math.max(leftArr ? leftArr.length : 0, rightArr.length);\n    for (var i = 0; i < length_1; ++i) {\n      var info = data.getDimensionInfo(i);\n      // Don't interpolate ordinal dims\n      if (info && info.type === 'ordinal') {\n        // In init, there is no `sourceValue`, but should better not to get undefined result.\n        interpolated[i] = (percent < 1 && leftArr ? leftArr : rightArr)[i];\n      } else {\n        var leftVal = leftArr && leftArr[i] ? leftArr[i] : 0;\n        var rightVal = rightArr[i];\n        var value = interpolateNumber(leftVal, rightVal, percent);\n        interpolated[i] = round(value, isAutoPrecision ? Math.max(getPrecision(leftVal), getPrecision(rightVal)) : precision);\n      }\n    }\n    return interpolated;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar TYPE_DELIMITER = '.';\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\nvar IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\n/**\r\n * Notice, parseClassType('') should returns {main: '', sub: ''}\r\n * @public\r\n */\nexport function parseClassType(componentType) {\n  var ret = {\n    main: '',\n    sub: ''\n  };\n  if (componentType) {\n    var typeArr = componentType.split(TYPE_DELIMITER);\n    ret.main = typeArr[0] || '';\n    ret.sub = typeArr[1] || '';\n  }\n  return ret;\n}\n/**\r\n * @public\r\n */\nfunction checkClassType(componentType) {\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n}\nexport function isExtendedClass(clz) {\n  return !!(clz && clz[IS_EXTENDED_CLASS]);\n}\n/**\r\n * Implements `ExtendableConstructor` for `rootClz`.\r\n *\r\n * @usage\r\n * ```ts\r\n * class Xxx {}\r\n * type XxxConstructor = typeof Xxx & ExtendableConstructor\r\n * enableClassExtend(Xxx as XxxConstructor);\r\n * ```\r\n */\nexport function enableClassExtend(rootClz, mandatoryMethods) {\n  rootClz.$constructor = rootClz; // FIXME: not necessary?\n  rootClz.extend = function (proto) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(mandatoryMethods, function (method) {\n        if (!proto[method]) {\n          console.warn('Method `' + method + '` should be implemented' + (proto.type ? ' in ' + proto.type : '') + '.');\n        }\n      });\n    }\n    var superClass = this;\n    var ExtendedClass;\n    if (isESClass(superClass)) {\n      ExtendedClass = /** @class */function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super.apply(this, arguments) || this;\n        }\n        return class_1;\n      }(superClass);\n    } else {\n      // For backward compat, we both support ts class inheritance and this\n      // \"extend\" approach.\n      // The constructor should keep the same behavior as ts class inheritance:\n      // If this constructor/$constructor is not declared, auto invoke the super\n      // constructor.\n      // If this constructor/$constructor is declared, it is responsible for\n      // calling the super constructor.\n      ExtendedClass = function () {\n        (proto.$constructor || superClass).apply(this, arguments);\n      };\n      zrUtil.inherits(ExtendedClass, this);\n    }\n    zrUtil.extend(ExtendedClass.prototype, proto);\n    ExtendedClass[IS_EXTENDED_CLASS] = true;\n    ExtendedClass.extend = this.extend;\n    ExtendedClass.superCall = superCall;\n    ExtendedClass.superApply = superApply;\n    ExtendedClass.superClass = superClass;\n    return ExtendedClass;\n  };\n}\nfunction isESClass(fn) {\n  return zrUtil.isFunction(fn) && /^class\\s/.test(Function.prototype.toString.call(fn));\n}\n/**\r\n * A work around to both support ts extend and this extend mechanism.\r\n * on sub-class.\r\n * @usage\r\n * ```ts\r\n * class Component { ... }\r\n * classUtil.enableClassExtend(Component);\r\n * classUtil.enableClassManagement(Component, {registerWhenExtend: true});\r\n *\r\n * class Series extends Component { ... }\r\n * // Without calling `markExtend`, `registerWhenExtend` will not work.\r\n * Component.markExtend(Series);\r\n * ```\r\n */\nexport function mountExtend(SubClz, SupperClz) {\n  SubClz.extend = SupperClz.extend;\n}\n// A random offset.\nvar classBase = Math.round(Math.random() * 10);\n/**\r\n * Implements `CheckableConstructor` for `target`.\r\n * Can not use instanceof, consider different scope by\r\n * cross domain or es module import in ec extensions.\r\n * Mount a method \"isInstance()\" to Clz.\r\n *\r\n * @usage\r\n * ```ts\r\n * class Xxx {}\r\n * type XxxConstructor = typeof Xxx & CheckableConstructor;\r\n * enableClassCheck(Xxx as XxxConstructor)\r\n * ```\r\n */\nexport function enableClassCheck(target) {\n  var classAttr = ['__\\0is_clz', classBase++].join('_');\n  target.prototype[classAttr] = true;\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(!target.isInstance, 'The method \"is\" can not be defined.');\n  }\n  target.isInstance = function (obj) {\n    return !!(obj && obj[classAttr]);\n  };\n}\n// superCall should have class info, which can not be fetched from 'this'.\n// Consider this case:\n// class A has method f,\n// class B inherits class A, overrides method f, f call superApply('f'),\n// class C inherits class B, does not override method f,\n// then when method of class C is called, dead loop occurred.\nfunction superCall(context, methodName) {\n  var args = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    args[_i - 2] = arguments[_i];\n  }\n  return this.superClass.prototype[methodName].apply(context, args);\n}\nfunction superApply(context, methodName, args) {\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n/**\r\n * Implements `ClassManager` for `target`\r\n *\r\n * @usage\r\n * ```ts\r\n * class Xxx {}\r\n * type XxxConstructor = typeof Xxx & ClassManager\r\n * enableClassManagement(Xxx as XxxConstructor);\r\n * ```\r\n */\nexport function enableClassManagement(target) {\n  /**\r\n   * Component model classes\r\n   * key: componentType,\r\n   * value:\r\n   *     componentClass, when componentType is 'a'\r\n   *     or Object.<subKey, componentClass>, when componentType is 'a.b'\r\n   */\n  var storage = {};\n  target.registerClass = function (clz) {\n    // `type` should not be a \"instance member\".\n    // If using TS class, should better declared as `static type = 'series.pie'`.\n    // otherwise users have to mount `type` on prototype manually.\n    // For backward compat and enable instance visit type via `this.type`,\n    // we still support fetch `type` from prototype.\n    var componentFullType = clz.type || clz.prototype.type;\n    if (componentFullType) {\n      checkClassType(componentFullType);\n      // If only static type declared, we assign it to prototype mandatorily.\n      clz.prototype.type = componentFullType;\n      var componentTypeInfo = parseClassType(componentFullType);\n      if (!componentTypeInfo.sub) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (storage[componentTypeInfo.main]) {\n            console.warn(componentTypeInfo.main + ' exists.');\n          }\n        }\n        storage[componentTypeInfo.main] = clz;\n      } else if (componentTypeInfo.sub !== IS_CONTAINER) {\n        var container = makeContainer(componentTypeInfo);\n        container[componentTypeInfo.sub] = clz;\n      }\n    }\n    return clz;\n  };\n  target.getClass = function (mainType, subType, throwWhenNotFound) {\n    var clz = storage[mainType];\n    if (clz && clz[IS_CONTAINER]) {\n      clz = subType ? clz[subType] : null;\n    }\n    if (throwWhenNotFound && !clz) {\n      throw new Error(!subType ? mainType + '.' + 'type should be specified.' : 'Component ' + mainType + '.' + (subType || '') + ' is used but not imported.');\n    }\n    return clz;\n  };\n  target.getClassesByMainType = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var result = [];\n    var obj = storage[componentTypeInfo.main];\n    if (obj && obj[IS_CONTAINER]) {\n      zrUtil.each(obj, function (o, type) {\n        type !== IS_CONTAINER && result.push(o);\n      });\n    } else {\n      result.push(obj);\n    }\n    return result;\n  };\n  target.hasClass = function (componentType) {\n    // Just consider componentType.main.\n    var componentTypeInfo = parseClassType(componentType);\n    return !!storage[componentTypeInfo.main];\n  };\n  /**\r\n   * @return Like ['aa', 'bb'], but can not be ['aa.xx']\r\n   */\n  target.getAllClassMainTypes = function () {\n    var types = [];\n    zrUtil.each(storage, function (obj, type) {\n      types.push(type);\n    });\n    return types;\n  };\n  /**\r\n   * If a main type is container and has sub types\r\n   */\n  target.hasSubTypes = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var obj = storage[componentTypeInfo.main];\n    return obj && obj[IS_CONTAINER];\n  };\n  function makeContainer(componentTypeInfo) {\n    var container = storage[componentTypeInfo.main];\n    if (!container || !container[IS_CONTAINER]) {\n      container = storage[componentTypeInfo.main] = {};\n      container[IS_CONTAINER] = true;\n    }\n    return container;\n  }\n}\n// /**\n//  * @param {string|Array.<string>} properties\n//  */\n// export function setReadOnly(obj, properties) {\n// FIXME It seems broken in IE8 simulation of IE11\n// if (!zrUtil.isArray(properties)) {\n//     properties = properties != null ? [properties] : [];\n// }\n// zrUtil.each(properties, function (prop) {\n//     let value = obj[prop];\n//     Object.defineProperty\n//         && Object.defineProperty(obj, prop, {\n//             value: value, writable: false\n//         });\n//     zrUtil.isArray(obj[prop])\n//         && Object.freeze\n//         && Object.freeze(obj[prop]);\n// });\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// TODO Parse shadow style\n// TODO Only shallow path support\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function makeStyleMapper(properties, ignoreParent) {\n  // Normalize\n  for (var i = 0; i < properties.length; i++) {\n    if (!properties[i][1]) {\n      properties[i][1] = properties[i][0];\n    }\n  }\n  ignoreParent = ignoreParent || false;\n  return function (model, excludes, includes) {\n    var style = {};\n    for (var i = 0; i < properties.length; i++) {\n      var propName = properties[i][1];\n      if (excludes && zrUtil.indexOf(excludes, propName) >= 0 || includes && zrUtil.indexOf(includes, propName) < 0) {\n        continue;\n      }\n      var val = model.getShallow(propName, ignoreParent);\n      if (val != null) {\n        style[properties[i][0]] = val;\n      }\n    }\n    // TODO Text or image?\n    return style;\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var AREA_STYLE_KEY_MAP = [['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\nvar AreaStyleMixin = /** @class */function () {\n  function AreaStyleMixin() {}\n  AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\n    return getAreaStyle(this, excludes, includes);\n  };\n  return AreaStyleMixin;\n}();\n;\nexport { AreaStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner } from './model.js';\nexport var getECData = makeInner();\nexport var setCommonECData = function (seriesIndex, dataType, dataIdx, el) {\n  if (el) {\n    var ecData = getECData(el);\n    // Add data index and series index for indexing the data by element\n    // Useful in tooltip\n    ecData.dataIndex = dataIdx;\n    ecData.dataType = dataType;\n    ecData.seriesIndex = seriesIndex;\n    ecData.ssrType = 'chart';\n    // TODO: not store dataIndex on children.\n    if (el.type === 'group') {\n      el.traverse(function (child) {\n        var childECData = getECData(child);\n        childECData.seriesIndex = seriesIndex;\n        childECData.dataIndex = dataIdx;\n        childECData.dataType = dataType;\n        childECData.ssrType = 'chart';\n      });\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend, indexOf, isArrayLike, isObject, keys, isArray, each } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport { liftColor } from 'zrender/lib/tool/color.js';\nimport { queryDataIndex, makeInner } from './model.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { error } from './log.js';\n// Reserve 0 as default.\nvar _highlightNextDigit = 1;\nvar _highlightKeyMap = {};\nvar getSavedStates = makeInner();\nvar getComponentStates = makeInner();\nexport var HOVER_STATE_NORMAL = 0;\nexport var HOVER_STATE_BLUR = 1;\nexport var HOVER_STATE_EMPHASIS = 2;\nexport var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\nexport var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\nexport var Z2_EMPHASIS_LIFT = 10;\nexport var Z2_SELECT_LIFT = 9;\nexport var HIGHLIGHT_ACTION_TYPE = 'highlight';\nexport var DOWNPLAY_ACTION_TYPE = 'downplay';\nexport var SELECT_ACTION_TYPE = 'select';\nexport var UNSELECT_ACTION_TYPE = 'unselect';\nexport var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke !== 'none';\n}\nfunction doChangeHoverState(el, stateName, hoverStateEnum) {\n  if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {\n    el.onHoverStateChange(stateName);\n  }\n  el.hoverState = hoverStateEnum;\n}\nfunction singleEnterEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\n}\nfunction singleLeaveEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  if (el.hoverState === HOVER_STATE_EMPHASIS) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\nfunction singleEnterBlur(el) {\n  doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\n}\nfunction singleLeaveBlur(el) {\n  if (el.hoverState === HOVER_STATE_BLUR) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\nfunction singleEnterSelect(el) {\n  el.selected = true;\n}\nfunction singleLeaveSelect(el) {\n  el.selected = false;\n}\nfunction updateElementState(el, updater, commonParam) {\n  updater(el, commonParam);\n}\nfunction traverseUpdateState(el, updater, commonParam) {\n  updateElementState(el, updater, commonParam);\n  el.isGroup && el.traverse(function (child) {\n    updateElementState(child, updater, commonParam);\n  });\n}\nexport function setStatesFlag(el, stateName) {\n  switch (stateName) {\n    case 'emphasis':\n      el.hoverState = HOVER_STATE_EMPHASIS;\n      break;\n    case 'normal':\n      el.hoverState = HOVER_STATE_NORMAL;\n      break;\n    case 'blur':\n      el.hoverState = HOVER_STATE_BLUR;\n      break;\n    case 'select':\n      el.selected = true;\n  }\n}\n/**\r\n * If we reuse elements when rerender.\r\n * DON'T forget to clearStates before we update the style and shape.\r\n * Or we may update on the wrong state instead of normal state.\r\n */\nexport function clearStates(el) {\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.clearStates();\n    });\n  } else {\n    el.clearStates();\n  }\n}\nfunction getFromStateStyle(el, props, toStateName, defaultValue) {\n  var style = el.style;\n  var fromState = {};\n  for (var i = 0; i < props.length; i++) {\n    var propName = props[i];\n    var val = style[propName];\n    fromState[propName] = val == null ? defaultValue && defaultValue[propName] : val;\n  }\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n    if (animator.__fromStateTransition\n    // Don't consider the animation to emphasis state.\n    && animator.__fromStateTransition.indexOf(toStateName) < 0 && animator.targetName === 'style') {\n      animator.saveTo(fromState, props);\n    }\n  }\n  return fromState;\n}\nfunction createEmphasisDefaultState(el, stateName, targetStates, state) {\n  var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\n  var cloned = false;\n  if (el instanceof Path) {\n    var store = getSavedStates(el);\n    var fromFill = hasSelect ? store.selectFill || store.normalFill : store.normalFill;\n    var fromStroke = hasSelect ? store.selectStroke || store.normalStroke : store.normalStroke;\n    if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\n      state = state || {};\n      var emphasisStyle = state.style || {};\n      // inherit case\n      if (emphasisStyle.fill === 'inherit') {\n        cloned = true;\n        state = extend({}, state);\n        emphasisStyle = extend({}, emphasisStyle);\n        emphasisStyle.fill = fromFill;\n      }\n      // Apply default color lift\n      else if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\n        cloned = true;\n        // Not modify the original value.\n        state = extend({}, state);\n        emphasisStyle = extend({}, emphasisStyle);\n        // Already being applied 'emphasis'. DON'T lift color multiple times.\n        emphasisStyle.fill = liftColor(fromFill);\n      }\n      // Not highlight stroke if fill has been highlighted.\n      else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\n        if (!cloned) {\n          state = extend({}, state);\n          emphasisStyle = extend({}, emphasisStyle);\n        }\n        emphasisStyle.stroke = liftColor(fromStroke);\n      }\n      state.style = emphasisStyle;\n    }\n  }\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      if (!cloned) {\n        state = extend({}, state);\n      }\n      var z2EmphasisLift = el.z2EmphasisLift;\n      state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\n    }\n  }\n  return state;\n}\nfunction createSelectDefaultState(el, stateName, state) {\n  // const hasSelect = indexOf(el.currentStates, stateName) >= 0;\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      state = extend({}, state);\n      var z2SelectLift = el.z2SelectLift;\n      state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\n    }\n  }\n  return state;\n}\nfunction createBlurDefaultState(el, stateName, state) {\n  var hasBlur = indexOf(el.currentStates, stateName) >= 0;\n  var currentOpacity = el.style.opacity;\n  var fromState = !hasBlur ? getFromStateStyle(el, ['opacity'], stateName, {\n    opacity: 1\n  }) : null;\n  state = state || {};\n  var blurStyle = state.style || {};\n  if (blurStyle.opacity == null) {\n    // clone state\n    state = extend({}, state);\n    blurStyle = extend({\n      // Already being applied 'emphasis'. DON'T mul opacity multiple times.\n      opacity: hasBlur ? currentOpacity : fromState.opacity * 0.1\n    }, blurStyle);\n    state.style = blurStyle;\n  }\n  return state;\n}\nfunction elementStateProxy(stateName, targetStates) {\n  var state = this.states[stateName];\n  if (this.style) {\n    if (stateName === 'emphasis') {\n      return createEmphasisDefaultState(this, stateName, targetStates, state);\n    } else if (stateName === 'blur') {\n      return createBlurDefaultState(this, stateName, state);\n    } else if (stateName === 'select') {\n      return createSelectDefaultState(this, stateName, state);\n    }\n  }\n  return state;\n}\n/**\r\n * Set hover style (namely \"emphasis style\") of element.\r\n * @param el Should not be `zrender/graphic/Group`.\r\n * @param focus 'self' | 'selfInSeries' | 'series'\r\n */\nexport function setDefaultStateProxy(el) {\n  el.stateProxy = elementStateProxy;\n  var textContent = el.getTextContent();\n  var textGuide = el.getTextGuideLine();\n  if (textContent) {\n    textContent.stateProxy = elementStateProxy;\n  }\n  if (textGuide) {\n    textGuide.stateProxy = elementStateProxy;\n  }\n}\nexport function enterEmphasisWhenMouseOver(el, e) {\n  !shouldSilent(el, e)\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasisWhenMouseOut(el, e) {\n  !shouldSilent(el, e)\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterEmphasis(el, highlightDigit) {\n  el.__highByOuter |= 1 << (highlightDigit || 0);\n  traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasis(el, highlightDigit) {\n  !(el.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterBlur(el) {\n  traverseUpdateState(el, singleEnterBlur);\n}\nexport function leaveBlur(el) {\n  traverseUpdateState(el, singleLeaveBlur);\n}\nexport function enterSelect(el) {\n  traverseUpdateState(el, singleEnterSelect);\n}\nexport function leaveSelect(el) {\n  traverseUpdateState(el, singleLeaveSelect);\n}\nfunction shouldSilent(el, e) {\n  return el.__highDownSilentOnTouch && e.zrByTouch;\n}\nexport function allLeaveBlur(api) {\n  var model = api.getModel();\n  var leaveBlurredSeries = [];\n  var allComponentViews = [];\n  model.eachComponent(function (componentType, componentModel) {\n    var componentStates = getComponentStates(componentModel);\n    var isSeries = componentType === 'series';\n    var view = isSeries ? api.getViewOfSeriesModel(componentModel) : api.getViewOfComponentModel(componentModel);\n    !isSeries && allComponentViews.push(view);\n    if (componentStates.isBlured) {\n      // Leave blur anyway\n      view.group.traverse(function (child) {\n        singleLeaveBlur(child);\n      });\n      isSeries && leaveBlurredSeries.push(componentModel);\n    }\n    componentStates.isBlured = false;\n  });\n  each(allComponentViews, function (view) {\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(leaveBlurredSeries, false, model);\n    }\n  });\n}\nexport function blurSeries(targetSeriesIndex, focus, blurScope, api) {\n  var ecModel = api.getModel();\n  blurScope = blurScope || 'coordinateSystem';\n  function leaveBlurOfIndices(data, dataIndices) {\n    for (var i = 0; i < dataIndices.length; i++) {\n      var itemEl = data.getItemGraphicEl(dataIndices[i]);\n      itemEl && leaveBlur(itemEl);\n    }\n  }\n  if (targetSeriesIndex == null) {\n    return;\n  }\n  if (!focus || focus === 'none') {\n    return;\n  }\n  var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\n  var targetCoordSys = targetSeriesModel.coordinateSystem;\n  if (targetCoordSys && targetCoordSys.master) {\n    targetCoordSys = targetCoordSys.master;\n  }\n  var blurredSeries = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var sameSeries = targetSeriesModel === seriesModel;\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.master) {\n      coordSys = coordSys.master;\n    }\n    var sameCoordSys = coordSys && targetCoordSys ? coordSys === targetCoordSys : sameSeries; // If there is no coordinate system. use sameSeries instead.\n    if (!(\n    // Not blur other series if blurScope series\n    blurScope === 'series' && !sameSeries\n    // Not blur other coordinate system if blurScope is coordinateSystem\n    || blurScope === 'coordinateSystem' && !sameCoordSys\n    // Not blur self series if focus is series.\n    || focus === 'series' && sameSeries\n    // TODO blurScope: coordinate system\n    )) {\n      var view = api.getViewOfSeriesModel(seriesModel);\n      view.group.traverse(function (child) {\n        // For the elements that have been triggered by other components,\n        // and are still required to be highlighted,\n        // because the current is directly forced to blur the element,\n        // it will cause the focus self to be unable to highlight, so skip the blur of this element.\n        if (child.__highByOuter && sameSeries && focus === 'self') {\n          return;\n        }\n        singleEnterBlur(child);\n      });\n      if (isArrayLike(focus)) {\n        leaveBlurOfIndices(seriesModel.getData(), focus);\n      } else if (isObject(focus)) {\n        var dataTypes = keys(focus);\n        for (var d = 0; d < dataTypes.length; d++) {\n          leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\n        }\n      }\n      blurredSeries.push(seriesModel);\n      getComponentStates(seriesModel).isBlured = true;\n    }\n  });\n  ecModel.eachComponent(function (componentType, componentModel) {\n    if (componentType === 'series') {\n      return;\n    }\n    var view = api.getViewOfComponentModel(componentModel);\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(blurredSeries, true, ecModel);\n    }\n  });\n}\nexport function blurComponent(componentMainType, componentIndex, api) {\n  if (componentMainType == null || componentIndex == null) {\n    return;\n  }\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n  if (!componentModel) {\n    return;\n  }\n  getComponentStates(componentModel).isBlured = true;\n  var view = api.getViewOfComponentModel(componentModel);\n  if (!view || !view.focusBlurEnabled) {\n    return;\n  }\n  view.group.traverse(function (child) {\n    singleEnterBlur(child);\n  });\n}\nexport function blurSeriesFromHighlightPayload(seriesModel, payload, api) {\n  var seriesIndex = seriesModel.seriesIndex;\n  var data = seriesModel.getData(payload.dataType);\n  if (!data) {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Unknown dataType \" + payload.dataType);\n    }\n    return;\n  }\n  var dataIndex = queryDataIndex(data, payload);\n  // Pick the first one if there is multiple/none exists.\n  dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\n  var el = data.getItemGraphicEl(dataIndex);\n  if (!el) {\n    var count = data.count();\n    var current = 0;\n    // If data on dataIndex is NaN.\n    while (!el && current < count) {\n      el = data.getItemGraphicEl(current++);\n    }\n  }\n  if (el) {\n    var ecData = getECData(el);\n    blurSeries(seriesIndex, ecData.focus, ecData.blurScope, api);\n  } else {\n    // If there is no element put on the data. Try getting it from raw option\n    // TODO Should put it on seriesModel?\n    var focus_1 = seriesModel.get(['emphasis', 'focus']);\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n    if (focus_1 != null) {\n      blurSeries(seriesIndex, focus_1, blurScope, api);\n    }\n  }\n}\nexport function findComponentHighDownDispatchers(componentMainType, componentIndex, name, api) {\n  var ret = {\n    focusSelf: false,\n    dispatchers: null\n  };\n  if (componentMainType == null || componentMainType === 'series' || componentIndex == null || name == null) {\n    return ret;\n  }\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n  if (!componentModel) {\n    return ret;\n  }\n  var view = api.getViewOfComponentModel(componentModel);\n  if (!view || !view.findHighDownDispatchers) {\n    return ret;\n  }\n  var dispatchers = view.findHighDownDispatchers(name);\n  // At presnet, the component (like Geo) only blur inside itself.\n  // So we do not use `blurScope` in component.\n  var focusSelf;\n  for (var i = 0; i < dispatchers.length; i++) {\n    if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatchers[i])) {\n      error('param should be highDownDispatcher');\n    }\n    if (getECData(dispatchers[i]).focus === 'self') {\n      focusSelf = true;\n      break;\n    }\n  }\n  return {\n    focusSelf: focusSelf,\n    dispatchers: dispatchers\n  };\n}\nexport function handleGlobalMouseOverForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n  var ecData = getECData(dispatcher);\n  var _a = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api),\n    dispatchers = _a.dispatchers,\n    focusSelf = _a.focusSelf;\n  // If `findHighDownDispatchers` is supported on the component,\n  // highlight/downplay elements with the same name.\n  if (dispatchers) {\n    if (focusSelf) {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    }\n    each(dispatchers, function (dispatcher) {\n      return enterEmphasisWhenMouseOver(dispatcher, e);\n    });\n  } else {\n    // Try blur all in the related series. Then emphasis the hoverred.\n    // TODO. progressive mode.\n    blurSeries(ecData.seriesIndex, ecData.focus, ecData.blurScope, api);\n    if (ecData.focus === 'self') {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    }\n    // Other than series, component that not support `findHighDownDispatcher` will\n    // also use it. But in this case, highlight/downplay are only supported in\n    // mouse hover but not in dispatchAction.\n    enterEmphasisWhenMouseOver(dispatcher, e);\n  }\n}\nexport function handleGlobalMouseOutForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n  allLeaveBlur(api);\n  var ecData = getECData(dispatcher);\n  var dispatchers = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api).dispatchers;\n  if (dispatchers) {\n    each(dispatchers, function (dispatcher) {\n      return leaveEmphasisWhenMouseOut(dispatcher, e);\n    });\n  } else {\n    leaveEmphasisWhenMouseOut(dispatcher, e);\n  }\n}\nexport function toggleSelectionFromPayload(seriesModel, payload, api) {\n  if (!isSelectChangePayload(payload)) {\n    return;\n  }\n  var dataType = payload.dataType;\n  var data = seriesModel.getData(dataType);\n  var dataIndex = queryDataIndex(data, payload);\n  if (!isArray(dataIndex)) {\n    dataIndex = [dataIndex];\n  }\n  seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect' : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\n}\nexport function updateSeriesElementSelection(seriesModel) {\n  var allData = seriesModel.getAllData();\n  each(allData, function (_a) {\n    var data = _a.data,\n      type = _a.type;\n    data.eachItemGraphicEl(function (el, idx) {\n      seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\n    });\n  });\n}\nexport function getAllSelectedIndices(ecModel) {\n  var ret = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var allData = seriesModel.getAllData();\n    each(allData, function (_a) {\n      var data = _a.data,\n        type = _a.type;\n      var dataIndices = seriesModel.getSelectedDataIndices();\n      if (dataIndices.length > 0) {\n        var item = {\n          dataIndex: dataIndices,\n          seriesIndex: seriesModel.seriesIndex\n        };\n        if (type != null) {\n          item.dataType = type;\n        }\n        ret.push(item);\n      }\n    });\n  });\n  return ret;\n}\n/**\r\n * Enable the function that mouseover will trigger the emphasis state.\r\n *\r\n * NOTE:\r\n * This function should be used on the element with dataIndex, seriesIndex.\r\n *\r\n */\nexport function enableHoverEmphasis(el, focus, blurScope) {\n  setAsHighDownDispatcher(el, true);\n  traverseUpdateState(el, setDefaultStateProxy);\n  enableHoverFocus(el, focus, blurScope);\n}\nexport function disableHoverEmphasis(el) {\n  setAsHighDownDispatcher(el, false);\n}\nexport function toggleHoverEmphasis(el, focus, blurScope, isDisabled) {\n  isDisabled ? disableHoverEmphasis(el) : enableHoverEmphasis(el, focus, blurScope);\n}\nexport function enableHoverFocus(el, focus, blurScope) {\n  var ecData = getECData(el);\n  if (focus != null) {\n    // TODO dataIndex may be set after this function. This check is not useful.\n    // if (ecData.dataIndex == null) {\n    //     if (__DEV__) {\n    //         console.warn('focus can only been set on element with dataIndex');\n    //     }\n    // }\n    // else {\n    ecData.focus = focus;\n    ecData.blurScope = blurScope;\n    // }\n  } else if (ecData.focus) {\n    ecData.focus = null;\n  }\n}\nvar OTHER_STATES = ['emphasis', 'blur', 'select'];\nvar defaultStyleGetterMap = {\n  itemStyle: 'getItemStyle',\n  lineStyle: 'getLineStyle',\n  areaStyle: 'getAreaStyle'\n};\n/**\r\n * Set emphasis/blur/selected states of element.\r\n */\nexport function setStatesStylesFromModel(el, itemModel, styleType,\n// default itemStyle\ngetter) {\n  styleType = styleType || 'itemStyle';\n  for (var i = 0; i < OTHER_STATES.length; i++) {\n    var stateName = OTHER_STATES[i];\n    var model = itemModel.getModel([stateName, styleType]);\n    var state = el.ensureState(stateName);\n    // Let it throw error if getterType is not found.\n    state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();\n  }\n}\n/**\r\n *\r\n * Set element as highlight / downplay dispatcher.\r\n * It will be checked when element received mouseover event or from highlight action.\r\n * It's in change of all highlight/downplay behavior of it's children.\r\n *\r\n * @param el\r\n * @param el.highDownSilentOnTouch\r\n *        In touch device, mouseover event will be trigger on touchstart event\r\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\r\n *        conveniently use hoverStyle when tap on touch screen without additional\r\n *        code for compatibility.\r\n *        But if the chart/component has select feature, which usually also use\r\n *        hoverStyle, there might be conflict between 'select-highlight' and\r\n *        'hover-highlight' especially when roam is enabled (see geo for example).\r\n *        In this case, `highDownSilentOnTouch` should be used to disable\r\n *        hover-highlight on touch device.\r\n * @param asDispatcher If `false`, do not set as \"highDownDispatcher\".\r\n */\nexport function setAsHighDownDispatcher(el, asDispatcher) {\n  var disable = asDispatcher === false;\n  var extendedEl = el;\n  // Make `highDownSilentOnTouch` and `onStateChange` only work after\n  // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\n  if (el.highDownSilentOnTouch) {\n    extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\n  }\n  // Simple optimize, since this method might be\n  // called for each elements of a group in some cases.\n  if (!disable || extendedEl.__highDownDispatcher) {\n    // Emphasis, normal can be triggered manually by API or other components like hover link.\n    // el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent);\n    // Also keep previous record.\n    extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\n    extendedEl.__highDownDispatcher = !disable;\n  }\n}\nexport function isHighDownDispatcher(el) {\n  return !!(el && el.__highDownDispatcher);\n}\n/**\r\n * Enable component highlight/downplay features:\r\n * + hover link (within the same name)\r\n * + focus blur in component\r\n */\nexport function enableComponentHighDownFeatures(el, componentModel, componentHighDownName) {\n  var ecData = getECData(el);\n  ecData.componentMainType = componentModel.mainType;\n  ecData.componentIndex = componentModel.componentIndex;\n  ecData.componentHighDownName = componentHighDownName;\n}\n/**\r\n * Support highlight/downplay record on each elements.\r\n * For the case: hover highlight/downplay (legend, visualMap, ...) and\r\n * user triggered highlight/downplay should not conflict.\r\n * Only all of the highlightDigit cleared, return to normal.\r\n * @param {string} highlightKey\r\n * @return {number} highlightDigit\r\n */\nexport function getHighlightDigit(highlightKey) {\n  var highlightDigit = _highlightKeyMap[highlightKey];\n  if (highlightDigit == null && _highlightNextDigit <= 32) {\n    highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\n  }\n  return highlightDigit;\n}\nexport function isSelectChangePayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === SELECT_ACTION_TYPE || payloadType === UNSELECT_ACTION_TYPE || payloadType === TOGGLE_SELECT_ACTION_TYPE;\n}\nexport function isHighDownPayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === HIGHLIGHT_ACTION_TYPE || payloadType === DOWNPLAY_ACTION_TYPE;\n}\nexport function savePathStates(el) {\n  var store = getSavedStates(el);\n  store.normalFill = el.style.fill;\n  store.normalStroke = el.style.stroke;\n  var selectState = el.states.select || {};\n  store.selectFill = selectState.style && selectState.style.fill || null;\n  store.selectStroke = selectState.style && selectState.style.stroke || null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isFunction, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../util/model.js';\n// Stored properties for further transition.\nexport var transitionStore = makeInner();\n/**\r\n * Return null if animation is disabled.\r\n */\nexport function getAnimationConfig(animationType, animatableModel, dataIndex,\n// Extra opts can override the option in animatable model.\nextraOpts,\n// TODO It's only for pictorial bar now.\nextraDelayParams) {\n  var animationPayload;\n  // Check if there is global animation configuration from dataZoom/resize can override the config in option.\n  // If animation is enabled. Will use this animation config in payload.\n  // If animation is disabled. Just ignore it.\n  if (animatableModel && animatableModel.ecModel) {\n    var updatePayload = animatableModel.ecModel.getUpdatePayload();\n    animationPayload = updatePayload && updatePayload.animation;\n  }\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n  var isUpdate = animationType === 'update';\n  if (animationEnabled) {\n    var duration = void 0;\n    var easing = void 0;\n    var delay = void 0;\n    if (extraOpts) {\n      duration = retrieve2(extraOpts.duration, 200);\n      easing = retrieve2(extraOpts.easing, 'cubicOut');\n      delay = 0;\n    } else {\n      duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\n      easing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\n      delay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\n    }\n    // animation from payload has highest priority.\n    if (animationPayload) {\n      animationPayload.duration != null && (duration = animationPayload.duration);\n      animationPayload.easing != null && (easing = animationPayload.easing);\n      animationPayload.delay != null && (delay = animationPayload.delay);\n    }\n    if (isFunction(delay)) {\n      delay = delay(dataIndex, extraDelayParams);\n    }\n    if (isFunction(duration)) {\n      duration = duration(dataIndex);\n    }\n    var config = {\n      duration: duration || 0,\n      delay: delay,\n      easing: easing\n    };\n    return config;\n  } else {\n    return null;\n  }\n}\nfunction animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\n  var isFrom = false;\n  var removeOpt;\n  if (isFunction(dataIndex)) {\n    during = cb;\n    cb = dataIndex;\n    dataIndex = null;\n  } else if (isObject(dataIndex)) {\n    cb = dataIndex.cb;\n    during = dataIndex.during;\n    isFrom = dataIndex.isFrom;\n    removeOpt = dataIndex.removeOpt;\n    dataIndex = dataIndex.dataIndex;\n  }\n  var isRemove = animationType === 'leave';\n  if (!isRemove) {\n    // Must stop the remove animation.\n    el.stopAnimation('leave');\n  }\n  var animationConfig = getAnimationConfig(animationType, animatableModel, dataIndex, isRemove ? removeOpt || {} : null, animatableModel && animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n  if (animationConfig && animationConfig.duration > 0) {\n    var duration = animationConfig.duration;\n    var animationDelay = animationConfig.delay;\n    var animationEasing = animationConfig.easing;\n    var animateConfig = {\n      duration: duration,\n      delay: animationDelay || 0,\n      easing: animationEasing,\n      done: cb,\n      force: !!cb || !!during,\n      // Set to final state in update/init animation.\n      // So the post processing based on the path shape can be done correctly.\n      setToFinal: !isRemove,\n      scope: animationType,\n      during: during\n    };\n    isFrom ? el.animateFrom(props, animateConfig) : el.animateTo(props, animateConfig);\n  } else {\n    el.stopAnimation();\n    // If `isFrom`, the props is the \"from\" props.\n    !isFrom && el.attr(props);\n    // Call during at least once.\n    during && during(1);\n    cb && cb();\n  }\n}\n/**\r\n * Update graphic element properties with or without animation according to the\r\n * configuration in series.\r\n *\r\n * Caution: this method will stop previous animation.\r\n * So do not use this method to one element twice before\r\n * animation starts, unless you know what you are doing.\r\n * @example\r\n *     graphic.updateProps(el, {\r\n *         position: [100, 100]\r\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\r\n *     // Or\r\n *     graphic.updateProps(el, {\r\n *         position: [100, 100]\r\n *     }, seriesModel, function () { console.log('Animation done!'); });\r\n */\nfunction updateProps(el, props,\n// TODO: TYPE AnimatableModel\nanimatableModel, dataIndex, cb, during) {\n  animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\n}\nexport { updateProps };\n/**\r\n * Init graphic element properties with or without animation according to the\r\n * configuration in series.\r\n *\r\n * Caution: this method will stop previous animation.\r\n * So do not use this method to one element twice before\r\n * animation starts, unless you know what you are doing.\r\n */\nexport function initProps(el, props, animatableModel, dataIndex, cb, during) {\n  animateOrSetProps('enter', el, props, animatableModel, dataIndex, cb, during);\n}\n/**\r\n * If element is removed.\r\n * It can determine if element is having remove animation.\r\n */\nexport function isElementRemoved(el) {\n  if (!el.__zr) {\n    return true;\n  }\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n    if (animator.scope === 'leave') {\n      return true;\n    }\n  }\n  return false;\n}\n/**\r\n * Remove graphic element\r\n */\nexport function removeElement(el, props, animatableModel, dataIndex, cb, during) {\n  // Don't do remove animation twice.\n  if (isElementRemoved(el)) {\n    return;\n  }\n  animateOrSetProps('leave', el, props, animatableModel, dataIndex, cb, during);\n}\nfunction fadeOutDisplayable(el, animatableModel, dataIndex, done) {\n  el.removeTextContent();\n  el.removeTextGuideLine();\n  removeElement(el, {\n    style: {\n      opacity: 0\n    }\n  }, animatableModel, dataIndex, done);\n}\nexport function removeElementWithFadeOut(el, animatableModel, dataIndex) {\n  function doRemove() {\n    el.parent && el.parent.remove(el);\n  }\n  // Hide label and labelLine first\n  // TODO Also use fade out animation?\n  if (!el.isGroup) {\n    fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\n  } else {\n    el.traverse(function (disp) {\n      if (!disp.isGroup) {\n        // Can invoke doRemove multiple times.\n        fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\n      }\n    });\n  }\n}\n/**\r\n * Save old style for style transition in universalTransition module.\r\n * It's used when element will be reused in each render.\r\n * For chart like map, heatmap, which will always create new element.\r\n * We don't need to save this because universalTransition can get old style from the old element\r\n */\nexport function saveOldStyle(el) {\n  transitionStore(el).oldStyle = el.style;\n}\nexport function getOldStyle(el) {\n  return transitionStore(el).oldStyle;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as pathTool from 'zrender/lib/tool/path.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport Circle from 'zrender/lib/graphic/shape/Circle.js';\nimport Ellipse from 'zrender/lib/graphic/shape/Ellipse.js';\nimport Sector from 'zrender/lib/graphic/shape/Sector.js';\nimport Ring from 'zrender/lib/graphic/shape/Ring.js';\nimport Polygon from 'zrender/lib/graphic/shape/Polygon.js';\nimport Polyline from 'zrender/lib/graphic/shape/Polyline.js';\nimport Rect from 'zrender/lib/graphic/shape/Rect.js';\nimport Line from 'zrender/lib/graphic/shape/Line.js';\nimport BezierCurve from 'zrender/lib/graphic/shape/BezierCurve.js';\nimport Arc from 'zrender/lib/graphic/shape/Arc.js';\nimport CompoundPath from 'zrender/lib/graphic/CompoundPath.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport RadialGradient from 'zrender/lib/graphic/RadialGradient.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport OrientedBoundingRect from 'zrender/lib/core/OrientedBoundingRect.js';\nimport Point from 'zrender/lib/core/Point.js';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable.js';\nimport * as subPixelOptimizeUtil from 'zrender/lib/graphic/helper/subPixelOptimize.js';\nimport { extend, isArrayLike, map, defaults, isString, keys, each, hasOwn, isArray } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved } from '../animation/basicTransition.js';\n/**\r\n * @deprecated export for compatitable reason\r\n */\nexport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved };\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar _customShapeMap = {};\n/**\r\n * Extend shape with parameters\r\n */\nexport function extendShape(opts) {\n  return Path.extend(opts);\n}\nvar extendPathFromString = pathTool.extendFromString;\n/**\r\n * Extend path\r\n */\nexport function extendPath(pathData, opts) {\n  return extendPathFromString(pathData, opts);\n}\n/**\r\n * Register a user defined shape.\r\n * The shape class can be fetched by `getShapeClass`\r\n * This method will overwrite the registered shapes, including\r\n * the registered built-in shapes, if using the same `name`.\r\n * The shape can be used in `custom series` and\r\n * `graphic component` by declaring `{type: name}`.\r\n *\r\n * @param name\r\n * @param ShapeClass Can be generated by `extendShape`.\r\n */\nexport function registerShape(name, ShapeClass) {\n  _customShapeMap[name] = ShapeClass;\n}\n/**\r\n * Find shape class registered by `registerShape`. Usually used in\r\n * fetching user defined shape.\r\n *\r\n * [Caution]:\r\n * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\r\n * to use user registered shapes.\r\n * Because the built-in shape (see `getBuiltInShape`) will be registered by\r\n * `registerShape` by default. That enables users to get both built-in\r\n * shapes as well as the shapes belonging to themsleves. But users can overwrite\r\n * the built-in shapes by using names like 'circle', 'rect' via calling\r\n * `registerShape`. So the echarts inner featrues should not fetch shapes from here\r\n * in case that it is overwritten by users, except that some features, like\r\n * `custom series`, `graphic component`, do it deliberately.\r\n *\r\n * (2) In the features like `custom series`, `graphic component`, the user input\r\n * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\r\n * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\r\n * are reserved names, that is, if some user registers a shape named `'image'`,\r\n * the shape will not be used. If we intending to add some more reserved names\r\n * in feature, that might bring break changes (disable some existing user shape\r\n * names). But that case probably rarely happens. So we don't make more mechanism\r\n * to resolve this issue here.\r\n *\r\n * @param name\r\n * @return The shape class. If not found, return nothing.\r\n */\nexport function getShapeClass(name) {\n  if (_customShapeMap.hasOwnProperty(name)) {\n    return _customShapeMap[name];\n  }\n}\n/**\r\n * Create a path element from path data string\r\n * @param pathData\r\n * @param opts\r\n * @param rect\r\n * @param layout 'center' or 'cover' default to be cover\r\n */\nexport function makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, path.getBoundingRect());\n    }\n    resizePath(path, rect);\n  }\n  return path;\n}\n/**\r\n * Create a image element from image url\r\n * @param imageUrl image url\r\n * @param opts options\r\n * @param rect constrain rect\r\n * @param layout 'center' or 'cover'. Default to be 'cover'\r\n */\nexport function makeImage(imageUrl, rect, layout) {\n  var zrImg = new ZRImage({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        zrImg.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return zrImg;\n}\n/**\r\n * Get position of centered element in bounding box.\r\n *\r\n * @param  rect         element local bounding box\r\n * @param  boundingRect constraint bounding box\r\n * @return element position containing x, y, width, and height\r\n */\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\nexport var mergePath = pathTool.mergePath;\n/**\r\n * Resize a path to fit the rect\r\n * @param path\r\n * @param rect\r\n */\nexport function resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\r\n * Sub pixel optimize line for canvas\r\n */\nexport function subPixelOptimizeLine(shape, lineWidth) {\n  subPixelOptimizeUtil.subPixelOptimizeLine(shape, shape, {\n    lineWidth: lineWidth\n  });\n  return shape;\n}\n/**\r\n * Sub pixel optimize rect for canvas\r\n */\nexport function subPixelOptimizeRect(param) {\n  subPixelOptimizeUtil.subPixelOptimizeRect(param.shape, param.shape, param.style);\n  return param;\n}\n/**\r\n * Sub pixel optimize for canvas\r\n *\r\n * @param position Coordinate, such as x, y\r\n * @param lineWidth Should be nonnegative integer.\r\n * @param positiveOrNegative Default false (negative).\r\n * @return Optimized position.\r\n */\nexport var subPixelOptimize = subPixelOptimizeUtil.subPixelOptimize;\n/**\r\n * Get transform matrix of target (param target),\r\n * in coordinate of its ancestor (param ancestor)\r\n *\r\n * @param target\r\n * @param [ancestor]\r\n */\nexport function getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n  return mat;\n}\n/**\r\n * Apply transform to an vertex.\r\n * @param target [x, y]\r\n * @param transform Can be:\r\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\r\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\r\n * @param invert Whether use invert matrix.\r\n * @return [x, y]\r\n */\nexport function applyTransform(target, transform, invert) {\n  if (transform && !isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n  return vector.applyTransform([], target, transform);\n}\n/**\r\n * @param direction 'left' 'right' 'top' 'bottom'\r\n * @param transform Transform matrix: like [1, 0, 0, 1, 0, 0]\r\n * @param invert Whether use invert matrix.\r\n * @return Transformed direction. 'left' 'right' 'top' 'bottom'\r\n */\nexport function transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\nfunction isNotGroup(el) {\n  return !el.isGroup;\n}\nfunction isPath(el) {\n  return el.shape != null;\n}\n/**\r\n * Apply group transition animation from g1 to g2.\r\n * If no animatableModel, no animation.\r\n */\nexport function groupTransition(g1, g2, animatableModel) {\n  if (!g1 || !g2) {\n    return;\n  }\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (isNotGroup(el) && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n  function getAnimatableProps(el) {\n    var obj = {\n      x: el.x,\n      y: el.y,\n      rotation: el.rotation\n    };\n    if (isPath(el)) {\n      obj.shape = extend({}, el.shape);\n    }\n    return obj;\n  }\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (isNotGroup(el) && el.anid) {\n      var oldEl = elMap1[el.anid];\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\n      }\n    }\n  });\n}\nexport function clipPointsByRect(points, rect) {\n  // FIXME: This way might be incorrect when graphic clipped by a corner\n  // and when element has a border.\n  return map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\r\n * Return a new clipped rect. If rect size are negative, return undefined.\r\n */\nexport function clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height);\n  // If the total rect is cliped, nothing, including the border,\n  // should be painted. So return undefined.\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\nexport function createIcon(iconStr,\n// Support 'image://' or 'path://' or direct svg path.\nopt, rect) {\n  var innerOpts = extend({\n    rectHover: true\n  }, opt);\n  var style = innerOpts.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), defaults(style, rect), new ZRImage(innerOpts)) : makePath(iconStr.replace('path://', ''), innerOpts, rect, 'center');\n  }\n}\n/**\r\n * Return `true` if the given line (line `a`) and the given polygon\r\n * are intersect.\r\n * Note that we do not count colinear as intersect here because no\r\n * requirement for that. We could do that if required in future.\r\n */\nexport function linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\n  for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n    var p = points[i];\n    if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\n      return true;\n    }\n    p2 = p;\n  }\n}\n/**\r\n * Return `true` if the given two lines (line `a` and line `b`)\r\n * are intersect.\r\n * Note that we do not count colinear as intersect here because no\r\n * requirement for that. We could do that if required in future.\r\n */\nexport function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n  // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\n  var mx = a2x - a1x;\n  var my = a2y - a1y;\n  var nx = b2x - b1x;\n  var ny = b2y - b1y;\n  // `vec_m` and `vec_n` are parallel iff\n  //     existing `k` such that `vec_m = k · vec_n`, equivalent to `vec_m X vec_n = 0`.\n  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n  if (nearZero(nmCrossProduct)) {\n    return false;\n  }\n  // `vec_m` and `vec_n` are intersect iff\n  //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\n  //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\n  //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\n  var b1a1x = a1x - b1x;\n  var b1a1y = a1y - b1y;\n  var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\n  if (q < 0 || q > 1) {\n    return false;\n  }\n  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n  if (p < 0 || p > 1) {\n    return false;\n  }\n  return true;\n}\n/**\r\n * Cross product of 2-dimension vector.\r\n */\nfunction crossProduct2d(x1, y1, x2, y2) {\n  return x1 * y2 - x2 * y1;\n}\nfunction nearZero(val) {\n  return val <= 1e-6 && val >= -1e-6;\n}\nexport function setTooltipConfig(opt) {\n  var itemTooltipOption = opt.itemTooltipOption;\n  var componentModel = opt.componentModel;\n  var itemName = opt.itemName;\n  var itemTooltipOptionObj = isString(itemTooltipOption) ? {\n    formatter: itemTooltipOption\n  } : itemTooltipOption;\n  var mainType = componentModel.mainType;\n  var componentIndex = componentModel.componentIndex;\n  var formatterParams = {\n    componentType: mainType,\n    name: itemName,\n    $vars: ['name']\n  };\n  formatterParams[mainType + 'Index'] = componentIndex;\n  var formatterParamsExtra = opt.formatterParamsExtra;\n  if (formatterParamsExtra) {\n    each(keys(formatterParamsExtra), function (key) {\n      if (!hasOwn(formatterParams, key)) {\n        formatterParams[key] = formatterParamsExtra[key];\n        formatterParams.$vars.push(key);\n      }\n    });\n  }\n  var ecData = getECData(opt.el);\n  ecData.componentMainType = mainType;\n  ecData.componentIndex = componentIndex;\n  ecData.tooltipConfig = {\n    name: itemName,\n    option: defaults({\n      content: itemName,\n      encodeHTMLContent: true,\n      formatterParams: formatterParams\n    }, itemTooltipOptionObj)\n  };\n}\nfunction traverseElement(el, cb) {\n  var stopped;\n  // TODO\n  // Polyfill for fixing zrender group traverse don't visit it's root issue.\n  if (el.isGroup) {\n    stopped = cb(el);\n  }\n  if (!stopped) {\n    el.traverse(cb);\n  }\n}\nexport function traverseElements(els, cb) {\n  if (els) {\n    if (isArray(els)) {\n      for (var i = 0; i < els.length; i++) {\n        traverseElement(els[i], cb);\n      }\n    } else {\n      traverseElement(els, cb);\n    }\n  }\n}\n// Register built-in shapes. These shapes might be overwritten\n// by users, although we do not recommend that.\nregisterShape('circle', Circle);\nregisterShape('ellipse', Ellipse);\nregisterShape('sector', Sector);\nregisterShape('ring', Ring);\nregisterShape('polygon', Polygon);\nregisterShape('polyline', Polyline);\nregisterShape('rect', Rect);\nregisterShape('line', Line);\nregisterShape('bezierCurve', BezierCurve);\nregisterShape('arc', Arc);\nexport { Group, ZRImage as Image, ZRText as Text, Circle, Ellipse, Sector, Ring, Polygon, Polyline, Rect, Line, BezierCurve, Arc, IncrementalDisplayable, CompoundPath, LinearGradient, RadialGradient, BoundingRect, OrientedBoundingRect, Point, Path };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { isFunction, retrieve2, extend, keys, trim } from 'zrender/lib/core/util.js';\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\nimport { deprecateReplaceLog } from '../util/log.js';\nimport { makeInner, interpolateRawValues } from '../util/model.js';\nimport { initProps, updateProps } from '../util/graphic.js';\nvar EMPTY_OBJ = {};\nexport function setLabelText(label, labelTexts) {\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n  if (baseText == null) {\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n  var statesText = {\n    normal: baseText\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n  return statesText;\n}\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified\n// TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof ZRText;\n  var needsCreateText = false;\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new ZRText();\n        targetEl.setTextContent(textContent);\n      }\n      // Use same state proxy\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    }\n    // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto silent is those cases.\n    textContent.silent = !!normalModel.getShallow('silent');\n    // Keep x and y\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n    textContent.ignore = !showNormal;\n    // Always create new style.\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n  targetEl.dirty();\n}\nexport { setLabelStyle };\nexport function getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n  return statesModels;\n}\n/**\r\n * Set basic textStyle properties.\r\n */\nexport function createTextStyle(textStyleModel, specifiedTextStyle,\n// Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle);\n  // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n  return textStyle;\n}\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside');\n  // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magric type should be considered.\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  }\n  // fill and auto is determined by the color of path fill if it's not specified by developers.\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  return textConfig;\n}\n/**\r\n * The uniform entry of set text style, that is, retrieve style definitions\r\n * from `model` and set to `textStyle` object.\r\n *\r\n * Never in merge mode, but in overwrite mode, that is, all of the text style\r\n * properties will be set. (Consider the states of normal and emphasis and\r\n * default value can be adopted, merge would make the logic too complicated\r\n * to manage.)\r\n */\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle;\n  // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n  if (richItemNames) {\n    richResult = {};\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]);\n        // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n  var overflow = textStyleModel.get('overflow');\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n  var margin = textStyleModel.get('minMargin');\n  if (margin != null) {\n    textStyle.margin = margin;\n  }\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n}\n// Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = keys(rich);\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n    textStyleModel = textStyleModel.parentModel;\n  }\n  return richItemNameMap;\n}\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign', 'ellipsis'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n  if (fillColor != null) {\n    textStyle.fill = fillColor;\n  }\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  }\n  // TODO\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  }\n  // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n    var borderType = textStyleModel.getShallow('borderType');\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n      textStyle.backgroundColor = inheritColor;\n    }\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\nexport function getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return trim([\n  // FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\nexport var labelInner = makeInner();\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText;\n  // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n  function during(percent) {\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getFont } from '../../label/labelStyle.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nvar PATH_COLOR = ['textStyle', 'color'];\nvar textStyleParams = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'padding', 'lineHeight', 'rich', 'width', 'height', 'overflow'];\n// TODO Performance improvement?\nvar tmpText = new ZRText();\nvar TextStyleMixin = /** @class */function () {\n  function TextStyleMixin() {}\n  /**\r\n   * Get color property or get color from option.textStyle.color\r\n   */\n  // TODO Callback\n  TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\n    var ecModel = this.ecModel;\n    return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n  };\n  /**\r\n   * Create font string from fontStyle, fontWeight, fontSize, fontFamily\r\n   * @return {string}\r\n   */\n  TextStyleMixin.prototype.getFont = function () {\n    return getFont({\n      fontStyle: this.getShallow('fontStyle'),\n      fontWeight: this.getShallow('fontWeight'),\n      fontSize: this.getShallow('fontSize'),\n      fontFamily: this.getShallow('fontFamily')\n    }, this.ecModel);\n  };\n  TextStyleMixin.prototype.getTextRect = function (text) {\n    var style = {\n      text: text,\n      verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline')\n    };\n    for (var i = 0; i < textStyleParams.length; i++) {\n      style[textStyleParams[i]] = this.getShallow(textStyleParams[i]);\n    }\n    tmpText.useStyle(style);\n    tmpText.update();\n    return tmpText.getBoundingRect();\n  };\n  return TextStyleMixin;\n}();\n;\nexport default TextStyleMixin;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var LINE_STYLE_KEY_MAP = [['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'type'], ['lineDashOffset', 'dashOffset'], ['lineCap', 'cap'], ['lineJoin', 'join'], ['miterLimit']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\nvar LineStyleMixin = /** @class */function () {\n  function LineStyleMixin() {}\n  LineStyleMixin.prototype.getLineStyle = function (excludes) {\n    return getLineStyle(this, excludes);\n  };\n  return LineStyleMixin;\n}();\n;\nexport { LineStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var ITEM_STYLE_KEY_MAP = [['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'borderType'], ['lineDashOffset', 'borderDashOffset'], ['lineCap', 'borderCap'], ['lineJoin', 'borderJoin'], ['miterLimit', 'borderMiterLimit']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\nvar ItemStyleMixin = /** @class */function () {\n  function ItemStyleMixin() {}\n  ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\n    return getItemStyle(this, excludes, includes);\n  };\n  return ItemStyleMixin;\n}();\nexport { ItemStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport env from 'zrender/lib/core/env.js';\nimport { enableClassExtend, enableClassCheck } from '../util/clazz.js';\nimport { AreaStyleMixin } from './mixin/areaStyle.js';\nimport TextStyleMixin from './mixin/textStyle.js';\nimport { LineStyleMixin } from './mixin/lineStyle.js';\nimport { ItemStyleMixin } from './mixin/itemStyle.js';\nimport { mixin, clone, merge } from 'zrender/lib/core/util.js';\nvar Model = /** @class */function () {\n  function Model(option, parentModel, ecModel) {\n    this.parentModel = parentModel;\n    this.ecModel = ecModel;\n    this.option = option;\n    // Simple optimization\n    // if (this.init) {\n    //     if (arguments.length <= 4) {\n    //         this.init(option, parentModel, ecModel, extraOpt);\n    //     }\n    //     else {\n    //         this.init.apply(this, arguments);\n    //     }\n    // }\n  }\n  Model.prototype.init = function (option, parentModel, ecModel) {\n    var rest = [];\n    for (var _i = 3; _i < arguments.length; _i++) {\n      rest[_i - 3] = arguments[_i];\n    }\n  };\n  /**\r\n   * Merge the input option to me.\r\n   */\n  Model.prototype.mergeOption = function (option, ecModel) {\n    merge(this.option, option, true);\n  };\n  // `path` can be 'a.b.c', so the return value type have to be `ModelOption`\n  // TODO: TYPE strict key check?\n  // get(path: string | string[], ignoreParent?: boolean): ModelOption;\n  Model.prototype.get = function (path, ignoreParent) {\n    if (path == null) {\n      return this.option;\n    }\n    return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\n  };\n  Model.prototype.getShallow = function (key, ignoreParent) {\n    var option = this.option;\n    var val = option == null ? option : option[key];\n    if (val == null && !ignoreParent) {\n      var parentModel = this.parentModel;\n      if (parentModel) {\n        // FIXME:TS do not know how to make it works\n        val = parentModel.getShallow(key);\n      }\n    }\n    return val;\n  };\n  // `path` can be 'a.b.c', so the return value type have to be `Model<ModelOption>`\n  // getModel(path: string | string[], parentModel?: Model): Model;\n  // TODO 'a.b.c' is deprecated\n  Model.prototype.getModel = function (path, parentModel) {\n    var hasPath = path != null;\n    var pathFinal = hasPath ? this.parsePath(path) : null;\n    var obj = hasPath ? this._doGet(pathFinal) : this.option;\n    parentModel = parentModel || this.parentModel && this.parentModel.getModel(this.resolveParentPath(pathFinal));\n    return new Model(obj, parentModel, this.ecModel);\n  };\n  /**\r\n   * If model has option\r\n   */\n  Model.prototype.isEmpty = function () {\n    return this.option == null;\n  };\n  Model.prototype.restoreData = function () {};\n  // Pending\n  Model.prototype.clone = function () {\n    var Ctor = this.constructor;\n    return new Ctor(clone(this.option));\n  };\n  // setReadOnly(properties): void {\n  // clazzUtil.setReadOnly(this, properties);\n  // }\n  // If path is null/undefined, return null/undefined.\n  Model.prototype.parsePath = function (path) {\n    if (typeof path === 'string') {\n      return path.split('.');\n    }\n    return path;\n  };\n  // Resolve path for parent. Perhaps useful when parent use a different property.\n  // Default to be a identity resolver.\n  // Can be modified to a different resolver.\n  Model.prototype.resolveParentPath = function (path) {\n    return path;\n  };\n  // FIXME:TS check whether put this method here\n  Model.prototype.isAnimationEnabled = function () {\n    if (!env.node && this.option) {\n      if (this.option.animation != null) {\n        return !!this.option.animation;\n      } else if (this.parentModel) {\n        return this.parentModel.isAnimationEnabled();\n      }\n    }\n  };\n  Model.prototype._doGet = function (pathArr, parentModel) {\n    var obj = this.option;\n    if (!pathArr) {\n      return obj;\n    }\n    for (var i = 0; i < pathArr.length; i++) {\n      // Ignore empty\n      if (!pathArr[i]) {\n        continue;\n      }\n      // obj could be number/string/... (like 0)\n      obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n      if (obj == null) {\n        break;\n      }\n    }\n    if (obj == null && parentModel) {\n      obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\n    }\n    return obj;\n  };\n  return Model;\n}();\n;\n// Enable Model.extend.\nenableClassExtend(Model);\nenableClassCheck(Model);\nmixin(Model, LineStyleMixin);\nmixin(Model, ItemStyleMixin);\nmixin(Model, AreaStyleMixin);\nmixin(Model, TextStyleMixin);\nexport default Model;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\nimport { makePrintable } from './log.js';\n// A random offset\nvar base = Math.round(Math.random() * 10);\n/**\r\n * @public\r\n * @param {string} type\r\n * @return {string}\r\n */\nexport function getUID(type) {\n  // Considering the case of crossing js context,\n  // use Math.random to make id as unique as possible.\n  return [type || '', base++].join('_');\n}\n/**\r\n * Implements `SubTypeDefaulterManager` for `target`.\r\n */\nexport function enableSubTypeDefaulter(target) {\n  var subTypeDefaulters = {};\n  target.registerSubTypeDefaulter = function (componentType, defaulter) {\n    var componentTypeInfo = parseClassType(componentType);\n    subTypeDefaulters[componentTypeInfo.main] = defaulter;\n  };\n  target.determineSubType = function (componentType, option) {\n    var type = option.type;\n    if (!type) {\n      var componentTypeMain = parseClassType(componentType).main;\n      if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n        type = subTypeDefaulters[componentTypeMain](option);\n      }\n    }\n    return type;\n  };\n}\n/**\r\n * Implements `TopologicalTravelable<any>` for `entity`.\r\n *\r\n * Topological travel on Activity Network (Activity On Vertices).\r\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\r\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\r\n * If there is circular dependencey, Error will be thrown.\r\n */\nexport function enableTopologicalTravel(entity, dependencyGetter) {\n  /**\r\n   * @param targetNameList Target Component type list.\r\n   *                       Can be ['aa', 'bb', 'aa.xx']\r\n   * @param fullNameList By which we can build dependency graph.\r\n   * @param callback Params: componentType, dependencies.\r\n   * @param context Scope of callback.\r\n   */\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n    if (!targetNameList.length) {\n      return;\n    }\n    var result = makeDepndencyGraph(fullNameList);\n    var graph = result.graph;\n    var noEntryList = result.noEntryList;\n    var targetNameSet = {};\n    zrUtil.each(targetNameList, function (name) {\n      targetNameSet[name] = true;\n    });\n    while (noEntryList.length) {\n      var currComponentType = noEntryList.pop();\n      var currVertex = graph[currComponentType];\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\n      if (isInTargetNameSet) {\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\n        delete targetNameSet[currComponentType];\n      }\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n    }\n    zrUtil.each(targetNameSet, function () {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Circular dependency may exists: ', targetNameSet, targetNameList, fullNameList);\n      }\n      throw new Error(errMsg);\n    });\n    function removeEdge(succComponentType) {\n      graph[succComponentType].entryCount--;\n      if (graph[succComponentType].entryCount === 0) {\n        noEntryList.push(succComponentType);\n      }\n    }\n    // Consider this case: legend depends on series, and we call\n    // chart.setOption({series: [...]}), where only series is in option.\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n    // not be called, but only sereis.mergeOption is called. Thus legend\n    // have no chance to update its local record about series (like which\n    // name of series is available in legend).\n    function removeEdgeAndAdd(succComponentType) {\n      targetNameSet[succComponentType] = true;\n      removeEdge(succComponentType);\n    }\n  };\n  function makeDepndencyGraph(fullNameList) {\n    var graph = {};\n    var noEntryList = [];\n    zrUtil.each(fullNameList, function (name) {\n      var thisItem = createDependencyGraphItem(graph, name);\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n      thisItem.entryCount = availableDeps.length;\n      if (thisItem.entryCount === 0) {\n        noEntryList.push(name);\n      }\n      zrUtil.each(availableDeps, function (dependentName) {\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\n          thisItem.predecessor.push(dependentName);\n        }\n        var thatItem = createDependencyGraphItem(graph, dependentName);\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\n          thatItem.successor.push(name);\n        }\n      });\n    });\n    return {\n      graph: graph,\n      noEntryList: noEntryList\n    };\n  }\n  function createDependencyGraphItem(graph, name) {\n    if (!graph[name]) {\n      graph[name] = {\n        predecessor: [],\n        successor: []\n      };\n    }\n    return graph[name];\n  }\n  function getAvailableDependencies(originalDeps, fullNameList) {\n    var availableDeps = [];\n    zrUtil.each(originalDeps, function (dep) {\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n    });\n    return availableDeps;\n  }\n}\nexport function inheritDefaultOption(superOption, subOption) {\n  // See also `model/Component.ts#getDefaultOption`\n  return zrUtil.merge(zrUtil.merge({}, superOption, true), subOption, true);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport Model from '../model/Model.js';\nimport env from 'zrender/lib/core/env.js';\n// default import ZH and EN lang\nimport langEN from '../i18n/langEN.js';\nimport langZH from '../i18n/langZH.js';\nimport { isString, clone, merge } from 'zrender/lib/core/util.js';\nvar LOCALE_ZH = 'ZH';\nvar LOCALE_EN = 'EN';\nvar DEFAULT_LOCALE = LOCALE_EN;\nvar localeStorage = {};\nvar localeModels = {};\nexport var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : function () {\n  var langStr = (/* eslint-disable-next-line */\n  document.documentElement.lang || navigator.language || navigator.browserLanguage || DEFAULT_LOCALE).toUpperCase();\n  return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\n}();\nexport function registerLocale(locale, localeObj) {\n  locale = locale.toUpperCase();\n  localeModels[locale] = new Model(localeObj);\n  localeStorage[locale] = localeObj;\n}\n// export function getLocale(locale: string) {\n//     return localeStorage[locale];\n// }\nexport function createLocaleObject(locale) {\n  if (isString(locale)) {\n    var localeObj = localeStorage[locale.toUpperCase()] || {};\n    if (locale === LOCALE_ZH || locale === LOCALE_EN) {\n      return clone(localeObj);\n    } else {\n      return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\n    }\n  } else {\n    return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\n  }\n}\nexport function getLocaleModel(lang) {\n  return localeModels[lang];\n}\nexport function getDefaultLocaleModel() {\n  return localeModels[DEFAULT_LOCALE];\n}\n// Default locale\nregisterLocale(LOCALE_EN, langEN);\nregisterLocale(LOCALE_ZH, langZH);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n/**\r\n * Language: English.\r\n */\nexport default {\n  time: {\n    month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    monthAbbr: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    dayOfWeek: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    dayOfWeekAbbr: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  },\n  legend: {\n    selector: {\n      all: 'All',\n      inverse: 'Inv'\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: 'Box Select',\n        polygon: 'Lasso Select',\n        lineX: 'Horizontally Select',\n        lineY: 'Vertically Select',\n        keep: 'Keep Selections',\n        clear: 'Clear Selections'\n      }\n    },\n    dataView: {\n      title: 'Data View',\n      lang: ['Data View', 'Close', 'Refresh']\n    },\n    dataZoom: {\n      title: {\n        zoom: 'Zoom',\n        back: 'Zoom Reset'\n      }\n    },\n    magicType: {\n      title: {\n        line: 'Switch to Line Chart',\n        bar: 'Switch to Bar Chart',\n        stack: 'Stack',\n        tiled: 'Tile'\n      }\n    },\n    restore: {\n      title: 'Restore'\n    },\n    saveAsImage: {\n      title: 'Save as Image',\n      lang: ['Right Click to Save Image']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: 'Pie chart',\n      bar: 'Bar chart',\n      line: 'Line chart',\n      scatter: 'Scatter plot',\n      effectScatter: 'Ripple scatter plot',\n      radar: 'Radar chart',\n      tree: 'Tree',\n      treemap: 'Treemap',\n      boxplot: 'Boxplot',\n      candlestick: 'Candlestick',\n      k: 'K line chart',\n      heatmap: 'Heat map',\n      map: 'Map',\n      parallel: 'Parallel coordinate map',\n      lines: 'Line graph',\n      graph: 'Relationship graph',\n      sankey: 'Sankey diagram',\n      funnel: 'Funnel chart',\n      gauge: 'Gauge',\n      pictorialBar: 'Pictorial bar',\n      themeRiver: 'Theme River Map',\n      sunburst: 'Sunburst',\n      custom: 'Custom chart',\n      chart: 'Chart'\n    }\n  },\n  aria: {\n    general: {\n      withTitle: 'This is a chart about \"{title}\"',\n      withoutTitle: 'This is a chart'\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: ' with type {seriesType} named {seriesName}.',\n        withoutName: ' with type {seriesType}.'\n      },\n      multiple: {\n        prefix: '. It consists of {seriesCount} series count.',\n        withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\n        withoutName: ' The {seriesId} series is a {seriesType}.',\n        separator: {\n          middle: '',\n          end: ''\n        }\n      }\n    },\n    data: {\n      allData: 'The data is as follows: ',\n      partialData: 'The first {displayCnt} items are: ',\n      withName: 'the data for {name} is {value}',\n      withoutName: '{value}',\n      separator: {\n        middle: ', ',\n        end: '. '\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\nexport default {\n  time: {\n    month: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\n    monthAbbr: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n    dayOfWeek: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\n    dayOfWeekAbbr: ['日', '一', '二', '三', '四', '五', '六']\n  },\n  legend: {\n    selector: {\n      all: '全选',\n      inverse: '反选'\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: '矩形选择',\n        polygon: '圈选',\n        lineX: '横向选择',\n        lineY: '纵向选择',\n        keep: '保持选择',\n        clear: '清除选择'\n      }\n    },\n    dataView: {\n      title: '数据视图',\n      lang: ['数据视图', '关闭', '刷新']\n    },\n    dataZoom: {\n      title: {\n        zoom: '区域缩放',\n        back: '区域缩放还原'\n      }\n    },\n    magicType: {\n      title: {\n        line: '切换为折线图',\n        bar: '切换为柱状图',\n        stack: '切换为堆叠',\n        tiled: '切换为平铺'\n      }\n    },\n    restore: {\n      title: '还原'\n    },\n    saveAsImage: {\n      title: '保存为图片',\n      lang: ['右键另存为图片']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: '饼图',\n      bar: '柱状图',\n      line: '折线图',\n      scatter: '散点图',\n      effectScatter: '涟漪散点图',\n      radar: '雷达图',\n      tree: '树图',\n      treemap: '矩形树图',\n      boxplot: '箱型图',\n      candlestick: 'K线图',\n      k: 'K线图',\n      heatmap: '热力图',\n      map: '地图',\n      parallel: '平行坐标图',\n      lines: '线图',\n      graph: '关系图',\n      sankey: '桑基图',\n      funnel: '漏斗图',\n      gauge: '仪表盘图',\n      pictorialBar: '象形柱图',\n      themeRiver: '主题河流图',\n      sunburst: '旭日图',\n      custom: '自定义图表',\n      chart: '图表'\n    }\n  },\n  aria: {\n    general: {\n      withTitle: '这是一个关于“{title}”的图表。',\n      withoutTitle: '这是一个图表，'\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: '图表类型是{seriesType}，表示{seriesName}。',\n        withoutName: '图表类型是{seriesType}。'\n      },\n      multiple: {\n        prefix: '它由{seriesCount}个图表系列组成。',\n        withName: '第{seriesId}个系列是一个表示{seriesName}的{seriesType}，',\n        withoutName: '第{seriesId}个系列是一个{seriesType}，',\n        separator: {\n          middle: '；',\n          end: '。'\n        }\n      }\n    },\n    data: {\n      allData: '其数据是——',\n      partialData: '其中，前{displayCnt}项是——',\n      withName: '{name}的数据是{value}',\n      withoutName: '{value}',\n      separator: {\n        middle: '，',\n        end: ''\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from './number.js';\nimport { getDefaultLocaleModel, getLocaleModel, SYSTEM_LANG } from '../core/locale.js';\nimport Model from '../model/Model.js';\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = ONE_SECOND * 60;\nexport var ONE_HOUR = ONE_MINUTE * 60;\nexport var ONE_DAY = ONE_HOUR * 24;\nexport var ONE_YEAR = ONE_DAY * 365;\nexport var defaultLeveledFormatter = {\n  year: '{yyyy}',\n  month: '{MMM}',\n  day: '{d}',\n  hour: '{HH}:{mm}',\n  minute: '{HH}:{mm}',\n  second: '{HH}:{mm}:{ss}',\n  millisecond: '{HH}:{mm}:{ss} {SSS}',\n  none: '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}'\n};\nvar fullDayFormatter = '{yyyy}-{MM}-{dd}';\nexport var fullLeveledFormatter = {\n  year: '{yyyy}',\n  month: '{yyyy}-{MM}',\n  day: fullDayFormatter,\n  hour: fullDayFormatter + ' ' + defaultLeveledFormatter.hour,\n  minute: fullDayFormatter + ' ' + defaultLeveledFormatter.minute,\n  second: fullDayFormatter + ' ' + defaultLeveledFormatter.second,\n  millisecond: defaultLeveledFormatter.none\n};\nexport var primaryTimeUnits = ['year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'];\nexport var timeUnits = ['year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day', 'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'];\nexport function pad(str, len) {\n  str += '';\n  return '0000'.substr(0, len - str.length) + str;\n}\nexport function getPrimaryTimeUnit(timeUnit) {\n  switch (timeUnit) {\n    case 'half-year':\n    case 'quarter':\n      return 'month';\n    case 'week':\n    case 'half-week':\n      return 'day';\n    case 'half-day':\n    case 'quarter-day':\n      return 'hour';\n    default:\n      // year, minutes, second, milliseconds\n      return timeUnit;\n  }\n}\nexport function isPrimaryTimeUnit(timeUnit) {\n  return timeUnit === getPrimaryTimeUnit(timeUnit);\n}\nexport function getDefaultFormatPrecisionOfInterval(timeUnit) {\n  switch (timeUnit) {\n    case 'year':\n    case 'month':\n      return 'day';\n    case 'millisecond':\n      return 'millisecond';\n    default:\n      // Also for day, hour, minute, second\n      return 'second';\n  }\n}\nexport function format(\n// Note: The result based on `isUTC` are totally different, which can not be just simply\n// substituted by the result without `isUTC`. So we make the param `isUTC` mandatory.\ntime, template, isUTC, lang) {\n  var date = numberUtil.parseDate(time);\n  var y = date[fullYearGetterName(isUTC)]();\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var q = Math.floor((M - 1) / 3) + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\n  var H = date[hoursGetterName(isUTC)]();\n  var h = (H - 1) % 12 + 1;\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var a = H >= 12 ? 'pm' : 'am';\n  var A = a.toUpperCase();\n  var localeModel = lang instanceof Model ? lang : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\n  var timeModel = localeModel.getModel('time');\n  var month = timeModel.get('month');\n  var monthAbbr = timeModel.get('monthAbbr');\n  var dayOfWeek = timeModel.get('dayOfWeek');\n  var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\n  return (template || '').replace(/{a}/g, a + '').replace(/{A}/g, A + '').replace(/{yyyy}/g, y + '').replace(/{yy}/g, pad(y % 100 + '', 2)).replace(/{Q}/g, q + '').replace(/{MMMM}/g, month[M - 1]).replace(/{MMM}/g, monthAbbr[M - 1]).replace(/{MM}/g, pad(M, 2)).replace(/{M}/g, M + '').replace(/{dd}/g, pad(d, 2)).replace(/{d}/g, d + '').replace(/{eeee}/g, dayOfWeek[e]).replace(/{ee}/g, dayOfWeekAbbr[e]).replace(/{e}/g, e + '').replace(/{HH}/g, pad(H, 2)).replace(/{H}/g, H + '').replace(/{hh}/g, pad(h + '', 2)).replace(/{h}/g, h + '').replace(/{mm}/g, pad(m, 2)).replace(/{m}/g, m + '').replace(/{ss}/g, pad(s, 2)).replace(/{s}/g, s + '').replace(/{SSS}/g, pad(S, 3)).replace(/{S}/g, S + '');\n}\nexport function leveledFormat(tick, idx, formatter, lang, isUTC) {\n  var template = null;\n  if (zrUtil.isString(formatter)) {\n    // Single formatter for all units at all levels\n    template = formatter;\n  } else if (zrUtil.isFunction(formatter)) {\n    // Callback formatter\n    template = formatter(tick.value, idx, {\n      level: tick.level\n    });\n  } else {\n    var defaults = zrUtil.extend({}, defaultLeveledFormatter);\n    if (tick.level > 0) {\n      for (var i = 0; i < primaryTimeUnits.length; ++i) {\n        defaults[primaryTimeUnits[i]] = \"{primary|\" + defaults[primaryTimeUnits[i]] + \"}\";\n      }\n    }\n    var mergedFormatter = formatter ? formatter.inherit === false ? formatter // Use formatter with bigger units\n    : zrUtil.defaults(formatter, defaults) : defaults;\n    var unit = getUnitFromValue(tick.value, isUTC);\n    if (mergedFormatter[unit]) {\n      template = mergedFormatter[unit];\n    } else if (mergedFormatter.inherit) {\n      // Unit formatter is not defined and should inherit from bigger units\n      var targetId = timeUnits.indexOf(unit);\n      for (var i = targetId - 1; i >= 0; --i) {\n        if (mergedFormatter[unit]) {\n          template = mergedFormatter[unit];\n          break;\n        }\n      }\n      template = template || defaults.none;\n    }\n    if (zrUtil.isArray(template)) {\n      var levelId = tick.level == null ? 0 : tick.level >= 0 ? tick.level : template.length + tick.level;\n      levelId = Math.min(levelId, template.length - 1);\n      template = template[levelId];\n    }\n  }\n  return format(new Date(tick.value), template, isUTC, lang);\n}\nexport function getUnitFromValue(value, isUTC) {\n  var date = numberUtil.parseDate(value);\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var h = date[hoursGetterName(isUTC)]();\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var isSecond = S === 0;\n  var isMinute = isSecond && s === 0;\n  var isHour = isMinute && m === 0;\n  var isDay = isHour && h === 0;\n  var isMonth = isDay && d === 1;\n  var isYear = isMonth && M === 1;\n  if (isYear) {\n    return 'year';\n  } else if (isMonth) {\n    return 'month';\n  } else if (isDay) {\n    return 'day';\n  } else if (isHour) {\n    return 'hour';\n  } else if (isMinute) {\n    return 'minute';\n  } else if (isSecond) {\n    return 'second';\n  } else {\n    return 'millisecond';\n  }\n}\nexport function getUnitValue(value, unit, isUTC) {\n  var date = zrUtil.isNumber(value) ? numberUtil.parseDate(value) : value;\n  unit = unit || getUnitFromValue(value, isUTC);\n  switch (unit) {\n    case 'year':\n      return date[fullYearGetterName(isUTC)]();\n    case 'half-year':\n      return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\n    case 'quarter':\n      return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\n    case 'month':\n      return date[monthGetterName(isUTC)]();\n    case 'day':\n      return date[dateGetterName(isUTC)]();\n    case 'half-day':\n      return date[hoursGetterName(isUTC)]() / 24;\n    case 'hour':\n      return date[hoursGetterName(isUTC)]();\n    case 'minute':\n      return date[minutesGetterName(isUTC)]();\n    case 'second':\n      return date[secondsGetterName(isUTC)]();\n    case 'millisecond':\n      return date[millisecondsGetterName(isUTC)]();\n  }\n}\nexport function fullYearGetterName(isUTC) {\n  return isUTC ? 'getUTCFullYear' : 'getFullYear';\n}\nexport function monthGetterName(isUTC) {\n  return isUTC ? 'getUTCMonth' : 'getMonth';\n}\nexport function dateGetterName(isUTC) {\n  return isUTC ? 'getUTCDate' : 'getDate';\n}\nexport function hoursGetterName(isUTC) {\n  return isUTC ? 'getUTCHours' : 'getHours';\n}\nexport function minutesGetterName(isUTC) {\n  return isUTC ? 'getUTCMinutes' : 'getMinutes';\n}\nexport function secondsGetterName(isUTC) {\n  return isUTC ? 'getUTCSeconds' : 'getSeconds';\n}\nexport function millisecondsGetterName(isUTC) {\n  return isUTC ? 'getUTCMilliseconds' : 'getMilliseconds';\n}\nexport function fullYearSetterName(isUTC) {\n  return isUTC ? 'setUTCFullYear' : 'setFullYear';\n}\nexport function monthSetterName(isUTC) {\n  return isUTC ? 'setUTCMonth' : 'setMonth';\n}\nexport function dateSetterName(isUTC) {\n  return isUTC ? 'setUTCDate' : 'setDate';\n}\nexport function hoursSetterName(isUTC) {\n  return isUTC ? 'setUTCHours' : 'setHours';\n}\nexport function minutesSetterName(isUTC) {\n  return isUTC ? 'setUTCMinutes' : 'setMinutes';\n}\nexport function secondsSetterName(isUTC) {\n  return isUTC ? 'setUTCSeconds' : 'setSeconds';\n}\nexport function millisecondsSetterName(isUTC) {\n  return isUTC ? 'setUTCMilliseconds' : 'setMilliseconds';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { encodeHTML } from 'zrender/lib/core/dom.js';\nimport { parseDate, isNumeric, numericToNumber } from './number.js';\nimport { format as timeFormat, pad } from './time.js';\nimport { deprecateReplaceLog } from './log.js';\n/**\r\n * Add a comma each three digit.\r\n */\nexport function addCommas(x) {\n  if (!isNumeric(x)) {\n    return zrUtil.isString(x) ? x : '-';\n  }\n  var parts = (x + '').split('.');\n  return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (parts.length > 1 ? '.' + parts[1] : '');\n}\nexport function toCamelCase(str, upperCaseFirst) {\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n  if (upperCaseFirst && str) {\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n  }\n  return str;\n}\nexport var normalizeCssArray = zrUtil.normalizeCssArray;\nexport { encodeHTML };\n/**\r\n * Make value user readable for tooltip and label.\r\n * \"User readable\":\r\n *     Try to not print programmer-specific text like NaN, Infinity, null, undefined.\r\n *     Avoid to display an empty string, which users can not recognize there is\r\n *     a value and it might look like a bug.\r\n */\nexport function makeValueReadable(value, valueType, useUTC) {\n  var USER_READABLE_DEFUALT_TIME_PATTERN = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}';\n  function stringToUserReadable(str) {\n    return str && zrUtil.trim(str) ? str : '-';\n  }\n  function isNumberUserReadable(num) {\n    return !!(num != null && !isNaN(num) && isFinite(num));\n  }\n  var isTypeTime = valueType === 'time';\n  var isValueDate = value instanceof Date;\n  if (isTypeTime || isValueDate) {\n    var date = isTypeTime ? parseDate(value) : value;\n    if (!isNaN(+date)) {\n      return timeFormat(date, USER_READABLE_DEFUALT_TIME_PATTERN, useUTC);\n    } else if (isValueDate) {\n      return '-';\n    }\n    // In other cases, continue to try to display the value in the following code.\n  }\n  if (valueType === 'ordinal') {\n    return zrUtil.isStringSafe(value) ? stringToUserReadable(value) : zrUtil.isNumber(value) ? isNumberUserReadable(value) ? value + '' : '-' : '-';\n  }\n  // By default.\n  var numericResult = numericToNumber(value);\n  return isNumberUserReadable(numericResult) ? addCommas(numericResult) : zrUtil.isStringSafe(value) ? stringToUserReadable(value) : typeof value === 'boolean' ? value + '' : '-';\n}\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\nvar wrapVar = function (varName, seriesIdx) {\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n};\n/**\r\n * Template formatter\r\n * @param {Array.<Object>|Object} paramsList\r\n */\nexport function formatTpl(tpl, paramsList, encode) {\n  if (!zrUtil.isArray(paramsList)) {\n    paramsList = [paramsList];\n  }\n  var seriesLen = paramsList.length;\n  if (!seriesLen) {\n    return '';\n  }\n  var $vars = paramsList[0].$vars || [];\n  for (var i = 0; i < $vars.length; i++) {\n    var alias = TPL_VAR_ALIAS[i];\n    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n  }\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n    for (var k = 0; k < $vars.length; k++) {\n      var val = paramsList[seriesIdx][$vars[k]];\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n    }\n  }\n  return tpl;\n}\n/**\r\n * simple Template formatter\r\n */\nexport function formatTplSimple(tpl, param, encode) {\n  zrUtil.each(param, function (value, key) {\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\n  });\n  return tpl;\n}\nexport function getTooltipMarker(inOpt, extraCssText) {\n  var opt = zrUtil.isString(inOpt) ? {\n    color: inOpt,\n    extraCssText: extraCssText\n  } : inOpt || {};\n  var color = opt.color;\n  var type = opt.type;\n  extraCssText = opt.extraCssText;\n  var renderMode = opt.renderMode || 'html';\n  if (!color) {\n    return '';\n  }\n  if (renderMode === 'html') {\n    return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:'\n    // Only support string\n    + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:4px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n  } else {\n    // Should better not to auto generate style name by auto-increment number here.\n    // Because this util is usually called in tooltip formatter, which is probably\n    // called repeatedly when mouse move and the auto-increment number increases fast.\n    // Users can make their own style name by theirselves, make it unique and readable.\n    var markerId = opt.markerId || 'markerX';\n    return {\n      renderMode: renderMode,\n      content: '{' + markerId + '|}  ',\n      style: type === 'subItem' ? {\n        width: 4,\n        height: 4,\n        borderRadius: 2,\n        backgroundColor: color\n      } : {\n        width: 10,\n        height: 10,\n        borderRadius: 5,\n        backgroundColor: color\n      }\n    };\n  }\n}\n/**\r\n * @deprecated Use `time/format` instead.\r\n * ISO Date format\r\n * @param {string} tpl\r\n * @param {number} value\r\n * @param {boolean} [isUTC=false] Default in local time.\r\n *           see `module:echarts/scale/Time`\r\n *           and `module:echarts/util/number#parseDate`.\r\n * @inner\r\n */\nexport function formatTime(tpl, value, isUTC) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateReplaceLog('echarts.format.formatTime', 'echarts.time.format');\n  }\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n    tpl = 'MM-dd\\nyyyy';\n  }\n  var date = parseDate(value);\n  var getUTC = isUTC ? 'getUTC' : 'get';\n  var y = date[getUTC + 'FullYear']();\n  var M = date[getUTC + 'Month']() + 1;\n  var d = date[getUTC + 'Date']();\n  var h = date[getUTC + 'Hours']();\n  var m = date[getUTC + 'Minutes']();\n  var s = date[getUTC + 'Seconds']();\n  var S = date[getUTC + 'Milliseconds']();\n  tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', pad(y % 100 + '', 2)).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n  return tpl;\n}\n/**\r\n * Capital first\r\n * @param {string} str\r\n * @return {string}\r\n */\nexport function capitalFirst(str) {\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n}\n/**\r\n * @return Never be null/undefined.\r\n */\nexport function convertToColorString(color, defaultColor) {\n  defaultColor = defaultColor || 'transparent';\n  return zrUtil.isString(color) ? color : zrUtil.isObject(color) ? color.colorStops && (color.colorStops[0] || {}).color || defaultColor : defaultColor;\n}\nexport { truncateText } from 'zrender/lib/graphic/helper/parseText.js';\n/**\r\n * open new tab\r\n * @param link url\r\n * @param target blank or self\r\n */\nexport function windowOpen(link, target) {\n  /* global window */\n  if (target === '_blank' || target === 'blank') {\n    var blank = window.open();\n    blank.opener = null;\n    blank.location.href = link;\n  } else {\n    window.open(link, target);\n  }\n}\nexport { getTextRect } from '../legacy/getTextRect.js';","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Layout helpers for each component positioning\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent } from './number.js';\nimport * as formatUtil from './format.js';\nvar each = zrUtil.each;\n/**\r\n * @public\r\n */\nexport var LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n/**\r\n * @public\r\n */\nexport var HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\n  var x = 0;\n  var y = 0;\n  if (maxWidth == null) {\n    maxWidth = Infinity;\n  }\n  if (maxHeight == null) {\n    maxHeight = Infinity;\n  }\n  var currentLineMaxSize = 0;\n  group.eachChild(function (child, idx) {\n    var rect = child.getBoundingRect();\n    var nextChild = group.childAt(idx + 1);\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\n    var nextX;\n    var nextY;\n    if (orient === 'horizontal') {\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n      nextX = x + moveX;\n      // Wrap when width exceeds maxWidth or meet a `newline` group\n      // FIXME compare before adding gap?\n      if (nextX > maxWidth || child.newline) {\n        x = 0;\n        nextX = moveX;\n        y += currentLineMaxSize + gap;\n        currentLineMaxSize = rect.height;\n      } else {\n        // FIXME: consider rect.y is not `0`?\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n      }\n    } else {\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n      nextY = y + moveY;\n      // Wrap when width exceeds maxHeight or meet a `newline` group\n      if (nextY > maxHeight || child.newline) {\n        x += currentLineMaxSize + gap;\n        y = 0;\n        nextY = moveY;\n        currentLineMaxSize = rect.width;\n      } else {\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n      }\n    }\n    if (child.newline) {\n      return;\n    }\n    child.x = x;\n    child.y = y;\n    child.markRedraw();\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n  });\n}\n/**\r\n * VBox or HBox layouting\r\n * @param {string} orient\r\n * @param {module:zrender/graphic/Group} group\r\n * @param {number} gap\r\n * @param {number} [width=Infinity]\r\n * @param {number} [height=Infinity]\r\n */\nexport var box = boxLayout;\n/**\r\n * VBox layouting\r\n * @param {module:zrender/graphic/Group} group\r\n * @param {number} gap\r\n * @param {number} [width=Infinity]\r\n * @param {number} [height=Infinity]\r\n */\nexport var vbox = zrUtil.curry(boxLayout, 'vertical');\n/**\r\n * HBox layouting\r\n * @param {module:zrender/graphic/Group} group\r\n * @param {number} gap\r\n * @param {number} [width=Infinity]\r\n * @param {number} [height=Infinity]\r\n */\nexport var hbox = zrUtil.curry(boxLayout, 'horizontal');\n/**\r\n * If x or x2 is not specified or 'center' 'left' 'right',\r\n * the width would be as long as possible.\r\n * If y or y2 is not specified or 'middle' 'top' 'bottom',\r\n * the height would be as long as possible.\r\n */\nexport function getAvailableSize(positionInfo, containerRect, margin) {\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var x = parsePercent(positionInfo.left, containerWidth);\n  var y = parsePercent(positionInfo.top, containerHeight);\n  var x2 = parsePercent(positionInfo.right, containerWidth);\n  var y2 = parsePercent(positionInfo.bottom, containerHeight);\n  (isNaN(x) || isNaN(parseFloat(positionInfo.left))) && (x = 0);\n  (isNaN(x2) || isNaN(parseFloat(positionInfo.right))) && (x2 = containerWidth);\n  (isNaN(y) || isNaN(parseFloat(positionInfo.top))) && (y = 0);\n  (isNaN(y2) || isNaN(parseFloat(positionInfo.bottom))) && (y2 = containerHeight);\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  return {\n    width: Math.max(x2 - x - margin[1] - margin[3], 0),\n    height: Math.max(y2 - y - margin[0] - margin[2], 0)\n  };\n}\n/**\r\n * Parse position info.\r\n */\nexport function getLayoutRect(positionInfo, containerRect, margin) {\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var left = parsePercent(positionInfo.left, containerWidth);\n  var top = parsePercent(positionInfo.top, containerHeight);\n  var right = parsePercent(positionInfo.right, containerWidth);\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\n  var width = parsePercent(positionInfo.width, containerWidth);\n  var height = parsePercent(positionInfo.height, containerHeight);\n  var verticalMargin = margin[2] + margin[0];\n  var horizontalMargin = margin[1] + margin[3];\n  var aspect = positionInfo.aspect;\n  // If width is not specified, calculate width from left and right\n  if (isNaN(width)) {\n    width = containerWidth - right - horizontalMargin - left;\n  }\n  if (isNaN(height)) {\n    height = containerHeight - bottom - verticalMargin - top;\n  }\n  if (aspect != null) {\n    // If width and height are not given\n    // 1. Graph should not exceeds the container\n    // 2. Aspect must be keeped\n    // 3. Graph should take the space as more as possible\n    // FIXME\n    // Margin is not considered, because there is no case that both\n    // using margin and aspect so far.\n    if (isNaN(width) && isNaN(height)) {\n      if (aspect > containerWidth / containerHeight) {\n        width = containerWidth * 0.8;\n      } else {\n        height = containerHeight * 0.8;\n      }\n    }\n    // Calculate width or height with given aspect\n    if (isNaN(width)) {\n      width = aspect * height;\n    }\n    if (isNaN(height)) {\n      height = width / aspect;\n    }\n  }\n  // If left is not specified, calculate left from right and width\n  if (isNaN(left)) {\n    left = containerWidth - right - width - horizontalMargin;\n  }\n  if (isNaN(top)) {\n    top = containerHeight - bottom - height - verticalMargin;\n  }\n  // Align left and top\n  switch (positionInfo.left || positionInfo.right) {\n    case 'center':\n      left = containerWidth / 2 - width / 2 - margin[3];\n      break;\n    case 'right':\n      left = containerWidth - width - horizontalMargin;\n      break;\n  }\n  switch (positionInfo.top || positionInfo.bottom) {\n    case 'middle':\n    case 'center':\n      top = containerHeight / 2 - height / 2 - margin[0];\n      break;\n    case 'bottom':\n      top = containerHeight - height - verticalMargin;\n      break;\n  }\n  // If something is wrong and left, top, width, height are calculated as NaN\n  left = left || 0;\n  top = top || 0;\n  if (isNaN(width)) {\n    // Width may be NaN if only one value is given except width\n    width = containerWidth - horizontalMargin - left - (right || 0);\n  }\n  if (isNaN(height)) {\n    // Height may be NaN if only one value is given except height\n    height = containerHeight - verticalMargin - top - (bottom || 0);\n  }\n  var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\n  rect.margin = margin;\n  return rect;\n}\n/**\r\n * Position a zr element in viewport\r\n *  Group position is specified by either\r\n *  {left, top}, {right, bottom}\r\n *  If all properties exists, right and bottom will be igonred.\r\n *\r\n * Logic:\r\n *     1. Scale (against origin point in parent coord)\r\n *     2. Rotate (against origin point in parent coord)\r\n *     3. Translate (with el.position by this method)\r\n * So this method only fixes the last step 'Translate', which does not affect\r\n * scaling and rotating.\r\n *\r\n * If be called repeatedly with the same input el, the same result will be gotten.\r\n *\r\n * Return true if the layout happened.\r\n *\r\n * @param el Should have `getBoundingRect` method.\r\n * @param positionInfo\r\n * @param positionInfo.left\r\n * @param positionInfo.top\r\n * @param positionInfo.right\r\n * @param positionInfo.bottom\r\n * @param positionInfo.width Only for opt.boundingModel: 'raw'\r\n * @param positionInfo.height Only for opt.boundingModel: 'raw'\r\n * @param containerRect\r\n * @param margin\r\n * @param opt\r\n * @param opt.hv Only horizontal or only vertical. Default to be [1, 1]\r\n * @param opt.boundingMode\r\n *        Specify how to calculate boundingRect when locating.\r\n *        'all': Position the boundingRect that is transformed and uioned\r\n *               both itself and its descendants.\r\n *               This mode simplies confine the elements in the bounding\r\n *               of their container (e.g., using 'right: 0').\r\n *        'raw': Position the boundingRect that is not transformed and only itself.\r\n *               This mode is useful when you want a element can overflow its\r\n *               container. (Consider a rotated circle needs to be located in a corner.)\r\n *               In this mode positionInfo.width/height can only be number.\r\n */\nexport function positionElement(el, positionInfo, containerRect, margin, opt, out) {\n  var h = !opt || !opt.hv || opt.hv[0];\n  var v = !opt || !opt.hv || opt.hv[1];\n  var boundingMode = opt && opt.boundingMode || 'all';\n  out = out || el;\n  out.x = el.x;\n  out.y = el.y;\n  if (!h && !v) {\n    return false;\n  }\n  var rect;\n  if (boundingMode === 'raw') {\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n  } else {\n    rect = el.getBoundingRect();\n    if (el.needLocalTransform()) {\n      var transform = el.getLocalTransform();\n      // Notice: raw rect may be inner object of el,\n      // which should not be modified.\n      rect = rect.clone();\n      rect.applyTransform(transform);\n    }\n  }\n  // The real width and height can not be specified but calculated by the given el.\n  var layoutRect = getLayoutRect(zrUtil.defaults({\n    width: rect.width,\n    height: rect.height\n  }, positionInfo), containerRect, margin);\n  // Because 'tranlate' is the last step in transform\n  // (see zrender/core/Transformable#getLocalTransform),\n  // we can just only modify el.position to get final result.\n  var dx = h ? layoutRect.x - rect.x : 0;\n  var dy = v ? layoutRect.y - rect.y : 0;\n  if (boundingMode === 'raw') {\n    out.x = dx;\n    out.y = dy;\n  } else {\n    out.x += dx;\n    out.y += dy;\n  }\n  if (out === el) {\n    el.markRedraw();\n  }\n  return true;\n}\n/**\r\n * @param option Contains some of the properties in HV_NAMES.\r\n * @param hvIdx 0: horizontal; 1: vertical.\r\n */\nexport function sizeCalculable(option, hvIdx) {\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\n}\nexport function fetchLayoutMode(ins) {\n  var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\n  return zrUtil.isObject(layoutMode) ? layoutMode : layoutMode ? {\n    type: layoutMode\n  } : null;\n}\n/**\r\n * Consider Case:\r\n * When default option has {left: 0, width: 100}, and we set {right: 0}\r\n * through setOption or media query, using normal zrUtil.merge will cause\r\n * {right: 0} does not take effect.\r\n *\r\n * @example\r\n * ComponentModel.extend({\r\n *     init: function () {\r\n *         ...\r\n *         let inputPositionParams = layout.getLayoutParams(option);\r\n *         this.mergeOption(inputPositionParams);\r\n *     },\r\n *     mergeOption: function (newOption) {\r\n *         newOption && zrUtil.merge(thisOption, newOption, true);\r\n *         layout.mergeLayoutParam(thisOption, newOption);\r\n *     }\r\n * });\r\n *\r\n * @param targetOption\r\n * @param newOption\r\n * @param opt\r\n */\nexport function mergeLayoutParam(targetOption, newOption, opt) {\n  var ignoreSize = opt && opt.ignoreSize;\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n  var hResult = merge(HV_NAMES[0], 0);\n  var vResult = merge(HV_NAMES[1], 1);\n  copy(HV_NAMES[0], targetOption, hResult);\n  copy(HV_NAMES[1], targetOption, vResult);\n  function merge(names, hvIdx) {\n    var newParams = {};\n    var newValueCount = 0;\n    var merged = {};\n    var mergedValueCount = 0;\n    var enoughParamNumber = 2;\n    each(names, function (name) {\n      merged[name] = targetOption[name];\n    });\n    each(names, function (name) {\n      // Consider case: newOption.width is null, which is\n      // set by user for removing width setting.\n      hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n      hasValue(newParams, name) && newValueCount++;\n      hasValue(merged, name) && mergedValueCount++;\n    });\n    if (ignoreSize[hvIdx]) {\n      // Only one of left/right is premitted to exist.\n      if (hasValue(newOption, names[1])) {\n        merged[names[2]] = null;\n      } else if (hasValue(newOption, names[2])) {\n        merged[names[1]] = null;\n      }\n      return merged;\n    }\n    // Case: newOption: {width: ..., right: ...},\n    // or targetOption: {right: ...} and newOption: {width: ...},\n    // There is no conflict when merged only has params count\n    // little than enoughParamNumber.\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\n      return merged;\n    }\n    // Case: newOption: {width: ..., right: ...},\n    // Than we can make sure user only want those two, and ignore\n    // all origin params in targetOption.\n    else if (newValueCount >= enoughParamNumber) {\n      return newParams;\n    } else {\n      // Chose another param from targetOption by priority.\n      for (var i = 0; i < names.length; i++) {\n        var name_1 = names[i];\n        if (!hasProp(newParams, name_1) && hasProp(targetOption, name_1)) {\n          newParams[name_1] = targetOption[name_1];\n          break;\n        }\n      }\n      return newParams;\n    }\n  }\n  function hasProp(obj, name) {\n    return obj.hasOwnProperty(name);\n  }\n  function hasValue(obj, name) {\n    return obj[name] != null && obj[name] !== 'auto';\n  }\n  function copy(names, target, source) {\n    each(names, function (name) {\n      target[name] = source[name];\n    });\n  }\n}\n/**\r\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\r\n */\nexport function getLayoutParams(source) {\n  return copyLayoutParams({}, source);\n}\n/**\r\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\r\n * @param {Object} source\r\n * @return {Object} Result contains those props.\r\n */\nexport function copyLayoutParams(target, source) {\n  source && target && each(LOCATION_PARAMS, function (name) {\n    source.hasOwnProperty(name) && (target[name] = source[name]);\n  });\n  return target;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from './Model.js';\nimport * as componentUtil from '../util/component.js';\nimport { enableClassManagement, parseClassType, isExtendedClass, mountExtend } from '../util/clazz.js';\nimport { makeInner, queryReferringComponents } from '../util/model.js';\nimport * as layout from '../util/layout.js';\nvar inner = makeInner();\nvar ComponentModel = /** @class */function (_super) {\n  __extends(ComponentModel, _super);\n  function ComponentModel(option, parentModel, ecModel) {\n    var _this = _super.call(this, option, parentModel, ecModel) || this;\n    _this.uid = componentUtil.getUID('ec_cpt_model');\n    return _this;\n  }\n  ComponentModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = layout.fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\n    var themeModel = ecModel.getTheme();\n    zrUtil.merge(option, themeModel.get(this.mainType));\n    zrUtil.merge(option, this.getDefaultOption());\n    if (layoutMode) {\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n  ComponentModel.prototype.mergeOption = function (option, ecModel) {\n    zrUtil.merge(this.option, option, true);\n    var layoutMode = layout.fetchLayoutMode(this);\n    if (layoutMode) {\n      layout.mergeLayoutParam(this.option, option, layoutMode);\n    }\n  };\n  /**\r\n   * Called immediately after `init` or `mergeOption` of this instance called.\r\n   */\n  ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) {};\n  /**\r\n   * [How to declare defaultOption]:\r\n   *\r\n   * (A) If using class declaration in typescript (since echarts 5):\r\n   * ```ts\r\n   * import {ComponentOption} from '../model/option.js';\r\n   * export interface XxxOption extends ComponentOption {\r\n   *     aaa: number\r\n   * }\r\n   * export class XxxModel extends Component {\r\n   *     static type = 'xxx';\r\n   *     static defaultOption: XxxOption = {\r\n   *         aaa: 123\r\n   *     }\r\n   * }\r\n   * Component.registerClass(XxxModel);\r\n   * ```\r\n   * ```ts\r\n   * import {inheritDefaultOption} from '../util/component.js';\r\n   * import {XxxModel, XxxOption} from './XxxModel.js';\r\n   * export interface XxxSubOption extends XxxOption {\r\n   *     bbb: number\r\n   * }\r\n   * class XxxSubModel extends XxxModel {\r\n   *     static defaultOption: XxxSubOption = inheritDefaultOption(XxxModel.defaultOption, {\r\n   *         bbb: 456\r\n   *     })\r\n   *     fn() {\r\n   *         let opt = this.getDefaultOption();\r\n   *         // opt is {aaa: 123, bbb: 456}\r\n   *     }\r\n   * }\r\n   * ```\r\n   *\r\n   * (B) If using class extend (previous approach in echarts 3 & 4):\r\n   * ```js\r\n   * let XxxComponent = Component.extend({\r\n   *     defaultOption: {\r\n   *         xx: 123\r\n   *     }\r\n   * })\r\n   * ```\r\n   * ```js\r\n   * let XxxSubComponent = XxxComponent.extend({\r\n   *     defaultOption: {\r\n   *         yy: 456\r\n   *     },\r\n   *     fn: function () {\r\n   *         let opt = this.getDefaultOption();\r\n   *         // opt is {xx: 123, yy: 456}\r\n   *     }\r\n   * })\r\n   * ```\r\n   */\n  ComponentModel.prototype.getDefaultOption = function () {\n    var ctor = this.constructor;\n    // If using class declaration, it is different to travel super class\n    // in legacy env and auto merge defaultOption. So if using class\n    // declaration, defaultOption should be merged manually.\n    if (!isExtendedClass(ctor)) {\n      // When using ts class, defaultOption must be declared as static.\n      return ctor.defaultOption;\n    }\n    // FIXME: remove this approach?\n    var fields = inner(this);\n    if (!fields.defaultOption) {\n      var optList = [];\n      var clz = ctor;\n      while (clz) {\n        var opt = clz.prototype.defaultOption;\n        opt && optList.push(opt);\n        clz = clz.superClass;\n      }\n      var defaultOption = {};\n      for (var i = optList.length - 1; i >= 0; i--) {\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\n      }\n      fields.defaultOption = defaultOption;\n    }\n    return fields.defaultOption;\n  };\n  /**\r\n   * Notice: always force to input param `useDefault` in case that forget to consider it.\r\n   * The same behavior as `modelUtil.parseFinder`.\r\n   *\r\n   * @param useDefault In many cases like series refer axis and axis refer grid,\r\n   *        If axis index / axis id not specified, use the first target as default.\r\n   *        In other cases like dataZoom refer axis, if not specified, measn no refer.\r\n   */\n  ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\n    var indexKey = mainType + 'Index';\n    var idKey = mainType + 'Id';\n    return queryReferringComponents(this.ecModel, mainType, {\n      index: this.get(indexKey, true),\n      id: this.get(idKey, true)\n    }, opt);\n  };\n  ComponentModel.prototype.getBoxLayoutParams = function () {\n    // Consider itself having box layout configs.\n    var boxLayoutModel = this;\n    return {\n      left: boxLayoutModel.get('left'),\n      top: boxLayoutModel.get('top'),\n      right: boxLayoutModel.get('right'),\n      bottom: boxLayoutModel.get('bottom'),\n      width: boxLayoutModel.get('width'),\n      height: boxLayoutModel.get('height')\n    };\n  };\n  /**\r\n   * Get key for zlevel.\r\n   * If developers don't configure zlevel. We will assign zlevel to series based on the key.\r\n   * For example, lines with trail effect and progressive series will in an individual zlevel.\r\n   */\n  ComponentModel.prototype.getZLevelKey = function () {\n    return '';\n  };\n  ComponentModel.prototype.setZLevel = function (zlevel) {\n    this.option.zlevel = zlevel;\n  };\n  ComponentModel.protoInitialize = function () {\n    var proto = ComponentModel.prototype;\n    proto.type = 'component';\n    proto.id = '';\n    proto.name = '';\n    proto.mainType = '';\n    proto.subType = '';\n    proto.componentIndex = 0;\n  }();\n  return ComponentModel;\n}(Model);\nmountExtend(ComponentModel, Model);\nenableClassManagement(ComponentModel);\ncomponentUtil.enableSubTypeDefaulter(ComponentModel);\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\nfunction getDependencies(componentType) {\n  var deps = [];\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (clz) {\n    deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\n  });\n  // Ensure main type.\n  deps = zrUtil.map(deps, function (type) {\n    return parseClassType(type).main;\n  });\n  // Hack dataset for convenience.\n  if (componentType !== 'dataset' && zrUtil.indexOf(deps, 'dataset') <= 0) {\n    deps.unshift('dataset');\n  }\n  return deps;\n}\nexport default ComponentModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar platform = '';\n// Navigator not exists in node\nif (typeof navigator !== 'undefined') {\n  /* global navigator */\n  platform = navigator.platform || '';\n}\nvar decalColor = 'rgba(0, 0, 0, 0.2)';\nexport default {\n  darkMode: 'auto',\n  // backgroundColor: 'rgba(0,0,0,0)',\n  colorBy: 'series',\n  color: ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'],\n  gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\n  aria: {\n    decal: {\n      decals: [{\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [2, 5],\n        symbolSize: 1,\n        rotation: Math.PI / 6\n      }, {\n        color: decalColor,\n        symbol: 'circle',\n        dashArrayX: [[8, 8], [0, 8, 8, 0]],\n        dashArrayY: [6, 0],\n        symbolSize: 0.8\n      }, {\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [4, 3],\n        rotation: -Math.PI / 4\n      }, {\n        color: decalColor,\n        dashArrayX: [[6, 6], [0, 6, 6, 0]],\n        dashArrayY: [6, 0]\n      }, {\n        color: decalColor,\n        dashArrayX: [[1, 0], [1, 6]],\n        dashArrayY: [1, 0, 6, 0],\n        rotation: Math.PI / 4\n      }, {\n        color: decalColor,\n        symbol: 'triangle',\n        dashArrayX: [[9, 9], [0, 9, 9, 0]],\n        dashArrayY: [7, 2],\n        symbolSize: 0.75\n      }]\n    }\n  },\n  // If xAxis and yAxis declared, grid is created by default.\n  // grid: {},\n  textStyle: {\n    // color: '#000',\n    // decoration: 'none',\n    // PENDING\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n    // fontFamily: 'Arial, Verdana, sans-serif',\n    fontSize: 12,\n    fontStyle: 'normal',\n    fontWeight: 'normal'\n  },\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n  // Default is source-over\n  blendMode: null,\n  stateAnimation: {\n    duration: 300,\n    easing: 'cubicOut'\n  },\n  animation: 'auto',\n  animationDuration: 1000,\n  animationDurationUpdate: 500,\n  animationEasing: 'cubicInOut',\n  animationEasingUpdate: 'cubicInOut',\n  animationThreshold: 2000,\n  // Configuration for progressive/incremental rendering\n  progressiveThreshold: 3000,\n  progressive: 400,\n  // Threshold of if use single hover layer to optimize.\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n  // which is unexpected.\n  // see example <echarts/test/heatmap-large.html>.\n  hoverLayerThreshold: 3000,\n  // See: module:echarts/scale/Time\n  useUTC: false\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap } from 'zrender/lib/core/util.js';\n;\n;\n;\nexport var VISUAL_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'itemGroupId', 'itemChildGroupId', 'seriesName']);\nexport var SOURCE_FORMAT_ORIGINAL = 'original';\nexport var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\nexport var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\nexport var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\nexport var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\nexport var SOURCE_FORMAT_UNKNOWN = 'unknown';\nexport var SERIES_LAYOUT_BY_COLUMN = 'column';\nexport var SERIES_LAYOUT_BY_ROW = 'row';\n;\n;\n;\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner, getDataItemValue, queryReferringComponents, SINGLE_REFERRING } from '../../util/model.js';\nimport { createHashMap, each, isArray, isString, isObject, isTypedArray } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW, SOURCE_FORMAT_KEYED_COLUMNS } from '../../util/types.js';\n// The result of `guessOrdinal`.\nexport var BE_ORDINAL = {\n  Must: 1,\n  Might: 2,\n  Not: 3 // Other cases\n};\nvar innerGlobalModel = makeInner();\n/**\r\n * MUST be called before mergeOption of all series.\r\n */\nexport function resetSourceDefaulter(ecModel) {\n  // `datasetMap` is used to make default encode.\n  innerGlobalModel(ecModel).datasetMap = createHashMap();\n}\n/**\r\n * [The strategy of the arrengment of data dimensions for dataset]:\r\n * \"value way\": all axes are non-category axes. So series one by one take\r\n *     several (the number is coordSysDims.length) dimensions from dataset.\r\n *     The result of data arrengment of data dimensions like:\r\n *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\r\n * \"category way\": at least one axis is category axis. So the the first data\r\n *     dimension is always mapped to the first category axis and shared by\r\n *     all of the series. The other data dimensions are taken by series like\r\n *     \"value way\" does.\r\n *     The result of data arrengment of data dimensions like:\r\n *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\r\n *\r\n * @return encode Never be `null/undefined`.\r\n */\nexport function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\n  // Currently only make default when using dataset, util more reqirements occur.\n  if (!datasetModel || !coordDimensions) {\n    return encode;\n  }\n  var encodeItemName = [];\n  var encodeSeriesName = [];\n  var ecModel = seriesModel.ecModel;\n  var datasetMap = innerGlobalModel(ecModel).datasetMap;\n  var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n  var baseCategoryDimIndex;\n  var categoryWayValueDimStart;\n  coordDimensions = coordDimensions.slice();\n  each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\n    var coordDimInfo = isObject(coordDimInfoLoose) ? coordDimInfoLoose : coordDimensions[coordDimIdx] = {\n      name: coordDimInfoLoose\n    };\n    if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n      baseCategoryDimIndex = coordDimIdx;\n      categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\n    }\n    encode[coordDimInfo.name] = [];\n  });\n  var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n    categoryWayDim: categoryWayValueDimStart,\n    valueWayDim: 0\n  });\n  // TODO\n  // Auto detect first time axis and do arrangement.\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    var coordDimName = coordDimInfo.name;\n    var count = getDataDimCountOnCoordDim(coordDimInfo);\n    // In value way.\n    if (baseCategoryDimIndex == null) {\n      var start = datasetRecord.valueWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.valueWayDim += count;\n      // ??? TODO give a better default series name rule?\n      // especially when encode x y specified.\n      // consider: when multiple series share one dimension\n      // category axis, series name should better use\n      // the other dimension name. On the other hand, use\n      // both dimensions name.\n    }\n    // In category way, the first category axis.\n    else if (baseCategoryDimIndex === coordDimIdx) {\n      pushDim(encode[coordDimName], 0, count);\n      pushDim(encodeItemName, 0, count);\n    }\n    // In category way, the other axis.\n    else {\n      var start = datasetRecord.categoryWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.categoryWayDim += count;\n    }\n  });\n  function pushDim(dimIdxArr, idxFrom, idxCount) {\n    for (var i = 0; i < idxCount; i++) {\n      dimIdxArr.push(idxFrom + i);\n    }\n  }\n  function getDataDimCountOnCoordDim(coordDimInfo) {\n    var dimsDef = coordDimInfo.dimsDef;\n    return dimsDef ? dimsDef.length : 1;\n  }\n  encodeItemName.length && (encode.itemName = encodeItemName);\n  encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n  return encode;\n}\n/**\r\n * Work for data like [{name: ..., value: ...}, ...].\r\n *\r\n * @return encode Never be `null/undefined`.\r\n */\nexport function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\n  // Currently only make default when using dataset, util more reqirements occur.\n  if (!datasetModel) {\n    return encode;\n  }\n  var sourceFormat = source.sourceFormat;\n  var dimensionsDefine = source.dimensionsDefine;\n  var potentialNameDimIndex;\n  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    each(dimensionsDefine, function (dim, idx) {\n      if ((isObject(dim) ? dim.name : dim) === 'name') {\n        potentialNameDimIndex = idx;\n      }\n    });\n  }\n  var idxResult = function () {\n    var idxRes0 = {};\n    var idxRes1 = {};\n    var guessRecords = [];\n    // 5 is an experience value.\n    for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n      guessRecords.push(guessResult);\n      var isPureNumber = guessResult === BE_ORDINAL.Not;\n      // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n      // and then find a name dim with the priority:\n      // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n        idxRes0.v = i;\n      }\n      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n        idxRes0.n = i;\n      }\n      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n        return idxRes0;\n      }\n      // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n      // find the first BE_ORDINAL.Might as the value dim,\n      // and then find a name dim with the priority:\n      // \"other dim\" > \"the value dim itself\".\n      // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n      // treated as number.\n      if (!isPureNumber) {\n        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n          idxRes1.v = i;\n        }\n        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n          idxRes1.n = i;\n        }\n      }\n    }\n    function fulfilled(idxResult) {\n      return idxResult.v != null && idxResult.n != null;\n    }\n    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n  }();\n  if (idxResult) {\n    encode.value = [idxResult.v];\n    // `potentialNameDimIndex` has highest priority.\n    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n;\n    // By default, label uses itemName in charts.\n    // So we don't set encodeLabel here.\n    encode.itemName = [nameDimIndex];\n    encode.seriesName = [nameDimIndex];\n  }\n  return encode;\n}\n/**\r\n * @return If return null/undefined, indicate that should not use datasetModel.\r\n */\nexport function querySeriesUpstreamDatasetModel(seriesModel) {\n  // Caution: consider the scenario:\n  // A dataset is declared and a series is not expected to use the dataset,\n  // and at the beginning `setOption({series: { noData })` (just prepare other\n  // option but no data), then `setOption({series: {data: [...]}); In this case,\n  // the user should set an empty array to avoid that dataset is used by default.\n  var thisData = seriesModel.get('data', true);\n  if (!thisData) {\n    return queryReferringComponents(seriesModel.ecModel, 'dataset', {\n      index: seriesModel.get('datasetIndex', true),\n      id: seriesModel.get('datasetId', true)\n    }, SINGLE_REFERRING).models[0];\n  }\n}\n/**\r\n * @return Always return an array event empty.\r\n */\nexport function queryDatasetUpstreamDatasetModels(datasetModel) {\n  // Only these attributes declared, we by default reference to `datasetIndex: 0`.\n  // Otherwise, no reference.\n  if (!datasetModel.get('transform', true) && !datasetModel.get('fromTransformResult', true)) {\n    return [];\n  }\n  return queryReferringComponents(datasetModel.ecModel, 'dataset', {\n    index: datasetModel.get('fromDatasetIndex', true),\n    id: datasetModel.get('fromDatasetId', true)\n  }, SINGLE_REFERRING).models;\n}\n/**\r\n * The rule should not be complex, otherwise user might not\r\n * be able to known where the data is wrong.\r\n * The code is ugly, but how to make it neat?\r\n */\nexport function guessOrdinal(source, dimIndex) {\n  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n}\n// dimIndex may be overflow source data.\n// return {BE_ORDINAL}\nfunction doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n  var result;\n  // Experience value.\n  var maxLoop = 5;\n  if (isTypedArray(data)) {\n    return BE_ORDINAL.Not;\n  }\n  // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n  // always exists in source.\n  var dimName;\n  var dimType;\n  if (dimensionsDefine) {\n    var dimDefItem = dimensionsDefine[dimIndex];\n    if (isObject(dimDefItem)) {\n      dimName = dimDefItem.name;\n      dimType = dimDefItem.type;\n    } else if (isString(dimDefItem)) {\n      dimName = dimDefItem;\n    }\n  }\n  if (dimType != null) {\n    return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      var sample = dataArrayRows[dimIndex];\n      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[startIndex + i])) != null) {\n          return result;\n        }\n      }\n    } else {\n      for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\n        var row = dataArrayRows[startIndex + i];\n        if (row && (result = detectValue(row[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var dataObjectRows = data;\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n    for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\n      var item = dataObjectRows[i];\n      if (item && (result = detectValue(item[dimName])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    var dataKeyedColumns = data;\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n    var sample = dataKeyedColumns[dimName];\n    if (!sample || isTypedArray(sample)) {\n      return BE_ORDINAL.Not;\n    }\n    for (var i = 0; i < sample.length && i < maxLoop; i++) {\n      if ((result = detectValue(sample[i])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var dataOriginal = data;\n    for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\n      var item = dataOriginal[i];\n      var val = getDataItemValue(item);\n      if (!isArray(val)) {\n        return BE_ORDINAL.Not;\n      }\n      if ((result = detectValue(val[dimIndex])) != null) {\n        return result;\n      }\n    }\n  }\n  function detectValue(val) {\n    var beStr = isString(val);\n    // Consider usage convenience, '1', '2' will be treated as \"number\".\n    // `Number('')` (or any whitespace) is `0`.\n    if (val != null && Number.isFinite(Number(val)) && val !== '') {\n      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n    } else if (beStr && val !== '-') {\n      return BE_ORDINAL.Must;\n    }\n  }\n  return BE_ORDINAL.Not;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, assert } from 'zrender/lib/core/util.js';\nimport { isComponentIdInternal } from '../util/model.js';\nvar internalOptionCreatorMap = createHashMap();\nexport function registerInternalOptionCreator(mainType, creator) {\n  assert(internalOptionCreatorMap.get(mainType) == null && creator);\n  internalOptionCreatorMap.set(mainType, creator);\n}\nexport function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\n  var internalOptionCreator = internalOptionCreatorMap.get(mainType);\n  if (!internalOptionCreator) {\n    return newCmptOptionList;\n  }\n  var internalOptions = internalOptionCreator(ecModel);\n  if (!internalOptions) {\n    return newCmptOptionList;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < internalOptions.length; i++) {\n      assert(isComponentIdInternal(internalOptions[i]));\n    }\n  }\n  return newCmptOptionList.concat(internalOptions);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner, normalizeToArray } from '../../util/model.js';\nvar innerColor = makeInner();\nvar innerDecal = makeInner();\nvar PaletteMixin = /** @class */function () {\n  function PaletteMixin() {}\n  PaletteMixin.prototype.getColorFromPalette = function (name, scope, requestNum) {\n    var defaultPalette = normalizeToArray(this.get('color', true));\n    var layeredPalette = this.get('colorLayer', true);\n    return getFromPalette(this, innerColor, defaultPalette, layeredPalette, name, scope, requestNum);\n  };\n  PaletteMixin.prototype.clearColorPalette = function () {\n    clearPalette(this, innerColor);\n  };\n  return PaletteMixin;\n}();\nexport function getDecalFromPalette(ecModel, name, scope, requestNum) {\n  var defaultDecals = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n  return getFromPalette(ecModel, innerDecal, defaultDecals, null, name, scope, requestNum);\n}\nfunction getNearestPalette(palettes, requestColorNum) {\n  var paletteNum = palettes.length;\n  // TODO palettes must be in order\n  for (var i = 0; i < paletteNum; i++) {\n    if (palettes[i].length > requestColorNum) {\n      return palettes[i];\n    }\n  }\n  return palettes[paletteNum - 1];\n}\n/**\r\n * @param name MUST NOT be null/undefined. Otherwise call this function\r\n *             twise with the same parameters will get different result.\r\n * @param scope default this.\r\n * @return Can be null/undefined\r\n */\nfunction getFromPalette(that, inner, defaultPalette, layeredPalette, name, scope, requestNum) {\n  scope = scope || that;\n  var scopeFields = inner(scope);\n  var paletteIdx = scopeFields.paletteIdx || 0;\n  var paletteNameMap = scopeFields.paletteNameMap = scopeFields.paletteNameMap || {};\n  // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n  if (paletteNameMap.hasOwnProperty(name)) {\n    return paletteNameMap[name];\n  }\n  var palette = requestNum == null || !layeredPalette ? defaultPalette : getNearestPalette(layeredPalette, requestNum);\n  // In case can't find in layered color palette.\n  palette = palette || defaultPalette;\n  if (!palette || !palette.length) {\n    return;\n  }\n  var pickedPaletteItem = palette[paletteIdx];\n  if (name) {\n    paletteNameMap[name] = pickedPaletteItem;\n  }\n  scopeFields.paletteIdx = (paletteIdx + 1) % palette.length;\n  return pickedPaletteItem;\n}\nfunction clearPalette(that, inner) {\n  inner(that).paletteIdx = 0;\n  inner(that).paletteNameMap = {};\n}\nexport { PaletteMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Caution: If the mechanism should be changed some day, these cases\r\n * should be considered:\r\n *\r\n * (1) In `merge option` mode, if using the same option to call `setOption`\r\n * many times, the result should be the same (try our best to ensure that).\r\n * (2) In `merge option` mode, if a component has no id/name specified, it\r\n * will be merged by index, and the result sequence of the components is\r\n * consistent to the original sequence.\r\n * (3) In `replaceMerge` mode, keep the result sequence of the components is\r\n * consistent to the original sequence, even though there might result in \"hole\".\r\n * (4) `reset` feature (in toolbox). Find detailed info in comments about\r\n * `mergeOption` in module:echarts/model/OptionManager.\r\n */\nimport { each, filter, isArray, isObject, isString, createHashMap, assert, clone, merge, extend, mixin, isFunction } from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../util/model.js';\nimport Model from './Model.js';\nimport ComponentModel from './Component.js';\nimport globalDefault from './globalDefault.js';\nimport { resetSourceDefaulter } from '../data/helper/sourceHelper.js';\nimport { concatInternalOptions } from './internalComponentCreator.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { error, warn } from '../util/log.js';\n// -----------------------\n// Internal method names:\n// -----------------------\nvar reCreateSeriesIndices;\nvar assertSeriesInitialized;\nvar initBase;\nvar OPTION_INNER_KEY = '\\0_ec_inner';\nvar OPTION_INNER_VALUE = 1;\nvar BUITIN_COMPONENTS_MAP = {\n  grid: 'GridComponent',\n  polar: 'PolarComponent',\n  geo: 'GeoComponent',\n  singleAxis: 'SingleAxisComponent',\n  parallel: 'ParallelComponent',\n  calendar: 'CalendarComponent',\n  graphic: 'GraphicComponent',\n  toolbox: 'ToolboxComponent',\n  tooltip: 'TooltipComponent',\n  axisPointer: 'AxisPointerComponent',\n  brush: 'BrushComponent',\n  title: 'TitleComponent',\n  timeline: 'TimelineComponent',\n  markPoint: 'MarkPointComponent',\n  markLine: 'MarkLineComponent',\n  markArea: 'MarkAreaComponent',\n  legend: 'LegendComponent',\n  dataZoom: 'DataZoomComponent',\n  visualMap: 'VisualMapComponent',\n  // aria: 'AriaComponent',\n  // dataset: 'DatasetComponent',\n  // Dependencies\n  xAxis: 'GridComponent',\n  yAxis: 'GridComponent',\n  angleAxis: 'PolarComponent',\n  radiusAxis: 'PolarComponent'\n};\nvar BUILTIN_CHARTS_MAP = {\n  line: 'LineChart',\n  bar: 'BarChart',\n  pie: 'PieChart',\n  scatter: 'ScatterChart',\n  radar: 'RadarChart',\n  map: 'MapChart',\n  tree: 'TreeChart',\n  treemap: 'TreemapChart',\n  graph: 'GraphChart',\n  gauge: 'GaugeChart',\n  funnel: 'FunnelChart',\n  parallel: 'ParallelChart',\n  sankey: 'SankeyChart',\n  boxplot: 'BoxplotChart',\n  candlestick: 'CandlestickChart',\n  effectScatter: 'EffectScatterChart',\n  lines: 'LinesChart',\n  heatmap: 'HeatmapChart',\n  pictorialBar: 'PictorialBarChart',\n  themeRiver: 'ThemeRiverChart',\n  sunburst: 'SunburstChart',\n  custom: 'CustomChart'\n};\nvar componetsMissingLogPrinted = {};\nfunction checkMissingComponents(option) {\n  each(option, function (componentOption, mainType) {\n    if (!ComponentModel.hasClass(mainType)) {\n      var componentImportName = BUITIN_COMPONENTS_MAP[mainType];\n      if (componentImportName && !componetsMissingLogPrinted[componentImportName]) {\n        error(\"Component \" + mainType + \" is used but not imported.\\nimport { \" + componentImportName + \" } from 'echarts/components';\\necharts.use([\" + componentImportName + \"]);\");\n        componetsMissingLogPrinted[componentImportName] = true;\n      }\n    }\n  });\n}\nvar GlobalModel = /** @class */function (_super) {\n  __extends(GlobalModel, _super);\n  function GlobalModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\n    theme = theme || {};\n    this.option = null; // Mark as not initialized.\n    this._theme = new Model(theme);\n    this._locale = new Model(locale);\n    this._optionManager = optionManager;\n  };\n  GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(option != null, 'option is null/undefined');\n      assert(option[OPTION_INNER_KEY] !== OPTION_INNER_VALUE, 'please use chart.getOption()');\n    }\n    var innerOpt = normalizeSetOptionInput(opts);\n    this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\n    this._resetOption(null, innerOpt);\n  };\n  /**\r\n   * @param type null/undefined: reset all.\r\n   *        'recreate': force recreate all.\r\n   *        'timeline': only reset timeline option\r\n   *        'media': only reset media query option\r\n   * @return Whether option changed.\r\n   */\n  GlobalModel.prototype.resetOption = function (type, opt) {\n    return this._resetOption(type, normalizeSetOptionInput(opt));\n  };\n  GlobalModel.prototype._resetOption = function (type, opt) {\n    var optionChanged = false;\n    var optionManager = this._optionManager;\n    if (!type || type === 'recreate') {\n      var baseOption = optionManager.mountOption(type === 'recreate');\n      if (process.env.NODE_ENV !== 'production') {\n        checkMissingComponents(baseOption);\n      }\n      if (!this.option || type === 'recreate') {\n        initBase(this, baseOption);\n      } else {\n        this.restoreData();\n        this._mergeOption(baseOption, opt);\n      }\n      optionChanged = true;\n    }\n    if (type === 'timeline' || type === 'media') {\n      this.restoreData();\n    }\n    // By design, if `setOption(option2)` at the second time, and `option2` is a `ECUnitOption`,\n    // it should better not have the same props with `MediaUnit['option']`.\n    // Because either `option2` or `MediaUnit['option']` will be always merged to \"current option\"\n    // rather than original \"baseOption\". If they both override a prop, the result might be\n    // unexpected when media state changed after `setOption` called.\n    // If we really need to modify a props in each `MediaUnit['option']`, use the full version\n    // (`{baseOption, media}`) in `setOption`.\n    // For `timeline`, the case is the same.\n    if (!type || type === 'recreate' || type === 'timeline') {\n      var timelineOption = optionManager.getTimelineOption(this);\n      if (timelineOption) {\n        optionChanged = true;\n        this._mergeOption(timelineOption, opt);\n      }\n    }\n    if (!type || type === 'recreate' || type === 'media') {\n      var mediaOptions = optionManager.getMediaOption(this);\n      if (mediaOptions.length) {\n        each(mediaOptions, function (mediaOption) {\n          optionChanged = true;\n          this._mergeOption(mediaOption, opt);\n        }, this);\n      }\n    }\n    return optionChanged;\n  };\n  GlobalModel.prototype.mergeOption = function (option) {\n    this._mergeOption(option, null);\n  };\n  GlobalModel.prototype._mergeOption = function (newOption, opt) {\n    var option = this.option;\n    var componentsMap = this._componentsMap;\n    var componentsCount = this._componentsCount;\n    var newCmptTypes = [];\n    var newCmptTypeMap = createHashMap();\n    var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\n    resetSourceDefaulter(this);\n    // If no component class, merge directly.\n    // For example: color, animaiton options, etc.\n    each(newOption, function (componentOption, mainType) {\n      if (componentOption == null) {\n        return;\n      }\n      if (!ComponentModel.hasClass(mainType)) {\n        // globalSettingTask.dirty();\n        option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n      } else if (mainType) {\n        newCmptTypes.push(mainType);\n        newCmptTypeMap.set(mainType, true);\n      }\n    });\n    if (replaceMergeMainTypeMap) {\n      // If there is a mainType `xxx` in `replaceMerge` but not declared in option,\n      // we trade it as it is declared in option as `{xxx: []}`. Because:\n      // (1) for normal merge, `{xxx: null/undefined}` are the same meaning as `{xxx: []}`.\n      // (2) some preprocessor may convert some of `{xxx: null/undefined}` to `{xxx: []}`.\n      replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\n        if (ComponentModel.hasClass(mainTypeInReplaceMerge) && !newCmptTypeMap.get(mainTypeInReplaceMerge)) {\n          newCmptTypes.push(mainTypeInReplaceMerge);\n          newCmptTypeMap.set(mainTypeInReplaceMerge, true);\n        }\n      });\n    }\n    ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n    function visitComponent(mainType) {\n      var newCmptOptionList = concatInternalOptions(this, mainType, modelUtil.normalizeToArray(newOption[mainType]));\n      var oldCmptList = componentsMap.get(mainType);\n      var mergeMode =\n      // `!oldCmptList` means init. See the comment in `mappingToExists`\n      !oldCmptList ? 'replaceAll' : replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType) ? 'replaceMerge' : 'normalMerge';\n      var mappingResult = modelUtil.mappingToExists(oldCmptList, newCmptOptionList, mergeMode);\n      // Set mainType and complete subType.\n      modelUtil.setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel);\n      // Empty it before the travel, in order to prevent `this._componentsMap`\n      // from being used in the `init`/`mergeOption`/`optionUpdated` of some\n      // components, which is probably incorrect logic.\n      option[mainType] = null;\n      componentsMap.set(mainType, null);\n      componentsCount.set(mainType, 0);\n      var optionsByMainType = [];\n      var cmptsByMainType = [];\n      var cmptsCountByMainType = 0;\n      var tooltipExists;\n      var tooltipWarningLogged;\n      each(mappingResult, function (resultItem, index) {\n        var componentModel = resultItem.existing;\n        var newCmptOption = resultItem.newOption;\n        if (!newCmptOption) {\n          if (componentModel) {\n            // Consider where is no new option and should be merged using {},\n            // see removeEdgeAndAdd in topologicalTravel and\n            // ComponentModel.getAllClassMainTypes.\n            componentModel.mergeOption({}, this);\n            componentModel.optionUpdated({}, false);\n          }\n          // If no both `resultItem.exist` and `resultItem.option`,\n          // either it is in `replaceMerge` and not matched by any id,\n          // or it has been removed in previous `replaceMerge` and left a \"hole\" in this component index.\n        } else {\n          var isSeriesType = mainType === 'series';\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, !isSeriesType // Give a more detailed warn later if series don't exists\n          );\n          if (!ComponentModelClass) {\n            if (process.env.NODE_ENV !== 'production') {\n              var subType = resultItem.keyInfo.subType;\n              var seriesImportName = BUILTIN_CHARTS_MAP[subType];\n              if (!componetsMissingLogPrinted[subType]) {\n                componetsMissingLogPrinted[subType] = true;\n                if (seriesImportName) {\n                  error(\"Series \" + subType + \" is used but not imported.\\nimport { \" + seriesImportName + \" } from 'echarts/charts';\\necharts.use([\" + seriesImportName + \"]);\");\n                } else {\n                  error(\"Unknown series \" + subType);\n                }\n              }\n            }\n            return;\n          }\n          // TODO Before multiple tooltips get supported, we do this check to avoid unexpected exception.\n          if (mainType === 'tooltip') {\n            if (tooltipExists) {\n              if (process.env.NODE_ENV !== 'production') {\n                if (!tooltipWarningLogged) {\n                  warn('Currently only one tooltip component is allowed.');\n                  tooltipWarningLogged = true;\n                }\n              }\n              return;\n            }\n            tooltipExists = true;\n          }\n          if (componentModel && componentModel.constructor === ComponentModelClass) {\n            componentModel.name = resultItem.keyInfo.name;\n            // componentModel.settingTask && componentModel.settingTask.dirty();\n            componentModel.mergeOption(newCmptOption, this);\n            componentModel.optionUpdated(newCmptOption, false);\n          } else {\n            // PENDING Global as parent ?\n            var extraOpt = extend({\n              componentIndex: index\n            }, resultItem.keyInfo);\n            componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt);\n            // Assign `keyInfo`\n            extend(componentModel, extraOpt);\n            if (resultItem.brandNew) {\n              componentModel.__requireNewView = true;\n            }\n            componentModel.init(newCmptOption, this, this);\n            // Call optionUpdated after init.\n            // newCmptOption has been used as componentModel.option\n            // and may be merged with theme and default, so pass null\n            // to avoid confusion.\n            componentModel.optionUpdated(null, true);\n          }\n        }\n        if (componentModel) {\n          optionsByMainType.push(componentModel.option);\n          cmptsByMainType.push(componentModel);\n          cmptsCountByMainType++;\n        } else {\n          // Always do assign to avoid elided item in array.\n          optionsByMainType.push(void 0);\n          cmptsByMainType.push(void 0);\n        }\n      }, this);\n      option[mainType] = optionsByMainType;\n      componentsMap.set(mainType, cmptsByMainType);\n      componentsCount.set(mainType, cmptsCountByMainType);\n      // Backup series for filtering.\n      if (mainType === 'series') {\n        reCreateSeriesIndices(this);\n      }\n    }\n    // If no series declared, ensure `_seriesIndices` initialized.\n    if (!this._seriesIndices) {\n      reCreateSeriesIndices(this);\n    }\n  };\n  /**\r\n   * Get option for output (cloned option and inner info removed)\r\n   */\n  GlobalModel.prototype.getOption = function () {\n    var option = clone(this.option);\n    each(option, function (optInMainType, mainType) {\n      if (ComponentModel.hasClass(mainType)) {\n        var opts = modelUtil.normalizeToArray(optInMainType);\n        // Inner cmpts need to be removed.\n        // Inner cmpts might not be at last since ec5.0, but still\n        // compatible for users: if inner cmpt at last, splice the returned array.\n        var realLen = opts.length;\n        var metNonInner = false;\n        for (var i = realLen - 1; i >= 0; i--) {\n          // Remove options with inner id.\n          if (opts[i] && !modelUtil.isComponentIdInternal(opts[i])) {\n            metNonInner = true;\n          } else {\n            opts[i] = null;\n            !metNonInner && realLen--;\n          }\n        }\n        opts.length = realLen;\n        option[mainType] = opts;\n      }\n    });\n    delete option[OPTION_INNER_KEY];\n    return option;\n  };\n  GlobalModel.prototype.getTheme = function () {\n    return this._theme;\n  };\n  GlobalModel.prototype.getLocaleModel = function () {\n    return this._locale;\n  };\n  GlobalModel.prototype.setUpdatePayload = function (payload) {\n    this._payload = payload;\n  };\n  GlobalModel.prototype.getUpdatePayload = function () {\n    return this._payload;\n  };\n  /**\r\n   * @param idx If not specified, return the first one.\r\n   */\n  GlobalModel.prototype.getComponent = function (mainType, idx) {\n    var list = this._componentsMap.get(mainType);\n    if (list) {\n      var cmpt = list[idx || 0];\n      if (cmpt) {\n        return cmpt;\n      } else if (idx == null) {\n        for (var i = 0; i < list.length; i++) {\n          if (list[i]) {\n            return list[i];\n          }\n        }\n      }\n    }\n  };\n  /**\r\n   * @return Never be null/undefined.\r\n   */\n  GlobalModel.prototype.queryComponents = function (condition) {\n    var mainType = condition.mainType;\n    if (!mainType) {\n      return [];\n    }\n    var index = condition.index;\n    var id = condition.id;\n    var name = condition.name;\n    var cmpts = this._componentsMap.get(mainType);\n    if (!cmpts || !cmpts.length) {\n      return [];\n    }\n    var result;\n    if (index != null) {\n      result = [];\n      each(modelUtil.normalizeToArray(index), function (idx) {\n        cmpts[idx] && result.push(cmpts[idx]);\n      });\n    } else if (id != null) {\n      result = queryByIdOrName('id', id, cmpts);\n    } else if (name != null) {\n      result = queryByIdOrName('name', name, cmpts);\n    } else {\n      // Return all non-empty components in that mainType\n      result = filter(cmpts, function (cmpt) {\n        return !!cmpt;\n      });\n    }\n    return filterBySubType(result, condition);\n  };\n  /**\r\n   * The interface is different from queryComponents,\r\n   * which is convenient for inner usage.\r\n   *\r\n   * @usage\r\n   * let result = findComponents(\r\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\r\n   * );\r\n   * let result = findComponents(\r\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\r\n   * );\r\n   * let result = findComponents(\r\n   *     {mainType: 'series',\r\n   *     filter: function (model, index) {...}}\r\n   * );\r\n   * // result like [component0, componnet1, ...]\r\n   */\n  GlobalModel.prototype.findComponents = function (condition) {\n    var query = condition.query;\n    var mainType = condition.mainType;\n    var queryCond = getQueryCond(query);\n    var result = queryCond ? this.queryComponents(queryCond)\n    // Retrieve all non-empty components.\n    : filter(this._componentsMap.get(mainType), function (cmpt) {\n      return !!cmpt;\n    });\n    return doFilter(filterBySubType(result, condition));\n    function getQueryCond(q) {\n      var indexAttr = mainType + 'Index';\n      var idAttr = mainType + 'Id';\n      var nameAttr = mainType + 'Name';\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n        mainType: mainType,\n        // subType will be filtered finally.\n        index: q[indexAttr],\n        id: q[idAttr],\n        name: q[nameAttr]\n      } : null;\n    }\n    function doFilter(res) {\n      return condition.filter ? filter(res, condition.filter) : res;\n    }\n  };\n  GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\n    var componentsMap = this._componentsMap;\n    if (isFunction(mainType)) {\n      var ctxForAll_1 = cb;\n      var cbForAll_1 = mainType;\n      componentsMap.each(function (cmpts, componentType) {\n        for (var i = 0; cmpts && i < cmpts.length; i++) {\n          var cmpt = cmpts[i];\n          cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\n        }\n      });\n    } else {\n      var cmpts = isString(mainType) ? componentsMap.get(mainType) : isObject(mainType) ? this.findComponents(mainType) : null;\n      for (var i = 0; cmpts && i < cmpts.length; i++) {\n        var cmpt = cmpts[i];\n        cmpt && cb.call(context, cmpt, cmpt.componentIndex);\n      }\n    }\n  };\n  /**\r\n   * Get series list before filtered by name.\r\n   */\n  GlobalModel.prototype.getSeriesByName = function (name) {\n    var nameStr = modelUtil.convertOptionIdName(name, null);\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && nameStr != null && oneSeries.name === nameStr;\n    });\n  };\n  /**\r\n   * Get series list before filtered by index.\r\n   */\n  GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\n    return this._componentsMap.get('series')[seriesIndex];\n  };\n  /**\r\n   * Get series list before filtered by type.\r\n   * FIXME: rename to getRawSeriesByType?\r\n   */\n  GlobalModel.prototype.getSeriesByType = function (subType) {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && oneSeries.subType === subType;\n    });\n  };\n  /**\r\n   * Get all series before filtered.\r\n   */\n  GlobalModel.prototype.getSeries = function () {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries;\n    });\n  };\n  /**\r\n   * Count series before filtered.\r\n   */\n  GlobalModel.prototype.getSeriesCount = function () {\n    return this._componentsCount.get('series');\n  };\n  /**\r\n   * After filtering, series may be different\r\n   * from raw series.\r\n   */\n  GlobalModel.prototype.eachSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n      cb.call(context, series, rawSeriesIndex);\n    }, this);\n  };\n  /**\r\n   * Iterate raw series before filtered.\r\n   *\r\n   * @param {Function} cb\r\n   * @param {*} context\r\n   */\n  GlobalModel.prototype.eachRawSeries = function (cb, context) {\n    each(this._componentsMap.get('series'), function (series) {\n      series && cb.call(context, series, series.componentIndex);\n    });\n  };\n  /**\r\n   * After filtering, series may be different.\r\n   * from raw series.\r\n   */\n  GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n      if (series.subType === subType) {\n        cb.call(context, series, rawSeriesIndex);\n      }\n    }, this);\n  };\n  /**\r\n   * Iterate raw series before filtered of given type.\r\n   */\n  GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\n    return each(this.getSeriesByType(subType), cb, context);\n  };\n  GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\n    assertSeriesInitialized(this);\n    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n  };\n  GlobalModel.prototype.getCurrentSeriesIndices = function () {\n    return (this._seriesIndices || []).slice();\n  };\n  GlobalModel.prototype.filterSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    var newSeriesIndices = [];\n    each(this._seriesIndices, function (seriesRawIdx) {\n      var series = this._componentsMap.get('series')[seriesRawIdx];\n      cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\n    }, this);\n    this._seriesIndices = newSeriesIndices;\n    this._seriesIndicesMap = createHashMap(newSeriesIndices);\n  };\n  GlobalModel.prototype.restoreData = function (payload) {\n    reCreateSeriesIndices(this);\n    var componentsMap = this._componentsMap;\n    var componentTypes = [];\n    componentsMap.each(function (components, componentType) {\n      if (ComponentModel.hasClass(componentType)) {\n        componentTypes.push(componentType);\n      }\n    });\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\n      each(componentsMap.get(componentType), function (component) {\n        if (component && (componentType !== 'series' || !isNotTargetSeries(component, payload))) {\n          component.restoreData();\n        }\n      });\n    });\n  };\n  GlobalModel.internalField = function () {\n    reCreateSeriesIndices = function (ecModel) {\n      var seriesIndices = ecModel._seriesIndices = [];\n      each(ecModel._componentsMap.get('series'), function (series) {\n        // series may have been removed by `replaceMerge`.\n        series && seriesIndices.push(series.componentIndex);\n      });\n      ecModel._seriesIndicesMap = createHashMap(seriesIndices);\n    };\n    assertSeriesInitialized = function (ecModel) {\n      // Components that use _seriesIndices should depends on series component,\n      // which make sure that their initialization is after series.\n      if (process.env.NODE_ENV !== 'production') {\n        if (!ecModel._seriesIndices) {\n          throw new Error('Option should contains series.');\n        }\n      }\n    };\n    initBase = function (ecModel, baseOption) {\n      // Using OPTION_INNER_KEY to mark that this option cannot be used outside,\n      // i.e. `chart.setOption(chart.getModel().option);` is forbidden.\n      ecModel.option = {};\n      ecModel.option[OPTION_INNER_KEY] = OPTION_INNER_VALUE;\n      // Init with series: [], in case of calling findSeries method\n      // before series initialized.\n      ecModel._componentsMap = createHashMap({\n        series: []\n      });\n      ecModel._componentsCount = createHashMap();\n      // If user spefied `option.aria`, aria will be enable. This detection should be\n      // performed before theme and globalDefault merge.\n      var airaOption = baseOption.aria;\n      if (isObject(airaOption) && airaOption.enabled == null) {\n        airaOption.enabled = true;\n      }\n      mergeTheme(baseOption, ecModel._theme.option);\n      // TODO Needs clone when merging to the unexisted property\n      merge(baseOption, globalDefault, false);\n      ecModel._mergeOption(baseOption, null);\n    };\n  }();\n  return GlobalModel;\n}(Model);\nfunction isNotTargetSeries(seriesModel, payload) {\n  if (payload) {\n    var index = payload.seriesIndex;\n    var id = payload.seriesId;\n    var name_1 = payload.seriesName;\n    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name_1 != null && seriesModel.name !== name_1;\n  }\n}\nfunction mergeTheme(option, theme) {\n  // PENDING\n  // NOT use `colorLayer` in theme if option has `color`\n  var notMergeColorLayer = option.color && !option.colorLayer;\n  each(theme, function (themeItem, name) {\n    if (name === 'colorLayer' && notMergeColorLayer) {\n      return;\n    }\n    // If it is component model mainType, the model handles that merge later.\n    // otherwise, merge them here.\n    if (!ComponentModel.hasClass(name)) {\n      if (typeof themeItem === 'object') {\n        option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n      } else {\n        if (option[name] == null) {\n          option[name] = themeItem;\n        }\n      }\n    }\n  });\n}\nfunction queryByIdOrName(attr, idOrName, cmpts) {\n  // Here is a break from echarts4: string and number are\n  // treated as equal.\n  if (isArray(idOrName)) {\n    var keyMap_1 = createHashMap();\n    each(idOrName, function (idOrNameItem) {\n      if (idOrNameItem != null) {\n        var idName = modelUtil.convertOptionIdName(idOrNameItem, null);\n        idName != null && keyMap_1.set(idOrNameItem, true);\n      }\n    });\n    return filter(cmpts, function (cmpt) {\n      return cmpt && keyMap_1.get(cmpt[attr]);\n    });\n  } else {\n    var idName_1 = modelUtil.convertOptionIdName(idOrName, null);\n    return filter(cmpts, function (cmpt) {\n      return cmpt && idName_1 != null && cmpt[attr] === idName_1;\n    });\n  }\n}\nfunction filterBySubType(components, condition) {\n  // Using hasOwnProperty for restrict. Consider\n  // subType is undefined in user payload.\n  return condition.hasOwnProperty('subType') ? filter(components, function (cmpt) {\n    return cmpt && cmpt.subType === condition.subType;\n  }) : components;\n}\nfunction normalizeSetOptionInput(opts) {\n  var replaceMergeMainTypeMap = createHashMap();\n  opts && each(modelUtil.normalizeToArray(opts.replaceMerge), function (mainType) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\n    }\n    replaceMergeMainTypeMap.set(mainType, true);\n  });\n  return {\n    replaceMergeMainTypeMap: replaceMergeMainTypeMap\n  };\n}\nmixin(GlobalModel, PaletteMixin);\nexport default GlobalModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar availableMethods = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isSSR', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL',\n// 'getModel',\n'getOption',\n// 'getViewOfComponentModel',\n// 'getViewOfSeriesModel',\n'getId', 'updateLabelLayout'];\nvar ExtensionAPI = /** @class */function () {\n  function ExtensionAPI(ecInstance) {\n    zrUtil.each(availableMethods, function (methodName) {\n      this[methodName] = zrUtil.bind(ecInstance[methodName], ecInstance);\n    }, this);\n  }\n  return ExtensionAPI;\n}();\nexport default ExtensionAPI;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar coordinateSystemCreators = {};\nvar CoordinateSystemManager = /** @class */function () {\n  function CoordinateSystemManager() {\n    this._coordinateSystems = [];\n  }\n  CoordinateSystemManager.prototype.create = function (ecModel, api) {\n    var coordinateSystems = [];\n    zrUtil.each(coordinateSystemCreators, function (creator, type) {\n      var list = creator.create(ecModel, api);\n      coordinateSystems = coordinateSystems.concat(list || []);\n    });\n    this._coordinateSystems = coordinateSystems;\n  };\n  CoordinateSystemManager.prototype.update = function (ecModel, api) {\n    zrUtil.each(this._coordinateSystems, function (coordSys) {\n      coordSys.update && coordSys.update(ecModel, api);\n    });\n  };\n  CoordinateSystemManager.prototype.getCoordinateSystems = function () {\n    return this._coordinateSystems.slice();\n  };\n  CoordinateSystemManager.register = function (type, creator) {\n    coordinateSystemCreators[type] = creator;\n  };\n  CoordinateSystemManager.get = function (type) {\n    return coordinateSystemCreators[type];\n  };\n  return CoordinateSystemManager;\n}();\nexport default CoordinateSystemManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { normalizeToArray\n// , MappingExistingItem, setComponentTypeToKeyInfo, mappingToExists\n} from '../util/model.js';\nimport { each, clone, map, isTypedArray, setAsPrimitive, isArray, isObject\n// , HashMap , createHashMap, extend, merge,\n} from 'zrender/lib/core/util.js';\nimport { error } from '../util/log.js';\nvar QUERY_REG = /^(min|max)?(.+)$/;\n// Key: mainType\n// type FakeComponentsMap = HashMap<(MappingExistingItem & { subType: string })[]>;\n/**\r\n * TERM EXPLANATIONS:\r\n * See `ECOption` and `ECUnitOption` in `src/util/types.ts`.\r\n */\nvar OptionManager = /** @class */function () {\n  // timeline.notMerge is not supported in ec3. Firstly there is rearly\n  // case that notMerge is needed. Secondly supporting 'notMerge' requires\n  // rawOption cloned and backuped when timeline changed, which does no\n  // good to performance. What's more, that both timeline and setOption\n  // method supply 'notMerge' brings complex and some problems.\n  // Consider this case:\n  // (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n  // (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n  function OptionManager(api) {\n    this._timelineOptions = [];\n    this._mediaList = [];\n    /**\r\n     * -1, means default.\r\n     * empty means no media.\r\n     */\n    this._currentMediaIndices = [];\n    this._api = api;\n  }\n  OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\n    if (rawOption) {\n      // That set dat primitive is dangerous if user reuse the data when setOption again.\n      each(normalizeToArray(rawOption.series), function (series) {\n        series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\n      });\n      each(normalizeToArray(rawOption.dataset), function (dataset) {\n        dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\n      });\n    }\n    // Caution: some series modify option data, if do not clone,\n    // it should ensure that the repeat modify correctly\n    // (create a new object when modify itself).\n    rawOption = clone(rawOption);\n    // FIXME\n    // If some property is set in timeline options or media option but\n    // not set in baseOption, a warning should be given.\n    var optionBackup = this._optionBackup;\n    var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\n    this._newBaseOption = newParsedOption.baseOption;\n    // For setOption at second time (using merge mode);\n    if (optionBackup) {\n      // FIXME\n      // the restore merge solution is essentially incorrect.\n      // the mapping can not be 100% consistent with ecModel, which probably brings\n      // potential bug!\n      // The first merge is delayed, because in most cases, users do not call `setOption` twice.\n      // let fakeCmptsMap = this._fakeCmptsMap;\n      // if (!fakeCmptsMap) {\n      //     fakeCmptsMap = this._fakeCmptsMap = createHashMap();\n      //     mergeToBackupOption(fakeCmptsMap, null, optionBackup.baseOption, null);\n      // }\n      // mergeToBackupOption(\n      //     fakeCmptsMap, optionBackup.baseOption, newParsedOption.baseOption, opt\n      // );\n      // For simplicity, timeline options and media options do not support merge,\n      // that is, if you `setOption` twice and both has timeline options, the latter\n      // timeline options will not be merged to the former, but just substitute them.\n      if (newParsedOption.timelineOptions.length) {\n        optionBackup.timelineOptions = newParsedOption.timelineOptions;\n      }\n      if (newParsedOption.mediaList.length) {\n        optionBackup.mediaList = newParsedOption.mediaList;\n      }\n      if (newParsedOption.mediaDefault) {\n        optionBackup.mediaDefault = newParsedOption.mediaDefault;\n      }\n    } else {\n      this._optionBackup = newParsedOption;\n    }\n  };\n  OptionManager.prototype.mountOption = function (isRecreate) {\n    var optionBackup = this._optionBackup;\n    this._timelineOptions = optionBackup.timelineOptions;\n    this._mediaList = optionBackup.mediaList;\n    this._mediaDefault = optionBackup.mediaDefault;\n    this._currentMediaIndices = [];\n    return clone(isRecreate\n    // this._optionBackup.baseOption, which is created at the first `setOption`\n    // called, and is merged into every new option by inner method `mergeToBackupOption`\n    // each time `setOption` called, can be only used in `isRecreate`, because\n    // its reliability is under suspicion. In other cases option merge is\n    // performed by `model.mergeOption`.\n    ? optionBackup.baseOption : this._newBaseOption);\n  };\n  OptionManager.prototype.getTimelineOption = function (ecModel) {\n    var option;\n    var timelineOptions = this._timelineOptions;\n    if (timelineOptions.length) {\n      // getTimelineOption can only be called after ecModel inited,\n      // so we can get currentIndex from timelineModel.\n      var timelineModel = ecModel.getComponent('timeline');\n      if (timelineModel) {\n        option = clone(\n        // FIXME:TS as TimelineModel or quivlant interface\n        timelineOptions[timelineModel.getCurrentIndex()]);\n      }\n    }\n    return option;\n  };\n  OptionManager.prototype.getMediaOption = function (ecModel) {\n    var ecWidth = this._api.getWidth();\n    var ecHeight = this._api.getHeight();\n    var mediaList = this._mediaList;\n    var mediaDefault = this._mediaDefault;\n    var indices = [];\n    var result = [];\n    // No media defined.\n    if (!mediaList.length && !mediaDefault) {\n      return result;\n    }\n    // Multi media may be applied, the latter defined media has higher priority.\n    for (var i = 0, len = mediaList.length; i < len; i++) {\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n        indices.push(i);\n      }\n    }\n    // FIXME\n    // Whether mediaDefault should force users to provide? Otherwise\n    // the change by media query can not be recorvered.\n    if (!indices.length && mediaDefault) {\n      indices = [-1];\n    }\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n      result = map(indices, function (index) {\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n      });\n    }\n    // Otherwise return nothing.\n    this._currentMediaIndices = indices;\n    return result;\n  };\n  return OptionManager;\n}();\n/**\r\n * [RAW_OPTION_PATTERNS]\r\n * (Note: \"series: []\" represents all other props in `ECUnitOption`)\r\n *\r\n * (1) No prop \"baseOption\" declared:\r\n * Root option is used as \"baseOption\" (except prop \"options\" and \"media\").\r\n * ```js\r\n * option = {\r\n *     series: [],\r\n *     timeline: {},\r\n *     options: [],\r\n * };\r\n * option = {\r\n *     series: [],\r\n *     media: {},\r\n * };\r\n * option = {\r\n *     series: [],\r\n *     timeline: {},\r\n *     options: [],\r\n *     media: {},\r\n * }\r\n * ```\r\n *\r\n * (2) Prop \"baseOption\" declared:\r\n * If \"baseOption\" declared, `ECUnitOption` props can only be declared\r\n * inside \"baseOption\" except prop \"timeline\" (compat ec2).\r\n * ```js\r\n * option = {\r\n *     baseOption: {\r\n *         timeline: {},\r\n *         series: [],\r\n *     },\r\n *     options: []\r\n * };\r\n * option = {\r\n *     baseOption: {\r\n *         series: [],\r\n *     },\r\n *     media: []\r\n * };\r\n * option = {\r\n *     baseOption: {\r\n *         timeline: {},\r\n *         series: [],\r\n *     },\r\n *     options: []\r\n *     media: []\r\n * };\r\n * option = {\r\n *     // ec3 compat ec2: allow (only) `timeline` declared\r\n *     // outside baseOption. Keep this setting for compat.\r\n *     timeline: {},\r\n *     baseOption: {\r\n *         series: [],\r\n *     },\r\n *     options: [],\r\n *     media: []\r\n * };\r\n * ```\r\n */\nfunction parseRawOption(\n// `rawOption` May be modified\nrawOption, optionPreprocessorFuncs, isNew) {\n  var mediaList = [];\n  var mediaDefault;\n  var baseOption;\n  var declaredBaseOption = rawOption.baseOption;\n  // Compatible with ec2, [RAW_OPTION_PATTERNS] above.\n  var timelineOnRoot = rawOption.timeline;\n  var timelineOptionsOnRoot = rawOption.options;\n  var mediaOnRoot = rawOption.media;\n  var hasMedia = !!rawOption.media;\n  var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || declaredBaseOption && declaredBaseOption.timeline);\n  if (declaredBaseOption) {\n    baseOption = declaredBaseOption;\n    // For merge option.\n    if (!baseOption.timeline) {\n      baseOption.timeline = timelineOnRoot;\n    }\n  }\n  // For convenience, enable to use the root option as the `baseOption`:\n  // `{ ...normalOptionProps, media: [{ ... }, { ... }] }`\n  else {\n    if (hasTimeline || hasMedia) {\n      rawOption.options = rawOption.media = null;\n    }\n    baseOption = rawOption;\n  }\n  if (hasMedia) {\n    if (isArray(mediaOnRoot)) {\n      each(mediaOnRoot, function (singleMedia) {\n        if (process.env.NODE_ENV !== 'production') {\n          // Real case of wrong config.\n          if (singleMedia && !singleMedia.option && isObject(singleMedia.query) && isObject(singleMedia.query.option)) {\n            error('Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }');\n          }\n        }\n        if (singleMedia && singleMedia.option) {\n          if (singleMedia.query) {\n            mediaList.push(singleMedia);\n          } else if (!mediaDefault) {\n            // Use the first media default.\n            mediaDefault = singleMedia;\n          }\n        }\n      });\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        // Real case of wrong config.\n        error('Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }');\n      }\n    }\n  }\n  doPreprocess(baseOption);\n  each(timelineOptionsOnRoot, function (option) {\n    return doPreprocess(option);\n  });\n  each(mediaList, function (media) {\n    return doPreprocess(media.option);\n  });\n  function doPreprocess(option) {\n    each(optionPreprocessorFuncs, function (preProcess) {\n      preProcess(option, isNew);\n    });\n  }\n  return {\n    baseOption: baseOption,\n    timelineOptions: timelineOptionsOnRoot || [],\n    mediaDefault: mediaDefault,\n    mediaList: mediaList\n  };\n}\n/**\r\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\r\n * Support: width, height, aspectRatio\r\n * Can use max or min as prefix.\r\n */\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\n  var realMap = {\n    width: ecWidth,\n    height: ecHeight,\n    aspectratio: ecWidth / ecHeight // lower case for convenience.\n  };\n  var applicable = true;\n  each(query, function (value, attr) {\n    var matched = attr.match(QUERY_REG);\n    if (!matched || !matched[1] || !matched[2]) {\n      return;\n    }\n    var operator = matched[1];\n    var realAttr = matched[2].toLowerCase();\n    if (!compare(realMap[realAttr], value, operator)) {\n      applicable = false;\n    }\n  });\n  return applicable;\n}\nfunction compare(real, expect, operator) {\n  if (operator === 'min') {\n    return real >= expect;\n  } else if (operator === 'max') {\n    return real <= expect;\n  } else {\n    // Equals\n    return real === expect;\n  }\n}\nfunction indicesEquals(indices1, indices2) {\n  // indices is always order by asc and has only finite number.\n  return indices1.join(',') === indices2.join(',');\n}\n/**\r\n * Consider case:\r\n * `chart.setOption(opt1);`\r\n * Then user do some interaction like dataZoom, dataView changing.\r\n * `chart.setOption(opt2);`\r\n * Then user press 'reset button' in toolbox.\r\n *\r\n * After doing that all of the interaction effects should be reset, the\r\n * chart should be the same as the result of invoke\r\n * `chart.setOption(opt1); chart.setOption(opt2);`.\r\n *\r\n * Although it is not able ensure that\r\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\r\n * `chart.setOption(merge(opt1, opt2));` exactly,\r\n * this might be the only simple way to implement that feature.\r\n *\r\n * MEMO: We've considered some other approaches:\r\n * 1. Each model handles its self restoration but not uniform treatment.\r\n *     (Too complex in logic and error-prone)\r\n * 2. Use a shadow ecModel. (Performance expensive)\r\n *\r\n * FIXME: A possible solution:\r\n * Add a extra level of model for each component model. The inheritance chain would be:\r\n * ecModel <- componentModel <- componentActionModel <- dataItemModel\r\n * And all of the actions can only modify the `componentActionModel` rather than\r\n * `componentModel`. `setOption` will only modify the `ecModel` and `componentModel`.\r\n * When \"resotre\" action triggered, model from `componentActionModel` will be discarded\r\n * instead of recreating the \"ecModel\" from the \"_optionBackup\".\r\n */\n// function mergeToBackupOption(\n//     fakeCmptsMap: FakeComponentsMap,\n//     // `tarOption` Can be null/undefined, means init\n//     tarOption: ECUnitOption,\n//     newOption: ECUnitOption,\n//     // Can be null/undefined\n//     opt: InnerSetOptionOpts\n// ): void {\n//     newOption = newOption || {} as ECUnitOption;\n//     const notInit = !!tarOption;\n//     each(newOption, function (newOptsInMainType, mainType) {\n//         if (newOptsInMainType == null) {\n//             return;\n//         }\n//         if (!ComponentModel.hasClass(mainType)) {\n//             if (tarOption) {\n//                 tarOption[mainType] = merge(tarOption[mainType], newOptsInMainType, true);\n//             }\n//         }\n//         else {\n//             const oldTarOptsInMainType = notInit ? normalizeToArray(tarOption[mainType]) : null;\n//             const oldFakeCmptsInMainType = fakeCmptsMap.get(mainType) || [];\n//             const resultTarOptsInMainType = notInit ? (tarOption[mainType] = [] as ComponentOption[]) : null;\n//             const resultFakeCmptsInMainType = fakeCmptsMap.set(mainType, []);\n//             const mappingResult = mappingToExists(\n//                 oldFakeCmptsInMainType,\n//                 normalizeToArray(newOptsInMainType),\n//                 (opt && opt.replaceMergeMainTypeMap.get(mainType)) ? 'replaceMerge' : 'normalMerge'\n//             );\n//             setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel as ComponentModelConstructor);\n//             each(mappingResult, function (resultItem, index) {\n//                 // The same logic as `Global.ts#_mergeOption`.\n//                 let fakeCmpt = resultItem.existing;\n//                 const newOption = resultItem.newOption;\n//                 const keyInfo = resultItem.keyInfo;\n//                 let fakeCmptOpt;\n//                 if (!newOption) {\n//                     fakeCmptOpt = oldTarOptsInMainType[index];\n//                 }\n//                 else {\n//                     if (fakeCmpt && fakeCmpt.subType === keyInfo.subType) {\n//                         fakeCmpt.name = keyInfo.name;\n//                         if (notInit) {\n//                             fakeCmptOpt = merge(oldTarOptsInMainType[index], newOption, true);\n//                         }\n//                     }\n//                     else {\n//                         fakeCmpt = extend({}, keyInfo);\n//                         if (notInit) {\n//                             fakeCmptOpt = clone(newOption);\n//                         }\n//                     }\n//                 }\n//                 if (fakeCmpt) {\n//                     notInit && resultTarOptsInMainType.push(fakeCmptOpt);\n//                     resultFakeCmptsInMainType.push(fakeCmpt);\n//                 }\n//                 else {\n//                     notInit && resultTarOptsInMainType.push(void 0);\n//                     resultFakeCmptsInMainType.push(void 0);\n//                 }\n//             });\n//         }\n//     });\n// }\nexport default OptionManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../../util/log.js';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\nfunction compatEC2ItemStyle(opt) {\n  var itemStyleOpt = opt && opt.itemStyle;\n  if (!itemStyleOpt) {\n    return;\n  }\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n    var styleName = POSSIBLE_STYLES[i];\n    var normalItemStyleOpt = itemStyleOpt.normal;\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\n      }\n      opt[styleName] = opt[styleName] || {};\n      if (!opt[styleName].normal) {\n        opt[styleName].normal = normalItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n      }\n      normalItemStyleOpt[styleName] = null;\n    }\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\n      }\n      opt[styleName] = opt[styleName] || {};\n      if (!opt[styleName].emphasis) {\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n      }\n      emphasisItemStyleOpt[styleName] = null;\n    }\n  }\n}\nfunction convertNormalEmphasis(opt, optType, useExtend) {\n  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n    var normalOpt = opt[optType].normal;\n    var emphasisOpt = opt[optType].emphasis;\n    if (normalOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line max-len\n        deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\n      }\n      // Timeline controlStyle has other properties besides normal and emphasis\n      if (useExtend) {\n        opt[optType].normal = opt[optType].emphasis = null;\n        zrUtil.defaults(opt[optType], normalOpt);\n      } else {\n        opt[optType] = normalOpt;\n      }\n    }\n    if (emphasisOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\n      }\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[optType] = emphasisOpt;\n      // Also compat the case user mix the style and focus together in ec3 style\n      // for example: { itemStyle: { normal: {}, emphasis: {focus, shadowBlur} } }\n      if (emphasisOpt.focus) {\n        opt.emphasis.focus = emphasisOpt.focus;\n      }\n      if (emphasisOpt.blurScope) {\n        opt.emphasis.blurScope = emphasisOpt.blurScope;\n      }\n    }\n  }\n}\nfunction removeEC3NormalStatus(opt) {\n  convertNormalEmphasis(opt, 'itemStyle');\n  convertNormalEmphasis(opt, 'lineStyle');\n  convertNormalEmphasis(opt, 'areaStyle');\n  convertNormalEmphasis(opt, 'label');\n  convertNormalEmphasis(opt, 'labelLine');\n  // treemap\n  convertNormalEmphasis(opt, 'upperLabel');\n  // graph\n  convertNormalEmphasis(opt, 'edgeLabel');\n}\nfunction compatTextStyle(opt, propName) {\n  // Check whether is not object (string\\null\\undefined ...)\n  var labelOptSingle = isObject(opt) && opt[propName];\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\n  if (textStyle) {\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line max-len\n      deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\n    }\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\n      var textPropName = modelUtil.TEXT_STYLE_OPTIONS[i];\n      if (textStyle.hasOwnProperty(textPropName)) {\n        labelOptSingle[textPropName] = textStyle[textPropName];\n      }\n    }\n  }\n}\nfunction compatEC3CommonStyles(opt) {\n  if (opt) {\n    removeEC3NormalStatus(opt);\n    compatTextStyle(opt, 'label');\n    opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n  }\n}\nfunction processSeries(seriesOpt) {\n  if (!isObject(seriesOpt)) {\n    return;\n  }\n  compatEC2ItemStyle(seriesOpt);\n  removeEC3NormalStatus(seriesOpt);\n  compatTextStyle(seriesOpt, 'label');\n  // treemap\n  compatTextStyle(seriesOpt, 'upperLabel');\n  // graph\n  compatTextStyle(seriesOpt, 'edgeLabel');\n  if (seriesOpt.emphasis) {\n    compatTextStyle(seriesOpt.emphasis, 'label');\n    // treemap\n    compatTextStyle(seriesOpt.emphasis, 'upperLabel');\n    // graph\n    compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n  }\n  var markPoint = seriesOpt.markPoint;\n  if (markPoint) {\n    compatEC2ItemStyle(markPoint);\n    compatEC3CommonStyles(markPoint);\n  }\n  var markLine = seriesOpt.markLine;\n  if (markLine) {\n    compatEC2ItemStyle(markLine);\n    compatEC3CommonStyles(markLine);\n  }\n  var markArea = seriesOpt.markArea;\n  if (markArea) {\n    compatEC3CommonStyles(markArea);\n  }\n  var data = seriesOpt.data;\n  // Break with ec3: if `setOption` again, there may be no `type` in option,\n  // then the backward compat based on option type will not be performed.\n  if (seriesOpt.type === 'graph') {\n    data = data || seriesOpt.nodes;\n    var edgeData = seriesOpt.links || seriesOpt.edges;\n    if (edgeData && !zrUtil.isTypedArray(edgeData)) {\n      for (var i = 0; i < edgeData.length; i++) {\n        compatEC3CommonStyles(edgeData[i]);\n      }\n    }\n    zrUtil.each(seriesOpt.categories, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  }\n  if (data && !zrUtil.isTypedArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      compatEC3CommonStyles(data[i]);\n    }\n  }\n  // mark point data\n  markPoint = seriesOpt.markPoint;\n  if (markPoint && markPoint.data) {\n    var mpData = markPoint.data;\n    for (var i = 0; i < mpData.length; i++) {\n      compatEC3CommonStyles(mpData[i]);\n    }\n  }\n  // mark line data\n  markLine = seriesOpt.markLine;\n  if (markLine && markLine.data) {\n    var mlData = markLine.data;\n    for (var i = 0; i < mlData.length; i++) {\n      if (zrUtil.isArray(mlData[i])) {\n        compatEC3CommonStyles(mlData[i][0]);\n        compatEC3CommonStyles(mlData[i][1]);\n      } else {\n        compatEC3CommonStyles(mlData[i]);\n      }\n    }\n  }\n  // Series\n  if (seriesOpt.type === 'gauge') {\n    compatTextStyle(seriesOpt, 'axisLabel');\n    compatTextStyle(seriesOpt, 'title');\n    compatTextStyle(seriesOpt, 'detail');\n  } else if (seriesOpt.type === 'treemap') {\n    convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n    zrUtil.each(seriesOpt.levels, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  } else if (seriesOpt.type === 'tree') {\n    removeEC3NormalStatus(seriesOpt.leaves);\n  }\n  // sunburst starts from ec4, so it does not need to compat levels.\n}\nfunction toArr(o) {\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\n}\nfunction toObj(o) {\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\n}\nexport default function globalCompatStyle(option, isTheme) {\n  each(toArr(option.series), function (seriesOpt) {\n    isObject(seriesOpt) && processSeries(seriesOpt);\n  });\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n  each(axes, function (axisName) {\n    each(toArr(option[axisName]), function (axisOpt) {\n      if (axisOpt) {\n        compatTextStyle(axisOpt, 'axisLabel');\n        compatTextStyle(axisOpt.axisPointer, 'label');\n      }\n    });\n  });\n  each(toArr(option.parallel), function (parallelOpt) {\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n  });\n  each(toArr(option.calendar), function (calendarOpt) {\n    convertNormalEmphasis(calendarOpt, 'itemStyle');\n    compatTextStyle(calendarOpt, 'dayLabel');\n    compatTextStyle(calendarOpt, 'monthLabel');\n    compatTextStyle(calendarOpt, 'yearLabel');\n  });\n  // radar.name.textStyle\n  each(toArr(option.radar), function (radarOpt) {\n    compatTextStyle(radarOpt, 'name');\n    // Use axisName instead of name because component has name property\n    if (radarOpt.name && radarOpt.axisName == null) {\n      radarOpt.axisName = radarOpt.name;\n      delete radarOpt.name;\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('name property in radar component has been changed to axisName');\n      }\n    }\n    if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\n      radarOpt.axisNameGap = radarOpt.nameGap;\n      delete radarOpt.nameGap;\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('nameGap property in radar component has been changed to axisNameGap');\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      each(radarOpt.indicator, function (indicatorOpt) {\n        if (indicatorOpt.text) {\n          deprecateReplaceLog('text', 'name', 'radar.indicator');\n        }\n      });\n    }\n  });\n  each(toArr(option.geo), function (geoOpt) {\n    if (isObject(geoOpt)) {\n      compatEC3CommonStyles(geoOpt);\n      each(toArr(geoOpt.regions), function (regionObj) {\n        compatEC3CommonStyles(regionObj);\n      });\n    }\n  });\n  each(toArr(option.timeline), function (timelineOpt) {\n    compatEC3CommonStyles(timelineOpt);\n    convertNormalEmphasis(timelineOpt, 'label');\n    convertNormalEmphasis(timelineOpt, 'itemStyle');\n    convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n    var data = timelineOpt.data;\n    zrUtil.isArray(data) && zrUtil.each(data, function (item) {\n      if (zrUtil.isObject(item)) {\n        convertNormalEmphasis(item, 'label');\n        convertNormalEmphasis(item, 'itemStyle');\n      }\n    });\n  });\n  each(toArr(option.toolbox), function (toolboxOpt) {\n    convertNormalEmphasis(toolboxOpt, 'iconStyle');\n    each(toolboxOpt.feature, function (featureOpt) {\n      convertNormalEmphasis(featureOpt, 'iconStyle');\n    });\n  });\n  compatTextStyle(toObj(option.axisPointer), 'label');\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\n  // Clean logs\n  // storedLogs = {};\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, isArray, isObject, isTypedArray, defaults } from 'zrender/lib/core/util.js';\nimport compatStyle from './helper/compatStyle.js';\nimport { normalizeToArray } from '../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../util/log.js';\nfunction get(opt, path) {\n  var pathArr = path.split(',');\n  var obj = opt;\n  for (var i = 0; i < pathArr.length; i++) {\n    obj = obj && obj[pathArr[i]];\n    if (obj == null) {\n      break;\n    }\n  }\n  return obj;\n}\nfunction set(opt, path, val, overwrite) {\n  var pathArr = path.split(',');\n  var obj = opt;\n  var key;\n  var i = 0;\n  for (; i < pathArr.length - 1; i++) {\n    key = pathArr[i];\n    if (obj[key] == null) {\n      obj[key] = {};\n    }\n    obj = obj[key];\n  }\n  if (overwrite || obj[pathArr[i]] == null) {\n    obj[pathArr[i]] = val;\n  }\n}\nfunction compatLayoutProperties(option) {\n  option && each(LAYOUT_PROPERTIES, function (prop) {\n    if (prop[0] in option && !(prop[1] in option)) {\n      option[prop[1]] = option[prop[0]];\n    }\n  });\n}\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\nvar BAR_ITEM_STYLE_MAP = [['borderRadius', 'barBorderRadius'], ['borderColor', 'barBorderColor'], ['borderWidth', 'barBorderWidth']];\nfunction compatBarItemStyle(option) {\n  var itemStyle = option && option.itemStyle;\n  if (itemStyle) {\n    for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\n      var oldName = BAR_ITEM_STYLE_MAP[i][1];\n      var newName = BAR_ITEM_STYLE_MAP[i][0];\n      if (itemStyle[oldName] != null) {\n        itemStyle[newName] = itemStyle[oldName];\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog(oldName, newName);\n        }\n      }\n    }\n  }\n}\nfunction compatPieLabel(option) {\n  if (!option) {\n    return;\n  }\n  if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\n    }\n    option.edgeDistance = option.margin;\n  }\n}\nfunction compatSunburstState(option) {\n  if (!option) {\n    return;\n  }\n  if (option.downplay && !option.blur) {\n    option.blur = option.downplay;\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('downplay', 'blur', 'sunburst');\n    }\n  }\n}\nfunction compatGraphFocus(option) {\n  if (!option) {\n    return;\n  }\n  if (option.focusNodeAdjacency != null) {\n    option.emphasis = option.emphasis || {};\n    if (option.emphasis.focus == null) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\n      }\n      option.emphasis.focus = 'adjacency';\n    }\n  }\n}\nfunction traverseTree(data, cb) {\n  if (data) {\n    for (var i = 0; i < data.length; i++) {\n      cb(data[i]);\n      data[i] && traverseTree(data[i].children, cb);\n    }\n  }\n}\nexport default function globalBackwardCompat(option, isTheme) {\n  compatStyle(option, isTheme);\n  // Make sure series array for model initialization.\n  option.series = normalizeToArray(option.series);\n  each(option.series, function (seriesOpt) {\n    if (!isObject(seriesOpt)) {\n      return;\n    }\n    var seriesType = seriesOpt.type;\n    if (seriesType === 'line') {\n      if (seriesOpt.clipOverflow != null) {\n        seriesOpt.clip = seriesOpt.clipOverflow;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clipOverflow', 'clip', 'line');\n        }\n      }\n    } else if (seriesType === 'pie' || seriesType === 'gauge') {\n      if (seriesOpt.clockWise != null) {\n        seriesOpt.clockwise = seriesOpt.clockWise;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clockWise', 'clockwise');\n        }\n      }\n      compatPieLabel(seriesOpt.label);\n      var data = seriesOpt.data;\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          compatPieLabel(data[i]);\n        }\n      }\n      if (seriesOpt.hoverOffset != null) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n        if (seriesOpt.emphasis.scaleSize = null) {\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\n          }\n          seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\n        }\n      }\n    } else if (seriesType === 'gauge') {\n      var pointerColor = get(seriesOpt, 'pointer.color');\n      pointerColor != null && set(seriesOpt, 'itemStyle.color', pointerColor);\n    } else if (seriesType === 'bar') {\n      compatBarItemStyle(seriesOpt);\n      compatBarItemStyle(seriesOpt.backgroundStyle);\n      compatBarItemStyle(seriesOpt.emphasis);\n      var data = seriesOpt.data;\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          if (typeof data[i] === 'object') {\n            compatBarItemStyle(data[i]);\n            compatBarItemStyle(data[i] && data[i].emphasis);\n          }\n        }\n      }\n    } else if (seriesType === 'sunburst') {\n      var highlightPolicy = seriesOpt.highlightPolicy;\n      if (highlightPolicy) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n        if (!seriesOpt.emphasis.focus) {\n          seriesOpt.emphasis.focus = highlightPolicy;\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\n          }\n        }\n      }\n      compatSunburstState(seriesOpt);\n      traverseTree(seriesOpt.data, compatSunburstState);\n    } else if (seriesType === 'graph' || seriesType === 'sankey') {\n      compatGraphFocus(seriesOpt);\n      // TODO nodes, edges?\n    } else if (seriesType === 'map') {\n      if (seriesOpt.mapType && !seriesOpt.map) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('mapType', 'map', 'map');\n        }\n        seriesOpt.map = seriesOpt.mapType;\n      }\n      if (seriesOpt.mapLocation) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('`mapLocation` is not used anymore.');\n        }\n        defaults(seriesOpt, seriesOpt.mapLocation);\n      }\n    }\n    if (seriesOpt.hoverAnimation != null) {\n      seriesOpt.emphasis = seriesOpt.emphasis || {};\n      if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\n        }\n        seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\n      }\n    }\n    compatLayoutProperties(seriesOpt);\n  });\n  // dataRange has changed to visualMap\n  if (option.dataRange) {\n    option.visualMap = option.dataRange;\n  }\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\n    var options = option[componentName];\n    if (options) {\n      if (!isArray(options)) {\n        options = [options];\n      }\n      each(options, function (option) {\n        compatLayoutProperties(option);\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { addSafe } from '../util/number.js';\n// (1) [Caution]: the logic is correct based on the premises:\n//     data processing stage is blocked in stream.\n//     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n// (2) Only register once when import repeatedly.\n//     Should be executed after series is filtered and before stack calculation.\nexport default function dataStack(ecModel) {\n  var stackInfoMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var stack = seriesModel.get('stack');\n    // Compatible: when `stack` is set as '', do not stack.\n    if (stack) {\n      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n      var data = seriesModel.getData();\n      var stackInfo = {\n        // Used for calculate axis extent automatically.\n        // TODO: Type getCalculationInfo return more specific type?\n        stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n        stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n        stackedDimension: data.getCalculationInfo('stackedDimension'),\n        stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n        isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n        data: data,\n        seriesModel: seriesModel\n      };\n      // If stacked on axis that do not support data stack.\n      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n        return;\n      }\n      stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\n      stackInfoList.push(stackInfo);\n    }\n  });\n  stackInfoMap.each(calculateStack);\n}\nfunction calculateStack(stackInfoList) {\n  each(stackInfoList, function (targetStackInfo, idxInStack) {\n    var resultVal = [];\n    var resultNaN = [NaN, NaN];\n    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n    var targetData = targetStackInfo.data;\n    var isStackedByIndex = targetStackInfo.isStackedByIndex;\n    var stackStrategy = targetStackInfo.seriesModel.get('stackStrategy') || 'samesign';\n    // Should not write on raw data, because stack series model list changes\n    // depending on legend selection.\n    targetData.modify(dims, function (v0, v1, dataIndex) {\n      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex);\n      // Consider `connectNulls` of line area, if value is NaN, stackedOver\n      // should also be NaN, to draw a appropriate belt area.\n      if (isNaN(sum)) {\n        return resultNaN;\n      }\n      var byValue;\n      var stackedDataRawIndex;\n      if (isStackedByIndex) {\n        stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n      } else {\n        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n      }\n      // If stackOver is NaN, chart view will render point on value start.\n      var stackedOver = NaN;\n      for (var j = idxInStack - 1; j >= 0; j--) {\n        var stackInfo = stackInfoList[j];\n        // Has been optimized by inverted indices on `stackedByDimension`.\n        if (!isStackedByIndex) {\n          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n        }\n        if (stackedDataRawIndex >= 0) {\n          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex);\n          // Considering positive stack, negative stack and empty data\n          if (stackStrategy === 'all' // single stack group\n          || stackStrategy === 'positive' && val > 0 || stackStrategy === 'negative' && val < 0 || stackStrategy === 'samesign' && sum >= 0 && val > 0 // All positive stack\n          || stackStrategy === 'samesign' && sum <= 0 && val < 0 // All negative stack\n          ) {\n            // The sum has to be very small to be affected by the\n            // floating arithmetic problem. An incorrect result will probably\n            // cause axis min/max to be filtered incorrectly.\n            sum = addSafe(sum, val);\n            stackedOver = val;\n            break;\n          }\n        }\n      }\n      resultVal[0] = sum;\n      resultVal[1] = stackedOver;\n      return resultVal;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isTypedArray, clone, createHashMap, isArray, isObject, isArrayLike, hasOwn, assert, each, map, isNumber, isString, keys } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_UNKNOWN, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW } from '../util/types.js';\nimport { getDataItemValue } from '../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './helper/sourceHelper.js';\n;\n// @inner\nvar SourceImpl = /** @class */function () {\n  function SourceImpl(fields) {\n    this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\n    this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;\n    // Visit config\n    this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\n    this.startIndex = fields.startIndex || 0;\n    this.dimensionsDetectedCount = fields.dimensionsDetectedCount;\n    this.metaRawOption = fields.metaRawOption;\n    var dimensionsDefine = this.dimensionsDefine = fields.dimensionsDefine;\n    if (dimensionsDefine) {\n      for (var i = 0; i < dimensionsDefine.length; i++) {\n        var dim = dimensionsDefine[i];\n        if (dim.type == null) {\n          if (guessOrdinal(this, i) === BE_ORDINAL.Must) {\n            dim.type = 'ordinal';\n          }\n        }\n      }\n    }\n  }\n  return SourceImpl;\n}();\nexport function isSourceInstance(val) {\n  return val instanceof SourceImpl;\n}\n/**\r\n * Create a source from option.\r\n * NOTE: Created source is immutable. Don't change any properties in it.\r\n */\nexport function createSource(sourceData, thisMetaRawOption,\n// can be null. If not provided, auto detect it from `sourceData`.\nsourceFormat) {\n  sourceFormat = sourceFormat || detectSourceFormat(sourceData);\n  var seriesLayoutBy = thisMetaRawOption.seriesLayoutBy;\n  var determined = determineSourceDimensions(sourceData, sourceFormat, seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\n  var source = new SourceImpl({\n    data: sourceData,\n    sourceFormat: sourceFormat,\n    seriesLayoutBy: seriesLayoutBy,\n    dimensionsDefine: determined.dimensionsDefine,\n    startIndex: determined.startIndex,\n    dimensionsDetectedCount: determined.dimensionsDetectedCount,\n    metaRawOption: clone(thisMetaRawOption)\n  });\n  return source;\n}\n/**\r\n * Wrap original series data for some compatibility cases.\r\n */\nexport function createSourceFromSeriesDataOption(data) {\n  return new SourceImpl({\n    data: data,\n    sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL\n  });\n}\n/**\r\n * Clone source but excludes source data.\r\n */\nexport function cloneSourceShallow(source) {\n  return new SourceImpl({\n    data: source.data,\n    sourceFormat: source.sourceFormat,\n    seriesLayoutBy: source.seriesLayoutBy,\n    dimensionsDefine: clone(source.dimensionsDefine),\n    startIndex: source.startIndex,\n    dimensionsDetectedCount: source.dimensionsDetectedCount\n  });\n}\n/**\r\n * Note: An empty array will be detected as `SOURCE_FORMAT_ARRAY_ROWS`.\r\n */\nexport function detectSourceFormat(data) {\n  var sourceFormat = SOURCE_FORMAT_UNKNOWN;\n  if (isTypedArray(data)) {\n    sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\n  } else if (isArray(data)) {\n    // FIXME Whether tolerate null in top level array?\n    if (data.length === 0) {\n      sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n    }\n    for (var i = 0, len = data.length; i < len; i++) {\n      var item = data[i];\n      if (item == null) {\n        continue;\n      } else if (isArray(item) || isTypedArray(item)) {\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n        break;\n      } else if (isObject(item)) {\n        sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\n        break;\n      }\n    }\n  } else if (isObject(data)) {\n    for (var key in data) {\n      if (hasOwn(data, key) && isArrayLike(data[key])) {\n        sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\n        break;\n      }\n    }\n  }\n  return sourceFormat;\n}\n/**\r\n * Determine the source definitions from data standalone dimensions definitions\r\n * are not specified.\r\n */\nfunction determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader,\n// standalone raw dimensions definition, like:\n// {\n//     dimensions: ['aa', 'bb', { name: 'cc', type: 'time' }]\n// }\n// in `dataset` or `series`\ndimensionsDefine) {\n  var dimensionsDetectedCount;\n  var startIndex;\n  // PENDING: Could data be null/undefined here?\n  // currently, if `dataset.source` not specified, error thrown.\n  // if `series.data` not specified, nothing rendered without error thrown.\n  // Should test these cases.\n  if (!data) {\n    return {\n      dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n      startIndex: startIndex,\n      dimensionsDetectedCount: dimensionsDetectedCount\n    };\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n    // Rule: Most of the first line are string: it is header.\n    // Caution: consider a line with 5 string and 1 number,\n    // it still can not be sure it is a head, because the\n    // 5 string may be 5 values of category columns.\n    if (sourceHeader === 'auto' || sourceHeader == null) {\n      arrayRowsTravelFirst(function (val) {\n        // '-' is regarded as null/undefined.\n        if (val != null && val !== '-') {\n          if (isString(val)) {\n            startIndex == null && (startIndex = 1);\n          } else {\n            startIndex = 0;\n          }\n        }\n        // 10 is an experience number, avoid long loop.\n      }, seriesLayoutBy, dataArrayRows, 10);\n    } else {\n      startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\n    }\n    if (!dimensionsDefine && startIndex === 1) {\n      dimensionsDefine = [];\n      arrayRowsTravelFirst(function (val, index) {\n        dimensionsDefine[index] = val != null ? val + '' : '';\n      }, seriesLayoutBy, dataArrayRows, Infinity);\n    }\n    dimensionsDetectedCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? dataArrayRows.length : dataArrayRows[0] ? dataArrayRows[0].length : null;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = objectRowsCollectDimensions(data);\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = [];\n      each(data, function (colArr, key) {\n        dimensionsDefine.push(key);\n      });\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var value0 = getDataItemValue(data[0]);\n    dimensionsDetectedCount = isArray(value0) && value0.length || 1;\n  } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\n    }\n  }\n  return {\n    startIndex: startIndex,\n    dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n    dimensionsDetectedCount: dimensionsDetectedCount\n  };\n}\nfunction objectRowsCollectDimensions(data) {\n  var firstIndex = 0;\n  var obj;\n  while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\n  if (obj) {\n    return keys(obj);\n  }\n}\n// Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\n// which is reasonable. But dimension name is duplicated.\n// Returns undefined or an array contains only object without null/undefined or string.\nfunction normalizeDimensionsOption(dimensionsDefine) {\n  if (!dimensionsDefine) {\n    // The meaning of null/undefined is different from empty array.\n    return;\n  }\n  var nameMap = createHashMap();\n  return map(dimensionsDefine, function (rawItem, index) {\n    rawItem = isObject(rawItem) ? rawItem : {\n      name: rawItem\n    };\n    // Other fields will be discarded.\n    var item = {\n      name: rawItem.name,\n      displayName: rawItem.displayName,\n      type: rawItem.type\n    };\n    // User can set null in dimensions.\n    // We don't auto specify name, otherwise a given name may\n    // cause it to be referred unexpectedly.\n    if (item.name == null) {\n      return item;\n    }\n    // Also consider number form like 2012.\n    item.name += '';\n    // User may also specify displayName.\n    // displayName will always exists except user not\n    // specified or dim name is not specified or detected.\n    // (A auto generated dim name will not be used as\n    // displayName).\n    if (item.displayName == null) {\n      item.displayName = item.name;\n    }\n    var exist = nameMap.get(item.name);\n    if (!exist) {\n      nameMap.set(item.name, {\n        count: 1\n      });\n    } else {\n      item.name += '-' + exist.count++;\n    }\n    return item;\n  });\n}\nfunction arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\n  if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      cb(data[i] ? data[i][0] : null, i);\n    }\n  } else {\n    var value0 = data[0] || [];\n    for (var i = 0; i < value0.length && i < maxLoop; i++) {\n      cb(value0[i], i);\n    }\n  }\n}\nexport function shouldRetrieveDataByName(source) {\n  var sourceFormat = source.sourceFormat;\n  return sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar _a, _b, _c;\n// TODO\n// ??? refactor? check the outer usage of data provider.\n// merge with defaultDimValueGetter?\nimport { isTypedArray, extend, assert, each, isObject, bind } from 'zrender/lib/core/util.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SERIES_LAYOUT_BY_COLUMN, SERIES_LAYOUT_BY_ROW } from '../../util/types.js';\nvar providerMethods;\nvar mountMethods;\n/**\r\n * If normal array used, mutable chunk size is supported.\r\n * If typed array used, chunk size must be fixed.\r\n */\nvar DefaultDataProvider = /** @class */function () {\n  function DefaultDataProvider(sourceParam, dimSize) {\n    // let source: Source;\n    var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam;\n    // declare source is Source;\n    this._source = source;\n    var data = this._data = source.data;\n    // Typed array. TODO IE10+?\n    if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (dimSize == null) {\n          throw new Error('Typed array data must specify dimension size');\n        }\n      }\n      this._offset = 0;\n      this._dimSize = dimSize;\n      this._data = data;\n    }\n    mountMethods(this, data, source);\n  }\n  DefaultDataProvider.prototype.getSource = function () {\n    return this._source;\n  };\n  DefaultDataProvider.prototype.count = function () {\n    return 0;\n  };\n  DefaultDataProvider.prototype.getItem = function (idx, out) {\n    return;\n  };\n  DefaultDataProvider.prototype.appendData = function (newData) {};\n  DefaultDataProvider.prototype.clean = function () {};\n  DefaultDataProvider.protoInitialize = function () {\n    // PENDING: To avoid potential incompat (e.g., prototype\n    // is visited somewhere), still init them on prototype.\n    var proto = DefaultDataProvider.prototype;\n    proto.pure = false;\n    proto.persistent = true;\n  }();\n  DefaultDataProvider.internalField = function () {\n    var _a;\n    mountMethods = function (provider, data, source) {\n      var sourceFormat = source.sourceFormat;\n      var seriesLayoutBy = source.seriesLayoutBy;\n      var startIndex = source.startIndex;\n      var dimsDef = source.dimensionsDefine;\n      var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n      if (process.env.NODE_ENV !== 'production') {\n        assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\n      }\n      extend(provider, methods);\n      if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n        provider.getItem = getItemForTypedArray;\n        provider.count = countForTypedArray;\n        provider.fillStorage = fillStorageForTypedArray;\n      } else {\n        var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\n        provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\n        var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\n        provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\n      }\n    };\n    var getItemForTypedArray = function (idx, out) {\n      idx = idx - this._offset;\n      out = out || [];\n      var data = this._data;\n      var dimSize = this._dimSize;\n      var offset = dimSize * idx;\n      for (var i = 0; i < dimSize; i++) {\n        out[i] = data[offset + i];\n      }\n      return out;\n    };\n    var fillStorageForTypedArray = function (start, end, storage, extent) {\n      var data = this._data;\n      var dimSize = this._dimSize;\n      for (var dim = 0; dim < dimSize; dim++) {\n        var dimExtent = extent[dim];\n        var min = dimExtent[0] == null ? Infinity : dimExtent[0];\n        var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\n        var count = end - start;\n        var arr = storage[dim];\n        for (var i = 0; i < count; i++) {\n          // appendData with TypedArray will always do replace in provider.\n          var val = data[i * dimSize + dim];\n          arr[start + i] = val;\n          val < min && (min = val);\n          val > max && (max = val);\n        }\n        dimExtent[0] = min;\n        dimExtent[1] = max;\n      }\n    };\n    var countForTypedArray = function () {\n      return this._data ? this._data.length / this._dimSize : 0;\n    };\n    providerMethods = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\n      pure: true,\n      appendData: function () {\n        throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\n      }\n    }, _a[SOURCE_FORMAT_OBJECT_ROWS] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\n      pure: true,\n      appendData: function (newData) {\n        var data = this._data;\n        each(newData, function (newCol, key) {\n          var oldCol = data[key] || (data[key] = []);\n          for (var i = 0; i < (newCol || []).length; i++) {\n            oldCol.push(newCol[i]);\n          }\n        });\n      }\n    }, _a[SOURCE_FORMAT_ORIGINAL] = {\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_TYPED_ARRAY] = {\n      persistent: false,\n      pure: true,\n      appendData: function (newData) {\n        if (process.env.NODE_ENV !== 'production') {\n          assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\n        }\n        this._data = newData;\n      },\n      // Clean self if data is already used.\n      clean: function () {\n        // PENDING\n        this._offset += this.count();\n        this._data = null;\n      }\n    }, _a);\n    function appendDataSimply(newData) {\n      for (var i = 0; i < newData.length; i++) {\n        this._data.push(newData[i]);\n      }\n    }\n  }();\n  return DefaultDataProvider;\n}();\nexport { DefaultDataProvider };\nvar getItemSimply = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx];\n};\nvar rawSourceItemGetterMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx + startIndex];\n}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx, out) {\n  idx += startIndex;\n  var item = out || [];\n  var data = rawData;\n  for (var i = 0; i < data.length; i++) {\n    var row = data[i];\n    item[i] = row ? row[idx] : null;\n  }\n  return item;\n}, _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx, out) {\n  var item = out || [];\n  for (var i = 0; i < dimsDef.length; i++) {\n    var dimName = dimsDef[i].name;\n    if (process.env.NODE_ENV !== 'production') {\n      if (dimName == null) {\n        throw new Error();\n      }\n    }\n    var col = rawData[dimName];\n    item[i] = col ? col[idx] : null;\n  }\n  return item;\n}, _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _a);\nexport function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n  return method;\n}\nvar countSimply = function (rawData, startIndex, dimsDef) {\n  return rawData.length;\n};\nvar rawSourceDataCounterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\n  return Math.max(0, rawData.length - startIndex);\n}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\n  var row = rawData[0];\n  return row ? Math.max(0, row.length - startIndex) : 0;\n}, _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\n  var dimName = dimsDef[0].name;\n  if (process.env.NODE_ENV !== 'production') {\n    if (dimName == null) {\n      throw new Error();\n    }\n  }\n  var col = rawData[dimName];\n  return col ? col.length : 0;\n}, _b[SOURCE_FORMAT_ORIGINAL] = countSimply, _b);\nexport function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n  return method;\n}\nvar getRawValueSimply = function (dataItem, dimIndex, property) {\n  return dataItem[dimIndex];\n};\nvar rawSourceValueGetterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _c[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, property) {\n  return dataItem[property];\n}, _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _c[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, property) {\n  // FIXME: In some case (markpoint in geo (geo-map.html)),\n  // dataItem is {coord: [...]}\n  var value = getDataItemValue(dataItem);\n  return !(value instanceof Array) ? value : value[dimIndex];\n}, _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _c);\nexport function getRawSourceValueGetter(sourceFormat) {\n  var method = rawSourceValueGetterMap[sourceFormat];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get value on \"' + sourceFormat + '\".');\n  }\n  return method;\n}\nfunction getMethodMapKey(sourceFormat, seriesLayoutBy) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + seriesLayoutBy : sourceFormat;\n}\n// ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\n// Consider persistent.\n// Caution: why use raw value to display on label or tooltip?\n// A reason is to avoid format. For example time value we do not know\n// how to format is expected. More over, if stack is used, calculated\n// value may be 0.91000000001, which have brings trouble to display.\n// TODO: consider how to treat null/undefined/NaN when display?\nexport function retrieveRawValue(data, dataIndex,\n// If dimIndex is null/undefined, return OptionDataItem.\n// Otherwise, return OptionDataValue.\ndim) {\n  if (!data) {\n    return;\n  }\n  // Consider data may be not persistent.\n  var dataItem = data.getRawDataItem(dataIndex);\n  if (dataItem == null) {\n    return;\n  }\n  var store = data.getStore();\n  var sourceFormat = store.getSource().sourceFormat;\n  if (dim != null) {\n    var dimIndex = data.getDimensionIndex(dim);\n    var property = store.getDimensionProperty(dimIndex);\n    return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);\n  } else {\n    var result = dataItem;\n    if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      result = getDataItemValue(dataItem);\n    }\n    return result;\n  }\n}\n/**\r\n * Compatible with some cases (in pie, map) like:\r\n * data: [{name: 'xx', value: 5, selected: true}, ...]\r\n * where only sourceFormat is 'original' and 'objectRows' supported.\r\n *\r\n * // TODO\r\n * Supported detail options in data item when using 'arrayRows'.\r\n *\r\n * @param data\r\n * @param dataIndex\r\n * @param attr like 'selected'\r\n */\nexport function retrieveRawAttr(data, dataIndex, attr) {\n  if (!data) {\n    return;\n  }\n  var sourceFormat = data.getStore().getSource().sourceFormat;\n  if (sourceFormat !== SOURCE_FORMAT_ORIGINAL && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n    return;\n  }\n  var dataItem = data.getRawDataItem(dataIndex);\n  if (sourceFormat === SOURCE_FORMAT_ORIGINAL && !isObject(dataItem)) {\n    dataItem = null;\n  }\n  if (dataItem) {\n    return dataItem[attr];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { formatTpl } from '../../util/format.js';\nimport { error, makePrintable } from '../../util/log.js';\nvar DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\nvar DataFormatMixin = /** @class */function () {\n  function DataFormatMixin() {}\n  /**\r\n   * Get params for formatter\r\n   */\n  DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\n    var data = this.getData(dataType);\n    var rawValue = this.getRawValue(dataIndex, dataType);\n    var rawDataIndex = data.getRawIndex(dataIndex);\n    var name = data.getName(dataIndex);\n    var itemOpt = data.getRawDataItem(dataIndex);\n    var style = data.getItemVisual(dataIndex, 'style');\n    var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\n    var borderColor = style && style.stroke;\n    var mainType = this.mainType;\n    var isSeries = mainType === 'series';\n    var userOutput = data.userOutput && data.userOutput.get();\n    return {\n      componentType: mainType,\n      componentSubType: this.subType,\n      componentIndex: this.componentIndex,\n      seriesType: isSeries ? this.subType : null,\n      seriesIndex: this.seriesIndex,\n      seriesId: isSeries ? this.id : null,\n      seriesName: isSeries ? this.name : null,\n      name: name,\n      dataIndex: rawDataIndex,\n      data: itemOpt,\n      dataType: dataType,\n      value: rawValue,\n      color: color,\n      borderColor: borderColor,\n      dimensionNames: userOutput ? userOutput.fullDimensions : null,\n      encode: userOutput ? userOutput.encode : null,\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n      $vars: ['seriesName', 'name', 'value']\n    };\n  };\n  /**\r\n   * Format label\r\n   * @param dataIndex\r\n   * @param status 'normal' by default\r\n   * @param dataType\r\n   * @param labelDimIndex Only used in some chart that\r\n   *        use formatter in different dimensions, like radar.\r\n   * @param formatter Formatter given outside.\r\n   * @return return null/undefined if no formatter\r\n   */\n  DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\n    status = status || 'normal';\n    var data = this.getData(dataType);\n    var params = this.getDataParams(dataIndex, dataType);\n    if (extendParams) {\n      params.value = extendParams.interpolatedValue;\n    }\n    if (labelDimIndex != null && zrUtil.isArray(params.value)) {\n      params.value = params.value[labelDimIndex];\n    }\n    if (!formatter) {\n      var itemModel = data.getItemModel(dataIndex);\n      // @ts-ignore\n      formatter = itemModel.get(status === 'normal' ? ['label', 'formatter'] : [status, 'label', 'formatter']);\n    }\n    if (zrUtil.isFunction(formatter)) {\n      params.status = status;\n      params.dimensionIndex = labelDimIndex;\n      return formatter(params);\n    } else if (zrUtil.isString(formatter)) {\n      var str = formatTpl(formatter, params);\n      // Support 'aaa{@[3]}bbb{@product}ccc'.\n      // Do not support '}' in dim name util have to.\n      return str.replace(DIMENSION_LABEL_REG, function (origin, dimStr) {\n        var len = dimStr.length;\n        var dimLoose = dimStr;\n        if (dimLoose.charAt(0) === '[' && dimLoose.charAt(len - 1) === ']') {\n          dimLoose = +dimLoose.slice(1, len - 1); // Also support: '[]' => 0\n          if (process.env.NODE_ENV !== 'production') {\n            if (isNaN(dimLoose)) {\n              error(\"Invalide label formatter: @\" + dimStr + \", only support @[0], @[1], @[2], ...\");\n            }\n          }\n        }\n        var val = retrieveRawValue(data, dataIndex, dimLoose);\n        if (extendParams && zrUtil.isArray(extendParams.interpolatedValue)) {\n          var dimIndex = data.getDimensionIndex(dimLoose);\n          if (dimIndex >= 0) {\n            val = extendParams.interpolatedValue[dimIndex];\n          }\n        }\n        return val != null ? val + '' : '';\n      });\n    }\n  };\n  /**\r\n   * Get raw value in option\r\n   */\n  DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\n    return retrieveRawValue(this.getData(dataType), idx);\n  };\n  /**\r\n   * Should be implemented.\r\n   * @param {number} dataIndex\r\n   * @param {boolean} [multipleSeries=false]\r\n   * @param {string} [dataType]\r\n   */\n  DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // Empty function\n    return;\n  };\n  return DataFormatMixin;\n}();\nexport { DataFormatMixin };\n;\n// PENDING: previously we accept this type when calling `formatTooltip`,\n// but guess little chance has been used outside. Do we need to backward\n// compat it?\n// type TooltipFormatResultLegacyObject = {\n//     // `html` means the markup language text, either in 'html' or 'richText'.\n//     // The name `html` is not appropriate because in 'richText' it is not a HTML\n//     // string. But still support it for backward compatibility.\n//     html: string;\n//     markers: Dictionary<ColorString>;\n// };\n/**\r\n * For backward compat, normalize the return from `formatTooltip`.\r\n */\nexport function normalizeTooltipFormatResult(result) {\n  var markupText;\n  // let markers: Dictionary<ColorString>;\n  var markupFragment;\n  if (zrUtil.isObject(result)) {\n    if (result.type) {\n      markupFragment = result;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('The return type of `formatTooltip` is not supported: ' + makePrintable(result));\n      }\n    }\n    // else {\n    //     markupText = (result as TooltipFormatResultLegacyObject).html;\n    //     markers = (result as TooltipFormatResultLegacyObject).markers;\n    //     if (markersExisting) {\n    //         markers = zrUtil.merge(markersExisting, markers);\n    //     }\n    // }\n  } else {\n    markupText = result;\n  }\n  return {\n    text: markupText,\n    // markers: markers || markersExisting,\n    frag: markupFragment\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { assert, isArray } from 'zrender/lib/core/util.js';\n;\n/**\r\n * @param {Object} define\r\n * @return See the return of `createTask`.\r\n */\nexport function createTask(define) {\n  return new Task(define);\n}\nvar Task = /** @class */function () {\n  function Task(define) {\n    define = define || {};\n    this._reset = define.reset;\n    this._plan = define.plan;\n    this._count = define.count;\n    this._onDirty = define.onDirty;\n    this._dirty = true;\n  }\n  /**\r\n   * @param step Specified step.\r\n   * @param skip Skip customer perform call.\r\n   * @param modBy Sampling window size.\r\n   * @param modDataCount Sampling count.\r\n   * @return whether unfinished.\r\n   */\n  Task.prototype.perform = function (performArgs) {\n    var upTask = this._upstream;\n    var skip = performArgs && performArgs.skip;\n    // TODO some refactor.\n    // Pull data. Must pull data each time, because context.data\n    // may be updated by Series.setData.\n    if (this._dirty && upTask) {\n      var context = this.context;\n      context.data = context.outputData = upTask.context.outputData;\n    }\n    if (this.__pipeline) {\n      this.__pipeline.currentTask = this;\n    }\n    var planResult;\n    if (this._plan && !skip) {\n      planResult = this._plan(this.context);\n    }\n    // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n    // elements uniformed distributed when progress, especially when moving or zooming.\n    var lastModBy = normalizeModBy(this._modBy);\n    var lastModDataCount = this._modDataCount || 0;\n    var modBy = normalizeModBy(performArgs && performArgs.modBy);\n    var modDataCount = performArgs && performArgs.modDataCount || 0;\n    if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n      planResult = 'reset';\n    }\n    function normalizeModBy(val) {\n      !(val >= 1) && (val = 1); // jshint ignore:line\n      return val;\n    }\n    var forceFirstProgress;\n    if (this._dirty || planResult === 'reset') {\n      this._dirty = false;\n      forceFirstProgress = this._doReset(skip);\n    }\n    this._modBy = modBy;\n    this._modDataCount = modDataCount;\n    var step = performArgs && performArgs.step;\n    if (upTask) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(upTask._outputDueEnd != null);\n      }\n      this._dueEnd = upTask._outputDueEnd;\n    }\n    // DataTask or overallTask\n    else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!this._progress || this._count);\n      }\n      this._dueEnd = this._count ? this._count(this.context) : Infinity;\n    }\n    // Note: Stubs, that its host overall task let it has progress, has progress.\n    // If no progress, pass index from upstream to downstream each time plan called.\n    if (this._progress) {\n      var start = this._dueIndex;\n      var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n      if (!skip && (forceFirstProgress || start < end)) {\n        var progress = this._progress;\n        if (isArray(progress)) {\n          for (var i = 0; i < progress.length; i++) {\n            this._doProgress(progress[i], start, end, modBy, modDataCount);\n          }\n        } else {\n          this._doProgress(progress, start, end, modBy, modDataCount);\n        }\n      }\n      this._dueIndex = end;\n      // If no `outputDueEnd`, assume that output data and\n      // input data is the same, so use `dueIndex` as `outputDueEnd`.\n      var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n      if (process.env.NODE_ENV !== 'production') {\n        // ??? Can not rollback.\n        assert(outputDueEnd >= this._outputDueEnd);\n      }\n      this._outputDueEnd = outputDueEnd;\n    } else {\n      // (1) Some overall task has no progress.\n      // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n      // This should always be performed so it can be passed to downstream.\n      this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n    }\n    return this.unfinished();\n  };\n  Task.prototype.dirty = function () {\n    this._dirty = true;\n    this._onDirty && this._onDirty(this.context);\n  };\n  Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\n    iterator.reset(start, end, modBy, modDataCount);\n    this._callingProgress = progress;\n    this._callingProgress({\n      start: start,\n      end: end,\n      count: end - start,\n      next: iterator.next\n    }, this.context);\n  };\n  Task.prototype._doReset = function (skip) {\n    this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\n    this._settedOutputEnd = null;\n    var progress;\n    var forceFirstProgress;\n    if (!skip && this._reset) {\n      progress = this._reset(this.context);\n      if (progress && progress.progress) {\n        forceFirstProgress = progress.forceFirstProgress;\n        progress = progress.progress;\n      }\n      // To simplify no progress checking, array must has item.\n      if (isArray(progress) && !progress.length) {\n        progress = null;\n      }\n    }\n    this._progress = progress;\n    this._modBy = this._modDataCount = null;\n    var downstream = this._downstream;\n    downstream && downstream.dirty();\n    return forceFirstProgress;\n  };\n  Task.prototype.unfinished = function () {\n    return this._progress && this._dueIndex < this._dueEnd;\n  };\n  /**\r\n   * @param downTask The downstream task.\r\n   * @return The downstream task.\r\n   */\n  Task.prototype.pipe = function (downTask) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(downTask && !downTask._disposed && downTask !== this);\n    }\n    // If already downstream, do not dirty downTask.\n    if (this._downstream !== downTask || this._dirty) {\n      this._downstream = downTask;\n      downTask._upstream = this;\n      downTask.dirty();\n    }\n  };\n  Task.prototype.dispose = function () {\n    if (this._disposed) {\n      return;\n    }\n    this._upstream && (this._upstream._downstream = null);\n    this._downstream && (this._downstream._upstream = null);\n    this._dirty = false;\n    this._disposed = true;\n  };\n  Task.prototype.getUpstream = function () {\n    return this._upstream;\n  };\n  Task.prototype.getDownstream = function () {\n    return this._downstream;\n  };\n  Task.prototype.setOutputEnd = function (end) {\n    // This only happens in dataTask, dataZoom, map, currently.\n    // where dataZoom do not set end each time, but only set\n    // when reset. So we should record the set end, in case\n    // that the stub of dataZoom perform again and earse the\n    // set end by upstream.\n    this._outputDueEnd = this._settedOutputEnd = end;\n  };\n  return Task;\n}();\nexport { Task };\nvar iterator = function () {\n  var end;\n  var current;\n  var modBy;\n  var modDataCount;\n  var winCount;\n  var it = {\n    reset: function (s, e, sStep, sCount) {\n      current = s;\n      end = e;\n      modBy = sStep;\n      modDataCount = sCount;\n      winCount = Math.ceil(modDataCount / modBy);\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n    }\n  };\n  return it;\n  function sequentialNext() {\n    return current < end ? current++ : null;\n  }\n  function modNext() {\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex\n    // If modDataCount is smaller than data.count() (consider `appendData` case),\n    // Use normal linear rendering mode.\n    : current;\n    current++;\n    return result;\n  }\n}();\n// -----------------------------------------------------------------------------\n// For stream debug (Should be commented out after used!)\n// @usage: printTask(this, 'begin');\n// @usage: printTask(this, null, {someExtraProp});\n// @usage: Use `__idxInPipeline` as conditional breakpiont.\n//\n// window.printTask = function (task: any, prefix: string, extra: { [key: string]: unknown }): void {\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n//     let props = [];\n//     if (task.__pipeline) {\n//         let val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n//         props.push({text: '__idxInPipeline/total', value: val});\n//     } else {\n//         let stubCount = 0;\n//         task.agentStubMap.each(() => stubCount++);\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n//     }\n//     props.push({text: 'uid', value: task.uidDebug});\n//     if (task.__pipeline) {\n//         props.push({text: 'pipelineId', value: task.__pipeline.id});\n//         task.agent && props.push(\n//             {text: 'stubFor', value: task.agent.uidDebug}\n//         );\n//     }\n//     props.push(\n//         {text: 'dirty', value: task._dirty},\n//         {text: 'dueIndex', value: task._dueIndex},\n//         {text: 'dueEnd', value: task._dueEnd},\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\n//     );\n//     if (extra) {\n//         Object.keys(extra).forEach(key => {\n//             props.push({text: key, value: extra[key]});\n//         });\n//     }\n//     let args = ['color: blue'];\n//     let msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n//         args.push('color: green', 'color: red'),\n//         `${item.text}: %c${item.value}`\n//     )).join('%c, ');\n//     console.log.apply(console, [msg].concat(args));\n//     // console.log(this);\n// };\n// window.printPipeline = function (task: any, prefix: string) {\n//     const pipeline = task.__pipeline;\n//     let currTask = pipeline.head;\n//     while (currTask) {\n//         window.printTask(currTask, prefix);\n//         currTask = currTask._downstream;\n//     }\n// };\n// window.showChain = function (chainHeadTask) {\n//     var chain = [];\n//     var task = chainHeadTask;\n//     while (task) {\n//         chain.push({\n//             task: task,\n//             up: task._upstream,\n//             down: task._downstream,\n//             idxInPipeline: task.__idxInPipeline\n//         });\n//         task = task._downstream;\n//     }\n//     return chain;\n// };\n// window.findTaskInChain = function (task, chainHeadTask) {\n//     let chain = window.showChain(chainHeadTask);\n//     let result = [];\n//     for (let i = 0; i < chain.length; i++) {\n//         let chainItem = chain[i];\n//         if (chainItem.task === task) {\n//             result.push(i);\n//         }\n//     }\n//     return result;\n// };\n// window.printChainAEachInChainB = function (chainHeadTaskA, chainHeadTaskB) {\n//     let chainA = window.showChain(chainHeadTaskA);\n//     for (let i = 0; i < chainA.length; i++) {\n//         console.log('chainAIdx:', i, 'inChainB:', window.findTaskInChain(chainA[i].task, chainHeadTaskB));\n//     }\n// };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { parseDate, numericToNumber } from '../../util/number.js';\nimport { createHashMap, trim, hasOwn, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { throwError } from '../../util/log.js';\n/**\r\n * Convert raw the value in to inner value in List.\r\n *\r\n * [Performance sensitive]\r\n *\r\n * [Caution]: this is the key logic of user value parser.\r\n * For backward compatibility, do not modify it until you have to!\r\n */\nexport function parseDataValue(value,\n// For high performance, do not omit the second param.\nopt) {\n  // Performance sensitive.\n  var dimType = opt && opt.type;\n  if (dimType === 'ordinal') {\n    // If given value is a category string\n    return value;\n  }\n  if (dimType === 'time'\n  // spead up when using timestamp\n  && !isNumber(value) && value != null && value !== '-') {\n    value = +parseDate(value);\n  }\n  // dimType defaults 'number'.\n  // If dimType is not ordinal and value is null or undefined or NaN or '-',\n  // parse to NaN.\n  // number-like string (like ' 123 ') can be converted to a number.\n  // where null/undefined or other string will be converted to NaN.\n  return value == null || value === '' ? NaN\n  // If string (like '-'), using '+' parse to NaN\n  // If object, also parse to NaN\n  : Number(value);\n}\n;\nvar valueParserMap = createHashMap({\n  'number': function (val) {\n    // Do not use `numericToNumber` here. We have `numericToNumber` by default.\n    // Here the number parser can have loose rule:\n    // enable to cut suffix: \"120px\" => 120, \"14%\" => 14.\n    return parseFloat(val);\n  },\n  'time': function (val) {\n    // return timestamp.\n    return +parseDate(val);\n  },\n  'trim': function (val) {\n    return isString(val) ? trim(val) : val;\n  }\n});\nexport function getRawValueParser(type) {\n  return valueParserMap.get(type);\n}\nvar ORDER_COMPARISON_OP_MAP = {\n  lt: function (lval, rval) {\n    return lval < rval;\n  },\n  lte: function (lval, rval) {\n    return lval <= rval;\n  },\n  gt: function (lval, rval) {\n    return lval > rval;\n  },\n  gte: function (lval, rval) {\n    return lval >= rval;\n  }\n};\nvar FilterOrderComparator = /** @class */function () {\n  function FilterOrderComparator(op, rval) {\n    if (!isNumber(rval)) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'rvalue of \"<\", \">\", \"<=\", \">=\" can only be number in filter.';\n      }\n      throwError(errMsg);\n    }\n    this._opFn = ORDER_COMPARISON_OP_MAP[op];\n    this._rvalFloat = numericToNumber(rval);\n  }\n  // Performance sensitive.\n  FilterOrderComparator.prototype.evaluate = function (lval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    return isNumber(lval) ? this._opFn(lval, this._rvalFloat) : this._opFn(numericToNumber(lval), this._rvalFloat);\n  };\n  return FilterOrderComparator;\n}();\nvar SortOrderComparator = /** @class */function () {\n  /**\r\n   * @param order by default: 'asc'\r\n   * @param incomparable by default: Always on the tail.\r\n   *        That is, if 'asc' => 'max', if 'desc' => 'min'\r\n   *        See the definition of \"incomparable\" in [SORT_COMPARISON_RULE].\r\n   */\n  function SortOrderComparator(order, incomparable) {\n    var isDesc = order === 'desc';\n    this._resultLT = isDesc ? 1 : -1;\n    if (incomparable == null) {\n      incomparable = isDesc ? 'min' : 'max';\n    }\n    this._incomparable = incomparable === 'min' ? -Infinity : Infinity;\n  }\n  // See [SORT_COMPARISON_RULE].\n  // Performance sensitive.\n  SortOrderComparator.prototype.evaluate = function (lval, rval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);\n    var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);\n    var lvalNotNumeric = isNaN(lvalFloat);\n    var rvalNotNumeric = isNaN(rvalFloat);\n    if (lvalNotNumeric) {\n      lvalFloat = this._incomparable;\n    }\n    if (rvalNotNumeric) {\n      rvalFloat = this._incomparable;\n    }\n    if (lvalNotNumeric && rvalNotNumeric) {\n      var lvalIsStr = isString(lval);\n      var rvalIsStr = isString(rval);\n      if (lvalIsStr) {\n        lvalFloat = rvalIsStr ? lval : 0;\n      }\n      if (rvalIsStr) {\n        rvalFloat = lvalIsStr ? rval : 0;\n      }\n    }\n    return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;\n  };\n  return SortOrderComparator;\n}();\nexport { SortOrderComparator };\nvar FilterEqualityComparator = /** @class */function () {\n  function FilterEqualityComparator(isEq, rval) {\n    this._rval = rval;\n    this._isEQ = isEq;\n    this._rvalTypeof = typeof rval;\n    this._rvalFloat = numericToNumber(rval);\n  }\n  // Performance sensitive.\n  FilterEqualityComparator.prototype.evaluate = function (lval) {\n    var eqResult = lval === this._rval;\n    if (!eqResult) {\n      var lvalTypeof = typeof lval;\n      if (lvalTypeof !== this._rvalTypeof && (lvalTypeof === 'number' || this._rvalTypeof === 'number')) {\n        eqResult = numericToNumber(lval) === this._rvalFloat;\n      }\n    }\n    return this._isEQ ? eqResult : !eqResult;\n  };\n  return FilterEqualityComparator;\n}();\n/**\r\n * [FILTER_COMPARISON_RULE]\r\n * `lt`|`lte`|`gt`|`gte`:\r\n * + rval must be a number. And lval will be converted to number (`numericToNumber`) to compare.\r\n * `eq`:\r\n * + If same type, compare with `===`.\r\n * + If there is one number, convert to number (`numericToNumber`) to compare.\r\n * + Else return `false`.\r\n * `ne`:\r\n * + Not `eq`.\r\n *\r\n *\r\n * [SORT_COMPARISON_RULE]\r\n * All the values are grouped into three categories:\r\n * + \"numeric\" (number and numeric string)\r\n * + \"non-numeric-string\" (string that excluding numeric string)\r\n * + \"others\"\r\n * \"numeric\" vs \"numeric\": values are ordered by number order.\r\n * \"non-numeric-string\" vs \"non-numeric-string\": values are ordered by ES spec (#sec-abstract-relational-comparison).\r\n * \"others\" vs \"others\": do not change order (always return 0).\r\n * \"numeric\" vs \"non-numeric-string\": \"non-numeric-string\" is treated as \"incomparable\".\r\n * \"number\" vs \"others\": \"others\" is treated as \"incomparable\".\r\n * \"non-numeric-string\" vs \"others\": \"others\" is treated as \"incomparable\".\r\n * \"incomparable\" will be seen as -Infinity or Infinity (depends on the settings).\r\n * MEMO:\r\n *   Non-numeric string sort makes sense when we need to put the items with the same tag together.\r\n *   But if we support string sort, we still need to avoid the misleading like `'2' > '12'`,\r\n *   So we treat \"numeric-string\" sorted by number order rather than string comparison.\r\n *\r\n *\r\n * [CHECK_LIST_OF_THE_RULE_DESIGN]\r\n * + Do not support string comparison until required. And also need to\r\n *   avoid the misleading of \"2\" > \"12\".\r\n * + Should avoid the misleading case:\r\n *   `\" 22 \" gte \"22\"` is `true` but `\" 22 \" eq \"22\"` is `false`.\r\n * + JS bad case should be avoided: null <= 0, [] <= 0, ' ' <= 0, ...\r\n * + Only \"numeric\" can be converted to comparable number, otherwise converted to NaN.\r\n *   See `util/number.ts#numericToNumber`.\r\n *\r\n * @return If `op` is not `RelationalOperator`, return null;\r\n */\nexport function createFilterComparator(op, rval) {\n  return op === 'eq' || op === 'ne' ? new FilterEqualityComparator(op === 'eq', rval) : hasOwn(ORDER_COMPARISON_OP_MAP, op) ? new FilterOrderComparator(op, rval) : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createHashMap, bind, each, hasOwn, map, clone, isObject, extend, isNumber } from 'zrender/lib/core/util.js';\nimport { getRawSourceItemGetter, getRawSourceDataCounter, getRawSourceValueGetter } from './dataProvider.js';\nimport { parseDataValue } from './dataValueHelper.js';\nimport { log, makePrintable, throwError } from '../../util/log.js';\nimport { createSource, detectSourceFormat } from '../Source.js';\n/**\r\n * TODO: disable writable.\r\n * This structure will be exposed to users.\r\n */\nvar ExternalSource = /** @class */function () {\n  function ExternalSource() {}\n  ExternalSource.prototype.getRawData = function () {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n  ExternalSource.prototype.getRawDataItem = function (dataIndex) {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n  ExternalSource.prototype.cloneRawData = function () {\n    return;\n  };\n  /**\r\n   * @return If dimension not found, return null/undefined.\r\n   */\n  ExternalSource.prototype.getDimensionInfo = function (dim) {\n    return;\n  };\n  /**\r\n   * dimensions defined if and only if either:\r\n   * (a) dataset.dimensions are declared.\r\n   * (b) dataset data include dimensions definitions in data (detected or via specified `sourceHeader`).\r\n   * If dimensions are defined, `dimensionInfoAll` is corresponding to\r\n   * the defined dimensions.\r\n   * Otherwise, `dimensionInfoAll` is determined by data columns.\r\n   * @return Always return an array (even empty array).\r\n   */\n  ExternalSource.prototype.cloneAllDimensionInfo = function () {\n    return;\n  };\n  ExternalSource.prototype.count = function () {\n    return;\n  };\n  /**\r\n   * Only support by dimension index.\r\n   * No need to support by dimension name in transform function,\r\n   * because transform function is not case-specific, no need to use name literally.\r\n   */\n  ExternalSource.prototype.retrieveValue = function (dataIndex, dimIndex) {\n    return;\n  };\n  ExternalSource.prototype.retrieveValueFromItem = function (dataItem, dimIndex) {\n    return;\n  };\n  ExternalSource.prototype.convertValue = function (rawVal, dimInfo) {\n    return parseDataValue(rawVal, dimInfo);\n  };\n  return ExternalSource;\n}();\nexport { ExternalSource };\nfunction createExternalSource(internalSource, externalTransform) {\n  var extSource = new ExternalSource();\n  var data = internalSource.data;\n  var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\n  var sourceHeaderCount = internalSource.startIndex;\n  var errMsg = '';\n  if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {\n    // For the logic simplicity in transformer, only 'culumn' is\n    // supported in data transform. Otherwise, the `dimensionsDefine`\n    // might be detected by 'row', which probably confuses users.\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`seriesLayoutBy` of upstream dataset can only be \"column\" in data transform.';\n    }\n    throwError(errMsg);\n  }\n  // [MEMO]\n  // Create a new dimensions structure for exposing.\n  // Do not expose all dimension info to users directly.\n  // Because the dimension is probably auto detected from data and not might reliable.\n  // Should not lead the transformers to think that is reliable and return it.\n  // See [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n  var dimensions = [];\n  var dimsByName = {};\n  var dimsDef = internalSource.dimensionsDefine;\n  if (dimsDef) {\n    each(dimsDef, function (dimDef, idx) {\n      var name = dimDef.name;\n      var dimDefExt = {\n        index: idx,\n        name: name,\n        displayName: dimDef.displayName\n      };\n      dimensions.push(dimDefExt);\n      // Users probably do not specify dimension name. For simplicity, data transform\n      // does not generate dimension name.\n      if (name != null) {\n        // Dimension name should not be duplicated.\n        // For simplicity, data transform forbids name duplication, do not generate\n        // new name like module `completeDimensions.ts` did, but just tell users.\n        var errMsg_1 = '';\n        if (hasOwn(dimsByName, name)) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg_1 = 'dimension name \"' + name + '\" duplicated.';\n          }\n          throwError(errMsg_1);\n        }\n        dimsByName[name] = dimDefExt;\n      }\n    });\n  }\n  // If dimension definitions are not defined and can not be detected.\n  // e.g., pure data `[[11, 22], ...]`.\n  else {\n    for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\n      // Do not generete name or anything others. The consequence process in\n      // `transform` or `series` probably have there own name generation strategry.\n      dimensions.push({\n        index: i\n      });\n    }\n  }\n  // Implement public methods:\n  var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  if (externalTransform.__isBuiltIn) {\n    extSource.getRawDataItem = function (dataIndex) {\n      return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    };\n    extSource.getRawData = bind(getRawData, null, internalSource);\n  }\n  extSource.cloneRawData = bind(cloneRawData, null, internalSource);\n  var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\n  var rawValueGetter = getRawSourceValueGetter(sourceFormat);\n  extSource.retrieveValue = function (dataIndex, dimIndex) {\n    var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    return retrieveValueFromItem(rawItem, dimIndex);\n  };\n  var retrieveValueFromItem = extSource.retrieveValueFromItem = function (dataItem, dimIndex) {\n    if (dataItem == null) {\n      return;\n    }\n    var dimDef = dimensions[dimIndex];\n    // When `dimIndex` is `null`, `rawValueGetter` return the whole item.\n    if (dimDef) {\n      return rawValueGetter(dataItem, dimIndex, dimDef.name);\n    }\n  };\n  extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\n  extSource.cloneAllDimensionInfo = bind(cloneAllDimensionInfo, null, dimensions);\n  return extSource;\n}\nfunction getRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`getRawData` is not supported in source format ' + sourceFormat;\n    }\n    throwError(errMsg);\n  }\n  return upstream.data;\n}\nfunction cloneRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  var data = upstream.data;\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`cloneRawData` is not supported in source format ' + sourceFormat;\n    }\n    throwError(errMsg);\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var result = [];\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(data[i].slice());\n    }\n    return result;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var result = [];\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(extend({}, data[i]));\n    }\n    return result;\n  }\n}\nfunction getDimensionInfo(dimensions, dimsByName, dim) {\n  if (dim == null) {\n    return;\n  }\n  // Keep the same logic as `List::getDimension` did.\n  if (isNumber(dim)\n  // If being a number-like string but not being defined a dimension name.\n  || !isNaN(dim) && !hasOwn(dimsByName, dim)) {\n    return dimensions[dim];\n  } else if (hasOwn(dimsByName, dim)) {\n    return dimsByName[dim];\n  }\n}\nfunction cloneAllDimensionInfo(dimensions) {\n  return clone(dimensions);\n}\nvar externalTransformMap = createHashMap();\nexport function registerExternalTransform(externalTransform) {\n  externalTransform = clone(externalTransform);\n  var type = externalTransform.type;\n  var errMsg = '';\n  if (!type) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have a `type` when `registerTransform`.';\n    }\n    throwError(errMsg);\n  }\n  var typeParsed = type.split(':');\n  if (typeParsed.length !== 2) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Name must include namespace like \"ns:regression\".';\n    }\n    throwError(errMsg);\n  }\n  // Namespace 'echarts:xxx' is official namespace, where the transforms should\n  // be called directly via 'xxx' rather than 'echarts:xxx'.\n  var isBuiltIn = false;\n  if (typeParsed[0] === 'echarts') {\n    type = typeParsed[1];\n    isBuiltIn = true;\n  }\n  externalTransform.__isBuiltIn = isBuiltIn;\n  externalTransformMap.set(type, externalTransform);\n}\nexport function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\n  var pipedTransOption = normalizeToArray(rawTransOption);\n  var pipeLen = pipedTransOption.length;\n  var errMsg = '';\n  if (!pipeLen) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'If `transform` declared, it should at least contain one transform.';\n    }\n    throwError(errMsg);\n  }\n  for (var i = 0, len = pipeLen; i < len; i++) {\n    var transOption = pipedTransOption[i];\n    sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i);\n    // piped transform only support single input, except the fist one.\n    // piped transform only support single output, except the last one.\n    if (i !== len - 1) {\n      sourceList.length = Math.max(sourceList.length, 1);\n    }\n  }\n  return sourceList;\n}\nfunction applySingleDataTransform(transOption, upSourceList, infoForPrint,\n// If `pipeIndex` is null/undefined, no piped transform.\npipeIndex) {\n  var errMsg = '';\n  if (!upSourceList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have at least one upstream dataset.';\n    }\n    throwError(errMsg);\n  }\n  if (!isObject(transOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\n    }\n    throwError(errMsg);\n  }\n  var transType = transOption.type;\n  var externalTransform = externalTransformMap.get(transType);\n  if (!externalTransform) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Can not find transform on type \"' + transType + '\".';\n    }\n    throwError(errMsg);\n  }\n  // Prepare source\n  var extUpSourceList = map(upSourceList, function (upSource) {\n    return createExternalSource(upSource, externalTransform);\n  });\n  var resultList = normalizeToArray(externalTransform.transform({\n    upstream: extUpSourceList[0],\n    upstreamList: extUpSourceList,\n    config: clone(transOption.config)\n  }));\n  if (process.env.NODE_ENV !== 'production') {\n    if (transOption.print) {\n      var printStrArr = map(resultList, function (extSource) {\n        var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\n        return ['=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===', '- transform result data:', makePrintable(extSource.data), '- transform result dimensions:', makePrintable(extSource.dimensions)].join('\\n');\n      }).join('\\n');\n      log(printStrArr);\n    }\n  }\n  return map(resultList, function (result, resultIndex) {\n    var errMsg = '';\n    if (!isObject(result)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'A transform should not return some empty results.';\n      }\n      throwError(errMsg);\n    }\n    if (!result.data) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be not be null or undefined';\n      }\n      throwError(errMsg);\n    }\n    var sourceFormat = detectSourceFormat(result.data);\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be array rows or object rows.';\n      }\n      throwError(errMsg);\n    }\n    var resultMetaRawOption;\n    var firstUpSource = upSourceList[0];\n    /**\r\n     * Intuitively, the end users known the content of the original `dataset.source`,\r\n     * calucating the transform result in mind.\r\n     * Suppose the original `dataset.source` is:\r\n     * ```js\r\n     * [\r\n     *     ['product', '2012', '2013', '2014', '2015'],\r\n     *     ['AAA', 41.1, 30.4, 65.1, 53.3],\r\n     *     ['BBB', 86.5, 92.1, 85.7, 83.1],\r\n     *     ['CCC', 24.1, 67.2, 79.5, 86.4]\r\n     * ]\r\n     * ```\r\n     * The dimension info have to be detected from the source data.\r\n     * Some of the transformers (like filter, sort) will follow the dimension info\r\n     * of upstream, while others use new dimensions (like aggregate).\r\n     * Transformer can output a field `dimensions` to define the its own output dimensions.\r\n     * We also allow transformers to ignore the output `dimensions` field, and\r\n     * inherit the upstream dimensions definition. It can reduce the burden of handling\r\n     * dimensions in transformers.\r\n     *\r\n     * See also [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\r\n     */\n    if (firstUpSource && resultIndex === 0\n    // If transformer returns `dimensions`, it means that the transformer has different\n    // dimensions definitions. We do not inherit anything from upstream.\n    && !result.dimensions) {\n      var startIndex = firstUpSource.startIndex;\n      // We copy the header of upstream to the result, because:\n      // (1) The returned data always does not contain header line and can not be used\n      // as dimension-detection. In this case we can not use \"detected dimensions\" of\n      // upstream directly, because it might be detected based on different `seriesLayoutBy`.\n      // (2) We should support that the series read the upstream source in `seriesLayoutBy: 'row'`.\n      // So the original detected header should be add to the result, otherwise they can not be read.\n      if (startIndex) {\n        result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);\n      }\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: startIndex,\n        dimensions: firstUpSource.metaRawOption.dimensions\n      };\n    } else {\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: 0,\n        dimensions: result.dimensions\n      };\n    }\n    return createSource(result.data, resultMetaRawOption, null);\n  });\n}\nfunction isSupportedSourceFormat(sourceFormat) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { assert, clone, createHashMap, isFunction, keys, map, reduce } from 'zrender/lib/core/util.js';\nimport { parseDataValue } from './helper/dataValueHelper.js';\nimport { shouldRetrieveDataByName } from './Source.js';\nvar UNDEFINED = 'undefined';\n/* global Float64Array, Int32Array, Uint32Array, Uint16Array */\n// Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\n// different from the Ctor of typed array.\nexport var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\nexport var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\nexport var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\nexport var CtorFloat64Array = typeof Float64Array === UNDEFINED ? Array : Float64Array;\n/**\r\n * Multi dimensional data store\r\n */\nvar dataCtors = {\n  'float': CtorFloat64Array,\n  'int': CtorInt32Array,\n  // Ordinal data type can be string or int\n  'ordinal': Array,\n  'number': Array,\n  'time': CtorFloat64Array\n};\nvar defaultDimValueGetters;\nfunction getIndicesCtor(rawCount) {\n  // The possible max value in this._indicies is always this._rawCount despite of filtering.\n  return rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\n}\n;\nfunction getInitialExtent() {\n  return [Infinity, -Infinity];\n}\n;\nfunction cloneChunk(originalChunk) {\n  var Ctor = originalChunk.constructor;\n  // Only shallow clone is enough when Array.\n  return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\n}\nfunction prepareStore(store, dimIdx, dimType, end, append) {\n  var DataCtor = dataCtors[dimType || 'float'];\n  if (append) {\n    var oldStore = store[dimIdx];\n    var oldLen = oldStore && oldStore.length;\n    if (!(oldLen === end)) {\n      var newStore = new DataCtor(end);\n      // The cost of the copy is probably inconsiderable\n      // within the initial chunkSize.\n      for (var j = 0; j < oldLen; j++) {\n        newStore[j] = oldStore[j];\n      }\n      store[dimIdx] = newStore;\n    }\n  } else {\n    store[dimIdx] = new DataCtor(end);\n  }\n}\n;\n/**\r\n * Basically, DataStore API keep immutable.\r\n */\nvar DataStore = /** @class */function () {\n  function DataStore() {\n    this._chunks = [];\n    // It will not be calculated until needed.\n    this._rawExtent = [];\n    this._extent = [];\n    this._count = 0;\n    this._rawCount = 0;\n    this._calcDimNameToIdx = createHashMap();\n  }\n  /**\r\n   * Initialize from data\r\n   */\n  DataStore.prototype.initData = function (provider, inputDimensions, dimValueGetter) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isFunction(provider.getItem) && isFunction(provider.count), 'Invalid data provider.');\n    }\n    this._provider = provider;\n    // Clear\n    this._chunks = [];\n    this._indices = null;\n    this.getRawIndex = this._getRawIdxIdentity;\n    var source = provider.getSource();\n    var defaultGetter = this.defaultDimValueGetter = defaultDimValueGetters[source.sourceFormat];\n    // Default dim value getter\n    this._dimValueGetter = dimValueGetter || defaultGetter;\n    // Reset raw extent.\n    this._rawExtent = [];\n    var willRetrieveDataByName = shouldRetrieveDataByName(source);\n    this._dimensions = map(inputDimensions, function (dim) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (willRetrieveDataByName) {\n          assert(dim.property != null);\n        }\n      }\n      return {\n        // Only pick these two props. Not leak other properties like orderMeta.\n        type: dim.type,\n        property: dim.property\n      };\n    });\n    this._initDataFromProvider(0, provider.count());\n  };\n  DataStore.prototype.getProvider = function () {\n    return this._provider;\n  };\n  /**\r\n   * Caution: even when a `source` instance owned by a series, the created data store\r\n   * may still be shared by different sereis (the source hash does not use all `source`\r\n   * props, see `sourceManager`). In this case, the `source` props that are not used in\r\n   * hash (like `source.dimensionDefine`) probably only belongs to a certain series and\r\n   * thus should not be fetch here.\r\n   */\n  DataStore.prototype.getSource = function () {\n    return this._provider.getSource();\n  };\n  /**\r\n   * @caution Only used in dataStack.\r\n   */\n  DataStore.prototype.ensureCalculationDimension = function (dimName, type) {\n    var calcDimNameToIdx = this._calcDimNameToIdx;\n    var dimensions = this._dimensions;\n    var calcDimIdx = calcDimNameToIdx.get(dimName);\n    if (calcDimIdx != null) {\n      if (dimensions[calcDimIdx].type === type) {\n        return calcDimIdx;\n      }\n    } else {\n      calcDimIdx = dimensions.length;\n    }\n    dimensions[calcDimIdx] = {\n      type: type\n    };\n    calcDimNameToIdx.set(dimName, calcDimIdx);\n    this._chunks[calcDimIdx] = new dataCtors[type || 'float'](this._rawCount);\n    this._rawExtent[calcDimIdx] = getInitialExtent();\n    return calcDimIdx;\n  };\n  DataStore.prototype.collectOrdinalMeta = function (dimIdx, ordinalMeta) {\n    var chunk = this._chunks[dimIdx];\n    var dim = this._dimensions[dimIdx];\n    var rawExtents = this._rawExtent;\n    var offset = dim.ordinalOffset || 0;\n    var len = chunk.length;\n    if (offset === 0) {\n      // We need to reset the rawExtent if collect is from start.\n      // Because this dimension may be guessed as number and calcuating a wrong extent.\n      rawExtents[dimIdx] = getInitialExtent();\n    }\n    var dimRawExtent = rawExtents[dimIdx];\n    // Parse from previous data offset. len may be changed after appendData\n    for (var i = offset; i < len; i++) {\n      var val = chunk[i] = ordinalMeta.parseAndCollect(chunk[i]);\n      if (!isNaN(val)) {\n        dimRawExtent[0] = Math.min(val, dimRawExtent[0]);\n        dimRawExtent[1] = Math.max(val, dimRawExtent[1]);\n      }\n    }\n    dim.ordinalMeta = ordinalMeta;\n    dim.ordinalOffset = len;\n    dim.type = 'ordinal'; // Force to be ordinal\n  };\n  DataStore.prototype.getOrdinalMeta = function (dimIdx) {\n    var dimInfo = this._dimensions[dimIdx];\n    var ordinalMeta = dimInfo.ordinalMeta;\n    return ordinalMeta;\n  };\n  DataStore.prototype.getDimensionProperty = function (dimIndex) {\n    var item = this._dimensions[dimIndex];\n    return item && item.property;\n  };\n  /**\r\n   * Caution: Can be only called on raw data (before `this._indices` created).\r\n   */\n  DataStore.prototype.appendData = function (data) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this._indices, 'appendData can only be called on raw data.');\n    }\n    var provider = this._provider;\n    var start = this.count();\n    provider.appendData(data);\n    var end = provider.count();\n    if (!provider.persistent) {\n      end += start;\n    }\n    if (start < end) {\n      this._initDataFromProvider(start, end, true);\n    }\n    return [start, end];\n  };\n  DataStore.prototype.appendValues = function (values, minFillLen) {\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var start = this.count();\n    var end = start + Math.max(values.length, minFillLen || 0);\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n      prepareStore(chunks, i, dim.type, end, true);\n    }\n    var emptyDataItem = [];\n    for (var idx = start; idx < end; idx++) {\n      var sourceIdx = idx - start;\n      // Store the data by dimensions\n      for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n        var dim = dimensions[dimIdx];\n        var val = defaultDimValueGetters.arrayRows.call(this, values[sourceIdx] || emptyDataItem, dim.property, sourceIdx, dimIdx);\n        chunks[dimIdx][idx] = val;\n        var dimRawExtent = rawExtent[dimIdx];\n        val < dimRawExtent[0] && (dimRawExtent[0] = val);\n        val > dimRawExtent[1] && (dimRawExtent[1] = val);\n      }\n    }\n    this._rawCount = this._count = end;\n    return {\n      start: start,\n      end: end\n    };\n  };\n  DataStore.prototype._initDataFromProvider = function (start, end, append) {\n    var provider = this._provider;\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var dimNames = map(dimensions, function (dim) {\n      return dim.property;\n    });\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n      if (!rawExtent[i]) {\n        rawExtent[i] = getInitialExtent();\n      }\n      prepareStore(chunks, i, dim.type, end, append);\n    }\n    if (provider.fillStorage) {\n      provider.fillStorage(start, end, chunks, rawExtent);\n    } else {\n      var dataItem = [];\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        dataItem = provider.getItem(idx, dataItem);\n        // Each data item is value\n        // [1, 2]\n        // 2\n        // Bar chart, line chart which uses category axis\n        // only gives the 'y' value. 'x' value is the indices of category\n        // Use a tempValue to normalize the value to be a (x, y) value\n        // Store the data by dimensions\n        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n          var dimStorage = chunks[dimIdx];\n          // PENDING NULL is empty or zero\n          var val = this._dimValueGetter(dataItem, dimNames[dimIdx], idx, dimIdx);\n          dimStorage[idx] = val;\n          var dimRawExtent = rawExtent[dimIdx];\n          val < dimRawExtent[0] && (dimRawExtent[0] = val);\n          val > dimRawExtent[1] && (dimRawExtent[1] = val);\n        }\n      }\n    }\n    if (!provider.persistent && provider.clean) {\n      // Clean unused data if data source is typed array.\n      provider.clean();\n    }\n    this._rawCount = this._count = end;\n    // Reset data extent\n    this._extent = [];\n  };\n  DataStore.prototype.count = function () {\n    return this._count;\n  };\n  /**\r\n   * Get value. Return NaN if idx is out of range.\r\n   */\n  DataStore.prototype.get = function (dim, idx) {\n    if (!(idx >= 0 && idx < this._count)) {\n      return NaN;\n    }\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\n  };\n  DataStore.prototype.getValues = function (dimensions, idx) {\n    var values = [];\n    var dimArr = [];\n    if (idx == null) {\n      idx = dimensions;\n      // TODO get all from store?\n      dimensions = [];\n      // All dimensions\n      for (var i = 0; i < this._dimensions.length; i++) {\n        dimArr.push(i);\n      }\n    } else {\n      dimArr = dimensions;\n    }\n    for (var i = 0, len = dimArr.length; i < len; i++) {\n      values.push(this.get(dimArr[i], idx));\n    }\n    return values;\n  };\n  /**\r\n   * @param dim concrete dim\r\n   */\n  DataStore.prototype.getByRawIndex = function (dim, rawIdx) {\n    if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\n      return NaN;\n    }\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[rawIdx] : NaN;\n  };\n  /**\r\n   * Get sum of data in one dimension\r\n   */\n  DataStore.prototype.getSum = function (dim) {\n    var dimData = this._chunks[dim];\n    var sum = 0;\n    if (dimData) {\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var value = this.get(dim, i);\n        if (!isNaN(value)) {\n          sum += value;\n        }\n      }\n    }\n    return sum;\n  };\n  /**\r\n   * Get median of data in one dimension\r\n   */\n  DataStore.prototype.getMedian = function (dim) {\n    var dimDataArray = [];\n    // map all data of one dimension\n    this.each([dim], function (val) {\n      if (!isNaN(val)) {\n        dimDataArray.push(val);\n      }\n    });\n    // TODO\n    // Use quick select?\n    var sortedDimDataArray = dimDataArray.sort(function (a, b) {\n      return a - b;\n    });\n    var len = this.count();\n    // calculate median\n    return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\n  };\n  /**\r\n   * Retrieve the index with given raw data index.\r\n   */\n  DataStore.prototype.indexOfRawIndex = function (rawIndex) {\n    if (rawIndex >= this._rawCount || rawIndex < 0) {\n      return -1;\n    }\n    if (!this._indices) {\n      return rawIndex;\n    }\n    // Indices are ascending\n    var indices = this._indices;\n    // If rawIndex === dataIndex\n    var rawDataIndex = indices[rawIndex];\n    if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\n      return rawIndex;\n    }\n    var left = 0;\n    var right = this._count - 1;\n    while (left <= right) {\n      var mid = (left + right) / 2 | 0;\n      if (indices[mid] < rawIndex) {\n        left = mid + 1;\n      } else if (indices[mid] > rawIndex) {\n        right = mid - 1;\n      } else {\n        return mid;\n      }\n    }\n    return -1;\n  };\n  /**\r\n   * Retrieve the index of nearest value.\r\n   * @param dim\r\n   * @param value\r\n   * @param [maxDistance=Infinity]\r\n   * @return If and only if multiple indices have\r\n   *         the same value, they are put to the result.\r\n   */\n  DataStore.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n    var chunks = this._chunks;\n    var dimData = chunks[dim];\n    var nearestIndices = [];\n    if (!dimData) {\n      return nearestIndices;\n    }\n    if (maxDistance == null) {\n      maxDistance = Infinity;\n    }\n    var minDist = Infinity;\n    var minDiff = -1;\n    var nearestIndicesLen = 0;\n    // Check the test case of `test/ut/spec/data/SeriesData.js`.\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var dataIndex = this.getRawIndex(i);\n      var diff = value - dimData[dataIndex];\n      var dist = Math.abs(diff);\n      if (dist <= maxDistance) {\n        // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\n        // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\n        // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\n        // So we choose the one that `diff >= 0` in this case.\n        // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\n        // should be push to `nearestIndices`.\n        if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\n          minDist = dist;\n          minDiff = diff;\n          nearestIndicesLen = 0;\n        }\n        if (diff === minDiff) {\n          nearestIndices[nearestIndicesLen++] = i;\n        }\n      }\n    }\n    nearestIndices.length = nearestIndicesLen;\n    return nearestIndices;\n  };\n  DataStore.prototype.getIndices = function () {\n    var newIndices;\n    var indices = this._indices;\n    if (indices) {\n      var Ctor = indices.constructor;\n      var thisCount = this._count;\n      // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\n      if (Ctor === Array) {\n        newIndices = new Ctor(thisCount);\n        for (var i = 0; i < thisCount; i++) {\n          newIndices[i] = indices[i];\n        }\n      } else {\n        newIndices = new Ctor(indices.buffer, 0, thisCount);\n      }\n    } else {\n      var Ctor = getIndicesCtor(this._rawCount);\n      newIndices = new Ctor(this.count());\n      for (var i = 0; i < newIndices.length; i++) {\n        newIndices[i] = i;\n      }\n    }\n    return newIndices;\n  };\n  /**\r\n   * Data filter.\r\n   */\n  DataStore.prototype.filter = function (dims, cb) {\n    if (!this._count) {\n      return this;\n    }\n    var newStore = this.clone();\n    var count = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(count);\n    var value = [];\n    var dimSize = dims.length;\n    var offset = 0;\n    var dim0 = dims[0];\n    var chunks = newStore._chunks;\n    for (var i = 0; i < count; i++) {\n      var keep = void 0;\n      var rawIdx = newStore.getRawIndex(i);\n      // Simple optimization\n      if (dimSize === 0) {\n        keep = cb(i);\n      } else if (dimSize === 1) {\n        var val = chunks[dim0][rawIdx];\n        keep = cb(val, i);\n      } else {\n        var k = 0;\n        for (; k < dimSize; k++) {\n          value[k] = chunks[dims[k]][rawIdx];\n        }\n        value[k] = i;\n        keep = cb.apply(null, value);\n      }\n      if (keep) {\n        newIndices[offset++] = rawIdx;\n      }\n    }\n    // Set indices after filtered.\n    if (offset < count) {\n      newStore._indices = newIndices;\n    }\n    newStore._count = offset;\n    // Reset data extent\n    newStore._extent = [];\n    newStore._updateGetRawIdx();\n    return newStore;\n  };\n  /**\r\n   * Select data in range. (For optimization of filter)\r\n   * (Manually inline code, support 5 million data filtering in data zoom.)\r\n   */\n  DataStore.prototype.selectRange = function (range) {\n    var newStore = this.clone();\n    var len = newStore._count;\n    if (!len) {\n      return this;\n    }\n    var dims = keys(range);\n    var dimSize = dims.length;\n    if (!dimSize) {\n      return this;\n    }\n    var originalCount = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(originalCount);\n    var offset = 0;\n    var dim0 = dims[0];\n    var min = range[dim0][0];\n    var max = range[dim0][1];\n    var storeArr = newStore._chunks;\n    var quickFinished = false;\n    if (!newStore._indices) {\n      // Extreme optimization for common case. About 2x faster in chrome.\n      var idx = 0;\n      if (dimSize === 1) {\n        var dimStorage = storeArr[dims[0]];\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          // NaN will not be filtered. Consider the case, in line chart, empty\n          // value indicates the line should be broken. But for the case like\n          // scatter plot, a data item with empty value will not be rendered,\n          // but the axis extent may be effected if some other dim of the data\n          // item has value. Fortunately it is not a significant negative effect.\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = idx;\n          }\n          idx++;\n        }\n        quickFinished = true;\n      } else if (dimSize === 2) {\n        var dimStorage = storeArr[dims[0]];\n        var dimStorage2 = storeArr[dims[1]];\n        var min2 = range[dims[1]][0];\n        var max2 = range[dims[1]][1];\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          var val2 = dimStorage2[i];\n          // Do not filter NaN, see comment above.\n          if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\n            newIndices[offset++] = idx;\n          }\n          idx++;\n        }\n        quickFinished = true;\n      }\n    }\n    if (!quickFinished) {\n      if (dimSize === 1) {\n        for (var i = 0; i < originalCount; i++) {\n          var rawIndex = newStore.getRawIndex(i);\n          var val = storeArr[dims[0]][rawIndex];\n          // Do not filter NaN, see comment above.\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = rawIndex;\n          }\n        }\n      } else {\n        for (var i = 0; i < originalCount; i++) {\n          var keep = true;\n          var rawIndex = newStore.getRawIndex(i);\n          for (var k = 0; k < dimSize; k++) {\n            var dimk = dims[k];\n            var val = storeArr[dimk][rawIndex];\n            // Do not filter NaN, see comment above.\n            if (val < range[dimk][0] || val > range[dimk][1]) {\n              keep = false;\n            }\n          }\n          if (keep) {\n            newIndices[offset++] = newStore.getRawIndex(i);\n          }\n        }\n      }\n    }\n    // Set indices after filtered.\n    if (offset < originalCount) {\n      newStore._indices = newIndices;\n    }\n    newStore._count = offset;\n    // Reset data extent\n    newStore._extent = [];\n    newStore._updateGetRawIdx();\n    return newStore;\n  };\n  // /**\n  //  * Data mapping to a plain array\n  //  */\n  // mapArray(dims: DimensionIndex[], cb: MapArrayCb): any[] {\n  //     const result: any[] = [];\n  //     this.each(dims, function () {\n  //         result.push(cb && (cb as MapArrayCb).apply(null, arguments));\n  //     });\n  //     return result;\n  // }\n  /**\r\n   * Data mapping to a new List with given dimensions\r\n   */\n  DataStore.prototype.map = function (dims, cb) {\n    // TODO only clone picked chunks.\n    var target = this.clone(dims);\n    this._updateDims(target, dims, cb);\n    return target;\n  };\n  /**\r\n   * @caution Danger!! Only used in dataStack.\r\n   */\n  DataStore.prototype.modify = function (dims, cb) {\n    this._updateDims(this, dims, cb);\n  };\n  DataStore.prototype._updateDims = function (target, dims, cb) {\n    var targetChunks = target._chunks;\n    var tmpRetValue = [];\n    var dimSize = dims.length;\n    var dataCount = target.count();\n    var values = [];\n    var rawExtent = target._rawExtent;\n    for (var i = 0; i < dims.length; i++) {\n      rawExtent[dims[i]] = getInitialExtent();\n    }\n    for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\n      var rawIndex = target.getRawIndex(dataIndex);\n      for (var k = 0; k < dimSize; k++) {\n        values[k] = targetChunks[dims[k]][rawIndex];\n      }\n      values[dimSize] = dataIndex;\n      var retValue = cb && cb.apply(null, values);\n      if (retValue != null) {\n        // a number or string (in oridinal dimension)?\n        if (typeof retValue !== 'object') {\n          tmpRetValue[0] = retValue;\n          retValue = tmpRetValue;\n        }\n        for (var i = 0; i < retValue.length; i++) {\n          var dim = dims[i];\n          var val = retValue[i];\n          var rawExtentOnDim = rawExtent[dim];\n          var dimStore = targetChunks[dim];\n          if (dimStore) {\n            dimStore[rawIndex] = val;\n          }\n          if (val < rawExtentOnDim[0]) {\n            rawExtentOnDim[0] = val;\n          }\n          if (val > rawExtentOnDim[1]) {\n            rawExtentOnDim[1] = val;\n          }\n        }\n      }\n    }\n  };\n  /**\r\n   * Large data down sampling using largest-triangle-three-buckets\r\n   * @param {string} valueDimension\r\n   * @param {number} targetCount\r\n   */\n  DataStore.prototype.lttbDownSample = function (valueDimension, rate) {\n    var target = this.clone([valueDimension], true);\n    var targetStorage = target._chunks;\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    var sampledIndex = 0;\n    var frameSize = Math.floor(1 / rate);\n    var currentRawIndex = this.getRawIndex(0);\n    var maxArea;\n    var area;\n    var nextRawIndex;\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.min((Math.ceil(len / frameSize) + 2) * 2, len));\n    // First frame use the first data.\n    newIndices[sampledIndex++] = currentRawIndex;\n    for (var i = 1; i < len - 1; i += frameSize) {\n      var nextFrameStart = Math.min(i + frameSize, len - 1);\n      var nextFrameEnd = Math.min(i + frameSize * 2, len);\n      var avgX = (nextFrameEnd + nextFrameStart) / 2;\n      var avgY = 0;\n      for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n        if (isNaN(y)) {\n          continue;\n        }\n        avgY += y;\n      }\n      avgY /= nextFrameEnd - nextFrameStart;\n      var frameStart = i;\n      var frameEnd = Math.min(i + frameSize, len);\n      var pointAX = i - 1;\n      var pointAY = dimStore[currentRawIndex];\n      maxArea = -1;\n      nextRawIndex = frameStart;\n      var firstNaNIndex = -1;\n      var countNaN = 0;\n      // Find a point from current frame that construct a triangle with largest area with previous selected point\n      // And the average of next frame.\n      for (var idx = frameStart; idx < frameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n        if (isNaN(y)) {\n          countNaN++;\n          if (firstNaNIndex < 0) {\n            firstNaNIndex = rawIndex;\n          }\n          continue;\n        }\n        // Calculate triangle area over three buckets\n        area = Math.abs((pointAX - avgX) * (y - pointAY) - (pointAX - idx) * (avgY - pointAY));\n        if (area > maxArea) {\n          maxArea = area;\n          nextRawIndex = rawIndex; // Next a is this b\n        }\n      }\n      if (countNaN > 0 && countNaN < frameEnd - frameStart) {\n        // Append first NaN point in every bucket.\n        // It is necessary to ensure the correct order of indices.\n        newIndices[sampledIndex++] = Math.min(firstNaNIndex, nextRawIndex);\n        nextRawIndex = Math.max(firstNaNIndex, nextRawIndex);\n      }\n      newIndices[sampledIndex++] = nextRawIndex;\n      currentRawIndex = nextRawIndex; // This a is the next a (chosen b)\n    }\n    // First frame use the last data.\n    newIndices[sampledIndex++] = this.getRawIndex(len - 1);\n    target._count = sampledIndex;\n    target._indices = newIndices;\n    target.getRawIndex = this._getRawIdx;\n    return target;\n  };\n  /**\r\n   * Large data down sampling using min-max\r\n   * @param {string} valueDimension\r\n   * @param {number} rate\r\n   */\n  DataStore.prototype.minmaxDownSample = function (valueDimension, rate) {\n    var target = this.clone([valueDimension], true);\n    var targetStorage = target._chunks;\n    var frameSize = Math.floor(1 / rate);\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    // Each frame results in 2 data points, one for min and one for max\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize) * 2);\n    var offset = 0;\n    for (var i = 0; i < len; i += frameSize) {\n      var minIndex = i;\n      var minValue = dimStore[this.getRawIndex(minIndex)];\n      var maxIndex = i;\n      var maxValue = dimStore[this.getRawIndex(maxIndex)];\n      var thisFrameSize = frameSize;\n      // Handle final smaller frame\n      if (i + frameSize > len) {\n        thisFrameSize = len - i;\n      }\n      // Determine min and max within the current frame\n      for (var k = 0; k < thisFrameSize; k++) {\n        var rawIndex = this.getRawIndex(i + k);\n        var value = dimStore[rawIndex];\n        if (value < minValue) {\n          minValue = value;\n          minIndex = i + k;\n        }\n        if (value > maxValue) {\n          maxValue = value;\n          maxIndex = i + k;\n        }\n      }\n      var rawMinIndex = this.getRawIndex(minIndex);\n      var rawMaxIndex = this.getRawIndex(maxIndex);\n      // Set the order of the min and max values, based on their ordering in the frame\n      if (minIndex < maxIndex) {\n        newIndices[offset++] = rawMinIndex;\n        newIndices[offset++] = rawMaxIndex;\n      } else {\n        newIndices[offset++] = rawMaxIndex;\n        newIndices[offset++] = rawMinIndex;\n      }\n    }\n    target._count = offset;\n    target._indices = newIndices;\n    target._updateGetRawIdx();\n    return target;\n  };\n  /**\r\n   * Large data down sampling on given dimension\r\n   * @param sampleIndex Sample index for name and id\r\n   */\n  DataStore.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var target = this.clone([dimension], true);\n    var targetStorage = target._chunks;\n    var frameValues = [];\n    var frameSize = Math.floor(1 / rate);\n    var dimStore = targetStorage[dimension];\n    var len = this.count();\n    var rawExtentOnDim = target._rawExtent[dimension] = getInitialExtent();\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize));\n    var offset = 0;\n    for (var i = 0; i < len; i += frameSize) {\n      // Last frame\n      if (frameSize > len - i) {\n        frameSize = len - i;\n        frameValues.length = frameSize;\n      }\n      for (var k = 0; k < frameSize; k++) {\n        var dataIdx = this.getRawIndex(i + k);\n        frameValues[k] = dimStore[dataIdx];\n      }\n      var value = sampleValue(frameValues);\n      var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1));\n      // Only write value on the filtered data\n      dimStore[sampleFrameIdx] = value;\n      if (value < rawExtentOnDim[0]) {\n        rawExtentOnDim[0] = value;\n      }\n      if (value > rawExtentOnDim[1]) {\n        rawExtentOnDim[1] = value;\n      }\n      newIndices[offset++] = sampleFrameIdx;\n    }\n    target._count = offset;\n    target._indices = newIndices;\n    target._updateGetRawIdx();\n    return target;\n  };\n  /**\r\n   * Data iteration\r\n   * @param ctx default this\r\n   * @example\r\n   *  list.each('x', function (x, idx) {});\r\n   *  list.each(['x', 'y'], function (x, y, idx) {});\r\n   *  list.each(function (idx) {})\r\n   */\n  DataStore.prototype.each = function (dims, cb) {\n    if (!this._count) {\n      return;\n    }\n    var dimSize = dims.length;\n    var chunks = this._chunks;\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var rawIdx = this.getRawIndex(i);\n      // Simple optimization\n      switch (dimSize) {\n        case 0:\n          cb(i);\n          break;\n        case 1:\n          cb(chunks[dims[0]][rawIdx], i);\n          break;\n        case 2:\n          cb(chunks[dims[0]][rawIdx], chunks[dims[1]][rawIdx], i);\n          break;\n        default:\n          var k = 0;\n          var value = [];\n          for (; k < dimSize; k++) {\n            value[k] = chunks[dims[k]][rawIdx];\n          }\n          // Index\n          value[k] = i;\n          cb.apply(null, value);\n      }\n    }\n  };\n  /**\r\n   * Get extent of data in one dimension\r\n   */\n  DataStore.prototype.getDataExtent = function (dim) {\n    // Make sure use concrete dim as cache name.\n    var dimData = this._chunks[dim];\n    var initialExtent = getInitialExtent();\n    if (!dimData) {\n      return initialExtent;\n    }\n    // Make more strict checkings to ensure hitting cache.\n    var currEnd = this.count();\n    // Consider the most cases when using data zoom, `getDataExtent`\n    // happened before filtering. We cache raw extent, which is not\n    // necessary to be cleared and recalculated when restore data.\n    var useRaw = !this._indices;\n    var dimExtent;\n    if (useRaw) {\n      return this._rawExtent[dim].slice();\n    }\n    dimExtent = this._extent[dim];\n    if (dimExtent) {\n      return dimExtent.slice();\n    }\n    dimExtent = initialExtent;\n    var min = dimExtent[0];\n    var max = dimExtent[1];\n    for (var i = 0; i < currEnd; i++) {\n      var rawIdx = this.getRawIndex(i);\n      var value = dimData[rawIdx];\n      value < min && (min = value);\n      value > max && (max = value);\n    }\n    dimExtent = [min, max];\n    this._extent[dim] = dimExtent;\n    return dimExtent;\n  };\n  /**\r\n   * Get raw data item\r\n   */\n  DataStore.prototype.getRawDataItem = function (idx) {\n    var rawIdx = this.getRawIndex(idx);\n    if (!this._provider.persistent) {\n      var val = [];\n      var chunks = this._chunks;\n      for (var i = 0; i < chunks.length; i++) {\n        val.push(chunks[i][rawIdx]);\n      }\n      return val;\n    } else {\n      return this._provider.getItem(rawIdx);\n    }\n  };\n  /**\r\n   * Clone shallow.\r\n   *\r\n   * @param clonedDims Determine which dims to clone. Will share the data if not specified.\r\n   */\n  DataStore.prototype.clone = function (clonedDims, ignoreIndices) {\n    var target = new DataStore();\n    var chunks = this._chunks;\n    var clonedDimsMap = clonedDims && reduce(clonedDims, function (obj, dimIdx) {\n      obj[dimIdx] = true;\n      return obj;\n    }, {});\n    if (clonedDimsMap) {\n      for (var i = 0; i < chunks.length; i++) {\n        // Not clone if dim is not picked.\n        target._chunks[i] = !clonedDimsMap[i] ? chunks[i] : cloneChunk(chunks[i]);\n      }\n    } else {\n      target._chunks = chunks;\n    }\n    this._copyCommonProps(target);\n    if (!ignoreIndices) {\n      target._indices = this._cloneIndices();\n    }\n    target._updateGetRawIdx();\n    return target;\n  };\n  DataStore.prototype._copyCommonProps = function (target) {\n    target._count = this._count;\n    target._rawCount = this._rawCount;\n    target._provider = this._provider;\n    target._dimensions = this._dimensions;\n    target._extent = clone(this._extent);\n    target._rawExtent = clone(this._rawExtent);\n  };\n  DataStore.prototype._cloneIndices = function () {\n    if (this._indices) {\n      var Ctor = this._indices.constructor;\n      var indices = void 0;\n      if (Ctor === Array) {\n        var thisCount = this._indices.length;\n        indices = new Ctor(thisCount);\n        for (var i = 0; i < thisCount; i++) {\n          indices[i] = this._indices[i];\n        }\n      } else {\n        indices = new Ctor(this._indices);\n      }\n      return indices;\n    }\n    return null;\n  };\n  DataStore.prototype._getRawIdxIdentity = function (idx) {\n    return idx;\n  };\n  DataStore.prototype._getRawIdx = function (idx) {\n    if (idx < this._count && idx >= 0) {\n      return this._indices[idx];\n    }\n    return -1;\n  };\n  DataStore.prototype._updateGetRawIdx = function () {\n    this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;\n  };\n  DataStore.internalField = function () {\n    function getDimValueSimply(dataItem, property, dataIndex, dimIndex) {\n      return parseDataValue(dataItem[dimIndex], this._dimensions[dimIndex]);\n    }\n    defaultDimValueGetters = {\n      arrayRows: getDimValueSimply,\n      objectRows: function (dataItem, property, dataIndex, dimIndex) {\n        return parseDataValue(dataItem[property], this._dimensions[dimIndex]);\n      },\n      keyedColumns: getDimValueSimply,\n      original: function (dataItem, property, dataIndex, dimIndex) {\n        // Performance sensitive, do not use modelUtil.getDataItemValue.\n        // If dataItem is an plain object with no value field, the let `value`\n        // will be assigned with the object, but it will be tread correctly\n        // in the `convertValue`.\n        var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\n        return parseDataValue(value instanceof Array ? value[dimIndex]\n        // If value is a single number or something else not array.\n        : value, this._dimensions[dimIndex]);\n      },\n      typedArray: function (dataItem, property, dataIndex, dimIndex) {\n        return dataItem[dimIndex];\n      }\n    };\n  }();\n  return DataStore;\n}();\nexport default DataStore;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { setAsPrimitive, map, isTypedArray, assert, each, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createSource, cloneSourceShallow } from '../Source.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nimport { querySeriesUpstreamDatasetModel, queryDatasetUpstreamDatasetModels } from './sourceHelper.js';\nimport { applyDataTransform } from './transform.js';\nimport DataStore from '../DataStore.js';\nimport { DefaultDataProvider } from './dataProvider.js';\n/**\r\n * [REQUIREMENT_MEMO]:\r\n * (0) `metaRawOption` means `dimensions`/`sourceHeader`/`seriesLayoutBy` in raw option.\r\n * (1) Keep support the feature: `metaRawOption` can be specified both on `series` and\r\n * `root-dataset`. Them on `series` has higher priority.\r\n * (2) Do not support to set `metaRawOption` on a `non-root-dataset`, because it might\r\n * confuse users: whether those props indicate how to visit the upstream source or visit\r\n * the transform result source, and some transforms has nothing to do with these props,\r\n * and some transforms might have multiple upstream.\r\n * (3) Transforms should specify `metaRawOption` in each output, just like they can be\r\n * declared in `root-dataset`.\r\n * (4) At present only support visit source in `SERIES_LAYOUT_BY_COLUMN` in transforms.\r\n * That is for reducing complexity in transforms.\r\n * PENDING: Whether to provide transposition transform?\r\n *\r\n * [IMPLEMENTAION_MEMO]:\r\n * \"sourceVisitConfig\" are calculated from `metaRawOption` and `data`.\r\n * They will not be calculated until `source` is about to be visited (to prevent from\r\n * duplicate calcuation). `source` is visited only in series and input to transforms.\r\n *\r\n * [DIMENSION_INHERIT_RULE]:\r\n * By default the dimensions are inherited from ancestors, unless a transform return\r\n * a new dimensions definition.\r\n * Consider the case:\r\n * ```js\r\n * dataset: [{\r\n *     source: [ ['Product', 'Sales', 'Prise'], ['Cookies', 321, 44.21], ...]\r\n * }, {\r\n *     transform: { type: 'filter', ... }\r\n * }]\r\n * dataset: [{\r\n *     dimension: ['Product', 'Sales', 'Prise'],\r\n *     source: [ ['Cookies', 321, 44.21], ...]\r\n * }, {\r\n *     transform: { type: 'filter', ... }\r\n * }]\r\n * ```\r\n * The two types of option should have the same behavior after transform.\r\n *\r\n *\r\n * [SCENARIO]:\r\n * (1) Provide source data directly:\r\n * ```js\r\n * series: {\r\n *     encode: {...},\r\n *     dimensions: [...]\r\n *     seriesLayoutBy: 'row',\r\n *     data: [[...]]\r\n * }\r\n * ```\r\n * (2) Series refer to dataset.\r\n * ```js\r\n * series: [{\r\n *     encode: {...}\r\n *     // Ignore datasetIndex means `datasetIndex: 0`\r\n *     // and the dimensions defination in dataset is used\r\n * }, {\r\n *     encode: {...},\r\n *     seriesLayoutBy: 'column',\r\n *     datasetIndex: 1\r\n * }]\r\n * ```\r\n * (3) dataset transform\r\n * ```js\r\n * dataset: [{\r\n *     source: [...]\r\n * }, {\r\n *     source: [...]\r\n * }, {\r\n *     // By default from 0.\r\n *     transform: { type: 'filter', config: {...} }\r\n * }, {\r\n *     // Piped.\r\n *     transform: [\r\n *         { type: 'filter', config: {...} },\r\n *         { type: 'sort', config: {...} }\r\n *     ]\r\n * }, {\r\n *     id: 'regressionData',\r\n *     fromDatasetIndex: 1,\r\n *     // Third-party transform\r\n *     transform: { type: 'ecStat:regression', config: {...} }\r\n * }, {\r\n *     // retrieve the extra result.\r\n *     id: 'regressionFormula',\r\n *     fromDatasetId: 'regressionData',\r\n *     fromTransformResult: 1\r\n * }]\r\n * ```\r\n */\nvar SourceManager = /** @class */function () {\n  function SourceManager(sourceHost) {\n    // Cached source. Do not repeat calculating if not dirty.\n    this._sourceList = [];\n    this._storeList = [];\n    // version sign of each upstream source manager.\n    this._upstreamSignList = [];\n    this._versionSignBase = 0;\n    this._dirty = true;\n    this._sourceHost = sourceHost;\n  }\n  /**\r\n   * Mark dirty.\r\n   */\n  SourceManager.prototype.dirty = function () {\n    this._setLocalSource([], []);\n    this._storeList = [];\n    this._dirty = true;\n  };\n  SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\n    this._sourceList = sourceList;\n    this._upstreamSignList = upstreamSignList;\n    this._versionSignBase++;\n    if (this._versionSignBase > 9e10) {\n      this._versionSignBase = 0;\n    }\n  };\n  /**\r\n   * For detecting whether the upstream source is dirty, so that\r\n   * the local cached source (in `_sourceList`) should be discarded.\r\n   */\n  SourceManager.prototype._getVersionSign = function () {\n    return this._sourceHost.uid + '_' + this._versionSignBase;\n  };\n  /**\r\n   * Always return a source instance. Otherwise throw error.\r\n   */\n  SourceManager.prototype.prepareSource = function () {\n    // For the case that call `setOption` multiple time but no data changed,\n    // cache the result source to prevent from repeating transform.\n    if (this._isDirty()) {\n      this._createSource();\n      this._dirty = false;\n    }\n  };\n  SourceManager.prototype._createSource = function () {\n    this._setLocalSource([], []);\n    var sourceHost = this._sourceHost;\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n    var hasUpstream = !!upSourceMgrList.length;\n    var resultSourceList;\n    var upstreamSignList;\n    if (isSeries(sourceHost)) {\n      var seriesModel = sourceHost;\n      var data = void 0;\n      var sourceFormat = void 0;\n      var upSource = void 0;\n      // Has upstream dataset\n      if (hasUpstream) {\n        var upSourceMgr = upSourceMgrList[0];\n        upSourceMgr.prepareSource();\n        upSource = upSourceMgr.getSource();\n        data = upSource.data;\n        sourceFormat = upSource.sourceFormat;\n        upstreamSignList = [upSourceMgr._getVersionSign()];\n      }\n      // Series data is from own.\n      else {\n        data = seriesModel.get('data', true);\n        sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n        upstreamSignList = [];\n      }\n      // See [REQUIREMENT_MEMO], merge settings on series and parent dataset if it is root.\n      var newMetaRawOption = this._getSourceMetaRawOption() || {};\n      var upMetaRawOption = upSource && upSource.metaRawOption || {};\n      var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;\n      var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader);\n      // Note here we should not use `upSource.dimensionsDefine`. Consider the case:\n      // `upSource.dimensionsDefine` is detected by `seriesLayoutBy: 'column'`,\n      // but series need `seriesLayoutBy: 'row'`.\n      var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions);\n      // We share source with dataset as much as possible\n      // to avoid extra memory cost of high dimensional data.\n      var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;\n      resultSourceList = needsCreateSource ? [createSource(data, {\n        seriesLayoutBy: seriesLayoutBy,\n        sourceHeader: sourceHeader,\n        dimensions: dimensions\n      }, sourceFormat)] : [];\n    } else {\n      var datasetModel = sourceHost;\n      // Has upstream dataset.\n      if (hasUpstream) {\n        var result = this._applyTransform(upSourceMgrList);\n        resultSourceList = result.sourceList;\n        upstreamSignList = result.upstreamSignList;\n      }\n      // Is root dataset.\n      else {\n        var sourceData = datasetModel.get('source', true);\n        resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];\n        upstreamSignList = [];\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      assert(resultSourceList && upstreamSignList);\n    }\n    this._setLocalSource(resultSourceList, upstreamSignList);\n  };\n  SourceManager.prototype._applyTransform = function (upMgrList) {\n    var datasetModel = this._sourceHost;\n    var transformOption = datasetModel.get('transform', true);\n    var fromTransformResult = datasetModel.get('fromTransformResult', true);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(fromTransformResult != null || transformOption != null);\n    }\n    if (fromTransformResult != null) {\n      var errMsg = '';\n      if (upMgrList.length !== 1) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\n        }\n        doThrow(errMsg);\n      }\n    }\n    var sourceList;\n    var upSourceList = [];\n    var upstreamSignList = [];\n    each(upMgrList, function (upMgr) {\n      upMgr.prepareSource();\n      var upSource = upMgr.getSource(fromTransformResult || 0);\n      var errMsg = '';\n      if (fromTransformResult != null && !upSource) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\n        }\n        doThrow(errMsg);\n      }\n      upSourceList.push(upSource);\n      upstreamSignList.push(upMgr._getVersionSign());\n    });\n    if (transformOption) {\n      sourceList = applyDataTransform(transformOption, upSourceList, {\n        datasetIndex: datasetModel.componentIndex\n      });\n    } else if (fromTransformResult != null) {\n      sourceList = [cloneSourceShallow(upSourceList[0])];\n    }\n    return {\n      sourceList: sourceList,\n      upstreamSignList: upstreamSignList\n    };\n  };\n  SourceManager.prototype._isDirty = function () {\n    if (this._dirty) {\n      return true;\n    }\n    // All sourceList is from the some upstream.\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n    for (var i = 0; i < upSourceMgrList.length; i++) {\n      var upSrcMgr = upSourceMgrList[i];\n      if (\n      // Consider the case that there is ancestor diry, call it recursively.\n      // The performance is probably not an issue because usually the chain is not long.\n      upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\n        return true;\n      }\n    }\n  };\n  /**\r\n   * @param sourceIndex By default 0, means \"main source\".\r\n   *                    In most cases there is only one source.\r\n   */\n  SourceManager.prototype.getSource = function (sourceIndex) {\n    sourceIndex = sourceIndex || 0;\n    var source = this._sourceList[sourceIndex];\n    if (!source) {\n      // Series may share source instance with dataset.\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n      return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);\n    }\n    return source;\n  };\n  /**\r\n   *\r\n   * Get a data store which can be shared across series.\r\n   * Only available for series.\r\n   *\r\n   * @param seriesDimRequest Dimensions that are generated in series.\r\n   *        Should have been sorted by `storeDimIndex` asc.\r\n   */\n  SourceManager.prototype.getSharedDataStore = function (seriesDimRequest) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isSeries(this._sourceHost), 'Can only call getDataStore on series source manager.');\n    }\n    var schema = seriesDimRequest.makeStoreSchema();\n    return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);\n  };\n  SourceManager.prototype._innerGetDataStore = function (storeDims, seriesSource, sourceReadKey) {\n    // TODO Can use other sourceIndex?\n    var sourceIndex = 0;\n    var storeList = this._storeList;\n    var cachedStoreMap = storeList[sourceIndex];\n    if (!cachedStoreMap) {\n      cachedStoreMap = storeList[sourceIndex] = {};\n    }\n    var cachedStore = cachedStoreMap[sourceReadKey];\n    if (!cachedStore) {\n      var upSourceMgr = this._getUpstreamSourceManagers()[0];\n      if (isSeries(this._sourceHost) && upSourceMgr) {\n        cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);\n      } else {\n        cachedStore = new DataStore();\n        // Always create store from source of series.\n        cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);\n      }\n      cachedStoreMap[sourceReadKey] = cachedStore;\n    }\n    return cachedStore;\n  };\n  /**\r\n   * PENDING: Is it fast enough?\r\n   * If no upstream, return empty array.\r\n   */\n  SourceManager.prototype._getUpstreamSourceManagers = function () {\n    // Always get the relationship from the raw option.\n    // Do not cache the link of the dependency graph, so that\n    // there is no need to update them when change happens.\n    var sourceHost = this._sourceHost;\n    if (isSeries(sourceHost)) {\n      var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\n      return !datasetModel ? [] : [datasetModel.getSourceManager()];\n    } else {\n      return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) {\n        return datasetModel.getSourceManager();\n      });\n    }\n  };\n  SourceManager.prototype._getSourceMetaRawOption = function () {\n    var sourceHost = this._sourceHost;\n    var seriesLayoutBy;\n    var sourceHeader;\n    var dimensions;\n    if (isSeries(sourceHost)) {\n      seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\n      sourceHeader = sourceHost.get('sourceHeader', true);\n      dimensions = sourceHost.get('dimensions', true);\n    }\n    // See [REQUIREMENT_MEMO], `non-root-dataset` do not support them.\n    else if (!this._getUpstreamSourceManagers().length) {\n      var model = sourceHost;\n      seriesLayoutBy = model.get('seriesLayoutBy', true);\n      sourceHeader = model.get('sourceHeader', true);\n      dimensions = model.get('dimensions', true);\n    }\n    return {\n      seriesLayoutBy: seriesLayoutBy,\n      sourceHeader: sourceHeader,\n      dimensions: dimensions\n    };\n  };\n  return SourceManager;\n}();\nexport { SourceManager };\n// Call this method after `super.init` and `super.mergeOption` to\n// disable the transform merge, but do not disable transform clone from rawOption.\nexport function disableTransformOptionMerge(datasetModel) {\n  var transformOption = datasetModel.option.transform;\n  transformOption && setAsPrimitive(datasetModel.option.transform);\n}\nfunction isSeries(sourceHost) {\n  // Avoid circular dependency with Series.ts\n  return sourceHost.mainType === 'series';\n}\nfunction doThrow(errMsg) {\n  throw new Error(errMsg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport * as modelUtil from '../util/model.js';\nimport ComponentModel from './Component.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { DataFormatMixin } from '../model/mixin/dataFormat.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport { createTask } from '../core/task.js';\nimport { mountExtend } from '../util/clazz.js';\nimport { SourceManager } from '../data/helper/sourceManager.js';\nimport { defaultSeriesFormatTooltip } from '../component/tooltip/seriesFormatTooltip.js';\nvar inner = modelUtil.makeInner();\nfunction getSelectionKey(data, dataIndex) {\n  return data.getName(dataIndex) || data.getId(dataIndex);\n}\nexport var SERIES_UNIVERSAL_TRANSITION_PROP = '__universalTransitionEnabled';\nvar SeriesModel = /** @class */function (_super) {\n  __extends(SeriesModel, _super);\n  function SeriesModel() {\n    // [Caution]: Because this class or desecendants can be used as `XXX.extend(subProto)`,\n    // the class members must not be initialized in constructor or declaration place.\n    // Otherwise there is bad case:\n    //   class A {xxx = 1;}\n    //   enableClassExtend(A);\n    //   class B extends A {}\n    //   var C = B.extend({xxx: 5});\n    //   var c = new C();\n    //   console.log(c.xxx); // expect 5 but always 1.\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // ---------------------------------------\n    // Props about data selection\n    // ---------------------------------------\n    _this._selectedDataIndicesMap = {};\n    return _this;\n  }\n  SeriesModel.prototype.init = function (option, parentModel, ecModel) {\n    this.seriesIndex = this.componentIndex;\n    this.dataTask = createTask({\n      count: dataTaskCount,\n      reset: dataTaskReset\n    });\n    this.dataTask.context = {\n      model: this\n    };\n    this.mergeDefaultAndTheme(option, ecModel);\n    var sourceManager = inner(this).sourceManager = new SourceManager(this);\n    sourceManager.prepareSource();\n    var data = this.getInitialData(option, ecModel);\n    wrapData(data, this);\n    this.dataTask.context.data = data;\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(data, 'getInitialData returned invalid data.');\n    }\n    inner(this).dataBeforeProcessed = data;\n    // If we reverse the order (make data firstly, and then make\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\n    // cause data.graph.data !== data when using\n    // module:echarts/data/Graph or module:echarts/data/Tree.\n    // See module:echarts/data/helper/linkSeriesData\n    // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n    // init or merge stage, because the data can be restored. So we do not `restoreData`\n    // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n    // Call `seriesModel.getRawData()` instead.\n    // this.restoreData();\n    autoSeriesName(this);\n    this._initSelectedMapFromData(data);\n  };\n  /**\r\n   * Util for merge default and theme to option\r\n   */\n  SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n    // Backward compat: using subType on theme.\n    // But if name duplicate between series subType\n    // (for example: parallel) add component mainType,\n    // add suffix 'Series'.\n    var themeSubType = this.subType;\n    if (ComponentModel.hasClass(themeSubType)) {\n      themeSubType += 'Series';\n    }\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\n    zrUtil.merge(option, this.getDefaultOption());\n    // Default label emphasis `show`\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n    this.fillDataTextStyle(option.data);\n    if (layoutMode) {\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n  SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\n    // this.settingTask.dirty();\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\n    this.fillDataTextStyle(newSeriesOption.data);\n    var layoutMode = fetchLayoutMode(this);\n    if (layoutMode) {\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n    }\n    var sourceManager = inner(this).sourceManager;\n    sourceManager.dirty();\n    sourceManager.prepareSource();\n    var data = this.getInitialData(newSeriesOption, ecModel);\n    wrapData(data, this);\n    this.dataTask.dirty();\n    this.dataTask.context.data = data;\n    inner(this).dataBeforeProcessed = data;\n    autoSeriesName(this);\n    this._initSelectedMapFromData(data);\n  };\n  SeriesModel.prototype.fillDataTextStyle = function (data) {\n    // Default data label emphasis `show`\n    // FIXME Tree structure data ?\n    // FIXME Performance ?\n    if (data && !zrUtil.isTypedArray(data)) {\n      var props = ['show'];\n      for (var i = 0; i < data.length; i++) {\n        if (data[i] && data[i].label) {\n          modelUtil.defaultEmphasis(data[i], 'label', props);\n        }\n      }\n    }\n  };\n  /**\r\n   * Init a data structure from data related option in series\r\n   * Must be overridden.\r\n   */\n  SeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return;\n  };\n  /**\r\n   * Append data to list\r\n   */\n  SeriesModel.prototype.appendData = function (params) {\n    // FIXME ???\n    // (1) If data from dataset, forbidden append.\n    // (2) support append data of dataset.\n    var data = this.getRawData();\n    data.appendData(params.data);\n  };\n  /**\r\n   * Consider some method like `filter`, `map` need make new data,\r\n   * We should make sure that `seriesModel.getData()` get correct\r\n   * data in the stream procedure. So we fetch data from upstream\r\n   * each time `task.perform` called.\r\n   */\n  SeriesModel.prototype.getData = function (dataType) {\n    var task = getCurrentTask(this);\n    if (task) {\n      var data = task.context.data;\n      return dataType == null || !data.getLinkedData ? data : data.getLinkedData(dataType);\n    } else {\n      // When series is not alive (that may happen when click toolbox\n      // restore or setOption with not merge mode), series data may\n      // be still need to judge animation or something when graphic\n      // elements want to know whether fade out.\n      return inner(this).data;\n    }\n  };\n  SeriesModel.prototype.getAllData = function () {\n    var mainData = this.getData();\n    return mainData && mainData.getLinkedDataAll ? mainData.getLinkedDataAll() : [{\n      data: mainData\n    }];\n  };\n  SeriesModel.prototype.setData = function (data) {\n    var task = getCurrentTask(this);\n    if (task) {\n      var context = task.context;\n      // Consider case: filter, data sample.\n      // FIXME:TS never used, so comment it\n      // if (context.data !== data && task.modifyOutputEnd) {\n      //     task.setOutputEnd(data.count());\n      // }\n      context.outputData = data;\n      // Caution: setData should update context.data,\n      // Because getData may be called multiply in a\n      // single stage and expect to get the data just\n      // set. (For example, AxisProxy, x y both call\n      // getData and setDate sequentially).\n      // So the context.data should be fetched from\n      // upstream each time when a stage starts to be\n      // performed.\n      if (task !== this.dataTask) {\n        context.data = data;\n      }\n    }\n    inner(this).data = data;\n  };\n  SeriesModel.prototype.getEncode = function () {\n    var encode = this.get('encode', true);\n    if (encode) {\n      return zrUtil.createHashMap(encode);\n    }\n  };\n  SeriesModel.prototype.getSourceManager = function () {\n    return inner(this).sourceManager;\n  };\n  SeriesModel.prototype.getSource = function () {\n    return this.getSourceManager().getSource();\n  };\n  /**\r\n   * Get data before processed\r\n   */\n  SeriesModel.prototype.getRawData = function () {\n    return inner(this).dataBeforeProcessed;\n  };\n  SeriesModel.prototype.getColorBy = function () {\n    var colorBy = this.get('colorBy');\n    return colorBy || 'series';\n  };\n  SeriesModel.prototype.isColorBySeries = function () {\n    return this.getColorBy() === 'series';\n  };\n  /**\r\n   * Get base axis if has coordinate system and has axis.\r\n   * By default use coordSys.getBaseAxis();\r\n   * Can be overridden for some chart.\r\n   * @return {type} description\r\n   */\n  SeriesModel.prototype.getBaseAxis = function () {\n    var coordSys = this.coordinateSystem;\n    // @ts-ignore\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n  };\n  /**\r\n   * Default tooltip formatter\r\n   *\r\n   * @param dataIndex\r\n   * @param multipleSeries\r\n   * @param dataType\r\n   * @param renderMode valid values: 'html'(by default) and 'richText'.\r\n   *        'html' is used for rendering tooltip in extra DOM form, and the result\r\n   *        string is used as DOM HTML content.\r\n   *        'richText' is used for rendering tooltip in rich text form, for those where\r\n   *        DOM operation is not supported.\r\n   * @return formatted tooltip with `html` and `markers`\r\n   *        Notice: The override method can also return string\r\n   */\n  SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    return defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n  };\n  SeriesModel.prototype.isAnimationEnabled = function () {\n    var ecModel = this.ecModel;\n    // Disable animation if using echarts in node but not give ssr flag.\n    // In ssr mode, renderToString will generate svg with css animation.\n    if (env.node && !(ecModel && ecModel.ssr)) {\n      return false;\n    }\n    var animationEnabled = this.getShallow('animation');\n    if (animationEnabled) {\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\n        animationEnabled = false;\n      }\n    }\n    return !!animationEnabled;\n  };\n  SeriesModel.prototype.restoreData = function () {\n    this.dataTask.dirty();\n  };\n  SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\n    var ecModel = this.ecModel;\n    // PENDING\n    var color = PaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\n    if (!color) {\n      color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n    }\n    return color;\n  };\n  /**\r\n   * Use `data.mapDimensionsAll(coordDim)` instead.\r\n   * @deprecated\r\n   */\n  SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\n    return this.getRawData().mapDimensionsAll(coordDim);\n  };\n  /**\r\n   * Get progressive rendering count each step\r\n   */\n  SeriesModel.prototype.getProgressive = function () {\n    return this.get('progressive');\n  };\n  /**\r\n   * Get progressive rendering count each step\r\n   */\n  SeriesModel.prototype.getProgressiveThreshold = function () {\n    return this.get('progressiveThreshold');\n  };\n  // PENGING If selectedMode is null ?\n  SeriesModel.prototype.select = function (innerDataIndices, dataType) {\n    this._innerSelect(this.getData(dataType), innerDataIndices);\n  };\n  SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\n    var selectedMap = this.option.selectedMap;\n    if (!selectedMap) {\n      return;\n    }\n    var selectedMode = this.option.selectedMode;\n    var data = this.getData(dataType);\n    if (selectedMode === 'series' || selectedMap === 'all') {\n      this.option.selectedMap = {};\n      this._selectedDataIndicesMap = {};\n      return;\n    }\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      var dataIndex = innerDataIndices[i];\n      var nameOrId = getSelectionKey(data, dataIndex);\n      selectedMap[nameOrId] = false;\n      this._selectedDataIndicesMap[nameOrId] = -1;\n    }\n  };\n  SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\n    var tmpArr = [];\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      tmpArr[0] = innerDataIndices[i];\n      this.isSelected(innerDataIndices[i], dataType) ? this.unselect(tmpArr, dataType) : this.select(tmpArr, dataType);\n    }\n  };\n  SeriesModel.prototype.getSelectedDataIndices = function () {\n    if (this.option.selectedMap === 'all') {\n      return [].slice.call(this.getData().getIndices());\n    }\n    var selectedDataIndicesMap = this._selectedDataIndicesMap;\n    var nameOrIds = zrUtil.keys(selectedDataIndicesMap);\n    var dataIndices = [];\n    for (var i = 0; i < nameOrIds.length; i++) {\n      var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\n      if (dataIndex >= 0) {\n        dataIndices.push(dataIndex);\n      }\n    }\n    return dataIndices;\n  };\n  SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\n    var selectedMap = this.option.selectedMap;\n    if (!selectedMap) {\n      return false;\n    }\n    var data = this.getData(dataType);\n    return (selectedMap === 'all' || selectedMap[getSelectionKey(data, dataIndex)]) && !data.getItemModel(dataIndex).get(['select', 'disabled']);\n  };\n  SeriesModel.prototype.isUniversalTransitionEnabled = function () {\n    if (this[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n      return true;\n    }\n    var universalTransitionOpt = this.option.universalTransition;\n    // Quick reject\n    if (!universalTransitionOpt) {\n      return false;\n    }\n    if (universalTransitionOpt === true) {\n      return true;\n    }\n    // Can be simply 'universalTransition: true'\n    return universalTransitionOpt && universalTransitionOpt.enabled;\n  };\n  SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\n    var _a, _b;\n    var option = this.option;\n    var selectedMode = option.selectedMode;\n    var len = innerDataIndices.length;\n    if (!selectedMode || !len) {\n      return;\n    }\n    if (selectedMode === 'series') {\n      option.selectedMap = 'all';\n    } else if (selectedMode === 'multiple') {\n      if (!zrUtil.isObject(option.selectedMap)) {\n        option.selectedMap = {};\n      }\n      var selectedMap = option.selectedMap;\n      for (var i = 0; i < len; i++) {\n        var dataIndex = innerDataIndices[i];\n        // TODO different types of data share same object.\n        var nameOrId = getSelectionKey(data, dataIndex);\n        selectedMap[nameOrId] = true;\n        this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\n      }\n    } else if (selectedMode === 'single' || selectedMode === true) {\n      var lastDataIndex = innerDataIndices[len - 1];\n      var nameOrId = getSelectionKey(data, lastDataIndex);\n      option.selectedMap = (_a = {}, _a[nameOrId] = true, _a);\n      this._selectedDataIndicesMap = (_b = {}, _b[nameOrId] = data.getRawIndex(lastDataIndex), _b);\n    }\n  };\n  SeriesModel.prototype._initSelectedMapFromData = function (data) {\n    // Ignore select info in data if selectedMap exists.\n    // NOTE It's only for legacy usage. edge data is not supported.\n    if (this.option.selectedMap) {\n      return;\n    }\n    var dataIndices = [];\n    if (data.hasItemOption) {\n      data.each(function (idx) {\n        var rawItem = data.getRawDataItem(idx);\n        if (rawItem && rawItem.selected) {\n          dataIndices.push(idx);\n        }\n      });\n    }\n    if (dataIndices.length > 0) {\n      this._innerSelect(data, dataIndices);\n    }\n  };\n  // /**\n  //  * @see {module:echarts/stream/Scheduler}\n  //  */\n  // abstract pipeTask: null\n  SeriesModel.registerClass = function (clz) {\n    return ComponentModel.registerClass(clz);\n  };\n  SeriesModel.protoInitialize = function () {\n    var proto = SeriesModel.prototype;\n    proto.type = 'series.__base__';\n    proto.seriesIndex = 0;\n    proto.ignoreStyleOnData = false;\n    proto.hasSymbolVisual = false;\n    proto.defaultSymbol = 'circle';\n    // Make sure the values can be accessed!\n    proto.visualStyleAccessPath = 'itemStyle';\n    proto.visualDrawType = 'fill';\n  }();\n  return SeriesModel;\n}(ComponentModel);\nzrUtil.mixin(SeriesModel, DataFormatMixin);\nzrUtil.mixin(SeriesModel, PaletteMixin);\nmountExtend(SeriesModel, ComponentModel);\n/**\r\n * MUST be called after `prepareSource` called\r\n * Here we need to make auto series, especially for auto legend. But we\r\n * do not modify series.name in option to avoid side effects.\r\n */\nfunction autoSeriesName(seriesModel) {\n  // User specified name has higher priority, otherwise it may cause\n  // series can not be queried unexpectedly.\n  var name = seriesModel.name;\n  if (!modelUtil.isNameSpecified(seriesModel)) {\n    seriesModel.name = getSeriesAutoName(seriesModel) || name;\n  }\n}\nfunction getSeriesAutoName(seriesModel) {\n  var data = seriesModel.getRawData();\n  var dataDims = data.mapDimensionsAll('seriesName');\n  var nameArr = [];\n  zrUtil.each(dataDims, function (dataDim) {\n    var dimInfo = data.getDimensionInfo(dataDim);\n    dimInfo.displayName && nameArr.push(dimInfo.displayName);\n  });\n  return nameArr.join(' ');\n}\nfunction dataTaskCount(context) {\n  return context.model.getRawData().count();\n}\nfunction dataTaskReset(context) {\n  var seriesModel = context.model;\n  seriesModel.setData(seriesModel.getRawData().cloneShallow());\n  return dataTaskProgress;\n}\nfunction dataTaskProgress(param, context) {\n  // Avoid repeat cloneShallow when data just created in reset.\n  if (context.outputData && param.end > context.outputData.count()) {\n    context.model.getRawData().cloneShallow(context.outputData);\n  }\n}\n// TODO refactor\nfunction wrapData(data, seriesModel) {\n  zrUtil.each(zrUtil.concatArray(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function (methodName) {\n    data.wrapMethod(methodName, zrUtil.curry(onDataChange, seriesModel));\n  });\n}\nfunction onDataChange(seriesModel, newList) {\n  var task = getCurrentTask(seriesModel);\n  if (task) {\n    // Consider case: filter, selectRange\n    task.setOutputEnd((newList || this).count());\n  }\n  return newList;\n}\nfunction getCurrentTask(seriesModel) {\n  var scheduler = (seriesModel.ecModel || {}).scheduler;\n  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n  if (pipeline) {\n    // When pipline finished, the currrentTask keep the last\n    // task (renderTask).\n    var task = pipeline.currentTask;\n    if (task) {\n      var agentStubMap = task.agentStubMap;\n      if (agentStubMap) {\n        task = agentStubMap.get(seriesModel.uid);\n      }\n    }\n    return task;\n  }\n}\nexport default SeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\nvar ComponentView = /** @class */function () {\n  function ComponentView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewComponent');\n  }\n  ComponentView.prototype.init = function (ecModel, api) {};\n  ComponentView.prototype.render = function (model, ecModel, api, payload) {};\n  ComponentView.prototype.dispose = function (ecModel, api) {};\n  ComponentView.prototype.updateView = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  /**\r\n   * Hook for toggle blur target series.\r\n   * Can be used in marker for blur or leave blur the markers\r\n   */\n  ComponentView.prototype.toggleBlurSeries = function (seriesModels, isBlur, ecModel) {\n    // Do nothing;\n  };\n  /**\r\n   * Traverse the new rendered elements.\r\n   *\r\n   * It will traverse the new added element in progressive rendering.\r\n   * And traverse all in normal rendering.\r\n   */\n  ComponentView.prototype.eachRendered = function (cb) {\n    var group = this.group;\n    if (group) {\n      group.traverse(cb);\n    }\n  };\n  return ComponentView;\n}();\n;\nclazzUtil.enableClassExtend(ComponentView);\nclazzUtil.enableClassManagement(ComponentView);\nexport default ComponentView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\nimport * as modelUtil from '../util/model.js';\nimport { enterEmphasis, leaveEmphasis, getHighlightDigit, isHighDownDispatcher } from '../util/states.js';\nimport { createTask } from '../core/task.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { traverseElements } from '../util/graphic.js';\nimport { error } from '../util/log.js';\nvar inner = modelUtil.makeInner();\nvar renderPlanner = createRenderPlanner();\nvar ChartView = /** @class */function () {\n  function ChartView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewChart');\n    this.renderTask = createTask({\n      plan: renderTaskPlan,\n      reset: renderTaskReset\n    });\n    this.renderTask.context = {\n      view: this\n    };\n  }\n  ChartView.prototype.init = function (ecModel, api) {};\n  ChartView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error('render method must been implemented');\n    }\n  };\n  /**\r\n   * Highlight series or specified data item.\r\n   */\n  ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n    toggleHighlight(data, payload, 'emphasis');\n  };\n  /**\r\n   * Downplay series or specified data item.\r\n   */\n  ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n    toggleHighlight(data, payload, 'normal');\n  };\n  /**\r\n   * Remove self.\r\n   */\n  ChartView.prototype.remove = function (ecModel, api) {\n    this.group.removeAll();\n  };\n  /**\r\n   * Dispose self.\r\n   */\n  ChartView.prototype.dispose = function (ecModel, api) {};\n  ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  // FIXME never used?\n  ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  // FIXME never used?\n  ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  /**\r\n   * Traverse the new rendered elements.\r\n   *\r\n   * It will traverse the new added element in progressive rendering.\r\n   * And traverse all in normal rendering.\r\n   */\n  ChartView.prototype.eachRendered = function (cb) {\n    traverseElements(this.group, cb);\n  };\n  ChartView.markUpdateMethod = function (payload, methodName) {\n    inner(payload).updateMethod = methodName;\n  };\n  ChartView.protoInitialize = function () {\n    var proto = ChartView.prototype;\n    proto.type = 'chart';\n  }();\n  return ChartView;\n}();\n;\n/**\r\n * Set state of single element\r\n */\nfunction elSetState(el, state, highlightDigit) {\n  if (el && isHighDownDispatcher(el)) {\n    (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\n  }\n}\nfunction toggleHighlight(data, payload, state) {\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\n  var highlightDigit = payload && payload.highlightKey != null ? getHighlightDigit(payload.highlightKey) : null;\n  if (dataIndex != null) {\n    each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\n      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n    });\n  } else {\n    data.eachItemGraphicEl(function (el) {\n      elSetState(el, state, highlightDigit);\n    });\n  }\n}\nclazzUtil.enableClassExtend(ChartView, ['dispose']);\nclazzUtil.enableClassManagement(ChartView);\nfunction renderTaskPlan(context) {\n  return renderPlanner(context.model);\n}\nfunction renderTaskReset(context) {\n  var seriesModel = context.model;\n  var ecModel = context.ecModel;\n  var api = context.api;\n  var payload = context.payload;\n  // FIXME: remove updateView updateVisual\n  var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n  var view = context.view;\n  var updateMethod = payload && inner(payload).updateMethod;\n  var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod\n  // `appendData` is also supported when data amount\n  // is less than progressive threshold.\n  : 'render';\n  if (methodName !== 'render') {\n    view[methodName](seriesModel, ecModel, api, payload);\n  }\n  return progressMethodMap[methodName];\n}\nvar progressMethodMap = {\n  incrementalPrepareRender: {\n    progress: function (params, context) {\n      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n    }\n  },\n  render: {\n    // Put view.render in `progress` to support appendData. But in this case\n    // view.render should not be called in reset, otherwise it will be called\n    // twise. Use `forceFirstProgress` to make sure that view.render is called\n    // in any cases.\n    forceFirstProgress: true,\n    progress: function (params, context) {\n      context.view.render(context.model, context.ecModel, context.api, context.payload);\n    }\n  }\n};\nexport default ChartView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar ORIGIN_METHOD = '\\0__throttleOriginMethod';\nvar RATE = '\\0__throttleRate';\nvar THROTTLE_TYPE = '\\0__throttleType';\n;\n/**\r\n * @public\r\n * @param {(Function)} fn\r\n * @param {number} [delay=0] Unit: ms.\r\n * @param {boolean} [debounce=false]\r\n *        true: If call interval less than `delay`, only the last call works.\r\n *        false: If call interval less than `delay, call works on fixed rate.\r\n * @return {(Function)} throttled fn.\r\n */\nexport function throttle(fn, delay, debounce) {\n  var currCall;\n  var lastCall = 0;\n  var lastExec = 0;\n  var timer = null;\n  var diff;\n  var scope;\n  var args;\n  var debounceNextCall;\n  delay = delay || 0;\n  function exec() {\n    lastExec = new Date().getTime();\n    timer = null;\n    fn.apply(scope, args || []);\n  }\n  var cb = function () {\n    var cbArgs = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      cbArgs[_i] = arguments[_i];\n    }\n    currCall = new Date().getTime();\n    scope = this;\n    args = cbArgs;\n    var thisDelay = debounceNextCall || delay;\n    var thisDebounce = debounceNextCall || debounce;\n    debounceNextCall = null;\n    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n    clearTimeout(timer);\n    // Here we should make sure that: the `exec` SHOULD NOT be called later\n    // than a new call of `cb`, that is, preserving the command order. Consider\n    // calculating \"scale rate\" when roaming as an example. When a call of `cb`\n    // happens, either the `exec` is called dierectly, or the call is delayed.\n    // But the delayed call should never be later than next call of `cb`. Under\n    // this assurance, we can simply update view state each time `dispatchAction`\n    // triggered by user roaming, but not need to add extra code to avoid the\n    // state being \"rolled-back\".\n    if (thisDebounce) {\n      timer = setTimeout(exec, thisDelay);\n    } else {\n      if (diff >= 0) {\n        exec();\n      } else {\n        timer = setTimeout(exec, -diff);\n      }\n    }\n    lastCall = currCall;\n  };\n  /**\r\n   * Clear throttle.\r\n   * @public\r\n   */\n  cb.clear = function () {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  };\n  /**\r\n   * Enable debounce once.\r\n   */\n  cb.debounceNextCall = function (debounceDelay) {\n    debounceNextCall = debounceDelay;\n  };\n  return cb;\n}\n/**\r\n * Create throttle method or update throttle rate.\r\n *\r\n * @example\r\n * ComponentView.prototype.render = function () {\r\n *     ...\r\n *     throttle.createOrUpdate(\r\n *         this,\r\n *         '_dispatchAction',\r\n *         this.model.get('throttle'),\r\n *         'fixRate'\r\n *     );\r\n * };\r\n * ComponentView.prototype.remove = function () {\r\n *     throttle.clear(this, '_dispatchAction');\r\n * };\r\n * ComponentView.prototype.dispose = function () {\r\n *     throttle.clear(this, '_dispatchAction');\r\n * };\r\n *\r\n */\nexport function createOrUpdate(obj, fnAttr, rate, throttleType) {\n  var fn = obj[fnAttr];\n  if (!fn) {\n    return;\n  }\n  var originFn = fn[ORIGIN_METHOD] || fn;\n  var lastThrottleType = fn[THROTTLE_TYPE];\n  var lastRate = fn[RATE];\n  if (lastRate !== rate || lastThrottleType !== throttleType) {\n    if (rate == null || !throttleType) {\n      return obj[fnAttr] = originFn;\n    }\n    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n    fn[ORIGIN_METHOD] = originFn;\n    fn[THROTTLE_TYPE] = throttleType;\n    fn[RATE] = rate;\n  }\n  return fn;\n}\n/**\r\n * Clear throttle. Example see throttle.createOrUpdate.\r\n */\nexport function clear(obj, fnAttr) {\n  var fn = obj[fnAttr];\n  if (fn && fn[ORIGIN_METHOD]) {\n    // Clear throttle\n    fn.clear && fn.clear();\n    obj[fnAttr] = fn[ORIGIN_METHOD];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isFunction, extend, createHashMap } from 'zrender/lib/core/util.js';\nimport makeStyleMapper from '../model/mixin/makeStyleMapper.js';\nimport { ITEM_STYLE_KEY_MAP } from '../model/mixin/itemStyle.js';\nimport { LINE_STYLE_KEY_MAP } from '../model/mixin/lineStyle.js';\nimport Model from '../model/Model.js';\nimport { makeInner } from '../util/model.js';\nvar inner = makeInner();\nvar defaultStyleMappers = {\n  itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\n  lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\n};\nvar defaultColorKey = {\n  lineStyle: 'stroke',\n  itemStyle: 'fill'\n};\nfunction getStyleMapper(seriesModel, stylePath) {\n  var styleMapper = seriesModel.visualStyleMapper || defaultStyleMappers[stylePath];\n  if (!styleMapper) {\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\n    return defaultStyleMappers.itemStyle;\n  }\n  return styleMapper;\n}\nfunction getDefaultColorKey(seriesModel, stylePath) {\n  // return defaultColorKey[stylePath] ||\n  var colorKey = seriesModel.visualDrawType || defaultColorKey[stylePath];\n  if (!colorKey) {\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\n    return 'fill';\n  }\n  return colorKey;\n}\nvar seriesStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n    // Set in itemStyle\n    var styleModel = seriesModel.getModel(stylePath);\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var globalStyle = getStyle(styleModel);\n    var decalOption = styleModel.getShallow('decal');\n    if (decalOption) {\n      data.setVisual('decal', decalOption);\n      decalOption.dirty = true;\n    }\n    // TODO\n    var colorKey = getDefaultColorKey(seriesModel, stylePath);\n    var color = globalStyle[colorKey];\n    // TODO style callback\n    var colorCallback = isFunction(color) ? color : null;\n    var hasAutoColor = globalStyle.fill === 'auto' || globalStyle.stroke === 'auto';\n    // Get from color palette by default.\n    if (!globalStyle[colorKey] || colorCallback || hasAutoColor) {\n      // Note: If some series has color specified (e.g., by itemStyle.color), we DO NOT\n      // make it effect palette. Because some scenarios users need to make some series\n      // transparent or as background, which should better not effect the palette.\n      var colorPalette = seriesModel.getColorFromPalette(\n      // TODO series count changed.\n      seriesModel.name, null, ecModel.getSeriesCount());\n      if (!globalStyle[colorKey]) {\n        globalStyle[colorKey] = colorPalette;\n        data.setVisual('colorFromPalette', true);\n      }\n      globalStyle.fill = globalStyle.fill === 'auto' || isFunction(globalStyle.fill) ? colorPalette : globalStyle.fill;\n      globalStyle.stroke = globalStyle.stroke === 'auto' || isFunction(globalStyle.stroke) ? colorPalette : globalStyle.stroke;\n    }\n    data.setVisual('style', globalStyle);\n    data.setVisual('drawType', colorKey);\n    // Only visible series has each data be visual encoded\n    if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\n      data.setVisual('colorFromPalette', false);\n      return {\n        dataEach: function (data, idx) {\n          var dataParams = seriesModel.getDataParams(idx);\n          var itemStyle = extend({}, globalStyle);\n          itemStyle[colorKey] = colorCallback(dataParams);\n          data.setItemVisual(idx, 'style', itemStyle);\n        }\n      };\n    }\n  }\n};\nvar sharedModel = new Model();\nvar dataStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n    // Set in itemStyle\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var colorKey = data.getVisual('drawType');\n    return {\n      dataEach: data.hasItemOption ? function (data, idx) {\n        // Not use getItemModel for performance considuration\n        var rawItem = data.getRawDataItem(idx);\n        if (rawItem && rawItem[stylePath]) {\n          sharedModel.option = rawItem[stylePath];\n          var style = getStyle(sharedModel);\n          var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\n          extend(existsStyle, style);\n          if (sharedModel.option.decal) {\n            data.setItemVisual(idx, 'decal', sharedModel.option.decal);\n            sharedModel.option.decal.dirty = true;\n          }\n          if (colorKey in style) {\n            data.setItemVisual(idx, 'colorFromPalette', false);\n          }\n        }\n      } : null\n    };\n  }\n};\n// Pick color from palette for the data which has not been set with color yet.\n// Note: do not support stream rendering. No such cases yet.\nvar dataColorPaletteTask = {\n  performRawSeries: true,\n  overallReset: function (ecModel) {\n    // Each type of series uses one scope.\n    // Pie and funnel are using different scopes.\n    var paletteScopeGroupByType = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var colorBy = seriesModel.getColorBy();\n      if (seriesModel.isColorBySeries()) {\n        return;\n      }\n      var key = seriesModel.type + '-' + colorBy;\n      var colorScope = paletteScopeGroupByType.get(key);\n      if (!colorScope) {\n        colorScope = {};\n        paletteScopeGroupByType.set(key, colorScope);\n      }\n      inner(seriesModel).scope = colorScope;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.isColorBySeries() || ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      var colorScope = inner(seriesModel).scope;\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n      var colorKey = getDefaultColorKey(seriesModel, stylePath);\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      // Iterate on data before filtered. To make sure color from palette can be\n      // Consistent when toggling legend.\n      dataAll.each(function (rawIdx) {\n        var idx = idxMap[rawIdx];\n        var fromPalette = data.getItemVisual(idx, 'colorFromPalette');\n        // Get color from palette for each data only when the color is inherited from series color, which is\n        // also picked from color palette. So following situation is not in the case:\n        // 1. series.itemStyle.color is set\n        // 2. color is encoded by visualMap\n        if (fromPalette) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          var name_1 = dataAll.getName(rawIdx) || rawIdx + '';\n          var dataCount = dataAll.count();\n          itemStyle[colorKey] = seriesModel.getColorFromPalette(name_1, colorScope, dataCount);\n        }\n      });\n    });\n  }\n};\nexport { seriesStyleTask, dataStyleTask, dataColorPaletteTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../util/graphic.js';\nvar PI = Math.PI;\n/**\r\n * @param {module:echarts/ExtensionAPI} api\r\n * @param {Object} [opts]\r\n * @param {string} [opts.text]\r\n * @param {string} [opts.color]\r\n * @param {string} [opts.textColor]\r\n * @return {module:zrender/Element}\r\n */\nexport default function defaultLoading(api, opts) {\n  opts = opts || {};\n  zrUtil.defaults(opts, {\n    text: 'loading',\n    textColor: '#000',\n    fontSize: 12,\n    fontWeight: 'normal',\n    fontStyle: 'normal',\n    fontFamily: 'sans-serif',\n    maskColor: 'rgba(255, 255, 255, 0.8)',\n    showSpinner: true,\n    color: '#5470c6',\n    spinnerRadius: 10,\n    lineWidth: 5,\n    zlevel: 0\n  });\n  var group = new graphic.Group();\n  var mask = new graphic.Rect({\n    style: {\n      fill: opts.maskColor\n    },\n    zlevel: opts.zlevel,\n    z: 10000\n  });\n  group.add(mask);\n  var textContent = new graphic.Text({\n    style: {\n      text: opts.text,\n      fill: opts.textColor,\n      fontSize: opts.fontSize,\n      fontWeight: opts.fontWeight,\n      fontStyle: opts.fontStyle,\n      fontFamily: opts.fontFamily\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  var labelRect = new graphic.Rect({\n    style: {\n      fill: 'none'\n    },\n    textContent: textContent,\n    textConfig: {\n      position: 'right',\n      distance: 10\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  group.add(labelRect);\n  var arc;\n  if (opts.showSpinner) {\n    arc = new graphic.Arc({\n      shape: {\n        startAngle: -PI / 2,\n        endAngle: -PI / 2 + 0.1,\n        r: opts.spinnerRadius\n      },\n      style: {\n        stroke: opts.color,\n        lineCap: 'round',\n        lineWidth: opts.lineWidth\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    arc.animateShape(true).when(1000, {\n      endAngle: PI * 3 / 2\n    }).start('circularInOut');\n    arc.animateShape(true).when(1000, {\n      startAngle: PI * 3 / 2\n    }).delay(300).start('circularInOut');\n    group.add(arc);\n  }\n  // Inject resize\n  group.resize = function () {\n    var textWidth = textContent.getBoundingRect().width;\n    var r = opts.showSpinner ? opts.spinnerRadius : 0;\n    // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n    // textDistance needs to be calculated when both animation and text exist\n    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 - (opts.showSpinner && textWidth ? 0 : 5 + textWidth / 2)\n    // only show the text\n    + (opts.showSpinner ? 0 : textWidth / 2)\n    // only show the spinner\n    + (textWidth ? 0 : r);\n    var cy = api.getHeight() / 2;\n    opts.showSpinner && arc.setShape({\n      cx: cx,\n      cy: cy\n    });\n    labelRect.setShape({\n      x: cx - r,\n      y: cy - r,\n      width: r * 2,\n      height: r * 2\n    });\n    mask.setShape({\n      x: 0,\n      y: 0,\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n  group.resize();\n  return group;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, map, isFunction, createHashMap, noop, assert } from 'zrender/lib/core/util.js';\nimport { createTask } from './task.js';\nimport { getUID } from '../util/component.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport { normalizeToArray } from '../util/model.js';\n;\nvar Scheduler = /** @class */function () {\n  function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n    // key: handlerUID\n    this._stageTaskMap = createHashMap();\n    this.ecInstance = ecInstance;\n    this.api = api;\n    // Fix current processors in case that in some rear cases that\n    // processors might be registered after echarts instance created.\n    // Register processors incrementally for a echarts instance is\n    // not supported by this stream architecture.\n    dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n    visualHandlers = this._visualHandlers = visualHandlers.slice();\n    this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n  }\n  Scheduler.prototype.restoreData = function (ecModel, payload) {\n    // TODO: Only restore needed series and components, but not all components.\n    // Currently `restoreData` of all of the series and component will be called.\n    // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n    // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n    // and some components like coordinate system, axes, dataZoom, visualMap only\n    // need their target series refresh.\n    // (1) If we are implementing this feature some day, we should consider these cases:\n    // if a data processor depends on a component (e.g., dataZoomProcessor depends\n    // on the settings of `dataZoom`), it should be re-performed if the component\n    // is modified by `setOption`.\n    // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n    // it should be re-performed when the result array of `getTargetSeries` changed.\n    // We use `dependencies` to cover these issues.\n    // (3) How to update target series when coordinate system related components modified.\n    // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n    // and this case all of the tasks will be set as dirty.\n    ecModel.restoreData(payload);\n    // Theoretically an overall task not only depends on each of its target series, but also\n    // depends on all of the series.\n    // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n    // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n    // that the overall task is set as dirty and to be performed, otherwise it probably cause\n    // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n    // probably cause state chaos (consider `dataZoomProcessor`).\n    this._stageTaskMap.each(function (taskRecord) {\n      var overallTask = taskRecord.overallTask;\n      overallTask && overallTask.dirty();\n    });\n  };\n  // If seriesModel provided, incremental threshold is check by series data.\n  Scheduler.prototype.getPerformArgs = function (task, isBlock) {\n    // For overall task\n    if (!task.__pipeline) {\n      return;\n    }\n    var pipeline = this._pipelineMap.get(task.__pipeline.id);\n    var pCtx = pipeline.context;\n    var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n    var step = incremental ? pipeline.step : null;\n    var modDataCount = pCtx && pCtx.modDataCount;\n    var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n    return {\n      step: step,\n      modBy: modBy,\n      modDataCount: modDataCount\n    };\n  };\n  Scheduler.prototype.getPipeline = function (pipelineId) {\n    return this._pipelineMap.get(pipelineId);\n  };\n  /**\r\n   * Current, progressive rendering starts from visual and layout.\r\n   * Always detect render mode in the same stage, avoiding that incorrect\r\n   * detection caused by data filtering.\r\n   * Caution:\r\n   * `updateStreamModes` use `seriesModel.getData()`.\r\n   */\n  Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\n    var pipeline = this._pipelineMap.get(seriesModel.uid);\n    var data = seriesModel.getData();\n    var dataLen = data.count();\n    // `progressiveRender` means that can render progressively in each\n    // animation frame. Note that some types of series do not provide\n    // `view.incrementalPrepareRender` but support `chart.appendData`. We\n    // use the term `incremental` but not `progressive` to describe the\n    // case that `chart.appendData`.\n    var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n    var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold');\n    // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n    // see `test/candlestick-large3.html`\n    var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n    seriesModel.pipelineContext = pipeline.context = {\n      progressiveRender: progressiveRender,\n      modDataCount: modDataCount,\n      large: large\n    };\n  };\n  Scheduler.prototype.restorePipelines = function (ecModel) {\n    var scheduler = this;\n    var pipelineMap = scheduler._pipelineMap = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var progressive = seriesModel.getProgressive();\n      var pipelineId = seriesModel.uid;\n      pipelineMap.set(pipelineId, {\n        id: pipelineId,\n        head: null,\n        tail: null,\n        threshold: seriesModel.getProgressiveThreshold(),\n        progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n        blockIndex: -1,\n        step: Math.round(progressive || 700),\n        count: 0\n      });\n      scheduler._pipe(seriesModel, seriesModel.dataTask);\n    });\n  };\n  Scheduler.prototype.prepareStageTasks = function () {\n    var stageTaskMap = this._stageTaskMap;\n    var ecModel = this.api.getModel();\n    var api = this.api;\n    each(this._allHandlers, function (handler) {\n      var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        // Currently do not need to support to sepecify them both.\n        errMsg = '\"reset\" and \"overallReset\" must not be both specified.';\n      }\n      assert(!(handler.reset && handler.overallReset), errMsg);\n      handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\n      handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\n    }, this);\n  };\n  Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\n    var renderTask = view.renderTask;\n    var context = renderTask.context;\n    context.model = model;\n    context.ecModel = ecModel;\n    context.api = api;\n    renderTask.__block = !view.incrementalPrepareRender;\n    this._pipe(model, renderTask);\n  };\n  Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\n    // If we do not use `block` here, it should be considered when to update modes.\n    this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {\n      block: true\n    });\n  };\n  Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\n    this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\n  };\n  Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\n    opt = opt || {};\n    var unfinished = false;\n    var scheduler = this;\n    each(stageHandlers, function (stageHandler, idx) {\n      if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n        return;\n      }\n      var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n      var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n      var overallTask = stageHandlerRecord.overallTask;\n      if (overallTask) {\n        var overallNeedDirty_1;\n        var agentStubMap = overallTask.agentStubMap;\n        agentStubMap.each(function (stub) {\n          if (needSetDirty(opt, stub)) {\n            stub.dirty();\n            overallNeedDirty_1 = true;\n          }\n        });\n        overallNeedDirty_1 && overallTask.dirty();\n        scheduler.updatePayload(overallTask, payload);\n        var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block);\n        // Execute stubs firstly, which may set the overall task dirty,\n        // then execute the overall task. And stub will call seriesModel.setData,\n        // which ensures that in the overallTask seriesModel.getData() will not\n        // return incorrect data.\n        agentStubMap.each(function (stub) {\n          stub.perform(performArgs_1);\n        });\n        if (overallTask.perform(performArgs_1)) {\n          unfinished = true;\n        }\n      } else if (seriesTaskMap) {\n        seriesTaskMap.each(function (task, pipelineId) {\n          if (needSetDirty(opt, task)) {\n            task.dirty();\n          }\n          var performArgs = scheduler.getPerformArgs(task, opt.block);\n          // FIXME\n          // if intending to declare `performRawSeries` in handlers, only\n          // stream-independent (specifically, data item independent) operations can be\n          // performed. Because if a series is filtered, most of the tasks will not\n          // be performed. A stream-dependent operation probably cause wrong biz logic.\n          // Perhaps we should not provide a separate callback for this case instead\n          // of providing the config `performRawSeries`. The stream-dependent operations\n          // and stream-independent operations should better not be mixed.\n          performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n          scheduler.updatePayload(task, payload);\n          if (task.perform(performArgs)) {\n            unfinished = true;\n          }\n        });\n      }\n    });\n    function needSetDirty(opt, task) {\n      return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n    }\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.performSeriesTasks = function (ecModel) {\n    var unfinished;\n    ecModel.eachSeries(function (seriesModel) {\n      // Progress to the end for dataInit and dataRestore.\n      unfinished = seriesModel.dataTask.perform() || unfinished;\n    });\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.plan = function () {\n    // Travel pipelines, check block.\n    this._pipelineMap.each(function (pipeline) {\n      var task = pipeline.tail;\n      do {\n        if (task.__block) {\n          pipeline.blockIndex = task.__idxInPipeline;\n          break;\n        }\n        task = task.getUpstream();\n      } while (task);\n    });\n  };\n  Scheduler.prototype.updatePayload = function (task, payload) {\n    payload !== 'remain' && (task.context.payload = payload);\n  };\n  Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap;\n    // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n    var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n    // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n    // it works but it may cause other irrelevant charts blocked.\n    if (stageHandler.createOnAllSeries) {\n      ecModel.eachRawSeries(create);\n    } else if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, create);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(create);\n    }\n    function create(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      // Init tasks for each seriesModel only once.\n      // Reuse original task instance.\n      var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({\n        plan: seriesTaskPlan,\n        reset: seriesTaskReset,\n        count: seriesTaskCount\n      }));\n      task.context = {\n        model: seriesModel,\n        ecModel: ecModel,\n        api: api,\n        // PENDING: `useClearVisual` not used?\n        useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n        plan: stageHandler.plan,\n        reset: stageHandler.reset,\n        scheduler: scheduler\n      };\n      scheduler._pipe(seriesModel, task);\n    }\n  };\n  Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask\n    // For overall task, the function only be called on reset stage.\n    || createTask({\n      reset: overallTaskReset\n    });\n    overallTask.context = {\n      ecModel: ecModel,\n      api: api,\n      overallReset: stageHandler.overallReset,\n      scheduler: scheduler\n    };\n    var oldAgentStubMap = overallTask.agentStubMap;\n    // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n    var newAgentStubMap = overallTask.agentStubMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    var overallProgress = true;\n    var shouldOverallTaskDirty = false;\n    // FIXME:TS never used, so comment it\n    // let modifyOutputEnd = stageHandler.modifyOutputEnd;\n    // An overall task with seriesType detected or has `getTargetSeries`, we add\n    // stub in each pipelines, it will set the overall task dirty when the pipeline\n    // progress. Moreover, to avoid call the overall task each frame (too frequent),\n    // we set the pipeline block.\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '\"createOnAllSeries\" is not supported for \"overallReset\", ' + 'because it will block all streams.';\n    }\n    assert(!stageHandler.createOnAllSeries, errMsg);\n    if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, createStub);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(createStub);\n    }\n    // Otherwise, (usually it is legacy case), the overall task will only be\n    // executed when upstream is dirty. Otherwise the progressive rendering of all\n    // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n    // dirty info from upstream.\n    else {\n      overallProgress = false;\n      each(ecModel.getSeries(), createStub);\n    }\n    function createStub(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || (\n      // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n      shouldOverallTaskDirty = true, createTask({\n        reset: stubReset,\n        onDirty: stubOnDirty\n      })));\n      stub.context = {\n        model: seriesModel,\n        overallProgress: overallProgress\n        // FIXME:TS never used, so comment it\n        // modifyOutputEnd: modifyOutputEnd\n      };\n      stub.agent = overallTask;\n      stub.__block = overallProgress;\n      scheduler._pipe(seriesModel, stub);\n    }\n    if (shouldOverallTaskDirty) {\n      overallTask.dirty();\n    }\n  };\n  Scheduler.prototype._pipe = function (seriesModel, task) {\n    var pipelineId = seriesModel.uid;\n    var pipeline = this._pipelineMap.get(pipelineId);\n    !pipeline.head && (pipeline.head = task);\n    pipeline.tail && pipeline.tail.pipe(task);\n    pipeline.tail = task;\n    task.__idxInPipeline = pipeline.count++;\n    task.__pipeline = pipeline;\n  };\n  Scheduler.wrapStageHandler = function (stageHandler, visualType) {\n    if (isFunction(stageHandler)) {\n      stageHandler = {\n        overallReset: stageHandler,\n        seriesType: detectSeriseType(stageHandler)\n      };\n    }\n    stageHandler.uid = getUID('stageHandler');\n    visualType && (stageHandler.visualType = visualType);\n    return stageHandler;\n  };\n  ;\n  return Scheduler;\n}();\nfunction overallTaskReset(context) {\n  context.overallReset(context.ecModel, context.api, context.payload);\n}\nfunction stubReset(context) {\n  return context.overallProgress && stubProgress;\n}\nfunction stubProgress() {\n  this.agent.dirty();\n  this.getDownstream().dirty();\n}\nfunction stubOnDirty() {\n  this.agent && this.agent.dirty();\n}\nfunction seriesTaskPlan(context) {\n  return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\n}\nfunction seriesTaskReset(context) {\n  if (context.useClearVisual) {\n    context.data.clearAllVisual();\n  }\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n    return makeSeriesTaskProgress(idx);\n  }) : singleSeriesTaskProgress;\n}\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\nfunction makeSeriesTaskProgress(resetDefineIdx) {\n  return function (params, context) {\n    var data = context.data;\n    var resetDefine = context.resetDefines[resetDefineIdx];\n    if (resetDefine && resetDefine.dataEach) {\n      for (var i = params.start; i < params.end; i++) {\n        resetDefine.dataEach(data, i);\n      }\n    } else if (resetDefine && resetDefine.progress) {\n      resetDefine.progress(params, data);\n    }\n  };\n}\nfunction seriesTaskCount(context) {\n  return context.data.count();\n}\n/**\r\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\r\n * To ensure that they can work normally, they should work in block mode, that is,\r\n * they should not be started util the previous tasks finished. So they cause the\r\n * progressive rendering disabled. We try to detect the series type, to narrow down\r\n * the block range to only the series type they concern, but not all series.\r\n */\nfunction detectSeriseType(legacyFunc) {\n  seriesType = null;\n  try {\n    // Assume there is no async when calling `eachSeriesByType`.\n    legacyFunc(ecModelMock, apiMock);\n  } catch (e) {}\n  return seriesType;\n}\nvar ecModelMock = {};\nvar apiMock = {};\nvar seriesType;\nmockMethods(ecModelMock, GlobalModel);\nmockMethods(apiMock, ExtensionAPI);\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n  seriesType = type;\n};\necModelMock.eachComponent = function (cond) {\n  if (cond.mainType === 'series' && cond.subType) {\n    seriesType = cond.subType;\n  }\n};\nfunction mockMethods(target, Clz) {\n  /* eslint-disable */\n  for (var name_1 in Clz.prototype) {\n    // Do not use hasOwnProperty\n    target[name_1] = noop;\n  }\n  /* eslint-enable */\n}\nexport default Scheduler;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar colorAll = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'];\nexport default {\n  color: colorAll,\n  colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], colorAll]\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar contrastColor = '#B9B8CE';\nvar backgroundColor = '#100C2A';\nvar axisCommon = function () {\n  return {\n    axisLine: {\n      lineStyle: {\n        color: contrastColor\n      }\n    },\n    splitLine: {\n      lineStyle: {\n        color: '#484753'\n      }\n    },\n    splitArea: {\n      areaStyle: {\n        color: ['rgba(255,255,255,0.02)', 'rgba(255,255,255,0.05)']\n      }\n    },\n    minorSplitLine: {\n      lineStyle: {\n        color: '#20203B'\n      }\n    }\n  };\n};\nvar colorPalette = ['#4992ff', '#7cffb2', '#fddd60', '#ff6e76', '#58d9f9', '#05c091', '#ff8a45', '#8d48e3', '#dd79ff'];\nvar theme = {\n  darkMode: true,\n  color: colorPalette,\n  backgroundColor: backgroundColor,\n  axisPointer: {\n    lineStyle: {\n      color: '#817f91'\n    },\n    crossStyle: {\n      color: '#817f91'\n    },\n    label: {\n      // TODO Contrast of label backgorundColor\n      color: '#fff'\n    }\n  },\n  legend: {\n    textStyle: {\n      color: contrastColor\n    },\n    pageTextStyle: {\n      color: contrastColor\n    }\n  },\n  textStyle: {\n    color: contrastColor\n  },\n  title: {\n    textStyle: {\n      color: '#EEF1FA'\n    },\n    subtextStyle: {\n      color: '#B9B8CE'\n    }\n  },\n  toolbox: {\n    iconStyle: {\n      borderColor: contrastColor\n    }\n  },\n  dataZoom: {\n    borderColor: '#71708A',\n    textStyle: {\n      color: contrastColor\n    },\n    brushStyle: {\n      color: 'rgba(135,163,206,0.3)'\n    },\n    handleStyle: {\n      color: '#353450',\n      borderColor: '#C5CBE3'\n    },\n    moveHandleStyle: {\n      color: '#B0B6C3',\n      opacity: 0.3\n    },\n    fillerColor: 'rgba(135,163,206,0.2)',\n    emphasis: {\n      handleStyle: {\n        borderColor: '#91B7F2',\n        color: '#4D587D'\n      },\n      moveHandleStyle: {\n        color: '#636D9A',\n        opacity: 0.7\n      }\n    },\n    dataBackground: {\n      lineStyle: {\n        color: '#71708A',\n        width: 1\n      },\n      areaStyle: {\n        color: '#71708A'\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#87A3CE'\n      },\n      areaStyle: {\n        color: '#87A3CE'\n      }\n    }\n  },\n  visualMap: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  timeline: {\n    lineStyle: {\n      color: contrastColor\n    },\n    label: {\n      color: contrastColor\n    },\n    controlStyle: {\n      color: contrastColor,\n      borderColor: contrastColor\n    }\n  },\n  calendar: {\n    itemStyle: {\n      color: backgroundColor\n    },\n    dayLabel: {\n      color: contrastColor\n    },\n    monthLabel: {\n      color: contrastColor\n    },\n    yearLabel: {\n      color: contrastColor\n    }\n  },\n  timeAxis: axisCommon(),\n  logAxis: axisCommon(),\n  valueAxis: axisCommon(),\n  categoryAxis: axisCommon(),\n  line: {\n    symbol: 'circle'\n  },\n  graph: {\n    color: colorPalette\n  },\n  gauge: {\n    title: {\n      color: contrastColor\n    },\n    axisLine: {\n      lineStyle: {\n        color: [[1, 'rgba(207,212,219,0.2)']]\n      }\n    },\n    axisLabel: {\n      color: contrastColor\n    },\n    detail: {\n      color: '#EEF1FA'\n    }\n  },\n  candlestick: {\n    itemStyle: {\n      color: '#f64e56',\n      color0: '#54ea92',\n      borderColor: '#f64e56',\n      borderColor0: '#54ea92'\n      // borderColor: '#ca2824',\n      // borderColor0: '#09a443'\n    }\n  }\n};\ntheme.categoryAxis.splitLine.show = false;\nexport default theme;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\n/**\r\n * Usage of query:\r\n * `chart.on('click', query, handler);`\r\n * The `query` can be:\r\n * + The component type query string, only `mainType` or `mainType.subType`,\r\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\r\n * + The component query object, like:\r\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\r\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\r\n * + The data query object, like:\r\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\r\n * + The other query object (cmponent customized query), like:\r\n *   `{element: 'some'}` (only available in custom series).\r\n *\r\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\r\n * same as there is no such prop in the `query` object.\r\n */\nvar ECEventProcessor = /** @class */function () {\n  function ECEventProcessor() {}\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {};\n    // `query` is `mainType` or `mainType.subType` of component.\n    if (zrUtil.isString(query)) {\n      var condCptType = parseClassType(query);\n      // `.main` and `.sub` may be ''.\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    }\n    // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n      // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n      // can not be used in `compomentModel.filterForExposedEvent`.\n      var suffixes_1 = ['Index', 'Name', 'Id'];\n      var dataKeys_1 = {\n        name: 1,\n        dataIndex: 1,\n        dataType: 1\n      };\n      zrUtil.each(query, function (val, key) {\n        var reserved = false;\n        for (var i = 0; i < suffixes_1.length; i++) {\n          var propSuffix = suffixes_1[i];\n          var suffixPos = key.lastIndexOf(propSuffix);\n          if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n            var mainType = key.slice(0, suffixPos);\n            // Consider `dataIndex`.\n            if (mainType !== 'data') {\n              cptQuery.mainType = mainType;\n              cptQuery[propSuffix.toLowerCase()] = val;\n              reserved = true;\n            }\n          }\n        }\n        if (dataKeys_1.hasOwnProperty(key)) {\n          dataQuery[key] = val;\n          reserved = true;\n        }\n        if (!reserved) {\n          otherQuery[key] = val;\n        }\n      });\n    }\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  };\n  ECEventProcessor.prototype.filter = function (eventType, query) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n    if (!eventInfo) {\n      return true;\n    }\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view;\n    // For event like 'globalout'.\n    if (!model || !view) {\n      return true;\n    }\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  };\n  ECEventProcessor.prototype.afterTrigger = function () {\n    // Make sure the eventInfo won't be used in next trigger.\n    this.eventInfo = null;\n  };\n  return ECEventProcessor;\n}();\nexport { ECEventProcessor };\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend, isFunction, keys } from 'zrender/lib/core/util.js';\nvar SYMBOL_PROPS_WITH_CB = ['symbol', 'symbolSize', 'symbolRotate', 'symbolOffset'];\nvar SYMBOL_PROPS = SYMBOL_PROPS_WITH_CB.concat(['symbolKeepAspect']);\n// Encoding visual for all series include which is filtered for legend drawing\nvar seriesSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    if (seriesModel.legendIcon) {\n      data.setVisual('legendIcon', seriesModel.legendIcon);\n    }\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    }\n    var symbolOptions = {};\n    var symbolOptionsCb = {};\n    var hasCallback = false;\n    for (var i = 0; i < SYMBOL_PROPS_WITH_CB.length; i++) {\n      var symbolPropName = SYMBOL_PROPS_WITH_CB[i];\n      var val = seriesModel.get(symbolPropName);\n      if (isFunction(val)) {\n        hasCallback = true;\n        symbolOptionsCb[symbolPropName] = val;\n      } else {\n        symbolOptions[symbolPropName] = val;\n      }\n    }\n    symbolOptions.symbol = symbolOptions.symbol || seriesModel.defaultSymbol;\n    data.setVisual(extend({\n      legendIcon: seriesModel.legendIcon || symbolOptions.symbol,\n      symbolKeepAspect: seriesModel.get('symbolKeepAspect')\n    }, symbolOptions));\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var symbolPropsCb = keys(symbolOptionsCb);\n    function dataEach(data, idx) {\n      var rawValue = seriesModel.getRawValue(idx);\n      var params = seriesModel.getDataParams(idx);\n      for (var i = 0; i < symbolPropsCb.length; i++) {\n        var symbolPropName = symbolPropsCb[i];\n        data.setItemVisual(idx, symbolPropName, symbolOptionsCb[symbolPropName](rawValue, params));\n      }\n    }\n    return {\n      dataEach: hasCallback ? dataEach : null\n    };\n  }\n};\nvar dataSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    }\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      for (var i = 0; i < SYMBOL_PROPS.length; i++) {\n        var symbolPropName = SYMBOL_PROPS[i];\n        var val = itemModel.getShallow(symbolPropName, true);\n        if (val != null) {\n          data.setItemVisual(idx, symbolPropName, val);\n        }\n      }\n    }\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport { seriesSymbolTask, dataSymbolTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport function getItemVisualFromData(data, dataIndex, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getItemVisual(dataIndex, 'style');\n      return style[data.getVisual('drawType')];\n    case 'opacity':\n      return data.getItemVisual(dataIndex, 'style').opacity;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getItemVisual(dataIndex, key);\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}\nexport function getVisualFromData(data, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getVisual('style');\n      return style[data.getVisual('drawType')];\n    case 'opacity':\n      return data.getVisual('style').opacity;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getVisual(key);\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}\nexport function setItemVisualFromData(data, dataIndex, key, value) {\n  switch (key) {\n    case 'color':\n      // Make sure not sharing style object.\n      var style = data.ensureUniqueItemVisual(dataIndex, 'style');\n      style[data.getVisual('drawType')] = value;\n      // Mark the color has been changed, not from palette anymore\n      data.setItemVisual(dataIndex, 'colorFromPalette', false);\n      break;\n    case 'opacity':\n      data.ensureUniqueItemVisual(dataIndex, 'style').opacity = value;\n      break;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      data.setItemVisual(dataIndex, key, value);\n      break;\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend, each, isArray, isString } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog, deprecateLog } from '../util/log.js';\nimport { queryDataIndex } from '../util/model.js';\n// Legacy data selection action.\n// Includes: pieSelect, pieUnSelect, pieToggleSelect, mapSelect, mapUnSelect, mapToggleSelect\nexport function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\n  function getSeriesIndices(ecModel, payload) {\n    var seriesIndices = [];\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: seriesType,\n      query: payload\n    }, function (seriesModel) {\n      seriesIndices.push(seriesModel.seriesIndex);\n    });\n    return seriesIndices;\n  }\n  each([[seriesType + 'ToggleSelect', 'toggleSelect'], [seriesType + 'Select', 'select'], [seriesType + 'UnSelect', 'unselect']], function (eventsMap) {\n    ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\n      payload = extend({}, payload);\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(payload.type, eventsMap[1]);\n      }\n      api.dispatchAction(extend(payload, {\n        type: eventsMap[1],\n        seriesIndex: getSeriesIndices(ecModel, payload)\n      }));\n    });\n  });\n}\nfunction handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, ecModel, payload) {\n  var legacyEventName = type + eventPostfix;\n  if (!ecIns.isSilent(legacyEventName)) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\n    }\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'pie'\n    }, function (seriesModel) {\n      var seriesIndex = seriesModel.seriesIndex;\n      var selectedMap = seriesModel.option.selectedMap;\n      var selected = payload.selected;\n      for (var i = 0; i < selected.length; i++) {\n        if (selected[i].seriesIndex === seriesIndex) {\n          var data = seriesModel.getData();\n          var dataIndex = queryDataIndex(data, payload.fromActionPayload);\n          ecIns.trigger(legacyEventName, {\n            type: legacyEventName,\n            seriesId: seriesModel.id,\n            name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\n            selected: isString(selectedMap) ? selectedMap : extend({}, selectedMap)\n          });\n        }\n      }\n    });\n  }\n}\nexport function handleLegacySelectEvents(messageCenter, ecIns, api) {\n  messageCenter.on('selectchanged', function (params) {\n    var ecModel = api.getModel();\n    if (params.isFromClick) {\n      handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, ecModel, params);\n    } else if (params.fromAction === 'select') {\n      handleSeriesLegacySelectEvents('map', 'selected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selected', ecIns, ecModel, params);\n    } else if (params.fromAction === 'unselect') {\n      handleSeriesLegacySelectEvents('map', 'unselected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, ecModel, params);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport function findEventDispatcher(target, det, returnFirstMatch) {\n  var found;\n  while (target) {\n    if (det(target)) {\n      found = target;\n      if (returnFirstMatch) {\n        break;\n      }\n    }\n    target = target.__hostTarget || target.parent;\n  }\n  return found;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Symbol factory\nimport { each, isArray, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as graphic from './graphic.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { parsePercent } from './number.js';\n/**\r\n * Triangle shape\r\n * @inner\r\n */\nvar Triangle = graphic.Path.extend({\n  type: 'triangle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy + height);\n    path.lineTo(cx - width, cy + height);\n    path.closePath();\n  }\n});\n/**\r\n * Diamond shape\r\n * @inner\r\n */\nvar Diamond = graphic.Path.extend({\n  type: 'diamond',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy);\n    path.lineTo(cx, cy + height);\n    path.lineTo(cx - width, cy);\n    path.closePath();\n  }\n});\n/**\r\n * Pin shape\r\n * @inner\r\n */\nvar Pin = graphic.Path.extend({\n  type: 'pin',\n  shape: {\n    // x, y on the cusp\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var w = shape.width / 5 * 3;\n    // Height must be larger than width\n    var h = Math.max(w, shape.height);\n    var r = w / 2;\n    // Dist on y with tangent point and circle center\n    var dy = r * r / (h - r);\n    var cy = y - h + r + dy;\n    var angle = Math.asin(dy / r);\n    // Dist on x with tangent point and circle center\n    var dx = Math.cos(angle) * r;\n    var tanX = Math.sin(angle);\n    var tanY = Math.cos(angle);\n    var cpLen = r * 0.6;\n    var cpLen2 = r * 0.7;\n    path.moveTo(x - dx, cy + dy);\n    path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n    path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n    path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n    path.closePath();\n  }\n});\n/**\r\n * Arrow shape\r\n * @inner\r\n */\nvar Arrow = graphic.Path.extend({\n  type: 'arrow',\n  shape: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var height = shape.height;\n    var width = shape.width;\n    var x = shape.x;\n    var y = shape.y;\n    var dx = width / 3 * 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + dx, y + height);\n    ctx.lineTo(x, y + height / 4 * 3);\n    ctx.lineTo(x - dx, y + height);\n    ctx.lineTo(x, y);\n    ctx.closePath();\n  }\n});\n/**\r\n * Map of path constructors\r\n */\n// TODO Use function to build symbol path.\nvar symbolCtors = {\n  line: graphic.Line,\n  rect: graphic.Rect,\n  roundRect: graphic.Rect,\n  square: graphic.Rect,\n  circle: graphic.Circle,\n  diamond: Diamond,\n  pin: Pin,\n  arrow: Arrow,\n  triangle: Triangle\n};\nvar symbolShapeMakers = {\n  line: function (x, y, w, h, shape) {\n    shape.x1 = x;\n    shape.y1 = y + h / 2;\n    shape.x2 = x + w;\n    shape.y2 = y + h / 2;\n  },\n  rect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n  },\n  roundRect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n    shape.r = Math.min(w, h) / 4;\n  },\n  square: function (x, y, w, h, shape) {\n    var size = Math.min(w, h);\n    shape.x = x;\n    shape.y = y;\n    shape.width = size;\n    shape.height = size;\n  },\n  circle: function (x, y, w, h, shape) {\n    // Put circle in the center of square\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.r = Math.min(w, h) / 2;\n  },\n  diamond: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  pin: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  arrow: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  triangle: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  }\n};\nexport var symbolBuildProxies = {};\neach(symbolCtors, function (Ctor, name) {\n  symbolBuildProxies[name] = new Ctor();\n});\nvar SymbolClz = graphic.Path.extend({\n  type: 'symbol',\n  shape: {\n    symbolType: '',\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  calculateTextPosition: function (out, config, rect) {\n    var res = calculateTextPosition(out, config, rect);\n    var shape = this.shape;\n    if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\n      res.y = rect.y + rect.height * 0.4;\n    }\n    return res;\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    var symbolType = shape.symbolType;\n    if (symbolType !== 'none') {\n      var proxySymbol = symbolBuildProxies[symbolType];\n      if (!proxySymbol) {\n        // Default rect\n        symbolType = 'rect';\n        proxySymbol = symbolBuildProxies[symbolType];\n      }\n      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n    }\n  }\n});\n// Provide setColor helper method to avoid determine if set the fill or stroke outside\nfunction symbolPathSetColor(color, innerColor) {\n  if (this.type !== 'image') {\n    var symbolStyle = this.style;\n    if (this.__isEmptyBrush) {\n      symbolStyle.stroke = color;\n      symbolStyle.fill = innerColor || '#fff';\n      // TODO Same width with lineStyle in LineView\n      symbolStyle.lineWidth = 2;\n    } else if (this.shape.symbolType === 'line') {\n      symbolStyle.stroke = color;\n    } else {\n      symbolStyle.fill = color;\n    }\n    this.markRedraw();\n  }\n}\n/**\r\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\r\n */\nexport function createSymbol(symbolType, x, y, w, h, color,\n// whether to keep the ratio of w/h,\nkeepAspect) {\n  // TODO Support image object, DynamicImage.\n  var isEmpty = symbolType.indexOf('empty') === 0;\n  if (isEmpty) {\n    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n  }\n  var symbolPath;\n  if (symbolType.indexOf('image://') === 0) {\n    symbolPath = graphic.makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else if (symbolType.indexOf('path://') === 0) {\n    symbolPath = graphic.makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else {\n    symbolPath = new SymbolClz({\n      shape: {\n        symbolType: symbolType,\n        x: x,\n        y: y,\n        width: w,\n        height: h\n      }\n    });\n  }\n  symbolPath.__isEmptyBrush = isEmpty;\n  // TODO Should deprecate setColor\n  symbolPath.setColor = symbolPathSetColor;\n  if (color) {\n    symbolPath.setColor(color);\n  }\n  return symbolPath;\n}\nexport function normalizeSymbolSize(symbolSize) {\n  if (!isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n  return [symbolSize[0] || 0, symbolSize[1] || 0];\n}\nexport function normalizeSymbolOffset(symbolOffset, symbolSize) {\n  if (symbolOffset == null) {\n    return;\n  }\n  if (!isArray(symbolOffset)) {\n    symbolOffset = [symbolOffset, symbolOffset];\n  }\n  return [parsePercent(symbolOffset[0], symbolSize[0]) || 0, parsePercent(retrieve2(symbolOffset[1], symbolOffset[0]), symbolSize[1]) || 0];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport WeakMap from 'zrender/lib/core/WeakMap.js';\nimport LRU from 'zrender/lib/core/LRU.js';\nimport { defaults, map, isArray, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { getLeastCommonMultiple } from './number.js';\nimport { createSymbol } from './symbol.js';\nimport { brushSingle } from 'zrender/lib/canvas/graphic.js';\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar decalMap = new WeakMap();\nvar decalCache = new LRU(100);\nvar decalKeys = ['symbol', 'symbolSize', 'symbolKeepAspect', 'color', 'backgroundColor', 'dashArrayX', 'dashArrayY', 'maxTileWidth', 'maxTileHeight'];\n/**\r\n * Create or update pattern image from decal options\r\n *\r\n * @param {InnerDecalObject | 'none'} decalObject decal options, 'none' if no decal\r\n * @return {Pattern} pattern with generated image, null if no decal\r\n */\nexport function createOrUpdatePatternFromDecal(decalObject, api) {\n  if (decalObject === 'none') {\n    return null;\n  }\n  var dpr = api.getDevicePixelRatio();\n  var zr = api.getZr();\n  var isSVG = zr.painter.type === 'svg';\n  if (decalObject.dirty) {\n    decalMap[\"delete\"](decalObject);\n  }\n  var oldPattern = decalMap.get(decalObject);\n  if (oldPattern) {\n    return oldPattern;\n  }\n  var decalOpt = defaults(decalObject, {\n    symbol: 'rect',\n    symbolSize: 1,\n    symbolKeepAspect: true,\n    color: 'rgba(0, 0, 0, 0.2)',\n    backgroundColor: null,\n    dashArrayX: 5,\n    dashArrayY: 5,\n    rotation: 0,\n    maxTileWidth: 512,\n    maxTileHeight: 512\n  });\n  if (decalOpt.backgroundColor === 'none') {\n    decalOpt.backgroundColor = null;\n  }\n  var pattern = {\n    repeat: 'repeat'\n  };\n  setPatternnSource(pattern);\n  pattern.rotation = decalOpt.rotation;\n  pattern.scaleX = pattern.scaleY = isSVG ? 1 : 1 / dpr;\n  decalMap.set(decalObject, pattern);\n  decalObject.dirty = false;\n  return pattern;\n  function setPatternnSource(pattern) {\n    var keys = [dpr];\n    var isValidKey = true;\n    for (var i = 0; i < decalKeys.length; ++i) {\n      var value = decalOpt[decalKeys[i]];\n      if (value != null && !isArray(value) && !isString(value) && !isNumber(value) && typeof value !== 'boolean') {\n        isValidKey = false;\n        break;\n      }\n      keys.push(value);\n    }\n    var cacheKey;\n    if (isValidKey) {\n      cacheKey = keys.join(',') + (isSVG ? '-svg' : '');\n      var cache = decalCache.get(cacheKey);\n      if (cache) {\n        isSVG ? pattern.svgElement = cache : pattern.image = cache;\n      }\n    }\n    var dashArrayX = normalizeDashArrayX(decalOpt.dashArrayX);\n    var dashArrayY = normalizeDashArrayY(decalOpt.dashArrayY);\n    var symbolArray = normalizeSymbolArray(decalOpt.symbol);\n    var lineBlockLengthsX = getLineBlockLengthX(dashArrayX);\n    var lineBlockLengthY = getLineBlockLengthY(dashArrayY);\n    var canvas = !isSVG && platformApi.createCanvas();\n    var svgRoot = isSVG && {\n      tag: 'g',\n      attrs: {},\n      key: 'dcl',\n      children: []\n    };\n    var pSize = getPatternSize();\n    var ctx;\n    if (canvas) {\n      canvas.width = pSize.width * dpr;\n      canvas.height = pSize.height * dpr;\n      ctx = canvas.getContext('2d');\n    }\n    brushDecal();\n    if (isValidKey) {\n      decalCache.put(cacheKey, canvas || svgRoot);\n    }\n    pattern.image = canvas;\n    pattern.svgElement = svgRoot;\n    pattern.svgWidth = pSize.width;\n    pattern.svgHeight = pSize.height;\n    /**\r\n     * Get minimum length that can make a repeatable pattern.\r\n     *\r\n     * @return {Object} pattern width and height\r\n     */\n    function getPatternSize() {\n      /**\r\n       * For example, if dash is [[3, 2], [2, 1]] for X, it looks like\r\n       * |---  ---  ---  ---  --- ...\r\n       * |-- -- -- -- -- -- -- -- ...\r\n       * |---  ---  ---  ---  --- ...\r\n       * |-- -- -- -- -- -- -- -- ...\r\n       * So the minimum length of X is 15,\r\n       * which is the least common multiple of `3 + 2` and `2 + 1`\r\n       * |---  ---  ---  |---  --- ...\r\n       * |-- -- -- -- -- |-- -- -- ...\r\n       */\n      var width = 1;\n      for (var i = 0, xlen = lineBlockLengthsX.length; i < xlen; ++i) {\n        width = getLeastCommonMultiple(width, lineBlockLengthsX[i]);\n      }\n      var symbolRepeats = 1;\n      for (var i = 0, xlen = symbolArray.length; i < xlen; ++i) {\n        symbolRepeats = getLeastCommonMultiple(symbolRepeats, symbolArray[i].length);\n      }\n      width *= symbolRepeats;\n      var height = lineBlockLengthY * lineBlockLengthsX.length * symbolArray.length;\n      if (process.env.NODE_ENV !== 'production') {\n        var warn = function (attrName) {\n          /* eslint-disable-next-line */\n          console.warn(\"Calculated decal size is greater than \" + attrName + \" due to decal option settings so \" + attrName + \" is used for the decal size. Please consider changing the decal option to make a smaller decal or set \" + attrName + \" to be larger to avoid incontinuity.\");\n        };\n        if (width > decalOpt.maxTileWidth) {\n          warn('maxTileWidth');\n        }\n        if (height > decalOpt.maxTileHeight) {\n          warn('maxTileHeight');\n        }\n      }\n      return {\n        width: Math.max(1, Math.min(width, decalOpt.maxTileWidth)),\n        height: Math.max(1, Math.min(height, decalOpt.maxTileHeight))\n      };\n    }\n    function brushDecal() {\n      if (ctx) {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        if (decalOpt.backgroundColor) {\n          ctx.fillStyle = decalOpt.backgroundColor;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n      }\n      var ySum = 0;\n      for (var i = 0; i < dashArrayY.length; ++i) {\n        ySum += dashArrayY[i];\n      }\n      if (ySum <= 0) {\n        // dashArrayY is 0, draw nothing\n        return;\n      }\n      var y = -lineBlockLengthY;\n      var yId = 0;\n      var yIdTotal = 0;\n      var xId0 = 0;\n      while (y < pSize.height) {\n        if (yId % 2 === 0) {\n          var symbolYId = yIdTotal / 2 % symbolArray.length;\n          var x = 0;\n          var xId1 = 0;\n          var xId1Total = 0;\n          while (x < pSize.width * 2) {\n            var xSum = 0;\n            for (var i = 0; i < dashArrayX[xId0].length; ++i) {\n              xSum += dashArrayX[xId0][i];\n            }\n            if (xSum <= 0) {\n              // Skip empty line\n              break;\n            }\n            // E.g., [15, 5, 20, 5] draws only for 15 and 20\n            if (xId1 % 2 === 0) {\n              var size = (1 - decalOpt.symbolSize) * 0.5;\n              var left = x + dashArrayX[xId0][xId1] * size;\n              var top_1 = y + dashArrayY[yId] * size;\n              var width = dashArrayX[xId0][xId1] * decalOpt.symbolSize;\n              var height = dashArrayY[yId] * decalOpt.symbolSize;\n              var symbolXId = xId1Total / 2 % symbolArray[symbolYId].length;\n              brushSymbol(left, top_1, width, height, symbolArray[symbolYId][symbolXId]);\n            }\n            x += dashArrayX[xId0][xId1];\n            ++xId1Total;\n            ++xId1;\n            if (xId1 === dashArrayX[xId0].length) {\n              xId1 = 0;\n            }\n          }\n          ++xId0;\n          if (xId0 === dashArrayX.length) {\n            xId0 = 0;\n          }\n        }\n        y += dashArrayY[yId];\n        ++yIdTotal;\n        ++yId;\n        if (yId === dashArrayY.length) {\n          yId = 0;\n        }\n      }\n      function brushSymbol(x, y, width, height, symbolType) {\n        var scale = isSVG ? 1 : dpr;\n        var symbol = createSymbol(symbolType, x * scale, y * scale, width * scale, height * scale, decalOpt.color, decalOpt.symbolKeepAspect);\n        if (isSVG) {\n          var symbolVNode = zr.painter.renderOneToVNode(symbol);\n          if (symbolVNode) {\n            svgRoot.children.push(symbolVNode);\n          }\n        } else {\n          // Paint to canvas for all other renderers.\n          brushSingle(ctx, symbol);\n        }\n      }\n    }\n  }\n}\n/**\r\n * Convert symbol array into normalized array\r\n *\r\n * @param {string | (string | string[])[]} symbol symbol input\r\n * @return {string[][]} normolized symbol array\r\n */\nfunction normalizeSymbolArray(symbol) {\n  if (!symbol || symbol.length === 0) {\n    return [['rect']];\n  }\n  if (isString(symbol)) {\n    return [[symbol]];\n  }\n  var isAllString = true;\n  for (var i = 0; i < symbol.length; ++i) {\n    if (!isString(symbol[i])) {\n      isAllString = false;\n      break;\n    }\n  }\n  if (isAllString) {\n    return normalizeSymbolArray([symbol]);\n  }\n  var result = [];\n  for (var i = 0; i < symbol.length; ++i) {\n    if (isString(symbol[i])) {\n      result.push([symbol[i]]);\n    } else {\n      result.push(symbol[i]);\n    }\n  }\n  return result;\n}\n/**\r\n * Convert dash input into dashArray\r\n *\r\n * @param {DecalDashArrayX} dash dash input\r\n * @return {number[][]} normolized dash array\r\n */\nfunction normalizeDashArrayX(dash) {\n  if (!dash || dash.length === 0) {\n    return [[0, 0]];\n  }\n  if (isNumber(dash)) {\n    var dashValue = Math.ceil(dash);\n    return [[dashValue, dashValue]];\n  }\n  /**\r\n   * [20, 5] should be normalized into [[20, 5]],\r\n   * while [20, [5, 10]] should be normalized into [[20, 20], [5, 10]]\r\n   */\n  var isAllNumber = true;\n  for (var i = 0; i < dash.length; ++i) {\n    if (!isNumber(dash[i])) {\n      isAllNumber = false;\n      break;\n    }\n  }\n  if (isAllNumber) {\n    return normalizeDashArrayX([dash]);\n  }\n  var result = [];\n  for (var i = 0; i < dash.length; ++i) {\n    if (isNumber(dash[i])) {\n      var dashValue = Math.ceil(dash[i]);\n      result.push([dashValue, dashValue]);\n    } else {\n      var dashValue = map(dash[i], function (n) {\n        return Math.ceil(n);\n      });\n      if (dashValue.length % 2 === 1) {\n        // [4, 2, 1] means |----  -    -- |----  -    -- |\n        // so normalize it to be [4, 2, 1, 4, 2, 1]\n        result.push(dashValue.concat(dashValue));\n      } else {\n        result.push(dashValue);\n      }\n    }\n  }\n  return result;\n}\n/**\r\n * Convert dash input into dashArray\r\n *\r\n * @param {DecalDashArrayY} dash dash input\r\n * @return {number[]} normolized dash array\r\n */\nfunction normalizeDashArrayY(dash) {\n  if (!dash || typeof dash === 'object' && dash.length === 0) {\n    return [0, 0];\n  }\n  if (isNumber(dash)) {\n    var dashValue_1 = Math.ceil(dash);\n    return [dashValue_1, dashValue_1];\n  }\n  var dashValue = map(dash, function (n) {\n    return Math.ceil(n);\n  });\n  return dash.length % 2 ? dashValue.concat(dashValue) : dashValue;\n}\n/**\r\n * Get block length of each line. A block is the length of dash line and space.\r\n * For example, a line with [4, 1] has a dash line of 4 and a space of 1 after\r\n * that, so the block length of this line is 5.\r\n *\r\n * @param {number[][]} dash dash array of X or Y\r\n * @return {number[]} block length of each line\r\n */\nfunction getLineBlockLengthX(dash) {\n  return map(dash, function (line) {\n    return getLineBlockLengthY(line);\n  });\n}\nfunction getLineBlockLengthY(dash) {\n  var blockLength = 0;\n  for (var i = 0; i < dash.length; ++i) {\n    blockLength += dash[i];\n  }\n  if (dash.length % 2 === 1) {\n    // [4, 2, 1] means |----  -    -- |----  -    -- |\n    // So total length is (4 + 2 + 1) * 2\n    return blockLength * 2;\n  }\n  return blockLength;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport Eventful from 'zrender/lib/core/Eventful.js';\n;\nvar lifecycle = new Eventful();\nexport default lifecycle;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { error } from '../util/log.js';\n// Implementation of exported APIs. For example registerMap, getMap.\n// The implementations will be registered when installing the component.\n// Avoid these code being bundled to the core module.\nvar implsStore = {};\n// TODO Type\nexport function registerImpl(name, impl) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (implsStore[name]) {\n      error(\"Already has an implementation of \" + name + \".\");\n    }\n  }\n  implsStore[name] = impl;\n}\nexport function getImpl(name) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!implsStore[name]) {\n      error(\"Implementation of \" + name + \" doesn't exists.\");\n    }\n  }\n  return implsStore[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrender from 'zrender/lib/zrender.js';\nimport { assert, each, isFunction, isObject, indexOf, bind, clone, setAsPrimitive, extend, createHashMap, map, defaults, isDom, isArray, noop, isString, retrieve2 } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport timsort from 'zrender/lib/core/timsort.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport CoordinateSystemManager from './CoordinateSystem.js';\nimport OptionManager from '../model/OptionManager.js';\nimport backwardCompat from '../preprocessor/backwardCompat.js';\nimport dataStack from '../processor/dataStack.js';\nimport SeriesModel from '../model/Series.js';\nimport ComponentView from '../view/Component.js';\nimport ChartView from '../view/Chart.js';\nimport * as graphic from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, blurSeriesFromHighlightPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur, allLeaveBlur, findComponentHighDownDispatchers, blurComponent, handleGlobalMouseOverForHighDown, handleGlobalMouseOutForHighDown } from '../util/states.js';\nimport * as modelUtil from '../util/model.js';\nimport { throttle } from '../util/throttle.js';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from '../visual/style.js';\nimport loadingDefault from '../loading/default.js';\nimport Scheduler from './Scheduler.js';\nimport lightTheme from '../theme/light.js';\nimport darkTheme from '../theme/dark.js';\nimport { parseClassType } from '../util/clazz.js';\nimport { ECEventProcessor } from '../util/ECEventProcessor.js';\nimport { seriesSymbolTask, dataSymbolTask } from '../visual/symbol.js';\nimport { getVisualFromData, getItemVisualFromData } from '../visual/helper.js';\nimport { deprecateLog, deprecateReplaceLog, error, warn } from '../util/log.js';\nimport { handleLegacySelectEvents } from '../legacy/dataSelectAction.js';\nimport { registerExternalTransform } from '../data/helper/transform.js';\nimport { createLocaleObject, SYSTEM_LANG } from './locale.js';\nimport { findEventDispatcher } from '../util/event.js';\nimport decal from '../visual/decal.js';\nimport lifecycle from './lifecycle.js';\nimport { platformApi, setPlatformAPI } from 'zrender/lib/core/platform.js';\nimport { getImpl } from './impl.js';\nexport var version = '5.6.0';\nexport var dependencies = {\n  zrender: '5.6.1'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800;\n// Some data processors depends on the stack result dimension (to calculate data extent).\n// So data stack stage should be in front of data processing stage.\nvar PRIORITY_PROCESSOR_DATASTACK = 900;\n// \"Data filter\" will block the stream, so it should be\n// put at the beginning of data processing.\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000;\n// Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n// overwrite the viusal result of component (like `visualMap`)\n// using data item specific setting (like itemStyle.xxx on data item)\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;\n// Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n// visual result like `symbolSize`.\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n};\n// Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\nvar PENDING_UPDATE = '__pendingUpdate';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n;\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  // `args[0]` is event name. Event name is all lowercase.\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\nvar MessageCenter = /** @class */function (_super) {\n  __extends(MessageCenter, _super);\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return MessageCenter;\n}(Eventful);\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off');\n// ---------------------------------------\n// Internal method names for class ECharts\n// ---------------------------------------\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar createExtensionAPI;\nvar enableConnect;\nvar markStatusToUpdate;\nvar applyChangedStates;\nvar ECharts = /** @class */function (_super) {\n  __extends(ECharts, _super);\n  function ECharts(dom,\n  // Theme name or themeOption.\n  theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {};\n    // Can't dispatch action during rendering procedure\n    _this._pendingActions = [];\n    opts = opts || {};\n    // Get theme by name\n    if (isString(theme)) {\n      theme = themeStorage[theme];\n    }\n    _this._dom = dom;\n    var defaultRenderer = 'canvas';\n    var defaultCoarsePointer = 'auto';\n    var defaultUseDirtyRect = false;\n    if (process.env.NODE_ENV !== 'production') {\n      var root = /* eslint-disable-next-line */\n      env.hasGlobalWindow ? window : global;\n      if (root) {\n        defaultRenderer = retrieve2(root.__ECHARTS__DEFAULT__RENDERER__, defaultRenderer);\n        defaultCoarsePointer = retrieve2(root.__ECHARTS__DEFAULT__COARSE_POINTER, defaultCoarsePointer);\n        defaultUseDirtyRect = retrieve2(root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__, defaultUseDirtyRect);\n      }\n    }\n    if (opts.ssr) {\n      zrender.registerSSRDataGetter(function (el) {\n        var ecData = getECData(el);\n        var dataIndex = ecData.dataIndex;\n        if (dataIndex == null) {\n          return;\n        }\n        var hashMap = createHashMap();\n        hashMap.set('series_index', ecData.seriesIndex);\n        hashMap.set('data_index', dataIndex);\n        ecData.ssrType && hashMap.set('ssr_type', ecData.ssrType);\n        return hashMap;\n      });\n    }\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      ssr: opts.ssr,\n      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),\n      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),\n      pointerSize: opts.pointerSize\n    });\n    _this._ssr = opts.ssr;\n    // Expect 60 fps.\n    _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n    theme = clone(theme);\n    theme && backwardCompat(theme, true);\n    _this._theme = theme;\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this);\n    // Sort on demand\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter();\n    // Init mouse events\n    _this._initEvents();\n    // In case some people write `window.onresize = chart.resize`\n    _this.resize = bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this);\n    // ECharts instance can be used as value.\n    setAsPrimitive(_this);\n    return _this;\n  }\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n    applyChangedStates(this);\n    var scheduler = this._scheduler;\n    // Lazy update\n    if (this[PENDING_UPDATE]) {\n      var silent = this[PENDING_UPDATE].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        throw e;\n      }\n      // At present, in each frame, zrender performs:\n      //   (1) animation step forward.\n      //   (2) trigger('frame') (where this `_onframe` is called)\n      //   (3) zrender flush (render).\n      // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n      // will render the final state of the elements before the real animation started.\n      this._zr.flush();\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[PENDING_UPDATE] = null;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n    // Avoid do both lazy update and progress in one frame.\n    else if (scheduler.unfinished) {\n      // Stream progress.\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel);\n        // Currently dataProcessorFuncs do not check threshold.\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel);\n        // Do not update coordinate system here. Because that coord system update in\n        // each frame is not a good user experience. So we follow the rule that\n        // the extent of the coordinate system is determined in the first frame (the\n        // frame is executed immediately after task reset.\n        // this._coordSysMgr.update(ecModel, api);\n        // console.log('--- ec frame visual ---', remainTime);\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain', {});\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished);\n      // Call flush explicitly for trigger finished event.\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      }\n      // Else, zr flushing be ensue within the same frame,\n      // because zr flushing is after onframe event.\n    }\n  };\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n  ECharts.prototype.isSSR = function () {\n    return this._ssr;\n  };\n  /* eslint-disable-next-line */\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setOption` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.ssr = this._ssr;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n    var updateParams = {\n      seriesTransition: transitionOpt,\n      optionChanged: true\n    };\n    if (lazyUpdate) {\n      this[PENDING_UPDATE] = {\n        silent: silent,\n        updateParams: updateParams\n      };\n      this[IN_MAIN_PROCESS_KEY] = false;\n      // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n      // It should wake it up to make sure zrender start to render at the next frame.\n      this.getZr().wakeUp();\n    } else {\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, updateParams);\n      } catch (e) {\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      }\n      // Ensure zr refresh sychronously, and then pixel in canvas can be\n      // fetched after `setOption`.\n      if (!this._ssr) {\n        // not use flush when using ssr mode.\n        this._zr.flush();\n      }\n      this[PENDING_UPDATE] = null;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n  /**\r\n   * @deprecated\r\n   */\n  ECharts.prototype.setTheme = function () {\n    deprecateLog('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n  };\n  // We don't want developers to use getModel directly.\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr\n    /* eslint-disable-next-line */ || env.hasGlobalWindow && window.devicePixelRatio || 1;\n  };\n  /**\r\n   * Get canvas which has all thing rendered\r\n   * @deprecated Use renderToCanvas instead.\r\n   */\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n    }\n    return this.renderToCanvas(opts);\n  };\n  ECharts.prototype.renderToCanvas = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'canvas') {\n        throw new Error('renderToCanvas can only be used in the canvas renderer.');\n      }\n    }\n    return painter.getRenderedCanvas({\n      backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n    });\n  };\n  ECharts.prototype.renderToSVGString = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'svg') {\n        throw new Error('renderToSVGString can only be used in the svg renderer.');\n      }\n    }\n    return painter.renderToString({\n      useViewBox: opts.useViewBox\n    });\n  };\n  /**\r\n   * Get svg data url\r\n   */\n  ECharts.prototype.getSvgDataURL = function () {\n    if (!env.svgSupported) {\n      return;\n    }\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList();\n    // Stop animations\n    each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n      each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = platformApi.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        // Background between the charts\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n  ECharts.prototype.convertToPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertToPixel', finder, value);\n  };\n  ECharts.prototype.convertFromPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value);\n  };\n  /**\r\n   * Is the specified coordinate systems or components contain the given pixel point.\r\n   * @param {Array|number} value\r\n   * @return {boolean} result\r\n   */\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n  /**\r\n   * Get visual from series or data.\r\n   * @param finder\r\n   *        If string, e.g., 'series', means {seriesIndex: 0}.\r\n   *        If Object, could contain some of these properties below:\r\n   *        {\r\n   *            seriesIndex / seriesId / seriesName,\r\n   *            dataIndex / dataIndexInside\r\n   *        }\r\n   *        If dataIndex is not specified, series visual will be fetched,\r\n   *        but not data item visual.\r\n   *        If all of seriesIndex, seriesId, seriesName are not specified,\r\n   *        visual will be fetched from first series.\r\n   * @param visualType 'color', 'symbol', 'symbolSize'\r\n   */\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        warn('There is no specified series model');\n      }\n    }\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n  /**\r\n   * Get view of corresponding component model\r\n   */\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n  /**\r\n   * Get view of corresponding series model\r\n   */\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function (e) {\n        var ecModel = _this.getModel();\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout';\n        // no e.target when 'globalout'.\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType, el) || {};\n              return true;\n            }\n            // If element has custom eventData of components\n            else if (ecData.eventData) {\n              params = extend({}, ecData.eventData);\n              return true;\n            }\n          }, true);\n        }\n        // Contract: if params prepared in mouse event,\n        // these properties must be specified:\n        // {\n        //    componentType: string (component main type)\n        //    componentIndex: number\n        // }\n        // Otherwise event query can not work.\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex;\n          // Special handling for historic reason: when trigger by\n          // markLine/markPoint/markArea, the componentType is\n          // 'markLine'/'markPoint'/'markArea', but we should better\n          // enable them to be queried by seriesIndex, since their\n          // option is set in each series.\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n          if (process.env.NODE_ENV !== 'production') {\n            // `event.componentType` and `event[componentTpype + 'Index']` must not\n            // be missed, otherwise there is no way to distinguish source component.\n            // See `dataFormat.getDataParams`.\n            if (!isGlobalOut && !(model && view)) {\n              warn('model or view can not be found by params');\n            }\n          }\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n          _this.trigger(eveName, params);\n        }\n      };\n      // Consider that some component (like tooltip, brush, ...)\n      // register zr event handler, but user event handler might\n      // do anything, such as call `setOption` or `dispatchAction`,\n      // which probably update any of the content and probably\n      // cause problem if it is called previous other inner handlers.\n      handler.zrEventfulCallAtLast = true;\n      _this._zr.on(eveName, handler, _this);\n    });\n    each(eventActionMap, function (actionType, eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    // Extra events\n    // TODO register?\n    each(['selectchanged'], function (eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    handleLegacySelectEvents(this._messageCenter, this, this._api);\n  };\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this.setOption({\n      series: []\n    }, true);\n  };\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._disposed = true;\n    var dom = this.getDom();\n    if (dom) {\n      modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    }\n    var chart = this;\n    var api = chart._api;\n    var ecModel = chart._model;\n    each(chart._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(chart._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    });\n    // Dispose after all views disposed\n    chart._zr.dispose();\n    // Set properties to null.\n    // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n    delete instances[chart.id];\n  };\n  /**\r\n   * Resize the chart\r\n   */\n  ECharts.prototype.resize = function (opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`resize` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._zr.resize(opts);\n    var ecModel = this._model;\n    // Resize loading effect\n    this._loadingFX && this._loadingFX.resize();\n    if (!ecModel) {\n      return;\n    }\n    var needPrepare = ecModel.resetOption('media');\n    var silent = opts && opts.silent;\n    // There is some real cases that:\n    // chart.setOption(option, { lazyUpdate: true });\n    // chart.resize();\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n      needPrepare = true;\n      this[PENDING_UPDATE] = null;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    try {\n      needPrepare && prepare(this);\n      updateMethods.update.call(this, {\n        type: 'resize',\n        animation: extend({\n          // Disable animation\n          duration: 0\n        }, opts && opts.animation)\n      });\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n    name = name || 'default';\n    this.hideLoading();\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Loading effects ' + name + ' not exists.');\n      }\n      return;\n    }\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n  /**\r\n   * Hide loading effect\r\n   */\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = extend({}, eventObj);\n    payload.type = eventActionMap[eventObj.type];\n    return payload;\n  };\n  /**\r\n   * @param opt If pass boolean, means opt.silent\r\n   * @param opt.silent Default `false`. Whether trigger events.\r\n   * @param opt.flush Default `undefined`.\r\n   *        true: Flush immediately, and then pixel in canvas can be fetched\r\n   *            immediately. Caution: it might affect performance.\r\n   *        false: Not flush.\r\n   *        undefined: Auto decide whether perform flush.\r\n   */\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n    if (!actions[payload.type]) {\n      return;\n    }\n    // Avoid dispatch action before setOption. Especially in `connect`.\n    if (!this._model) {\n      return;\n    }\n    // May dispatchAction in rendering procedure\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n      return;\n    }\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      // In WeChat embedded browser, `requestAnimationFrame` and `setInterval`\n      // hang when sliding page (on touch event), which cause that zr does not\n      // refresh until user interaction finished, which is not expected.\n      // But `dispatchAction` may be called too frequently when pan on touch\n      // screen, which impacts performance if do not throttle them.\n      this._throttledZrFlush();\n    }\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.updateLabelLayout = function () {\n    lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n      // Not adding series labels.\n      // TODO\n      updatedSeries: []\n    });\n  };\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n    seriesModel.appendData(params);\n    // Note: `appendData` does not support that update extent of coordinate\n    // system, util some scenario require that. In the expected usage of\n    // `appendData`, the initial extent of coordinate system should better\n    // be fixed by axis `min`/`max` setting or initial data, otherwise if\n    // the extent changed while `appendData`, the location of the painted\n    // graphic elements have to be changed, which make the usage of\n    // `appendData` meaningless.\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  };\n  // A work around for no `internal` modifier in ts yet but\n  // need to strictly hide private methods to JS users.\n  ECharts.internalField = function () {\n    prepare = function (ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n    /**\r\n     * Prepare view instances of charts and components\r\n     */\n    prepareView = function (ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n      function doPrepare(model) {\n        // By default view will be reused if possible for the case that `setOption` with \"notMerge\"\n        // mode and need to enable transition animation. (Usually, when they have the same id, or\n        // especially no id but have the same type & name & index. See the `model.id` generation\n        // rule in `makeIdAndName` and `viewId` generation rule here).\n        // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n        // the new model has nothing to do with the old model.\n        var requireNewView = model.__requireNewView;\n        // This command should not work twice.\n        model.__requireNewView = false;\n        // Consider: id same and type changed.\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) :\n          // FIXME:TS\n          // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n          // For backward compat, still support a chart type declared as only subType\n          // like \"liquidfill\", but recommend \"series.liquidfill\"\n          // But need a base class to make a type series.\n          ChartView.getClass(classType.sub);\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload);\n      // broadcast\n      if (!mainType) {\n        // FIXME\n        // Chart will not be update directly here, except set dirty.\n        // But there is no such scenario now.\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType); // subType may be '' by parseClassType;\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      }\n      // If dispatchAction before setOption, do nothing.\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        if (isHighDownPayload(payload)) {\n          if (model instanceof SeriesModel) {\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n              blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n            }\n          } else {\n            var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n              focusSelf = _a.focusSelf,\n              dispatchers = _a.dispatchers;\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n              blurComponent(model.mainType, model.componentIndex, ecIns._api);\n            }\n            // PENDING:\n            // Whether to put this \"enter emphasis\" code in `ComponentView`,\n            // which will be the same as `ChartView` but might be not necessary\n            // and will be far from this logic.\n            if (dispatchers) {\n              each(dispatchers, function (dispatcher) {\n                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n              });\n            }\n          }\n        } else if (isSelectChangePayload(payload)) {\n          // TODO geo\n          if (model instanceof SeriesModel) {\n            toggleSelectionFromPayload(model, payload, ecIns._api);\n            updateSeriesElementSelection(model);\n            markStatusToUpdate(ecIns);\n          }\n        }\n      }, ecIns);\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n      }, ecIns);\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n    updateMethods = {\n      prepareAndUpdate: function (payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload, {\n          // Needs to mark option changed if newOption is given.\n          // It's from MagicType.\n          // TODO If use a separate flag optionChanged in payload?\n          optionChanged: payload.newOption != null\n        });\n      },\n      update: function (payload, updateParams) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel);\n        // TODO\n        // Save total ecModel here for undo/redo (after restoring data and before processing data).\n        // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n        // Create new coordinate system each update\n        // In LineView may save the old coordinate system and use it to get the original point.\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload);\n        // Current stream render is not supported in data process. So we can update\n        // stream modes after data processing, where the filtered data is used to\n        // determine whether to use progressive rendering.\n        updateStreamModes(this, ecModel);\n        // We update stream modes before coordinate system updated, then the modes info\n        // can be fetched when coord sys updating (consider the barGrid extent fix). But\n        // the drawback is the full coord info can not be fetched. Fortunately this full\n        // coord is not required in stream mode updater currently.\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        render(this, ecModel, api, payload, updateParams);\n        // Set background\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        var darkMode = ecModel.get('darkMode');\n        zr.setBackgroundColor(backgroundColor);\n        // Force set dark mode.\n        if (darkMode != null && darkMode !== 'auto') {\n          zr.setDarkMode(darkMode);\n        }\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateTransform: function (payload) {\n        var _this = this;\n        var ecModel = this._model;\n        var api = this._api;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        // ChartView.markUpdateMethod(payload, 'updateTransform');\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n          var componentView = _this.getViewOfComponentModel(componentModel);\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        });\n        // Currently, not call render of components. Geo render cost a lot.\n        // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateView: function (payload) {\n        var ecModel = this._model;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n        render(this, ecModel, this._api, payload, {});\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateVisual: function (payload) {\n        // updateMethods.update.call(this, payload);\n        var _this = this;\n        var ecModel = this._model;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        // clear all visual\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        });\n        // Perform visual\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateLayout: function (payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n    doConvertPixel = function (ecIns, methodName, finder, value) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n      var ecModel = ecIns._model;\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n          return result;\n        }\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    };\n    updateStreamModes = function (ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n    doDispatchAction = function (payload, silent) {\n      var _this = this;\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionWrap = actions[payloadType];\n      var actionInfo = actionWrap.actionInfo;\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      var payloads = [payload];\n      var batched = false;\n      // Batch action\n      if (payload.batch) {\n        batched = true;\n        payloads = map(payload.batch, function (item) {\n          item = defaults(extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n      var eventObjBatch = [];\n      var eventObj;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isHighDown = isHighDownPayload(payload);\n      // Only leave blur once if there are multiple batches.\n      if (isHighDown) {\n        allLeaveBlur(this._api);\n      }\n      each(payloads, function (batchItem) {\n        // Action can specify the event by return it.\n        eventObj = actionWrap.action(batchItem, _this._model, _this._api);\n        // Emit event outside\n        eventObj = eventObj || extend({}, batchItem);\n        // Convert type to eventType\n        eventObj.type = actionInfo.event || eventObj.type;\n        eventObjBatch.push(eventObj);\n        // light update does not perform data process, layout and visual.\n        if (isHighDown) {\n          var _a = modelUtil.preParseFinder(payload),\n            queryOptionMap = _a.queryOptionMap,\n            mainTypeSpecified = _a.mainTypeSpecified;\n          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n          updateDirectly(_this, updateMethod, batchItem, componentMainType);\n          markStatusToUpdate(_this);\n        } else if (isSelectChange) {\n          // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n          // geo still use 'geoselect'.\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n      if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n        try {\n          // Still dirty\n          if (this[PENDING_UPDATE]) {\n            prepare(this);\n            updateMethods.update.call(this, payload);\n            this[PENDING_UPDATE] = null;\n          } else {\n            updateMethods[updateMethod].call(this, payload);\n          }\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        }\n      }\n      // Follow the rule of action batch\n      if (batched) {\n        eventObj = {\n          type: actionInfo.event || payloadType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n      this[IN_MAIN_PROCESS_KEY] = false;\n      if (!silent) {\n        var messageCenter = this._messageCenter;\n        messageCenter.trigger(eventObj.type, eventObj);\n        // Extra triggered 'selectchanged' event\n        if (isSelectChange) {\n          var newObj = {\n            type: 'selectchanged',\n            escapeConnect: escapeConnect,\n            selected: getAllSelectedIndices(ecModel),\n            isFromClick: payload.isFromClick || false,\n            fromAction: payload.type,\n            fromActionPayload: payload\n          };\n          messageCenter.trigger(newObj.type, newObj);\n        }\n      }\n    };\n    flushPendingActions = function (silent) {\n      var pendingActions = this._pendingActions;\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n    triggerUpdatedEvent = function (silent) {\n      !silent && this.trigger('updated');\n    };\n    /**\r\n     * Event `rendered` is triggered when zr\r\n     * rendered. It is useful for realtime\r\n     * snapshot (reflect animation).\r\n     *\r\n     * Event `finished` is triggered when:\r\n     * (1) zrender rendering finished.\r\n     * (2) initial animation finished.\r\n     * (3) progressive rendering finished.\r\n     * (4) no pending action.\r\n     * (5) no delayed setOption needs to be processed.\r\n     */\n    bindRenderedEvent = function (zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params);\n        // The `finished` event should not be triggered repeatedly,\n        // so it should only be triggered when rendering indeed happens\n        // in zrender. (Consider the case that dipatchAction is keep\n        // triggering when mouse move).\n        if (\n        // Although zr is dirty if initial animation is not finished\n        // and this checking is called on frame, we also check\n        // animation finished for robustness.\n        zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n    bindMouseEvent = function (zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n    function clearColorPalette(ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    }\n    ;\n    // Allocate zlevels for series and components\n    function allocateZlevels(ecModel) {\n      ;\n      var componentZLevels = [];\n      var seriesZLevels = [];\n      var hasSeparateZLevel = false;\n      ecModel.eachComponent(function (componentType, componentModel) {\n        var zlevel = componentModel.get('zlevel') || 0;\n        var z = componentModel.get('z') || 0;\n        var zlevelKey = componentModel.getZLevelKey();\n        hasSeparateZLevel = hasSeparateZLevel || !!zlevelKey;\n        (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n          zlevel: zlevel,\n          z: z,\n          idx: componentModel.componentIndex,\n          type: componentType,\n          key: zlevelKey\n        });\n      });\n      if (hasSeparateZLevel) {\n        // Series after component\n        var zLevels = componentZLevels.concat(seriesZLevels);\n        var lastSeriesZLevel_1;\n        var lastSeriesKey_1;\n        timsort(zLevels, function (a, b) {\n          if (a.zlevel === b.zlevel) {\n            return a.z - b.z;\n          }\n          return a.zlevel - b.zlevel;\n        });\n        each(zLevels, function (item) {\n          var componentModel = ecModel.getComponent(item.type, item.idx);\n          var zlevel = item.zlevel;\n          var key = item.key;\n          if (lastSeriesZLevel_1 != null) {\n            zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n          }\n          if (key) {\n            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = key;\n          } else if (lastSeriesKey_1) {\n            if (zlevel === lastSeriesZLevel_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = '';\n          }\n          lastSeriesZLevel_1 = zlevel;\n          componentModel.setZLevel(zlevel);\n        });\n      }\n    }\n    render = function (ecIns, ecModel, api, payload, updateParams) {\n      allocateZlevels(ecModel);\n      renderComponents(ecIns, ecModel, api, payload, updateParams);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload, updateParams);\n      // Remove groups of unrendered charts\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n    renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n    /**\r\n     * Render each chart and component\r\n     */\n    renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n      // Render all charts\n      var scheduler = ecIns._scheduler;\n      updateParams = extend(updateParams || {}, {\n        updatedSeries: ecModel.getSeries()\n      });\n      // TODO progressive?\n      lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload);\n        // TODO states on marker.\n        clearStates(seriesModel, chartView);\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n        chartView.group.silent = !!seriesModel.get('silent');\n        // Should not call markRedraw on group, because it will disable zrender\n        // incremental render (always render from the __startIndex each frame)\n        // chartView.group.markRedraw();\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams);\n      // transition after label is layouted.\n      lifecycle.trigger('series:transition', ecModel, api, updateParams);\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        // Update Z after labels updated. Before applying states.\n        updateZ(seriesModel, chartView);\n        // NOTE: Update states after label is updated.\n        // label should be in normal status when layouting.\n        updateStates(seriesModel, chartView);\n      });\n      // If use hover layer\n      updateHoverLayerStatus(ecIns, ecModel);\n      lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n    };\n    markStatusToUpdate = function (ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true;\n      // Wake up zrender if it's sleep. Let it update states in the next frame.\n      ecIns.getZr().wakeUp();\n    };\n    applyChangedStates = function (ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n      ecIns.getZr().storage.traverse(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates;\n      // Keep other states.\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      }\n      // Only use states when it's exists.\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n      el.useStates(newStates);\n    }\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n          if (chartView.__alive) {\n            chartView.eachRendered(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n    ;\n    /**\r\n     * Update chart and blend.\r\n     */\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n      chartView.eachRendered(function (el) {\n        // FIXME marker and other components\n        if (!el.isGroup) {\n          // DON'T mark the element dirty. In case element is incremental and don't want to rerender.\n          el.style.blend = blendMode;\n        }\n      });\n    }\n    ;\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n      var z = model.get('z') || 0;\n      var zlevel = model.get('zlevel') || 0;\n      // Set z and zlevel\n      view.eachRendered(function (el) {\n        doUpdateZ(el, z, zlevel, -Infinity);\n        // Don't traverse the children because it has been traversed in _updateZ.\n        return true;\n      });\n    }\n    ;\n    function doUpdateZ(el, z, zlevel, maxZ2) {\n      // Group may also have textContent\n      var label = el.getTextContent();\n      var labelLine = el.getTextGuideLine();\n      var isGroup = el.isGroup;\n      if (isGroup) {\n        // set z & zlevel of children elements of Group\n        var children = el.childrenRef();\n        for (var i = 0; i < children.length; i++) {\n          maxZ2 = Math.max(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n        }\n      } else {\n        // not Group\n        el.z = z;\n        el.zlevel = zlevel;\n        maxZ2 = Math.max(el.z2, maxZ2);\n      }\n      // always set z and zlevel if label/labelLine exists\n      if (label) {\n        label.z = z;\n        label.zlevel = zlevel;\n        // lift z2 of text content\n        // TODO if el.emphasis.z2 is spcefied, what about textContent.\n        isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n      }\n      if (labelLine) {\n        var textGuideLineConfig = el.textGuideLineConfig;\n        labelLine.z = z;\n        labelLine.zlevel = zlevel;\n        isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n      }\n      return maxZ2;\n    }\n    // Clear states without animation.\n    // TODO States on component.\n    function clearStates(model, view) {\n      view.eachRendered(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        }\n        // TODO If el is incremental.\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing')\n        // additive: stateAnimationModel.get('additive')\n      } : null;\n      view.eachRendered(function (el) {\n        if (el.states && el.states.emphasis) {\n          // Not applied on removed elements, it may still in fading.\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          }\n          // Only updated on changed element. In case element is incremental and don't want to rerender.\n          // TODO, a more proper way?\n          if (el.__dirty) {\n            var prevStates = el.prevStates;\n            // Restore states without animation\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          }\n          // Update state transition and enable animation again.\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine();\n            // TODO Is it necessary to animate label?\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          }\n          // Use highlighted and selected flag to toggle states.\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n    ;\n    createExtensionAPI = function (ecIns) {\n      return new (/** @class */function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n            el = el.parent;\n          }\n        };\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n    enableConnect = function (chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n      each(eventActionMap, function (actionType, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n  }();\n  return ECharts;\n}(Eventful);\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n/**\r\n * @deprecated\r\n */\n// @ts-ignore\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n  function wrapped() {\n    var args2 = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n    cb && cb.apply && cb.apply(this, args2);\n    // @ts-ignore\n    self.off(eventName, wrapped);\n  }\n  ;\n  // @ts-ignore\n  this.on.call(this, eventName, wrapped, ctx);\n};\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('Instance ' + id + ' has been disposed');\n  }\n}\nvar actions = {};\n/**\r\n * Map eventType to actionType\r\n */\nvar eventActionMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n/**\r\n * @param opts.devicePixelRatio Use window.devicePixelRatio by default\r\n * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\r\n * @param opts.width Use clientWidth of the input `dom` by default.\r\n *        Can be 'auto' (the same as null/undefined)\r\n * @param opts.height Use clientHeight of the input `dom` by default.\r\n *        Can be 'auto' (the same as null/undefined)\r\n * @param opts.locale Specify the locale.\r\n * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\r\n */\nexport function init(dom, theme, opts) {\n  var isClient = !(opts && opts.ssr);\n  if (isClient) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!dom) {\n        throw new Error('Initialize failed: invalid dom.');\n      }\n    }\n    var existInstance = getInstanceByDom(dom);\n    if (existInstance) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('There is a chart instance already initialized on the dom.');\n      }\n      return existInstance;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n        warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n      }\n    }\n  }\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  isClient && modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  lifecycle.trigger('afterinit', chart);\n  return chart;\n}\n/**\r\n * @usage\r\n * (A)\r\n * ```js\r\n * let chart1 = echarts.init(dom1);\r\n * let chart2 = echarts.init(dom2);\r\n * chart1.group = 'xxx';\r\n * chart2.group = 'xxx';\r\n * echarts.connect('xxx');\r\n * ```\r\n * (B)\r\n * ```js\r\n * let chart1 = echarts.init(dom1);\r\n * let chart2 = echarts.init(dom2);\r\n * echarts.connect('xxx', [chart1, chart2]);\r\n * ```\r\n */\nexport function connect(groupId) {\n  // Is array of charts\n  if (isArray(groupId)) {\n    var charts = groupId;\n    groupId = null;\n    // If any chart has group\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n  connectedGroups[groupId] = true;\n  return groupId;\n}\nexport function disconnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\r\n * Alias and backward compatibility\r\n * @deprecated\r\n */\nexport var disConnect = disconnect;\n/**\r\n * Dispose a chart instance\r\n */\nexport function dispose(chart) {\n  if (isString(chart)) {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\n/**\r\n * Register theme\r\n */\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\r\n * Register option preprocessor\r\n */\nexport function registerPreprocessor(preprocessorFunc) {\n  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n    optionPreprocessorFuncs.push(preprocessorFunc);\n  }\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\n/**\r\n * Register postIniter\r\n * @param {Function} postInitFunc\r\n */\nexport function registerPostInit(postInitFunc) {\n  registerUpdateLifecycle('afterinit', postInitFunc);\n}\n/**\r\n * Register postUpdater\r\n * @param {Function} postUpdateFunc\r\n */\nexport function registerPostUpdate(postUpdateFunc) {\n  registerUpdateLifecycle('afterupdate', postUpdateFunc);\n}\nexport function registerUpdateLifecycle(name, cb) {\n  lifecycle.on(name, cb);\n}\nexport function registerAction(actionInfo, eventName, action) {\n  if (isFunction(eventName)) {\n    action = eventName;\n    eventName = '';\n  }\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0];\n  // Event name is all lowercase\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event;\n  if (eventActionMap[eventName]) {\n    // Already registered.\n    return;\n  }\n  // Validate action type and event name.\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n  eventActionMap[eventName] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\n/**\r\n * Get dimensions of specified coordinate system.\r\n * @param {string} type\r\n * @return {Array.<string|Object>}\r\n */\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport { registerLocale } from './locale.js';\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\nexport { registerLayout, registerVisual };\nvar registeredTasks = [];\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    }\n    // Check duplicate\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  }\n  // Already registered\n  if (indexOf(registeredTasks, fn) >= 0) {\n    return;\n  }\n  registeredTasks.push(fn);\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\r\n * ZRender need a canvas context to do measureText.\r\n * But in node environment canvas may be created by node-canvas.\r\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\r\n *\r\n *\r\n * @deprecated use setPlatformAPI({ createCanvas }) instead.\r\n *\r\n * @example\r\n *     let Canvas = require('canvas');\r\n *     let echarts = require('echarts');\r\n *     echarts.setCanvasCreator(function () {\r\n *         // Small size is enough.\r\n *         return new Canvas(32, 32);\r\n *     });\r\n */\nexport function setCanvasCreator(creator) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n  }\n  setPlatformAPI({\n    createCanvas: creator\n  });\n}\n/**\r\n * The parameters and usage: see `geoSourceManager.registerMap`.\r\n * Compatible with previous `echarts.registerMap`.\r\n */\nexport function registerMap(mapName, geoJson, specialAreas) {\n  var registerMap = getImpl('registerMap');\n  registerMap && registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var getMap = getImpl('getMap');\n  return getMap && getMap(mapName);\n}\nexport var registerTransform = registerExternalTransform;\n/**\r\n * Globa dispatchAction to a specified chart instance.\r\n */\n// export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n//     if (!payload || !payload.chartId) {\n//         // Must have chartId to find chart\n//         return;\n//     }\n//     const chart = instances[payload.chartId];\n//     if (chart) {\n//         chart.dispatchAction(payload, opt);\n//     }\n// }\n// Builtin global visual\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault);\n// Default actions\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_ACTION_TYPE,\n  update: SELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: UNSELECT_ACTION_TYPE,\n  update: UNSELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: TOGGLE_SELECT_ACTION_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE\n}, noop);\n// Default theme\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme);\n// For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\nexport var dataTool = {};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createOrUpdatePatternFromDecal } from '../util/decal.js';\nexport default function decalVisual(ecModel, api) {\n  ecModel.eachRawSeries(function (seriesModel) {\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    if (data.hasItemVisual()) {\n      data.each(function (idx) {\n        var decal = data.getItemVisual(idx, 'decal');\n        if (decal) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          itemStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n        }\n      });\n    }\n    var decal = data.getVisual('decal');\n    if (decal) {\n      var style = data.getVisual('style');\n      style.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { registerPreprocessor, registerProcessor, registerPostInit, registerPostUpdate, registerAction, registerCoordinateSystem, registerLayout, registerVisual, registerTransform, registerLoading, registerMap, registerUpdateLifecycle, PRIORITY } from './core/echarts.js';\nimport ComponentView from './view/Component.js';\nimport ChartView from './view/Chart.js';\nimport ComponentModel from './model/Component.js';\nimport SeriesModel from './model/Series.js';\nimport { isFunction, indexOf, isArray, each } from 'zrender/lib/core/util.js';\nimport { registerImpl } from './core/impl.js';\nimport { registerPainter } from 'zrender/lib/zrender.js';\nvar extensions = [];\nvar extensionRegisters = {\n  registerPreprocessor: registerPreprocessor,\n  registerProcessor: registerProcessor,\n  registerPostInit: registerPostInit,\n  registerPostUpdate: registerPostUpdate,\n  registerUpdateLifecycle: registerUpdateLifecycle,\n  registerAction: registerAction,\n  registerCoordinateSystem: registerCoordinateSystem,\n  registerLayout: registerLayout,\n  registerVisual: registerVisual,\n  registerTransform: registerTransform,\n  registerLoading: registerLoading,\n  registerMap: registerMap,\n  registerImpl: registerImpl,\n  PRIORITY: PRIORITY,\n  ComponentModel: ComponentModel,\n  ComponentView: ComponentView,\n  SeriesModel: SeriesModel,\n  ChartView: ChartView,\n  // TODO Use ComponentModel and SeriesModel instead of Constructor\n  registerComponentModel: function (ComponentModelClass) {\n    ComponentModel.registerClass(ComponentModelClass);\n  },\n  registerComponentView: function (ComponentViewClass) {\n    ComponentView.registerClass(ComponentViewClass);\n  },\n  registerSeriesModel: function (SeriesModelClass) {\n    SeriesModel.registerClass(SeriesModelClass);\n  },\n  registerChartView: function (ChartViewClass) {\n    ChartView.registerClass(ChartViewClass);\n  },\n  registerSubTypeDefaulter: function (componentType, defaulter) {\n    ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\n  },\n  registerPainter: function (painterType, PainterCtor) {\n    registerPainter(painterType, PainterCtor);\n  }\n};\nexport function use(ext) {\n  if (isArray(ext)) {\n    // use([ChartLine, ChartBar]);\n    each(ext, function (singleExt) {\n      use(singleExt);\n    });\n    return;\n  }\n  if (indexOf(extensions, ext) >= 0) {\n    return;\n  }\n  extensions.push(ext);\n  if (isFunction(ext)) {\n    ext = {\n      install: ext\n    };\n  }\n  ext.install(extensionRegisters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nfunction dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {\n  return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;\n}\nfunction defaultKeyGetter(item) {\n  return item;\n}\nvar DataDiffer = /** @class */function () {\n  /**\r\n   * @param context Can be visited by this.context in callback.\r\n   */\n  function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context,\n  // By default: 'oneToOne'.\n  diffMode) {\n    this._old = oldArr;\n    this._new = newArr;\n    this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n    this._newKeyGetter = newKeyGetter || defaultKeyGetter;\n    // Visible in callback via `this.context`;\n    this.context = context;\n    this._diffModeMultiple = diffMode === 'multiple';\n  }\n  /**\r\n   * Callback function when add a data\r\n   */\n  DataDiffer.prototype.add = function (func) {\n    this._add = func;\n    return this;\n  };\n  /**\r\n   * Callback function when update a data\r\n   */\n  DataDiffer.prototype.update = function (func) {\n    this._update = func;\n    return this;\n  };\n  /**\r\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\r\n   */\n  DataDiffer.prototype.updateManyToOne = function (func) {\n    this._updateManyToOne = func;\n    return this;\n  };\n  /**\r\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\r\n   */\n  DataDiffer.prototype.updateOneToMany = function (func) {\n    this._updateOneToMany = func;\n    return this;\n  };\n  /**\r\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\r\n   */\n  DataDiffer.prototype.updateManyToMany = function (func) {\n    this._updateManyToMany = func;\n    return this;\n  };\n  /**\r\n   * Callback function when remove a data\r\n   */\n  DataDiffer.prototype.remove = function (func) {\n    this._remove = func;\n    return this;\n  };\n  DataDiffer.prototype.execute = function () {\n    this[this._diffModeMultiple ? '_executeMultiple' : '_executeOneToOne']();\n  };\n  DataDiffer.prototype._executeOneToOne = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var newDataIndexMap = {};\n    var oldDataKeyArr = new Array(oldArr.length);\n    var newDataKeyArr = new Array(newArr.length);\n    this._initIndexMap(oldArr, null, oldDataKeyArr, '_oldKeyGetter');\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n    for (var i = 0; i < oldArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      // idx can never be empty array here. see 'set null' logic below.\n      if (newIdxMapValLen > 1) {\n        // Consider there is duplicate key (for example, use dataItem.name as key).\n        // We should make sure every item in newArr and oldArr can be visited.\n        var newIdx = newIdxMapVal.shift();\n        if (newIdxMapVal.length === 1) {\n          newDataIndexMap[oldKey] = newIdxMapVal[0];\n        }\n        this._update && this._update(newIdx, i);\n      } else if (newIdxMapValLen === 1) {\n        newDataIndexMap[oldKey] = null;\n        this._update && this._update(newIdxMapVal, i);\n      } else {\n        this._remove && this._remove(i);\n      }\n    }\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  /**\r\n   * For example, consider the case:\r\n   * oldData: [o0, o1, o2, o3, o4, o5, o6, o7],\r\n   * newData: [n0, n1, n2, n3, n4, n5, n6, n7, n8],\r\n   * Where:\r\n   *     o0, o1, n0 has key 'a' (many to one)\r\n   *     o5, n4, n5, n6 has key 'b' (one to many)\r\n   *     o2, n1 has key 'c' (one to one)\r\n   *     n2, n3 has key 'd' (add)\r\n   *     o3, o4 has key 'e' (remove)\r\n   *     o6, o7, n7, n8 has key 'f' (many to many, treated as add and remove)\r\n   * Then:\r\n   *     (The order of the following directives are not ensured.)\r\n   *     this._updateManyToOne(n0, [o0, o1]);\r\n   *     this._updateOneToMany([n4, n5, n6], o5);\r\n   *     this._update(n1, o2);\r\n   *     this._remove(o3);\r\n   *     this._remove(o4);\r\n   *     this._remove(o6);\r\n   *     this._remove(o7);\r\n   *     this._add(n2);\r\n   *     this._add(n3);\r\n   *     this._add(n7);\r\n   *     this._add(n8);\r\n   */\n  DataDiffer.prototype._executeMultiple = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var oldDataIndexMap = {};\n    var newDataIndexMap = {};\n    var oldDataKeyArr = [];\n    var newDataKeyArr = [];\n    this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n    for (var i = 0; i < oldDataKeyArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var oldIdxMapVal = oldDataIndexMap[oldKey];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {\n        this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {\n        this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {\n        this._update && this._update(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1 && newIdxMapValLen > 1) {\n        this._updateManyToMany && this._updateManyToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1) {\n        for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {\n          this._remove && this._remove(oldIdxMapVal[i_1]);\n        }\n      } else {\n        this._remove && this._remove(oldIdxMapVal);\n      }\n    }\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  DataDiffer.prototype._performRestAdd = function (newDataKeyArr, newDataIndexMap) {\n    for (var i = 0; i < newDataKeyArr.length; i++) {\n      var newKey = newDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[newKey];\n      var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      if (idxMapValLen > 1) {\n        for (var j = 0; j < idxMapValLen; j++) {\n          this._add && this._add(newIdxMapVal[j]);\n        }\n      } else if (idxMapValLen === 1) {\n        this._add && this._add(newIdxMapVal);\n      }\n      // Support both `newDataKeyArr` are duplication removed or not removed.\n      newDataIndexMap[newKey] = null;\n    }\n  };\n  DataDiffer.prototype._initIndexMap = function (arr,\n  // Can be null.\n  map,\n  // In 'byKey', the output `keyArr` is duplication removed.\n  // In 'byIndex', the output `keyArr` is not duplication removed and\n  //     its indices are accurately corresponding to `arr`.\n  keyArr, keyGetterName) {\n    var cbModeMultiple = this._diffModeMultiple;\n    for (var i = 0; i < arr.length; i++) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var key = '_ec_' + this[keyGetterName](arr[i], i);\n      if (!cbModeMultiple) {\n        keyArr[i] = key;\n      }\n      if (!map) {\n        continue;\n      }\n      var idxMapVal = map[key];\n      var idxMapValLen = dataIndexMapValueLength(idxMapVal);\n      if (idxMapValLen === 0) {\n        // Simple optimize: in most cases, one index has one key,\n        // do not need array.\n        map[key] = i;\n        if (cbModeMultiple) {\n          keyArr.push(key);\n        }\n      } else if (idxMapValLen === 1) {\n        map[key] = [idxMapVal, i];\n      } else {\n        idxMapVal.push(i);\n      }\n    }\n  };\n  return DataDiffer;\n}();\nexport default DataDiffer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, createHashMap, assert, map } from 'zrender/lib/core/util.js';\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nvar DimensionUserOuput = /** @class */function () {\n  function DimensionUserOuput(encode, dimRequest) {\n    this._encode = encode;\n    this._schema = dimRequest;\n  }\n  DimensionUserOuput.prototype.get = function () {\n    return {\n      // Do not generate full dimension name until fist used.\n      fullDimensions: this._getFullDimensionNames(),\n      encode: this._encode\n    };\n  };\n  /**\r\n   * Get all data store dimension names.\r\n   * Theoretically a series data store is defined both by series and used dataset (if any).\r\n   * If some dimensions are omitted for performance reason in `this.dimensions`,\r\n   * the dimension name may not be auto-generated if user does not specify a dimension name.\r\n   * In this case, the dimension name is `null`/`undefined`.\r\n   */\n  DimensionUserOuput.prototype._getFullDimensionNames = function () {\n    if (!this._cachedDimNames) {\n      this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];\n    }\n    return this._cachedDimNames;\n  };\n  return DimensionUserOuput;\n}();\n;\nexport function summarizeDimensions(data, schema) {\n  var summary = {};\n  var encode = summary.encode = {};\n  var notExtraCoordDimMap = createHashMap();\n  var defaultedLabel = [];\n  var defaultedTooltip = [];\n  var userOutputEncode = {};\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var coordDim = dimItem.coordDim;\n    if (coordDim) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(VISUAL_DIMENSIONS.get(coordDim) == null);\n      }\n      var coordDimIndex = dimItem.coordDimIndex;\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n      if (!dimItem.isExtraCoord) {\n        notExtraCoordDimMap.set(coordDim, 1);\n        // Use the last coord dim (and label friendly) as default label,\n        // because when dataset is used, it is hard to guess which dimension\n        // can be value dimension. If both show x, y on label is not look good,\n        // and conventionally y axis is focused more.\n        if (mayLabelDimType(dimItem.type)) {\n          defaultedLabel[0] = dimName;\n        }\n        // User output encode do not contain generated coords.\n        // And it only has index. User can use index to retrieve value from the raw item array.\n        getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);\n      }\n      if (dimItem.defaultTooltip) {\n        defaultedTooltip.push(dimName);\n      }\n    }\n    VISUAL_DIMENSIONS.each(function (v, otherDim) {\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n      var dimIndex = dimItem.otherDims[otherDim];\n      if (dimIndex != null && dimIndex !== false) {\n        encodeArr[dimIndex] = dimItem.name;\n      }\n    });\n  });\n  var dataDimsOnCoord = [];\n  var encodeFirstDimNotExtra = {};\n  notExtraCoordDimMap.each(function (v, coordDim) {\n    var dimArr = encode[coordDim];\n    encodeFirstDimNotExtra[coordDim] = dimArr[0];\n    // Not necessary to remove duplicate, because a data\n    // dim canot on more than one coordDim.\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n  });\n  summary.dataDimsOnCoord = dataDimsOnCoord;\n  summary.dataDimIndicesOnCoord = map(dataDimsOnCoord, function (dimName) {\n    return data.getDimensionInfo(dimName).storeDimIndex;\n  });\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n  var encodeLabel = encode.label;\n  // FIXME `encode.label` is not recommended, because formatter cannot be set\n  // in this way. Use label.formatter instead. Maybe remove this approach someday.\n  if (encodeLabel && encodeLabel.length) {\n    defaultedLabel = encodeLabel.slice();\n  }\n  var encodeTooltip = encode.tooltip;\n  if (encodeTooltip && encodeTooltip.length) {\n    defaultedTooltip = encodeTooltip.slice();\n  } else if (!defaultedTooltip.length) {\n    defaultedTooltip = defaultedLabel.slice();\n  }\n  encode.defaultedLabel = defaultedLabel;\n  encode.defaultedTooltip = defaultedTooltip;\n  summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);\n  return summary;\n}\nfunction getOrCreateEncodeArr(encode, dim) {\n  if (!encode.hasOwnProperty(dim)) {\n    encode[dim] = [];\n  }\n  return encode[dim];\n}\n// FIXME:TS should be type `AxisType`\nexport function getDimensionTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\nfunction mayLabelDimType(dimType) {\n  // In most cases, ordinal and time do not suitable for label.\n  // Ordinal info can be displayed on axis. Time is too long.\n  return !(dimType === 'ordinal' || dimType === 'time');\n}\n// function findTheLastDimMayLabel(data) {\n//     // Get last value dim\n//     let dimensions = data.dimensions.slice();\n//     let valueType;\n//     let valueDim;\n//     while (dimensions.length && (\n//         valueDim = dimensions.pop(),\n//         valueType = data.getDimensionInfo(valueDim).type,\n//         valueType === 'ordinal' || valueType === 'time'\n//     )) {} // jshint ignore:line\n//     return valueDim;\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar SeriesDimensionDefine = /** @class */function () {\n  /**\r\n   * @param opt All of the fields will be shallow copied.\r\n   */\n  function SeriesDimensionDefine(opt) {\n    /**\r\n     * The format of `otherDims` is:\r\n     * ```js\r\n     * {\r\n     *     tooltip?: number\r\n     *     label?: number\r\n     *     itemName?: number\r\n     *     seriesName?: number\r\n     * }\r\n     * ```\r\n     *\r\n     * A `series.encode` can specified these fields:\r\n     * ```js\r\n     * encode: {\r\n     *     // \"3, 1, 5\" is the index of data dimension.\r\n     *     tooltip: [3, 1, 5],\r\n     *     label: [0, 3],\r\n     *     ...\r\n     * }\r\n     * ```\r\n     * `otherDims` is the parse result of the `series.encode` above, like:\r\n     * ```js\r\n     * // Suppose the index of this data dimension is `3`.\r\n     * this.otherDims = {\r\n     *     // `3` is at the index `0` of the `encode.tooltip`\r\n     *     tooltip: 0,\r\n     *     // `3` is at the index `1` of the `encode.label`\r\n     *     label: 1\r\n     * };\r\n     * ```\r\n     *\r\n     * This prop should never be `null`/`undefined` after initialized.\r\n     */\n    this.otherDims = {};\n    if (opt != null) {\n      zrUtil.extend(this, opt);\n    }\n  }\n  return SeriesDimensionDefine;\n}();\n;\nexport default SeriesDimensionDefine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { shouldRetrieveDataByName } from '../Source.js';\nvar inner = makeInner();\nvar dimTypeShort = {\n  float: 'f',\n  int: 'i',\n  ordinal: 'o',\n  number: 'n',\n  time: 't'\n};\n/**\r\n * Represents the dimension requirement of a series.\r\n *\r\n * NOTICE:\r\n * When there are too many dimensions in dataset and many series, only the used dimensions\r\n * (i.e., used by coord sys and declared in `series.encode`) are add to `dimensionDefineList`.\r\n * But users may query data by other unused dimension names.\r\n * In this case, users can only query data if and only if they have defined dimension names\r\n * via ec option, so we provide `getDimensionIndexFromSource`, which only query them from\r\n * `source` dimensions.\r\n */\nvar SeriesDataSchema = /** @class */function () {\n  function SeriesDataSchema(opt) {\n    this.dimensions = opt.dimensions;\n    this._dimOmitted = opt.dimensionOmitted;\n    this.source = opt.source;\n    this._fullDimCount = opt.fullDimensionCount;\n    this._updateDimOmitted(opt.dimensionOmitted);\n  }\n  SeriesDataSchema.prototype.isDimensionOmitted = function () {\n    return this._dimOmitted;\n  };\n  SeriesDataSchema.prototype._updateDimOmitted = function (dimensionOmitted) {\n    this._dimOmitted = dimensionOmitted;\n    if (!dimensionOmitted) {\n      return;\n    }\n    if (!this._dimNameMap) {\n      this._dimNameMap = ensureSourceDimNameMap(this.source);\n    }\n  };\n  /**\r\n   * @caution Can only be used when `dimensionOmitted: true`.\r\n   *\r\n   * Get index by user defined dimension name (i.e., not internal generate name).\r\n   * That is, get index from `dimensionsDefine`.\r\n   * If no `dimensionsDefine`, or no name get, return -1.\r\n   */\n  SeriesDataSchema.prototype.getSourceDimensionIndex = function (dimName) {\n    return retrieve2(this._dimNameMap.get(dimName), -1);\n  };\n  /**\r\n   * @caution Can only be used when `dimensionOmitted: true`.\r\n   *\r\n   * Notice: may return `null`/`undefined` if user not specify dimension names.\r\n   */\n  SeriesDataSchema.prototype.getSourceDimension = function (dimIndex) {\n    var dimensionsDefine = this.source.dimensionsDefine;\n    if (dimensionsDefine) {\n      return dimensionsDefine[dimIndex];\n    }\n  };\n  SeriesDataSchema.prototype.makeStoreSchema = function () {\n    var dimCount = this._fullDimCount;\n    var willRetrieveDataByName = shouldRetrieveDataByName(this.source);\n    var makeHashStrict = !shouldOmitUnusedDimensions(dimCount);\n    // If source don't have dimensions or series don't omit unsed dimensions.\n    // Generate from seriesDimList directly\n    var dimHash = '';\n    var dims = [];\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {\n      var property = void 0;\n      var type = void 0;\n      var ordinalMeta = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx];\n      // The list has been sorted by `storeDimIndex` asc.\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        property = willRetrieveDataByName ? seriesDimDef.name : null;\n        type = seriesDimDef.type;\n        ordinalMeta = seriesDimDef.ordinalMeta;\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n        if (sourceDimDef) {\n          property = willRetrieveDataByName ? sourceDimDef.name : null;\n          type = sourceDimDef.type;\n        }\n      }\n      dims.push({\n        property: property,\n        type: type,\n        ordinalMeta: ordinalMeta\n      });\n      // If retrieving data by index,\n      //   use <index, type, ordinalMeta> to determine whether data can be shared.\n      //   (Because in this case there might be no dimension name defined in dataset, but indices always exists).\n      //   (Indices are always 0, 1, 2, ..., so we can ignore them to shorten the hash).\n      // Otherwise if retrieving data by property name (like `data: [{aa: 123, bb: 765}, ...]`),\n      //   use <property, type, ordinalMeta> in hash.\n      if (willRetrieveDataByName && property != null\n      // For data stack, we have make sure each series has its own dim on this store.\n      // So we do not add property to hash to make sure they can share this store.\n      && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {\n        dimHash += makeHashStrict\n        // Use escape character '`' in case that property name contains '$'.\n        ? property.replace(/\\`/g, '`1').replace(/\\$/g, '`2')\n        // For better performance, when there are large dimensions, tolerant this defects that hardly meet.\n        : property;\n      }\n      dimHash += '$';\n      dimHash += dimTypeShort[type] || 'f';\n      if (ordinalMeta) {\n        dimHash += ordinalMeta.uid;\n      }\n      dimHash += '$';\n    }\n    // Source from endpoint(usually series) will be read differently\n    // when seriesLayoutBy or startIndex(which is affected by sourceHeader) are different.\n    // So we use this three props as key.\n    var source = this.source;\n    var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join('$$');\n    return {\n      dimensions: dims,\n      hash: hash\n    };\n  };\n  SeriesDataSchema.prototype.makeOutputDimensionNames = function () {\n    var result = [];\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {\n      var name_1 = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx];\n      // The list has been sorted by `storeDimIndex` asc.\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        if (!seriesDimDef.isCalculationCoord) {\n          name_1 = seriesDimDef.name;\n        }\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n        if (sourceDimDef) {\n          name_1 = sourceDimDef.name;\n        }\n      }\n      result.push(name_1);\n    }\n    return result;\n  };\n  SeriesDataSchema.prototype.appendCalculationDimension = function (dimDef) {\n    this.dimensions.push(dimDef);\n    dimDef.isCalculationCoord = true;\n    this._fullDimCount++;\n    // If append dimension on a data store, consider the store\n    // might be shared by different series, series dimensions not\n    // really map to store dimensions.\n    this._updateDimOmitted(true);\n  };\n  return SeriesDataSchema;\n}();\nexport { SeriesDataSchema };\nexport function isSeriesDataSchema(schema) {\n  return schema instanceof SeriesDataSchema;\n}\nexport function createDimNameMap(dimsDef) {\n  var dataDimNameMap = createHashMap();\n  for (var i = 0; i < (dimsDef || []).length; i++) {\n    var dimDefItemRaw = dimsDef[i];\n    var userDimName = isObject(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      dataDimNameMap.set(userDimName, i);\n    }\n  }\n  return dataDimNameMap;\n}\nexport function ensureSourceDimNameMap(source) {\n  var innerSource = inner(source);\n  return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));\n}\nexport function shouldOmitUnusedDimensions(dimCount) {\n  return dimCount > 30;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/* global Int32Array */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../model/Model.js';\nimport DataDiffer from './DataDiffer.js';\nimport { DefaultDataProvider } from './helper/dataProvider.js';\nimport { summarizeDimensions } from './helper/dimensionHelper.js';\nimport SeriesDimensionDefine from './SeriesDimensionDefine.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../util/types.js';\nimport { convertOptionIdName, isDataItemOption } from '../util/model.js';\nimport { setCommonECData } from '../util/innerStore.js';\nimport { isSourceInstance } from './Source.js';\nimport DataStore from './DataStore.js';\nimport { isSeriesDataSchema } from './helper/SeriesDataSchema.js';\nvar isObject = zrUtil.isObject;\nvar map = zrUtil.map;\nvar CtorInt32Array = typeof Int32Array === 'undefined' ? Array : Int32Array;\n// Use prefix to avoid index to be the same as otherIdList[idx],\n// which will cause weird update animation.\nvar ID_PREFIX = 'e\\0\\0';\nvar INDEX_NOT_FOUND = -1;\n// type SeriesDimensionIndex = DimensionIndex;\nvar TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_dimSummary', 'userOutput', '_rawData', '_dimValueGetter', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'];\nvar CLONE_PROPERTIES = ['_approximateExtent'];\n// -----------------------------\n// Internal method declarations:\n// -----------------------------\nvar prepareInvertedIndex;\nvar getId;\nvar getIdNameFromStore;\nvar normalizeDimensions;\nvar transferProperties;\nvar cloneListForMapAndSample;\nvar makeIdFromName;\nvar SeriesData = /** @class */function () {\n  /**\r\n   * @param dimensionsInput.dimensions\r\n   *        For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\r\n   *        Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\r\n   */\n  function SeriesData(dimensionsInput, hostModel) {\n    this.type = 'list';\n    this._dimOmitted = false;\n    this._nameList = [];\n    this._idList = [];\n    // Models of data option is stored sparse for optimizing memory cost\n    // Never used yet (not used yet).\n    // private _optionModels: Model[] = [];\n    // Global visual properties after visual coding\n    this._visual = {};\n    // Global layout properties.\n    this._layout = {};\n    // Item visual properties after visual coding\n    this._itemVisuals = [];\n    // Item layout properties after layout\n    this._itemLayouts = [];\n    // Graphic elements\n    this._graphicEls = [];\n    // key: dim, value: extent\n    this._approximateExtent = {};\n    this._calculationInfo = {};\n    // Having detected that there is data item is non primitive type\n    // (in type `OptionDataItemObject`).\n    // Like `data: [ { value: xx, itemStyle: {...} }, ...]`\n    // At present it only happen in `SOURCE_FORMAT_ORIGINAL`.\n    this.hasItemOption = false;\n    // Methods that create a new list based on this list should be listed here.\n    // Notice that those method should `RETURN` the new list.\n    this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'minmaxDownSample', 'lttbDownSample', 'map'];\n    // Methods that change indices of this list should be listed here.\n    this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\n    this.DOWNSAMPLE_METHODS = ['downSample', 'minmaxDownSample', 'lttbDownSample'];\n    var dimensions;\n    var assignStoreDimIdx = false;\n    if (isSeriesDataSchema(dimensionsInput)) {\n      dimensions = dimensionsInput.dimensions;\n      this._dimOmitted = dimensionsInput.isDimensionOmitted();\n      this._schema = dimensionsInput;\n    } else {\n      assignStoreDimIdx = true;\n      dimensions = dimensionsInput;\n    }\n    dimensions = dimensions || ['x', 'y'];\n    var dimensionInfos = {};\n    var dimensionNames = [];\n    var invertedIndicesMap = {};\n    var needsHasOwn = false;\n    var emptyObj = {};\n    for (var i = 0; i < dimensions.length; i++) {\n      // Use the original dimensions[i], where other flag props may exists.\n      var dimInfoInput = dimensions[i];\n      var dimensionInfo = zrUtil.isString(dimInfoInput) ? new SeriesDimensionDefine({\n        name: dimInfoInput\n      }) : !(dimInfoInput instanceof SeriesDimensionDefine) ? new SeriesDimensionDefine(dimInfoInput) : dimInfoInput;\n      var dimensionName = dimensionInfo.name;\n      dimensionInfo.type = dimensionInfo.type || 'float';\n      if (!dimensionInfo.coordDim) {\n        dimensionInfo.coordDim = dimensionName;\n        dimensionInfo.coordDimIndex = 0;\n      }\n      var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n      dimensionNames.push(dimensionName);\n      dimensionInfos[dimensionName] = dimensionInfo;\n      if (emptyObj[dimensionName] != null) {\n        needsHasOwn = true;\n      }\n      if (dimensionInfo.createInvertedIndices) {\n        invertedIndicesMap[dimensionName] = [];\n      }\n      if (otherDims.itemName === 0) {\n        this._nameDimIdx = i;\n      }\n      if (otherDims.itemId === 0) {\n        this._idDimIdx = i;\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(assignStoreDimIdx || dimensionInfo.storeDimIndex >= 0);\n      }\n      if (assignStoreDimIdx) {\n        dimensionInfo.storeDimIndex = i;\n      }\n    }\n    this.dimensions = dimensionNames;\n    this._dimInfos = dimensionInfos;\n    this._initGetDimensionInfo(needsHasOwn);\n    this.hostModel = hostModel;\n    this._invertedIndicesMap = invertedIndicesMap;\n    if (this._dimOmitted) {\n      var dimIdxToName_1 = this._dimIdxToName = zrUtil.createHashMap();\n      zrUtil.each(dimensionNames, function (dimName) {\n        dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex, dimName);\n      });\n    }\n  }\n  /**\r\n   *\r\n   * Get concrete dimension name by dimension name or dimension index.\r\n   * If input a dimension name, do not validate whether the dimension name exits.\r\n   *\r\n   * @caution\r\n   * @param dim Must make sure the dimension is `SeriesDimensionLoose`.\r\n   * Because only those dimensions will have auto-generated dimension names if not\r\n   * have a user-specified name, and other dimensions will get a return of null/undefined.\r\n   *\r\n   * @notice Because of this reason, should better use `getDimensionIndex` instead, for examples:\r\n   * ```js\r\n   * const val = data.getStore().get(data.getDimensionIndex(dim), dataIdx);\r\n   * ```\r\n   *\r\n   * @return Concrete dim name.\r\n   */\n  SeriesData.prototype.getDimension = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n    if (dimIdx == null) {\n      return dim;\n    }\n    dimIdx = dim;\n    if (!this._dimOmitted) {\n      return this.dimensions[dimIdx];\n    }\n    // Retrieve from series dimension definition because it probably contains\n    // generated dimension name (like 'x', 'y').\n    var dimName = this._dimIdxToName.get(dimIdx);\n    if (dimName != null) {\n      return dimName;\n    }\n    var sourceDimDef = this._schema.getSourceDimension(dimIdx);\n    if (sourceDimDef) {\n      return sourceDimDef.name;\n    }\n  };\n  /**\r\n   * Get dimension index in data store. Return -1 if not found.\r\n   * Can be used to index value from getRawValue.\r\n   */\n  SeriesData.prototype.getDimensionIndex = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n    if (dimIdx != null) {\n      return dimIdx;\n    }\n    if (dim == null) {\n      return -1;\n    }\n    var dimInfo = this._getDimInfo(dim);\n    return dimInfo ? dimInfo.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(dim) : -1;\n  };\n  /**\r\n   * The meanings of the input parameter `dim`:\r\n   *\r\n   * + If dim is a number (e.g., `1`), it means the index of the dimension.\r\n   *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\r\n   * + If dim is a number-like string (e.g., `\"1\"`):\r\n   *     + If there is the same concrete dim name defined in `series.dimensions` or `dataset.dimensions`,\r\n   *        it means that concrete name.\r\n   *     + If not, it will be converted to a number, which means the index of the dimension.\r\n   *        (why? because of the backward compatibility. We have been tolerating number-like string in\r\n   *        dimension setting, although now it seems that it is not a good idea.)\r\n   *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\r\n   *     if no dimension name is defined as `\"1\"`.\r\n   * + If dim is a not-number-like string, it means the concrete dim name.\r\n   *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\r\n   *   or customized in `dimensions` property of option like `\"age\"`.\r\n   *\r\n   * @return recognized `DimensionIndex`. Otherwise return null/undefined (means that dim is `DimensionName`).\r\n   */\n  SeriesData.prototype._recognizeDimIndex = function (dim) {\n    if (zrUtil.isNumber(dim)\n    // If being a number-like string but not being defined as a dimension name.\n    || dim != null && !isNaN(dim) && !this._getDimInfo(dim) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(dim) < 0)) {\n      return +dim;\n    }\n  };\n  SeriesData.prototype._getStoreDimIndex = function (dim) {\n    var dimIdx = this.getDimensionIndex(dim);\n    if (process.env.NODE_ENV !== 'production') {\n      if (dimIdx == null) {\n        throw new Error('Unknown dimension ' + dim);\n      }\n    }\n    return dimIdx;\n  };\n  /**\r\n   * Get type and calculation info of particular dimension\r\n   * @param dim\r\n   *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\r\n   *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\r\n   */\n  SeriesData.prototype.getDimensionInfo = function (dim) {\n    // Do not clone, because there may be categories in dimInfo.\n    return this._getDimInfo(this.getDimension(dim));\n  };\n  SeriesData.prototype._initGetDimensionInfo = function (needsHasOwn) {\n    var dimensionInfos = this._dimInfos;\n    this._getDimInfo = needsHasOwn ? function (dimName) {\n      return dimensionInfos.hasOwnProperty(dimName) ? dimensionInfos[dimName] : undefined;\n    } : function (dimName) {\n      return dimensionInfos[dimName];\n    };\n  };\n  /**\r\n   * concrete dimension name list on coord.\r\n   */\n  SeriesData.prototype.getDimensionsOnCoord = function () {\n    return this._dimSummary.dataDimsOnCoord.slice();\n  };\n  SeriesData.prototype.mapDimension = function (coordDim, idx) {\n    var dimensionsSummary = this._dimSummary;\n    if (idx == null) {\n      return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\n    }\n    var dims = dimensionsSummary.encode[coordDim];\n    return dims ? dims[idx] : null;\n  };\n  SeriesData.prototype.mapDimensionsAll = function (coordDim) {\n    var dimensionsSummary = this._dimSummary;\n    var dims = dimensionsSummary.encode[coordDim];\n    return (dims || []).slice();\n  };\n  SeriesData.prototype.getStore = function () {\n    return this._store;\n  };\n  /**\r\n   * Initialize from data\r\n   * @param data source or data or data store.\r\n   * @param nameList The name of a datum is used on data diff and\r\n   *        default label/tooltip.\r\n   *        A name can be specified in encode.itemName,\r\n   *        or dataItem.name (only for series option data),\r\n   *        or provided in nameList from outside.\r\n   */\n  SeriesData.prototype.initData = function (data, nameList, dimValueGetter) {\n    var _this = this;\n    var store;\n    if (data instanceof DataStore) {\n      store = data;\n    }\n    if (!store) {\n      var dimensions = this.dimensions;\n      var provider = isSourceInstance(data) || zrUtil.isArrayLike(data) ? new DefaultDataProvider(data, dimensions.length) : data;\n      store = new DataStore();\n      var dimensionInfos = map(dimensions, function (dimName) {\n        return {\n          type: _this._dimInfos[dimName].type,\n          property: dimName\n        };\n      });\n      store.initData(provider, dimensionInfos, dimValueGetter);\n    }\n    this._store = store;\n    // Reset\n    this._nameList = (nameList || []).slice();\n    this._idList = [];\n    this._nameRepeatCount = {};\n    this._doInit(0, store.count());\n    // Cache summary info for fast visit. See \"dimensionHelper\".\n    // Needs to be initialized after store is prepared.\n    this._dimSummary = summarizeDimensions(this, this._schema);\n    this.userOutput = this._dimSummary.userOutput;\n  };\n  /**\r\n   * Caution: Can be only called on raw data (before `this._indices` created).\r\n   */\n  SeriesData.prototype.appendData = function (data) {\n    var range = this._store.appendData(data);\n    this._doInit(range[0], range[1]);\n  };\n  /**\r\n   * Caution: Can be only called on raw data (before `this._indices` created).\r\n   * This method does not modify `rawData` (`dataProvider`), but only\r\n   * add values to store.\r\n   *\r\n   * The final count will be increased by `Math.max(values.length, names.length)`.\r\n   *\r\n   * @param values That is the SourceType: 'arrayRows', like\r\n   *        [\r\n   *            [12, 33, 44],\r\n   *            [NaN, 43, 1],\r\n   *            ['-', 'asdf', 0]\r\n   *        ]\r\n   *        Each item is exactly corresponding to a dimension.\r\n   */\n  SeriesData.prototype.appendValues = function (values, names) {\n    var _a = this._store.appendValues(values, names && names.length),\n      start = _a.start,\n      end = _a.end;\n    var shouldMakeIdFromName = this._shouldMakeIdFromName();\n    this._updateOrdinalMeta();\n    if (names) {\n      for (var idx = start; idx < end; idx++) {\n        var sourceIdx = idx - start;\n        this._nameList[idx] = names[sourceIdx];\n        if (shouldMakeIdFromName) {\n          makeIdFromName(this, idx);\n        }\n      }\n    }\n  };\n  SeriesData.prototype._updateOrdinalMeta = function () {\n    var store = this._store;\n    var dimensions = this.dimensions;\n    for (var i = 0; i < dimensions.length; i++) {\n      var dimInfo = this._dimInfos[dimensions[i]];\n      if (dimInfo.ordinalMeta) {\n        store.collectOrdinalMeta(dimInfo.storeDimIndex, dimInfo.ordinalMeta);\n      }\n    }\n  };\n  SeriesData.prototype._shouldMakeIdFromName = function () {\n    var provider = this._store.getProvider();\n    return this._idDimIdx == null && provider.getSource().sourceFormat !== SOURCE_FORMAT_TYPED_ARRAY && !provider.fillStorage;\n  };\n  SeriesData.prototype._doInit = function (start, end) {\n    if (start >= end) {\n      return;\n    }\n    var store = this._store;\n    var provider = store.getProvider();\n    this._updateOrdinalMeta();\n    var nameList = this._nameList;\n    var idList = this._idList;\n    var sourceFormat = provider.getSource().sourceFormat;\n    var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL;\n    // Each data item is value\n    // [1, 2]\n    // 2\n    // Bar chart, line chart which uses category axis\n    // only gives the 'y' value. 'x' value is the indices of category\n    // Use a tempValue to normalize the value to be a (x, y) value\n    // If dataItem is {name: ...} or {id: ...}, it has highest priority.\n    // This kind of ids and names are always stored `_nameList` and `_idList`.\n    if (isFormatOriginal && !provider.pure) {\n      var sharedDataItem = [];\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        var dataItem = provider.getItem(idx, sharedDataItem);\n        if (!this.hasItemOption && isDataItemOption(dataItem)) {\n          this.hasItemOption = true;\n        }\n        if (dataItem) {\n          var itemName = dataItem.name;\n          if (nameList[idx] == null && itemName != null) {\n            nameList[idx] = convertOptionIdName(itemName, null);\n          }\n          var itemId = dataItem.id;\n          if (idList[idx] == null && itemId != null) {\n            idList[idx] = convertOptionIdName(itemId, null);\n          }\n        }\n      }\n    }\n    if (this._shouldMakeIdFromName()) {\n      for (var idx = start; idx < end; idx++) {\n        makeIdFromName(this, idx);\n      }\n    }\n    prepareInvertedIndex(this);\n  };\n  /**\r\n   * PENDING: In fact currently this function is only used to short-circuit\r\n   * the calling of `scale.unionExtentFromData` when data have been filtered by modules\r\n   * like \"dataZoom\". `scale.unionExtentFromData` is used to calculate data extent for series on\r\n   * an axis, but if a \"axis related data filter module\" is used, the extent of the axis have\r\n   * been fixed and no need to calling `scale.unionExtentFromData` actually.\r\n   * But if we add \"custom data filter\" in future, which is not \"axis related\", this method may\r\n   * be still needed.\r\n   *\r\n   * Optimize for the scenario that data is filtered by a given extent.\r\n   * Consider that if data amount is more than hundreds of thousand,\r\n   * extent calculation will cost more than 10ms and the cache will\r\n   * be erased because of the filtering.\r\n   */\n  SeriesData.prototype.getApproximateExtent = function (dim) {\n    return this._approximateExtent[dim] || this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n  /**\r\n   * Calculate extent on a filtered data might be time consuming.\r\n   * Approximate extent is only used for: calculate extent of filtered data outside.\r\n   */\n  SeriesData.prototype.setApproximateExtent = function (extent, dim) {\n    dim = this.getDimension(dim);\n    this._approximateExtent[dim] = extent.slice();\n  };\n  SeriesData.prototype.getCalculationInfo = function (key) {\n    return this._calculationInfo[key];\n  };\n  SeriesData.prototype.setCalculationInfo = function (key, value) {\n    isObject(key) ? zrUtil.extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\n  };\n  /**\r\n   * @return Never be null/undefined. `number` will be converted to string. Because:\r\n   * In most cases, name is used in display, where returning a string is more convenient.\r\n   * In other cases, name is used in query (see `indexOfName`), where we can keep the\r\n   * rule that name `2` equals to name `'2'`.\r\n   */\n  SeriesData.prototype.getName = function (idx) {\n    var rawIndex = this.getRawIndex(idx);\n    var name = this._nameList[rawIndex];\n    if (name == null && this._nameDimIdx != null) {\n      name = getIdNameFromStore(this, this._nameDimIdx, rawIndex);\n    }\n    if (name == null) {\n      name = '';\n    }\n    return name;\n  };\n  SeriesData.prototype._getCategory = function (dimIdx, idx) {\n    var ordinal = this._store.get(dimIdx, idx);\n    var ordinalMeta = this._store.getOrdinalMeta(dimIdx);\n    if (ordinalMeta) {\n      return ordinalMeta.categories[ordinal];\n    }\n    return ordinal;\n  };\n  /**\r\n   * @return Never null/undefined. `number` will be converted to string. Because:\r\n   * In all cases having encountered at present, id is used in making diff comparison, which\r\n   * are usually based on hash map. We can keep the rule that the internal id are always string\r\n   * (treat `2` is the same as `'2'`) to make the related logic simple.\r\n   */\n  SeriesData.prototype.getId = function (idx) {\n    return getId(this, this.getRawIndex(idx));\n  };\n  SeriesData.prototype.count = function () {\n    return this._store.count();\n  };\n  /**\r\n   * Get value. Return NaN if idx is out of range.\r\n   *\r\n   * @notice Should better to use `data.getStore().get(dimIndex, dataIdx)` instead.\r\n   */\n  SeriesData.prototype.get = function (dim, idx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n    if (dimInfo) {\n      return store.get(dimInfo.storeDimIndex, idx);\n    }\n  };\n  /**\r\n   * @notice Should better to use `data.getStore().getByRawIndex(dimIndex, dataIdx)` instead.\r\n   */\n  SeriesData.prototype.getByRawIndex = function (dim, rawIdx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n    if (dimInfo) {\n      return store.getByRawIndex(dimInfo.storeDimIndex, rawIdx);\n    }\n  };\n  SeriesData.prototype.getIndices = function () {\n    return this._store.getIndices();\n  };\n  SeriesData.prototype.getDataExtent = function (dim) {\n    return this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getSum = function (dim) {\n    return this._store.getSum(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getMedian = function (dim) {\n    return this._store.getMedian(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getValues = function (dimensions, idx) {\n    var _this = this;\n    var store = this._store;\n    return zrUtil.isArray(dimensions) ? store.getValues(map(dimensions, function (dim) {\n      return _this._getStoreDimIndex(dim);\n    }), idx) : store.getValues(dimensions);\n  };\n  /**\r\n   * If value is NaN. Including '-'\r\n   * Only check the coord dimensions.\r\n   */\n  SeriesData.prototype.hasValue = function (idx) {\n    var dataDimIndicesOnCoord = this._dimSummary.dataDimIndicesOnCoord;\n    for (var i = 0, len = dataDimIndicesOnCoord.length; i < len; i++) {\n      // Ordinal type originally can be string or number.\n      // But when an ordinal type is used on coord, it can\n      // not be string but only number. So we can also use isNaN.\n      if (isNaN(this._store.get(dataDimIndicesOnCoord[i], idx))) {\n        return false;\n      }\n    }\n    return true;\n  };\n  /**\r\n   * Retrieve the index with given name\r\n   */\n  SeriesData.prototype.indexOfName = function (name) {\n    for (var i = 0, len = this._store.count(); i < len; i++) {\n      if (this.getName(i) === name) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  SeriesData.prototype.getRawIndex = function (idx) {\n    return this._store.getRawIndex(idx);\n  };\n  SeriesData.prototype.indexOfRawIndex = function (rawIndex) {\n    return this._store.indexOfRawIndex(rawIndex);\n  };\n  /**\r\n   * Only support the dimension which inverted index created.\r\n   * Do not support other cases until required.\r\n   * @param dim concrete dim\r\n   * @param value ordinal index\r\n   * @return rawIndex\r\n   */\n  SeriesData.prototype.rawIndexOf = function (dim, value) {\n    var invertedIndices = dim && this._invertedIndicesMap[dim];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!invertedIndices) {\n        throw new Error('Do not supported yet');\n      }\n    }\n    var rawIndex = invertedIndices && invertedIndices[value];\n    if (rawIndex == null || isNaN(rawIndex)) {\n      return INDEX_NOT_FOUND;\n    }\n    return rawIndex;\n  };\n  /**\r\n   * Retrieve the index of nearest value\r\n   * @param dim\r\n   * @param value\r\n   * @param [maxDistance=Infinity]\r\n   * @return If and only if multiple indices has\r\n   *         the same value, they are put to the result.\r\n   */\n  SeriesData.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n    return this._store.indicesOfNearest(this._getStoreDimIndex(dim), value, maxDistance);\n  };\n  SeriesData.prototype.each = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    this._store.each(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n  SeriesData.prototype.filterSelf = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    this._store = this._store.filter(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return this;\n  };\n  /**\r\n   * Select data in range. (For optimization of filter)\r\n   * (Manually inline code, support 5 million data filtering in data zoom.)\r\n   */\n  SeriesData.prototype.selectRange = function (range) {\n    'use strict';\n\n    var _this = this;\n    var innerRange = {};\n    var dims = zrUtil.keys(range);\n    var dimIndices = [];\n    zrUtil.each(dims, function (dim) {\n      var dimIdx = _this._getStoreDimIndex(dim);\n      innerRange[dimIdx] = range[dim];\n      dimIndices.push(dimIdx);\n    });\n    this._store = this._store.selectRange(innerRange);\n    return this;\n  };\n  /* eslint-enable max-len */\n  SeriesData.prototype.mapArray = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    ctx = ctx || this;\n    var result = [];\n    this.each(dims, function () {\n      result.push(cb && cb.apply(this, arguments));\n    }, ctx);\n    return result;\n  };\n  SeriesData.prototype.map = function (dims, cb, ctx, ctxCompat) {\n    'use strict';\n\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || ctxCompat || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.map(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return list;\n  };\n  SeriesData.prototype.modify = function (dims, cb, ctx, ctxCompat) {\n    var _this = this;\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || ctxCompat || this;\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(normalizeDimensions(dims), function (dim) {\n        var dimInfo = _this.getDimensionInfo(dim);\n        if (!dimInfo.isCalculationCoord) {\n          console.error('Danger: only stack dimension can be modified');\n        }\n      });\n    }\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    // If do shallow clone here, if there are too many stacked series,\n    // it still cost lots of memory, because `_store.dimensions` are not shared.\n    // We should consider there probably be shallow clone happen in each series\n    // in consequent filter/map.\n    this._store.modify(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n  /**\r\n   * Large data down sampling on given dimension\r\n   * @param sampleIndex Sample index for name and id\r\n   */\n  SeriesData.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.downSample(this._getStoreDimIndex(dimension), rate, sampleValue, sampleIndex);\n    return list;\n  };\n  /**\r\n   * Large data down sampling using min-max\r\n   * @param {string} valueDimension\r\n   * @param {number} rate\r\n   */\n  SeriesData.prototype.minmaxDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.minmaxDownSample(this._getStoreDimIndex(valueDimension), rate);\n    return list;\n  };\n  /**\r\n   * Large data down sampling using largest-triangle-three-buckets\r\n   * @param {string} valueDimension\r\n   * @param {number} targetCount\r\n   */\n  SeriesData.prototype.lttbDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.lttbDownSample(this._getStoreDimIndex(valueDimension), rate);\n    return list;\n  };\n  SeriesData.prototype.getRawDataItem = function (idx) {\n    return this._store.getRawDataItem(idx);\n  };\n  /**\r\n   * Get model of one data item.\r\n   */\n  // TODO: Type of data item\n  SeriesData.prototype.getItemModel = function (idx) {\n    var hostModel = this.hostModel;\n    var dataItem = this.getRawDataItem(idx);\n    return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\n  };\n  /**\r\n   * Create a data differ\r\n   */\n  SeriesData.prototype.diff = function (otherList) {\n    var thisList = this;\n    return new DataDiffer(otherList ? otherList.getStore().getIndices() : [], this.getStore().getIndices(), function (idx) {\n      return getId(otherList, idx);\n    }, function (idx) {\n      return getId(thisList, idx);\n    });\n  };\n  /**\r\n   * Get visual property.\r\n   */\n  SeriesData.prototype.getVisual = function (key) {\n    var visual = this._visual;\n    return visual && visual[key];\n  };\n  SeriesData.prototype.setVisual = function (kvObj, val) {\n    this._visual = this._visual || {};\n    if (isObject(kvObj)) {\n      zrUtil.extend(this._visual, kvObj);\n    } else {\n      this._visual[kvObj] = val;\n    }\n  };\n  /**\r\n   * Get visual property of single data item\r\n   */\n  // eslint-disable-next-line\n  SeriesData.prototype.getItemVisual = function (idx, key) {\n    var itemVisual = this._itemVisuals[idx];\n    var val = itemVisual && itemVisual[key];\n    if (val == null) {\n      // Use global visual property\n      return this.getVisual(key);\n    }\n    return val;\n  };\n  /**\r\n   * If exists visual property of single data item\r\n   */\n  SeriesData.prototype.hasItemVisual = function () {\n    return this._itemVisuals.length > 0;\n  };\n  /**\r\n   * Make sure itemVisual property is unique\r\n   */\n  // TODO: use key to save visual to reduce memory.\n  SeriesData.prototype.ensureUniqueItemVisual = function (idx, key) {\n    var itemVisuals = this._itemVisuals;\n    var itemVisual = itemVisuals[idx];\n    if (!itemVisual) {\n      itemVisual = itemVisuals[idx] = {};\n    }\n    var val = itemVisual[key];\n    if (val == null) {\n      val = this.getVisual(key);\n      // TODO Performance?\n      if (zrUtil.isArray(val)) {\n        val = val.slice();\n      } else if (isObject(val)) {\n        val = zrUtil.extend({}, val);\n      }\n      itemVisual[key] = val;\n    }\n    return val;\n  };\n  // eslint-disable-next-line\n  SeriesData.prototype.setItemVisual = function (idx, key, value) {\n    var itemVisual = this._itemVisuals[idx] || {};\n    this._itemVisuals[idx] = itemVisual;\n    if (isObject(key)) {\n      zrUtil.extend(itemVisual, key);\n    } else {\n      itemVisual[key] = value;\n    }\n  };\n  /**\r\n   * Clear itemVisuals and list visual.\r\n   */\n  SeriesData.prototype.clearAllVisual = function () {\n    this._visual = {};\n    this._itemVisuals = [];\n  };\n  SeriesData.prototype.setLayout = function (key, val) {\n    isObject(key) ? zrUtil.extend(this._layout, key) : this._layout[key] = val;\n  };\n  /**\r\n   * Get layout property.\r\n   */\n  SeriesData.prototype.getLayout = function (key) {\n    return this._layout[key];\n  };\n  /**\r\n   * Get layout of single data item\r\n   */\n  SeriesData.prototype.getItemLayout = function (idx) {\n    return this._itemLayouts[idx];\n  };\n  /**\r\n   * Set layout of single data item\r\n   */\n  SeriesData.prototype.setItemLayout = function (idx, layout, merge) {\n    this._itemLayouts[idx] = merge ? zrUtil.extend(this._itemLayouts[idx] || {}, layout) : layout;\n  };\n  /**\r\n   * Clear all layout of single data item\r\n   */\n  SeriesData.prototype.clearItemLayouts = function () {\n    this._itemLayouts.length = 0;\n  };\n  /**\r\n   * Set graphic element relative to data. It can be set as null\r\n   */\n  SeriesData.prototype.setItemGraphicEl = function (idx, el) {\n    var seriesIndex = this.hostModel && this.hostModel.seriesIndex;\n    setCommonECData(seriesIndex, this.dataType, idx, el);\n    this._graphicEls[idx] = el;\n  };\n  SeriesData.prototype.getItemGraphicEl = function (idx) {\n    return this._graphicEls[idx];\n  };\n  SeriesData.prototype.eachItemGraphicEl = function (cb, context) {\n    zrUtil.each(this._graphicEls, function (el, idx) {\n      if (el) {\n        cb && cb.call(context, el, idx);\n      }\n    });\n  };\n  /**\r\n   * Shallow clone a new list except visual and layout properties, and graph elements.\r\n   * New list only change the indices.\r\n   */\n  SeriesData.prototype.cloneShallow = function (list) {\n    if (!list) {\n      list = new SeriesData(this._schema ? this._schema : map(this.dimensions, this._getDimInfo, this), this.hostModel);\n    }\n    transferProperties(list, this);\n    list._store = this._store;\n    return list;\n  };\n  /**\r\n   * Wrap some method to add more feature\r\n   */\n  SeriesData.prototype.wrapMethod = function (methodName, injectFunction) {\n    var originalMethod = this[methodName];\n    if (!zrUtil.isFunction(originalMethod)) {\n      return;\n    }\n    this.__wrappedMethods = this.__wrappedMethods || [];\n    this.__wrappedMethods.push(methodName);\n    this[methodName] = function () {\n      var res = originalMethod.apply(this, arguments);\n      return injectFunction.apply(this, [res].concat(zrUtil.slice(arguments)));\n    };\n  };\n  // ----------------------------------------------------------\n  // A work around for internal method visiting private member.\n  // ----------------------------------------------------------\n  SeriesData.internalField = function () {\n    prepareInvertedIndex = function (data) {\n      var invertedIndicesMap = data._invertedIndicesMap;\n      zrUtil.each(invertedIndicesMap, function (invertedIndices, dim) {\n        var dimInfo = data._dimInfos[dim];\n        // Currently, only dimensions that has ordinalMeta can create inverted indices.\n        var ordinalMeta = dimInfo.ordinalMeta;\n        var store = data._store;\n        if (ordinalMeta) {\n          invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length);\n          // The default value of TypedArray is 0. To avoid miss\n          // mapping to 0, we should set it as INDEX_NOT_FOUND.\n          for (var i = 0; i < invertedIndices.length; i++) {\n            invertedIndices[i] = INDEX_NOT_FOUND;\n          }\n          for (var i = 0; i < store.count(); i++) {\n            // Only support the case that all values are distinct.\n            invertedIndices[store.get(dimInfo.storeDimIndex, i)] = i;\n          }\n        }\n      });\n    };\n    getIdNameFromStore = function (data, dimIdx, idx) {\n      return convertOptionIdName(data._getCategory(dimIdx, idx), null);\n    };\n    /**\r\n     * @see the comment of `List['getId']`.\r\n     */\n    getId = function (data, rawIndex) {\n      var id = data._idList[rawIndex];\n      if (id == null && data._idDimIdx != null) {\n        id = getIdNameFromStore(data, data._idDimIdx, rawIndex);\n      }\n      if (id == null) {\n        id = ID_PREFIX + rawIndex;\n      }\n      return id;\n    };\n    normalizeDimensions = function (dimensions) {\n      if (!zrUtil.isArray(dimensions)) {\n        dimensions = dimensions != null ? [dimensions] : [];\n      }\n      return dimensions;\n    };\n    /**\r\n     * Data in excludeDimensions is copied, otherwise transferred.\r\n     */\n    cloneListForMapAndSample = function (original) {\n      var list = new SeriesData(original._schema ? original._schema : map(original.dimensions, original._getDimInfo, original), original.hostModel);\n      // FIXME If needs stackedOn, value may already been stacked\n      transferProperties(list, original);\n      return list;\n    };\n    transferProperties = function (target, source) {\n      zrUtil.each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\n        if (source.hasOwnProperty(propName)) {\n          target[propName] = source[propName];\n        }\n      });\n      target.__wrappedMethods = source.__wrappedMethods;\n      zrUtil.each(CLONE_PROPERTIES, function (propName) {\n        target[propName] = zrUtil.clone(source[propName]);\n      });\n      target._calculationInfo = zrUtil.extend({}, source._calculationInfo);\n    };\n    makeIdFromName = function (data, idx) {\n      var nameList = data._nameList;\n      var idList = data._idList;\n      var nameDimIdx = data._nameDimIdx;\n      var idDimIdx = data._idDimIdx;\n      var name = nameList[idx];\n      var id = idList[idx];\n      if (name == null && nameDimIdx != null) {\n        nameList[idx] = name = getIdNameFromStore(data, nameDimIdx, idx);\n      }\n      if (id == null && idDimIdx != null) {\n        idList[idx] = id = getIdNameFromStore(data, idDimIdx, idx);\n      }\n      if (id == null && name != null) {\n        var nameRepeatCount = data._nameRepeatCount;\n        var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;\n        id = name;\n        if (nmCnt > 1) {\n          id += '__ec__' + nmCnt;\n        }\n        idList[idx] = id;\n      }\n    };\n  }();\n  return SeriesData;\n}();\nexport default SeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nimport SeriesDimensionDefine from '../SeriesDimensionDefine.js';\nimport { createHashMap, defaults, each, extend, isObject, isString } from 'zrender/lib/core/util.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { CtorInt32Array } from '../DataStore.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './sourceHelper.js';\nimport { createDimNameMap, ensureSourceDimNameMap, SeriesDataSchema, shouldOmitUnusedDimensions } from './SeriesDataSchema.js';\n/**\r\n * For outside usage compat (like echarts-gl are using it).\r\n */\nexport function createDimensions(source, opt) {\n  return prepareSeriesDataSchema(source, opt).dimensions;\n}\n/**\r\n * This method builds the relationship between:\r\n * + \"what the coord sys or series requires (see `coordDimensions`)\",\r\n * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimensionsDefine` and `opt.encodeDefine`)\"\r\n * + \"what the data source provids (see `source`)\".\r\n *\r\n * Some guess strategy will be adapted if user does not define something.\r\n * If no 'value' dimension specified, the first no-named dimension will be\r\n * named as 'value'.\r\n *\r\n * @return The results are always sorted by `storeDimIndex` asc.\r\n */\nexport default function prepareSeriesDataSchema(\n// TODO: TYPE completeDimensions type\nsource, opt) {\n  if (!isSourceInstance(source)) {\n    source = createSourceFromSeriesDataOption(source);\n  }\n  opt = opt || {};\n  var sysDims = opt.coordDimensions || [];\n  var dimsDef = opt.dimensionsDefine || source.dimensionsDefine || [];\n  var coordDimNameMap = createHashMap();\n  var resultList = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimensionsCount);\n  // Try to ignore unused dimensions if sharing a high dimension datastore\n  // 30 is an experience value.\n  var omitUnusedDimensions = opt.canOmitUnusedDimensions && shouldOmitUnusedDimensions(dimCount);\n  var isUsingSourceDimensionsDef = dimsDef === source.dimensionsDefine;\n  var dataDimNameMap = isUsingSourceDimensionsDef ? ensureSourceDimNameMap(source) : createDimNameMap(dimsDef);\n  var encodeDef = opt.encodeDefine;\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n  var encodeDefMap = createHashMap(encodeDef);\n  var indicesMap = new CtorInt32Array(dimCount);\n  for (var i = 0; i < indicesMap.length; i++) {\n    indicesMap[i] = -1;\n  }\n  function getResultItem(dimIdx) {\n    var idx = indicesMap[dimIdx];\n    if (idx < 0) {\n      var dimDefItemRaw = dimsDef[dimIdx];\n      var dimDefItem = isObject(dimDefItemRaw) ? dimDefItemRaw : {\n        name: dimDefItemRaw\n      };\n      var resultItem = new SeriesDimensionDefine();\n      var userDimName = dimDefItem.name;\n      if (userDimName != null && dataDimNameMap.get(userDimName) != null) {\n        // Only if `series.dimensions` is defined in option\n        // displayName, will be set, and dimension will be displayed vertically in\n        // tooltip by default.\n        resultItem.name = resultItem.displayName = userDimName;\n      }\n      dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n      dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n      var newIdx = resultList.length;\n      indicesMap[dimIdx] = newIdx;\n      resultItem.storeDimIndex = dimIdx;\n      resultList.push(resultItem);\n      return resultItem;\n    }\n    return resultList[idx];\n  }\n  if (!omitUnusedDimensions) {\n    for (var i = 0; i < dimCount; i++) {\n      getResultItem(i);\n    }\n  }\n  // Set `coordDim` and `coordDimIndex` by `encodeDefMap` and normalize `encodeDefMap`.\n  encodeDefMap.each(function (dataDimsRaw, coordDim) {\n    var dataDims = normalizeToArray(dataDimsRaw).slice();\n    // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n    // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n    // this case.\n    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDefMap.set(coordDim, false);\n      return;\n    }\n    var validDataDims = encodeDefMap.set(coordDim, []);\n    each(dataDims, function (resultDimIdxOrName, idx) {\n      // The input resultDimIdx can be dim name or index.\n      var resultDimIdx = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(getResultItem(resultDimIdx), coordDim, idx);\n      }\n    });\n  });\n  // Apply templates and default order from `sysDims`.\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItemRaw) {\n    var coordDim;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n    var sysDimItem;\n    if (isString(sysDimItemRaw)) {\n      coordDim = sysDimItemRaw;\n      sysDimItem = {};\n    } else {\n      sysDimItem = sysDimItemRaw;\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = extend({}, sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta;\n      // `coordDimIndex` should not be set directly.\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n    var dataDims = encodeDefMap.get(coordDim);\n    // negative resultDimIdx means no need to mapping.\n    if (dataDims === false) {\n      return;\n    }\n    dataDims = normalizeToArray(dataDims);\n    // dimensions provides default dim sequences.\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < dimCount && getResultItem(availDimIdx).coordDim != null) {\n          availDimIdx++;\n        }\n        availDimIdx < dimCount && dataDims.push(availDimIdx++);\n      }\n    }\n    // Apply templates.\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = getResultItem(resultDimIdx);\n      // Coordinate system has a higher priority on dim type than source.\n      if (isUsingSourceDimensionsDef && sysDimItem.type != null) {\n        resultItem.type = sysDimItem.type;\n      }\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      }\n      // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (VISUAL_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  }\n  // Make sure the first extra dim is 'value'.\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value';\n  function ifNoNameFillWithCoordName(resultItem) {\n    if (resultItem.name == null) {\n      // Duplication will be removed in the next step.\n      resultItem.name = resultItem.coordDim;\n    }\n  }\n  // Set dim `name` and other `coordDim` and other props.\n  if (!omitUnusedDimensions) {\n    for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n      var resultItem = getResultItem(resultDimIdx);\n      var coordDim = resultItem.coordDim;\n      if (coordDim == null) {\n        // TODO no need to generate coordDim for isExtraCoord?\n        resultItem.coordDim = genCoordDimName(extra, coordDimNameMap, fromZero);\n        resultItem.coordDimIndex = 0;\n        // Series specified generateCoord is using out.\n        if (!generateCoord || generateCoordCount <= 0) {\n          resultItem.isExtraCoord = true;\n        }\n        generateCoordCount--;\n      }\n      ifNoNameFillWithCoordName(resultItem);\n      if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must\n      // Consider the case:\n      // {\n      //    dataset: {source: [\n      //        ['2001', 123],\n      //        ['2002', 456],\n      //        ...\n      //        ['The others', 987],\n      //    ]},\n      //    series: {type: 'pie'}\n      // }\n      // The first column should better be treated as a \"ordinal\" although it\n      // might not be detected as an \"ordinal\" by `guessOrdinal`.\n      || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n        resultItem.type = 'ordinal';\n      }\n    }\n  } else {\n    each(resultList, function (resultItem) {\n      // PENDING: guessOrdinal or let user specify type: 'ordinal' manually?\n      ifNoNameFillWithCoordName(resultItem);\n    });\n    // Sort dimensions: there are some rule that use the last dim as label,\n    // and for some latter travel process easier.\n    resultList.sort(function (item0, item1) {\n      return item0.storeDimIndex - item1.storeDimIndex;\n    });\n  }\n  removeDuplication(resultList);\n  return new SeriesDataSchema({\n    source: source,\n    dimensions: resultList,\n    fullDimensionCount: dimCount,\n    dimensionOmitted: omitUnusedDimensions\n  });\n}\nfunction removeDuplication(result) {\n  var duplicationMap = createHashMap();\n  for (var i = 0; i < result.length; i++) {\n    var dim = result[i];\n    var dimOriginalName = dim.name;\n    var count = duplicationMap.get(dimOriginalName) || 0;\n    if (count > 0) {\n      // Starts from 0.\n      dim.name = dimOriginalName + (count - 1);\n    }\n    count++;\n    duplicationMap.set(dimOriginalName, count);\n  }\n}\n// ??? TODO\n// Originally detect dimCount by data[0]. Should we\n// optimize it to only by sysDims and dimensions and encode.\n// So only necessary dims will be initialized.\n// But\n// (1) custom series should be considered. where other dims\n// may be visited.\n// (2) sometimes user need to calculate bubble size or use visualMap\n// on other dimensions besides coordSys needed.\n// So, dims that is not used by system, should be shared in data store?\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  // Note that the result dimCount should not small than columns count\n  // of data, otherwise `dataDimNameMap` checking will be incorrect.\n  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef;\n    if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n    }\n  });\n  return dimCount;\n}\nfunction genCoordDimName(name, map, fromZero) {\n  if (fromZero || map.hasKey(name)) {\n    var i = 0;\n    while (map.hasKey(name + i)) {\n      i++;\n    }\n    name += i;\n  }\n  map.set(name, true);\n  return name;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Helper for model references.\r\n * There are many manners to refer axis/coordSys.\r\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\nimport { createHashMap, retrieve, each } from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../util/model.js';\n/**\r\n * @class\r\n * For example:\r\n * {\r\n *     coordSysName: 'cartesian2d',\r\n *     coordSysDims: ['x', 'y', ...],\r\n *     axisMap: HashMap({\r\n *         x: xAxisModel,\r\n *         y: yAxisModel\r\n *     }),\r\n *     categoryAxisMap: HashMap({\r\n *         x: xAxisModel,\r\n *         y: undefined\r\n *     }),\r\n *     // The index of the first category axis in `coordSysDims`.\r\n *     // `null/undefined` means no category axis exists.\r\n *     firstCategoryDimIndex: 1,\r\n *     // To replace user specified encode.\r\n * }\r\n */\nvar CoordSysInfo = /** @class */function () {\n  function CoordSysInfo(coordSysName) {\n    this.coordSysDims = [];\n    this.axisMap = createHashMap();\n    this.categoryAxisMap = createHashMap();\n    this.coordSysName = coordSysName;\n  }\n  return CoordSysInfo;\n}();\nexport function getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!xAxisModel) {\n        throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n      }\n      if (!yAxisModel) {\n        throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n      }\n    }\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!singleAxisModel) {\n        throw new Error('singleAxis should be specified.');\n      }\n    }\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    if (process.env.NODE_ENV !== 'production') {\n      if (!angleAxisModel) {\n        throw new Error('angleAxis option not found');\n      }\n      if (!radiusAxisModel) {\n        throw new Error('radiusAxis option not found');\n      }\n    }\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n      if (isCategory(axisModel)) {\n        categoryAxisMap.set(axisDim, axisModel);\n        if (result.firstCategoryDimIndex == null) {\n          result.firstCategoryDimIndex = index;\n        }\n      }\n    });\n  }\n};\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, isString } from 'zrender/lib/core/util.js';\nimport { isSeriesDataSchema } from './SeriesDataSchema.js';\n/**\r\n * Note that it is too complicated to support 3d stack by value\r\n * (have to create two-dimension inverted index), so in 3d case\r\n * we just support that stacked by index.\r\n *\r\n * @param seriesModel\r\n * @param dimensionsInput The same as the input of <module:echarts/data/SeriesData>.\r\n *        The input will be modified.\r\n * @param opt\r\n * @param opt.stackedCoordDimension Specify a coord dimension if needed.\r\n * @param opt.byIndex=false\r\n * @return calculationInfo\r\n * {\r\n *     stackedDimension: string\r\n *     stackedByDimension: string\r\n *     isStackedByIndex: boolean\r\n *     stackedOverDimension: string\r\n *     stackResultDimension: string\r\n * }\r\n */\nexport function enableDataStack(seriesModel, dimensionsInput, opt) {\n  opt = opt || {};\n  var byIndex = opt.byIndex;\n  var stackedCoordDimension = opt.stackedCoordDimension;\n  var dimensionDefineList;\n  var schema;\n  var store;\n  if (isLegacyDimensionsInput(dimensionsInput)) {\n    dimensionDefineList = dimensionsInput;\n  } else {\n    schema = dimensionsInput.schema;\n    dimensionDefineList = schema.dimensions;\n    store = dimensionsInput.store;\n  }\n  // Compatibal: when `stack` is set as '', do not stack.\n  var mayStack = !!(seriesModel && seriesModel.get('stack'));\n  var stackedByDimInfo;\n  var stackedDimInfo;\n  var stackResultDimension;\n  var stackedOverDimension;\n  each(dimensionDefineList, function (dimensionInfo, index) {\n    if (isString(dimensionInfo)) {\n      dimensionDefineList[index] = dimensionInfo = {\n        name: dimensionInfo\n      };\n    }\n    if (mayStack && !dimensionInfo.isExtraCoord) {\n      // Find the first ordinal dimension as the stackedByDimInfo.\n      if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n        stackedByDimInfo = dimensionInfo;\n      }\n      // Find the first stackable dimension as the stackedDimInfo.\n      if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n        stackedDimInfo = dimensionInfo;\n      }\n    }\n  });\n  if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n    // Compatible with previous design, value axis (time axis) only stack by index.\n    // It may make sense if the user provides elaborately constructed data.\n    byIndex = true;\n  }\n  // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n  // That put stack logic in List is for using conveniently in echarts extensions, but it\n  // might not be a good way.\n  if (stackedDimInfo) {\n    // Use a weird name that not duplicated with other names.\n    // Also need to use seriesModel.id as postfix because different\n    // series may share same data store. The stack dimension needs to be distinguished.\n    stackResultDimension = '__\\0ecstackresult_' + seriesModel.id;\n    stackedOverDimension = '__\\0ecstackedover_' + seriesModel.id;\n    // Create inverted index to fast query index by value.\n    if (stackedByDimInfo) {\n      stackedByDimInfo.createInvertedIndices = true;\n    }\n    var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\n    var stackedDimType = stackedDimInfo.type;\n    var stackedDimCoordIndex_1 = 0;\n    each(dimensionDefineList, function (dimensionInfo) {\n      if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\n        stackedDimCoordIndex_1++;\n      }\n    });\n    var stackedOverDimensionDefine = {\n      name: stackResultDimension,\n      coordDim: stackedDimCoordDim_1,\n      coordDimIndex: stackedDimCoordIndex_1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length\n    };\n    var stackResultDimensionDefine = {\n      name: stackedOverDimension,\n      // This dimension contains stack base (generally, 0), so do not set it as\n      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n      coordDim: stackedOverDimension,\n      coordDimIndex: stackedDimCoordIndex_1 + 1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length + 1\n    };\n    if (schema) {\n      if (store) {\n        stackedOverDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackedOverDimension, stackedDimType);\n        stackResultDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackResultDimension, stackedDimType);\n      }\n      schema.appendCalculationDimension(stackedOverDimensionDefine);\n      schema.appendCalculationDimension(stackResultDimensionDefine);\n    } else {\n      dimensionDefineList.push(stackedOverDimensionDefine);\n      dimensionDefineList.push(stackResultDimensionDefine);\n    }\n  }\n  return {\n    stackedDimension: stackedDimInfo && stackedDimInfo.name,\n    stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n    isStackedByIndex: byIndex,\n    stackedOverDimension: stackedOverDimension,\n    stackResultDimension: stackResultDimension\n  };\n}\nfunction isLegacyDimensionsInput(dimensionsInput) {\n  return !isSeriesDataSchema(dimensionsInput.schema);\n}\nexport function isDimensionStacked(data, stackedDim) {\n  // Each single series only maps to one pair of axis. So we do not need to\n  // check stackByDim, whatever stacked by a dimension or stacked by index.\n  return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\n}\nexport function getStackedDimension(data, targetDim) {\n  return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as clazzUtil from '../util/clazz.js';\nvar Scale = /** @class */function () {\n  function Scale(setting) {\n    this._setting = setting || {};\n    this._extent = [Infinity, -Infinity];\n  }\n  Scale.prototype.getSetting = function (name) {\n    return this._setting[name];\n  };\n  /**\r\n   * Set extent from data\r\n   */\n  Scale.prototype.unionExtent = function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]);\n    // not setExtent because in log axis it may transformed to power\n    // this.setExtent(extent[0], extent[1]);\n  };\n  /**\r\n   * Set extent from data\r\n   */\n  Scale.prototype.unionExtentFromData = function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\r\n   * Get extent\r\n   *\r\n   * Extent is always in increase order.\r\n   */\n  Scale.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\r\n   * Set extent\r\n   */\n  Scale.prototype.setExtent = function (start, end) {\n    var thisExtent = this._extent;\n    if (!isNaN(start)) {\n      thisExtent[0] = start;\n    }\n    if (!isNaN(end)) {\n      thisExtent[1] = end;\n    }\n  };\n  /**\r\n   * If value is in extent range\r\n   */\n  Scale.prototype.isInExtentRange = function (value) {\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  /**\r\n   * When axis extent depends on data and no data exists,\r\n   * axis ticks should not be drawn, which is named 'blank'.\r\n   */\n  Scale.prototype.isBlank = function () {\n    return this._isBlank;\n  };\n  /**\r\n   * When axis extent depends on data and no data exists,\r\n   * axis ticks should not be drawn, which is named 'blank'.\r\n   */\n  Scale.prototype.setBlank = function (isBlank) {\n    this._isBlank = isBlank;\n  };\n  return Scale;\n}();\nclazzUtil.enableClassManagement(Scale);\nexport default Scale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, isObject, map, isString } from 'zrender/lib/core/util.js';\nvar uidBase = 0;\nvar OrdinalMeta = /** @class */function () {\n  function OrdinalMeta(opt) {\n    this.categories = opt.categories || [];\n    this._needCollect = opt.needCollect;\n    this._deduplication = opt.deduplication;\n    this.uid = ++uidBase;\n  }\n  OrdinalMeta.createByAxisModel = function (axisModel) {\n    var option = axisModel.option;\n    var data = option.data;\n    var categories = data && map(data, getName);\n    return new OrdinalMeta({\n      categories: categories,\n      needCollect: !categories,\n      // deduplication is default in axis.\n      deduplication: option.dedplication !== false\n    });\n  };\n  ;\n  OrdinalMeta.prototype.getOrdinal = function (category) {\n    // @ts-ignore\n    return this._getOrCreateMap().get(category);\n  };\n  /**\r\n   * @return The ordinal. If not found, return NaN.\r\n   */\n  OrdinalMeta.prototype.parseAndCollect = function (category) {\n    var index;\n    var needCollect = this._needCollect;\n    // The value of category dim can be the index of the given category set.\n    // This feature is only supported when !needCollect, because we should\n    // consider a common case: a value is 2017, which is a number but is\n    // expected to be tread as a category. This case usually happen in dataset,\n    // where it happent to be no need of the index feature.\n    if (!isString(category) && !needCollect) {\n      return category;\n    }\n    // Optimize for the scenario:\n    // category is ['2012-01-01', '2012-01-02', ...], where the input\n    // data has been ensured not duplicate and is large data.\n    // Notice, if a dataset dimension provide categroies, usually echarts\n    // should remove duplication except user tell echarts dont do that\n    // (set axis.deduplication = false), because echarts do not know whether\n    // the values in the category dimension has duplication (consider the\n    // parallel-aqi example)\n    if (needCollect && !this._deduplication) {\n      index = this.categories.length;\n      this.categories[index] = category;\n      return index;\n    }\n    var map = this._getOrCreateMap();\n    // @ts-ignore\n    index = map.get(category);\n    if (index == null) {\n      if (needCollect) {\n        index = this.categories.length;\n        this.categories[index] = category;\n        // @ts-ignore\n        map.set(category, index);\n      } else {\n        index = NaN;\n      }\n    }\n    return index;\n  };\n  // Consider big data, do not create map until needed.\n  OrdinalMeta.prototype._getOrCreateMap = function () {\n    return this._map || (this._map = createHashMap(this.categories));\n  };\n  return OrdinalMeta;\n}();\nfunction getName(obj) {\n  if (isObject(obj) && obj.value != null) {\n    return obj.value;\n  } else {\n    return obj + '';\n  }\n}\nexport default OrdinalMeta;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getPrecision, round, nice, quantityExponent } from '../util/number.js';\nexport function isValueNice(val) {\n  var exp10 = Math.pow(10, quantityExponent(Math.abs(val)));\n  var f = Math.abs(val / exp10);\n  return f === 0 || f === 1 || f === 2 || f === 3 || f === 5;\n}\nexport function isIntervalOrLogScale(scale) {\n  return scale.type === 'interval' || scale.type === 'log';\n}\n/**\r\n * @param extent Both extent[0] and extent[1] should be valid number.\r\n *               Should be extent[0] < extent[1].\r\n * @param splitNumber splitNumber should be >= 1.\r\n */\nexport function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\n  var result = {};\n  var span = extent[1] - extent[0];\n  var interval = result.interval = nice(span / splitNumber, true);\n  if (minInterval != null && interval < minInterval) {\n    interval = result.interval = minInterval;\n  }\n  if (maxInterval != null && interval > maxInterval) {\n    interval = result.interval = maxInterval;\n  }\n  // Tow more digital for tick.\n  var precision = result.intervalPrecision = getIntervalPrecision(interval);\n  // Niced extent inside original extent\n  var niceTickExtent = result.niceTickExtent = [round(Math.ceil(extent[0] / interval) * interval, precision), round(Math.floor(extent[1] / interval) * interval, precision)];\n  fixExtent(niceTickExtent, extent);\n  return result;\n}\nexport function increaseInterval(interval) {\n  var exp10 = Math.pow(10, quantityExponent(interval));\n  // Increase interval\n  var f = interval / exp10;\n  if (!f) {\n    f = 1;\n  } else if (f === 2) {\n    f = 3;\n  } else if (f === 3) {\n    f = 5;\n  } else {\n    // f is 1 or 5\n    f *= 2;\n  }\n  return round(f * exp10);\n}\n/**\r\n * @return interval precision\r\n */\nexport function getIntervalPrecision(interval) {\n  // Tow more digital for tick.\n  return getPrecision(interval) + 2;\n}\nfunction clamp(niceTickExtent, idx, extent) {\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n}\n// In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\nexport function fixExtent(niceTickExtent, extent) {\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n  clamp(niceTickExtent, 0, extent);\n  clamp(niceTickExtent, 1, extent);\n  if (niceTickExtent[0] > niceTickExtent[1]) {\n    niceTickExtent[0] = niceTickExtent[1];\n  }\n}\nexport function contain(val, extent) {\n  return val >= extent[0] && val <= extent[1];\n}\nexport function normalize(val, extent) {\n  if (extent[1] === extent[0]) {\n    return 0.5;\n  }\n  return (val - extent[0]) / (extent[1] - extent[0]);\n}\nexport function scale(val, extent) {\n  return val * (extent[1] - extent[0]) + extent[0];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Linear continuous scale\r\n * http://en.wikipedia.org/wiki/Level_of_measurement\r\n */\n// FIXME only one data\nimport Scale from './Scale.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport * as scaleHelper from './helper.js';\nimport { isArray, map, isObject, isString } from 'zrender/lib/core/util.js';\nvar OrdinalScale = /** @class */function (_super) {\n  __extends(OrdinalScale, _super);\n  function OrdinalScale(setting) {\n    var _this = _super.call(this, setting) || this;\n    _this.type = 'ordinal';\n    var ordinalMeta = _this.getSetting('ordinalMeta');\n    // Caution: Should not use instanceof, consider ec-extensions using\n    // import approach to get OrdinalMeta class.\n    if (!ordinalMeta) {\n      ordinalMeta = new OrdinalMeta({});\n    }\n    if (isArray(ordinalMeta)) {\n      ordinalMeta = new OrdinalMeta({\n        categories: map(ordinalMeta, function (item) {\n          return isObject(item) ? item.value : item;\n        })\n      });\n    }\n    _this._ordinalMeta = ordinalMeta;\n    _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\n    return _this;\n  }\n  OrdinalScale.prototype.parse = function (val) {\n    // Caution: Math.round(null) will return `0` rather than `NaN`\n    if (val == null) {\n      return NaN;\n    }\n    return isString(val) ? this._ordinalMeta.getOrdinal(val)\n    // val might be float.\n    : Math.round(val);\n  };\n  OrdinalScale.prototype.contain = function (rank) {\n    rank = this.parse(rank);\n    return scaleHelper.contain(rank, this._extent) && this._ordinalMeta.categories[rank] != null;\n  };\n  /**\r\n   * Normalize given rank or name to linear [0, 1]\r\n   * @param val raw ordinal number.\r\n   * @return normalized value in [0, 1].\r\n   */\n  OrdinalScale.prototype.normalize = function (val) {\n    val = this._getTickNumber(this.parse(val));\n    return scaleHelper.normalize(val, this._extent);\n  };\n  /**\r\n   * @param val normalized value in [0, 1].\r\n   * @return raw ordinal number.\r\n   */\n  OrdinalScale.prototype.scale = function (val) {\n    val = Math.round(scaleHelper.scale(val, this._extent));\n    return this.getRawOrdinalNumber(val);\n  };\n  OrdinalScale.prototype.getTicks = function () {\n    var ticks = [];\n    var extent = this._extent;\n    var rank = extent[0];\n    while (rank <= extent[1]) {\n      ticks.push({\n        value: rank\n      });\n      rank++;\n    }\n    return ticks;\n  };\n  OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\n    // Not support.\n    return;\n  };\n  /**\r\n   * @see `Ordinal['_ordinalNumbersByTick']`\r\n   */\n  OrdinalScale.prototype.setSortInfo = function (info) {\n    if (info == null) {\n      this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\n      return;\n    }\n    var infoOrdinalNumbers = info.ordinalNumbers;\n    var ordinalsByTick = this._ordinalNumbersByTick = [];\n    var ticksByOrdinal = this._ticksByOrdinalNumber = [];\n    // Unnecessary support negative tick in `realtimeSort`.\n    var tickNum = 0;\n    var allCategoryLen = this._ordinalMeta.categories.length;\n    for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\n      var ordinalNumber = infoOrdinalNumbers[tickNum];\n      ordinalsByTick[tickNum] = ordinalNumber;\n      ticksByOrdinal[ordinalNumber] = tickNum;\n    }\n    // Handle that `series.data` only covers part of the `axis.category.data`.\n    var unusedOrdinal = 0;\n    for (; tickNum < allCategoryLen; ++tickNum) {\n      while (ticksByOrdinal[unusedOrdinal] != null) {\n        unusedOrdinal++;\n      }\n      ;\n      ordinalsByTick.push(unusedOrdinal);\n      ticksByOrdinal[unusedOrdinal] = tickNum;\n    }\n  };\n  OrdinalScale.prototype._getTickNumber = function (ordinal) {\n    var ticksByOrdinalNumber = this._ticksByOrdinalNumber;\n    // also support ordinal out of range of `ordinalMeta.categories.length`,\n    // where ordinal numbers are used as tick value directly.\n    return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\n  };\n  /**\r\n   * @usage\r\n   * ```js\r\n   * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\r\n   *\r\n   * // case0\r\n   * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\r\n   * // case1\r\n   * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\r\n   * // case2\r\n   * const coord = axis.dataToCoord(ordinalNumber);\r\n   * ```\r\n   *\r\n   * @param {OrdinalNumber} tickNumber index of display\r\n   */\n  OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\n    var ordinalNumbersByTick = this._ordinalNumbersByTick;\n    // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\n    // where ordinal numbers are used as tick value directly.\n    return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\n  };\n  /**\r\n   * Get item on tick\r\n   */\n  OrdinalScale.prototype.getLabel = function (tick) {\n    if (!this.isBlank()) {\n      var ordinalNumber = this.getRawOrdinalNumber(tick.value);\n      var cateogry = this._ordinalMeta.categories[ordinalNumber];\n      // Note that if no data, ordinalMeta.categories is an empty array.\n      // Return empty if it's not exist.\n      return cateogry == null ? '' : cateogry + '';\n    }\n  };\n  OrdinalScale.prototype.count = function () {\n    return this._extent[1] - this._extent[0] + 1;\n  };\n  OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\r\n   * @override\r\n   * If value is in extent range\r\n   */\n  OrdinalScale.prototype.isInExtentRange = function (value) {\n    value = this._getTickNumber(value);\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  OrdinalScale.prototype.getOrdinalMeta = function () {\n    return this._ordinalMeta;\n  };\n  OrdinalScale.prototype.calcNiceTicks = function () {};\n  OrdinalScale.prototype.calcNiceExtent = function () {};\n  OrdinalScale.type = 'ordinal';\n  return OrdinalScale;\n}(Scale);\nScale.registerClass(OrdinalScale);\nexport default OrdinalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as numberUtil from '../util/number.js';\nimport * as formatUtil from '../util/format.js';\nimport Scale from './Scale.js';\nimport * as helper from './helper.js';\nvar roundNumber = numberUtil.round;\nvar IntervalScale = /** @class */function (_super) {\n  __extends(IntervalScale, _super);\n  function IntervalScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'interval';\n    // Step is calculated in adjustExtent.\n    _this._interval = 0;\n    _this._intervalPrecision = 2;\n    return _this;\n  }\n  IntervalScale.prototype.parse = function (val) {\n    return val;\n  };\n  IntervalScale.prototype.contain = function (val) {\n    return helper.contain(val, this._extent);\n  };\n  IntervalScale.prototype.normalize = function (val) {\n    return helper.normalize(val, this._extent);\n  };\n  IntervalScale.prototype.scale = function (val) {\n    return helper.scale(val, this._extent);\n  };\n  IntervalScale.prototype.setExtent = function (start, end) {\n    var thisExtent = this._extent;\n    // start,end may be a Number like '25',so...\n    if (!isNaN(start)) {\n      thisExtent[0] = parseFloat(start);\n    }\n    if (!isNaN(end)) {\n      thisExtent[1] = parseFloat(end);\n    }\n  };\n  IntervalScale.prototype.unionExtent = function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]);\n    // unionExtent may called by it's sub classes\n    this.setExtent(extent[0], extent[1]);\n  };\n  IntervalScale.prototype.getInterval = function () {\n    return this._interval;\n  };\n  IntervalScale.prototype.setInterval = function (interval) {\n    this._interval = interval;\n    // Dropped auto calculated niceExtent and use user-set extent.\n    // We assume user wants to set both interval, min, max to get a better result.\n    this._niceExtent = this._extent.slice();\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\n  };\n  /**\r\n   * @param expandToNicedExtent Whether expand the ticks to niced extent.\r\n   */\n  IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\n    var interval = this._interval;\n    var extent = this._extent;\n    var niceTickExtent = this._niceExtent;\n    var intervalPrecision = this._intervalPrecision;\n    var ticks = [];\n    // If interval is 0, return [];\n    if (!interval) {\n      return ticks;\n    }\n    // Consider this case: using dataZoom toolbox, zoom and zoom.\n    var safeLimit = 10000;\n    if (extent[0] < niceTickExtent[0]) {\n      if (expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[0]\n        });\n      }\n    }\n    var tick = niceTickExtent[0];\n    while (tick <= niceTickExtent[1]) {\n      ticks.push({\n        value: tick\n      });\n      // Avoid rounding error\n      tick = roundNumber(tick + interval, intervalPrecision);\n      if (tick === ticks[ticks.length - 1].value) {\n        // Consider out of safe float point, e.g.,\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\n        break;\n      }\n      if (ticks.length > safeLimit) {\n        return [];\n      }\n    }\n    // Consider this case: the last item of ticks is smaller\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\n    if (extent[1] > lastNiceTick) {\n      if (expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(lastNiceTick + interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[1]\n        });\n      }\n    }\n    return ticks;\n  };\n  IntervalScale.prototype.getMinorTicks = function (splitNumber) {\n    var ticks = this.getTicks(true);\n    var minorTicks = [];\n    var extent = this.getExtent();\n    for (var i = 1; i < ticks.length; i++) {\n      var nextTick = ticks[i];\n      var prevTick = ticks[i - 1];\n      var count = 0;\n      var minorTicksGroup = [];\n      var interval = nextTick.value - prevTick.value;\n      var minorInterval = interval / splitNumber;\n      while (count < splitNumber - 1) {\n        var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval);\n        // For the first and last interval. The count may be less than splitNumber.\n        if (minorTick > extent[0] && minorTick < extent[1]) {\n          minorTicksGroup.push(minorTick);\n        }\n        count++;\n      }\n      minorTicks.push(minorTicksGroup);\n    }\n    return minorTicks;\n  };\n  /**\r\n   * @param opt.precision If 'auto', use nice presision.\r\n   * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\r\n   */\n  IntervalScale.prototype.getLabel = function (data, opt) {\n    if (data == null) {\n      return '';\n    }\n    var precision = opt && opt.precision;\n    if (precision == null) {\n      precision = numberUtil.getPrecision(data.value) || 0;\n    } else if (precision === 'auto') {\n      // Should be more precise then tick.\n      precision = this._intervalPrecision;\n    }\n    // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n    var dataNum = roundNumber(data.value, precision, true);\n    return formatUtil.addCommas(dataNum);\n  };\n  /**\r\n   * @param splitNumber By default `5`.\r\n   */\n  IntervalScale.prototype.calcNiceTicks = function (splitNumber, minInterval, maxInterval) {\n    splitNumber = splitNumber || 5;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    if (!isFinite(span)) {\n      return;\n    }\n    // User may set axis min 0 and data are all negative\n    // FIXME If it needs to reverse ?\n    if (span < 0) {\n      span = -span;\n      extent.reverse();\n    }\n    var result = helper.intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\n    this._intervalPrecision = result.intervalPrecision;\n    this._interval = result.interval;\n    this._niceExtent = result.niceTickExtent;\n  };\n  IntervalScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent;\n    // If extent start and end are same, expand them\n    if (extent[0] === extent[1]) {\n      if (extent[0] !== 0) {\n        // Expand extent\n        // Note that extents can be both negative. See #13154\n        var expandSize = Math.abs(extent[0]);\n        // In the fowllowing case\n        //      Axis has been fixed max 100\n        //      Plus data are all 100 and axis extent are [100, 100].\n        // Extend to the both side will cause expanded max is larger than fixed max.\n        // So only expand to the smaller side.\n        if (!opt.fixMax) {\n          extent[1] += expandSize / 2;\n          extent[0] -= expandSize / 2;\n        } else {\n          extent[0] -= expandSize / 2;\n        }\n      } else {\n        extent[1] = 1;\n      }\n    }\n    var span = extent[1] - extent[0];\n    // If there are no data and extent are [Infinity, -Infinity]\n    if (!isFinite(span)) {\n      extent[0] = 0;\n      extent[1] = 1;\n    }\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n    // let extent = this._extent;\n    var interval = this._interval;\n    if (!opt.fixMin) {\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\n    }\n    if (!opt.fixMax) {\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\n    }\n  };\n  IntervalScale.prototype.setNiceExtent = function (min, max) {\n    this._niceExtent = [min, max];\n  };\n  IntervalScale.type = 'interval';\n  return IntervalScale;\n}(Scale);\nScale.registerClass(IntervalScale);\nexport default IntervalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\n/* global Float32Array */\nvar supportFloat32Array = typeof Float32Array !== 'undefined';\nvar Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\nexport function createFloat32Array(arg) {\n  if (isArray(arg)) {\n    // Return self directly if don't support TypedArray.\n    return supportFloat32Array ? new Float32Array(arg) : arg;\n  }\n  // Else is number\n  return new Float32ArrayCtor(arg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, defaults, keys } from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../util/number.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { createFloat32Array } from '../util/vendor.js';\nvar STACK_PREFIX = '__ec_stack_';\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n}\nfunction getAxisKey(axis) {\n  return axis.dim + axis.index;\n}\n/**\r\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\r\n */\nexport function getLayoutOnAxis(opt) {\n  var params = [];\n  var baseAxis = opt.axis;\n  var axisKey = 'axis0';\n  if (baseAxis.type !== 'category') {\n    return;\n  }\n  var bandWidth = baseAxis.getBandWidth();\n  for (var i = 0; i < opt.count || 0; i++) {\n    params.push(defaults({\n      bandWidth: bandWidth,\n      axisKey: axisKey,\n      stackId: STACK_PREFIX + i\n    }, opt));\n  }\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\n  var result = [];\n  for (var i = 0; i < opt.count; i++) {\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\n    item.offsetCenter = item.offset + item.width / 2;\n    result.push(item);\n  }\n  return result;\n}\nexport function prepareLayoutBarSeries(seriesType, ecModel) {\n  var seriesModels = [];\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for cartesian2d only\n    if (isOnCartesian(seriesModel)) {\n      seriesModels.push(seriesModel);\n    }\n  });\n  return seriesModels;\n}\n/**\r\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\r\n * values.\r\n * This works for time axes, value axes, and log axes.\r\n * For a single time axis, return value is in the form like\r\n * {'x_0': [1000000]}.\r\n * The value of 1000000 is in milliseconds.\r\n */\nfunction getValueAxesMinGaps(barSeries) {\n  /**\r\n   * Map from axis.index to values.\r\n   * For a single time axis, axisValues is in the form like\r\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\r\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\r\n   * series.\r\n   */\n  var axisValues = {};\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n      return;\n    }\n    var data = seriesModel.getData();\n    var key = baseAxis.dim + '_' + baseAxis.index;\n    var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n    var store = data.getStore();\n    for (var i = 0, cnt = store.count(); i < cnt; ++i) {\n      var value = store.get(dimIdx, i);\n      if (!axisValues[key]) {\n        // No previous data for the axis\n        axisValues[key] = [value];\n      } else {\n        // No value in previous series\n        axisValues[key].push(value);\n      }\n      // Ignore duplicated time values in the same axis\n    }\n  });\n  var axisMinGaps = {};\n  for (var key in axisValues) {\n    if (axisValues.hasOwnProperty(key)) {\n      var valuesInAxis = axisValues[key];\n      if (valuesInAxis) {\n        // Sort axis values into ascending order to calculate gaps\n        valuesInAxis.sort(function (a, b) {\n          return a - b;\n        });\n        var min = null;\n        for (var j = 1; j < valuesInAxis.length; ++j) {\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n          if (delta > 0) {\n            // Ignore 0 delta because they are of the same axis value\n            min = min === null ? delta : Math.min(min, delta);\n          }\n        }\n        // Set to null if only have one data\n        axisMinGaps[key] = min;\n      }\n    }\n  }\n  return axisMinGaps;\n}\nexport function makeColumnLayout(barSeries) {\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\n  var seriesInfoList = [];\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth;\n    if (baseAxis.type === 'category') {\n      bandWidth = baseAxis.getBandWidth();\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var minGap = axisMinGaps[key];\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n      var scale = baseAxis.scale.getExtent();\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n    } else {\n      var data = seriesModel.getData();\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    }\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barMinWidth = parsePercent(\n    // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\n    // the auto-calculated bar width might be less than 0.5 / 1.\n    seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    seriesInfoList.push({\n      bandWidth: bandWidth,\n      barWidth: barWidth,\n      barMaxWidth: barMaxWidth,\n      barMinWidth: barMinWidth,\n      barGap: barGap,\n      barCategoryGap: barCategoryGap,\n      axisKey: getAxisKey(baseAxis),\n      stackId: getSeriesStackId(seriesModel)\n    });\n  });\n  return doCalBarWidthAndOffset(seriesInfoList);\n}\nfunction doCalBarWidthAndOffset(seriesInfoList) {\n  // Columns info on each category axis. Key is cartesian name\n  var columnsMap = {};\n  each(seriesInfoList, function (seriesInfo, idx) {\n    var axisKey = seriesInfo.axisKey;\n    var bandWidth = seriesInfo.bandWidth;\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: null,\n      gap: '20%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = seriesInfo.stackId;\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    // Caution: In a single coordinate system, these barGrid attributes\n    // will be shared by series. Consider that they have default values,\n    // only the attributes set on the last series will work.\n    // Do not change this fact unless there will be a break change.\n    var barWidth = seriesInfo.barWidth;\n    if (barWidth && !stacks[stackId].width) {\n      // See #6312, do not restrict width.\n      stacks[stackId].width = barWidth;\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n    var barMaxWidth = seriesInfo.barMaxWidth;\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    var barMinWidth = seriesInfo.barMinWidth;\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n    var barGap = seriesInfo.barGap;\n    barGap != null && (columnsOnAxis.gap = barGap);\n    var barCategoryGap = seriesInfo.barCategoryGap;\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGapPercent = columnsOnAxis.categoryGap;\n    if (categoryGapPercent == null) {\n      var columnCount = keys(stacks).length;\n      // More columns in one group\n      // the spaces between group is smaller. Or the column will be too thin.\n      categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\n    }\n    var categoryGap = parsePercent(categoryGapPercent, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    // Find if any auto calculated bar exceeded maxBarWidth\n    each(stacks, function (column) {\n      var maxWidth = column.maxWidth;\n      var minWidth = column.minWidth;\n      if (!column.width) {\n        var finalWidth = autoWidth;\n        if (maxWidth && maxWidth < finalWidth) {\n          finalWidth = Math.min(maxWidth, remainedWidth);\n        }\n        // `minWidth` has higher priority. `minWidth` decide that whether the\n        // bar is able to be visible. So `minWidth` should not be restricted\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n        // the extreme cases for `value` axis, bars are allowed to overlap\n        // with each other if `minWidth` specified.\n        if (minWidth && minWidth > finalWidth) {\n          finalWidth = minWidth;\n        }\n        if (finalWidth !== autoWidth) {\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      } else {\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n        // CSS does. Because barWidth can be a percent value, where\n        // `barMaxWidth` can be used to restrict the final width.\n        var finalWidth = column.width;\n        if (maxWidth) {\n          finalWidth = Math.min(finalWidth, maxWidth);\n        }\n        // `minWidth` has higher priority, as described above\n        if (minWidth) {\n          finalWidth = Math.max(finalWidth, minWidth);\n        }\n        column.width = finalWidth;\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\n        autoWidthCount--;\n      }\n    });\n    // Recalculate width again\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n    var offset = -widthSum / 2;\n    each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        bandWidth: bandWidth,\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n  if (barWidthAndOffset && axis) {\n    var result = barWidthAndOffset[getAxisKey(axis)];\n    if (result != null && seriesModel != null) {\n      return result[getSeriesStackId(seriesModel)];\n    }\n    return result;\n  }\n}\nexport { retrieveColumnLayout };\nexport function layout(seriesType, ecModel) {\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\n  each(seriesModels, function (seriesModel) {\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    data.setLayout({\n      bandWidth: columnLayoutInfo.bandWidth,\n      offset: columnOffset,\n      size: columnWidth\n    });\n  });\n}\n// TODO: Do not support stack in large mode yet.\nexport function createProgressiveLayout(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      if (!isOnCartesian(seriesModel)) {\n        return;\n      }\n      var data = seriesModel.getData();\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var valueAxis = cartesian.getOtherAxis(baseAxis);\n      var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\n      var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n      var drawBackground = seriesModel.get('showBackground', true);\n      var valueDim = data.mapDimension(valueAxis.dim);\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\n      var isValueAxisH = valueAxis.isHorizontal();\n      var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\n      var isLarge = isInLargeMode(seriesModel);\n      var barMinHeight = seriesModel.get('barMinHeight') || 0;\n      var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim);\n      // Layout info.\n      var columnWidth = data.getLayout('size');\n      var columnOffset = data.getLayout('offset');\n      return {\n        progress: function (params, data) {\n          var count = params.count;\n          var largePoints = isLarge && createFloat32Array(count * 3);\n          var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\n          var largeDataIndices = isLarge && createFloat32Array(count);\n          var coordLayout = cartesian.master.getRect();\n          var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\n          var dataIndex;\n          var store = data.getStore();\n          var idxOffset = 0;\n          while ((dataIndex = params.next()) != null) {\n            var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\n            var baseValue = store.get(baseDimIdx, dataIndex);\n            var baseCoord = valueAxisStart;\n            var stackStartValue = void 0;\n            // Because of the barMinHeight, we can not use the value in\n            // stackResultDimension directly.\n            if (stacked) {\n              stackStartValue = +value - store.get(valueDimIdx, dataIndex);\n            }\n            var x = void 0;\n            var y = void 0;\n            var width = void 0;\n            var height = void 0;\n            if (isValueAxisH) {\n              var coord = cartesian.dataToPoint([value, baseValue]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([stackStartValue, baseValue]);\n                baseCoord = startCoord[0];\n              }\n              x = baseCoord;\n              y = coord[1] + columnOffset;\n              width = coord[0] - baseCoord;\n              height = columnWidth;\n              if (Math.abs(width) < barMinHeight) {\n                width = (width < 0 ? -1 : 1) * barMinHeight;\n              }\n            } else {\n              var coord = cartesian.dataToPoint([baseValue, value]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([baseValue, stackStartValue]);\n                baseCoord = startCoord[1];\n              }\n              x = coord[0] + columnOffset;\n              y = baseCoord;\n              width = columnWidth;\n              height = coord[1] - baseCoord;\n              if (Math.abs(height) < barMinHeight) {\n                // Include zero to has a positive bar\n                height = (height <= 0 ? -1 : 1) * barMinHeight;\n              }\n            }\n            if (!isLarge) {\n              data.setItemLayout(dataIndex, {\n                x: x,\n                y: y,\n                width: width,\n                height: height\n              });\n            } else {\n              largePoints[idxOffset] = x;\n              largePoints[idxOffset + 1] = y;\n              largePoints[idxOffset + 2] = isValueAxisH ? width : height;\n              if (largeBackgroundPoints) {\n                largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\n                largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\n                largeBackgroundPoints[idxOffset + 2] = bgSize;\n              }\n              largeDataIndices[dataIndex] = dataIndex;\n            }\n            idxOffset += 3;\n          }\n          if (isLarge) {\n            data.setLayout({\n              largePoints: largePoints,\n              largeDataIndices: largeDataIndices,\n              largeBackgroundPoints: largeBackgroundPoints,\n              valueAxisHorizontal: isValueAxisH\n            });\n          }\n        }\n      };\n    }\n  };\n}\nfunction isOnCartesian(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\nfunction isInLargeMode(seriesModel) {\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n}\n// See cases in `test/bar-start.html` and `#7412`, `#8747`.\nfunction getValueAxisStart(baseAxis, valueAxis) {\n  var startValue = valueAxis.model.get('startValue');\n  if (!startValue) {\n    startValue = 0;\n  }\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? startValue > 0 ? startValue : 1 : startValue));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\r\n* modifications made for this project.\r\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design has\n// considered these common cases:\n// (1) Time that is persistent in server is in UTC, but it is needed to be displayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\nimport * as numberUtil from '../util/number.js';\nimport { ONE_SECOND, ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_YEAR, format, leveledFormat, getUnitValue, timeUnits, fullLeveledFormatter, getPrimaryTimeUnit, isPrimaryTimeUnit, getDefaultFormatPrecisionOfInterval, fullYearGetterName, monthSetterName, fullYearSetterName, dateSetterName, hoursGetterName, hoursSetterName, minutesSetterName, secondsSetterName, millisecondsSetterName, monthGetterName, dateGetterName, minutesGetterName, secondsGetterName, millisecondsGetterName } from '../util/time.js';\nimport * as scaleHelper from './helper.js';\nimport IntervalScale from './Interval.js';\nimport Scale from './Scale.js';\nimport { warn } from '../util/log.js';\nimport { filter, isNumber, map } from 'zrender/lib/core/util.js';\n// FIXME 公用？\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n  return lo;\n};\nvar TimeScale = /** @class */function (_super) {\n  __extends(TimeScale, _super);\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n    _this.type = 'time';\n    return _this;\n  }\n  /**\r\n   * Get label is mainly for other components like dataZoom, tooltip.\r\n   */\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n  };\n  /**\r\n   * @override\r\n   */\n  TimeScale.prototype.getTicks = function () {\n    var interval = this._interval;\n    var extent = this._extent;\n    var ticks = [];\n    // If interval is 0, return [];\n    if (!interval) {\n      return ticks;\n    }\n    ticks.push({\n      value: extent[0],\n      level: 0\n    });\n    var useUTC = this.getSetting('useUTC');\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n    ticks = ticks.concat(innerTicks);\n    ticks.push({\n      value: extent[1],\n      level: 0\n    });\n    return ticks;\n  };\n  TimeScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent;\n    // If extent start and end are same, expand them\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    }\n    // If there are no data and extent are [Infinity, -Infinity]\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n  TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    this._approxInterval = span / approxTickNum;\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1);\n    // Interval that can be used to calculate ticks\n    this._interval = scaleIntervals[idx][1];\n    // Min level used when picking ticks from top down.\n    // We check one more level to avoid the ticks are to sparse in some case.\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n  TimeScale.prototype.parse = function (val) {\n    // val might be float.\n    return isNumber(val) ? val : +numberUtil.parseDate(val);\n  };\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(this.parse(val), this._extent);\n  };\n  TimeScale.prototype.normalize = function (val) {\n    return scaleHelper.normalize(this.parse(val), this._extent);\n  };\n  TimeScale.prototype.scale = function (val) {\n    return scaleHelper.scale(val, this._extent);\n  };\n  TimeScale.type = 'time';\n  return TimeScale;\n}(IntervalScale);\n/**\r\n * This implementation was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\nvar scaleIntervals = [\n// Format                           interval\n['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\n];\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\n  var dateA = numberUtil.parseDate(valueA);\n  var dateB = numberUtil.parseDate(valueB);\n  var isSame = function (unit) {\n    return getUnitValue(dateA, unit, isUTC) === getUnitValue(dateB, unit, isUTC);\n  };\n  var isSameYear = function () {\n    return isSame('year');\n  };\n  // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n  // const isSameQuater = () => isSameYear() && isSame('quarter');\n  var isSameMonth = function () {\n    return isSameYear() && isSame('month');\n  };\n  var isSameDay = function () {\n    return isSameMonth() && isSame('day');\n  };\n  // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n  var isSameHour = function () {\n    return isSameDay() && isSame('hour');\n  };\n  var isSameMinute = function () {\n    return isSameHour() && isSame('minute');\n  };\n  var isSameSecond = function () {\n    return isSameMinute() && isSame('second');\n  };\n  var isSameMilliSecond = function () {\n    return isSameSecond() && isSame('millisecond');\n  };\n  switch (unit) {\n    case 'year':\n      return isSameYear();\n    case 'month':\n      return isSameMonth();\n    case 'day':\n      return isSameDay();\n    case 'hour':\n      return isSameHour();\n    case 'minute':\n      return isSameMinute();\n    case 'second':\n      return isSameSecond();\n    case 'millisecond':\n      return isSameMilliSecond();\n  }\n}\n// const primaryUnitGetters = {\n//     year: fullYearGetterName(),\n//     month: monthGetterName(),\n//     day: dateGetterName(),\n//     hour: hoursGetterName(),\n//     minute: minutesGetterName(),\n//     second: secondsGetterName(),\n//     millisecond: millisecondsGetterName()\n// };\n// const primaryUnitUTCGetters = {\n//     year: fullYearGetterName(true),\n//     month: monthGetterName(true),\n//     day: dateGetterName(true),\n//     hour: hoursGetterName(true),\n//     minute: minutesGetterName(true),\n//     second: secondsGetterName(true),\n//     millisecond: millisecondsGetterName(true)\n// };\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n//     step = step || 1;\n//     switch (getPrimaryTimeUnit(unitName)) {\n//         case 'year':\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n//             break;\n//         case 'month':\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n//             break;\n//         case 'day':\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n//             break;\n//         case 'hour':\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n//             break;\n//         case 'minute':\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n//             break;\n//         case 'second':\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n//             break;\n//         case 'millisecond':\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n//             break;\n//     }\n//     return date.getTime();\n// }\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= ONE_DAY;\n  return approxInterval > 16 ? 16\n  // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick between two months.\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\nfunction getHourInterval(approxInterval) {\n  approxInterval /= ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\n  var outDate = new Date(date);\n  switch (getPrimaryTimeUnit(unitName)) {\n    case 'year':\n    case 'month':\n      outDate[monthSetterName(isUTC)](0);\n    case 'day':\n      outDate[dateSetterName(isUTC)](1);\n    case 'hour':\n      outDate[hoursSetterName(isUTC)](0);\n    case 'minute':\n      outDate[minutesSetterName(isUTC)](0);\n    case 'second':\n      outDate[secondsSetterName(isUTC)](0);\n      outDate[millisecondsSetterName(isUTC)](0);\n  }\n  return outDate.getTime();\n}\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n  var safeLimit = 10000;\n  var unitNames = timeUnits;\n  var iter = 0;\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var date = new Date(minTimestamp);\n    var dateTime = minTimestamp;\n    var d = date[getMethodName]();\n    // if (isDate) {\n    //     d -= 1; // Starts with 0;   PENDING\n    // }\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      d += interval;\n      date[setMethodName](d);\n      dateTime = date.getTime();\n    }\n    // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n    if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        // TODO Optimize. Not include so may ticks.\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n      if (startTick === endTick) {\n        continue;\n      }\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\n          getterName = fullYearGetterName(isUTC);\n          setterName = fullYearSetterName(isUTC);\n          break;\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = monthGetterName(isUTC);\n          setterName = monthSetterName(isUTC);\n          break;\n        case 'week': // PENDING If week is added. Ignore day.\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n          getterName = dateGetterName(isUTC);\n          setterName = dateSetterName(isUTC);\n          isDate = true;\n          break;\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = hoursGetterName(isUTC);\n          setterName = hoursSetterName(isUTC);\n          break;\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = minutesGetterName(isUTC);\n          setterName = minutesSetterName(isUTC);\n          break;\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = secondsGetterName(isUTC);\n          setterName = secondsSetterName(isUTC);\n          break;\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = millisecondsGetterName(isUTC);\n          setterName = millisecondsSetterName(isUTC);\n          break;\n      }\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        // Add nearest years to the left extent.\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    }\n    // newAddedTicks.length && console.log(unitName, newAddedTicks);\n    return newAddedTicks;\n  }\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n    var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\n    if (!isPrimaryTimeUnit(unitNames[i])) {\n      // TODO\n      continue;\n    }\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount;\n        // Remove the duplicate so the tick count can be precisely.\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval;\n        // Added too much in this level and not too less in last level\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        }\n        // Only treat primary time unit as one level.\n        levelsTicks.push(levelTicksRemoveDuplicated);\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      }\n      // Reset if next unitName is primary\n      currentLevelTicks = [];\n    }\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (iter >= safeLimit) {\n      warn('Exceed safe limit.');\n    }\n  }\n  var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\n    return filter(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n    for (var k = 0; k < levelTicks.length; ++k) {\n      ticks.push({\n        value: levelTicks[k].value,\n        level: maxLevel - i\n      });\n    }\n  }\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  });\n  // Remove duplicates\n  var result = [];\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n  return result;\n}\nScale.registerClass(TimeScale);\nexport default TimeScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Scale from './Scale.js';\nimport * as numberUtil from '../util/number.js';\nimport * as scaleHelper from './helper.js';\n// Use some method of IntervalScale\nimport IntervalScale from './Interval.js';\nvar scaleProto = Scale.prototype;\n// FIXME:TS refactor: not good to call it directly with `this`?\nvar intervalScaleProto = IntervalScale.prototype;\nvar roundingErrorFix = numberUtil.round;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathPow = Math.pow;\nvar mathLog = Math.log;\nvar LogScale = /** @class */function (_super) {\n  __extends(LogScale, _super);\n  function LogScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'log';\n    _this.base = 10;\n    _this._originalScale = new IntervalScale();\n    // FIXME:TS actually used by `IntervalScale`\n    _this._interval = 0;\n    return _this;\n  }\n  /**\r\n   * @param Whether expand the ticks to niced extent.\r\n   */\n  LogScale.prototype.getTicks = function (expandToNicedExtent) {\n    var originalScale = this._originalScale;\n    var extent = this._extent;\n    var originalExtent = originalScale.getExtent();\n    var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\n    return zrUtil.map(ticks, function (tick) {\n      var val = tick.value;\n      var powVal = numberUtil.round(mathPow(this.base, val));\n      // Fix #4158\n      powVal = val === extent[0] && this._fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\n      powVal = val === extent[1] && this._fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\n      return {\n        value: powVal\n      };\n    }, this);\n  };\n  LogScale.prototype.setExtent = function (start, end) {\n    var base = mathLog(this.base);\n    // log(-Infinity) is NaN, so safe guard here\n    start = mathLog(Math.max(0, start)) / base;\n    end = mathLog(Math.max(0, end)) / base;\n    intervalScaleProto.setExtent.call(this, start, end);\n  };\n  /**\r\n   * @return {number} end\r\n   */\n  LogScale.prototype.getExtent = function () {\n    var base = this.base;\n    var extent = scaleProto.getExtent.call(this);\n    extent[0] = mathPow(base, extent[0]);\n    extent[1] = mathPow(base, extent[1]);\n    // Fix #4158\n    var originalScale = this._originalScale;\n    var originalExtent = originalScale.getExtent();\n    this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n    this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n    return extent;\n  };\n  LogScale.prototype.unionExtent = function (extent) {\n    this._originalScale.unionExtent(extent);\n    var base = this.base;\n    extent[0] = mathLog(extent[0]) / mathLog(base);\n    extent[1] = mathLog(extent[1]) / mathLog(base);\n    scaleProto.unionExtent.call(this, extent);\n  };\n  LogScale.prototype.unionExtentFromData = function (data, dim) {\n    // TODO\n    // filter value that <= 0\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\r\n   * Update interval and extent of intervals for nice ticks\r\n   * @param approxTickNum default 10 Given approx tick number\r\n   */\n  LogScale.prototype.calcNiceTicks = function (approxTickNum) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    if (span === Infinity || span <= 0) {\n      return;\n    }\n    var interval = numberUtil.quantity(span);\n    var err = approxTickNum / span * interval;\n    // Filter ticks to get closer to the desired count.\n    if (err <= 0.5) {\n      interval *= 10;\n    }\n    // Interval should be integer\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n      interval *= 10;\n    }\n    var niceExtent = [numberUtil.round(mathCeil(extent[0] / interval) * interval), numberUtil.round(mathFloor(extent[1] / interval) * interval)];\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  };\n  LogScale.prototype.calcNiceExtent = function (opt) {\n    intervalScaleProto.calcNiceExtent.call(this, opt);\n    this._fixMin = opt.fixMin;\n    this._fixMax = opt.fixMax;\n  };\n  LogScale.prototype.parse = function (val) {\n    return val;\n  };\n  LogScale.prototype.contain = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleHelper.contain(val, this._extent);\n  };\n  LogScale.prototype.normalize = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleHelper.normalize(val, this._extent);\n  };\n  LogScale.prototype.scale = function (val) {\n    val = scaleHelper.scale(val, this._extent);\n    return mathPow(this.base, val);\n  };\n  LogScale.type = 'log';\n  return LogScale;\n}(Scale);\nvar proto = LogScale.prototype;\nproto.getMinorTicks = intervalScaleProto.getMinorTicks;\nproto.getLabel = intervalScaleProto.getLabel;\nfunction fixRoundingError(val, originalVal) {\n  return roundingErrorFix(val, numberUtil.getPrecision(originalVal));\n}\nScale.registerClass(LogScale);\nexport default LogScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { assert, isArray, eqNaN, isFunction } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nvar ScaleRawExtentInfo = /** @class */function () {\n  function ScaleRawExtentInfo(scale, model,\n  // Usually: data extent from all series on this axis.\n  originalExtent) {\n    this._prepareParams(scale, model, originalExtent);\n  }\n  /**\r\n   * Parameters depending on outside (like model, user callback)\r\n   * are prepared and fixed here.\r\n   */\n  ScaleRawExtentInfo.prototype._prepareParams = function (scale, model,\n  // Usually: data extent from all series on this axis.\n  dataExtent) {\n    if (dataExtent[1] < dataExtent[0]) {\n      dataExtent = [NaN, NaN];\n    }\n    this._dataMin = dataExtent[0];\n    this._dataMax = dataExtent[1];\n    var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\n    this._needCrossZero = scale.type === 'interval' && model.getNeedCrossZero && model.getNeedCrossZero();\n    var axisMinValue = model.get('min', true);\n    if (axisMinValue == null) {\n      axisMinValue = model.get('startValue', true);\n    }\n    var modelMinRaw = this._modelMinRaw = axisMinValue;\n    if (isFunction(modelMinRaw)) {\n      // This callback always provides users the full data extent (before data is filtered).\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMinRaw !== 'dataMin') {\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\n    }\n    var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\n    if (isFunction(modelMaxRaw)) {\n      // This callback always provides users the full data extent (before data is filtered).\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMaxRaw !== 'dataMax') {\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\n    }\n    if (isOrdinal) {\n      // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\n      // and progressive rendering is using, here the category result might just only contain\n      // the processed chunk rather than the entire result.\n      this._axisDataLen = model.getCategories().length;\n    } else {\n      var boundaryGap = model.get('boundaryGap');\n      var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\n      if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\n        }\n        this._boundaryGapInner = [0, 0];\n      } else {\n        this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\n      }\n    }\n  };\n  /**\r\n   * Calculate extent by prepared parameters.\r\n   * This method has no external dependency and can be called duplicatedly,\r\n   * getting the same result.\r\n   * If parameters changed, should call this method to recalcuate.\r\n   */\n  ScaleRawExtentInfo.prototype.calculate = function () {\n    // Notice: When min/max is not set (that is, when there are null/undefined,\n    // which is the most common case), these cases should be ensured:\n    // (1) For 'ordinal', show all axis.data.\n    // (2) For others:\n    //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n    //      disabled).\n    //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n    //      be the result that originalExtent enlarged by boundaryGap.\n    // (3) If no data, it should be ensured that `scale.setBlank` is set.\n    var isOrdinal = this._isOrdinal;\n    var dataMin = this._dataMin;\n    var dataMax = this._dataMax;\n    var axisDataLen = this._axisDataLen;\n    var boundaryGapInner = this._boundaryGapInner;\n    var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null;\n    // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\n    // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\n    var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\n    var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum;\n    // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\n    var minFixed = min != null;\n    var maxFixed = max != null;\n    if (min == null) {\n      min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\n    }\n    if (max == null) {\n      max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\n    }\n    (min == null || !isFinite(min)) && (min = NaN);\n    (max == null || !isFinite(max)) && (max = NaN);\n    var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen;\n    // If data extent modified, need to recalculated to ensure cross zero.\n    if (this._needCrossZero) {\n      // Axis is over zero and min is not set\n      if (min > 0 && max > 0 && !minFixed) {\n        min = 0;\n        // minFixed = true;\n      }\n      // Axis is under zero and max is not set\n      if (min < 0 && max < 0 && !maxFixed) {\n        max = 0;\n        // maxFixed = true;\n      }\n      // PENDING:\n      // When `needCrossZero` and all data is positive/negative, should it be ensured\n      // that the results processed by boundaryGap are positive/negative?\n      // If so, here `minFixed`/`maxFixed` need to be set.\n    }\n    var determinedMin = this._determinedMin;\n    var determinedMax = this._determinedMax;\n    if (determinedMin != null) {\n      min = determinedMin;\n      minFixed = true;\n    }\n    if (determinedMax != null) {\n      max = determinedMax;\n      maxFixed = true;\n    }\n    // Ensure min/max be finite number or NaN here. (not to be null/undefined)\n    // `NaN` means min/max axis is blank.\n    return {\n      min: min,\n      max: max,\n      minFixed: minFixed,\n      maxFixed: maxFixed,\n      isBlank: isBlank\n    };\n  };\n  ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen);\n    }\n    this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\n  };\n  ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\n    var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen\n      // Earse them usually means logic flaw.\n      && this[attr] == null);\n    }\n    this[attr] = val;\n  };\n  ScaleRawExtentInfo.prototype.freeze = function () {\n    // @ts-ignore\n    this.frozen = true;\n  };\n  return ScaleRawExtentInfo;\n}();\nexport { ScaleRawExtentInfo };\nvar DETERMINED_MIN_MAX_ATTR = {\n  min: '_determinedMin',\n  max: '_determinedMax'\n};\nvar DATA_MIN_MAX_ATTR = {\n  min: '_dataMin',\n  max: '_dataMax'\n};\n/**\r\n * Get scale min max and related info only depends on model settings.\r\n * This method can be called after coordinate system created.\r\n * For example, in data processing stage.\r\n *\r\n * Scale extent info probably be required multiple times during a workflow.\r\n * For example:\r\n * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\r\n * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\r\n * (3) `coordSys.update` use it to finally decide the scale extent.\r\n * But the callback of `min`/`max` should not be called multiple times.\r\n * The code below should not be implemented repeatedly either.\r\n * So we cache the result in the scale instance, which will be recreated at the beginning\r\n * of the workflow (because `scale` instance will be recreated each round of the workflow).\r\n */\nexport function ensureScaleRawExtentInfo(scale, model,\n// Usually: data extent from all series on this axis.\noriginalExtent) {\n  // Do not permit to recreate.\n  var rawExtentInfo = scale.rawExtentInfo;\n  if (rawExtentInfo) {\n    return rawExtentInfo;\n  }\n  rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent);\n  // @ts-ignore\n  scale.rawExtentInfo = rawExtentInfo;\n  return rawExtentInfo;\n}\nexport function parseAxisModelMinMax(scale, minMax) {\n  return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../scale/Ordinal.js';\nimport IntervalScale from '../scale/Interval.js';\nimport Scale from '../scale/Scale.js';\nimport { prepareLayoutBarSeries, makeColumnLayout, retrieveColumnLayout } from '../layout/barGrid.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport TimeScale from '../scale/Time.js';\nimport LogScale from '../scale/Log.js';\nimport { getStackedDimension } from '../data/helper/dataStackHelper.js';\nimport { ensureScaleRawExtentInfo } from './scaleRawExtentInfo.js';\n/**\r\n * Get axis scale extent before niced.\r\n * Item of returned array can only be number (including Infinity and NaN).\r\n *\r\n * Caution:\r\n * Precondition of calling this method:\r\n * The scale extent has been initialized using series data extent via\r\n * `scale.setExtent` or `scale.unionExtentFromData`;\r\n */\nexport function getScaleExtent(scale, model) {\n  var scaleType = scale.type;\n  var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\n  scale.setBlank(rawExtentResult.isBlank);\n  var min = rawExtentResult.min;\n  var max = rawExtentResult.max;\n  // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\n  // is base axis\n  // FIXME\n  // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\n  // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\n  //     Should not depend on series type `bar`?\n  // (3) Fix that might overlap when using dataZoom.\n  // (4) Consider other chart types using `barGrid`?\n  // See #6728, #4862, `test/bar-overflow-time-plot.html`\n  var ecModel = model.ecModel;\n  if (ecModel && scaleType === 'time' /* || scaleType === 'interval' */) {\n    var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\n    var isBaseAxisAndHasBarSeries_1 = false;\n    zrUtil.each(barSeriesModels, function (seriesModel) {\n      isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\n    });\n    if (isBaseAxisAndHasBarSeries_1) {\n      // Calculate placement of bars on axis. TODO should be decoupled\n      // with barLayout\n      var barWidthAndOffset = makeColumnLayout(barSeriesModels);\n      // Adjust axis min and max to account for overflow\n      var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\n      min = adjustedScale.min;\n      max = adjustedScale.max;\n    }\n  }\n  return {\n    extent: [min, max],\n    // \"fix\" means \"fixed\", the value should not be\n    // changed in the subsequent steps.\n    fixMin: rawExtentResult.minFixed,\n    fixMax: rawExtentResult.maxFixed\n  };\n}\nfunction adjustScaleForOverflow(min, max, model,\n// Only support cartesian coord yet.\nbarWidthAndOffset) {\n  // Get Axis Length\n  var axisExtent = model.axis.getExtent();\n  var axisLength = Math.abs(axisExtent[1] - axisExtent[0]);\n  // Get bars on current base axis and calculate min and max overflow\n  var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\n  if (barsOnCurrentAxis === undefined) {\n    return {\n      min: min,\n      max: max\n    };\n  }\n  var minOverflow = Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    minOverflow = Math.min(item.offset, minOverflow);\n  });\n  var maxOverflow = -Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    maxOverflow = Math.max(item.offset + item.width, maxOverflow);\n  });\n  minOverflow = Math.abs(minOverflow);\n  maxOverflow = Math.abs(maxOverflow);\n  var totalOverFlow = minOverflow + maxOverflow;\n  // Calculate required buffer based on old range and overflow\n  var oldRange = max - min;\n  var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\n  var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\n  max += overflowBuffer * (maxOverflow / totalOverFlow);\n  min -= overflowBuffer * (minOverflow / totalOverFlow);\n  return {\n    min: min,\n    max: max\n  };\n}\n// Precondition of calling this method:\n// The scale extent has been initialized using series data extent via\n// `scale.setExtent` or `scale.unionExtentFromData`;\nexport function niceScaleExtent(scale, inModel) {\n  var model = inModel;\n  var extentInfo = getScaleExtent(scale, model);\n  var extent = extentInfo.extent;\n  var splitNumber = model.get('splitNumber');\n  if (scale instanceof LogScale) {\n    scale.base = model.get('logBase');\n  }\n  var scaleType = scale.type;\n  var interval = model.get('interval');\n  var isIntervalOrTime = scaleType === 'interval' || scaleType === 'time';\n  scale.setExtent(extent[0], extent[1]);\n  scale.calcNiceExtent({\n    splitNumber: splitNumber,\n    fixMin: extentInfo.fixMin,\n    fixMax: extentInfo.fixMax,\n    minInterval: isIntervalOrTime ? model.get('minInterval') : null,\n    maxInterval: isIntervalOrTime ? model.get('maxInterval') : null\n  });\n  // If some one specified the min, max. And the default calculated interval\n  // is not good enough. He can specify the interval. It is often appeared\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n  // to be 60.\n  // FIXME\n  if (interval != null) {\n    scale.setInterval && scale.setInterval(interval);\n  }\n}\n/**\r\n * @param axisType Default retrieve from model.type\r\n */\nexport function createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n      default:\n        // case 'value'/'interval', 'log', or others.\n        return new (Scale.getClass(axisType) || IntervalScale)();\n    }\n  }\n}\n/**\r\n * Check if the axis cross 0\r\n */\nexport function ifAxisCrossZero(axis) {\n  var dataExtent = axis.scale.getExtent();\n  var min = dataExtent[0];\n  var max = dataExtent[1];\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\n}\n/**\r\n * @param axis\r\n * @return Label formatter function.\r\n *         param: {number} tickValue,\r\n *         param: {number} idx, the index in all ticks.\r\n *                         If category axis, this param is not required.\r\n *         return: {string} label string.\r\n */\nexport function makeLabelFormatter(axis) {\n  var labelFormatter = axis.getLabelModel().get('formatter');\n  var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\n  if (axis.scale.type === 'time') {\n    return function (tpl) {\n      return function (tick, idx) {\n        return axis.scale.getFormattedLabel(tick, idx, tpl);\n      };\n    }(labelFormatter);\n  } else if (zrUtil.isString(labelFormatter)) {\n    return function (tpl) {\n      return function (tick) {\n        // For category axis, get raw value; for numeric axis,\n        // get formatted label like '1,333,444'.\n        var label = axis.scale.getLabel(tick);\n        var text = tpl.replace('{value}', label != null ? label : '');\n        return text;\n      };\n    }(labelFormatter);\n  } else if (zrUtil.isFunction(labelFormatter)) {\n    return function (cb) {\n      return function (tick, idx) {\n        // The original intention of `idx` is \"the index of the tick in all ticks\".\n        // But the previous implementation of category axis do not consider the\n        // `axisLabel.interval`, which cause that, for example, the `interval` is\n        // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\n        // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\n        // the definition here for back compatibility.\n        if (categoryTickStart != null) {\n          idx = tick.value - categoryTickStart;\n        }\n        return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\n          level: tick.level\n        } : null);\n      };\n    }(labelFormatter);\n  } else {\n    return function (tick) {\n      return axis.scale.getLabel(tick);\n    };\n  }\n}\nexport function getAxisRawValue(axis, tick) {\n  // In category axis with data zoom, tick is not the original\n  // index of axis.data. So tick should not be exposed to user\n  // in category axis.\n  return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\n}\n/**\r\n * @param axis\r\n * @return Be null/undefined if no labels.\r\n */\nexport function estimateLabelUnionRect(axis) {\n  var axisModel = axis.model;\n  var scale = axis.scale;\n  if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\n    return;\n  }\n  var realNumberScaleTicks;\n  var tickCount;\n  var categoryScaleExtent = scale.getExtent();\n  // Optimize for large category data, avoid call `getTicks()`.\n  if (scale instanceof OrdinalScale) {\n    tickCount = scale.count();\n  } else {\n    realNumberScaleTicks = scale.getTicks();\n    tickCount = realNumberScaleTicks.length;\n  }\n  var axisLabelModel = axis.getLabelModel();\n  var labelFormatter = makeLabelFormatter(axis);\n  var rect;\n  var step = 1;\n  // Simple optimization for large amount of labels\n  if (tickCount > 40) {\n    step = Math.ceil(tickCount / 40);\n  }\n  for (var i = 0; i < tickCount; i += step) {\n    var tick = realNumberScaleTicks ? realNumberScaleTicks[i] : {\n      value: categoryScaleExtent[0] + i\n    };\n    var label = labelFormatter(tick, i);\n    var unrotatedSingleRect = axisLabelModel.getTextRect(label);\n    var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\n    rect ? rect.union(singleRect) : rect = singleRect;\n  }\n  return rect;\n}\nfunction rotateTextRect(textRect, rotate) {\n  var rotateRadians = rotate * Math.PI / 180;\n  var beforeWidth = textRect.width;\n  var beforeHeight = textRect.height;\n  var afterWidth = beforeWidth * Math.abs(Math.cos(rotateRadians)) + Math.abs(beforeHeight * Math.sin(rotateRadians));\n  var afterHeight = beforeWidth * Math.abs(Math.sin(rotateRadians)) + Math.abs(beforeHeight * Math.cos(rotateRadians));\n  var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\n  return rotatedRect;\n}\n/**\r\n * @param model axisLabelModel or axisTickModel\r\n * @return {number|String} Can be null|'auto'|number|function\r\n */\nexport function getOptionCategoryInterval(model) {\n  var interval = model.get('interval');\n  return interval == null ? 'auto' : interval;\n}\n/**\r\n * Set `categoryInterval` as 0 implicitly indicates that\r\n * show all labels regardless of overlap.\r\n * @param {Object} axis axisModel.axis\r\n */\nexport function shouldShowAllLabels(axis) {\n  return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\n}\nexport function getDataDimensionsOnAxis(data, axisDim) {\n  // Remove duplicated dat dimensions caused by `getStackedDimension`.\n  var dataDimMap = {};\n  // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\n  // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\n  // there has been stacked result dim?\n  zrUtil.each(data.mapDimensionsAll(axisDim), function (dataDim) {\n    // For example, the extent of the original dimension\n    // is [0.1, 0.5], the extent of the `stackResultDimension`\n    // is [7, 9], the final extent should NOT include [0.1, 0.5],\n    // because there is no graphic corresponding to [0.1, 0.5].\n    // See the case in `test/area-stack.html` `main1`, where area line\n    // stack needs `yAxis` not start from 0.\n    dataDimMap[getStackedDimension(data, dataDim)] = true;\n  });\n  return zrUtil.keys(dataDimMap);\n}\nexport function unionAxisExtentFromData(dataExtent, data, axisDim) {\n  if (data) {\n    zrUtil.each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\n      var seriesExtent = data.getApproximateExtent(dim);\n      seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n      seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar AxisModelCommonMixin = /** @class */function () {\n  function AxisModelCommonMixin() {}\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\r\n   * Should be implemented by each axis model if necessary.\r\n   * @return coordinate system model\r\n   */\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n  return AxisModelCommonMixin;\n}();\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as polygonContain from 'zrender/lib/contain/polygon.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport { each } from 'zrender/lib/core/util.js';\nvar TMP_TRANSFORM = [];\nfunction transformPoints(points, transform) {\n  for (var p = 0; p < points.length; p++) {\n    vec2.applyTransform(points[p], points[p], transform);\n  }\n}\nfunction updateBBoxFromPoints(points, min, max, projection) {\n  for (var i = 0; i < points.length; i++) {\n    var p = points[i];\n    if (projection) {\n      // projection may return null point.\n      p = projection.project(p);\n    }\n    if (p && isFinite(p[0]) && isFinite(p[1])) {\n      vec2.min(min, min, p);\n      vec2.max(max, max, p);\n    }\n  }\n}\nfunction centroid(points) {\n  var signedArea = 0;\n  var cx = 0;\n  var cy = 0;\n  var len = points.length;\n  var x0 = points[len - 1][0];\n  var y0 = points[len - 1][1];\n  // Polygon should been closed.\n  for (var i = 0; i < len; i++) {\n    var x1 = points[i][0];\n    var y1 = points[i][1];\n    var a = x0 * y1 - x1 * y0;\n    signedArea += a;\n    cx += (x0 + x1) * a;\n    cy += (y0 + y1) * a;\n    x0 = x1;\n    y0 = y1;\n  }\n  return signedArea ? [cx / signedArea / 3, cy / signedArea / 3, signedArea] : [points[0][0] || 0, points[0][1] || 0];\n}\nvar Region = /** @class */function () {\n  function Region(name) {\n    this.name = name;\n  }\n  Region.prototype.setCenter = function (center) {\n    this._center = center;\n  };\n  /**\r\n   * Get center point in data unit. That is,\r\n   * for GeoJSONRegion, the unit is lat/lng,\r\n   * for GeoSVGRegion, the unit is SVG local coord.\r\n   */\n  Region.prototype.getCenter = function () {\n    var center = this._center;\n    if (!center) {\n      // In most cases there are no need to calculate this center.\n      // So calculate only when called.\n      center = this._center = this.calcCenter();\n    }\n    return center;\n  };\n  return Region;\n}();\nexport { Region };\nvar GeoJSONPolygonGeometry = /** @class */function () {\n  function GeoJSONPolygonGeometry(exterior, interiors) {\n    this.type = 'polygon';\n    this.exterior = exterior;\n    this.interiors = interiors;\n  }\n  return GeoJSONPolygonGeometry;\n}();\nexport { GeoJSONPolygonGeometry };\nvar GeoJSONLineStringGeometry = /** @class */function () {\n  function GeoJSONLineStringGeometry(points) {\n    this.type = 'linestring';\n    this.points = points;\n  }\n  return GeoJSONLineStringGeometry;\n}();\nexport { GeoJSONLineStringGeometry };\nvar GeoJSONRegion = /** @class */function (_super) {\n  __extends(GeoJSONRegion, _super);\n  function GeoJSONRegion(name, geometries, cp) {\n    var _this = _super.call(this, name) || this;\n    _this.type = 'geoJSON';\n    _this.geometries = geometries;\n    _this._center = cp && [cp[0], cp[1]];\n    return _this;\n  }\n  GeoJSONRegion.prototype.calcCenter = function () {\n    var geometries = this.geometries;\n    var largestGeo;\n    var largestGeoSize = 0;\n    for (var i = 0; i < geometries.length; i++) {\n      var geo = geometries[i];\n      var exterior = geo.exterior;\n      // Simple trick to use points count instead of polygon area as region size.\n      // Ignore linestring\n      var size = exterior && exterior.length;\n      if (size > largestGeoSize) {\n        largestGeo = geo;\n        largestGeoSize = size;\n      }\n    }\n    if (largestGeo) {\n      return centroid(largestGeo.exterior);\n    }\n    // from bounding rect by default.\n    var rect = this.getBoundingRect();\n    return [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  };\n  GeoJSONRegion.prototype.getBoundingRect = function (projection) {\n    var rect = this._rect;\n    // Always recalculate if using projection.\n    if (rect && !projection) {\n      return rect;\n    }\n    var min = [Infinity, Infinity];\n    var max = [-Infinity, -Infinity];\n    var geometries = this.geometries;\n    each(geometries, function (geo) {\n      if (geo.type === 'polygon') {\n        // Doesn't consider hole\n        updateBBoxFromPoints(geo.exterior, min, max, projection);\n      } else {\n        each(geo.points, function (points) {\n          updateBBoxFromPoints(points, min, max, projection);\n        });\n      }\n    });\n    // Normalie invalid bounding.\n    if (!(isFinite(min[0]) && isFinite(min[1]) && isFinite(max[0]) && isFinite(max[1]))) {\n      min[0] = min[1] = max[0] = max[1] = 0;\n    }\n    rect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    if (!projection) {\n      this._rect = rect;\n    }\n    return rect;\n  };\n  GeoJSONRegion.prototype.contain = function (coord) {\n    var rect = this.getBoundingRect();\n    var geometries = this.geometries;\n    if (!rect.contain(coord[0], coord[1])) {\n      return false;\n    }\n    loopGeo: for (var i = 0, len = geometries.length; i < len; i++) {\n      var geo = geometries[i];\n      // Only support polygon.\n      if (geo.type !== 'polygon') {\n        continue;\n      }\n      var exterior = geo.exterior;\n      var interiors = geo.interiors;\n      if (polygonContain.contain(exterior, coord[0], coord[1])) {\n        // Not in the region if point is in the hole.\n        for (var k = 0; k < (interiors ? interiors.length : 0); k++) {\n          if (polygonContain.contain(interiors[k], coord[0], coord[1])) {\n            continue loopGeo;\n          }\n        }\n        return true;\n      }\n    }\n    return false;\n  };\n  /**\r\n   * Transform the raw coords to target bounding.\r\n   * @param x\r\n   * @param y\r\n   * @param width\r\n   * @param height\r\n   */\n  GeoJSONRegion.prototype.transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var aspect = rect.width / rect.height;\n    if (!width) {\n      width = aspect * height;\n    } else if (!height) {\n      height = width / aspect;\n    }\n    var target = new BoundingRect(x, y, width, height);\n    var transform = rect.calculateTransform(target);\n    var geometries = this.geometries;\n    for (var i = 0; i < geometries.length; i++) {\n      var geo = geometries[i];\n      if (geo.type === 'polygon') {\n        transformPoints(geo.exterior, transform);\n        each(geo.interiors, function (interior) {\n          transformPoints(interior, transform);\n        });\n      } else {\n        each(geo.points, function (points) {\n          transformPoints(points, transform);\n        });\n      }\n    }\n    rect = this._rect;\n    rect.copy(target);\n    // Update center\n    this._center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  };\n  GeoJSONRegion.prototype.cloneShallow = function (name) {\n    name == null && (name = this.name);\n    var newRegion = new GeoJSONRegion(name, this.geometries, this._center);\n    newRegion._rect = this._rect;\n    newRegion.transformTo = null; // Simply avoid to be called.\n    return newRegion;\n  };\n  return GeoJSONRegion;\n}(Region);\nexport { GeoJSONRegion };\nvar GeoSVGRegion = /** @class */function (_super) {\n  __extends(GeoSVGRegion, _super);\n  function GeoSVGRegion(name, elOnlyForCalculate) {\n    var _this = _super.call(this, name) || this;\n    _this.type = 'geoSVG';\n    _this._elOnlyForCalculate = elOnlyForCalculate;\n    return _this;\n  }\n  GeoSVGRegion.prototype.calcCenter = function () {\n    var el = this._elOnlyForCalculate;\n    var rect = el.getBoundingRect();\n    var center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n    var mat = matrix.identity(TMP_TRANSFORM);\n    var target = el;\n    while (target && !target.isGeoSVGGraphicRoot) {\n      matrix.mul(mat, target.getLocalTransform(), mat);\n      target = target.parent;\n    }\n    matrix.invert(mat, mat);\n    vec2.applyTransform(center, center, mat);\n    return center;\n  };\n  return GeoSVGRegion;\n}(Region);\nexport { GeoSVGRegion };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Parse and decode geo json\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { GeoJSONLineStringGeometry, GeoJSONPolygonGeometry, GeoJSONRegion } from './Region.js';\nfunction decode(json) {\n  if (!json.UTF8Encoding) {\n    return json;\n  }\n  var jsonCompressed = json;\n  var encodeScale = jsonCompressed.UTF8Scale;\n  if (encodeScale == null) {\n    encodeScale = 1024;\n  }\n  var features = jsonCompressed.features;\n  zrUtil.each(features, function (feature) {\n    var geometry = feature.geometry;\n    var encodeOffsets = geometry.encodeOffsets;\n    var coordinates = geometry.coordinates;\n    // Geometry may be appeded manually in the script after json loaded.\n    // In this case this geometry is usually not encoded.\n    if (!encodeOffsets) {\n      return;\n    }\n    switch (geometry.type) {\n      case 'LineString':\n        geometry.coordinates = decodeRing(coordinates, encodeOffsets, encodeScale);\n        break;\n      case 'Polygon':\n        decodeRings(coordinates, encodeOffsets, encodeScale);\n        break;\n      case 'MultiLineString':\n        decodeRings(coordinates, encodeOffsets, encodeScale);\n        break;\n      case 'MultiPolygon':\n        zrUtil.each(coordinates, function (rings, idx) {\n          return decodeRings(rings, encodeOffsets[idx], encodeScale);\n        });\n    }\n  });\n  // Has been decoded\n  jsonCompressed.UTF8Encoding = false;\n  return jsonCompressed;\n}\nfunction decodeRings(rings, encodeOffsets, encodeScale) {\n  for (var c = 0; c < rings.length; c++) {\n    rings[c] = decodeRing(rings[c], encodeOffsets[c], encodeScale);\n  }\n}\nfunction decodeRing(coordinate, encodeOffsets, encodeScale) {\n  var result = [];\n  var prevX = encodeOffsets[0];\n  var prevY = encodeOffsets[1];\n  for (var i = 0; i < coordinate.length; i += 2) {\n    var x = coordinate.charCodeAt(i) - 64;\n    var y = coordinate.charCodeAt(i + 1) - 64;\n    // ZigZag decoding\n    x = x >> 1 ^ -(x & 1);\n    y = y >> 1 ^ -(y & 1);\n    // Delta deocding\n    x += prevX;\n    y += prevY;\n    prevX = x;\n    prevY = y;\n    // Dequantize\n    result.push([x / encodeScale, y / encodeScale]);\n  }\n  return result;\n}\nexport default function parseGeoJSON(geoJson, nameProperty) {\n  geoJson = decode(geoJson);\n  return zrUtil.map(zrUtil.filter(geoJson.features, function (featureObj) {\n    // Output of mapshaper may have geometry null\n    return featureObj.geometry && featureObj.properties && featureObj.geometry.coordinates.length > 0;\n  }), function (featureObj) {\n    var properties = featureObj.properties;\n    var geo = featureObj.geometry;\n    var geometries = [];\n    switch (geo.type) {\n      case 'Polygon':\n        var coordinates = geo.coordinates;\n        // According to the GeoJSON specification.\n        // First must be exterior, and the rest are all interior(holes).\n        geometries.push(new GeoJSONPolygonGeometry(coordinates[0], coordinates.slice(1)));\n        break;\n      case 'MultiPolygon':\n        zrUtil.each(geo.coordinates, function (item) {\n          if (item[0]) {\n            geometries.push(new GeoJSONPolygonGeometry(item[0], item.slice(1)));\n          }\n        });\n        break;\n      case 'LineString':\n        geometries.push(new GeoJSONLineStringGeometry([geo.coordinates]));\n        break;\n      case 'MultiLineString':\n        geometries.push(new GeoJSONLineStringGeometry(geo.coordinates));\n    }\n    var region = new GeoJSONRegion(properties[nameProperty || 'name'], geometries, properties.cp);\n    region.properties = properties;\n    return region;\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../util/model.js';\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper.js';\nvar inner = makeInner();\nfunction tickValuesToNumbers(axis, values) {\n  var nums = zrUtil.map(values, function (val) {\n    return axis.scale.parse(val);\n  });\n  if (axis.type === 'time' && nums.length > 0) {\n    // Time axis needs duplicate first/last tick (see TimeScale.getTicks())\n    // The first and last tick/label don't get drawn\n    nums.sort();\n    nums.unshift(nums[0]);\n    nums.push(nums[nums.length - 1]);\n  }\n  return nums;\n}\nexport function createAxisLabels(axis) {\n  var custom = axis.getLabelModel().get('customValues');\n  if (custom) {\n    var labelFormatter_1 = makeLabelFormatter(axis);\n    var extent_1 = axis.scale.getExtent();\n    var tickNumbers = tickValuesToNumbers(axis, custom);\n    var ticks = zrUtil.filter(tickNumbers, function (val) {\n      return val >= extent_1[0] && val <= extent_1[1];\n    });\n    return {\n      labels: zrUtil.map(ticks, function (numval) {\n        var tick = {\n          value: numval\n        };\n        return {\n          formattedLabel: labelFormatter_1(tick),\n          rawLabel: axis.scale.getLabel(tick),\n          tickValue: numval\n        };\n      })\n    };\n  }\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n}\n/**\r\n * @param {module:echats/coord/Axis} axis\r\n * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\r\n * @return {Object} {\r\n *     ticks: Array.<number>\r\n *     tickCategoryInterval: number\r\n * }\r\n */\nexport function createAxisTicks(axis, tickModel) {\n  var custom = axis.getTickModel().get('customValues');\n  if (custom) {\n    var extent_2 = axis.scale.getExtent();\n    var tickNumbers = tickValuesToNumbers(axis, custom);\n    return {\n      ticks: zrUtil.filter(tickNumbers, function (val) {\n        return val >= extent_2[0] && val <= extent_2[1];\n      })\n    };\n  }\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: zrUtil.map(axis.scale.getTicks(), function (tick) {\n      return tick.value;\n    })\n  };\n}\nfunction makeCategoryLabels(axis) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: [],\n    labelCategoryInterval: result.labelCategoryInterval\n  } : result;\n}\nfunction makeCategoryLabelsActually(axis, labelModel) {\n  var labelsCache = getListCache(axis, 'labels');\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var result = listCacheGet(labelsCache, optionLabelInterval);\n  if (result) {\n    return result;\n  }\n  var labels;\n  var numericLabelInterval;\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  }\n  // Cache to avoid calling interval function repeatedly.\n  return listCacheSet(labelsCache, optionLabelInterval, {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  });\n}\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = getListCache(axis, 'ticks');\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = listCacheGet(ticksCache, optionTickInterval);\n  if (result) {\n    return result;\n  }\n  var ticks;\n  var tickCategoryInterval;\n  // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  }\n  // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n    var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n    tickCategoryInterval = labelsResult.labelCategoryInterval;\n    ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n      return labelItem.tickValue;\n    });\n  } else {\n    tickCategoryInterval = optionTickInterval;\n    ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n  }\n  // Cache to avoid calling interval function repeatedly.\n  return listCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tick, idx) {\n      return {\n        level: tick.level,\n        formattedLabel: labelFormatter(tick, idx),\n        rawLabel: axis.scale.getLabel(tick),\n        tickValue: tick.value\n      };\n    })\n  };\n}\nfunction getListCache(axis, prop) {\n  // Because key can be a function, and cache size always is small, we use array cache.\n  return inner(axis)[prop] || (inner(axis)[prop] = []);\n}\nfunction listCacheGet(cache, key) {\n  for (var i = 0; i < cache.length; i++) {\n    if (cache[i].key === key) {\n      return cache[i].value;\n    }\n  }\n}\nfunction listCacheSet(cache, key, value) {\n  cache.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\nfunction makeAutoCategoryInterval(axis) {\n  var result = inner(axis).autoInterval;\n  return result != null ? result : inner(axis).autoInterval = axis.calculateCategoryInterval();\n}\n/**\r\n * Calculate interval for category axis ticks and labels.\r\n * To get precise result, at least one of `getRotate` and `isHorizontal`\r\n * should be implemented in axis.\r\n */\nexport function calculateCategoryInterval(axis) {\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n  var tickCount = ordinalScale.count();\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n  var step = 1;\n  // Simple optimization. Empirical value: tick count should less than 40.\n  if (tickCount > 40) {\n    step = Math.max(1, Math.floor(tickCount / 40));\n  }\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0;\n  // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0;\n    // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n    var rect = textContain.getBoundingRect(labelFormatter({\n      value: tickValue\n    }), params.font, 'center', 'top');\n    // Magic number\n    width = rect.width * 1.3;\n    height = rect.height * 1.3;\n    // Min size, void long loop.\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n  var dw = maxW / unitW;\n  var dh = maxH / unitH;\n  // 0/0 is NaN, 1/0 is Infinity.\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  var cache = inner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount;\n  // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1\n  // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval\n  // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hidden labels might not be shown again.\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n    interval = lastAutoInterval;\n  }\n  // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n    cache.lastTickCount = tickCount;\n    cache.lastAutoInterval = interval;\n    cache.axisExtent0 = axisExtent[0];\n    cache.axisExtent1 = axisExtent[1];\n  }\n  return interval;\n}\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = [];\n  // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count();\n  // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  }\n  // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  }\n  // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n  var tickValue = startTick;\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n  function addItem(tickValue) {\n    var tickObj = {\n      value: tickValue\n    };\n    result.push(onlyTick ? tickValue : {\n      formattedLabel: labelFormatter(tickObj),\n      rawLabel: ordinalScale.getLabel(tickObj),\n      tickValue: tickValue\n    });\n  }\n  return result;\n}\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\n    var rawLabel = ordinalScale.getLabel(tick);\n    var tickValue = tick.value;\n    if (categoryInterval(tick.value, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tick),\n        rawLabel: rawLabel,\n        tickValue: tickValue\n      });\n    }\n  });\n  return result;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, map } from 'zrender/lib/core/util.js';\nimport { linearMap, getPixelPrecision, round } from '../util/number.js';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval } from './axisTickLabelBuilder.js';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\r\n * Base class of Axis.\r\n */\nvar Axis = /** @class */function () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\r\n   * If axis extent contain given coord\r\n   */\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\r\n   * If axis extent contain given data\r\n   */\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(data);\n  };\n  /**\r\n   * Get coord extent.\r\n   */\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\r\n   * Get precision used for formatting\r\n   */\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\r\n   * Set coord extent\r\n   */\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\r\n   * Convert data to coord. Data is the rank if it has an ordinal scale\r\n   */\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(data);\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\r\n   * Convert coord to data. Data is the rank if it has an ordinal scale\r\n   */\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\r\n   * Convert pixel point to data in axis\r\n   */\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\r\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\r\n   * `axis.getTicksCoords` considers `onBand`, which is used by\r\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\r\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\r\n   * @param opt.clamp If `true`, the first and the last\r\n   *        tick must be at the axis end points. Otherwise, clip ticks\r\n   *        that outside the axis extent.\r\n   */\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel);\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber');\n    // Protection.\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n  Axis.prototype.getViewLabels = function () {\n    return createAxisLabels(this).labels;\n  };\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\r\n   * Notice here we only get the default tick model. For splitLine\r\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\r\n   * manually when calling `getTicksCoords`.\r\n   * In GL, this method may be overridden to:\r\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\r\n   */\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\r\n   * Get width of band\r\n   */\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0);\n    // Fix #2728, avoid NaN when only one data.\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\r\n   * Only be called in category axis.\r\n   * Can be overridden, consider other axes like in 3D.\r\n   * @return Auto interval for cateogry axis tick and label\r\n   */\n  Axis.prototype.calculateCategoryInterval = function () {\n    return calculateCategoryInterval(this);\n  };\n  return Axis;\n}();\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n}\n// If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    last = ticksCoords[1] = {\n      coord: axisExtent[1],\n      tickValue: ticksCoords[0].tickValue\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize,\n      tickValue: dataExtent[1] + 1\n    };\n    ticksCoords.push(last);\n  }\n  var inverse = axisExtent[0] > axisExtent[1];\n  // Handling clamp.\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0]\n    });\n  }\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1]\n    });\n  }\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unnecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { Point, Path, Polyline } from '../util/graphic.js';\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nimport { cubicProjectPoint, quadraticProjectPoint } from 'zrender/lib/core/curve.js';\nimport { defaults, retrieve2 } from 'zrender/lib/core/util.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport { DISPLAY_STATES, SPECIAL_STATES } from '../util/states.js';\nvar PI2 = Math.PI * 2;\nvar CMD = PathProxy.CMD;\nvar DEFAULT_SEARCH_SPACE = ['top', 'right', 'bottom', 'left'];\nfunction getCandidateAnchor(pos, distance, rect, outPt, outDir) {\n  var width = rect.width;\n  var height = rect.height;\n  switch (pos) {\n    case 'top':\n      outPt.set(rect.x + width / 2, rect.y - distance);\n      outDir.set(0, -1);\n      break;\n    case 'bottom':\n      outPt.set(rect.x + width / 2, rect.y + height + distance);\n      outDir.set(0, 1);\n      break;\n    case 'left':\n      outPt.set(rect.x - distance, rect.y + height / 2);\n      outDir.set(-1, 0);\n      break;\n    case 'right':\n      outPt.set(rect.x + width + distance, rect.y + height / 2);\n      outDir.set(1, 0);\n      break;\n  }\n}\nfunction projectPointToArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y, out) {\n  x -= cx;\n  y -= cy;\n  var d = Math.sqrt(x * x + y * y);\n  x /= d;\n  y /= d;\n  // Intersect point.\n  var ox = x * r + cx;\n  var oy = y * r + cy;\n  if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n    // Is a circle\n    out[0] = ox;\n    out[1] = oy;\n    return d - r;\n  }\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n  var angle = Math.atan2(y, x);\n  if (angle < 0) {\n    angle += PI2;\n  }\n  if (angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle) {\n    // Project point is on the arc.\n    out[0] = ox;\n    out[1] = oy;\n    return d - r;\n  }\n  var x1 = r * Math.cos(startAngle) + cx;\n  var y1 = r * Math.sin(startAngle) + cy;\n  var x2 = r * Math.cos(endAngle) + cx;\n  var y2 = r * Math.sin(endAngle) + cy;\n  var d1 = (x1 - x) * (x1 - x) + (y1 - y) * (y1 - y);\n  var d2 = (x2 - x) * (x2 - x) + (y2 - y) * (y2 - y);\n  if (d1 < d2) {\n    out[0] = x1;\n    out[1] = y1;\n    return Math.sqrt(d1);\n  } else {\n    out[0] = x2;\n    out[1] = y2;\n    return Math.sqrt(d2);\n  }\n}\nfunction projectPointToLine(x1, y1, x2, y2, x, y, out, limitToEnds) {\n  var dx = x - x1;\n  var dy = y - y1;\n  var dx1 = x2 - x1;\n  var dy1 = y2 - y1;\n  var lineLen = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n  dx1 /= lineLen;\n  dy1 /= lineLen;\n  // dot product\n  var projectedLen = dx * dx1 + dy * dy1;\n  var t = projectedLen / lineLen;\n  if (limitToEnds) {\n    t = Math.min(Math.max(t, 0), 1);\n  }\n  t *= lineLen;\n  var ox = out[0] = x1 + t * dx1;\n  var oy = out[1] = y1 + t * dy1;\n  return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n}\nfunction projectPointToRect(x1, y1, width, height, x, y, out) {\n  if (width < 0) {\n    x1 = x1 + width;\n    width = -width;\n  }\n  if (height < 0) {\n    y1 = y1 + height;\n    height = -height;\n  }\n  var x2 = x1 + width;\n  var y2 = y1 + height;\n  var ox = out[0] = Math.min(Math.max(x, x1), x2);\n  var oy = out[1] = Math.min(Math.max(y, y1), y2);\n  return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n}\nvar tmpPt = [];\nfunction nearestPointOnRect(pt, rect, out) {\n  var dist = projectPointToRect(rect.x, rect.y, rect.width, rect.height, pt.x, pt.y, tmpPt);\n  out.set(tmpPt[0], tmpPt[1]);\n  return dist;\n}\n/**\r\n * Calculate min distance corresponding point.\r\n * This method won't evaluate if point is in the path.\r\n */\nfunction nearestPointOnPath(pt, path, out) {\n  var xi = 0;\n  var yi = 0;\n  var x0 = 0;\n  var y0 = 0;\n  var x1;\n  var y1;\n  var minDist = Infinity;\n  var data = path.data;\n  var x = pt.x;\n  var y = pt.y;\n  for (var i = 0; i < data.length;) {\n    var cmd = data[i++];\n    if (i === 1) {\n      xi = data[i];\n      yi = data[i + 1];\n      x0 = xi;\n      y0 = yi;\n    }\n    var d = minDist;\n    switch (cmd) {\n      case CMD.M:\n        // moveTo 命令重新创建一个新的 subpath, 并且更新新的起点\n        // 在 closePath 的时候使用\n        x0 = data[i++];\n        y0 = data[i++];\n        xi = x0;\n        yi = y0;\n        break;\n      case CMD.L:\n        d = projectPointToLine(xi, yi, data[i], data[i + 1], x, y, tmpPt, true);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n      case CMD.C:\n        d = cubicProjectPoint(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n      case CMD.Q:\n        d = quadraticProjectPoint(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n      case CMD.A:\n        // TODO Arc 判断的开销比较大\n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++];\n        // TODO Arc 旋转\n        i += 1;\n        var anticlockwise = !!(1 - data[i++]);\n        x1 = Math.cos(theta) * rx + cx;\n        y1 = Math.sin(theta) * ry + cy;\n        // 不是直接使用 arc 命令\n        if (i <= 1) {\n          // 第一个命令起点还未定义\n          x0 = x1;\n          y0 = y1;\n        }\n        // zr 使用scale来模拟椭圆, 这里也对x做一定的缩放\n        var _x = (x - cx) * ry / rx + cx;\n        d = projectPointToArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y, tmpPt);\n        xi = Math.cos(theta + dTheta) * rx + cx;\n        yi = Math.sin(theta + dTheta) * ry + cy;\n        break;\n      case CMD.R:\n        x0 = xi = data[i++];\n        y0 = yi = data[i++];\n        var width = data[i++];\n        var height = data[i++];\n        d = projectPointToRect(x0, y0, width, height, x, y, tmpPt);\n        break;\n      case CMD.Z:\n        d = projectPointToLine(xi, yi, x0, y0, x, y, tmpPt, true);\n        xi = x0;\n        yi = y0;\n        break;\n    }\n    if (d < minDist) {\n      minDist = d;\n      out.set(tmpPt[0], tmpPt[1]);\n    }\n  }\n  return minDist;\n}\n// Temporal variable for intermediate usage.\nvar pt0 = new Point();\nvar pt1 = new Point();\nvar pt2 = new Point();\nvar dir = new Point();\nvar dir2 = new Point();\n/**\r\n * Calculate a proper guide line based on the label position and graphic element definition\r\n * @param label\r\n * @param labelRect\r\n * @param target\r\n * @param targetRect\r\n */\nexport function updateLabelLinePoints(target, labelLineModel) {\n  if (!target) {\n    return;\n  }\n  var labelLine = target.getTextGuideLine();\n  var label = target.getTextContent();\n  // Needs to create text guide in each charts.\n  if (!(label && labelLine)) {\n    return;\n  }\n  var labelGuideConfig = target.textGuideLineConfig || {};\n  var points = [[0, 0], [0, 0], [0, 0]];\n  var searchSpace = labelGuideConfig.candidates || DEFAULT_SEARCH_SPACE;\n  var labelRect = label.getBoundingRect().clone();\n  labelRect.applyTransform(label.getComputedTransform());\n  var minDist = Infinity;\n  var anchorPoint = labelGuideConfig.anchor;\n  var targetTransform = target.getComputedTransform();\n  var targetInversedTransform = targetTransform && invert([], targetTransform);\n  var len = labelLineModel.get('length2') || 0;\n  if (anchorPoint) {\n    pt2.copy(anchorPoint);\n  }\n  for (var i = 0; i < searchSpace.length; i++) {\n    var candidate = searchSpace[i];\n    getCandidateAnchor(candidate, 0, labelRect, pt0, dir);\n    Point.scaleAndAdd(pt1, pt0, dir, len);\n    // Transform to target coord space.\n    pt1.transform(targetInversedTransform);\n    // Note: getBoundingRect will ensure the `path` being created.\n    var boundingRect = target.getBoundingRect();\n    var dist = anchorPoint ? anchorPoint.distance(pt1) : target instanceof Path ? nearestPointOnPath(pt1, target.path, pt2) : nearestPointOnRect(pt1, boundingRect, pt2);\n    // TODO pt2 is in the path\n    if (dist < minDist) {\n      minDist = dist;\n      // Transform back to global space.\n      pt1.transform(targetTransform);\n      pt2.transform(targetTransform);\n      pt2.toArray(points[0]);\n      pt1.toArray(points[1]);\n      pt0.toArray(points[2]);\n    }\n  }\n  limitTurnAngle(points, labelLineModel.get('minTurnAngle'));\n  labelLine.setShape({\n    points: points\n  });\n}\n// Temporal variable for the limitTurnAngle function\nvar tmpArr = [];\nvar tmpProjPoint = new Point();\n/**\r\n * Reduce the line segment attached to the label to limit the turn angle between two segments.\r\n * @param linePoints\r\n * @param minTurnAngle Radian of minimum turn angle. 0 - 180\r\n */\nexport function limitTurnAngle(linePoints, minTurnAngle) {\n  if (!(minTurnAngle <= 180 && minTurnAngle > 0)) {\n    return;\n  }\n  minTurnAngle = minTurnAngle / 180 * Math.PI;\n  // The line points can be\n  //      /pt1----pt2 (label)\n  //     /\n  // pt0/\n  pt0.fromArray(linePoints[0]);\n  pt1.fromArray(linePoints[1]);\n  pt2.fromArray(linePoints[2]);\n  Point.sub(dir, pt0, pt1);\n  Point.sub(dir2, pt2, pt1);\n  var len1 = dir.len();\n  var len2 = dir2.len();\n  if (len1 < 1e-3 || len2 < 1e-3) {\n    return;\n  }\n  dir.scale(1 / len1);\n  dir2.scale(1 / len2);\n  var angleCos = dir.dot(dir2);\n  var minTurnAngleCos = Math.cos(minTurnAngle);\n  if (minTurnAngleCos < angleCos) {\n    // Smaller than minTurnAngle\n    // Calculate project point of pt0 on pt1-pt2\n    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n    tmpProjPoint.fromArray(tmpArr);\n    // Calculate new projected length with limited minTurnAngle and get the new connect point\n    tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI - minTurnAngle));\n    // Limit the new calculated connect point between pt1 and pt2.\n    var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n    if (isNaN(t)) {\n      return;\n    }\n    if (t < 0) {\n      Point.copy(tmpProjPoint, pt1);\n    } else if (t > 1) {\n      Point.copy(tmpProjPoint, pt2);\n    }\n    tmpProjPoint.toArray(linePoints[1]);\n  }\n}\n/**\r\n * Limit the angle of line and the surface\r\n * @param maxSurfaceAngle Radian of minimum turn angle. 0 - 180. 0 is same direction to normal. 180 is opposite\r\n */\nexport function limitSurfaceAngle(linePoints, surfaceNormal, maxSurfaceAngle) {\n  if (!(maxSurfaceAngle <= 180 && maxSurfaceAngle > 0)) {\n    return;\n  }\n  maxSurfaceAngle = maxSurfaceAngle / 180 * Math.PI;\n  pt0.fromArray(linePoints[0]);\n  pt1.fromArray(linePoints[1]);\n  pt2.fromArray(linePoints[2]);\n  Point.sub(dir, pt1, pt0);\n  Point.sub(dir2, pt2, pt1);\n  var len1 = dir.len();\n  var len2 = dir2.len();\n  if (len1 < 1e-3 || len2 < 1e-3) {\n    return;\n  }\n  dir.scale(1 / len1);\n  dir2.scale(1 / len2);\n  var angleCos = dir.dot(surfaceNormal);\n  var maxSurfaceAngleCos = Math.cos(maxSurfaceAngle);\n  if (angleCos < maxSurfaceAngleCos) {\n    // Calculate project point of pt0 on pt1-pt2\n    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n    tmpProjPoint.fromArray(tmpArr);\n    var HALF_PI = Math.PI / 2;\n    var angle2 = Math.acos(dir2.dot(surfaceNormal));\n    var newAngle = HALF_PI + angle2 - maxSurfaceAngle;\n    if (newAngle >= HALF_PI) {\n      // parallel\n      Point.copy(tmpProjPoint, pt2);\n    } else {\n      // Calculate new projected length with limited minTurnAngle and get the new connect point\n      tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI / 2 - newAngle));\n      // Limit the new calculated connect point between pt1 and pt2.\n      var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n      if (isNaN(t)) {\n        return;\n      }\n      if (t < 0) {\n        Point.copy(tmpProjPoint, pt1);\n      } else if (t > 1) {\n        Point.copy(tmpProjPoint, pt2);\n      }\n    }\n    tmpProjPoint.toArray(linePoints[1]);\n  }\n}\nfunction setLabelLineState(labelLine, ignore, stateName, stateModel) {\n  var isNormal = stateName === 'normal';\n  var stateObj = isNormal ? labelLine : labelLine.ensureState(stateName);\n  // Make sure display.\n  stateObj.ignore = ignore;\n  // Set smooth\n  var smooth = stateModel.get('smooth');\n  if (smooth && smooth === true) {\n    smooth = 0.3;\n  }\n  stateObj.shape = stateObj.shape || {};\n  if (smooth > 0) {\n    stateObj.shape.smooth = smooth;\n  }\n  var styleObj = stateModel.getModel('lineStyle').getLineStyle();\n  isNormal ? labelLine.useStyle(styleObj) : stateObj.style = styleObj;\n}\nfunction buildLabelLinePath(path, shape) {\n  var smooth = shape.smooth;\n  var points = shape.points;\n  if (!points) {\n    return;\n  }\n  path.moveTo(points[0][0], points[0][1]);\n  if (smooth > 0 && points.length >= 3) {\n    var len1 = vector.dist(points[0], points[1]);\n    var len2 = vector.dist(points[1], points[2]);\n    if (!len1 || !len2) {\n      path.lineTo(points[1][0], points[1][1]);\n      path.lineTo(points[2][0], points[2][1]);\n      return;\n    }\n    var moveLen = Math.min(len1, len2) * smooth;\n    var midPoint0 = vector.lerp([], points[1], points[0], moveLen / len1);\n    var midPoint2 = vector.lerp([], points[1], points[2], moveLen / len2);\n    var midPoint1 = vector.lerp([], midPoint0, midPoint2, 0.5);\n    path.bezierCurveTo(midPoint0[0], midPoint0[1], midPoint0[0], midPoint0[1], midPoint1[0], midPoint1[1]);\n    path.bezierCurveTo(midPoint2[0], midPoint2[1], midPoint2[0], midPoint2[1], points[2][0], points[2][1]);\n  } else {\n    for (var i = 1; i < points.length; i++) {\n      path.lineTo(points[i][0], points[i][1]);\n    }\n  }\n}\n/**\r\n * Create a label line if necessary and set it's style.\r\n */\nexport function setLabelLineStyle(targetEl, statesModels, defaultStyle) {\n  var labelLine = targetEl.getTextGuideLine();\n  var label = targetEl.getTextContent();\n  if (!label) {\n    // Not show label line if there is no label.\n    if (labelLine) {\n      targetEl.removeTextGuideLine();\n    }\n    return;\n  }\n  var normalModel = statesModels.normal;\n  var showNormal = normalModel.get('show');\n  var labelIgnoreNormal = label.ignore;\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateName = DISPLAY_STATES[i];\n    var stateModel = statesModels[stateName];\n    var isNormal = stateName === 'normal';\n    if (stateModel) {\n      var stateShow = stateModel.get('show');\n      var isLabelIgnored = isNormal ? labelIgnoreNormal : retrieve2(label.states[stateName] && label.states[stateName].ignore, labelIgnoreNormal);\n      if (isLabelIgnored // Not show when label is not shown in this state.\n      || !retrieve2(stateShow, showNormal) // Use normal state by default if not set.\n      ) {\n        var stateObj = isNormal ? labelLine : labelLine && labelLine.states[stateName];\n        if (stateObj) {\n          stateObj.ignore = true;\n        }\n        if (!!labelLine) {\n          setLabelLineState(labelLine, true, stateName, stateModel);\n        }\n        continue;\n      }\n      // Create labelLine if not exists\n      if (!labelLine) {\n        labelLine = new Polyline();\n        targetEl.setTextGuideLine(labelLine);\n        // Reset state of normal because it's new created.\n        // NOTE: NORMAL should always been the first!\n        if (!isNormal && (labelIgnoreNormal || !showNormal)) {\n          setLabelLineState(labelLine, true, 'normal', statesModels.normal);\n        }\n        // Use same state proxy.\n        if (targetEl.stateProxy) {\n          labelLine.stateProxy = targetEl.stateProxy;\n        }\n      }\n      setLabelLineState(labelLine, false, stateName, stateModel);\n    }\n  }\n  if (labelLine) {\n    defaults(labelLine.style, defaultStyle);\n    // Not fill.\n    labelLine.style.fill = null;\n    var showAbove = normalModel.get('showAbove');\n    var labelLineConfig = targetEl.textGuideLineConfig = targetEl.textGuideLineConfig || {};\n    labelLineConfig.showAbove = showAbove || false;\n    // Custom the buildPath.\n    labelLine.buildPath = buildLabelLinePath;\n  }\n}\nexport function getLabelLineStatesModels(itemModel, labelLineName) {\n  labelLineName = labelLineName || 'labelLine';\n  var statesModels = {\n    normal: itemModel.getModel(labelLineName)\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelLineName]);\n  }\n  return statesModels;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { BoundingRect, OrientedBoundingRect } from '../util/graphic.js';\nexport function prepareLayoutList(input) {\n  var list = [];\n  for (var i = 0; i < input.length; i++) {\n    var rawItem = input[i];\n    if (rawItem.defaultAttr.ignore) {\n      continue;\n    }\n    var label = rawItem.label;\n    var transform = label.getComputedTransform();\n    // NOTE: Get bounding rect after getComputedTransform, or label may not been updated by the host el.\n    var localRect = label.getBoundingRect();\n    var isAxisAligned = !transform || transform[1] < 1e-5 && transform[2] < 1e-5;\n    var minMargin = label.style.margin || 0;\n    var globalRect = localRect.clone();\n    globalRect.applyTransform(transform);\n    globalRect.x -= minMargin / 2;\n    globalRect.y -= minMargin / 2;\n    globalRect.width += minMargin;\n    globalRect.height += minMargin;\n    var obb = isAxisAligned ? new OrientedBoundingRect(localRect, transform) : null;\n    list.push({\n      label: label,\n      labelLine: rawItem.labelLine,\n      rect: globalRect,\n      localRect: localRect,\n      obb: obb,\n      priority: rawItem.priority,\n      defaultAttr: rawItem.defaultAttr,\n      layoutOption: rawItem.computedLayoutOption,\n      axisAligned: isAxisAligned,\n      transform: transform\n    });\n  }\n  return list;\n}\nfunction shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {\n  var len = list.length;\n  if (len < 2) {\n    return;\n  }\n  list.sort(function (a, b) {\n    return a.rect[xyDim] - b.rect[xyDim];\n  });\n  var lastPos = 0;\n  var delta;\n  var adjusted = false;\n  var shifts = [];\n  var totalShifts = 0;\n  for (var i = 0; i < len; i++) {\n    var item = list[i];\n    var rect = item.rect;\n    delta = rect[xyDim] - lastPos;\n    if (delta < 0) {\n      // shiftForward(i, len, -delta);\n      rect[xyDim] -= delta;\n      item.label[xyDim] -= delta;\n      adjusted = true;\n    }\n    var shift = Math.max(-delta, 0);\n    shifts.push(shift);\n    totalShifts += shift;\n    lastPos = rect[xyDim] + rect[sizeDim];\n  }\n  if (totalShifts > 0 && balanceShift) {\n    // Shift back to make the distribution more equally.\n    shiftList(-totalShifts / len, 0, len);\n  }\n  // TODO bleedMargin?\n  var first = list[0];\n  var last = list[len - 1];\n  var minGap;\n  var maxGap;\n  updateMinMaxGap();\n  // If ends exceed two bounds, squeeze at most 80%, then take the gap of two bounds.\n  minGap < 0 && squeezeGaps(-minGap, 0.8);\n  maxGap < 0 && squeezeGaps(maxGap, 0.8);\n  updateMinMaxGap();\n  takeBoundsGap(minGap, maxGap, 1);\n  takeBoundsGap(maxGap, minGap, -1);\n  // Handle bailout when there is not enough space.\n  updateMinMaxGap();\n  if (minGap < 0) {\n    squeezeWhenBailout(-minGap);\n  }\n  if (maxGap < 0) {\n    squeezeWhenBailout(maxGap);\n  }\n  function updateMinMaxGap() {\n    minGap = first.rect[xyDim] - minBound;\n    maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\n  }\n  function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\n    if (gapThisBound < 0) {\n      // Move from other gap if can.\n      var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\n      if (moveFromMaxGap > 0) {\n        shiftList(moveFromMaxGap * moveDir, 0, len);\n        var remained = moveFromMaxGap + gapThisBound;\n        if (remained < 0) {\n          squeezeGaps(-remained * moveDir, 1);\n        }\n      } else {\n        squeezeGaps(-gapThisBound * moveDir, 1);\n      }\n    }\n  }\n  function shiftList(delta, start, end) {\n    if (delta !== 0) {\n      adjusted = true;\n    }\n    for (var i = start; i < end; i++) {\n      var item = list[i];\n      var rect = item.rect;\n      rect[xyDim] += delta;\n      item.label[xyDim] += delta;\n    }\n  }\n  // Squeeze gaps if the labels exceed margin.\n  function squeezeGaps(delta, maxSqeezePercent) {\n    var gaps = [];\n    var totalGaps = 0;\n    for (var i = 1; i < len; i++) {\n      var prevItemRect = list[i - 1].rect;\n      var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\n      gaps.push(gap);\n      totalGaps += gap;\n    }\n    if (!totalGaps) {\n      return;\n    }\n    var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\n    if (delta > 0) {\n      for (var i = 0; i < len - 1; i++) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i] * squeezePercent;\n        // Forward\n        shiftList(movement, 0, i + 1);\n      }\n    } else {\n      // Backward\n      for (var i = len - 1; i > 0; i--) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i - 1] * squeezePercent;\n        shiftList(-movement, i, len);\n      }\n    }\n  }\n  /**\r\n   * Squeeze to allow overlap if there is no more space available.\r\n   * Let other overlapping strategy like hideOverlap do the job instead of keep exceeding the bounds.\r\n   */\n  function squeezeWhenBailout(delta) {\n    var dir = delta < 0 ? -1 : 1;\n    delta = Math.abs(delta);\n    var moveForEachLabel = Math.ceil(delta / (len - 1));\n    for (var i = 0; i < len - 1; i++) {\n      if (dir > 0) {\n        // Forward\n        shiftList(moveForEachLabel, 0, i + 1);\n      } else {\n        // Backward\n        shiftList(-moveForEachLabel, len - i - 1, len);\n      }\n      delta -= moveForEachLabel;\n      if (delta <= 0) {\n        return;\n      }\n    }\n  }\n  return adjusted;\n}\n/**\r\n * Adjust labels on x direction to avoid overlap.\r\n */\nexport function shiftLayoutOnX(list, leftBound, rightBound,\n// If average the shifts on all labels and add them to 0\n// TODO: Not sure if should enable it.\n// Pros: The angle of lines will distribute more equally\n// Cons: In some layout. It may not what user wanted. like in pie. the label of last sector is usually changed unexpectedly.\nbalanceShift) {\n  return shiftLayout(list, 'x', 'width', leftBound, rightBound, balanceShift);\n}\n/**\r\n * Adjust labels on y direction to avoid overlap.\r\n */\nexport function shiftLayoutOnY(list, topBound, bottomBound,\n// If average the shifts on all labels and add them to 0\nbalanceShift) {\n  return shiftLayout(list, 'y', 'height', topBound, bottomBound, balanceShift);\n}\nexport function hideOverlap(labelList) {\n  var displayedLabels = [];\n  // TODO, render overflow visible first, put in the displayedLabels.\n  labelList.sort(function (a, b) {\n    return b.priority - a.priority;\n  });\n  var globalRect = new BoundingRect(0, 0, 0, 0);\n  function hideEl(el) {\n    if (!el.ignore) {\n      // Show on emphasis.\n      var emphasisState = el.ensureState('emphasis');\n      if (emphasisState.ignore == null) {\n        emphasisState.ignore = false;\n      }\n    }\n    el.ignore = true;\n  }\n  for (var i = 0; i < labelList.length; i++) {\n    var labelItem = labelList[i];\n    var isAxisAligned = labelItem.axisAligned;\n    var localRect = labelItem.localRect;\n    var transform = labelItem.transform;\n    var label = labelItem.label;\n    var labelLine = labelItem.labelLine;\n    globalRect.copy(labelItem.rect);\n    // Add a threshold because layout may be aligned precisely.\n    globalRect.width -= 0.1;\n    globalRect.height -= 0.1;\n    globalRect.x += 0.05;\n    globalRect.y += 0.05;\n    var obb = labelItem.obb;\n    var overlapped = false;\n    for (var j = 0; j < displayedLabels.length; j++) {\n      var existsTextCfg = displayedLabels[j];\n      // Fast rejection.\n      if (!globalRect.intersect(existsTextCfg.rect)) {\n        continue;\n      }\n      if (isAxisAligned && existsTextCfg.axisAligned) {\n        // Is overlapped\n        overlapped = true;\n        break;\n      }\n      if (!existsTextCfg.obb) {\n        // If self is not axis aligned. But other is.\n        existsTextCfg.obb = new OrientedBoundingRect(existsTextCfg.localRect, existsTextCfg.transform);\n      }\n      if (!obb) {\n        // If self is axis aligned. But other is not.\n        obb = new OrientedBoundingRect(localRect, transform);\n      }\n      if (obb.intersect(existsTextCfg.obb)) {\n        overlapped = true;\n        break;\n      }\n    }\n    // TODO Callback to determine if this overlap should be handled?\n    if (overlapped) {\n      hideEl(label);\n      labelLine && hideEl(labelLine);\n    } else {\n      label.attr('ignore', labelItem.defaultAttr.ignore);\n      labelLine && labelLine.attr('ignore', labelItem.defaultAttr.labelGuideIgnore);\n      displayedLabels.push(labelItem);\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// TODO: move labels out of viewport.\nimport { BoundingRect, updateProps, initProps, isElementRemoved } from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { parsePercent } from '../util/number.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { updateLabelLinePoints, setLabelLineStyle, getLabelLineStatesModels } from './labelGuideHelper.js';\nimport { makeInner } from '../util/model.js';\nimport { retrieve2, each, keys, isFunction, filter, indexOf } from 'zrender/lib/core/util.js';\nimport { prepareLayoutList, hideOverlap, shiftLayoutOnX, shiftLayoutOnY } from './labelLayoutHelper.js';\nimport { labelInner, animateLabelValue } from './labelStyle.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nfunction cloneArr(points) {\n  if (points) {\n    var newPoints = [];\n    for (var i = 0; i < points.length; i++) {\n      newPoints.push(points[i].slice());\n    }\n    return newPoints;\n  }\n}\nfunction prepareLayoutCallbackParams(labelItem, hostEl) {\n  var label = labelItem.label;\n  var labelLine = hostEl && hostEl.getTextGuideLine();\n  return {\n    dataIndex: labelItem.dataIndex,\n    dataType: labelItem.dataType,\n    seriesIndex: labelItem.seriesModel.seriesIndex,\n    text: labelItem.label.style.text,\n    rect: labelItem.hostRect,\n    labelRect: labelItem.rect,\n    // x: labelAttr.x,\n    // y: labelAttr.y,\n    align: label.style.align,\n    verticalAlign: label.style.verticalAlign,\n    labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\n  };\n}\nvar LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\nvar dummyTransformable = new Transformable();\nvar labelLayoutInnerStore = makeInner();\nvar labelLineAnimationStore = makeInner();\nfunction extendWithKeys(target, source, keys) {\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (source[key] != null) {\n      target[key] = source[key];\n    }\n  }\n}\nvar LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\nvar LabelManager = /** @class */function () {\n  function LabelManager() {\n    this._labelList = [];\n    this._chartViewList = [];\n  }\n  LabelManager.prototype.clearLabels = function () {\n    this._labelList = [];\n    this._chartViewList = [];\n  };\n  /**\r\n   * Add label to manager\r\n   */\n  LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\n    var labelStyle = label.style;\n    var hostEl = label.__hostTarget;\n    var textConfig = hostEl.textConfig || {};\n    // TODO: If label is in other state.\n    var labelTransform = label.getComputedTransform();\n    var labelRect = label.getBoundingRect().plain();\n    BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\n    if (labelTransform) {\n      dummyTransformable.setLocalTransform(labelTransform);\n    } else {\n      // Identity transform.\n      dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation = dummyTransformable.originX = dummyTransformable.originY = 0;\n      dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\n    }\n    dummyTransformable.rotation = normalizeRadian(dummyTransformable.rotation);\n    var host = label.__hostTarget;\n    var hostRect;\n    if (host) {\n      hostRect = host.getBoundingRect().plain();\n      var transform = host.getComputedTransform();\n      BoundingRect.applyTransform(hostRect, hostRect, transform);\n    }\n    var labelGuide = hostRect && host.getTextGuideLine();\n    this._labelList.push({\n      label: label,\n      labelLine: labelGuide,\n      seriesModel: seriesModel,\n      dataIndex: dataIndex,\n      dataType: dataType,\n      layoutOption: layoutOption,\n      computedLayoutOption: null,\n      rect: labelRect,\n      hostRect: hostRect,\n      // Label with lower priority will be hidden when overlapped\n      // Use rect size as default priority\n      priority: hostRect ? hostRect.width * hostRect.height : 0,\n      // Save default label attributes.\n      // For restore if developers want get back to default value in callback.\n      defaultAttr: {\n        ignore: label.ignore,\n        labelGuideIgnore: labelGuide && labelGuide.ignore,\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY,\n        rotation: dummyTransformable.rotation,\n        style: {\n          x: labelStyle.x,\n          y: labelStyle.y,\n          align: labelStyle.align,\n          verticalAlign: labelStyle.verticalAlign,\n          width: labelStyle.width,\n          height: labelStyle.height,\n          fontSize: labelStyle.fontSize\n        },\n        cursor: label.cursor,\n        attachedPos: textConfig.position,\n        attachedRot: textConfig.rotation\n      }\n    });\n  };\n  LabelManager.prototype.addLabelsOfSeries = function (chartView) {\n    var _this = this;\n    this._chartViewList.push(chartView);\n    var seriesModel = chartView.__model;\n    var layoutOption = seriesModel.get('labelLayout');\n    /**\r\n     * Ignore layouting if it's not specified anything.\r\n     */\n    if (!(isFunction(layoutOption) || keys(layoutOption).length)) {\n      return;\n    }\n    chartView.group.traverse(function (child) {\n      if (child.ignore) {\n        return true; // Stop traverse descendants.\n      }\n      // Only support label being hosted on graphic elements.\n      var textEl = child.getTextContent();\n      var ecData = getECData(child);\n      // Can only attach the text on the element with dataIndex\n      if (textEl && !textEl.disableLabelLayout) {\n        _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\n      }\n    });\n  };\n  LabelManager.prototype.updateLayoutConfig = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    function createDragHandler(el, labelLineModel) {\n      return function () {\n        updateLabelLinePoints(el, labelLineModel);\n      };\n    }\n    for (var i = 0; i < this._labelList.length; i++) {\n      var labelItem = this._labelList[i];\n      var label = labelItem.label;\n      var hostEl = label.__hostTarget;\n      var defaultLabelAttr = labelItem.defaultAttr;\n      var layoutOption = void 0;\n      // TODO A global layout option?\n      if (isFunction(labelItem.layoutOption)) {\n        layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\n      } else {\n        layoutOption = labelItem.layoutOption;\n      }\n      layoutOption = layoutOption || {};\n      labelItem.computedLayoutOption = layoutOption;\n      var degreeToRadian = Math.PI / 180;\n      // TODO hostEl should always exists.\n      // Or label should not have parent because the x, y is all in global space.\n      if (hostEl) {\n        hostEl.setTextConfig({\n          // Force to set local false.\n          local: false,\n          // Ignore position and rotation config on the host el if x or y is changed.\n          position: layoutOption.x != null || layoutOption.y != null ? null : defaultLabelAttr.attachedPos,\n          // Ignore rotation config on the host el if rotation is changed.\n          rotation: layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\n          offset: [layoutOption.dx || 0, layoutOption.dy || 0]\n        });\n      }\n      var needsUpdateLabelLine = false;\n      if (layoutOption.x != null) {\n        // TODO width of chart view.\n        label.x = parsePercent(layoutOption.x, width);\n        label.setStyle('x', 0); // Ignore movement in style. TODO: origin.\n        needsUpdateLabelLine = true;\n      } else {\n        label.x = defaultLabelAttr.x;\n        label.setStyle('x', defaultLabelAttr.style.x);\n      }\n      if (layoutOption.y != null) {\n        // TODO height of chart view.\n        label.y = parsePercent(layoutOption.y, height);\n        label.setStyle('y', 0); // Ignore movement in style.\n        needsUpdateLabelLine = true;\n      } else {\n        label.y = defaultLabelAttr.y;\n        label.setStyle('y', defaultLabelAttr.style.y);\n      }\n      if (layoutOption.labelLinePoints) {\n        var guideLine = hostEl.getTextGuideLine();\n        if (guideLine) {\n          guideLine.setShape({\n            points: layoutOption.labelLinePoints\n          });\n          // Not update\n          needsUpdateLabelLine = false;\n        }\n      }\n      var labelLayoutStore = labelLayoutInnerStore(label);\n      labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\n      label.rotation = layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\n      label.scaleX = defaultLabelAttr.scaleX;\n      label.scaleY = defaultLabelAttr.scaleY;\n      for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\n        var key = LABEL_OPTION_TO_STYLE_KEYS[k];\n        label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\n      }\n      if (layoutOption.draggable) {\n        label.draggable = true;\n        label.cursor = 'move';\n        if (hostEl) {\n          var hostModel = labelItem.seriesModel;\n          if (labelItem.dataIndex != null) {\n            var data = labelItem.seriesModel.getData(labelItem.dataType);\n            hostModel = data.getItemModel(labelItem.dataIndex);\n          }\n          label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\n        }\n      } else {\n        // TODO Other drag functions?\n        label.off('drag');\n        label.cursor = defaultLabelAttr.cursor;\n      }\n    }\n  };\n  LabelManager.prototype.layout = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var labelList = prepareLayoutList(this._labelList);\n    var labelsNeedsAdjustOnX = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftX';\n    });\n    var labelsNeedsAdjustOnY = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftY';\n    });\n    shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\n    shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\n    var labelsNeedsHideOverlap = filter(labelList, function (item) {\n      return item.layoutOption.hideOverlap;\n    });\n    hideOverlap(labelsNeedsHideOverlap);\n  };\n  /**\r\n   * Process all labels. Not only labels with layoutOption.\r\n   */\n  LabelManager.prototype.processLabelsOverall = function () {\n    var _this = this;\n    each(this._chartViewList, function (chartView) {\n      var seriesModel = chartView.__model;\n      var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\n      var animationEnabled = seriesModel.isAnimationEnabled();\n      chartView.group.traverse(function (child) {\n        if (child.ignore && !child.forceLabelAnimation) {\n          return true; // Stop traverse descendants.\n        }\n        var needsUpdateLabelLine = !ignoreLabelLineUpdate;\n        var label = child.getTextContent();\n        if (!needsUpdateLabelLine && label) {\n          needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\n        }\n        if (needsUpdateLabelLine) {\n          _this._updateLabelLine(child, seriesModel);\n        }\n        if (animationEnabled) {\n          _this._animateLabels(child, seriesModel);\n        }\n      });\n    });\n  };\n  LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\n    // Only support label being hosted on graphic elements.\n    var textEl = el.getTextContent();\n    // Update label line style.\n    var ecData = getECData(el);\n    var dataIndex = ecData.dataIndex;\n    // Only support labelLine on the labels represent data.\n    if (textEl && dataIndex != null) {\n      var data = seriesModel.getData(ecData.dataType);\n      var itemModel = data.getItemModel(dataIndex);\n      var defaultStyle = {};\n      var visualStyle = data.getItemVisual(dataIndex, 'style');\n      if (visualStyle) {\n        var visualType = data.getVisual('drawType');\n        // Default to be same with main color\n        defaultStyle.stroke = visualStyle[visualType];\n      }\n      var labelLineModel = itemModel.getModel('labelLine');\n      setLabelLineStyle(el, getLabelLineStatesModels(itemModel), defaultStyle);\n      updateLabelLinePoints(el, labelLineModel);\n    }\n  };\n  LabelManager.prototype._animateLabels = function (el, seriesModel) {\n    var textEl = el.getTextContent();\n    var guideLine = el.getTextGuideLine();\n    // Animate\n    if (textEl\n    // `forceLabelAnimation` has the highest priority\n    && (el.forceLabelAnimation || !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation && !isElementRemoved(el))) {\n      var layoutStore = labelLayoutInnerStore(textEl);\n      var oldLayout = layoutStore.oldLayout;\n      var ecData = getECData(el);\n      var dataIndex = ecData.dataIndex;\n      var newProps = {\n        x: textEl.x,\n        y: textEl.y,\n        rotation: textEl.rotation\n      };\n      var data = seriesModel.getData(ecData.dataType);\n      if (!oldLayout) {\n        textEl.attr(newProps);\n        // Disable fade in animation if value animation is enabled.\n        if (!labelInner(textEl).valueAnimation) {\n          var oldOpacity = retrieve2(textEl.style.opacity, 1);\n          // Fade in animation\n          textEl.style.opacity = 0;\n          initProps(textEl, {\n            style: {\n              opacity: oldOpacity\n            }\n          }, seriesModel, dataIndex);\n        }\n      } else {\n        textEl.attr(oldLayout);\n        // Make sure the animation from is in the right status.\n        var prevStates = el.prevStates;\n        if (prevStates) {\n          if (indexOf(prevStates, 'select') >= 0) {\n            textEl.attr(layoutStore.oldLayoutSelect);\n          }\n          if (indexOf(prevStates, 'emphasis') >= 0) {\n            textEl.attr(layoutStore.oldLayoutEmphasis);\n          }\n        }\n        updateProps(textEl, newProps, seriesModel, dataIndex);\n      }\n      layoutStore.oldLayout = newProps;\n      if (textEl.states.select) {\n        var layoutSelect = layoutStore.oldLayoutSelect = {};\n        extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\n      }\n      if (textEl.states.emphasis) {\n        var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\n        extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\n      }\n      animateLabelValue(textEl, dataIndex, data, seriesModel, seriesModel);\n    }\n    if (guideLine && !guideLine.ignore && !guideLine.invisible) {\n      var layoutStore = labelLineAnimationStore(guideLine);\n      var oldLayout = layoutStore.oldLayout;\n      var newLayout = {\n        points: guideLine.shape.points\n      };\n      if (!oldLayout) {\n        guideLine.setShape(newLayout);\n        guideLine.style.strokePercent = 0;\n        initProps(guideLine, {\n          style: {\n            strokePercent: 1\n          }\n        }, seriesModel);\n      } else {\n        guideLine.attr({\n          shape: oldLayout\n        });\n        updateProps(guideLine, {\n          shape: newLayout\n        }, seriesModel);\n      }\n      layoutStore.oldLayout = newLayout;\n    }\n  };\n  return LabelManager;\n}();\nexport default LabelManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner } from '../util/model.js';\nimport LabelManager from './LabelManager.js';\nvar getLabelManager = makeInner();\nexport function installLabelLayout(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var labelManager = getLabelManager(api).labelManager;\n    if (!labelManager) {\n      labelManager = getLabelManager(api).labelManager = new LabelManager();\n    }\n    labelManager.clearLabels();\n  });\n  registers.registerUpdateLifecycle('series:layoutlabels', function (ecModel, api, params) {\n    var labelManager = getLabelManager(api).labelManager;\n    params.updatedSeries.forEach(function (series) {\n      labelManager.addLabelsOfSeries(api.getViewOfSeriesModel(series));\n    });\n    labelManager.updateLayoutConfig(api);\n    labelManager.layout(api);\n    labelManager.processLabelsOverall();\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport SVGPainter from 'zrender/lib/svg/Painter.js';\nexport function install(registers) {\n  registers.registerPainter('svg', SVGPainter);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport CanvasPainter from 'zrender/lib/canvas/Painter.js';\nexport function install(registers) {\n  registers.registerPainter('canvas', CanvasPainter);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport function isCoordinateSystemType(coordSys, type) {\n  return coordSys.type === type;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { map } from 'zrender/lib/core/util.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport { createFloat32Array } from '../util/vendor.js';\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n      if (!coordSys) {\n        return;\n      }\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      if (isDimensionStacked(data, dims[0])) {\n        dims[0] = stackResultDim;\n      }\n      if (isDimensionStacked(data, dims[1])) {\n        dims[1] = stackResultDim;\n      }\n      var store = data.getStore();\n      var dimIdx0 = data.getDimensionIndex(dims[0]);\n      var dimIdx1 = data.getDimensionIndex(dims[1]);\n      return dimLen && {\n        progress: function (params, data) {\n          var segCount = params.end - params.start;\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\n          var tmpIn = [];\n          var tmpOut = [];\n          for (var i = params.start, offset = 0; i < params.end; i++) {\n            var point = void 0;\n            if (dimLen === 1) {\n              var x = store.get(dimIdx0, i);\n              // NOTE: Make sure the second parameter is null to use default strategy.\n              point = coordSys.dataToPoint(x, null, tmpOut);\n            } else {\n              tmpIn[0] = store.get(dimIdx0, i);\n              tmpIn[1] = store.get(dimIdx1, i);\n              // Let coordinate system to handle the NaN data.\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n            }\n            if (useTypedArray) {\n              points[offset++] = point[0];\n              points[offset++] = point[1];\n            } else {\n              data.setItemLayout(i, point.slice());\n            }\n          }\n          useTypedArray && data.setLayout('points', points);\n        }\n      };\n    }\n  };\n}\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    }\n    // Return NaN if count is 0\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    }\n    // NaN will cause illegal axis extent.\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    }\n    // NaN will cause illegal axis extent.\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\nvar indexSampler = function (frame) {\n  return Math.round(frame.length / 2);\n};\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count();\n      // Only cartesian2d support down sampling. Disable it when there is few data.\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio();\n        // Coordinste system has been resized\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n        if (isFinite(rate) && rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          } else if (sampling === 'minmax') {\n            seriesModel.setData(data.minmaxDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n          var sampler = void 0;\n          if (isString(sampling)) {\n            sampler = samplers[sampling];\n          } else if (isFunction(sampling)) {\n            sampler = sampling;\n          }\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { Path } from '../graphic.js';\n/**\r\n * Sausage: similar to sector, but have half circle on both sides\r\n */\nvar SausageShape = /** @class */function () {\n  function SausageShape() {\n    this.cx = 0;\n    this.cy = 0;\n    this.r0 = 0;\n    this.r = 0;\n    this.startAngle = 0;\n    this.endAngle = Math.PI * 2;\n    this.clockwise = true;\n  }\n  return SausageShape;\n}();\nvar SausagePath = /** @class */function (_super) {\n  __extends(SausagePath, _super);\n  function SausagePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'sausage';\n    return _this;\n  }\n  SausagePath.prototype.getDefaultShape = function () {\n    return new SausageShape();\n  };\n  SausagePath.prototype.buildPath = function (ctx, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var PI2 = Math.PI * 2;\n    var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\n    if (!lessThanCircle) {\n      // Normalize angles\n      startAngle = endAngle - (clockwise ? PI2 : -PI2);\n    }\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\n      ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    } else {\n      ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\n    }\n    ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\n    ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n    if (r0 !== 0) {\n      ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\n    }\n    // ctx.closePath();\n  };\n  return SausagePath;\n}(Path);\nexport default SausagePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { isArray, isNumber } from 'zrender/lib/core/util.js';\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\n  opts = opts || {};\n  var isRoundCap = opts.isRoundCap;\n  return function (out, opts, boundingRect) {\n    var textPosition = opts.position;\n    if (!textPosition || textPosition instanceof Array) {\n      return calculateTextPosition(out, opts, boundingRect);\n    }\n    var mappedSectorPosition = positionMapping(textPosition);\n    var distance = opts.distance != null ? opts.distance : 5;\n    var sector = this.shape;\n    var cx = sector.cx;\n    var cy = sector.cy;\n    var r = sector.r;\n    var r0 = sector.r0;\n    var middleR = (r + r0) / 2;\n    var startAngle = sector.startAngle;\n    var endAngle = sector.endAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    // base position: top-left\n    var x = cx + r * mathCos(startAngle);\n    var y = cy + r * mathSin(startAngle);\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    switch (mappedSectorPosition) {\n      case 'startArc':\n        x = cx + (r0 - distance) * mathCos(middleAngle);\n        y = cy + (r0 - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n      case 'insideStartArc':\n        x = cx + (r0 + distance) * mathCos(middleAngle);\n        y = cy + (r0 + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n      case 'startAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n      case 'insideStartAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n      case 'middle':\n        x = cx + middleR * mathCos(middleAngle);\n        y = cy + middleR * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n      case 'endArc':\n        x = cx + (r + distance) * mathCos(middleAngle);\n        y = cy + (r + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n      case 'insideEndArc':\n        x = cx + (r - distance) * mathCos(middleAngle);\n        y = cy + (r - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n      case 'endAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n      case 'insideEndAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n      default:\n        return calculateTextPosition(out, opts, boundingRect);\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  };\n}\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n  if (isNumber(rotateType)) {\n    // user-set rotation\n    sector.setTextConfig({\n      rotation: rotateType\n    });\n    return;\n  } else if (isArray(textPosition)) {\n    // user-set position, use 0 as auto rotation\n    sector.setTextConfig({\n      rotation: 0\n    });\n    return;\n  }\n  var shape = sector.shape;\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n  var middleAngle = (startAngle + endAngle) / 2;\n  var anchorAngle;\n  var mappedSectorPosition = positionMapping(textPosition);\n  switch (mappedSectorPosition) {\n    case 'startArc':\n    case 'insideStartArc':\n    case 'middle':\n    case 'insideEndArc':\n    case 'endArc':\n      anchorAngle = middleAngle;\n      break;\n    case 'startAngle':\n    case 'insideStartAngle':\n      anchorAngle = startAngle;\n      break;\n    case 'endAngle':\n    case 'insideEndAngle':\n      anchorAngle = endAngle;\n      break;\n    default:\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n  }\n  var rotate = Math.PI * 1.5 - anchorAngle;\n  /**\r\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\r\n   * half round flipped to increase readability. However, only middle\r\n   * position supports this for now, because in other positions, the\r\n   * anchor point is not at the center of the text, so the positions\r\n   * after rotating is not as expected.\r\n   */\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n    rotate -= Math.PI;\n  }\n  sector.setTextConfig({\n    rotation: rotate\n  });\n}\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n}\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function dataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx);\n        // If in any legend component the status is not selected.\n        for (var i = 0; i < legendModels.length; i++) {\n          // @ts-ignore FIXME: LegendModel\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * LegendVisualProvider is an bridge that pick encoded color from data and\r\n * provide to the legend component.\r\n */\nvar LegendVisualProvider = /** @class */function () {\n  function LegendVisualProvider(\n  // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual,\n  // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData();\n    // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n    return rawData.mapArray(rawData.getName);\n  };\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n    return rawData.indexOfName(name) >= 0;\n  };\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n  return LegendVisualProvider;\n}();\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function negativeDataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        // handle negative value condition\n        var valueDim = data.mapDimension('value');\n        var curValue = data.get(valueDim, idx);\n        if (isNumber(curValue) && !isNaN(curValue) && curValue < 0) {\n          return false;\n        }\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar GridModel = /** @class */function (_super) {\n  __extends(GridModel, _super);\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    // zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar CartesianAxisModel = /** @class */function (_super) {\n  __extends(CartesianAxisModel, _super);\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar defaultOption = {\n  show: true,\n  // zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    showMinLine: true,\n    showMaxLine: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Length of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {\n      // Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport { AXIS_TYPES } from './axisCommonTypes.js';\nimport { each, merge } from 'zrender/lib/core/util.js';\n/**\r\n * Generate sub axis model class\r\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\r\n */\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n    var AxisModel = /** @class */function (_super) {\n      __extends(AxisModel, _super);\n      function AxisModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\r\n       * Should not be called before all of 'getInitailData' finished.\r\n       * Because categories are collected during initializing data.\r\n       */\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option;\n        // FIXME\n        // warning if called before all of 'getInitailData' finished.\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n          return this.__ordinalMeta.categories;\n        }\n      };\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar Cartesian = /** @class */function () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n    this._dimList.push(dim);\n  };\n  return Cartesian;\n}();\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Cartesian from './Cartesian.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport { applyTransform } from 'zrender/lib/core/vector.js';\nexport var cartesian2DDimensions = ['x', 'y'];\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\nvar Cartesian2D = /** @class */function (_super) {\n  __extends(Cartesian2D, _super);\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\r\n   * Calculate an affine transform matrix if two axes are time or value.\r\n   * It's mainly for accelartion on the large time series data.\r\n   */\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    }\n    // Accelerate data to point calculation on the special large time series data.\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\r\n   * Base axis will be used on stacking.\r\n   */\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n  Cartesian2D.prototype.containZone = function (data1, data2) {\n    var zoneDiag1 = this.dataToPoint(data1);\n    var zoneDiag2 = this.dataToPoint(data2);\n    var area = this.getArea();\n    var zone = new BoundingRect(zoneDiag1[0], zoneDiag1[1], zoneDiag2[0] - zoneDiag1[0], zoneDiag2[1] - zoneDiag1[1]);\n    return area.intersect(zone);\n  };\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1];\n    // Fast path\n    if (this._transform\n    // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n  Cartesian2D.prototype.pointToData = function (point, clamp) {\n    var out = [];\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\r\n   * Get rect area of cartesian.\r\n   * Area will have a contain function to determine if a point is in the coordinate system.\r\n   */\n  Cartesian2D.prototype.getArea = function (tolerance) {\n    tolerance = tolerance || 0;\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]) - tolerance;\n    var y = Math.min(yExtent[0], yExtent[1]) - tolerance;\n    var width = Math.max(xExtent[0], xExtent[1]) - x + tolerance;\n    var height = Math.max(yExtent[0], yExtent[1]) - y + tolerance;\n    return new BoundingRect(x, y, width, height);\n  };\n  return Cartesian2D;\n}(Cartesian);\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar Axis2D = /** @class */function (_super) {\n  __extends(Axis2D, _super);\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\r\n     * Index of axis, can be used as key\r\n     * Injected outside.\r\n     */\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\r\n   * Each item cooresponds to this.getExtent(), which\r\n   * means globalExtent[0] may greater than globalExtent[1],\r\n   * unless `asc` is input.\r\n   *\r\n   * @param {boolean} [asc]\r\n   * @return {Array.<number>}\r\n   */\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\r\n   * Set ordinalSortInfo\r\n   * @param info new OrdinalSortInfo\r\n   */\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n  return Axis2D;\n}(Axis);\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\r\n * Can only be called after coordinate system creation stage.\r\n * (Can be called before coordinate system update stage).\r\n */\nexport function layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  }\n  // Axis position\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]];\n  // Axis rotation\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1);\n  // Tick and label direction, x y is axisDim\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n  // Special label rotation\n  var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate;\n  // Over splitLine and splitArea\n  layout.z2 = 1;\n  return layout;\n}\nexport function isCartesian2DSeries(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\nexport function findAxisModels(seriesModel) {\n  var axisModelMap = {\n    xAxisModel: null,\n    yAxisModel: null\n  };\n  zrUtil.each(axisModelMap, function (v, key) {\n    var axisType = key.replace(/Model$/, '');\n    var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!axisModel) {\n        throw new Error(axisType + ' \"' + zrUtil.retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n      }\n    }\n    axisModelMap[key] = axisModel;\n  });\n  return axisModelMap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getPrecisionSafe, round } from '../util/number.js';\nimport IntervalScale from '../scale/Interval.js';\nimport { getScaleExtent } from './axisHelper.js';\nimport { warn } from '../util/log.js';\nimport { increaseInterval, isValueNice } from '../scale/helper.js';\nvar mathLog = Math.log;\nexport function alignScaleTicks(scale, axisModel, alignToScale) {\n  var intervalScaleProto = IntervalScale.prototype;\n  // NOTE: There is a precondition for log scale  here:\n  // In log scale we store _interval and _extent of exponent value.\n  // So if we use the method of InternalScale to set/get these data.\n  // It process the exponent value, which is linear and what we want here.\n  var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n  var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, true);\n  var alignToSplitNumber = alignToTicks.length - 1;\n  var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n  var scaleExtent = getScaleExtent(scale, axisModel);\n  var rawExtent = scaleExtent.extent;\n  var isMinFixed = scaleExtent.fixMin;\n  var isMaxFixed = scaleExtent.fixMax;\n  if (scale.type === 'log') {\n    var logBase = mathLog(scale.base);\n    rawExtent = [mathLog(rawExtent[0]) / logBase, mathLog(rawExtent[1]) / logBase];\n  }\n  scale.setExtent(rawExtent[0], rawExtent[1]);\n  scale.calcNiceExtent({\n    splitNumber: alignToSplitNumber,\n    fixMin: isMinFixed,\n    fixMax: isMaxFixed\n  });\n  var extent = intervalScaleProto.getExtent.call(scale);\n  // Need to update the rawExtent.\n  // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n  if (isMinFixed) {\n    rawExtent[0] = extent[0];\n  }\n  if (isMaxFixed) {\n    rawExtent[1] = extent[1];\n  }\n  var interval = intervalScaleProto.getInterval.call(scale);\n  var min = rawExtent[0];\n  var max = rawExtent[1];\n  if (isMinFixed && isMaxFixed) {\n    // User set min, max, divide to get new interval\n    interval = (max - min) / alignToSplitNumber;\n  } else if (isMinFixed) {\n    max = rawExtent[0] + interval * alignToSplitNumber;\n    // User set min, expand extent on the other side\n    while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n      interval = increaseInterval(interval);\n      max = rawExtent[0] + interval * alignToSplitNumber;\n    }\n  } else if (isMaxFixed) {\n    // User set max, expand extent on the other side\n    min = rawExtent[1] - interval * alignToSplitNumber;\n    while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n      interval = increaseInterval(interval);\n      min = rawExtent[1] - interval * alignToSplitNumber;\n    }\n  } else {\n    var nicedSplitNumber = scale.getTicks().length - 1;\n    if (nicedSplitNumber > alignToSplitNumber) {\n      interval = increaseInterval(interval);\n    }\n    var range = interval * alignToSplitNumber;\n    max = Math.ceil(rawExtent[1] / interval) * interval;\n    min = round(max - range);\n    // Not change the result that crossing zero.\n    if (min < 0 && rawExtent[0] >= 0) {\n      min = 0;\n      max = round(range);\n    } else if (max > 0 && rawExtent[1] <= 0) {\n      max = 0;\n      min = -round(range);\n    }\n  }\n  // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n  var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n  var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval;\n  // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n  intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n  intervalScaleProto.setInterval.call(scale, interval);\n  if (t0 || t1) {\n    intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    var ticks = intervalScaleProto.getTicks.call(scale);\n    if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n      warn(\n      // eslint-disable-next-line\n      \"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + \" and alignTicks: true\");\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Grid is a region which contains at most 4 cartesian systems\r\n *\r\n * TODO Default cartesian\r\n */\nimport { isObject, each, indexOf, retrieve3, keys } from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper.js';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D.js';\nimport Axis2D from './Axis2D.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\nvar Grid = /** @class */function () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n    this._initCartesian(gridModel, ecModel, api);\n    this.model = gridModel;\n  }\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n    this._updateScale(ecModel, this.model);\n    function updateAxisTicks(axes) {\n      var alignTo;\n      // Axis is added in order of axisIndex.\n      var axesIndices = keys(axes);\n      var len = axesIndices.length;\n      if (!len) {\n        return;\n      }\n      var axisNeedsAlign = [];\n      // Process once and calculate the ticks for those don't use alignTicks.\n      for (var i = len - 1; i >= 0; i--) {\n        var idx = +axesIndices[i]; // Convert to number.\n        var axis = axes[idx];\n        var model = axis.model;\n        var scale = axis.scale;\n        if (\n        // Only value and log axis without interval support alignTicks.\n        isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n          axisNeedsAlign.push(axis);\n        } else {\n          niceScaleExtent(scale, model);\n          if (isIntervalOrLogScale(scale)) {\n            // Can only align to interval or log axis.\n            alignTo = axis;\n          }\n        }\n      }\n      ;\n      // All axes has set alignTicks. Pick the first one.\n      // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n      if (axisNeedsAlign.length) {\n        if (!alignTo) {\n          alignTo = axisNeedsAlign.pop();\n          niceScaleExtent(alignTo.scale, alignTo.model);\n        }\n        each(axisNeedsAlign, function (axis) {\n          alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n        });\n      }\n    }\n    updateAxisTicks(axesMap.x);\n    updateAxisTicks(axesMap.y);\n    // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    });\n    // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n    this.resize(this.model, api);\n  };\n  /**\r\n   * Resize the grid\r\n   */\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes();\n    // Minus label size\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0];\n    }\n  };\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\r\n   * @implements\r\n   */\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\r\n   * @implements\r\n   */\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    }\n    // Lowest priority.\n    else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\r\n   * @implements\r\n   */\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\r\n   * Initialize cartesian coordinate systems\r\n   */\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    };\n    // Create axis\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n    this._axesMap = axesMap;\n    // Create cartesian2d\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n        _this._coordsList.push(cartesian);\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n        var axisPosition = axisModel.get('position');\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse');\n        // Inject axis into axisModel\n        axisModel.axis = axis;\n        // Inject axisModel into axis\n        axis.model = axisModel;\n        // Inject grid info axis\n        axis.grid = grid;\n        // Index of axis, can be used as key\n        axis.index = idx;\n        grid._axesList.push(axis);\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\r\n   * Update cartesian properties from series.\r\n   */\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n        unionExtent(data, xAxis);\n        unionExtent(data, yAxis);\n      }\n    }, this);\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\r\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\r\n   */\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx;\n      // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    });\n    // Inject the coordinateSystems into seriesModel\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  };\n  // For deciding which dimensions to use when creating list data\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\r\n * Check if the axis is used in the specified grid.\r\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis,\n// Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  };\n  // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n  if (!onZero) {\n    return;\n  }\n  // If target axis is specified.\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx])\n      // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1];\n  // Fast transform\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport axisDefault from '../axisDefault.js';\nimport Model from '../../model/Model.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport ComponentModel from '../../model/Component.js';\nvar valueAxisDefault = axisDefault.value;\nfunction defaultsShow(opt, show) {\n  return zrUtil.defaults({\n    show: show\n  }, opt);\n}\nvar RadarModel = /** @class */function (_super) {\n  __extends(RadarModel, _super);\n  function RadarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadarModel.type;\n    return _this;\n  }\n  RadarModel.prototype.optionUpdated = function () {\n    var boundaryGap = this.get('boundaryGap');\n    var splitNumber = this.get('splitNumber');\n    var scale = this.get('scale');\n    var axisLine = this.get('axisLine');\n    var axisTick = this.get('axisTick');\n    // let axisType = this.get('axisType');\n    var axisLabel = this.get('axisLabel');\n    var nameTextStyle = this.get('axisName');\n    var showName = this.get(['axisName', 'show']);\n    var nameFormatter = this.get(['axisName', 'formatter']);\n    var nameGap = this.get('axisNameGap');\n    var triggerEvent = this.get('triggerEvent');\n    var indicatorModels = zrUtil.map(this.get('indicator') || [], function (indicatorOpt) {\n      // PENDING\n      if (indicatorOpt.max != null && indicatorOpt.max > 0 && !indicatorOpt.min) {\n        indicatorOpt.min = 0;\n      } else if (indicatorOpt.min != null && indicatorOpt.min < 0 && !indicatorOpt.max) {\n        indicatorOpt.max = 0;\n      }\n      var iNameTextStyle = nameTextStyle;\n      if (indicatorOpt.color != null) {\n        iNameTextStyle = zrUtil.defaults({\n          color: indicatorOpt.color\n        }, nameTextStyle);\n      }\n      // Use same configuration\n      var innerIndicatorOpt = zrUtil.merge(zrUtil.clone(indicatorOpt), {\n        boundaryGap: boundaryGap,\n        splitNumber: splitNumber,\n        scale: scale,\n        axisLine: axisLine,\n        axisTick: axisTick,\n        // axisType: axisType,\n        axisLabel: axisLabel,\n        // Compatible with 2 and use text\n        name: indicatorOpt.text,\n        showName: showName,\n        nameLocation: 'end',\n        nameGap: nameGap,\n        // min: 0,\n        nameTextStyle: iNameTextStyle,\n        triggerEvent: triggerEvent\n      }, false);\n      if (zrUtil.isString(nameFormatter)) {\n        var indName = innerIndicatorOpt.name;\n        innerIndicatorOpt.name = nameFormatter.replace('{value}', indName != null ? indName : '');\n      } else if (zrUtil.isFunction(nameFormatter)) {\n        innerIndicatorOpt.name = nameFormatter(innerIndicatorOpt.name, innerIndicatorOpt);\n      }\n      var model = new Model(innerIndicatorOpt, null, this.ecModel);\n      zrUtil.mixin(model, AxisModelCommonMixin.prototype);\n      // For triggerEvent.\n      model.mainType = 'radar';\n      model.componentIndex = this.componentIndex;\n      return model;\n    }, this);\n    this._indicatorModels = indicatorModels;\n  };\n  RadarModel.prototype.getIndicatorModels = function () {\n    return this._indicatorModels;\n  };\n  RadarModel.type = 'radar';\n  RadarModel.defaultOption = {\n    // zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '75%',\n    startAngle: 90,\n    axisName: {\n      show: true\n      // formatter: null\n      // textStyle: {}\n    },\n    boundaryGap: [0, 0],\n    splitNumber: 5,\n    axisNameGap: 15,\n    scale: false,\n    // Polygon or circle\n    shape: 'polygon',\n    axisLine: zrUtil.merge({\n      lineStyle: {\n        color: '#bbb'\n      }\n    }, valueAxisDefault.axisLine),\n    axisLabel: defaultsShow(valueAxisDefault.axisLabel, false),\n    axisTick: defaultsShow(valueAxisDefault.axisTick, false),\n    // axisType: 'value',\n    splitLine: defaultsShow(valueAxisDefault.splitLine, true),\n    splitArea: defaultsShow(valueAxisDefault.splitArea, true),\n    // {text, min, max}\n    indicator: []\n  };\n  return RadarModel;\n}(ComponentModel);\nexport default RadarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar IndicatorAxis = /** @class */function (_super) {\n  __extends(IndicatorAxis, _super);\n  function IndicatorAxis(dim, scale, radiusExtent) {\n    var _this = _super.call(this, dim, scale, radiusExtent) || this;\n    _this.type = 'value';\n    _this.angle = 0;\n    _this.name = '';\n    return _this;\n  }\n  return IndicatorAxis;\n}(Axis);\nexport default IndicatorAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// TODO clockwise\nimport IndicatorAxis from './IndicatorAxis.js';\nimport IntervalScale from '../../scale/Interval.js';\nimport * as numberUtil from '../../util/number.js';\nimport { map, each, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\nvar Radar = /** @class */function () {\n  function Radar(radarModel, ecModel, api) {\n    /**\r\n     *\r\n     * Radar dimensions\r\n     */\n    this.dimensions = [];\n    this._model = radarModel;\n    this._indicatorAxes = map(radarModel.getIndicatorModels(), function (indicatorModel, idx) {\n      var dim = 'indicator_' + idx;\n      var indicatorAxis = new IndicatorAxis(dim, new IntervalScale()\n      // (indicatorModel.get('axisType') === 'log') ? new LogScale() : new IntervalScale()\n      );\n      indicatorAxis.name = indicatorModel.get('name');\n      // Inject model and axis\n      indicatorAxis.model = indicatorModel;\n      indicatorModel.axis = indicatorAxis;\n      this.dimensions.push(dim);\n      return indicatorAxis;\n    }, this);\n    this.resize(radarModel, api);\n  }\n  Radar.prototype.getIndicatorAxes = function () {\n    return this._indicatorAxes;\n  };\n  Radar.prototype.dataToPoint = function (value, indicatorIndex) {\n    var indicatorAxis = this._indicatorAxes[indicatorIndex];\n    return this.coordToPoint(indicatorAxis.dataToCoord(value), indicatorIndex);\n  };\n  // TODO: API should be coordToPoint([coord, indicatorIndex])\n  Radar.prototype.coordToPoint = function (coord, indicatorIndex) {\n    var indicatorAxis = this._indicatorAxes[indicatorIndex];\n    var angle = indicatorAxis.angle;\n    var x = this.cx + coord * Math.cos(angle);\n    var y = this.cy - coord * Math.sin(angle);\n    return [x, y];\n  };\n  Radar.prototype.pointToData = function (pt) {\n    var dx = pt[0] - this.cx;\n    var dy = pt[1] - this.cy;\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    dx /= radius;\n    dy /= radius;\n    var radian = Math.atan2(-dy, dx);\n    // Find the closest angle\n    // FIXME index can calculated directly\n    var minRadianDiff = Infinity;\n    var closestAxis;\n    var closestAxisIdx = -1;\n    for (var i = 0; i < this._indicatorAxes.length; i++) {\n      var indicatorAxis = this._indicatorAxes[i];\n      var diff = Math.abs(radian - indicatorAxis.angle);\n      if (diff < minRadianDiff) {\n        closestAxis = indicatorAxis;\n        closestAxisIdx = i;\n        minRadianDiff = diff;\n      }\n    }\n    return [closestAxisIdx, +(closestAxis && closestAxis.coordToData(radius))];\n  };\n  Radar.prototype.resize = function (radarModel, api) {\n    var center = radarModel.get('center');\n    var viewWidth = api.getWidth();\n    var viewHeight = api.getHeight();\n    var viewSize = Math.min(viewWidth, viewHeight) / 2;\n    this.cx = numberUtil.parsePercent(center[0], viewWidth);\n    this.cy = numberUtil.parsePercent(center[1], viewHeight);\n    this.startAngle = radarModel.get('startAngle') * Math.PI / 180;\n    // radius may be single value like `20`, `'80%'`, or array like `[10, '80%']`\n    var radius = radarModel.get('radius');\n    if (isString(radius) || isNumber(radius)) {\n      radius = [0, radius];\n    }\n    this.r0 = numberUtil.parsePercent(radius[0], viewSize);\n    this.r = numberUtil.parsePercent(radius[1], viewSize);\n    each(this._indicatorAxes, function (indicatorAxis, idx) {\n      indicatorAxis.setExtent(this.r0, this.r);\n      var angle = this.startAngle + idx * Math.PI * 2 / this._indicatorAxes.length;\n      // Normalize to [-PI, PI]\n      angle = Math.atan2(Math.sin(angle), Math.cos(angle));\n      indicatorAxis.angle = angle;\n    }, this);\n  };\n  Radar.prototype.update = function (ecModel, api) {\n    var indicatorAxes = this._indicatorAxes;\n    var radarModel = this._model;\n    each(indicatorAxes, function (indicatorAxis) {\n      indicatorAxis.scale.setExtent(Infinity, -Infinity);\n    });\n    ecModel.eachSeriesByType('radar', function (radarSeries, idx) {\n      if (radarSeries.get('coordinateSystem') !== 'radar'\n      // @ts-ignore\n      || ecModel.getComponent('radar', radarSeries.get('radarIndex')) !== radarModel) {\n        return;\n      }\n      var data = radarSeries.getData();\n      each(indicatorAxes, function (indicatorAxis) {\n        indicatorAxis.scale.unionExtentFromData(data, data.mapDimension(indicatorAxis.dim));\n      });\n    }, this);\n    var splitNumber = radarModel.get('splitNumber');\n    var dummyScale = new IntervalScale();\n    dummyScale.setExtent(0, splitNumber);\n    dummyScale.setInterval(1);\n    // Force all the axis fixing the maxSplitNumber.\n    each(indicatorAxes, function (indicatorAxis, idx) {\n      alignScaleTicks(indicatorAxis.scale, indicatorAxis.model, dummyScale);\n    });\n  };\n  Radar.prototype.convertToPixel = function (ecModel, finder, value) {\n    console.warn('Not implemented.');\n    return null;\n  };\n  Radar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    console.warn('Not implemented.');\n    return null;\n  };\n  Radar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  Radar.create = function (ecModel, api) {\n    var radarList = [];\n    ecModel.eachComponent('radar', function (radarModel) {\n      var radar = new Radar(radarModel, ecModel, api);\n      radarList.push(radar);\n      radarModel.coordinateSystem = radar;\n    });\n    ecModel.eachSeriesByType('radar', function (radarSeries) {\n      if (radarSeries.get('coordinateSystem') === 'radar') {\n        // Inject coordinate system\n        // @ts-ignore\n        radarSeries.coordinateSystem = radarList[radarSeries.get('radarIndex') || 0];\n      }\n    });\n    return radarList;\n  };\n  /**\r\n   * Radar dimensions is based on the data\r\n   */\n  Radar.dimensions = [];\n  return Radar;\n}();\nexport default Radar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { parseSVG, makeViewBoxTransform } from 'zrender/lib/tool/parseSVG.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport Rect from 'zrender/lib/graphic/shape/Rect.js';\nimport { assert, createHashMap, each } from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parseXML } from 'zrender/lib/tool/parseXML.js';\nimport { GeoSVGRegion } from './Region.js';\n/**\r\n * \"region available\" means that: enable users to set attribute `name=\"xxx\"` on those tags\r\n * to make it be a region.\r\n * 1. region styles and its label styles can be defined in echarts opton:\r\n * ```js\r\n * geo: {\r\n *     regions: [{\r\n *         name: 'xxx',\r\n *         itemStyle: { ... },\r\n *         label: { ... }\r\n *     }, {\r\n *         ...\r\n *     },\r\n *     ...]\r\n * };\r\n * ```\r\n * 2. name can be duplicated in different SVG tag. All of the tags with the same name share\r\n * a region option. For exampel if there are two <path> representing two lung lobes. They have\r\n * no common parents but both of them need to display label \"lung\" inside.\r\n */\nvar REGION_AVAILABLE_SVG_TAG_MAP = createHashMap(['rect', 'circle', 'line', 'ellipse', 'polygon', 'polyline', 'path',\n// <text> <tspan> are also enabled because some SVG might paint text itself,\n// but still need to trigger events or tooltip.\n'text', 'tspan',\n// <g> is also enabled because this case: if multiple tags share one name\n// and need label displayed, every tags will display the name, which is not\n// expected. So we can put them into a <g name=\"xxx\">. Thereby only one label\n// displayed and located based on the bounding rect of the <g>.\n'g']);\nvar GeoSVGResource = /** @class */function () {\n  function GeoSVGResource(mapName, svg) {\n    this.type = 'geoSVG';\n    // All used graphics. key: hostKey, value: root\n    this._usedGraphicMap = createHashMap();\n    // All unused graphics.\n    this._freedGraphics = [];\n    this._mapName = mapName;\n    // Only perform parse to XML object here, which might be time\n    // consiming for large SVG.\n    // Although convert XML to zrender element is also time consiming,\n    // if we do it here, the clone of zrender elements has to be\n    // required. So we do it once for each geo instance, util real\n    // performance issues call for optimizing it.\n    this._parsedXML = parseXML(svg);\n  }\n  GeoSVGResource.prototype.load = function /* nameMap: NameMap */\n  () {\n    // In the \"load\" stage, graphic need to be built to\n    // get boundingRect for geo coordinate system.\n    var firstGraphic = this._firstGraphic;\n    // Create the return data structure only when first graphic created.\n    // Because they will be used in geo coordinate system update stage,\n    // and `regions` will be mounted at `geo` coordinate system,\n    // in which there is no \"view\" info, so that it should better not to\n    // make references to graphic elements.\n    if (!firstGraphic) {\n      firstGraphic = this._firstGraphic = this._buildGraphic(this._parsedXML);\n      this._freedGraphics.push(firstGraphic);\n      this._boundingRect = this._firstGraphic.boundingRect.clone();\n      // PENDING: `nameMap` will not be supported until some real requirement come.\n      // if (nameMap) {\n      //     named = applyNameMap(named, nameMap);\n      // }\n      var _a = createRegions(firstGraphic.named),\n        regions = _a.regions,\n        regionsMap = _a.regionsMap;\n      this._regions = regions;\n      this._regionsMap = regionsMap;\n    }\n    return {\n      boundingRect: this._boundingRect,\n      regions: this._regions,\n      regionsMap: this._regionsMap\n    };\n  };\n  GeoSVGResource.prototype._buildGraphic = function (svgXML) {\n    var result;\n    var rootFromParse;\n    try {\n      result = svgXML && parseSVG(svgXML, {\n        ignoreViewBox: true,\n        ignoreRootClip: true\n      }) || {};\n      rootFromParse = result.root;\n      assert(rootFromParse != null);\n    } catch (e) {\n      throw new Error('Invalid svg format\\n' + e.message);\n    }\n    // Note: we keep the covenant that the root has no transform. So always add an extra root.\n    var root = new Group();\n    root.add(rootFromParse);\n    root.isGeoSVGGraphicRoot = true;\n    // [THE_RULE_OF_VIEWPORT_AND_VIEWBOX]\n    //\n    // Consider: `<svg width=\"...\" height=\"...\" viewBox=\"...\">`\n    // - the `width/height` we call it `svgWidth/svgHeight` for short.\n    // - `(0, 0, svgWidth, svgHeight)` defines the viewport of the SVG, or say,\n    //   \"viewport boundingRect\", or `boundingRect` for short.\n    // - `viewBox` defines the transform from the real content ot the viewport.\n    //   `viewBox` has the same unit as the content of SVG.\n    //   If `viewBox` exists, a transform is defined, so the unit of `svgWidth/svgHeight` become\n    //   different from the content of SVG. Otherwise, they are the same.\n    //\n    // If both `svgWidth/svgHeight/viewBox` are specified in a SVG file, the transform rule will be:\n    // 0. `boundingRect` is `(0, 0, svgWidth, svgHeight)`. Set it to Geo['_rect'] (View['_rect']).\n    // 1. Make a transform from `viewBox` to `boundingRect`.\n    //    Note: only support `preserveAspectRatio 'xMidYMid'` here. That is, this transform will preserve\n    //    the aspect ratio.\n    // 2. Make a transform from boundingRect to Geo['_viewRect'] (View['_viewRect'])\n    //    (`Geo`/`View` will do this job).\n    //    Note: this transform might not preserve aspect radio, which depending on how users specify\n    //    viewRect in echarts option (e.g., `geo.left/top/width/height` will not preserve aspect ratio,\n    //    but `geo.layoutCenter/layoutSize` will preserve aspect ratio).\n    //\n    // If `svgWidth/svgHeight` not specified, we use `viewBox` as the `boundingRect` to make the SVG\n    // layout look good.\n    //\n    // If neither `svgWidth/svgHeight` nor `viewBox` are not specified, we calculate the boundingRect\n    // of the SVG content and use them to make SVG layout look good.\n    var svgWidth = result.width;\n    var svgHeight = result.height;\n    var viewBoxRect = result.viewBoxRect;\n    var boundingRect = this._boundingRect;\n    if (!boundingRect) {\n      var bRectX = void 0;\n      var bRectY = void 0;\n      var bRectWidth = void 0;\n      var bRectHeight = void 0;\n      if (svgWidth != null) {\n        bRectX = 0;\n        bRectWidth = svgWidth;\n      } else if (viewBoxRect) {\n        bRectX = viewBoxRect.x;\n        bRectWidth = viewBoxRect.width;\n      }\n      if (svgHeight != null) {\n        bRectY = 0;\n        bRectHeight = svgHeight;\n      } else if (viewBoxRect) {\n        bRectY = viewBoxRect.y;\n        bRectHeight = viewBoxRect.height;\n      }\n      // If both viewBox and svgWidth/svgHeight not specified,\n      // we have to determine how to layout those element to make them look good.\n      if (bRectX == null || bRectY == null) {\n        var calculatedBoundingRect = rootFromParse.getBoundingRect();\n        if (bRectX == null) {\n          bRectX = calculatedBoundingRect.x;\n          bRectWidth = calculatedBoundingRect.width;\n        }\n        if (bRectY == null) {\n          bRectY = calculatedBoundingRect.y;\n          bRectHeight = calculatedBoundingRect.height;\n        }\n      }\n      boundingRect = this._boundingRect = new BoundingRect(bRectX, bRectY, bRectWidth, bRectHeight);\n    }\n    if (viewBoxRect) {\n      var viewBoxTransform = makeViewBoxTransform(viewBoxRect, boundingRect);\n      // Only support `preserveAspectRatio 'xMidYMid'`\n      rootFromParse.scaleX = rootFromParse.scaleY = viewBoxTransform.scale;\n      rootFromParse.x = viewBoxTransform.x;\n      rootFromParse.y = viewBoxTransform.y;\n    }\n    // SVG needs to clip based on `viewBox`. And some SVG files really rely on this feature.\n    // They do not strictly confine all of the content inside a display rect, but deliberately\n    // use a `viewBox` to define a displayable rect.\n    // PENDING:\n    // The drawback of the `setClipPath` here is: the region label (genereted by echarts) near the\n    // edge might also be clipped, because region labels are put as `textContent` of the SVG path.\n    root.setClipPath(new Rect({\n      shape: boundingRect.plain()\n    }));\n    var named = [];\n    each(result.named, function (namedItem) {\n      if (REGION_AVAILABLE_SVG_TAG_MAP.get(namedItem.svgNodeTagLower) != null) {\n        named.push(namedItem);\n        setSilent(namedItem.el);\n      }\n    });\n    return {\n      root: root,\n      boundingRect: boundingRect,\n      named: named\n    };\n  };\n  /**\r\n   * Consider:\r\n   * (1) One graphic element can not be shared by different `geoView` running simultaneously.\r\n   *     Notice, also need to consider multiple echarts instances share a `mapRecord`.\r\n   * (2) Converting SVG to graphic elements is time consuming.\r\n   * (3) In the current architecture, `load` should be called frequently to get boundingRect,\r\n   *     and it is called without view info.\r\n   * So we maintain graphic elements in this module, and enables `view` to use/return these\r\n   * graphics from/to the pool with it's uid.\r\n   */\n  GeoSVGResource.prototype.useGraphic = function (hostKey /* , nameMap: NameMap */) {\n    var usedRootMap = this._usedGraphicMap;\n    var svgGraphic = usedRootMap.get(hostKey);\n    if (svgGraphic) {\n      return svgGraphic;\n    }\n    svgGraphic = this._freedGraphics.pop()\n    // use the first boundingRect to avoid duplicated boundingRect calculation.\n    || this._buildGraphic(this._parsedXML);\n    usedRootMap.set(hostKey, svgGraphic);\n    // PENDING: `nameMap` will not be supported until some real requirement come.\n    // `nameMap` can only be obtained from echarts option.\n    // The original `named` must not be modified.\n    // if (nameMap) {\n    //     svgGraphic = extend({}, svgGraphic);\n    //     svgGraphic.named = applyNameMap(svgGraphic.named, nameMap);\n    // }\n    return svgGraphic;\n  };\n  GeoSVGResource.prototype.freeGraphic = function (hostKey) {\n    var usedRootMap = this._usedGraphicMap;\n    var svgGraphic = usedRootMap.get(hostKey);\n    if (svgGraphic) {\n      usedRootMap.removeKey(hostKey);\n      this._freedGraphics.push(svgGraphic);\n    }\n  };\n  return GeoSVGResource;\n}();\nexport { GeoSVGResource };\nfunction setSilent(el) {\n  // Only named element has silent: false, other elements should\n  // act as background and has no user interaction.\n  el.silent = false;\n  // text|tspan will be converted to group.\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.silent = false;\n    });\n  }\n}\nfunction createRegions(named) {\n  var regions = [];\n  var regionsMap = createHashMap();\n  // Create resions only for the first graphic.\n  each(named, function (namedItem) {\n    // Region has feature to calculate center for tooltip or other features.\n    // If there is a <g name=\"xxx\">, the center should be the center of the\n    // bounding rect of the g.\n    if (namedItem.namedFrom != null) {\n      return;\n    }\n    var region = new GeoSVGRegion(namedItem.name, namedItem.el);\n    // PENDING: if `nameMap` supported, this region can not be mounted on\n    // `this`, but can only be created each time `load()` called.\n    regions.push(region);\n    // PENDING: if multiple tag named with the same name, only one will be\n    // found by `_regionsMap`. `_regionsMap` is used to find a coordinate\n    // by name. We use `region.getCenter()` as the coordinate.\n    regionsMap.set(namedItem.name, region);\n  });\n  return {\n    regions: regions,\n    regionsMap: regionsMap\n  };\n}\n// PENDING: `nameMap` will not be supported until some real requirement come.\n// /**\n//  * Use the alias in geoNameMap.\n//  * The input `named` must not be modified.\n//  */\n// function applyNameMap(\n//     named: GeoSVGGraphicRecord['named'],\n//     nameMap: NameMap\n// ): GeoSVGGraphicRecord['named'] {\n//     const result = [] as GeoSVGGraphicRecord['named'];\n//     for (let i = 0; i < named.length; i++) {\n//         let regionGraphic = named[i];\n//         const name = regionGraphic.name;\n//         if (nameMap && nameMap.hasOwnProperty(name)) {\n//             regionGraphic = extend({}, regionGraphic);\n//             regionGraphic.name = name;\n//         }\n//         result.push(regionGraphic);\n//     }\n//     return result;\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Fix for 南海诸岛\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { GeoJSONRegion } from '../Region.js';\nvar geoCoord = [126, 25];\nvar nanhaiName = '南海诸岛';\nvar points = [[[0, 3.5], [7, 11.2], [15, 11.9], [30, 7], [42, 0.7], [52, 0.7], [56, 7.7], [59, 0.7], [64, 0.7], [64, 0], [5, 0], [0, 3.5]], [[13, 16.1], [19, 14.7], [16, 21.7], [11, 23.1], [13, 16.1]], [[12, 32.2], [14, 38.5], [15, 38.5], [13, 32.2], [12, 32.2]], [[16, 47.6], [12, 53.2], [13, 53.2], [18, 47.6], [16, 47.6]], [[6, 64.4], [8, 70], [9, 70], [8, 64.4], [6, 64.4]], [[23, 82.6], [29, 79.8], [30, 79.8], [25, 82.6], [23, 82.6]], [[37, 70.7], [43, 62.3], [44, 62.3], [39, 70.7], [37, 70.7]], [[48, 51.1], [51, 45.5], [53, 45.5], [50, 51.1], [48, 51.1]], [[51, 35], [51, 28.7], [53, 28.7], [53, 35], [51, 35]], [[52, 22.4], [55, 17.5], [56, 17.5], [53, 22.4], [52, 22.4]], [[58, 12.6], [62, 7], [63, 7], [60, 12.6], [58, 12.6]], [[0, 3.5], [0, 93.1], [64, 93.1], [64, 0], [63, 0], [63, 92.4], [1, 92.4], [1, 3.5], [0, 3.5]]];\nfor (var i = 0; i < points.length; i++) {\n  for (var k = 0; k < points[i].length; k++) {\n    points[i][k][0] /= 10.5;\n    points[i][k][1] /= -10.5 / 0.75;\n    points[i][k][0] += geoCoord[0];\n    points[i][k][1] += geoCoord[1];\n  }\n}\nexport default function fixNanhai(mapType, regions) {\n  if (mapType === 'china') {\n    for (var i = 0; i < regions.length; i++) {\n      // Already exists.\n      if (regions[i].name === nanhaiName) {\n        return;\n      }\n    }\n    regions.push(new GeoJSONRegion(nanhaiName, zrUtil.map(points, function (exterior) {\n      return {\n        type: 'polygon',\n        exterior: exterior\n      };\n    }), geoCoord));\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar coordsOffsetMap = {\n  '南海诸岛': [32, 80],\n  // 全国\n  '广东': [0, -10],\n  '香港': [10, 5],\n  '澳门': [-10, 10],\n  // '北京': [-10, 0],\n  '天津': [5, 5]\n};\nexport default function fixTextCoords(mapType, region) {\n  if (mapType === 'china') {\n    var coordFix = coordsOffsetMap[region.name];\n    if (coordFix) {\n      var cp = region.getCenter();\n      cp[0] += coordFix[0] / 10.5;\n      cp[1] += -coordFix[1] / (10.5 / 0.75);\n      region.setCenter(cp);\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Fix for 钓鱼岛\n// let Region = require('../Region');\n// let zrUtil = require('zrender/lib/core/util');\n// let geoCoord = [126, 25];\nvar points = [[[123.45165252685547, 25.73527164402261], [123.49731445312499, 25.73527164402261], [123.49731445312499, 25.750734064600884], [123.45165252685547, 25.750734064600884], [123.45165252685547, 25.73527164402261]]];\nexport default function fixDiaoyuIsland(mapType, region) {\n  if (mapType === 'china' && region.name === '台湾') {\n    region.geometries.push({\n      type: 'polygon',\n      exterior: points[0]\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, isString, createHashMap, hasOwn } from 'zrender/lib/core/util.js';\nimport parseGeoJson from './parseGeoJson.js';\n// Built-in GEO fixer.\nimport fixNanhai from './fix/nanhai.js';\nimport fixTextCoord from './fix/textCoord.js';\nimport fixDiaoyuIsland from './fix/diaoyuIsland.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nvar DEFAULT_NAME_PROPERTY = 'name';\nvar GeoJSONResource = /** @class */function () {\n  function GeoJSONResource(mapName, geoJSON, specialAreas) {\n    this.type = 'geoJSON';\n    this._parsedMap = createHashMap();\n    this._mapName = mapName;\n    this._specialAreas = specialAreas;\n    // PENDING: delay the parse to the first usage to rapid up the FMP?\n    this._geoJSON = parseInput(geoJSON);\n  }\n  /**\r\n   * @param nameMap can be null/undefined\r\n   * @param nameProperty can be null/undefined\r\n   */\n  GeoJSONResource.prototype.load = function (nameMap, nameProperty) {\n    nameProperty = nameProperty || DEFAULT_NAME_PROPERTY;\n    var parsed = this._parsedMap.get(nameProperty);\n    if (!parsed) {\n      var rawRegions = this._parseToRegions(nameProperty);\n      parsed = this._parsedMap.set(nameProperty, {\n        regions: rawRegions,\n        boundingRect: calculateBoundingRect(rawRegions)\n      });\n    }\n    var regionsMap = createHashMap();\n    var finalRegions = [];\n    each(parsed.regions, function (region) {\n      var regionName = region.name;\n      // Try use the alias in geoNameMap\n      if (nameMap && hasOwn(nameMap, regionName)) {\n        region = region.cloneShallow(regionName = nameMap[regionName]);\n      }\n      finalRegions.push(region);\n      regionsMap.set(regionName, region);\n    });\n    return {\n      regions: finalRegions,\n      boundingRect: parsed.boundingRect || new BoundingRect(0, 0, 0, 0),\n      regionsMap: regionsMap\n    };\n  };\n  GeoJSONResource.prototype._parseToRegions = function (nameProperty) {\n    var mapName = this._mapName;\n    var geoJSON = this._geoJSON;\n    var rawRegions;\n    // https://jsperf.com/try-catch-performance-overhead\n    try {\n      rawRegions = geoJSON ? parseGeoJson(geoJSON, nameProperty) : [];\n    } catch (e) {\n      throw new Error('Invalid geoJson format\\n' + e.message);\n    }\n    fixNanhai(mapName, rawRegions);\n    each(rawRegions, function (region) {\n      var regionName = region.name;\n      fixTextCoord(mapName, region);\n      fixDiaoyuIsland(mapName, region);\n      // Some area like Alaska in USA map needs to be tansformed\n      // to look better\n      var specialArea = this._specialAreas && this._specialAreas[regionName];\n      if (specialArea) {\n        region.transformTo(specialArea.left, specialArea.top, specialArea.width, specialArea.height);\n      }\n    }, this);\n    return rawRegions;\n  };\n  /**\r\n   * Only for exporting to users.\r\n   * **MUST NOT** used internally.\r\n   */\n  GeoJSONResource.prototype.getMapForUser = function () {\n    return {\n      // For backward compatibility, use geoJson\n      // PENDING: it has been returning them without clone.\n      // do we need to avoid outsite modification?\n      geoJson: this._geoJSON,\n      geoJSON: this._geoJSON,\n      specialAreas: this._specialAreas\n    };\n  };\n  return GeoJSONResource;\n}();\nexport { GeoJSONResource };\nfunction calculateBoundingRect(regions) {\n  var rect;\n  for (var i = 0; i < regions.length; i++) {\n    var regionRect = regions[i].getBoundingRect();\n    rect = rect || regionRect.clone();\n    rect.union(regionRect);\n  }\n  return rect;\n}\nfunction parseInput(source) {\n  return !isString(source) ? source : typeof JSON !== 'undefined' && JSON.parse ? JSON.parse(source) : new Function('return (' + source + ');')();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap } from 'zrender/lib/core/util.js';\nimport { GeoSVGResource } from './GeoSVGResource.js';\nimport { GeoJSONResource } from './GeoJSONResource.js';\nvar storage = createHashMap();\nexport default {\n  /**\r\n   * Compatible with previous `echarts.registerMap`.\r\n   *\r\n   * @usage\r\n   * ```js\r\n   *\r\n   * echarts.registerMap('USA', geoJson, specialAreas);\r\n   *\r\n   * echarts.registerMap('USA', {\r\n   *     geoJson: geoJson,\r\n   *     specialAreas: {...}\r\n   * });\r\n   * echarts.registerMap('USA', {\r\n   *     geoJSON: geoJson,\r\n   *     specialAreas: {...}\r\n   * });\r\n   *\r\n   * echarts.registerMap('airport', {\r\n   *     svg: svg\r\n   * }\r\n   * ```\r\n   *\r\n   * Note:\r\n   * Do not support that register multiple geoJSON or SVG\r\n   * one map name. Because different geoJSON and SVG have\r\n   * different unit. It's not easy to make sure how those\r\n   * units are mapping/normalize.\r\n   * If intending to use multiple geoJSON or SVG, we can\r\n   * use multiple geo coordinate system.\r\n   */\n  registerMap: function (mapName, rawDef, rawSpecialAreas) {\n    if (rawDef.svg) {\n      var resource = new GeoSVGResource(mapName, rawDef.svg);\n      storage.set(mapName, resource);\n    } else {\n      // Recommend:\n      //     echarts.registerMap('eu', { geoJSON: xxx, specialAreas: xxx });\n      // Backward compatibility:\n      //     echarts.registerMap('eu', geoJSON, specialAreas);\n      //     echarts.registerMap('eu', { geoJson: xxx, specialAreas: xxx });\n      var geoJSON = rawDef.geoJson || rawDef.geoJSON;\n      if (geoJSON && !rawDef.features) {\n        rawSpecialAreas = rawDef.specialAreas;\n      } else {\n        geoJSON = rawDef;\n      }\n      var resource = new GeoJSONResource(mapName, geoJSON, rawSpecialAreas);\n      storage.set(mapName, resource);\n    }\n  },\n  getGeoResource: function (mapName) {\n    return storage.get(mapName);\n  },\n  /**\r\n   * Only for exporting to users.\r\n   * **MUST NOT** used internally.\r\n   */\n  getMapForUser: function (mapName) {\n    var resource = storage.get(mapName);\n    // Do not support return SVG until some real requirement come.\n    return resource && resource.type === 'geoJSON' && resource.getMapForUser();\n  },\n  load: function (mapName, nameMap, nameProperty) {\n    var resource = storage.get(mapName);\n    if (!resource) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Map ' + mapName + ' not exists. The GeoJSON of the map must be provided.');\n      }\n      return;\n    }\n    return resource.load(nameMap, nameProperty);\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Simple view coordinate system\r\n * Mapping given x, y to transformd view x, y\r\n */\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { parsePercent } from '../util/number.js';\nvar v2ApplyTransform = vector.applyTransform;\nvar View = /** @class */function (_super) {\n  __extends(View, _super);\n  function View(name) {\n    var _this = _super.call(this) || this;\n    _this.type = 'view';\n    _this.dimensions = ['x', 'y'];\n    /**\r\n     * Represents the transform brought by roam/zoom.\r\n     * If `View['_viewRect']` applies roam transform,\r\n     * we can get the final displayed rect.\r\n     */\n    _this._roamTransformable = new Transformable();\n    /**\r\n     * Represents the transform from `View['_rect']` to `View['_viewRect']`.\r\n     */\n    _this._rawTransformable = new Transformable();\n    _this.name = name;\n    return _this;\n  }\n  View.prototype.setBoundingRect = function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  };\n  /**\r\n   * @return {module:zrender/core/BoundingRect}\r\n   */\n  View.prototype.getBoundingRect = function () {\n    return this._rect;\n  };\n  View.prototype.setViewRect = function (x, y, width, height) {\n    this._transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  };\n  /**\r\n   * Transformed to particular position and size\r\n   */\n  View.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransform.parent;\n    rawTransform.parent = null;\n    rawTransform.decomposeTransform();\n    rawTransform.parent = rawParent;\n    this._updateTransform();\n  };\n  /**\r\n   * Set center of view\r\n   */\n  View.prototype.setCenter = function (centerCoord, api) {\n    if (!centerCoord) {\n      return;\n    }\n    this._center = [parsePercent(centerCoord[0], api.getWidth()), parsePercent(centerCoord[1], api.getHeight())];\n    this._updateCenterAndZoom();\n  };\n  View.prototype.setZoom = function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n    this._zoom = zoom;\n    this._updateCenterAndZoom();\n  };\n  /**\r\n   * Get default center without roam\r\n   */\n  View.prototype.getDefaultCenter = function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  };\n  View.prototype.getCenter = function () {\n    return this._center || this.getDefaultCenter();\n  };\n  View.prototype.getZoom = function () {\n    return this._zoom || 1;\n  };\n  View.prototype.getRoamTransform = function () {\n    return this._roamTransformable.getLocalTransform();\n  };\n  /**\r\n   * Remove roam\r\n   */\n  View.prototype._updateCenterAndZoom = function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.originX = center[0];\n    roamTransform.originY = center[1];\n    roamTransform.x = defaultCenter[0] - center[0];\n    roamTransform.y = defaultCenter[1] - center[1];\n    roamTransform.scaleX = roamTransform.scaleY = zoom;\n    this._updateTransform();\n  };\n  /**\r\n   * Update transform props on `this` based on the current\r\n   * `this._roamTransformable` and `this._rawTransformable`.\r\n   */\n  View.prototype._updateTransform = function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  };\n  View.prototype.getTransformInfo = function () {\n    var rawTransformable = this._rawTransformable;\n    var roamTransformable = this._roamTransformable;\n    // Because roamTransformabel has `originX/originY` modified,\n    // but the caller of `getTransformInfo` can not handle `originX/originY`,\n    // so need to recalculate them.\n    var dummyTransformable = new Transformable();\n    dummyTransformable.transform = roamTransformable.transform;\n    dummyTransformable.decomposeTransform();\n    return {\n      roam: {\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY\n      },\n      raw: {\n        x: rawTransformable.x,\n        y: rawTransformable.y,\n        scaleX: rawTransformable.scaleX,\n        scaleY: rawTransformable.scaleY\n      }\n    };\n  };\n  View.prototype.getViewRect = function () {\n    return this._viewRect;\n  };\n  /**\r\n   * Get view rect after roam transform\r\n   */\n  View.prototype.getViewRectAfterRoam = function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  };\n  /**\r\n   * Convert a single (lon, lat) data item to (x, y) point.\r\n   */\n  View.prototype.dataToPoint = function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  };\n  /**\r\n   * Convert a (x, y) point to (lon, lat) data\r\n   */\n  View.prototype.pointToData = function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  };\n  View.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n  View.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  /**\r\n   * @implements\r\n   */\n  View.prototype.containPoint = function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  };\n  View.dimensions = ['x', 'y'];\n  return View;\n}(Transformable);\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  return seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n}\nexport default View;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport View from '../View.js';\nimport geoSourceManager from './geoSourceManager.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nimport { warn } from '../../util/log.js';\nvar GEO_DEFAULT_PARAMS = {\n  'geoJSON': {\n    aspectScale: 0.75,\n    invertLongitute: true\n  },\n  'geoSVG': {\n    aspectScale: 1,\n    invertLongitute: false\n  }\n};\nexport var geo2DDimensions = ['lng', 'lat'];\nvar Geo = /** @class */function (_super) {\n  __extends(Geo, _super);\n  function Geo(name, map, opt) {\n    var _this = _super.call(this, name) || this;\n    _this.dimensions = geo2DDimensions;\n    _this.type = 'geo';\n    // Only store specified name coord via `addGeoCoord`.\n    _this._nameCoordMap = zrUtil.createHashMap();\n    _this.map = map;\n    var projection = opt.projection;\n    var source = geoSourceManager.load(map, opt.nameMap, opt.nameProperty);\n    var resource = geoSourceManager.getGeoResource(map);\n    var resourceType = _this.resourceType = resource ? resource.type : null;\n    var regions = _this.regions = source.regions;\n    var defaultParams = GEO_DEFAULT_PARAMS[resource.type];\n    _this._regionsMap = source.regionsMap;\n    _this.regions = source.regions;\n    if (process.env.NODE_ENV !== 'production' && projection) {\n      // Do some check\n      if (resourceType === 'geoSVG') {\n        if (process.env.NODE_ENV !== 'production') {\n          warn(\"Map \" + map + \" with SVG source can't use projection. Only GeoJSON source supports projection.\");\n        }\n        projection = null;\n      }\n      if (!(projection.project && projection.unproject)) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('project and unproject must be both provided in the projeciton.');\n        }\n        projection = null;\n      }\n    }\n    _this.projection = projection;\n    var boundingRect;\n    if (projection) {\n      // Can't reuse the raw bounding rect\n      for (var i = 0; i < regions.length; i++) {\n        var regionRect = regions[i].getBoundingRect(projection);\n        boundingRect = boundingRect || regionRect.clone();\n        boundingRect.union(regionRect);\n      }\n    } else {\n      boundingRect = source.boundingRect;\n    }\n    _this.setBoundingRect(boundingRect.x, boundingRect.y, boundingRect.width, boundingRect.height);\n    // aspectScale and invertLongitute actually is the parameters default raw projection.\n    // So we ignore them if projection is given.\n    // Ignore default aspect scale if projection exits.\n    _this.aspectScale = projection ? 1 : zrUtil.retrieve2(opt.aspectScale, defaultParams.aspectScale);\n    // Not invert longitude if projection exits.\n    _this._invertLongitute = projection ? false : defaultParams.invertLongitute;\n    return _this;\n  }\n  Geo.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var invertLongitute = this._invertLongitute;\n    rect = rect.clone();\n    if (invertLongitute) {\n      // Longitude is inverted.\n      rect.y = -rect.y - rect.height;\n    }\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransformable.parent;\n    rawTransformable.parent = null;\n    rawTransformable.decomposeTransform();\n    rawTransformable.parent = rawParent;\n    if (invertLongitute) {\n      rawTransformable.scaleY = -rawTransformable.scaleY;\n    }\n    this._updateTransform();\n  };\n  Geo.prototype.getRegion = function (name) {\n    return this._regionsMap.get(name);\n  };\n  Geo.prototype.getRegionByCoord = function (coord) {\n    var regions = this.regions;\n    for (var i = 0; i < regions.length; i++) {\n      var region = regions[i];\n      if (region.type === 'geoJSON' && region.contain(coord)) {\n        return regions[i];\n      }\n    }\n  };\n  /**\r\n   * Add geoCoord for indexing by name\r\n   */\n  Geo.prototype.addGeoCoord = function (name, geoCoord) {\n    this._nameCoordMap.set(name, geoCoord);\n  };\n  /**\r\n   * Get geoCoord by name\r\n   */\n  Geo.prototype.getGeoCoord = function (name) {\n    var region = this._regionsMap.get(name);\n    // Calculate center only on demand.\n    return this._nameCoordMap.get(name) || region && region.getCenter();\n  };\n  Geo.prototype.dataToPoint = function (data, noRoam, out) {\n    if (zrUtil.isString(data)) {\n      // Map area name to geoCoord\n      data = this.getGeoCoord(data);\n    }\n    if (data) {\n      var projection = this.projection;\n      if (projection) {\n        // projection may return null point.\n        data = projection.project(data);\n      }\n      return data && this.projectedToPoint(data, noRoam, out);\n    }\n  };\n  Geo.prototype.pointToData = function (point) {\n    var projection = this.projection;\n    if (projection) {\n      // projection may return null point.\n      point = projection.unproject(point);\n    }\n    return point && this.pointToProjected(point);\n  };\n  /**\r\n   * Point to projected data. Same with pointToData when projection is used.\r\n   */\n  Geo.prototype.pointToProjected = function (point) {\n    return _super.prototype.pointToData.call(this, point);\n  };\n  Geo.prototype.projectedToPoint = function (projected, noRoam, out) {\n    return _super.prototype.dataToPoint.call(this, projected, noRoam, out);\n  };\n  Geo.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n  Geo.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  return Geo;\n}(View);\n;\nzrUtil.mixin(Geo, View);\nfunction getCoordSys(finder) {\n  var geoModel = finder.geoModel;\n  var seriesModel = finder.seriesModel;\n  return geoModel ? geoModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem // For map series.\n  || (seriesModel.getReferringComponents('geo', SINGLE_REFERRING).models[0] || {}).coordinateSystem : null;\n}\nexport default Geo;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Geo, { geo2DDimensions } from './Geo.js';\nimport * as layout from '../../util/layout.js';\nimport * as numberUtil from '../../util/number.js';\nimport geoSourceManager from './geoSourceManager.js';\nimport * as vector from 'zrender/lib/core/vector.js';\n/**\r\n * Resize method bound to the geo\r\n */\nfunction resizeGeo(geoModel, api) {\n  var boundingCoords = geoModel.get('boundingCoords');\n  if (boundingCoords != null) {\n    var leftTop_1 = boundingCoords[0];\n    var rightBottom_1 = boundingCoords[1];\n    if (!(isFinite(leftTop_1[0]) && isFinite(leftTop_1[1]) && isFinite(rightBottom_1[0]) && isFinite(rightBottom_1[1]))) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Invalid boundingCoords');\n      }\n    } else {\n      // Sample around the lng/lat rect and use projection to calculate actual bounding rect.\n      var projection_1 = this.projection;\n      if (projection_1) {\n        var xMin = leftTop_1[0];\n        var yMin = leftTop_1[1];\n        var xMax = rightBottom_1[0];\n        var yMax = rightBottom_1[1];\n        leftTop_1 = [Infinity, Infinity];\n        rightBottom_1 = [-Infinity, -Infinity];\n        // TODO better way?\n        var sampleLine = function (x0, y0, x1, y1) {\n          var dx = x1 - x0;\n          var dy = y1 - y0;\n          for (var i = 0; i <= 100; i++) {\n            var p = i / 100;\n            var pt = projection_1.project([x0 + dx * p, y0 + dy * p]);\n            vector.min(leftTop_1, leftTop_1, pt);\n            vector.max(rightBottom_1, rightBottom_1, pt);\n          }\n        };\n        // Top\n        sampleLine(xMin, yMin, xMax, yMin);\n        // Right\n        sampleLine(xMax, yMin, xMax, yMax);\n        // Bottom\n        sampleLine(xMax, yMax, xMin, yMax);\n        // Left\n        sampleLine(xMin, yMax, xMax, yMin);\n      }\n      this.setBoundingRect(leftTop_1[0], leftTop_1[1], rightBottom_1[0] - leftTop_1[0], rightBottom_1[1] - leftTop_1[1]);\n    }\n  }\n  var rect = this.getBoundingRect();\n  var centerOption = geoModel.get('layoutCenter');\n  var sizeOption = geoModel.get('layoutSize');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var aspect = rect.width / rect.height * this.aspectScale;\n  var useCenterAndSize = false;\n  var center;\n  var size;\n  if (centerOption && sizeOption) {\n    center = [numberUtil.parsePercent(centerOption[0], viewWidth), numberUtil.parsePercent(centerOption[1], viewHeight)];\n    size = numberUtil.parsePercent(sizeOption, Math.min(viewWidth, viewHeight));\n    if (!isNaN(center[0]) && !isNaN(center[1]) && !isNaN(size)) {\n      useCenterAndSize = true;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.');\n      }\n    }\n  }\n  var viewRect;\n  if (useCenterAndSize) {\n    viewRect = {};\n    if (aspect > 1) {\n      // Width is same with size\n      viewRect.width = size;\n      viewRect.height = size / aspect;\n    } else {\n      viewRect.height = size;\n      viewRect.width = size * aspect;\n    }\n    viewRect.y = center[1] - viewRect.height / 2;\n    viewRect.x = center[0] - viewRect.width / 2;\n  } else {\n    // Use left/top/width/height\n    var boxLayoutOption = geoModel.getBoxLayoutParams();\n    boxLayoutOption.aspect = aspect;\n    viewRect = layout.getLayoutRect(boxLayoutOption, {\n      width: viewWidth,\n      height: viewHeight\n    });\n  }\n  this.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n  this.setCenter(geoModel.get('center'), api);\n  this.setZoom(geoModel.get('zoom'));\n}\n// Back compat for ECharts2, where the coord map is set on map series:\n// {type: 'map', geoCoord: {'cityA': [116.46,39.92], 'cityA': [119.12,24.61]}},\nfunction setGeoCoords(geo, model) {\n  zrUtil.each(model.get('geoCoord'), function (geoCoord, name) {\n    geo.addGeoCoord(name, geoCoord);\n  });\n}\nvar GeoCreator = /** @class */function () {\n  function GeoCreator() {\n    // For deciding which dimensions to use when creating list data\n    this.dimensions = geo2DDimensions;\n  }\n  GeoCreator.prototype.create = function (ecModel, api) {\n    var geoList = [];\n    function getCommonGeoProperties(model) {\n      return {\n        nameProperty: model.get('nameProperty'),\n        aspectScale: model.get('aspectScale'),\n        projection: model.get('projection')\n      };\n    }\n    // FIXME Create each time may be slow\n    ecModel.eachComponent('geo', function (geoModel, idx) {\n      var mapName = geoModel.get('map');\n      var geo = new Geo(mapName + idx, mapName, zrUtil.extend({\n        nameMap: geoModel.get('nameMap')\n      }, getCommonGeoProperties(geoModel)));\n      geo.zoomLimit = geoModel.get('scaleLimit');\n      geoList.push(geo);\n      // setGeoCoords(geo, geoModel);\n      geoModel.coordinateSystem = geo;\n      geo.model = geoModel;\n      // Inject resize method\n      geo.resize = resizeGeo;\n      geo.resize(geoModel, api);\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var coordSys = seriesModel.get('coordinateSystem');\n      if (coordSys === 'geo') {\n        var geoIndex = seriesModel.get('geoIndex') || 0;\n        seriesModel.coordinateSystem = geoList[geoIndex];\n      }\n    });\n    // If has map series\n    var mapModelGroupBySeries = {};\n    ecModel.eachSeriesByType('map', function (seriesModel) {\n      if (!seriesModel.getHostGeoModel()) {\n        var mapType = seriesModel.getMapType();\n        mapModelGroupBySeries[mapType] = mapModelGroupBySeries[mapType] || [];\n        mapModelGroupBySeries[mapType].push(seriesModel);\n      }\n    });\n    zrUtil.each(mapModelGroupBySeries, function (mapSeries, mapType) {\n      var nameMapList = zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('nameMap');\n      });\n      var geo = new Geo(mapType, mapType, zrUtil.extend({\n        nameMap: zrUtil.mergeAll(nameMapList)\n      }, getCommonGeoProperties(mapSeries[0])));\n      geo.zoomLimit = zrUtil.retrieve.apply(null, zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('scaleLimit');\n      }));\n      geoList.push(geo);\n      // Inject resize method\n      geo.resize = resizeGeo;\n      geo.resize(mapSeries[0], api);\n      zrUtil.each(mapSeries, function (singleMapSeries) {\n        singleMapSeries.coordinateSystem = geo;\n        setGeoCoords(geo, singleMapSeries);\n      });\n    });\n    return geoList;\n  };\n  /**\r\n   * Fill given regions array\r\n   */\n  GeoCreator.prototype.getFilledRegions = function (originRegionArr, mapName, nameMap, nameProperty) {\n    // Not use the original\n    var regionsArr = (originRegionArr || []).slice();\n    var dataNameMap = zrUtil.createHashMap();\n    for (var i = 0; i < regionsArr.length; i++) {\n      dataNameMap.set(regionsArr[i].name, regionsArr[i]);\n    }\n    var source = geoSourceManager.load(mapName, nameMap, nameProperty);\n    zrUtil.each(source.regions, function (region) {\n      var name = region.name;\n      var regionOption = dataNameMap.get(name);\n      // apply specified echarts style in GeoJSON data\n      var specifiedGeoJSONRegionStyle = region.properties && region.properties.echartsStyle;\n      if (!regionOption) {\n        regionOption = {\n          name: name\n        };\n        regionsArr.push(regionOption);\n      }\n      specifiedGeoJSONRegionStyle && zrUtil.merge(regionOption, specifiedGeoJSONRegionStyle);\n    });\n    return regionsArr;\n  };\n  return GeoCreator;\n}();\nvar geoCreator = new GeoCreator();\nexport default geoCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nimport Model from '../../model/Model.js';\nimport geoCreator from './geoCreator.js';\nimport geoSourceManager from './geoSourceManager.js';\n;\nvar GeoModel = /** @class */function (_super) {\n  __extends(GeoModel, _super);\n  function GeoModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GeoModel.type;\n    return _this;\n  }\n  GeoModel.prototype.init = function (option, parentModel, ecModel) {\n    var source = geoSourceManager.getGeoResource(option.map);\n    if (source && source.type === 'geoJSON') {\n      var itemStyle = option.itemStyle = option.itemStyle || {};\n      if (!('color' in itemStyle)) {\n        itemStyle.color = '#eee';\n      }\n    }\n    this.mergeDefaultAndTheme(option, ecModel);\n    // Default label emphasis `show`\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n  };\n  GeoModel.prototype.optionUpdated = function () {\n    var _this = this;\n    var option = this.option;\n    option.regions = geoCreator.getFilledRegions(option.regions, option.map, option.nameMap, option.nameProperty);\n    var selectedMap = {};\n    this._optionModelMap = zrUtil.reduce(option.regions || [], function (optionModelMap, regionOpt) {\n      var regionName = regionOpt.name;\n      if (regionName) {\n        optionModelMap.set(regionName, new Model(regionOpt, _this, _this.ecModel));\n        if (regionOpt.selected) {\n          selectedMap[regionName] = true;\n        }\n      }\n      return optionModelMap;\n    }, zrUtil.createHashMap());\n    if (!option.selectedMap) {\n      option.selectedMap = selectedMap;\n    }\n  };\n  /**\r\n   * Get model of region.\r\n   */\n  GeoModel.prototype.getRegionModel = function (name) {\n    return this._optionModelMap.get(name) || new Model(null, this, this.ecModel);\n  };\n  /**\r\n   * Format label\r\n   * @param name Region name\r\n   */\n  GeoModel.prototype.getFormattedLabel = function (name, status) {\n    var regionModel = this.getRegionModel(name);\n    var formatter = status === 'normal' ? regionModel.get(['label', 'formatter']) : regionModel.get(['emphasis', 'label', 'formatter']);\n    var params = {\n      name: name\n    };\n    if (zrUtil.isFunction(formatter)) {\n      params.status = status;\n      return formatter(params);\n    } else if (zrUtil.isString(formatter)) {\n      return formatter.replace('{a}', name != null ? name : '');\n    }\n  };\n  GeoModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n  GeoModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n  // PENGING If selectedMode is null ?\n  GeoModel.prototype.select = function (name) {\n    var option = this.option;\n    var selectedMode = option.selectedMode;\n    if (!selectedMode) {\n      return;\n    }\n    if (selectedMode !== 'multiple') {\n      option.selectedMap = null;\n    }\n    var selectedMap = option.selectedMap || (option.selectedMap = {});\n    selectedMap[name] = true;\n  };\n  GeoModel.prototype.unSelect = function (name) {\n    var selectedMap = this.option.selectedMap;\n    if (selectedMap) {\n      selectedMap[name] = false;\n    }\n  };\n  GeoModel.prototype.toggleSelected = function (name) {\n    this[this.isSelected(name) ? 'unSelect' : 'select'](name);\n  };\n  GeoModel.prototype.isSelected = function (name) {\n    var selectedMap = this.option.selectedMap;\n    return !!(selectedMap && selectedMap[name]);\n  };\n  GeoModel.type = 'geo';\n  GeoModel.layoutMode = 'box';\n  GeoModel.defaultOption = {\n    // zlevel: 0,\n    z: 0,\n    show: true,\n    left: 'center',\n    top: 'center',\n    // Default value:\n    // for geoSVG source: 1,\n    // for geoJSON source: 0.75.\n    aspectScale: null,\n    // /// Layout with center and size\n    // If you want to put map in a fixed size box with right aspect ratio\n    // This two properties may be more convenient\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    silent: false,\n    // Map type\n    map: '',\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ]\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    // selectedMode: false\n    label: {\n      show: false,\n      color: '#000'\n    },\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444'\n      // Default color:\n      // + geoJSON: #eee\n      // + geoSVG: null (use SVG original `fill`)\n      // color: '#eee'\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    select: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    regions: []\n    // tooltip: {\n    //     show: false\n    // }\n  };\n  return GeoModel;\n}(ComponentModel);\nexport default GeoModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nfunction getCenterCoord(view, point) {\n  // Use projected coord as center because it's linear.\n  return view.pointToProjected ? view.pointToProjected(point) : view.pointToData(point);\n}\nexport function updateCenterAndZoom(view, payload, zoomLimit, api) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.projectedToPoint ? view.projectedToPoint(center) : view.dataToPoint(center);\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    view.setCenter(getCenterCoord(view, point), api);\n  }\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    }\n    // Zoom on given point(originX, originY)\n    view.scaleX *= zoom;\n    view.scaleY *= zoom;\n    var fixX = (payload.originX - view.x) * (zoom - 1);\n    var fixY = (payload.originY - view.y) * (zoom - 1);\n    view.x -= fixX;\n    view.y -= fixY;\n    view.updateTransform();\n    // Get the new center\n    view.setCenter(getCenterCoord(view, point), api);\n    view.setZoom(zoom * previousZoom);\n  }\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Link lists and struct (graph or tree)\r\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt);\n  // Porxy data original methods.\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  });\n  // Beyond transfer, additional features should be added to `cloneShallow`.\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt));\n  // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  });\n  // Make sure datas contains mainData.\n  assert(datas[mainData.dataType] === mainData);\n}\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n  return res;\n}\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\r\n * Supplement method to List.\r\n *\r\n * @public\r\n * @param [dataType] If not specified, return mainData.\r\n */\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\r\n * Get list of all linked data\r\n */\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  }\n  // Supplement method.\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\nexport default linkSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Tree data structure\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport linkSeriesData from './helper/linkSeriesData.js';\nimport SeriesData from './SeriesData.js';\nimport prepareSeriesDataSchema from './helper/createDimensions.js';\nimport { convertOptionIdName } from '../util/model.js';\nvar TreeNode = /** @class */function () {\n  function TreeNode(name, hostTree) {\n    this.depth = 0;\n    this.height = 0;\n    /**\r\n     * Reference to list item.\r\n     * Do not persistent dataIndex outside,\r\n     * besause it may be changed by list.\r\n     * If dataIndex -1,\r\n     * this node is logical deleted (filtered) in list.\r\n     */\n    this.dataIndex = -1;\n    this.children = [];\n    this.viewChildren = [];\n    this.isExpand = false;\n    this.name = name || '';\n    this.hostTree = hostTree;\n  }\n  /**\r\n   * The node is removed.\r\n   */\n  TreeNode.prototype.isRemoved = function () {\n    return this.dataIndex < 0;\n  };\n  TreeNode.prototype.eachNode = function (options, cb, context) {\n    if (zrUtil.isFunction(options)) {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n    options = options || {};\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n    order === 'postorder' && cb.call(context, this);\n  };\n  /**\r\n   * Update depth and height of this subtree.\r\n   */\n  TreeNode.prototype.updateDepthAndHeight = function (depth) {\n    var height = 0;\n    this.depth = depth;\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n    this.height = height + 1;\n  };\n  TreeNode.prototype.getNodeById = function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n      if (res) {\n        return res;\n      }\n    }\n  };\n  TreeNode.prototype.contains = function (node) {\n    if (node === this) {\n      return true;\n    }\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n      if (res) {\n        return res;\n      }\n    }\n  };\n  /**\r\n   * @param includeSelf Default false.\r\n   * @return order: [root, child, grandchild, ...]\r\n   */\n  TreeNode.prototype.getAncestors = function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n    ancestors.reverse();\n    return ancestors;\n  };\n  TreeNode.prototype.getAncestorsIndices = function () {\n    var indices = [];\n    var currNode = this;\n    while (currNode) {\n      indices.push(currNode.dataIndex);\n      currNode = currNode.parentNode;\n    }\n    indices.reverse();\n    return indices;\n  };\n  TreeNode.prototype.getDescendantIndices = function () {\n    var indices = [];\n    this.eachNode(function (childNode) {\n      indices.push(childNode.dataIndex);\n    });\n    return indices;\n  };\n  TreeNode.prototype.getValue = function (dimension) {\n    var data = this.hostTree.data;\n    return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n  };\n  TreeNode.prototype.setLayout = function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  };\n  /**\r\n   * @return {Object} layout\r\n   */\n  TreeNode.prototype.getLayout = function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  };\n  // @depcrecated\n  // getModel<T = unknown, S extends keyof T = keyof T>(path: S): Model<T[S]>\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  TreeNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  // TODO: TYPE More specific model\n  TreeNode.prototype.getLevelModel = function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  };\n  TreeNode.prototype.setVisual = function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  };\n  /**\r\n   * Get item visual\r\n   * FIXME: make return type better\r\n   */\n  TreeNode.prototype.getVisual = function (key) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key);\n  };\n  TreeNode.prototype.getRawIndex = function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  };\n  TreeNode.prototype.getId = function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  };\n  /**\r\n   * index in parent's children\r\n   */\n  TreeNode.prototype.getChildIndex = function () {\n    if (this.parentNode) {\n      var children = this.parentNode.children;\n      for (var i = 0; i < children.length; ++i) {\n        if (children[i] === this) {\n          return i;\n        }\n      }\n      return -1;\n    }\n    return -1;\n  };\n  /**\r\n   * if this is an ancestor of another node\r\n   *\r\n   * @param node another node\r\n   * @return if is ancestor\r\n   */\n  TreeNode.prototype.isAncestorOf = function (node) {\n    var parent = node.parentNode;\n    while (parent) {\n      if (parent === this) {\n        return true;\n      }\n      parent = parent.parentNode;\n    }\n    return false;\n  };\n  /**\r\n   * if this is an descendant of another node\r\n   *\r\n   * @param node another node\r\n   * @return if is descendant\r\n   */\n  TreeNode.prototype.isDescendantOf = function (node) {\n    return node !== this && node.isAncestorOf(this);\n  };\n  return TreeNode;\n}();\nexport { TreeNode };\n;\nvar Tree = /** @class */function () {\n  function Tree(hostModel) {\n    this.type = 'tree';\n    this._nodes = [];\n    this.hostModel = hostModel;\n  }\n  Tree.prototype.eachNode = function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  };\n  Tree.prototype.getNodeByDataIndex = function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  };\n  Tree.prototype.getNodeById = function (name) {\n    return this.root.getNodeById(name);\n  };\n  /**\r\n   * Update item available by list,\r\n   * when list has been performed options like 'filterSelf' or 'map'.\r\n   */\n  Tree.prototype.update = function () {\n    var data = this.data;\n    var nodes = this._nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  /**\r\n   * Clear all layouts\r\n   */\n  Tree.prototype.clearLayouts = function () {\n    this.data.clearItemLayouts();\n  };\n  /**\r\n   * data node format:\r\n   * {\r\n   *     name: ...\r\n   *     value: ...\r\n   *     children: [\r\n   *         {\r\n   *             name: ...\r\n   *             value: ...\r\n   *             children: ...\r\n   *         },\r\n   *         ...\r\n   *     ]\r\n   * }\r\n   */\n  Tree.createTree = function (dataRoot, hostModel, beforeLink) {\n    var tree = new Tree(hostModel);\n    var listData = [];\n    var dimMax = 1;\n    buildHierarchy(dataRoot);\n    function buildHierarchy(dataNode, parentNode) {\n      var value = dataNode.value;\n      dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n      listData.push(dataNode);\n      var node = new TreeNode(convertOptionIdName(dataNode.name, ''), tree);\n      parentNode ? addChild(node, parentNode) : tree.root = node;\n      tree._nodes.push(node);\n      var children = dataNode.children;\n      if (children) {\n        for (var i = 0; i < children.length; i++) {\n          buildHierarchy(children[i], node);\n        }\n      }\n    }\n    tree.root.updateDepthAndHeight(0);\n    var dimensions = prepareSeriesDataSchema(listData, {\n      coordDimensions: ['value'],\n      dimensionsCount: dimMax\n    }).dimensions;\n    var list = new SeriesData(dimensions, hostModel);\n    list.initData(listData);\n    beforeLink && beforeLink(list);\n    linkSeriesData({\n      mainData: list,\n      struct: tree,\n      structAttr: 'tree'\n    });\n    tree.update();\n    return tree;\n  };\n  return Tree;\n}();\n/**\r\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\r\n * so this function is not ready and not necessary to be public.\r\n */\nfunction addChild(child, node) {\n  var children = node.children;\n  if (child.parentNode === node) {\n    return;\n  }\n  children.push(child);\n  child.parentNode = node;\n}\nexport default Tree;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Animate multiple elements with a single done-callback.\r\n *\r\n * @example\r\n *  animation\r\n *      .createWrap()\r\n *      .add(el1, {x: 10, y: 10})\r\n *      .add(el2, {shape: {width: 500}, style: {fill: 'red'}}, 400)\r\n *      .done(function () { // done })\r\n *      .start('cubicOut');\r\n */\nvar AnimationWrap = /** @class */function () {\n  function AnimationWrap() {\n    this._storage = [];\n    this._elExistsMap = {};\n  }\n  /**\r\n   * Caution: a el can only be added once, otherwise 'done'\r\n   * might not be called. This method checks this (by el.id),\r\n   * suppresses adding and returns false when existing el found.\r\n   *\r\n   * @return Whether adding succeeded.\r\n   */\n  AnimationWrap.prototype.add = function (el, target, duration, delay, easing) {\n    if (this._elExistsMap[el.id]) {\n      return false;\n    }\n    this._elExistsMap[el.id] = true;\n    this._storage.push({\n      el: el,\n      target: target,\n      duration: duration,\n      delay: delay,\n      easing: easing\n    });\n    return true;\n  };\n  /**\r\n   * Only execute when animation done/aborted.\r\n   */\n  AnimationWrap.prototype.finished = function (callback) {\n    this._finishedCallback = callback;\n    return this;\n  };\n  /**\r\n   * Will stop exist animation firstly.\r\n   */\n  AnimationWrap.prototype.start = function () {\n    var _this = this;\n    var count = this._storage.length;\n    var checkTerminate = function () {\n      count--;\n      if (count <= 0) {\n        // Guard.\n        _this._storage.length = 0;\n        _this._elExistsMap = {};\n        _this._finishedCallback && _this._finishedCallback();\n      }\n    };\n    for (var i = 0, len = this._storage.length; i < len; i++) {\n      var item = this._storage[i];\n      item.el.animateTo(item.target, {\n        duration: item.duration,\n        delay: item.delay,\n        easing: item.easing,\n        setToFinal: true,\n        done: checkTerminate,\n        aborted: checkTerminate\n      });\n    }\n    return this;\n  };\n  return AnimationWrap;\n}();\nexport function createWrap() {\n  return new AnimationWrap();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as zrColor from 'zrender/lib/tool/color.js';\nimport { linearMap } from '../util/number.js';\nimport { warn } from '../util/log.js';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\nvar VisualMapping = /** @class */function () {\n  function VisualMapping(option) {\n    var mappingMethod = option.mappingMethod;\n    var visualType = option.type;\n    var thisOption = this.option = zrUtil.clone(option);\n    this.type = visualType;\n    this.mappingMethod = mappingMethod;\n    this._normalizeData = normalizers[mappingMethod];\n    var visualHandler = VisualMapping.visualHandlers[visualType];\n    this.applyVisual = visualHandler.applyVisual;\n    this.getColorMapper = visualHandler.getColorMapper;\n    this._normalizedToVisual = visualHandler._normalizedToVisual[mappingMethod];\n    if (mappingMethod === 'piecewise') {\n      normalizeVisualRange(thisOption);\n      preprocessForPiecewise(thisOption);\n    } else if (mappingMethod === 'category') {\n      thisOption.categories ? preprocessForSpecifiedCategory(thisOption)\n      // categories is ordinal when thisOption.categories not specified,\n      // which need no more preprocess except normalize visual.\n      : normalizeVisualRange(thisOption, true);\n    } else {\n      // mappingMethod === 'linear' or 'fixed'\n      zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n      normalizeVisualRange(thisOption);\n    }\n  }\n  VisualMapping.prototype.mapValueToVisual = function (value) {\n    var normalized = this._normalizeData(value);\n    return this._normalizedToVisual(normalized, value);\n  };\n  VisualMapping.prototype.getNormalizer = function () {\n    return zrUtil.bind(this._normalizeData, this);\n  };\n  /**\r\n   * List available visual types.\r\n   *\r\n   * @public\r\n   * @return {Array.<string>}\r\n   */\n  VisualMapping.listVisualTypes = function () {\n    return zrUtil.keys(VisualMapping.visualHandlers);\n  };\n  // /**\n  //  * @public\n  //  */\n  // static addVisualHandler(name, handler) {\n  //     visualHandlers[name] = handler;\n  // }\n  /**\r\n   * @public\r\n   */\n  VisualMapping.isValidType = function (visualType) {\n    return VisualMapping.visualHandlers.hasOwnProperty(visualType);\n  };\n  /**\r\n   * Convenient method.\r\n   * Visual can be Object or Array or primary type.\r\n   */\n  VisualMapping.eachVisual = function (visual, callback, context) {\n    if (zrUtil.isObject(visual)) {\n      zrUtil.each(visual, callback, context);\n    } else {\n      callback.call(context, visual);\n    }\n  };\n  VisualMapping.mapVisual = function (visual, callback, context) {\n    var isPrimary;\n    var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n    VisualMapping.eachVisual(visual, function (v, key) {\n      var newVal = callback.call(context, v, key);\n      isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n    });\n    return newVisual;\n  };\n  /**\r\n   * Retrieve visual properties from given object.\r\n   */\n  VisualMapping.retrieveVisuals = function (obj) {\n    var ret = {};\n    var hasVisual;\n    obj && each(VisualMapping.visualHandlers, function (h, visualType) {\n      if (obj.hasOwnProperty(visualType)) {\n        ret[visualType] = obj[visualType];\n        hasVisual = true;\n      }\n    });\n    return hasVisual ? ret : null;\n  };\n  /**\r\n   * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\r\n   *\r\n   * @public\r\n   * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\r\n   *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\r\n   * @return {Array.<string>} Sorted visual types.\r\n   */\n  VisualMapping.prepareVisualTypes = function (visualTypes) {\n    if (zrUtil.isArray(visualTypes)) {\n      visualTypes = visualTypes.slice();\n    } else if (isObject(visualTypes)) {\n      var types_1 = [];\n      each(visualTypes, function (item, type) {\n        types_1.push(type);\n      });\n      visualTypes = types_1;\n    } else {\n      return [];\n    }\n    visualTypes.sort(function (type1, type2) {\n      // color should be front of colorSaturation, colorAlpha, ...\n      // symbol and symbolSize do not matter.\n      return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n    });\n    return visualTypes;\n  };\n  /**\r\n   * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\r\n   * Other visuals are only depends on themself.\r\n   */\n  VisualMapping.dependsOn = function (visualType1, visualType2) {\n    return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n  };\n  /**\r\n   * @param value\r\n   * @param pieceList [{value: ..., interval: [min, max]}, ...]\r\n   *                         Always from small to big.\r\n   * @param findClosestWhenOutside Default to be false\r\n   * @return index\r\n   */\n  VisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n    var possibleI;\n    var abs = Infinity;\n    // value has the higher priority.\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var pieceValue = pieceList[i].value;\n      if (pieceValue != null) {\n        if (pieceValue === value\n        // FIXME\n        // It is supposed to compare value according to value type of dimension,\n        // but currently value type can exactly be string or number.\n        // Compromise for numeric-like string (like '12'), especially\n        // in the case that visualMap.categories is ['22', '33'].\n        || zrUtil.isString(pieceValue) && pieceValue === value + '') {\n          return i;\n        }\n        findClosestWhenOutside && updatePossible(pieceValue, i);\n      }\n    }\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var piece = pieceList[i];\n      var interval = piece.interval;\n      var close_1 = piece.close;\n      if (interval) {\n        if (interval[0] === -Infinity) {\n          if (littleThan(close_1[1], value, interval[1])) {\n            return i;\n          }\n        } else if (interval[1] === Infinity) {\n          if (littleThan(close_1[0], interval[0], value)) {\n            return i;\n          }\n        } else if (littleThan(close_1[0], interval[0], value) && littleThan(close_1[1], value, interval[1])) {\n          return i;\n        }\n        findClosestWhenOutside && updatePossible(interval[0], i);\n        findClosestWhenOutside && updatePossible(interval[1], i);\n      }\n    }\n    if (findClosestWhenOutside) {\n      return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n    }\n    function updatePossible(val, index) {\n      var newAbs = Math.abs(val - value);\n      if (newAbs < abs) {\n        abs = newAbs;\n        possibleI = index;\n      }\n    }\n  };\n  VisualMapping.visualHandlers = {\n    color: {\n      applyVisual: makeApplyVisual('color'),\n      getColorMapper: function () {\n        var thisOption = this.option;\n        return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n          !isNormalized && (value = this._normalizeData(value));\n          return doMapCategory.call(this, value);\n        } : function (value, isNormalized, out) {\n          // If output rgb array\n          // which will be much faster and useful in pixel manipulation\n          var returnRGBArray = !!out;\n          !isNormalized && (value = this._normalizeData(value));\n          out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n          return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n        }, this);\n      },\n      _normalizedToVisual: {\n        linear: function (normalized) {\n          return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        },\n        category: doMapCategory,\n        piecewise: function (normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n          if (result == null) {\n            result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n          }\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    colorHue: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, value);\n    }),\n    colorSaturation: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, value);\n    }),\n    colorLightness: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, null, value);\n    }),\n    colorAlpha: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyAlpha(color, value);\n    }),\n    decal: {\n      applyVisual: makeApplyVisual('decal'),\n      _normalizedToVisual: {\n        linear: null,\n        category: doMapCategory,\n        piecewise: null,\n        fixed: null\n      }\n    },\n    opacity: {\n      applyVisual: makeApplyVisual('opacity'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    },\n    liftZ: {\n      applyVisual: makeApplyVisual('liftZ'),\n      _normalizedToVisual: {\n        linear: doMapFixed,\n        category: doMapFixed,\n        piecewise: doMapFixed,\n        fixed: doMapFixed\n      }\n    },\n    symbol: {\n      applyVisual: function (value, getter, setter) {\n        var symbolCfg = this.mapValueToVisual(value);\n        setter('symbol', symbolCfg);\n      },\n      _normalizedToVisual: {\n        linear: doMapToArray,\n        category: doMapCategory,\n        piecewise: function (normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n          if (result == null) {\n            result = doMapToArray.call(this, normalized);\n          }\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    symbolSize: {\n      applyVisual: makeApplyVisual('symbolSize'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    }\n  };\n  return VisualMapping;\n}();\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index;\n    // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var categoryMap = thisOption.categoryMap = {};\n  var visual = thisOption.visual;\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  });\n  // Process visual map input.\n  if (!zrUtil.isArray(visual)) {\n    var visualArr_1 = [];\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr_1[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr_1[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n    visual = setVisualToOption(thisOption, visualArr_1);\n  }\n  // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n  setVisualToOption(thisOption, visualArr);\n}\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function (value, getter, setter) {\n      // Only used in HSL\n      var colorChannel = this.mapValueToVisual(value);\n      // Must not be array value\n      setter('color', applyValue(getter('color'), colorChannel));\n    },\n    _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n  };\n}\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {}; // TODO {}?\n}\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\nfunction doMapFixed() {\n  // visual will be convert to array.\n  return this.option.visual[0];\n}\n/**\r\n * Create mapped to numeric visual\r\n */\nfunction createNormalizedToNumericVisual(sourceExtent) {\n  return {\n    linear: function (normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function (normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      var color = zrColor.parse(item);\n      if (!color && process.env.NODE_ENV !== 'production') {\n        warn(\"'\" + item + \"' is an illegal color, fallback to '#000000'\", true);\n      }\n      return color || [0, 0, 0, 1];\n    });\n  }\n  return visualArr;\n}\n/**\r\n * Normalizers by mapping methods.\r\n */\nvar normalizers = {\n  linear: function (value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function (value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function (value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal value\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\nexport default VisualMapping;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n// id may be function name of Object, add a prefix to avoid this problem.\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\nvar Graph = /** @class */function () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\r\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\r\n     * @private\r\n     */\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\r\n   * If is directed graph\r\n   */\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n  ;\n  /**\r\n   * Add a new node\r\n   */\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n      return;\n    }\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n  ;\n  /**\r\n   * Get node by data index\r\n   */\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n  ;\n  /**\r\n   * Get node by id\r\n   */\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n  ;\n  /**\r\n   * Add a new edge\r\n   */\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap;\n    // PENDING\n    if (zrUtil.isNumber(n1)) {\n      n1 = this.nodes[n1];\n    }\n    if (zrUtil.isNumber(n2)) {\n      n2 = this.nodes[n2];\n    }\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n    if (!n1 || !n2) {\n      return;\n    }\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n    n1.edges.push(edge);\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n  ;\n  /**\r\n   * Get edge by data index\r\n   */\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n  ;\n  /**\r\n   * Get edge by two linked nodes\r\n   */\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n    var edgesMap = this._edgesMap;\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n  ;\n  /**\r\n   * Iterate all nodes\r\n   */\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n  ;\n  /**\r\n   * Iterate all edges\r\n   */\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n  ;\n  /**\r\n   * Breadth first traverse\r\n   * Return true to stop traversing\r\n   */\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n    if (!startNode) {\n      return;\n    }\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n    var queue = [startNode];\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n  ;\n  // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    });\n    // Update edge\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  ;\n  /**\r\n   * @return {module:echarts/data/Graph}\r\n   */\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n    return graph;\n  };\n  ;\n  return Graph;\n}();\nvar GraphNode = /** @class */function () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\r\n   * @return {number}\r\n   */\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\r\n   * @return {number}\r\n   */\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\r\n  * @return {number}\r\n  */\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n    return dataIndices;\n  };\n  GraphNode.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n      connectedEdgesMap.set(adjacentEdge.dataIndex, true);\n      var sourceNodesQueue = [adjacentEdge.node1];\n      var targetNodesQueue = [adjacentEdge.node2];\n      var nodeIteratorIndex = 0;\n      while (nodeIteratorIndex < sourceNodesQueue.length) {\n        var sourceNode = sourceNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(sourceNode.dataIndex, true);\n        for (var j = 0; j < sourceNode.inEdges.length; j++) {\n          connectedEdgesMap.set(sourceNode.inEdges[j].dataIndex, true);\n          sourceNodesQueue.push(sourceNode.inEdges[j].node1);\n        }\n      }\n      nodeIteratorIndex = 0;\n      while (nodeIteratorIndex < targetNodesQueue.length) {\n        var targetNode = targetNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(targetNode.dataIndex, true);\n        for (var j = 0; j < targetNode.outEdges.length; j++) {\n          connectedEdgesMap.set(targetNode.outEdges[j].dataIndex, true);\n          targetNodesQueue.push(targetNode.outEdges[j].node2);\n        }\n      }\n    }\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n  return GraphNode;\n}();\nvar GraphEdge = /** @class */function () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n  GraphEdge.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n    connectedEdgesMap.set(this.dataIndex, true);\n    var sourceNodes = [this.node1];\n    var targetNodes = [this.node2];\n    var nodeIteratorIndex = 0;\n    while (nodeIteratorIndex < sourceNodes.length) {\n      var sourceNode = sourceNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(sourceNode.dataIndex, true);\n      for (var j = 0; j < sourceNode.inEdges.length; j++) {\n        connectedEdgesMap.set(sourceNode.inEdges[j].dataIndex, true);\n        sourceNodes.push(sourceNode.inEdges[j].node1);\n      }\n    }\n    nodeIteratorIndex = 0;\n    while (nodeIteratorIndex < targetNodes.length) {\n      var targetNode = targetNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(targetNode.dataIndex, true);\n      for (var j = 0; j < targetNode.outEdges.length; j++) {\n        connectedEdgesMap.set(targetNode.outEdges[j].dataIndex, true);\n        targetNodes.push(targetNode.outEdges[j].node2);\n      }\n    }\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n  return GraphEdge;\n}();\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\r\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\r\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function (key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nexport default function parallelPreprocessor(option) {\n  createParallelIfNeeded(option);\n  mergeAxisOptionFromParallel(option);\n}\n/**\r\n * Create a parallel coordinate if not exists.\r\n * @inner\r\n */\nfunction createParallelIfNeeded(option) {\n  if (option.parallel) {\n    return;\n  }\n  var hasParallelSeries = false;\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'parallel') {\n      hasParallelSeries = true;\n    }\n  });\n  if (hasParallelSeries) {\n    option.parallel = [{}];\n  }\n}\n/**\r\n * Merge aixs definition from parallel option (if exists) to axis option.\r\n * @inner\r\n */\nfunction mergeAxisOptionFromParallel(option) {\n  var axes = modelUtil.normalizeToArray(option.parallelAxis);\n  zrUtil.each(axes, function (axisOption) {\n    if (!zrUtil.isObject(axisOption)) {\n      return;\n    }\n    var parallelIndex = axisOption.parallelIndex || 0;\n    var parallelOption = modelUtil.normalizeToArray(option.parallel)[parallelIndex];\n    if (parallelOption && parallelOption.parallelAxisDefault) {\n      zrUtil.merge(axisOption, parallelOption.parallelAxisDefault, false);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nvar ParallelModel = /** @class */function (_super) {\n  __extends(ParallelModel, _super);\n  function ParallelModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelModel.type;\n    return _this;\n  }\n  ParallelModel.prototype.init = function () {\n    _super.prototype.init.apply(this, arguments);\n    this.mergeOption({});\n  };\n  ParallelModel.prototype.mergeOption = function (newOption) {\n    var thisOption = this.option;\n    newOption && zrUtil.merge(thisOption, newOption, true);\n    this._initDimensions();\n  };\n  /**\r\n   * Whether series or axis is in this coordinate system.\r\n   */\n  ParallelModel.prototype.contains = function (model, ecModel) {\n    var parallelIndex = model.get('parallelIndex');\n    return parallelIndex != null && ecModel.getComponent('parallel', parallelIndex) === this;\n  };\n  ParallelModel.prototype.setAxisExpand = function (opt) {\n    zrUtil.each(['axisExpandable', 'axisExpandCenter', 'axisExpandCount', 'axisExpandWidth', 'axisExpandWindow'], function (name) {\n      if (opt.hasOwnProperty(name)) {\n        // @ts-ignore FIXME: why \"never\" inferred in this.option[name]?\n        this.option[name] = opt[name];\n      }\n    }, this);\n  };\n  ParallelModel.prototype._initDimensions = function () {\n    var dimensions = this.dimensions = [];\n    var parallelAxisIndex = this.parallelAxisIndex = [];\n    var axisModels = zrUtil.filter(this.ecModel.queryComponents({\n      mainType: 'parallelAxis'\n    }), function (axisModel) {\n      // Can not use this.contains here, because\n      // initialization has not been completed yet.\n      return (axisModel.get('parallelIndex') || 0) === this.componentIndex;\n    }, this);\n    zrUtil.each(axisModels, function (axisModel) {\n      dimensions.push('dim' + axisModel.get('dim'));\n      parallelAxisIndex.push(axisModel.componentIndex);\n    });\n  };\n  ParallelModel.type = 'parallel';\n  ParallelModel.dependencies = ['parallelAxis'];\n  ParallelModel.layoutMode = 'box';\n  ParallelModel.defaultOption = {\n    // zlevel: 0,\n    z: 0,\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    layout: 'horizontal',\n    // FIXME\n    // naming?\n    axisExpandable: false,\n    axisExpandCenter: null,\n    axisExpandCount: 0,\n    axisExpandWidth: 50,\n    axisExpandRate: 17,\n    axisExpandDebounce: 50,\n    // [out, in, jumpTarget]. In percentage. If use [null, 0.05], null means full.\n    // Do not doc to user until necessary.\n    axisExpandSlideTriggerArea: [-0.15, 0.05, 0.4],\n    axisExpandTriggerOn: 'click',\n    parallelAxisDefault: null\n  };\n  return ParallelModel;\n}(ComponentModel);\nexport default ParallelModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar ParallelAxis = /** @class */function (_super) {\n  __extends(ParallelAxis, _super);\n  function ParallelAxis(dim, scale, coordExtent, axisType, axisIndex) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    _this.type = axisType || 'value';\n    _this.axisIndex = axisIndex;\n    return _this;\n  }\n  ParallelAxis.prototype.isHorizontal = function () {\n    return this.coordinateSystem.getModel().get('layout') !== 'horizontal';\n  };\n  return ParallelAxis;\n}(Axis);\nexport default ParallelAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Parallel Coordinates\r\n * <https://en.wikipedia.org/wiki/Parallel_coordinates>\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport ParallelAxis from './ParallelAxis.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../../component/helper/sliderMove.js';\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar round = numberUtil.round;\nvar PI = Math.PI;\nvar Parallel = /** @class */function () {\n  function Parallel(parallelModel, ecModel, api) {\n    this.type = 'parallel';\n    /**\r\n     * key: dimension\r\n     */\n    this._axesMap = zrUtil.createHashMap();\n    /**\r\n     * key: dimension\r\n     * value: {position: [], rotation, }\r\n     */\n    this._axesLayout = {};\n    this.dimensions = parallelModel.dimensions;\n    this._model = parallelModel;\n    this._init(parallelModel, ecModel, api);\n  }\n  Parallel.prototype._init = function (parallelModel, ecModel, api) {\n    var dimensions = parallelModel.dimensions;\n    var parallelAxisIndex = parallelModel.parallelAxisIndex;\n    each(dimensions, function (dim, idx) {\n      var axisIndex = parallelAxisIndex[idx];\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axis = this._axesMap.set(dim, new ParallelAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisIndex));\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse');\n      // Injection\n      axisModel.axis = axis;\n      axis.model = axisModel;\n      axis.coordinateSystem = axisModel.coordinateSystem = this;\n    }, this);\n  };\n  /**\r\n   * Update axis scale after data processed\r\n   */\n  Parallel.prototype.update = function (ecModel, api) {\n    this._updateAxesFromSeries(this._model, ecModel);\n  };\n  Parallel.prototype.containPoint = function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n    var axisBase = layoutInfo.axisBase;\n    var layoutBase = layoutInfo.layoutBase;\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var pAxis = point[1 - pixelDimIndex];\n    var pLayout = point[pixelDimIndex];\n    return pAxis >= axisBase && pAxis <= axisBase + layoutInfo.axisLength && pLayout >= layoutBase && pLayout <= layoutBase + layoutInfo.layoutLength;\n  };\n  Parallel.prototype.getModel = function () {\n    return this._model;\n  };\n  /**\r\n   * Update properties from series\r\n   */\n  Parallel.prototype._updateAxesFromSeries = function (parallelModel, ecModel) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (!parallelModel.contains(seriesModel, ecModel)) {\n        return;\n      }\n      var data = seriesModel.getData();\n      each(this.dimensions, function (dim) {\n        var axis = this._axesMap.get(dim);\n        axis.scale.unionExtentFromData(data, data.mapDimension(dim));\n        axisHelper.niceScaleExtent(axis.scale, axis.model);\n      }, this);\n    }, this);\n  };\n  /**\r\n   * Resize the parallel coordinate system.\r\n   */\n  Parallel.prototype.resize = function (parallelModel, api) {\n    this._rect = layoutUtil.getLayoutRect(parallelModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._layoutAxes();\n  };\n  Parallel.prototype.getRect = function () {\n    return this._rect;\n  };\n  Parallel.prototype._makeLayoutInfo = function () {\n    var parallelModel = this._model;\n    var rect = this._rect;\n    var xy = ['x', 'y'];\n    var wh = ['width', 'height'];\n    var layout = parallelModel.get('layout');\n    var pixelDimIndex = layout === 'horizontal' ? 0 : 1;\n    var layoutLength = rect[wh[pixelDimIndex]];\n    var layoutExtent = [0, layoutLength];\n    var axisCount = this.dimensions.length;\n    var axisExpandWidth = restrict(parallelModel.get('axisExpandWidth'), layoutExtent);\n    var axisExpandCount = restrict(parallelModel.get('axisExpandCount') || 0, [0, axisCount]);\n    var axisExpandable = parallelModel.get('axisExpandable') && axisCount > 3 && axisCount > axisExpandCount && axisExpandCount > 1 && axisExpandWidth > 0 && layoutLength > 0;\n    // `axisExpandWindow` is According to the coordinates of [0, axisExpandLength],\n    // for sake of consider the case that axisCollapseWidth is 0 (when screen is narrow),\n    // where collapsed axes should be overlapped.\n    var axisExpandWindow = parallelModel.get('axisExpandWindow');\n    var winSize;\n    if (!axisExpandWindow) {\n      winSize = restrict(axisExpandWidth * (axisExpandCount - 1), layoutExtent);\n      var axisExpandCenter = parallelModel.get('axisExpandCenter') || mathFloor(axisCount / 2);\n      axisExpandWindow = [axisExpandWidth * axisExpandCenter - winSize / 2];\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    } else {\n      winSize = restrict(axisExpandWindow[1] - axisExpandWindow[0], layoutExtent);\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    }\n    var axisCollapseWidth = (layoutLength - winSize) / (axisCount - axisExpandCount);\n    // Avoid axisCollapseWidth is too small.\n    axisCollapseWidth < 3 && (axisCollapseWidth = 0);\n    // Find the first and last indices > ewin[0] and < ewin[1].\n    var winInnerIndices = [mathFloor(round(axisExpandWindow[0] / axisExpandWidth, 1)) + 1, mathCeil(round(axisExpandWindow[1] / axisExpandWidth, 1)) - 1];\n    // Pos in ec coordinates.\n    var axisExpandWindow0Pos = axisCollapseWidth / axisExpandWidth * axisExpandWindow[0];\n    return {\n      layout: layout,\n      pixelDimIndex: pixelDimIndex,\n      layoutBase: rect[xy[pixelDimIndex]],\n      layoutLength: layoutLength,\n      axisBase: rect[xy[1 - pixelDimIndex]],\n      axisLength: rect[wh[1 - pixelDimIndex]],\n      axisExpandable: axisExpandable,\n      axisExpandWidth: axisExpandWidth,\n      axisCollapseWidth: axisCollapseWidth,\n      axisExpandWindow: axisExpandWindow,\n      axisCount: axisCount,\n      winInnerIndices: winInnerIndices,\n      axisExpandWindow0Pos: axisExpandWindow0Pos\n    };\n  };\n  Parallel.prototype._layoutAxes = function () {\n    var rect = this._rect;\n    var axes = this._axesMap;\n    var dimensions = this.dimensions;\n    var layoutInfo = this._makeLayoutInfo();\n    var layout = layoutInfo.layout;\n    axes.each(function (axis) {\n      var axisExtent = [0, layoutInfo.axisLength];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(axisExtent[idx], axisExtent[1 - idx]);\n    });\n    each(dimensions, function (dim, idx) {\n      var posInfo = (layoutInfo.axisExpandable ? layoutAxisWithExpand : layoutAxisWithoutExpand)(idx, layoutInfo);\n      var positionTable = {\n        horizontal: {\n          x: posInfo.position,\n          y: layoutInfo.axisLength\n        },\n        vertical: {\n          x: 0,\n          y: posInfo.position\n        }\n      };\n      var rotationTable = {\n        horizontal: PI / 2,\n        vertical: 0\n      };\n      var position = [positionTable[layout].x + rect.x, positionTable[layout].y + rect.y];\n      var rotation = rotationTable[layout];\n      var transform = matrix.create();\n      matrix.rotate(transform, transform, rotation);\n      matrix.translate(transform, transform, position);\n      // TODO\n      // tick layout info\n      // TODO\n      // update dimensions info based on axis order.\n      this._axesLayout[dim] = {\n        position: position,\n        rotation: rotation,\n        transform: transform,\n        axisNameAvailableWidth: posInfo.axisNameAvailableWidth,\n        axisLabelShow: posInfo.axisLabelShow,\n        nameTruncateMaxWidth: posInfo.nameTruncateMaxWidth,\n        tickDirection: 1,\n        labelDirection: 1\n      };\n    }, this);\n  };\n  /**\r\n   * Get axis by dim.\r\n   */\n  Parallel.prototype.getAxis = function (dim) {\n    return this._axesMap.get(dim);\n  };\n  /**\r\n   * Convert a dim value of a single item of series data to Point.\r\n   */\n  Parallel.prototype.dataToPoint = function (value, dim) {\n    return this.axisCoordToPoint(this._axesMap.get(dim).dataToCoord(value), dim);\n  };\n  /**\r\n   * Travel data for one time, get activeState of each data item.\r\n   * @param start the start dataIndex that travel from.\r\n   * @param end the next dataIndex of the last dataIndex will be travel.\r\n   */\n  Parallel.prototype.eachActiveState = function (data, callback, start, end) {\n    start == null && (start = 0);\n    end == null && (end = data.count());\n    var axesMap = this._axesMap;\n    var dimensions = this.dimensions;\n    var dataDimensions = [];\n    var axisModels = [];\n    zrUtil.each(dimensions, function (axisDim) {\n      dataDimensions.push(data.mapDimension(axisDim));\n      axisModels.push(axesMap.get(axisDim).model);\n    });\n    var hasActiveSet = this.hasAxisBrushed();\n    for (var dataIndex = start; dataIndex < end; dataIndex++) {\n      var activeState = void 0;\n      if (!hasActiveSet) {\n        activeState = 'normal';\n      } else {\n        activeState = 'active';\n        var values = data.getValues(dataDimensions, dataIndex);\n        for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n          var state = axisModels[j].getActiveState(values[j]);\n          if (state === 'inactive') {\n            activeState = 'inactive';\n            break;\n          }\n        }\n      }\n      callback(activeState, dataIndex);\n    }\n  };\n  /**\r\n   * Whether has any activeSet.\r\n   */\n  Parallel.prototype.hasAxisBrushed = function () {\n    var dimensions = this.dimensions;\n    var axesMap = this._axesMap;\n    var hasActiveSet = false;\n    for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n      if (axesMap.get(dimensions[j]).model.getActiveState() !== 'normal') {\n        hasActiveSet = true;\n      }\n    }\n    return hasActiveSet;\n  };\n  /**\r\n   * Convert coords of each axis to Point.\r\n   *  Return point. For example: [10, 20]\r\n   */\n  Parallel.prototype.axisCoordToPoint = function (coord, dim) {\n    var axisLayout = this._axesLayout[dim];\n    return graphic.applyTransform([coord, 0], axisLayout.transform);\n  };\n  /**\r\n   * Get axis layout.\r\n   */\n  Parallel.prototype.getAxisLayout = function (dim) {\n    return zrUtil.clone(this._axesLayout[dim]);\n  };\n  /**\r\n   * @return {Object} {axisExpandWindow, delta, behavior: 'jump' | 'slide' | 'none'}.\r\n   */\n  Parallel.prototype.getSlidedAxisExpandWindow = function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var axisExpandWindow = layoutInfo.axisExpandWindow.slice();\n    var winSize = axisExpandWindow[1] - axisExpandWindow[0];\n    var extent = [0, layoutInfo.axisExpandWidth * (layoutInfo.axisCount - 1)];\n    // Out of the area of coordinate system.\n    if (!this.containPoint(point)) {\n      return {\n        behavior: 'none',\n        axisExpandWindow: axisExpandWindow\n      };\n    }\n    // Convert the point from global to expand coordinates.\n    var pointCoord = point[pixelDimIndex] - layoutInfo.layoutBase - layoutInfo.axisExpandWindow0Pos;\n    // For dragging operation convenience, the window should not be\n    // slided when mouse is the center area of the window.\n    var delta;\n    var behavior = 'slide';\n    var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n    var triggerArea = this._model.get('axisExpandSlideTriggerArea');\n    // But consider touch device, jump is necessary.\n    var useJump = triggerArea[0] != null;\n    if (axisCollapseWidth) {\n      if (useJump && axisCollapseWidth && pointCoord < winSize * triggerArea[0]) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * triggerArea[2];\n      } else if (useJump && axisCollapseWidth && pointCoord > winSize * (1 - triggerArea[0])) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * (1 - triggerArea[2]);\n      } else {\n        (delta = pointCoord - winSize * triggerArea[1]) >= 0 && (delta = pointCoord - winSize * (1 - triggerArea[1])) <= 0 && (delta = 0);\n      }\n      delta *= layoutInfo.axisExpandWidth / axisCollapseWidth;\n      delta ? sliderMove(delta, axisExpandWindow, extent, 'all')\n      // Avoid nonsense triger on mousemove.\n      : behavior = 'none';\n    }\n    // When screen is too narrow, make it visible and slidable, although it is hard to interact.\n    else {\n      var winSize2 = axisExpandWindow[1] - axisExpandWindow[0];\n      var pos = extent[1] * pointCoord / winSize2;\n      axisExpandWindow = [mathMax(0, pos - winSize2 / 2)];\n      axisExpandWindow[1] = mathMin(extent[1], axisExpandWindow[0] + winSize2);\n      axisExpandWindow[0] = axisExpandWindow[1] - winSize2;\n    }\n    return {\n      axisExpandWindow: axisExpandWindow,\n      behavior: behavior\n    };\n  };\n  return Parallel;\n}();\nfunction restrict(len, extent) {\n  return mathMin(mathMax(len, extent[0]), extent[1]);\n}\nfunction layoutAxisWithoutExpand(axisIndex, layoutInfo) {\n  var step = layoutInfo.layoutLength / (layoutInfo.axisCount - 1);\n  return {\n    position: step * axisIndex,\n    axisNameAvailableWidth: step,\n    axisLabelShow: true\n  };\n}\nfunction layoutAxisWithExpand(axisIndex, layoutInfo) {\n  var layoutLength = layoutInfo.layoutLength;\n  var axisExpandWidth = layoutInfo.axisExpandWidth;\n  var axisCount = layoutInfo.axisCount;\n  var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n  var winInnerIndices = layoutInfo.winInnerIndices;\n  var position;\n  var axisNameAvailableWidth = axisCollapseWidth;\n  var axisLabelShow = false;\n  var nameTruncateMaxWidth;\n  if (axisIndex < winInnerIndices[0]) {\n    position = axisIndex * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  } else if (axisIndex <= winInnerIndices[1]) {\n    position = layoutInfo.axisExpandWindow0Pos + axisIndex * axisExpandWidth - layoutInfo.axisExpandWindow[0];\n    axisNameAvailableWidth = axisExpandWidth;\n    axisLabelShow = true;\n  } else {\n    position = layoutLength - (axisCount - 1 - axisIndex) * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  }\n  return {\n    position: position,\n    axisNameAvailableWidth: axisNameAvailableWidth,\n    axisLabelShow: axisLabelShow,\n    nameTruncateMaxWidth: nameTruncateMaxWidth\n  };\n}\nexport default Parallel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Parallel coordinate system creater.\r\n */\nimport Parallel from './Parallel.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nfunction createParallelCoordSys(ecModel, api) {\n  var coordSysList = [];\n  ecModel.eachComponent('parallel', function (parallelModel, idx) {\n    var coordSys = new Parallel(parallelModel, ecModel, api);\n    coordSys.name = 'parallel_' + idx;\n    coordSys.resize(parallelModel, api);\n    parallelModel.coordinateSystem = coordSys;\n    coordSys.model = parallelModel;\n    coordSysList.push(coordSys);\n  });\n  // Inject the coordinateSystems into seriesModel\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'parallel') {\n      var parallelModel = seriesModel.getReferringComponents('parallel', SINGLE_REFERRING).models[0];\n      seriesModel.coordinateSystem = parallelModel.coordinateSystem;\n    }\n  });\n  return coordSysList;\n}\nvar parallelCoordSysCreator = {\n  create: createParallelCoordSys\n};\nexport default parallelCoordSysCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper.js';\nimport * as numberUtil from '../../util/number.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nvar ParallelAxisModel = /** @class */function (_super) {\n  __extends(ParallelAxisModel, _super);\n  function ParallelAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelAxisModel.type;\n    /**\r\n     * @readOnly\r\n     */\n    _this.activeIntervals = [];\n    return _this;\n  }\n  ParallelAxisModel.prototype.getAreaSelectStyle = function () {\n    return makeStyleMapper([['fill', 'color'], ['lineWidth', 'borderWidth'], ['stroke', 'borderColor'], ['width', 'width'], ['opacity', 'opacity']\n    // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n    // So do not transfer decal directly.\n    ])(this.getModel('areaSelectStyle'));\n  };\n  /**\r\n   * The code of this feature is put on AxisModel but not ParallelAxis,\r\n   * because axisModel can be alive after echarts updating but instance of\r\n   * ParallelAxis having been disposed. this._activeInterval should be kept\r\n   * when action dispatched (i.e. legend click).\r\n   *\r\n   * @param intervals `interval.length === 0` means set all active.\r\n   */\n  ParallelAxisModel.prototype.setActiveIntervals = function (intervals) {\n    var activeIntervals = this.activeIntervals = zrUtil.clone(intervals);\n    // Normalize\n    if (activeIntervals) {\n      for (var i = activeIntervals.length - 1; i >= 0; i--) {\n        numberUtil.asc(activeIntervals[i]);\n      }\n    }\n  };\n  /**\r\n   * @param value When only attempting detect whether 'no activeIntervals set',\r\n   *        `value` is not needed to be input.\r\n   */\n  ParallelAxisModel.prototype.getActiveState = function (value) {\n    var activeIntervals = this.activeIntervals;\n    if (!activeIntervals.length) {\n      return 'normal';\n    }\n    if (value == null || isNaN(+value)) {\n      return 'inactive';\n    }\n    // Simple optimization\n    if (activeIntervals.length === 1) {\n      var interval = activeIntervals[0];\n      if (interval[0] <= value && value <= interval[1]) {\n        return 'active';\n      }\n    } else {\n      for (var i = 0, len = activeIntervals.length; i < len; i++) {\n        if (activeIntervals[i][0] <= value && value <= activeIntervals[i][1]) {\n          return 'active';\n        }\n      }\n    }\n    return 'inactive';\n  };\n  return ParallelAxisModel;\n}(ComponentModel);\nzrUtil.mixin(ParallelAxisModel, AxisModelCommonMixin);\nexport default ParallelAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['x', 'y'], function (dim, dimIdx) {\n    var axis = this.getAxis(dim);\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n  }, this);\n}\nexport default function cartesianPrepareCustom(coordSys) {\n  var rect = coordSys.master.getRect();\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'cartesian2d',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function (data) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map([0, 1], function (dimIdx) {\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var p1 = [];\n    var p2 = [];\n    p1[dimIdx] = val - halfSize;\n    p2[dimIdx] = val + halfSize;\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n  }, this);\n}\nexport default function geoPrepareCustom(coordSys) {\n  var rect = coordSys.getBoundingRect();\n  return {\n    coordSys: {\n      type: 'geo',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      zoom: coordSys.getZoom()\n    },\n    api: {\n      coord: function (data) {\n        // do not provide \"out\" and noRoam param,\n        // Compatible with this usage:\n        // echarts.util.map(item.points, api.coord)\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { bind } from 'zrender/lib/core/util.js';\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  var axis = this.getAxis();\n  var val = dataItem instanceof Array ? dataItem[0] : dataItem;\n  var halfSize = (dataSize instanceof Array ? dataSize[0] : dataSize) / 2;\n  return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n}\nexport default function singlePrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  return {\n    coordSys: {\n      type: 'singleAxis',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function (val) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(val);\n      },\n      size: bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n// import AngleAxis from './AngleAxis.js';\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['Radius', 'Angle'], function (dim, dimIdx) {\n    var getterName = 'get' + dim + 'Axis';\n    // TODO: TYPE Check Angle Axis\n    var axis = this[getterName]();\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var result = axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n    if (dim === 'Angle') {\n      result = result * Math.PI / 180;\n    }\n    return result;\n  }, this);\n}\nexport default function polarPrepareCustom(coordSys) {\n  var radiusAxis = coordSys.getRadiusAxis();\n  var angleAxis = coordSys.getAngleAxis();\n  var radius = radiusAxis.getExtent();\n  radius[0] > radius[1] && radius.reverse();\n  return {\n    coordSys: {\n      type: 'polar',\n      cx: coordSys.cx,\n      cy: coordSys.cy,\n      r: radius[1],\n      r0: radius[0]\n    },\n    api: {\n      coord: function (data) {\n        var radius = radiusAxis.dataToRadius(data[0]);\n        var angle = angleAxis.dataToAngle(data[1]);\n        var coord = coordSys.coordToPoint([radius, angle]);\n        coord.push(radius, angle * Math.PI / 180);\n        return coord;\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function calendarPrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  var rangeInfo = coordSys.getRangeInfo();\n  return {\n    coordSys: {\n      type: 'calendar',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      cellWidth: coordSys.getCellWidth(),\n      cellHeight: coordSys.getCellHeight(),\n      rangeInfo: {\n        start: rangeInfo.start,\n        end: rangeInfo.end,\n        weeks: rangeInfo.weeks,\n        dayCount: rangeInfo.allDay\n      }\n    },\n    api: {\n      coord: function (data, clamp) {\n        return coordSys.dataToPoint(data, clamp);\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, hasOwn } from 'zrender/lib/core/util.js';\nvar deprecatedLogs = {};\n/**\r\n * Whether need to call `convertEC4CompatibleStyle`.\r\n */\nexport function isEC4CompatibleStyle(style, elType, hasOwnTextContentOption, hasOwnTextConfig) {\n  // Since echarts5, `RectText` is separated from its host element and style.text\n  // does not exist any more. The compat work brings some extra burden on performance.\n  // So we provide:\n  // `legacy: true` force make compat.\n  // `legacy: false`, force do not compat.\n  // `legacy` not set: auto detect whether legacy.\n  //     But in this case we do not compat (difficult to detect and rare case):\n  //     Becuse custom series and graphic component support \"merge\", users may firstly\n  //     only set `textStrokeWidth` style or secondly only set `text`.\n  return style && (style.legacy || style.legacy !== false && !hasOwnTextContentOption && !hasOwnTextConfig && elType !== 'tspan'\n  // Difficult to detect whether legacy for a \"text\" el.\n  && (elType === 'text' || hasOwn(style, 'text')));\n}\n/**\r\n * `EC4CompatibleStyle` is style that might be in echarts4 format or echarts5 format.\r\n * @param hostStyle The properties might be modified.\r\n * @return If be text el, `textContentStyle` and `textConfig` will not be returned.\r\n *         Otherwise a `textContentStyle` and `textConfig` will be created, whose props area\r\n *         retried from the `hostStyle`.\r\n */\nexport function convertFromEC4CompatibleStyle(hostStyle, elType, isNormal) {\n  var srcStyle = hostStyle;\n  var textConfig;\n  var textContent;\n  var textContentStyle;\n  if (elType === 'text') {\n    textContentStyle = srcStyle;\n  } else {\n    textContentStyle = {};\n    hasOwn(srcStyle, 'text') && (textContentStyle.text = srcStyle.text);\n    hasOwn(srcStyle, 'rich') && (textContentStyle.rich = srcStyle.rich);\n    hasOwn(srcStyle, 'textFill') && (textContentStyle.fill = srcStyle.textFill);\n    hasOwn(srcStyle, 'textStroke') && (textContentStyle.stroke = srcStyle.textStroke);\n    hasOwn(srcStyle, 'fontFamily') && (textContentStyle.fontFamily = srcStyle.fontFamily);\n    hasOwn(srcStyle, 'fontSize') && (textContentStyle.fontSize = srcStyle.fontSize);\n    hasOwn(srcStyle, 'fontStyle') && (textContentStyle.fontStyle = srcStyle.fontStyle);\n    hasOwn(srcStyle, 'fontWeight') && (textContentStyle.fontWeight = srcStyle.fontWeight);\n    textContent = {\n      type: 'text',\n      style: textContentStyle,\n      // ec4 does not support rectText trigger.\n      // And when text position is different in normal and emphasis\n      // => hover text trigger emphasis;\n      // => text position changed, leave mouse pointer immediately;\n      // That might cause incorrect state.\n      silent: true\n    };\n    textConfig = {};\n    var hasOwnPos = hasOwn(srcStyle, 'textPosition');\n    if (isNormal) {\n      textConfig.position = hasOwnPos ? srcStyle.textPosition : 'inside';\n    } else {\n      hasOwnPos && (textConfig.position = srcStyle.textPosition);\n    }\n    hasOwn(srcStyle, 'textPosition') && (textConfig.position = srcStyle.textPosition);\n    hasOwn(srcStyle, 'textOffset') && (textConfig.offset = srcStyle.textOffset);\n    hasOwn(srcStyle, 'textRotation') && (textConfig.rotation = srcStyle.textRotation);\n    hasOwn(srcStyle, 'textDistance') && (textConfig.distance = srcStyle.textDistance);\n  }\n  convertEC4CompatibleRichItem(textContentStyle, hostStyle);\n  each(textContentStyle.rich, function (richItem) {\n    convertEC4CompatibleRichItem(richItem, richItem);\n  });\n  return {\n    textConfig: textConfig,\n    textContent: textContent\n  };\n}\n/**\r\n * The result will be set to `out`.\r\n */\nfunction convertEC4CompatibleRichItem(out, richItem) {\n  if (!richItem) {\n    return;\n  }\n  // (1) For simplicity, make textXXX properties (deprecated since ec5) has\n  // higher priority. For example, consider in ec4 `borderColor: 5, textBorderColor: 10`\n  // on a rect means `borderColor: 4` on the rect and `borderColor: 10` on an attached\n  // richText in ec5.\n  // (2) `out === richItem` if and only if `out` is text el or rich item.\n  // So we can overwrite existing props in `out` since textXXX has higher priority.\n  richItem.font = richItem.textFont || richItem.font;\n  hasOwn(richItem, 'textStrokeWidth') && (out.lineWidth = richItem.textStrokeWidth);\n  hasOwn(richItem, 'textAlign') && (out.align = richItem.textAlign);\n  hasOwn(richItem, 'textVerticalAlign') && (out.verticalAlign = richItem.textVerticalAlign);\n  hasOwn(richItem, 'textLineHeight') && (out.lineHeight = richItem.textLineHeight);\n  hasOwn(richItem, 'textWidth') && (out.width = richItem.textWidth);\n  hasOwn(richItem, 'textHeight') && (out.height = richItem.textHeight);\n  hasOwn(richItem, 'textBackgroundColor') && (out.backgroundColor = richItem.textBackgroundColor);\n  hasOwn(richItem, 'textPadding') && (out.padding = richItem.textPadding);\n  hasOwn(richItem, 'textBorderColor') && (out.borderColor = richItem.textBorderColor);\n  hasOwn(richItem, 'textBorderWidth') && (out.borderWidth = richItem.textBorderWidth);\n  hasOwn(richItem, 'textBorderRadius') && (out.borderRadius = richItem.textBorderRadius);\n  hasOwn(richItem, 'textBoxShadowColor') && (out.shadowColor = richItem.textBoxShadowColor);\n  hasOwn(richItem, 'textBoxShadowBlur') && (out.shadowBlur = richItem.textBoxShadowBlur);\n  hasOwn(richItem, 'textBoxShadowOffsetX') && (out.shadowOffsetX = richItem.textBoxShadowOffsetX);\n  hasOwn(richItem, 'textBoxShadowOffsetY') && (out.shadowOffsetY = richItem.textBoxShadowOffsetY);\n}\n/**\r\n * Convert to pure echarts4 format style.\r\n * `itemStyle` will be modified, added with ec4 style properties from\r\n * `textStyle` and `textConfig`.\r\n *\r\n * [Caveat]: For simplicity, `insideRollback` in ec4 does not compat, where\r\n * `styleEmphasis: {textFill: 'red'}` will remove the normal auto added stroke.\r\n */\nexport function convertToEC4StyleForCustomSerise(itemStl, txStl, txCfg) {\n  var out = itemStl;\n  // See `custom.ts`, a trick to set extra `textPosition` firstly.\n  out.textPosition = out.textPosition || txCfg.position || 'inside';\n  txCfg.offset != null && (out.textOffset = txCfg.offset);\n  txCfg.rotation != null && (out.textRotation = txCfg.rotation);\n  txCfg.distance != null && (out.textDistance = txCfg.distance);\n  var isInside = out.textPosition.indexOf('inside') >= 0;\n  var hostFill = itemStl.fill || '#000';\n  convertToEC4RichItem(out, txStl);\n  var textFillNotSet = out.textFill == null;\n  if (isInside) {\n    if (textFillNotSet) {\n      out.textFill = txCfg.insideFill || '#fff';\n      !out.textStroke && txCfg.insideStroke && (out.textStroke = txCfg.insideStroke);\n      !out.textStroke && (out.textStroke = hostFill);\n      out.textStrokeWidth == null && (out.textStrokeWidth = 2);\n    }\n  } else {\n    if (textFillNotSet) {\n      out.textFill = itemStl.fill || txCfg.outsideFill || '#000';\n    }\n    !out.textStroke && txCfg.outsideStroke && (out.textStroke = txCfg.outsideStroke);\n  }\n  out.text = txStl.text;\n  out.rich = txStl.rich;\n  each(txStl.rich, function (richItem) {\n    convertToEC4RichItem(richItem, richItem);\n  });\n  return out;\n}\nfunction convertToEC4RichItem(out, richItem) {\n  if (!richItem) {\n    return;\n  }\n  hasOwn(richItem, 'fill') && (out.textFill = richItem.fill);\n  hasOwn(richItem, 'stroke') && (out.textStroke = richItem.fill);\n  hasOwn(richItem, 'lineWidth') && (out.textStrokeWidth = richItem.lineWidth);\n  hasOwn(richItem, 'font') && (out.font = richItem.font);\n  hasOwn(richItem, 'fontStyle') && (out.fontStyle = richItem.fontStyle);\n  hasOwn(richItem, 'fontWeight') && (out.fontWeight = richItem.fontWeight);\n  hasOwn(richItem, 'fontSize') && (out.fontSize = richItem.fontSize);\n  hasOwn(richItem, 'fontFamily') && (out.fontFamily = richItem.fontFamily);\n  hasOwn(richItem, 'align') && (out.textAlign = richItem.align);\n  hasOwn(richItem, 'verticalAlign') && (out.textVerticalAlign = richItem.verticalAlign);\n  hasOwn(richItem, 'lineHeight') && (out.textLineHeight = richItem.lineHeight);\n  hasOwn(richItem, 'width') && (out.textWidth = richItem.width);\n  hasOwn(richItem, 'height') && (out.textHeight = richItem.height);\n  hasOwn(richItem, 'backgroundColor') && (out.textBackgroundColor = richItem.backgroundColor);\n  hasOwn(richItem, 'padding') && (out.textPadding = richItem.padding);\n  hasOwn(richItem, 'borderColor') && (out.textBorderColor = richItem.borderColor);\n  hasOwn(richItem, 'borderWidth') && (out.textBorderWidth = richItem.borderWidth);\n  hasOwn(richItem, 'borderRadius') && (out.textBorderRadius = richItem.borderRadius);\n  hasOwn(richItem, 'shadowColor') && (out.textBoxShadowColor = richItem.shadowColor);\n  hasOwn(richItem, 'shadowBlur') && (out.textBoxShadowBlur = richItem.shadowBlur);\n  hasOwn(richItem, 'shadowOffsetX') && (out.textBoxShadowOffsetX = richItem.shadowOffsetX);\n  hasOwn(richItem, 'shadowOffsetY') && (out.textBoxShadowOffsetY = richItem.shadowOffsetY);\n  hasOwn(richItem, 'textShadowColor') && (out.textShadowColor = richItem.textShadowColor);\n  hasOwn(richItem, 'textShadowBlur') && (out.textShadowBlur = richItem.textShadowBlur);\n  hasOwn(richItem, 'textShadowOffsetX') && (out.textShadowOffsetX = richItem.textShadowOffsetX);\n  hasOwn(richItem, 'textShadowOffsetY') && (out.textShadowOffsetY = richItem.textShadowOffsetY);\n}\nexport function warnDeprecated(deprecated, insteadApproach) {\n  if (process.env.NODE_ENV !== 'production') {\n    var key = deprecated + '^_^' + insteadApproach;\n    if (!deprecatedLogs[key]) {\n      console.warn(\"[ECharts] DEPRECATED: \\\"\" + deprecated + \"\\\" has been deprecated. \" + insteadApproach);\n      deprecatedLogs[key] = true;\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner, normalizeToArray } from '../util/model.js';\nimport { assert, bind, each, eqNaN, extend, hasOwn, indexOf, isArrayLike, keys, reduce } from 'zrender/lib/core/util.js';\nimport { cloneValue } from 'zrender/lib/animation/Animator.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { getAnimationConfig } from './basicTransition.js';\nimport { Path } from '../util/graphic.js';\nimport { warn } from '../util/log.js';\nimport { TRANSFORMABLE_PROPS } from 'zrender/lib/core/Transformable.js';\nvar LEGACY_TRANSFORM_PROPS_MAP = {\n  position: ['x', 'y'],\n  scale: ['scaleX', 'scaleY'],\n  origin: ['originX', 'originY']\n};\nvar LEGACY_TRANSFORM_PROPS = keys(LEGACY_TRANSFORM_PROPS_MAP);\nvar TRANSFORM_PROPS_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n  obj[key] = 1;\n  return obj;\n}, {});\nvar transformPropNamesStr = TRANSFORMABLE_PROPS.join(', ');\n// '' means root\nexport var ELEMENT_ANIMATABLE_PROPS = ['', 'style', 'shape', 'extra'];\n;\nvar transitionInnerStore = makeInner();\n;\nfunction getElementAnimationConfig(animationType, el, elOption, parentModel, dataIndex) {\n  var animationProp = animationType + \"Animation\";\n  var config = getAnimationConfig(animationType, parentModel, dataIndex) || {};\n  var userDuring = transitionInnerStore(el).userDuring;\n  // Only set when duration is > 0 and it's need to be animated.\n  if (config.duration > 0) {\n    // For simplicity, if during not specified, the previous during will not work any more.\n    config.during = userDuring ? bind(duringCall, {\n      el: el,\n      userDuring: userDuring\n    }) : null;\n    config.setToFinal = true;\n    config.scope = animationType;\n  }\n  extend(config, elOption[animationProp]);\n  return config;\n}\nexport function applyUpdateTransition(el, elOption, animatableModel, opts) {\n  opts = opts || {};\n  var dataIndex = opts.dataIndex,\n    isInit = opts.isInit,\n    clearStyle = opts.clearStyle;\n  var hasAnimation = animatableModel.isAnimationEnabled();\n  // Save the meta info for further morphing. Like apply on the sub morphing elements.\n  var store = transitionInnerStore(el);\n  var styleOpt = elOption.style;\n  store.userDuring = elOption.during;\n  var transFromProps = {};\n  var propsToSet = {};\n  prepareTransformAllPropsFinal(el, elOption, propsToSet);\n  prepareShapeOrExtraAllPropsFinal('shape', elOption, propsToSet);\n  prepareShapeOrExtraAllPropsFinal('extra', elOption, propsToSet);\n  if (!isInit && hasAnimation) {\n    prepareTransformTransitionFrom(el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('shape', el, elOption, transFromProps);\n    prepareShapeOrExtraTransitionFrom('extra', el, elOption, transFromProps);\n    prepareStyleTransitionFrom(el, elOption, styleOpt, transFromProps);\n  }\n  propsToSet.style = styleOpt;\n  applyPropsDirectly(el, propsToSet, clearStyle);\n  applyMiscProps(el, elOption);\n  if (hasAnimation) {\n    if (isInit) {\n      var enterFromProps_1 = {};\n      each(ELEMENT_ANIMATABLE_PROPS, function (propName) {\n        var prop = propName ? elOption[propName] : elOption;\n        if (prop && prop.enterFrom) {\n          if (propName) {\n            enterFromProps_1[propName] = enterFromProps_1[propName] || {};\n          }\n          extend(propName ? enterFromProps_1[propName] : enterFromProps_1, prop.enterFrom);\n        }\n      });\n      var config = getElementAnimationConfig('enter', el, elOption, animatableModel, dataIndex);\n      if (config.duration > 0) {\n        el.animateFrom(enterFromProps_1, config);\n      }\n    } else {\n      applyPropsTransition(el, elOption, dataIndex || 0, animatableModel, transFromProps);\n    }\n  }\n  // Store leave to be used in leave transition.\n  updateLeaveTo(el, elOption);\n  styleOpt ? el.dirty() : el.markRedraw();\n}\nexport function updateLeaveTo(el, elOption) {\n  // Try merge to previous set leaveTo\n  var leaveToProps = transitionInnerStore(el).leaveToProps;\n  for (var i = 0; i < ELEMENT_ANIMATABLE_PROPS.length; i++) {\n    var propName = ELEMENT_ANIMATABLE_PROPS[i];\n    var prop = propName ? elOption[propName] : elOption;\n    if (prop && prop.leaveTo) {\n      if (!leaveToProps) {\n        leaveToProps = transitionInnerStore(el).leaveToProps = {};\n      }\n      if (propName) {\n        leaveToProps[propName] = leaveToProps[propName] || {};\n      }\n      extend(propName ? leaveToProps[propName] : leaveToProps, prop.leaveTo);\n    }\n  }\n}\nexport function applyLeaveTransition(el, elOption, animatableModel, onRemove) {\n  if (el) {\n    var parent_1 = el.parent;\n    var leaveToProps = transitionInnerStore(el).leaveToProps;\n    if (leaveToProps) {\n      // TODO TODO use leave after leaveAnimation in series is introduced\n      // TODO Data index?\n      var config = getElementAnimationConfig('update', el, elOption, animatableModel, 0);\n      config.done = function () {\n        parent_1.remove(el);\n        onRemove && onRemove();\n      };\n      el.animateTo(leaveToProps, config);\n    } else {\n      parent_1.remove(el);\n      onRemove && onRemove();\n    }\n  }\n}\nexport function isTransitionAll(transition) {\n  return transition === 'all';\n}\nfunction applyPropsDirectly(el,\n// Can be null/undefined\nallPropsFinal, clearStyle) {\n  var styleOpt = allPropsFinal.style;\n  if (!el.isGroup && styleOpt) {\n    if (clearStyle) {\n      el.useStyle({});\n      // When style object changed, how to trade the existing animation?\n      // It is probably complicated and not needed to cover all the cases.\n      // But still need consider the case:\n      // (1) When using init animation on `style.opacity`, and before the animation\n      //     ended users triggers an update by mousewhel. At that time the init\n      //     animation should better be continued rather than terminated.\n      //     So after `useStyle` called, we should change the animation target manually\n      //     to continue the effect of the init animation.\n      // (2) PENDING: If the previous animation targeted at a `val1`, and currently we need\n      //     to update the value to `val2` and no animation declared, should be terminate\n      //     the previous animation or just modify the target of the animation?\n      //     Therotically That will happen not only on `style` but also on `shape` and\n      //     `transfrom` props. But we haven't handle this case at present yet.\n      // (3) PENDING: Is it proper to visit `animators` and `targetName`?\n      var animators = el.animators;\n      for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        // targetName is the \"topKey\".\n        if (animator.targetName === 'style') {\n          animator.changeTarget(el.style);\n        }\n      }\n    }\n    el.setStyle(styleOpt);\n  }\n  if (allPropsFinal) {\n    // Not set style here.\n    allPropsFinal.style = null;\n    // Set el to the final state firstly.\n    allPropsFinal && el.attr(allPropsFinal);\n    allPropsFinal.style = styleOpt;\n  }\n}\nfunction applyPropsTransition(el, elOption, dataIndex, model,\n// Can be null/undefined\ntransFromProps) {\n  if (transFromProps) {\n    var config = getElementAnimationConfig('update', el, elOption, model, dataIndex);\n    if (config.duration > 0) {\n      el.animateFrom(transFromProps, config);\n    }\n  }\n}\nfunction applyMiscProps(el, elOption) {\n  // Merge by default.\n  hasOwn(elOption, 'silent') && (el.silent = elOption.silent);\n  hasOwn(elOption, 'ignore') && (el.ignore = elOption.ignore);\n  if (el instanceof Displayable) {\n    hasOwn(elOption, 'invisible') && (el.invisible = elOption.invisible);\n  }\n  if (el instanceof Path) {\n    hasOwn(elOption, 'autoBatch') && (el.autoBatch = elOption.autoBatch);\n  }\n}\n// Use it to avoid it be exposed to user.\nvar tmpDuringScope = {};\nvar transitionDuringAPI = {\n  // Usually other props do not need to be changed in animation during.\n  setTransform: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `setTransform`.');\n    }\n    tmpDuringScope.el[key] = val;\n    return this;\n  },\n  getTransform: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS_MAP, key), 'Only ' + transformPropNamesStr + ' available in `getTransform`.');\n    }\n    return tmpDuringScope.el[key];\n  },\n  setShape: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var el = tmpDuringScope.el;\n    var shape = el.shape || (el.shape = {});\n    shape[key] = val;\n    el.dirtyShape && el.dirtyShape();\n    return this;\n  },\n  getShape: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var shape = tmpDuringScope.el.shape;\n    if (shape) {\n      return shape[key];\n    }\n  },\n  setStyle: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var el = tmpDuringScope.el;\n    var style = el.style;\n    if (style) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (eqNaN(val)) {\n          warn('style.' + key + ' must not be assigned with NaN.');\n        }\n      }\n      style[key] = val;\n      el.dirtyStyle && el.dirtyStyle();\n    }\n    return this;\n  },\n  getStyle: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var style = tmpDuringScope.el.style;\n    if (style) {\n      return style[key];\n    }\n  },\n  setExtra: function (key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var extra = tmpDuringScope.el.extra || (tmpDuringScope.el.extra = {});\n    extra[key] = val;\n    return this;\n  },\n  getExtra: function (key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n    var extra = tmpDuringScope.el.extra;\n    if (extra) {\n      return extra[key];\n    }\n  }\n};\nfunction assertNotReserved(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (key === 'transition' || key === 'enterFrom' || key === 'leaveTo') {\n      throw new Error('key must not be \"' + key + '\"');\n    }\n  }\n}\nfunction duringCall() {\n  // Do not provide \"percent\" until some requirements come.\n  // Because consider thies case:\n  // enterFrom: {x: 100, y: 30}, transition: 'x'.\n  // And enter duration is different from update duration.\n  // Thus it might be confused about the meaning of \"percent\" in during callback.\n  var scope = this;\n  var el = scope.el;\n  if (!el) {\n    return;\n  }\n  // If el is remove from zr by reason like legend, during still need to called,\n  // because el will be added back to zr and the prop value should not be incorrect.\n  var latestUserDuring = transitionInnerStore(el).userDuring;\n  var scopeUserDuring = scope.userDuring;\n  // Ensured a during is only called once in each animation frame.\n  // If a during is called multiple times in one frame, maybe some users' calculation logic\n  // might be wrong (not sure whether this usage exists).\n  // The case of a during might be called twice can be: by default there is a animator for\n  // 'x', 'y' when init. Before the init animation finished, call `setOption` to start\n  // another animators for 'style'/'shape'/'extra'.\n  if (latestUserDuring !== scopeUserDuring) {\n    // release\n    scope.el = scope.userDuring = null;\n    return;\n  }\n  tmpDuringScope.el = el;\n  // Give no `this` to user in \"during\" calling.\n  scopeUserDuring(transitionDuringAPI);\n  // FIXME: if in future meet the case that some prop will be both modified in `during` and `state`,\n  // consider the issue that the prop might be incorrect when return to \"normal\" state.\n}\nfunction prepareShapeOrExtraTransitionFrom(mainAttr, fromEl, elOption, transFromProps) {\n  var attrOpt = elOption[mainAttr];\n  if (!attrOpt) {\n    return;\n  }\n  var elPropsInAttr = fromEl[mainAttr];\n  var transFromPropsInAttr;\n  if (elPropsInAttr) {\n    var transition = elOption.transition;\n    var attrTransition = attrOpt.transition;\n    if (attrTransition) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      if (isTransitionAll(attrTransition)) {\n        extend(transFromPropsInAttr, elPropsInAttr);\n      } else {\n        var transitionKeys = normalizeToArray(attrTransition);\n        for (var i = 0; i < transitionKeys.length; i++) {\n          var key = transitionKeys[i];\n          var elVal = elPropsInAttr[key];\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    } else if (isTransitionAll(transition) || indexOf(transition, mainAttr) >= 0) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      var elPropsInAttrKeys = keys(elPropsInAttr);\n      for (var i = 0; i < elPropsInAttrKeys.length; i++) {\n        var key = elPropsInAttrKeys[i];\n        var elVal = elPropsInAttr[key];\n        if (isNonStyleTransitionEnabled(attrOpt[key], elVal)) {\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    }\n  }\n}\nfunction prepareShapeOrExtraAllPropsFinal(mainAttr, elOption, allProps) {\n  var attrOpt = elOption[mainAttr];\n  if (!attrOpt) {\n    return;\n  }\n  var allPropsInAttr = allProps[mainAttr] = {};\n  var keysInAttr = keys(attrOpt);\n  for (var i = 0; i < keysInAttr.length; i++) {\n    var key = keysInAttr[i];\n    // To avoid share one object with different element, and\n    // to avoid user modify the object inexpectedly, have to clone.\n    allPropsInAttr[key] = cloneValue(attrOpt[key]);\n  }\n}\nfunction prepareTransformTransitionFrom(el, elOption, transFromProps) {\n  var transition = elOption.transition;\n  var transitionKeys = isTransitionAll(transition) ? TRANSFORMABLE_PROPS : normalizeToArray(transition || []);\n  for (var i = 0; i < transitionKeys.length; i++) {\n    var key = transitionKeys[i];\n    if (key === 'style' || key === 'shape' || key === 'extra') {\n      continue;\n    }\n    var elVal = el[key];\n    if (process.env.NODE_ENV !== 'production') {\n      checkTransformPropRefer(key, 'el.transition');\n    }\n    // Do not clone, animator will perform that clone.\n    transFromProps[key] = elVal;\n  }\n}\nfunction prepareTransformAllPropsFinal(el, elOption, allProps) {\n  for (var i = 0; i < LEGACY_TRANSFORM_PROPS.length; i++) {\n    var legacyName = LEGACY_TRANSFORM_PROPS[i];\n    var xyName = LEGACY_TRANSFORM_PROPS_MAP[legacyName];\n    var legacyArr = elOption[legacyName];\n    if (legacyArr) {\n      allProps[xyName[0]] = legacyArr[0];\n      allProps[xyName[1]] = legacyArr[1];\n    }\n  }\n  for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n    var key = TRANSFORMABLE_PROPS[i];\n    if (elOption[key] != null) {\n      allProps[key] = elOption[key];\n    }\n  }\n}\nfunction prepareStyleTransitionFrom(fromEl, elOption, styleOpt, transFromProps) {\n  if (!styleOpt) {\n    return;\n  }\n  var fromElStyle = fromEl.style;\n  var transFromStyleProps;\n  if (fromElStyle) {\n    var styleTransition = styleOpt.transition;\n    var elTransition = elOption.transition;\n    if (styleTransition && !isTransitionAll(styleTransition)) {\n      var transitionKeys = normalizeToArray(styleTransition);\n      !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n      for (var i = 0; i < transitionKeys.length; i++) {\n        var key = transitionKeys[i];\n        var elVal = fromElStyle[key];\n        // Do not clone, see `checkNonStyleTansitionRefer`.\n        transFromStyleProps[key] = elVal;\n      }\n    } else if (fromEl.getAnimationStyleProps && (isTransitionAll(elTransition) || isTransitionAll(styleTransition) || indexOf(elTransition, 'style') >= 0)) {\n      var animationProps = fromEl.getAnimationStyleProps();\n      var animationStyleProps = animationProps ? animationProps.style : null;\n      if (animationStyleProps) {\n        !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n        var styleKeys = keys(styleOpt);\n        for (var i = 0; i < styleKeys.length; i++) {\n          var key = styleKeys[i];\n          if (animationStyleProps[key]) {\n            var elVal = fromElStyle[key];\n            transFromStyleProps[key] = elVal;\n          }\n        }\n      }\n    }\n  }\n}\nfunction isNonStyleTransitionEnabled(optVal, elVal) {\n  // The same as `checkNonStyleTansitionRefer`.\n  return !isArrayLike(optVal) ? optVal != null && isFinite(optVal) : optVal !== elVal;\n}\nvar checkTransformPropRefer;\nif (process.env.NODE_ENV !== 'production') {\n  checkTransformPropRefer = function (key, usedIn) {\n    if (!hasOwn(TRANSFORM_PROPS_MAP, key)) {\n      warn('Prop `' + key + '` is not a permitted in `' + usedIn + '`. ' + 'Only `' + keys(TRANSFORM_PROPS_MAP).join('`, `') + '` are permitted.');\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { keys, filter, each, isArray, indexOf } from 'zrender/lib/core/util.js';\nimport { ELEMENT_ANIMATABLE_PROPS } from './customGraphicTransition.js';\nimport { getAnimationConfig } from './basicTransition.js';\nimport { warn } from '../util/log.js';\nimport { makeInner } from '../util/model.js';\nvar getStateToRestore = makeInner();\nvar KEYFRAME_EXCLUDE_KEYS = ['percent', 'easing', 'shape', 'style', 'extra'];\n/**\r\n * Stop previous keyframe animation and restore the attributes.\r\n * Avoid new keyframe animation starts with wrong internal state when the percent: 0 is not set.\r\n */\nexport function stopPreviousKeyframeAnimationAndRestore(el) {\n  // Stop previous keyframe animation.\n  el.stopAnimation('keyframe');\n  // Restore\n  el.attr(getStateToRestore(el));\n}\nexport function applyKeyframeAnimation(el, animationOpts, animatableModel) {\n  if (!animatableModel.isAnimationEnabled() || !animationOpts) {\n    return;\n  }\n  if (isArray(animationOpts)) {\n    each(animationOpts, function (singleAnimationOpts) {\n      applyKeyframeAnimation(el, singleAnimationOpts, animatableModel);\n    });\n    return;\n  }\n  var keyframes = animationOpts.keyframes;\n  var duration = animationOpts.duration;\n  if (animatableModel && duration == null) {\n    // Default to use duration of config.\n    // NOTE: animation config from payload will be ignored because they are mainly for transitions.\n    var config = getAnimationConfig('enter', animatableModel, 0);\n    duration = config && config.duration;\n  }\n  if (!keyframes || !duration) {\n    return;\n  }\n  var stateToRestore = getStateToRestore(el);\n  each(ELEMENT_ANIMATABLE_PROPS, function (targetPropName) {\n    if (targetPropName && !el[targetPropName]) {\n      return;\n    }\n    var animator;\n    var endFrameIsSet = false;\n    // Sort keyframes by percent.\n    keyframes.sort(function (a, b) {\n      return a.percent - b.percent;\n    });\n    each(keyframes, function (kf) {\n      // Stop current animation.\n      var animators = el.animators;\n      var kfValues = targetPropName ? kf[targetPropName] : kf;\n      if (process.env.NODE_ENV !== 'production') {\n        if (kf.percent >= 1) {\n          endFrameIsSet = true;\n        }\n      }\n      if (!kfValues) {\n        return;\n      }\n      var propKeys = keys(kfValues);\n      if (!targetPropName) {\n        // PENDING performance?\n        propKeys = filter(propKeys, function (key) {\n          return indexOf(KEYFRAME_EXCLUDE_KEYS, key) < 0;\n        });\n      }\n      if (!propKeys.length) {\n        return;\n      }\n      if (!animator) {\n        animator = el.animate(targetPropName, animationOpts.loop, true);\n        animator.scope = 'keyframe';\n      }\n      for (var i = 0; i < animators.length; i++) {\n        // Stop all other animation that is not keyframe.\n        if (animators[i] !== animator && animators[i].targetName === animator.targetName) {\n          animators[i].stopTracks(propKeys);\n        }\n      }\n      targetPropName && (stateToRestore[targetPropName] = stateToRestore[targetPropName] || {});\n      var savedTarget = targetPropName ? stateToRestore[targetPropName] : stateToRestore;\n      each(propKeys, function (key) {\n        // Save original value.\n        savedTarget[key] = ((targetPropName ? el[targetPropName] : el) || {})[key];\n      });\n      animator.whenWithKeys(duration * kf.percent, kfValues, propKeys, kf.easing);\n    });\n    if (!animator) {\n      return;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      if (!endFrameIsSet) {\n        warn('End frame with percent: 1 is missing in the keyframeAnimation.', true);\n      }\n    }\n    animator.delay(animationOpts.delay || 0).duration(duration).start(animationOpts.easing);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar PolarModel = /** @class */function (_super) {\n  __extends(PolarModel, _super);\n  function PolarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PolarModel.type;\n    return _this;\n  }\n  PolarModel.prototype.findAxisModel = function (axisType) {\n    var foundAxisModel;\n    var ecModel = this.ecModel;\n    ecModel.eachComponent(axisType, function (axisModel) {\n      if (axisModel.getCoordSysModel() === this) {\n        foundAxisModel = axisModel;\n      }\n    }, this);\n    return foundAxisModel;\n  };\n  PolarModel.type = 'polar';\n  PolarModel.dependencies = ['radiusAxis', 'angleAxis'];\n  PolarModel.defaultOption = {\n    // zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '80%'\n  };\n  return PolarModel;\n}(ComponentModel);\nexport default PolarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar PolarAxisModel = /** @class */function (_super) {\n  __extends(PolarAxisModel, _super);\n  function PolarAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  PolarAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n  };\n  PolarAxisModel.type = 'polarAxis';\n  return PolarAxisModel;\n}(ComponentModel);\nzrUtil.mixin(PolarAxisModel, AxisModelCommonMixin);\nexport { PolarAxisModel };\nvar AngleAxisModel = /** @class */function (_super) {\n  __extends(AngleAxisModel, _super);\n  function AngleAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AngleAxisModel.type;\n    return _this;\n  }\n  AngleAxisModel.type = 'angleAxis';\n  return AngleAxisModel;\n}(PolarAxisModel);\nexport { AngleAxisModel };\nvar RadiusAxisModel = /** @class */function (_super) {\n  __extends(RadiusAxisModel, _super);\n  function RadiusAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadiusAxisModel.type;\n    return _this;\n  }\n  RadiusAxisModel.type = 'radiusAxis';\n  return RadiusAxisModel;\n}(PolarAxisModel);\nexport { RadiusAxisModel };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar RadiusAxis = /** @class */function (_super) {\n  __extends(RadiusAxis, _super);\n  function RadiusAxis(scale, radiusExtent) {\n    return _super.call(this, 'radius', scale, radiusExtent) || this;\n  }\n  RadiusAxis.prototype.pointToData = function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  };\n  return RadiusAxis;\n}(Axis);\nRadiusAxis.prototype.dataToRadius = Axis.prototype.dataToCoord;\nRadiusAxis.prototype.radiusToData = Axis.prototype.coordToData;\nexport default RadiusAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport Axis from '../Axis.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar AngleAxis = /** @class */function (_super) {\n  __extends(AngleAxis, _super);\n  function AngleAxis(scale, angleExtent) {\n    return _super.call(this, 'angle', scale, angleExtent || [0, 360]) || this;\n  }\n  AngleAxis.prototype.pointToData = function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  };\n  /**\r\n   * Only be called in category axis.\r\n   * Angle axis uses text height to decide interval\r\n   *\r\n   * @override\r\n   * @return {number} Auto interval for cateogry axis tick and label\r\n   */\n  AngleAxis.prototype.calculateCategoryInterval = function () {\n    var axis = this;\n    var labelModel = axis.getLabelModel();\n    var ordinalScale = axis.scale;\n    var ordinalExtent = ordinalScale.getExtent();\n    // Providing this method is for optimization:\n    // avoid generating a long array by `getTicks`\n    // in large category data case.\n    var tickCount = ordinalScale.count();\n    if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n      return 0;\n    }\n    var tickValue = ordinalExtent[0];\n    var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n    var unitH = Math.abs(unitSpan);\n    // Not precise, just use height as text width\n    // and each distance from axis line yet.\n    var rect = textContain.getBoundingRect(tickValue == null ? '' : tickValue + '', labelModel.getFont(), 'center', 'top');\n    var maxH = Math.max(rect.height, 7);\n    var dh = maxH / unitH;\n    // 0/0 is NaN, 1/0 is Infinity.\n    isNaN(dh) && (dh = Infinity);\n    var interval = Math.max(0, Math.floor(dh));\n    var cache = inner(axis.model);\n    var lastAutoInterval = cache.lastAutoInterval;\n    var lastTickCount = cache.lastTickCount;\n    // Use cache to keep interval stable while moving zoom window,\n    // otherwise the calculated interval might jitter when the zoom\n    // window size is close to the interval-changing size.\n    if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1\n    // Always choose the bigger one, otherwise the critical\n    // point is not the same when zooming in or zooming out.\n    && lastAutoInterval > interval) {\n      interval = lastAutoInterval;\n    }\n    // Only update cache if cache not used, otherwise the\n    // changing of interval is too insensitive.\n    else {\n      cache.lastTickCount = tickCount;\n      cache.lastAutoInterval = interval;\n    }\n    return interval;\n  };\n  return AngleAxis;\n}(Axis);\nAngleAxis.prototype.dataToAngle = Axis.prototype.dataToCoord;\nAngleAxis.prototype.angleToData = Axis.prototype.coordToData;\nexport default AngleAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport RadiusAxis from './RadiusAxis.js';\nimport AngleAxis from './AngleAxis.js';\nexport var polarDimensions = ['radius', 'angle'];\nvar Polar = /** @class */function () {\n  function Polar(name) {\n    this.dimensions = polarDimensions;\n    this.type = 'polar';\n    /**\r\n     * x of polar center\r\n     */\n    this.cx = 0;\n    /**\r\n     * y of polar center\r\n     */\n    this.cy = 0;\n    this._radiusAxis = new RadiusAxis();\n    this._angleAxis = new AngleAxis();\n    this.axisPointerEnabled = true;\n    this.name = name || '';\n    this._radiusAxis.polar = this._angleAxis.polar = this;\n  }\n  /**\r\n   * If contain coord\r\n   */\n  Polar.prototype.containPoint = function (point) {\n    var coord = this.pointToCoord(point);\n    return this._radiusAxis.contain(coord[0]) && this._angleAxis.contain(coord[1]);\n  };\n  /**\r\n   * If contain data\r\n   */\n  Polar.prototype.containData = function (data) {\n    return this._radiusAxis.containData(data[0]) && this._angleAxis.containData(data[1]);\n  };\n  Polar.prototype.getAxis = function (dim) {\n    var key = '_' + dim + 'Axis';\n    return this[key];\n  };\n  Polar.prototype.getAxes = function () {\n    return [this._radiusAxis, this._angleAxis];\n  };\n  /**\r\n   * Get axes by type of scale\r\n   */\n  Polar.prototype.getAxesByScale = function (scaleType) {\n    var axes = [];\n    var angleAxis = this._angleAxis;\n    var radiusAxis = this._radiusAxis;\n    angleAxis.scale.type === scaleType && axes.push(angleAxis);\n    radiusAxis.scale.type === scaleType && axes.push(radiusAxis);\n    return axes;\n  };\n  Polar.prototype.getAngleAxis = function () {\n    return this._angleAxis;\n  };\n  Polar.prototype.getRadiusAxis = function () {\n    return this._radiusAxis;\n  };\n  Polar.prototype.getOtherAxis = function (axis) {\n    var angleAxis = this._angleAxis;\n    return axis === angleAxis ? this._radiusAxis : angleAxis;\n  };\n  /**\r\n   * Base axis will be used on stacking.\r\n   *\r\n   */\n  Polar.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAngleAxis();\n  };\n  Polar.prototype.getTooltipAxes = function (dim) {\n    var baseAxis = dim != null && dim !== 'auto' ? this.getAxis(dim) : this.getBaseAxis();\n    return {\n      baseAxes: [baseAxis],\n      otherAxes: [this.getOtherAxis(baseAxis)]\n    };\n  };\n  /**\r\n   * Convert a single data item to (x, y) point.\r\n   * Parameter data is an array which the first element is radius and the second is angle\r\n   */\n  Polar.prototype.dataToPoint = function (data, clamp) {\n    return this.coordToPoint([this._radiusAxis.dataToRadius(data[0], clamp), this._angleAxis.dataToAngle(data[1], clamp)]);\n  };\n  /**\r\n   * Convert a (x, y) point to data\r\n   */\n  Polar.prototype.pointToData = function (point, clamp) {\n    var coord = this.pointToCoord(point);\n    return [this._radiusAxis.radiusToData(coord[0], clamp), this._angleAxis.angleToData(coord[1], clamp)];\n  };\n  /**\r\n   * Convert a (x, y) point to (radius, angle) coord\r\n   */\n  Polar.prototype.pointToCoord = function (point) {\n    var dx = point[0] - this.cx;\n    var dy = point[1] - this.cy;\n    var angleAxis = this.getAngleAxis();\n    var extent = angleAxis.getExtent();\n    var minAngle = Math.min(extent[0], extent[1]);\n    var maxAngle = Math.max(extent[0], extent[1]);\n    // Fix fixed extent in polarCreator\n    // FIXME\n    angleAxis.inverse ? minAngle = maxAngle - 360 : maxAngle = minAngle + 360;\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    dx /= radius;\n    dy /= radius;\n    var radian = Math.atan2(-dy, dx) / Math.PI * 180;\n    // move to angleExtent\n    var dir = radian < minAngle ? 1 : -1;\n    while (radian < minAngle || radian > maxAngle) {\n      radian += dir * 360;\n    }\n    return [radius, radian];\n  };\n  /**\r\n   * Convert a (radius, angle) coord to (x, y) point\r\n   */\n  Polar.prototype.coordToPoint = function (coord) {\n    var radius = coord[0];\n    var radian = coord[1] / 180 * Math.PI;\n    var x = Math.cos(radian) * radius + this.cx;\n    // Inverse the y\n    var y = -Math.sin(radian) * radius + this.cy;\n    return [x, y];\n  };\n  /**\r\n   * Get ring area of cartesian.\r\n   * Area will have a contain function to determine if a point is in the coordinate system.\r\n   */\n  Polar.prototype.getArea = function () {\n    var angleAxis = this.getAngleAxis();\n    var radiusAxis = this.getRadiusAxis();\n    var radiusExtent = radiusAxis.getExtent().slice();\n    radiusExtent[0] > radiusExtent[1] && radiusExtent.reverse();\n    var angleExtent = angleAxis.getExtent();\n    var RADIAN = Math.PI / 180;\n    var EPSILON = 1e-4;\n    return {\n      cx: this.cx,\n      cy: this.cy,\n      r0: radiusExtent[0],\n      r: radiusExtent[1],\n      startAngle: -angleExtent[0] * RADIAN,\n      endAngle: -angleExtent[1] * RADIAN,\n      clockwise: angleAxis.inverse,\n      contain: function (x, y) {\n        // It's a ring shape.\n        // Start angle and end angle don't matter\n        var dx = x - this.cx;\n        var dy = y - this.cy;\n        var d2 = dx * dx + dy * dy;\n        var r = this.r;\n        var r0 = this.r0;\n        // minus a tiny value 1e-4 in double side to avoid being clipped unexpectedly\n        // r == r0 contain nothing\n        return r !== r0 && d2 - EPSILON <= r * r && d2 + EPSILON >= r0 * r0;\n      }\n    };\n  };\n  Polar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.dataToPoint(value) : null;\n  };\n  Polar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.pointToData(pixel) : null;\n  };\n  return Polar;\n}();\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  var polarModel = finder.polarModel;\n  return polarModel && polarModel.coordinateSystem || seriesModel && seriesModel.coordinateSystem;\n}\nexport default Polar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// TODO Axis scale\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Polar, { polarDimensions } from './Polar.js';\nimport { parsePercent } from '../../util/number.js';\nimport { createScaleByModel, niceScaleExtent, getDataDimensionsOnAxis } from '../../coord/axisHelper.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\r\n * Resize method bound to the polar\r\n */\nfunction resizePolar(polar, polarModel, api) {\n  var center = polarModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  polar.cx = parsePercent(center[0], width);\n  polar.cy = parsePercent(center[1], height);\n  var radiusAxis = polar.getRadiusAxis();\n  var size = Math.min(width, height) / 2;\n  var radius = polarModel.get('radius');\n  if (radius == null) {\n    radius = [0, '100%'];\n  } else if (!zrUtil.isArray(radius)) {\n    // r0 = 0\n    radius = [0, radius];\n  }\n  var parsedRadius = [parsePercent(radius[0], size), parsePercent(radius[1], size)];\n  radiusAxis.inverse ? radiusAxis.setExtent(parsedRadius[1], parsedRadius[0]) : radiusAxis.setExtent(parsedRadius[0], parsedRadius[1]);\n}\n/**\r\n * Update polar\r\n */\nfunction updatePolarScale(ecModel, api) {\n  var polar = this;\n  var angleAxis = polar.getAngleAxis();\n  var radiusAxis = polar.getRadiusAxis();\n  // Reset scale\n  angleAxis.scale.setExtent(Infinity, -Infinity);\n  radiusAxis.scale.setExtent(Infinity, -Infinity);\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.coordinateSystem === polar) {\n      var data_1 = seriesModel.getData();\n      zrUtil.each(getDataDimensionsOnAxis(data_1, 'radius'), function (dim) {\n        radiusAxis.scale.unionExtentFromData(data_1, dim);\n      });\n      zrUtil.each(getDataDimensionsOnAxis(data_1, 'angle'), function (dim) {\n        angleAxis.scale.unionExtentFromData(data_1, dim);\n      });\n    }\n  });\n  niceScaleExtent(angleAxis.scale, angleAxis.model);\n  niceScaleExtent(radiusAxis.scale, radiusAxis.model);\n  // Fix extent of category angle axis\n  if (angleAxis.type === 'category' && !angleAxis.onBand) {\n    var extent = angleAxis.getExtent();\n    var diff = 360 / angleAxis.scale.count();\n    angleAxis.inverse ? extent[1] += diff : extent[1] -= diff;\n    angleAxis.setExtent(extent[0], extent[1]);\n  }\n}\nfunction isAngleAxisModel(axisModel) {\n  return axisModel.mainType === 'angleAxis';\n}\n/**\r\n * Set common axis properties\r\n */\nfunction setAxis(axis, axisModel) {\n  var _a;\n  axis.type = axisModel.get('type');\n  axis.scale = createScaleByModel(axisModel);\n  axis.onBand = axisModel.get('boundaryGap') && axis.type === 'category';\n  axis.inverse = axisModel.get('inverse');\n  if (isAngleAxisModel(axisModel)) {\n    axis.inverse = axis.inverse !== axisModel.get('clockwise');\n    var startAngle = axisModel.get('startAngle');\n    var endAngle = (_a = axisModel.get('endAngle')) !== null && _a !== void 0 ? _a : startAngle + (axis.inverse ? -360 : 360);\n    axis.setExtent(startAngle, endAngle);\n  }\n  // Inject axis instance\n  axisModel.axis = axis;\n  axis.model = axisModel;\n}\nvar polarCreator = {\n  dimensions: polarDimensions,\n  create: function (ecModel, api) {\n    var polarList = [];\n    ecModel.eachComponent('polar', function (polarModel, idx) {\n      var polar = new Polar(idx + '');\n      // Inject resize and update method\n      polar.update = updatePolarScale;\n      var radiusAxis = polar.getRadiusAxis();\n      var angleAxis = polar.getAngleAxis();\n      var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n      var angleAxisModel = polarModel.findAxisModel('angleAxis');\n      setAxis(radiusAxis, radiusAxisModel);\n      setAxis(angleAxis, angleAxisModel);\n      resizePolar(polar, polarModel, api);\n      polarList.push(polar);\n      polarModel.coordinateSystem = polar;\n      polar.model = polarModel;\n    });\n    // Inject coordinateSystem to series\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.get('coordinateSystem') === 'polar') {\n        var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n        if (process.env.NODE_ENV !== 'production') {\n          if (!polarModel) {\n            throw new Error('Polar \"' + zrUtil.retrieve(seriesModel.get('polarIndex'), seriesModel.get('polarId'), 0) + '\" not found');\n          }\n        }\n        seriesModel.coordinateSystem = polarModel.coordinateSystem;\n      }\n    });\n    return polarList;\n  }\n};\nexport default polarCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../util/number.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || '__ec_stack_' + seriesModel.seriesIndex;\n}\nfunction getAxisKey(polar, axis) {\n  return axis.dim + polar.model.componentIndex;\n}\nfunction barLayoutPolar(seriesType, ecModel, api) {\n  var lastStackCoords = {};\n  var barWidthAndOffset = calRadialBar(zrUtil.filter(ecModel.getSeriesByType(seriesType), function (seriesModel) {\n    return !ecModel.isSeriesFiltered(seriesModel) && seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'polar';\n  }));\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for polar only\n    if (seriesModel.coordinateSystem.type !== 'polar') {\n      return;\n    }\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[axisKey][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    var valueAxis = polar.getOtherAxis(baseAxis);\n    var cx = seriesModel.coordinateSystem.cx;\n    var cy = seriesModel.coordinateSystem.cy;\n    var barMinHeight = seriesModel.get('barMinHeight') || 0;\n    var barMinAngle = seriesModel.get('barMinAngle') || 0;\n    lastStackCoords[stackId] = lastStackCoords[stackId] || [];\n    var valueDim = data.mapDimension(valueAxis.dim);\n    var baseDim = data.mapDimension(baseAxis.dim);\n    var stacked = isDimensionStacked(data, valueDim /* , baseDim */);\n    var clampLayout = baseAxis.dim !== 'radius' || !seriesModel.get('roundCap', true);\n    var valueAxisModel = valueAxis.model;\n    var startValue = valueAxisModel.get('startValue');\n    var valueAxisStart = valueAxis.dataToCoord(startValue || 0);\n    for (var idx = 0, len = data.count(); idx < len; idx++) {\n      var value = data.get(valueDim, idx);\n      var baseValue = data.get(baseDim, idx);\n      var sign = value >= 0 ? 'p' : 'n';\n      var baseCoord = valueAxisStart;\n      // Because of the barMinHeight, we can not use the value in\n      // stackResultDimension directly.\n      // Only ordinal axis can be stacked.\n      if (stacked) {\n        if (!lastStackCoords[stackId][baseValue]) {\n          lastStackCoords[stackId][baseValue] = {\n            p: valueAxisStart,\n            n: valueAxisStart // Negative stack\n          };\n        }\n        // Should also consider #4243\n        baseCoord = lastStackCoords[stackId][baseValue][sign];\n      }\n      var r0 = void 0;\n      var r = void 0;\n      var startAngle = void 0;\n      var endAngle = void 0;\n      // radial sector\n      if (valueAxis.dim === 'radius') {\n        var radiusSpan = valueAxis.dataToCoord(value) - valueAxisStart;\n        var angle = baseAxis.dataToCoord(baseValue);\n        if (Math.abs(radiusSpan) < barMinHeight) {\n          radiusSpan = (radiusSpan < 0 ? -1 : 1) * barMinHeight;\n        }\n        r0 = baseCoord;\n        r = baseCoord + radiusSpan;\n        startAngle = angle - columnOffset;\n        endAngle = startAngle - columnWidth;\n        stacked && (lastStackCoords[stackId][baseValue][sign] = r);\n      }\n      // tangential sector\n      else {\n        var angleSpan = valueAxis.dataToCoord(value, clampLayout) - valueAxisStart;\n        var radius = baseAxis.dataToCoord(baseValue);\n        if (Math.abs(angleSpan) < barMinAngle) {\n          angleSpan = (angleSpan < 0 ? -1 : 1) * barMinAngle;\n        }\n        r0 = radius + columnOffset;\n        r = r0 + columnWidth;\n        startAngle = baseCoord;\n        endAngle = baseCoord + angleSpan;\n        // if the previous stack is at the end of the ring,\n        // add a round to differentiate it from origin\n        // let extent = angleAxis.getExtent();\n        // let stackCoord = angle;\n        // if (stackCoord === extent[0] && value > 0) {\n        //     stackCoord = extent[1];\n        // }\n        // else if (stackCoord === extent[1] && value < 0) {\n        //     stackCoord = extent[0];\n        // }\n        stacked && (lastStackCoords[stackId][baseValue][sign] = endAngle);\n      }\n      data.setItemLayout(idx, {\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: r,\n        // Consider that positive angle is anti-clockwise,\n        // while positive radian of sector is clockwise\n        startAngle: -startAngle * Math.PI / 180,\n        endAngle: -endAngle * Math.PI / 180,\n        /**\r\n         * Keep the same logic with bar in catesion: use end value to\r\n         * control direction. Notice that if clockwise is true (by\r\n         * default), the sector will always draw clockwisely, no matter\r\n         * whether endAngle is greater or less than startAngle.\r\n         */\n        clockwise: startAngle >= endAngle\n      });\n    }\n  });\n}\n/**\r\n * Calculate bar width and offset for radial bar charts\r\n */\nfunction calRadialBar(barSeries) {\n  // Columns info on each category axis. Key is polar name\n  var columnsMap = {};\n  zrUtil.each(barSeries, function (seriesModel, idx) {\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: '20%',\n      gap: '30%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = getSeriesStackId(seriesModel);\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    if (barWidth && !stacks[stackId].width) {\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      stacks[stackId].width = barWidth;\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    barGap != null && (columnsOnAxis.gap = barGap);\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  zrUtil.each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGap = parsePercent(columnsOnAxis.categoryGap, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    // Find if any auto calculated bar exceeded maxBarWidth\n    zrUtil.each(stacks, function (column, stack) {\n      var maxWidth = column.maxWidth;\n      if (maxWidth && maxWidth < autoWidth) {\n        maxWidth = Math.min(maxWidth, remainedWidth);\n        if (column.width) {\n          maxWidth = Math.min(maxWidth, column.width);\n        }\n        remainedWidth -= maxWidth;\n        column.width = maxWidth;\n        autoWidthCount--;\n      }\n    });\n    // Recalculate width again\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    zrUtil.each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n    var offset = -widthSum / 2;\n    zrUtil.each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\nexport default barLayoutPolar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport function layout(axisModel, opt) {\n  opt = opt || {};\n  var single = axisModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var axisPosition = axis.position;\n  var orient = axis.orient;\n  var rect = single.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var positionMap = {\n    horizontal: {\n      top: rectBound[2],\n      bottom: rectBound[3]\n    },\n    vertical: {\n      left: rectBound[0],\n      right: rectBound[1]\n    }\n  };\n  layout.position = [orient === 'vertical' ? positionMap.vertical[axisPosition] : rectBound[0], orient === 'horizontal' ? positionMap.horizontal[axisPosition] : rectBound[3]];\n  var r = {\n    horizontal: 0,\n    vertical: 1\n  };\n  layout.rotation = Math.PI / 2 * r[orient];\n  var directionMap = {\n    top: -1,\n    bottom: 1,\n    right: 1,\n    left: -1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = directionMap[axisPosition];\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n  var labelRotation = opt.rotate;\n  labelRotation == null && (labelRotation = axisModel.get(['axisLabel', 'rotate']));\n  layout.labelRotation = axisPosition === 'top' ? -labelRotation : labelRotation;\n  layout.z2 = 1;\n  return layout;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nvar SingleAxisModel = /** @class */function (_super) {\n  __extends(SingleAxisModel, _super);\n  function SingleAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SingleAxisModel.type;\n    return _this;\n  }\n  SingleAxisModel.prototype.getCoordSysModel = function () {\n    return this;\n  };\n  SingleAxisModel.type = 'singleAxis';\n  SingleAxisModel.layoutMode = 'box';\n  SingleAxisModel.defaultOption = {\n    left: '5%',\n    top: '5%',\n    right: '5%',\n    bottom: '5%',\n    type: 'value',\n    position: 'bottom',\n    orient: 'horizontal',\n    axisLine: {\n      show: true,\n      lineStyle: {\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // Single coordinate system and single axis is the,\n    // which is used as the parent tooltip model.\n    // same model, so we set default tooltip show as true.\n    tooltip: {\n      show: true\n    },\n    axisTick: {\n      show: true,\n      length: 6,\n      lineStyle: {\n        width: 1\n      }\n    },\n    axisLabel: {\n      show: true,\n      interval: 'auto'\n    },\n    splitLine: {\n      show: true,\n      lineStyle: {\n        type: 'dashed',\n        opacity: 0.2\n      }\n    }\n  };\n  return SingleAxisModel;\n}(ComponentModel);\nmixin(SingleAxisModel, AxisModelCommonMixin.prototype);\nexport default SingleAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar SingleAxis = /** @class */function (_super) {\n  __extends(SingleAxis, _super);\n  function SingleAxis(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  /**\r\n   * Judge the orient of the axis.\r\n   */\n  SingleAxis.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  SingleAxis.prototype.pointToData = function (point, clamp) {\n    return this.coordinateSystem.pointToData(point)[0];\n  };\n  return SingleAxis;\n}(Axis);\nexport default SingleAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Single coordinates system.\r\n */\nimport SingleAxis from './SingleAxis.js';\nimport * as axisHelper from '../axisHelper.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport { each } from 'zrender/lib/core/util.js';\nexport var singleDimensions = ['single'];\n/**\r\n * Create a single coordinates system.\r\n */\nvar Single = /** @class */function () {\n  function Single(axisModel, ecModel, api) {\n    this.type = 'single';\n    this.dimension = 'single';\n    /**\r\n     * Add it just for draw tooltip.\r\n     */\n    this.dimensions = singleDimensions;\n    this.axisPointerEnabled = true;\n    this.model = axisModel;\n    this._init(axisModel, ecModel, api);\n  }\n  /**\r\n   * Initialize single coordinate system.\r\n   */\n  Single.prototype._init = function (axisModel, ecModel, api) {\n    var dim = this.dimension;\n    var axis = new SingleAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisModel.get('position'));\n    var isCategory = axis.type === 'category';\n    axis.onBand = isCategory && axisModel.get('boundaryGap');\n    axis.inverse = axisModel.get('inverse');\n    axis.orient = axisModel.get('orient');\n    axisModel.axis = axis;\n    axis.model = axisModel;\n    axis.coordinateSystem = this;\n    this._axis = axis;\n  };\n  /**\r\n   * Update axis scale after data processed\r\n   */\n  Single.prototype.update = function (ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.coordinateSystem === this) {\n        var data_1 = seriesModel.getData();\n        each(data_1.mapDimensionsAll(this.dimension), function (dim) {\n          this._axis.scale.unionExtentFromData(data_1, dim);\n        }, this);\n        axisHelper.niceScaleExtent(this._axis.scale, this._axis.model);\n      }\n    }, this);\n  };\n  /**\r\n   * Resize the single coordinate system.\r\n   */\n  Single.prototype.resize = function (axisModel, api) {\n    this._rect = getLayoutRect({\n      left: axisModel.get('left'),\n      top: axisModel.get('top'),\n      right: axisModel.get('right'),\n      bottom: axisModel.get('bottom'),\n      width: axisModel.get('width'),\n      height: axisModel.get('height')\n    }, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._adjustAxis();\n  };\n  Single.prototype.getRect = function () {\n    return this._rect;\n  };\n  Single.prototype._adjustAxis = function () {\n    var rect = this._rect;\n    var axis = this._axis;\n    var isHorizontal = axis.isHorizontal();\n    var extent = isHorizontal ? [0, rect.width] : [0, rect.height];\n    var idx = axis.inverse ? 1 : 0;\n    axis.setExtent(extent[idx], extent[1 - idx]);\n    this._updateAxisTransform(axis, isHorizontal ? rect.x : rect.y);\n  };\n  Single.prototype._updateAxisTransform = function (axis, coordBase) {\n    var axisExtent = axis.getExtent();\n    var extentSum = axisExtent[0] + axisExtent[1];\n    var isHorizontal = axis.isHorizontal();\n    axis.toGlobalCoord = isHorizontal ? function (coord) {\n      return coord + coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n    axis.toLocalCoord = isHorizontal ? function (coord) {\n      return coord - coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n  };\n  /**\r\n   * Get axis.\r\n   */\n  Single.prototype.getAxis = function () {\n    return this._axis;\n  };\n  /**\r\n   * Get axis, add it just for draw tooltip.\r\n   */\n  Single.prototype.getBaseAxis = function () {\n    return this._axis;\n  };\n  Single.prototype.getAxes = function () {\n    return [this._axis];\n  };\n  Single.prototype.getTooltipAxes = function () {\n    return {\n      baseAxes: [this.getAxis()],\n      // Empty otherAxes\n      otherAxes: []\n    };\n  };\n  /**\r\n   * If contain point.\r\n   */\n  Single.prototype.containPoint = function (point) {\n    var rect = this.getRect();\n    var axis = this.getAxis();\n    var orient = axis.orient;\n    if (orient === 'horizontal') {\n      return axis.contain(axis.toLocalCoord(point[0])) && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n    } else {\n      return axis.contain(axis.toLocalCoord(point[1])) && point[0] >= rect.y && point[0] <= rect.y + rect.height;\n    }\n  };\n  Single.prototype.pointToData = function (point) {\n    var axis = this.getAxis();\n    return [axis.coordToData(axis.toLocalCoord(point[axis.orient === 'horizontal' ? 0 : 1]))];\n  };\n  /**\r\n   * Convert the series data to concrete point.\r\n   * Can be [val] | val\r\n   */\n  Single.prototype.dataToPoint = function (val) {\n    var axis = this.getAxis();\n    var rect = this.getRect();\n    var pt = [];\n    var idx = axis.orient === 'horizontal' ? 0 : 1;\n    if (val instanceof Array) {\n      val = val[0];\n    }\n    pt[idx] = axis.toGlobalCoord(axis.dataToCoord(+val));\n    pt[1 - idx] = idx === 0 ? rect.y + rect.height / 2 : rect.x + rect.width / 2;\n    return pt;\n  };\n  Single.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.dataToPoint(value) : null;\n  };\n  Single.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.pointToData(pixel) : null;\n  };\n  return Single;\n}();\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  var singleModel = finder.singleAxisModel;\n  return singleModel && singleModel.coordinateSystem || seriesModel && seriesModel.coordinateSystem;\n}\nexport default Single;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Single coordinate system creator.\r\n */\nimport Single, { singleDimensions } from './Single.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\r\n * Create single coordinate system and inject it into seriesModel.\r\n */\nfunction create(ecModel, api) {\n  var singles = [];\n  ecModel.eachComponent('singleAxis', function (axisModel, idx) {\n    var single = new Single(axisModel, ecModel, api);\n    single.name = 'single_' + idx;\n    single.resize(axisModel, api);\n    axisModel.coordinateSystem = single;\n    singles.push(single);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'singleAxis') {\n      var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n      seriesModel.coordinateSystem = singleAxisModel && singleAxisModel.coordinateSystem;\n    }\n  });\n  return singles;\n}\nvar singleCreator = {\n  create: create,\n  dimensions: singleDimensions\n};\nexport default singleCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getLayoutParams, sizeCalculable, mergeLayoutParam } from '../../util/layout.js';\nvar CalendarModel = /** @class */function (_super) {\n  __extends(CalendarModel, _super);\n  function CalendarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CalendarModel.type;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  CalendarModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n    _super.prototype.init.apply(this, arguments);\n    mergeAndNormalizeLayoutParams(option, inputPositionParams);\n  };\n  /**\r\n   * @override\r\n   */\n  CalendarModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    mergeAndNormalizeLayoutParams(this.option, option);\n  };\n  CalendarModel.prototype.getCellSize = function () {\n    // Has been normalized\n    return this.option.cellSize;\n  };\n  CalendarModel.type = 'calendar';\n  CalendarModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    left: 80,\n    top: 60,\n    cellSize: 20,\n    // horizontal vertical\n    orient: 'horizontal',\n    // month separate line style\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: '#000',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // rect style  temporarily unused emphasis\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1,\n      borderColor: '#ccc'\n    },\n    // week text style\n    dayLabel: {\n      show: true,\n      firstDay: 0,\n      // start end\n      position: 'start',\n      margin: '50%',\n      color: '#000'\n    },\n    // month text style\n    monthLabel: {\n      show: true,\n      // start end\n      position: 'start',\n      margin: 5,\n      // center or left\n      align: 'center',\n      formatter: null,\n      color: '#000'\n    },\n    // year text style\n    yearLabel: {\n      show: true,\n      // top bottom left right\n      position: null,\n      margin: 30,\n      formatter: null,\n      color: '#ccc',\n      fontFamily: 'sans-serif',\n      fontWeight: 'bolder',\n      fontSize: 20\n    }\n  };\n  return CalendarModel;\n}(ComponentModel);\nfunction mergeAndNormalizeLayoutParams(target, raw) {\n  // Normalize cellSize\n  var cellSize = target.cellSize;\n  var cellSizeArr;\n  if (!zrUtil.isArray(cellSize)) {\n    cellSizeArr = target.cellSize = [cellSize, cellSize];\n  } else {\n    cellSizeArr = cellSize;\n  }\n  if (cellSizeArr.length === 1) {\n    cellSizeArr[1] = cellSizeArr[0];\n  }\n  var ignoreSize = zrUtil.map([0, 1], function (hvIdx) {\n    // If user have set `width` or both `left` and `right`, cellSizeArr\n    // will be automatically set to 'auto', otherwise the default\n    // setting of cellSizeArr will make `width` setting not work.\n    if (sizeCalculable(raw, hvIdx)) {\n      cellSizeArr[hvIdx] = 'auto';\n    }\n    return cellSizeArr[hvIdx] != null && cellSizeArr[hvIdx] !== 'auto';\n  });\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\nexport default CalendarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as layout from '../../util/layout.js';\nimport * as numberUtil from '../../util/number.js';\n// (24*60*60*1000)\nvar PROXIMATE_ONE_DAY = 86400000;\nvar Calendar = /** @class */function () {\n  function Calendar(calendarModel, ecModel, api) {\n    this.type = 'calendar';\n    this.dimensions = Calendar.dimensions;\n    // Required in createListFromData\n    this.getDimensionsInfo = Calendar.getDimensionsInfo;\n    this._model = calendarModel;\n  }\n  Calendar.getDimensionsInfo = function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  };\n  Calendar.prototype.getRangeInfo = function () {\n    return this._rangeInfo;\n  };\n  Calendar.prototype.getModel = function () {\n    return this._model;\n  };\n  Calendar.prototype.getRect = function () {\n    return this._rect;\n  };\n  Calendar.prototype.getCellWidth = function () {\n    return this._sw;\n  };\n  Calendar.prototype.getCellHeight = function () {\n    return this._sh;\n  };\n  Calendar.prototype.getOrient = function () {\n    return this._orient;\n  };\n  /**\r\n   * getFirstDayOfWeek\r\n   *\r\n   * @example\r\n   *     0 : start at Sunday\r\n   *     1 : start at Monday\r\n   *\r\n   * @return {number}\r\n   */\n  Calendar.prototype.getFirstDayOfWeek = function () {\n    return this._firstDayOfWeek;\n  };\n  /**\r\n   * get date info\r\n   * }\r\n   */\n  Calendar.prototype.getDateInfo = function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var mStr = m < 10 ? '0' + m : '' + m;\n    var d = date.getDate();\n    var dStr = d < 10 ? '0' + d : '' + d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y + '',\n      m: mStr,\n      d: dStr,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + mStr + '-' + dStr,\n      date: date\n    };\n  };\n  Calendar.prototype.getNextNDay = function (date, n) {\n    n = n || 0;\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  };\n  Calendar.prototype.update = function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n    var cellSize = this._model.getCellSize().slice();\n    var layoutParams = this._model.getBoxLayoutParams();\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    }\n    // Has been calculated out number.\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  };\n  /**\r\n   * Convert a time data(time, value) item to (x, y) point.\r\n   */\n  // TODO Clamp of calendar is not same with cartesian coordinate systems.\n  // It will return NaN if data exceeds.\n  Calendar.prototype.dataToPoint = function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate;\n    // if not in range return [NaN, NaN]\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      return [NaN, NaN];\n    }\n    var week = dayInfo.day;\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  };\n  /**\r\n   * Convert a (x, y) point to time data\r\n   */\n  Calendar.prototype.pointToData = function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  };\n  /**\r\n   * Convert a time date item to (x, y) four point.\r\n   */\n  Calendar.prototype.dataToRect = function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  };\n  /**\r\n   * Convert a (x, y) point to time date\r\n   *\r\n   * @param  {Array} point point\r\n   * @return {Object}       date\r\n   */\n  Calendar.prototype.pointToDate = function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  };\n  Calendar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n  Calendar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  Calendar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  /**\r\n   * initRange\r\n   * Normalize to an [start, end] array\r\n   */\n  Calendar.prototype._initRangeOption = function () {\n    var range = this._model.get('range');\n    var normalizedRange;\n    // Convert [1990] to 1990\n    if (zrUtil.isArray(range) && range.length === 1) {\n      range = range[0];\n    }\n    if (!zrUtil.isArray(range)) {\n      var rangeStr = range.toString();\n      // One year.\n      if (/^\\d{4}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr + '-01-01', rangeStr + '-12-31'];\n      }\n      // One month\n      if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        var start = this.getDateInfo(rangeStr);\n        var firstDay = start.date;\n        firstDay.setMonth(firstDay.getMonth() + 1);\n        var end = this.getNextNDay(firstDay, -1);\n        normalizedRange = [start.formatedDate, end.formatedDate];\n      }\n      // One day\n      if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr, rangeStr];\n      }\n    } else {\n      normalizedRange = range;\n    }\n    if (!normalizedRange) {\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.logError('Invalid date range.');\n      }\n      // Not handling it.\n      return range;\n    }\n    var tmp = this._getRangeInfo(normalizedRange);\n    if (tmp.start.time > tmp.end.time) {\n      normalizedRange.reverse();\n    }\n    return normalizedRange;\n  };\n  /**\r\n   * range info\r\n   *\r\n   * @private\r\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\r\n   *  If range[0] > range[1], they will not be reversed.\r\n   * @return {Object}       obj\r\n   */\n  Calendar.prototype._getRangeInfo = function (range) {\n    var parsedRange = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n    if (parsedRange[0].time > parsedRange[1].time) {\n      reversed = true;\n      parsedRange.reverse();\n    }\n    var allDay = Math.floor(parsedRange[1].time / PROXIMATE_ONE_DAY) - Math.floor(parsedRange[0].time / PROXIMATE_ONE_DAY) + 1;\n    // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // let first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // let second = new Date(1478412000000);\n    // let allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n    var date = new Date(parsedRange[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = parsedRange[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1);\n    // The bias can not over a month, so just compare date.\n    var dateNum = date.getDate();\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - parsedRange[1].time > 0 ? 1 : -1;\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - parsedRange[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n    var weeks = Math.floor((allDay + parsedRange[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && parsedRange.reverse();\n    return {\n      range: [parsedRange[0].formatedDate, parsedRange[1].formatedDate],\n      start: parsedRange[0],\n      end: parsedRange[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: parsedRange[0].day,\n      lweek: parsedRange[1].day\n    };\n  };\n  /**\r\n   * get date by nthWeeks and week day in range\r\n   *\r\n   * @private\r\n   * @param  {number} nthWeek the week\r\n   * @param  {number} day   the week day\r\n   * @param  {Array} range [d1, d2]\r\n   * @return {Object}\r\n   */\n  Calendar.prototype._getDateByWeeksAndDay = function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return null;\n    }\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(+rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  };\n  Calendar.create = function (ecModel, api) {\n    var calendarList = [];\n    ecModel.eachComponent('calendar', function (calendarModel) {\n      var calendar = new Calendar(calendarModel, ecModel, api);\n      calendarList.push(calendar);\n      calendarModel.coordinateSystem = calendar;\n    });\n    ecModel.eachSeries(function (calendarSeries) {\n      if (calendarSeries.get('coordinateSystem') === 'calendar') {\n        // Inject coordinate system\n        calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n      }\n    });\n    return calendarList;\n  };\n  Calendar.dimensions = ['time', 'value'];\n  return Calendar;\n}();\nfunction getCoordSys(finder) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys;\n}\nexport default Calendar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * @file Visual solution, for consistent option specification.\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapping from './VisualMapping.js';\nimport { getItemVisualFromData, setItemVisualFromData } from './helper.js';\nvar each = zrUtil.each;\nfunction hasKeys(obj) {\n  if (obj) {\n    for (var name_1 in obj) {\n      if (obj.hasOwnProperty(name_1)) {\n        return true;\n      }\n    }\n  }\n}\nexport function createVisualMappings(option, stateList, supplementVisualOption) {\n  var visualMappings = {};\n  each(stateList, function (state) {\n    var mappings = visualMappings[state] = createMappings();\n    each(option[state], function (visualData, visualType) {\n      if (!VisualMapping.isValidType(visualType)) {\n        return;\n      }\n      var mappingOption = {\n        type: visualType,\n        visual: visualData\n      };\n      supplementVisualOption && supplementVisualOption(mappingOption, state);\n      mappings[visualType] = new VisualMapping(mappingOption);\n      // Prepare a alpha for opacity, for some case that opacity\n      // is not supported, such as rendering using gradient color.\n      if (visualType === 'opacity') {\n        mappingOption = zrUtil.clone(mappingOption);\n        mappingOption.type = 'colorAlpha';\n        mappings.__hidden.__alphaForOpacity = new VisualMapping(mappingOption);\n      }\n    });\n  });\n  return visualMappings;\n  function createMappings() {\n    var Creater = function () {};\n    // Make sure hidden fields will not be visited by\n    // object iteration (with hasOwnProperty checking).\n    Creater.prototype.__hidden = Creater.prototype;\n    var obj = new Creater();\n    return obj;\n  }\n}\nexport function replaceVisualOption(thisOption, newOption, keys) {\n  // Visual attributes merge is not supported, otherwise it\n  // brings overcomplicated merge logic. See #2853. So if\n  // newOption has anyone of these keys, all of these keys\n  // will be reset. Otherwise, all keys remain.\n  var has;\n  zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      has = true;\n    }\n  });\n  has && zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      thisOption[key] = zrUtil.clone(newOption[key]);\n    } else {\n      delete thisOption[key];\n    }\n  });\n}\n/**\r\n * @param stateList\r\n * @param visualMappings\r\n * @param list\r\n * @param getValueState param: valueOrIndex, return: state.\r\n * @param scope Scope for getValueState\r\n * @param dimension Concrete dimension, if used.\r\n */\n// ???! handle brush?\nexport function applyVisual(stateList, visualMappings, data, getValueState, scope, dimension) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  var dataIndex;\n  function getVisual(key) {\n    return getItemVisualFromData(data, dataIndex, key);\n  }\n  function setVisual(key, value) {\n    setItemVisualFromData(data, dataIndex, key, value);\n  }\n  if (dimension == null) {\n    data.each(eachItem);\n  } else {\n    data.each([dimension], eachItem);\n  }\n  function eachItem(valueOrIndex, index) {\n    dataIndex = dimension == null ? valueOrIndex // First argument is index\n    : index;\n    var rawDataItem = data.getRawDataItem(dataIndex);\n    // Consider performance\n    // @ts-ignore\n    if (rawDataItem && rawDataItem.visualMap === false) {\n      return;\n    }\n    var valueState = getValueState.call(scope, valueOrIndex);\n    var mappings = visualMappings[valueState];\n    var visualTypes = visualTypesMap[valueState];\n    for (var i = 0, len = visualTypes.length; i < len; i++) {\n      var type = visualTypes[i];\n      mappings[type] && mappings[type].applyVisual(valueOrIndex, getVisual, setVisual);\n    }\n  }\n}\n/**\r\n * @param data\r\n * @param stateList\r\n * @param visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\r\n * @param getValueState param: valueOrIndex, return: state.\r\n * @param dim dimension or dimension index.\r\n */\nexport function incrementalApplyVisual(stateList, visualMappings, getValueState, dim) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  return {\n    progress: function progress(params, data) {\n      var dimIndex;\n      if (dim != null) {\n        dimIndex = data.getDimensionIndex(dim);\n      }\n      function getVisual(key) {\n        return getItemVisualFromData(data, dataIndex, key);\n      }\n      function setVisual(key, value) {\n        setItemVisualFromData(data, dataIndex, key, value);\n      }\n      var dataIndex;\n      var store = data.getStore();\n      while ((dataIndex = params.next()) != null) {\n        var rawDataItem = data.getRawDataItem(dataIndex);\n        // Consider performance\n        // @ts-ignore\n        if (rawDataItem && rawDataItem.visualMap === false) {\n          continue;\n        }\n        var value = dim != null ? store.get(dimIndex, dataIndex) : dataIndex;\n        var valueState = getValueState(value);\n        var mappings = visualMappings[valueState];\n        var visualTypes = visualTypesMap[valueState];\n        for (var i = 0, len = visualTypes.length; i < len; i++) {\n          var type = visualTypes[i];\n          mappings[type] && mappings[type].applyVisual(value, getVisual, setVisual);\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * @file Visual mapping.\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar visualDefault = {\n  /**\r\n   * @public\r\n   */\n  get: function (visualType, key, isCategory) {\n    var value = zrUtil.clone((defaultOption[visualType] || {})[key]);\n    return isCategory ? zrUtil.isArray(value) ? value[value.length - 1] : value : value;\n  }\n};\nvar defaultOption = {\n  color: {\n    active: ['#006edd', '#e0ffff'],\n    inactive: ['rgba(0,0,0,0)']\n  },\n  colorHue: {\n    active: [0, 360],\n    inactive: [0, 0]\n  },\n  colorSaturation: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  colorLightness: {\n    active: [0.9, 0.5],\n    inactive: [0, 0]\n  },\n  colorAlpha: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  opacity: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  symbol: {\n    active: ['circle', 'roundRect', 'diamond'],\n    inactive: ['none']\n  },\n  symbolSize: {\n    active: [10, 50],\n    inactive: [0, 0]\n  }\n};\nexport default visualDefault;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../util/model.js';\nimport { getDecalFromPalette } from '../model/mixin/palette.js';\nvar DEFAULT_OPTION = {\n  label: {\n    enabled: true\n  },\n  decal: {\n    show: false\n  }\n};\nvar inner = makeInner();\nvar decalPaletteScope = {};\nexport default function ariaVisual(ecModel, api) {\n  var ariaModel = ecModel.getModel('aria');\n  // See \"area enabled\" detection code in `GlobalModel.ts`.\n  if (!ariaModel.get('enabled')) {\n    return;\n  }\n  var defaultOption = zrUtil.clone(DEFAULT_OPTION);\n  zrUtil.merge(defaultOption.label, ecModel.getLocaleModel().get('aria'), false);\n  zrUtil.merge(ariaModel.option, defaultOption, false);\n  setDecal();\n  setLabel();\n  function setDecal() {\n    var decalModel = ariaModel.getModel('decal');\n    var useDecal = decalModel.get('show');\n    if (useDecal) {\n      // Each type of series use one scope.\n      // Pie and funnel are using different scopes.\n      var paletteScopeGroupByType_1 = zrUtil.createHashMap();\n      ecModel.eachSeries(function (seriesModel) {\n        if (seriesModel.isColorBySeries()) {\n          return;\n        }\n        var decalScope = paletteScopeGroupByType_1.get(seriesModel.type);\n        if (!decalScope) {\n          decalScope = {};\n          paletteScopeGroupByType_1.set(seriesModel.type, decalScope);\n        }\n        inner(seriesModel).scope = decalScope;\n      });\n      ecModel.eachRawSeries(function (seriesModel) {\n        if (ecModel.isSeriesFiltered(seriesModel)) {\n          return;\n        }\n        if (zrUtil.isFunction(seriesModel.enableAriaDecal)) {\n          // Let series define how to use decal palette on data\n          seriesModel.enableAriaDecal();\n          return;\n        }\n        var data = seriesModel.getData();\n        if (!seriesModel.isColorBySeries()) {\n          var dataAll_1 = seriesModel.getRawData();\n          var idxMap_1 = {};\n          var decalScope_1 = inner(seriesModel).scope;\n          data.each(function (idx) {\n            var rawIdx = data.getRawIndex(idx);\n            idxMap_1[rawIdx] = idx;\n          });\n          var dataCount_1 = dataAll_1.count();\n          dataAll_1.each(function (rawIdx) {\n            var idx = idxMap_1[rawIdx];\n            var name = dataAll_1.getName(rawIdx) || rawIdx + '';\n            var paletteDecal = getDecalFromPalette(seriesModel.ecModel, name, decalScope_1, dataCount_1);\n            var specifiedDecal = data.getItemVisual(idx, 'decal');\n            data.setItemVisual(idx, 'decal', mergeDecal(specifiedDecal, paletteDecal));\n          });\n        } else {\n          var paletteDecal = getDecalFromPalette(seriesModel.ecModel, seriesModel.name, decalPaletteScope, ecModel.getSeriesCount());\n          var specifiedDecal = data.getVisual('decal');\n          data.setVisual('decal', mergeDecal(specifiedDecal, paletteDecal));\n        }\n        function mergeDecal(specifiedDecal, paletteDecal) {\n          // Merge decal from palette to decal from itemStyle.\n          // User do not need to specify all of the decal props.\n          var resultDecal = specifiedDecal ? zrUtil.extend(zrUtil.extend({}, paletteDecal), specifiedDecal) : paletteDecal;\n          resultDecal.dirty = true;\n          return resultDecal;\n        }\n      });\n    }\n  }\n  function setLabel() {\n    var dom = api.getZr().dom;\n    // TODO: support for SSR\n    if (!dom) {\n      return;\n    }\n    var labelLocale = ecModel.getLocaleModel().get('aria');\n    var labelModel = ariaModel.getModel('label');\n    labelModel.option = zrUtil.defaults(labelModel.option, labelLocale);\n    if (!labelModel.get('enabled')) {\n      return;\n    }\n    dom.setAttribute('role', 'img');\n    if (labelModel.get('description')) {\n      dom.setAttribute('aria-label', labelModel.get('description'));\n      return;\n    }\n    var seriesCnt = ecModel.getSeriesCount();\n    var maxDataCnt = labelModel.get(['data', 'maxCount']) || 10;\n    var maxSeriesCnt = labelModel.get(['series', 'maxCount']) || 10;\n    var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n    var ariaLabel;\n    if (seriesCnt < 1) {\n      // No series, no aria label\n      return;\n    } else {\n      var title = getTitle();\n      if (title) {\n        var withTitle = labelModel.get(['general', 'withTitle']);\n        ariaLabel = replace(withTitle, {\n          title: title\n        });\n      } else {\n        ariaLabel = labelModel.get(['general', 'withoutTitle']);\n      }\n      var seriesLabels_1 = [];\n      var prefix = seriesCnt > 1 ? labelModel.get(['series', 'multiple', 'prefix']) : labelModel.get(['series', 'single', 'prefix']);\n      ariaLabel += replace(prefix, {\n        seriesCount: seriesCnt\n      });\n      ecModel.eachSeries(function (seriesModel, idx) {\n        if (idx < displaySeriesCnt) {\n          var seriesLabel = void 0;\n          var seriesName = seriesModel.get('name');\n          var withName = seriesName ? 'withName' : 'withoutName';\n          seriesLabel = seriesCnt > 1 ? labelModel.get(['series', 'multiple', withName]) : labelModel.get(['series', 'single', withName]);\n          seriesLabel = replace(seriesLabel, {\n            seriesId: seriesModel.seriesIndex,\n            seriesName: seriesModel.get('name'),\n            seriesType: getSeriesTypeName(seriesModel.subType)\n          });\n          var data = seriesModel.getData();\n          if (data.count() > maxDataCnt) {\n            // Show part of data\n            var partialLabel = labelModel.get(['data', 'partialData']);\n            seriesLabel += replace(partialLabel, {\n              displayCnt: maxDataCnt\n            });\n          } else {\n            seriesLabel += labelModel.get(['data', 'allData']);\n          }\n          var middleSeparator_1 = labelModel.get(['data', 'separator', 'middle']);\n          var endSeparator_1 = labelModel.get(['data', 'separator', 'end']);\n          var excludeDimensionId_1 = labelModel.get(['data', 'excludeDimensionId']);\n          var dataLabels = [];\n          for (var i = 0; i < data.count(); i++) {\n            if (i < maxDataCnt) {\n              var name_1 = data.getName(i);\n              var value = !excludeDimensionId_1 ? data.getValues(i) : zrUtil.filter(data.getValues(i), function (v, j) {\n                return zrUtil.indexOf(excludeDimensionId_1, j) === -1;\n              });\n              var dataLabel = labelModel.get(['data', name_1 ? 'withName' : 'withoutName']);\n              dataLabels.push(replace(dataLabel, {\n                name: name_1,\n                value: value.join(middleSeparator_1)\n              }));\n            }\n          }\n          seriesLabel += dataLabels.join(middleSeparator_1) + endSeparator_1;\n          seriesLabels_1.push(seriesLabel);\n        }\n      });\n      var separatorModel = labelModel.getModel(['series', 'multiple', 'separator']);\n      var middleSeparator = separatorModel.get('middle');\n      var endSeparator = separatorModel.get('end');\n      ariaLabel += seriesLabels_1.join(middleSeparator) + endSeparator;\n      dom.setAttribute('aria-label', ariaLabel);\n    }\n  }\n  function replace(str, keyValues) {\n    if (!zrUtil.isString(str)) {\n      return str;\n    }\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n  function getTitle() {\n    var title = ecModel.get('title');\n    if (title && title.length) {\n      title = title[0];\n    }\n    return title && title.text;\n  }\n  function getSeriesTypeName(type) {\n    var typeNames = ecModel.getLocaleModel().get(['series', 'typeNames']);\n    return typeNames[type] || typeNames.chart;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { keys, isArray, map, isObject, isString, isRegExp, isArrayLike, hasOwn, isNumber } from 'zrender/lib/core/util.js';\nimport { throwError, makePrintable } from './log.js';\nimport { getRawValueParser, createFilterComparator } from '../data/helper/dataValueHelper.js';\n;\nvar RELATIONAL_EXPRESSION_OP_ALIAS_MAP = {\n  value: 'eq',\n  // PENDING: not good for literal semantic?\n  '<': 'lt',\n  '<=': 'lte',\n  '>': 'gt',\n  '>=': 'gte',\n  '=': 'eq',\n  '!=': 'ne',\n  '<>': 'ne'\n  // Might be misleading for sake of the difference between '==' and '===',\n  // so don't support them.\n  // '==': 'eq',\n  // '===': 'seq',\n  // '!==': 'sne'\n  // PENDING: Whether support some common alias \"ge\", \"le\", \"neq\"?\n  // ge: 'gte',\n  // le: 'lte',\n  // neq: 'ne',\n};\n// type RelationalExpressionOpEvaluate = (tarVal: unknown, condVal: unknown) => boolean;\nvar RegExpEvaluator = /** @class */function () {\n  function RegExpEvaluator(rVal) {\n    // Support condVal: RegExp | string\n    var condValue = this._condVal = isString(rVal) ? new RegExp(rVal) : isRegExp(rVal) ? rVal : null;\n    if (condValue == null) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal regexp', rVal, 'in');\n      }\n      throwError(errMsg);\n    }\n  }\n  RegExpEvaluator.prototype.evaluate = function (lVal) {\n    var type = typeof lVal;\n    return isString(type) ? this._condVal.test(lVal) : isNumber(type) ? this._condVal.test(lVal + '') : false;\n  };\n  return RegExpEvaluator;\n}();\nvar ConstConditionInternal = /** @class */function () {\n  function ConstConditionInternal() {}\n  ConstConditionInternal.prototype.evaluate = function () {\n    return this.value;\n  };\n  return ConstConditionInternal;\n}();\nvar AndConditionInternal = /** @class */function () {\n  function AndConditionInternal() {}\n  AndConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n    for (var i = 0; i < children.length; i++) {\n      if (!children[i].evaluate()) {\n        return false;\n      }\n    }\n    return true;\n  };\n  return AndConditionInternal;\n}();\nvar OrConditionInternal = /** @class */function () {\n  function OrConditionInternal() {}\n  OrConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n    for (var i = 0; i < children.length; i++) {\n      if (children[i].evaluate()) {\n        return true;\n      }\n    }\n    return false;\n  };\n  return OrConditionInternal;\n}();\nvar NotConditionInternal = /** @class */function () {\n  function NotConditionInternal() {}\n  NotConditionInternal.prototype.evaluate = function () {\n    return !this.child.evaluate();\n  };\n  return NotConditionInternal;\n}();\nvar RelationalConditionInternal = /** @class */function () {\n  function RelationalConditionInternal() {}\n  RelationalConditionInternal.prototype.evaluate = function () {\n    var needParse = !!this.valueParser;\n    // Call getValue with no `this`.\n    var getValue = this.getValue;\n    var tarValRaw = getValue(this.valueGetterParam);\n    var tarValParsed = needParse ? this.valueParser(tarValRaw) : null;\n    // Relational cond follow \"and\" logic internally.\n    for (var i = 0; i < this.subCondList.length; i++) {\n      if (!this.subCondList[i].evaluate(needParse ? tarValParsed : tarValRaw)) {\n        return false;\n      }\n    }\n    return true;\n  };\n  return RelationalConditionInternal;\n}();\nfunction parseOption(exprOption, getters) {\n  if (exprOption === true || exprOption === false) {\n    var cond = new ConstConditionInternal();\n    cond.value = exprOption;\n    return cond;\n  }\n  var errMsg = '';\n  if (!isObjectNotArray(exprOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Illegal config. Expect a plain object but actually', exprOption);\n    }\n    throwError(errMsg);\n  }\n  if (exprOption.and) {\n    return parseAndOrOption('and', exprOption, getters);\n  } else if (exprOption.or) {\n    return parseAndOrOption('or', exprOption, getters);\n  } else if (exprOption.not) {\n    return parseNotOption(exprOption, getters);\n  }\n  return parseRelationalOption(exprOption, getters);\n}\nfunction parseAndOrOption(op, exprOption, getters) {\n  var subOptionArr = exprOption[op];\n  var errMsg = '';\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"and\"/\"or\" condition should only be `' + op + ': [...]` and must not be empty array.', 'Illegal condition:', exprOption);\n  }\n  if (!isArray(subOptionArr)) {\n    throwError(errMsg);\n  }\n  if (!subOptionArr.length) {\n    throwError(errMsg);\n  }\n  var cond = op === 'and' ? new AndConditionInternal() : new OrConditionInternal();\n  cond.children = map(subOptionArr, function (subOption) {\n    return parseOption(subOption, getters);\n  });\n  if (!cond.children.length) {\n    throwError(errMsg);\n  }\n  return cond;\n}\nfunction parseNotOption(exprOption, getters) {\n  var subOption = exprOption.not;\n  var errMsg = '';\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"not\" condition should only be `not: {}`.', 'Illegal condition:', exprOption);\n  }\n  if (!isObjectNotArray(subOption)) {\n    throwError(errMsg);\n  }\n  var cond = new NotConditionInternal();\n  cond.child = parseOption(subOption, getters);\n  if (!cond.child) {\n    throwError(errMsg);\n  }\n  return cond;\n}\nfunction parseRelationalOption(exprOption, getters) {\n  var errMsg = '';\n  var valueGetterParam = getters.prepareGetValue(exprOption);\n  var subCondList = [];\n  var exprKeys = keys(exprOption);\n  var parserName = exprOption.parser;\n  var valueParser = parserName ? getRawValueParser(parserName) : null;\n  for (var i = 0; i < exprKeys.length; i++) {\n    var keyRaw = exprKeys[i];\n    if (keyRaw === 'parser' || getters.valueGetterAttrMap.get(keyRaw)) {\n      continue;\n    }\n    var op = hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP, keyRaw) ? RELATIONAL_EXPRESSION_OP_ALIAS_MAP[keyRaw] : keyRaw;\n    var condValueRaw = exprOption[keyRaw];\n    var condValueParsed = valueParser ? valueParser(condValueRaw) : condValueRaw;\n    var evaluator = createFilterComparator(op, condValueParsed) || op === 'reg' && new RegExpEvaluator(condValueParsed);\n    if (!evaluator) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal relational operation: \"' + keyRaw + '\" in condition:', exprOption);\n      }\n      throwError(errMsg);\n    }\n    subCondList.push(evaluator);\n  }\n  if (!subCondList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Relational condition must have at least one operator.', 'Illegal condition:', exprOption);\n    }\n    // No relational operator always disabled in case of dangers result.\n    throwError(errMsg);\n  }\n  var cond = new RelationalConditionInternal();\n  cond.valueGetterParam = valueGetterParam;\n  cond.valueParser = valueParser;\n  cond.getValue = getters.getValue;\n  cond.subCondList = subCondList;\n  return cond;\n}\nfunction isObjectNotArray(val) {\n  return isObject(val) && !isArrayLike(val);\n}\nvar ConditionalExpressionParsed = /** @class */function () {\n  function ConditionalExpressionParsed(exprOption, getters) {\n    this._cond = parseOption(exprOption, getters);\n  }\n  ConditionalExpressionParsed.prototype.evaluate = function () {\n    return this._cond.evaluate();\n  };\n  return ConditionalExpressionParsed;\n}();\n;\nexport function parseConditionalExpression(exprOption, getters) {\n  return new ConditionalExpressionParsed(exprOption, getters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { separateMorph, combineMorph, morphPath, isCombineMorphing } from 'zrender/lib/tool/morphPath.js';\nimport { Path } from '../util/graphic.js';\nimport { defaults, isArray } from 'zrender/lib/core/util.js';\nimport { getAnimationConfig } from './basicTransition.js';\nimport { clonePath } from 'zrender/lib/tool/path.js';\nfunction isMultiple(elements) {\n  return isArray(elements[0]);\n}\nfunction prepareMorphBatches(one, many) {\n  var batches = [];\n  var batchCount = one.length;\n  for (var i = 0; i < batchCount; i++) {\n    batches.push({\n      one: one[i],\n      many: []\n    });\n  }\n  for (var i = 0; i < many.length; i++) {\n    var len = many[i].length;\n    var k = void 0;\n    for (k = 0; k < len; k++) {\n      batches[k % batchCount].many.push(many[i][k]);\n    }\n  }\n  var off = 0;\n  // If one has more paths than each one of many. average them.\n  for (var i = batchCount - 1; i >= 0; i--) {\n    if (!batches[i].many.length) {\n      var moveFrom = batches[off].many;\n      if (moveFrom.length <= 1) {\n        // Not enough\n        // Start from the first one.\n        if (off) {\n          off = 0;\n        } else {\n          return batches;\n        }\n      }\n      var len = moveFrom.length;\n      var mid = Math.ceil(len / 2);\n      batches[i].many = moveFrom.slice(mid, len);\n      batches[off].many = moveFrom.slice(0, mid);\n      off++;\n    }\n  }\n  return batches;\n}\nvar pathDividers = {\n  clone: function (params) {\n    var ret = [];\n    // Fitting the alpha\n    var approxOpacity = 1 - Math.pow(1 - params.path.style.opacity, 1 / params.count);\n    for (var i = 0; i < params.count; i++) {\n      var cloned = clonePath(params.path);\n      cloned.setStyle('opacity', approxOpacity);\n      ret.push(cloned);\n    }\n    return ret;\n  },\n  // Use the default divider\n  split: null\n};\nexport function applyMorphAnimation(from, to, divideShape, seriesModel, dataIndex, animateOtherProps) {\n  if (!from.length || !to.length) {\n    return;\n  }\n  var updateAnimationCfg = getAnimationConfig('update', seriesModel, dataIndex);\n  if (!(updateAnimationCfg && updateAnimationCfg.duration > 0)) {\n    return;\n  }\n  var animationDelay = seriesModel.getModel('universalTransition').get('delay');\n  var animationCfg = Object.assign({\n    // Need to setToFinal so the further calculation based on the style can be correct.\n    // Like emphasis color.\n    setToFinal: true\n  }, updateAnimationCfg);\n  var many;\n  var one;\n  if (isMultiple(from)) {\n    // manyToOne\n    many = from;\n    one = to;\n  }\n  if (isMultiple(to)) {\n    // oneToMany\n    many = to;\n    one = from;\n  }\n  function morphOneBatch(batch, fromIsMany, animateIndex, animateCount, forceManyOne) {\n    var batchMany = batch.many;\n    var batchOne = batch.one;\n    if (batchMany.length === 1 && !forceManyOne) {\n      // Is one to one\n      var batchFrom = fromIsMany ? batchMany[0] : batchOne;\n      var batchTo = fromIsMany ? batchOne : batchMany[0];\n      if (isCombineMorphing(batchFrom)) {\n        // Keep doing combine animation.\n        morphOneBatch({\n          many: [batchFrom],\n          one: batchTo\n        }, true, animateIndex, animateCount, true);\n      } else {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(animateIndex, animateCount)\n        }, animationCfg) : animationCfg;\n        morphPath(batchFrom, batchTo, individualAnimationCfg);\n        animateOtherProps(batchFrom, batchTo, batchFrom, batchTo, individualAnimationCfg);\n      }\n    } else {\n      var separateAnimationCfg = defaults({\n        dividePath: pathDividers[divideShape],\n        individualDelay: animationDelay && function (idx, count, fromPath, toPath) {\n          return animationDelay(idx + animateIndex, animateCount);\n        }\n      }, animationCfg);\n      var _a = fromIsMany ? combineMorph(batchMany, batchOne, separateAnimationCfg) : separateMorph(batchOne, batchMany, separateAnimationCfg),\n        fromIndividuals = _a.fromIndividuals,\n        toIndividuals = _a.toIndividuals;\n      var count = fromIndividuals.length;\n      for (var k = 0; k < count; k++) {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(k, count)\n        }, animationCfg) : animationCfg;\n        animateOtherProps(fromIndividuals[k], toIndividuals[k], fromIsMany ? batchMany[k] : batch.one, fromIsMany ? batch.one : batchMany[k], individualAnimationCfg);\n      }\n    }\n  }\n  var fromIsMany = many ? many === from\n  // Is one to one. If the path number not match. also needs do merge and separate morphing.\n  : from.length > to.length;\n  var morphBatches = many ? prepareMorphBatches(one, many) : prepareMorphBatches(fromIsMany ? to : from, [fromIsMany ? from : to]);\n  var animateCount = 0;\n  for (var i = 0; i < morphBatches.length; i++) {\n    animateCount += morphBatches[i].many.length;\n  }\n  var animateIndex = 0;\n  for (var i = 0; i < morphBatches.length; i++) {\n    morphOneBatch(morphBatches[i], fromIsMany, animateIndex, animateCount);\n    animateIndex += morphBatches[i].many.length;\n  }\n}\nexport function getPathList(elements) {\n  if (!elements) {\n    return [];\n  }\n  if (isArray(elements)) {\n    var pathList_1 = [];\n    for (var i = 0; i < elements.length; i++) {\n      pathList_1.push(getPathList(elements[i]));\n    }\n    return pathList_1;\n  }\n  var pathList = [];\n  elements.traverse(function (el) {\n    if (el instanceof Path && !el.disableMorphing && !el.invisible && !el.ignore) {\n      pathList.push(el);\n    }\n  });\n  return pathList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Universal transitions that can animate between any shapes(series) and any properties in any amounts.\nimport { SERIES_UNIVERSAL_TRANSITION_PROP } from '../model/Series.js';\nimport { createHashMap, each, map, filter, isArray, extend } from 'zrender/lib/core/util.js';\nimport { applyMorphAnimation, getPathList } from './morphTransitionHelper.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { initProps } from '../util/graphic.js';\nimport DataDiffer from '../data/DataDiffer.js';\nimport { makeInner, normalizeToArray } from '../util/model.js';\nimport { warn } from '../util/log.js';\nimport { getAnimationConfig, getOldStyle } from './basicTransition.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nvar DATA_COUNT_THRESHOLD = 1e4;\nvar TRANSITION_NONE = 0;\nvar TRANSITION_P2C = 1;\nvar TRANSITION_C2P = 2;\n;\nvar getUniversalTransitionGlobalStore = makeInner();\nfunction getDimension(data, visualDimension) {\n  var dimensions = data.dimensions;\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimInfo = data.getDimensionInfo(dimensions[i]);\n    if (dimInfo && dimInfo.otherDims[visualDimension] === 0) {\n      return dimensions[i];\n    }\n  }\n}\n// get value by dimension. (only get value of itemGroupId or childGroupId, so convert it to string)\nfunction getValueByDimension(data, dataIndex, dimension) {\n  var dimInfo = data.getDimensionInfo(dimension);\n  var dimOrdinalMeta = dimInfo && dimInfo.ordinalMeta;\n  if (dimInfo) {\n    var value = data.get(dimInfo.name, dataIndex);\n    if (dimOrdinalMeta) {\n      return dimOrdinalMeta.categories[value] || value + '';\n    }\n    return value + '';\n  }\n}\nfunction getGroupId(data, dataIndex, dataGroupId, isChild) {\n  // try to get groupId from encode\n  var visualDimension = isChild ? 'itemChildGroupId' : 'itemGroupId';\n  var groupIdDim = getDimension(data, visualDimension);\n  if (groupIdDim) {\n    var groupId = getValueByDimension(data, dataIndex, groupIdDim);\n    return groupId;\n  }\n  // try to get groupId from raw data item\n  var rawDataItem = data.getRawDataItem(dataIndex);\n  var property = isChild ? 'childGroupId' : 'groupId';\n  if (rawDataItem && rawDataItem[property]) {\n    return rawDataItem[property] + '';\n  }\n  // fallback\n  if (isChild) {\n    return;\n  }\n  // try to use series.dataGroupId as groupId, otherwise use dataItem's id as groupId\n  return dataGroupId || data.getId(dataIndex);\n}\n// flatten all data items from different serieses into one arrary\nfunction flattenDataDiffItems(list) {\n  var items = [];\n  each(list, function (seriesInfo) {\n    var data = seriesInfo.data;\n    var dataGroupId = seriesInfo.dataGroupId;\n    if (data.count() > DATA_COUNT_THRESHOLD) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Universal transition is disabled on large data > 10k.');\n      }\n      return;\n    }\n    var indices = data.getIndices();\n    for (var dataIndex = 0; dataIndex < indices.length; dataIndex++) {\n      items.push({\n        data: data,\n        groupId: getGroupId(data, dataIndex, dataGroupId, false),\n        childGroupId: getGroupId(data, dataIndex, dataGroupId, true),\n        divide: seriesInfo.divide,\n        dataIndex: dataIndex\n      });\n    }\n  });\n  return items;\n}\nfunction fadeInElement(newEl, newSeries, newIndex) {\n  newEl.traverse(function (el) {\n    if (el instanceof Path) {\n      // TODO use fade in animation for target element.\n      initProps(el, {\n        style: {\n          opacity: 0\n        }\n      }, newSeries, {\n        dataIndex: newIndex,\n        isFrom: true\n      });\n    }\n  });\n}\nfunction removeEl(el) {\n  if (el.parent) {\n    // Bake parent transform to element.\n    // So it can still have proper transform to transition after it's removed.\n    var computedTransform = el.getComputedTransform();\n    el.setLocalTransform(computedTransform);\n    el.parent.remove(el);\n  }\n}\nfunction stopAnimation(el) {\n  el.stopAnimation();\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.stopAnimation();\n    });\n  }\n}\nfunction animateElementStyles(el, dataIndex, seriesModel) {\n  var animationConfig = getAnimationConfig('update', seriesModel, dataIndex);\n  animationConfig && el.traverse(function (child) {\n    if (child instanceof Displayable) {\n      var oldStyle = getOldStyle(child);\n      if (oldStyle) {\n        child.animateFrom({\n          style: oldStyle\n        }, animationConfig);\n      }\n    }\n  });\n}\nfunction isAllIdSame(oldDiffItems, newDiffItems) {\n  var len = oldDiffItems.length;\n  if (len !== newDiffItems.length) {\n    return false;\n  }\n  for (var i = 0; i < len; i++) {\n    var oldItem = oldDiffItems[i];\n    var newItem = newDiffItems[i];\n    if (oldItem.data.getId(oldItem.dataIndex) !== newItem.data.getId(newItem.dataIndex)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction transitionBetween(oldList, newList, api) {\n  var oldDiffItems = flattenDataDiffItems(oldList);\n  var newDiffItems = flattenDataDiffItems(newList);\n  function updateMorphingPathProps(from, to, rawFrom, rawTo, animationCfg) {\n    if (rawFrom || from) {\n      to.animateFrom({\n        style: rawFrom && rawFrom !== from\n        // dividingMethod like clone may override the style(opacity)\n        // So extend it to raw style.\n        ? extend(extend({}, rawFrom.style), from.style) : from.style\n      }, animationCfg);\n    }\n  }\n  var hasMorphAnimation = false;\n  /**\r\n   * With groupId and childGroupId, we can build parent-child relationships between dataItems.\r\n   * However, we should mind the parent-child \"direction\" between old and new options.\r\n   *\r\n   * For example, suppose we have two dataItems from two series.data:\r\n   *\r\n   * dataA: [                          dataB: [\r\n   *   {                                 {\r\n   *     value: 5,                         value: 3,\r\n   *     groupId: 'creatures',             groupId: 'animals',\r\n   *     childGroupId: 'animals'           childGroupId: 'dogs'\r\n   *   },                                },\r\n   *   ...                               ...\r\n   * ]                                 ]\r\n   *\r\n   * where dataA is belong to optionA and dataB is belong to optionB.\r\n   *\r\n   * When we `setOption(optionB)` from optionA, we choose childGroupId of dataItemA and groupId of\r\n   * dataItemB as keys so the two keys are matched (both are 'animals'), then universalTransition\r\n   * will work. This derection is \"parent -> child\".\r\n   *\r\n   * If we `setOption(optionA)` from optionB, we also choose groupId of dataItemB and childGroupId\r\n   * of dataItemA as keys and universalTransition will work. This derection is \"child -> parent\".\r\n   *\r\n   * If there is no childGroupId specified, which means no multiLevelDrillDown/Up is needed and no\r\n   * parent-child relationship exists. This direction is \"none\".\r\n   *\r\n   * So we need to know whether to use groupId or childGroupId as the key when we call the keyGetter\r\n   * functions. Thus, we need to decide the direction first.\r\n   *\r\n   * The rule is:\r\n   *\r\n   * if (all childGroupIds in oldDiffItems and all groupIds in newDiffItems have common value) {\r\n   *   direction = 'parent -> child';\r\n   * } else if (all groupIds in oldDiffItems and all childGroupIds in newDiffItems have common value) {\r\n   *   direction = 'child -> parent';\r\n   * } else {\r\n   *   direction = 'none';\r\n   * }\r\n   */\n  var direction = TRANSITION_NONE;\n  // find all groupIds and childGroupIds from oldDiffItems\n  var oldGroupIds = createHashMap();\n  var oldChildGroupIds = createHashMap();\n  oldDiffItems.forEach(function (item) {\n    item.groupId && oldGroupIds.set(item.groupId, true);\n    item.childGroupId && oldChildGroupIds.set(item.childGroupId, true);\n  });\n  // traverse newDiffItems and decide the direction according to the rule\n  for (var i = 0; i < newDiffItems.length; i++) {\n    var newGroupId = newDiffItems[i].groupId;\n    if (oldChildGroupIds.get(newGroupId)) {\n      direction = TRANSITION_P2C;\n      break;\n    }\n    var newChildGroupId = newDiffItems[i].childGroupId;\n    if (newChildGroupId && oldGroupIds.get(newChildGroupId)) {\n      direction = TRANSITION_C2P;\n      break;\n    }\n  }\n  function createKeyGetter(isOld, onlyGetId) {\n    return function (diffItem) {\n      var data = diffItem.data;\n      var dataIndex = diffItem.dataIndex;\n      // TODO if specified dim\n      if (onlyGetId) {\n        return data.getId(dataIndex);\n      }\n      if (isOld) {\n        return direction === TRANSITION_P2C ? diffItem.childGroupId : diffItem.groupId;\n      } else {\n        return direction === TRANSITION_C2P ? diffItem.childGroupId : diffItem.groupId;\n      }\n    };\n  }\n  // Use id if it's very likely to be an one to one animation\n  // It's more robust than groupId\n  // TODO Check if key dimension is specified.\n  var useId = isAllIdSame(oldDiffItems, newDiffItems);\n  var isElementStillInChart = {};\n  if (!useId) {\n    // We may have different diff strategy with basicTransition if we use other dimension as key.\n    // If so, we can't simply check if oldEl is same with newEl. We need a map to check if oldEl is still being used in the new chart.\n    // We can't use the elements that already being morphed. Let it keep it's original basic transition.\n    for (var i = 0; i < newDiffItems.length; i++) {\n      var newItem = newDiffItems[i];\n      var el = newItem.data.getItemGraphicEl(newItem.dataIndex);\n      if (el) {\n        isElementStillInChart[el.id] = true;\n      }\n    }\n  }\n  function updateOneToOne(newIndex, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var newItem = newDiffItems[newIndex];\n    var newSeries = newItem.data.hostModel;\n    // TODO Mark this elements is morphed and don't morph them anymore\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex);\n    var newEl = newItem.data.getItemGraphicEl(newItem.dataIndex);\n    // Can't handle same elements.\n    if (oldEl === newEl) {\n      newEl && animateElementStyles(newEl, newItem.dataIndex, newSeries);\n      return;\n    }\n    if (\n    // We can't use the elements that already being morphed\n    oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n    if (newEl) {\n      // TODO: If keep animating the group in case\n      // some of the elements don't want to be morphed.\n      // TODO Label?\n      stopAnimation(newEl);\n      if (oldEl) {\n        stopAnimation(oldEl);\n        // If old element is doing leaving animation. stop it and remove it immediately.\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newIndex);\n      }\n    }\n    // else keep oldEl leaving animation.\n  }\n  new DataDiffer(oldDiffItems, newDiffItems, createKeyGetter(true, useId), createKeyGetter(false, useId), null, 'multiple').update(updateOneToOne).updateManyToOne(function (newIndex, oldIndices) {\n    var newItem = newDiffItems[newIndex];\n    var newData = newItem.data;\n    var newSeries = newData.hostModel;\n    var newEl = newData.getItemGraphicEl(newItem.dataIndex);\n    var oldElsList = filter(map(oldIndices, function (idx) {\n      return oldDiffItems[idx].data.getItemGraphicEl(oldDiffItems[idx].dataIndex);\n    }), function (oldEl) {\n      return oldEl && oldEl !== newEl && !isElementStillInChart[oldEl.id];\n    });\n    if (newEl) {\n      stopAnimation(newEl);\n      if (oldElsList.length) {\n        // If old element is doing leaving animation. stop it and remove it immediately.\n        each(oldElsList, function (oldEl) {\n          stopAnimation(oldEl);\n          removeEl(oldEl);\n        });\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldElsList), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newItem.dataIndex);\n      }\n    }\n    // else keep oldEl leaving animation.\n  }).updateOneToMany(function (newIndices, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex);\n    // We can't use the elements that already being morphed\n    if (oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n    var newElsList = filter(map(newIndices, function (idx) {\n      return newDiffItems[idx].data.getItemGraphicEl(newDiffItems[idx].dataIndex);\n    }), function (el) {\n      return el && el !== oldEl;\n    });\n    var newSeris = newDiffItems[newIndices[0]].data.hostModel;\n    if (newElsList.length) {\n      each(newElsList, function (newEl) {\n        return stopAnimation(newEl);\n      });\n      if (oldEl) {\n        stopAnimation(oldEl);\n        // If old element is doing leaving animation. stop it and remove it immediately.\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newElsList), oldItem.divide,\n        // Use divide on old.\n        newSeris, newIndices[0], updateMorphingPathProps);\n      } else {\n        each(newElsList, function (newEl) {\n          return fadeInElement(newEl, newSeris, newIndices[0]);\n        });\n      }\n    }\n    // else keep oldEl leaving animation.\n  }).updateManyToMany(function (newIndices, oldIndices) {\n    // If two data are same and both have groupId.\n    // Normally they should be diff by id.\n    new DataDiffer(oldIndices, newIndices, function (rawIdx) {\n      return oldDiffItems[rawIdx].data.getId(oldDiffItems[rawIdx].dataIndex);\n    }, function (rawIdx) {\n      return newDiffItems[rawIdx].data.getId(newDiffItems[rawIdx].dataIndex);\n    }).update(function (newIndex, oldIndex) {\n      // Use the original index\n      updateOneToOne(newIndices[newIndex], oldIndices[oldIndex]);\n    }).execute();\n  }).execute();\n  if (hasMorphAnimation) {\n    each(newList, function (_a) {\n      var data = _a.data;\n      var seriesModel = data.hostModel;\n      var view = seriesModel && api.getViewOfSeriesModel(seriesModel);\n      var animationCfg = getAnimationConfig('update', seriesModel, 0); // use 0 index.\n      if (view && seriesModel.isAnimationEnabled() && animationCfg && animationCfg.duration > 0) {\n        view.group.traverse(function (el) {\n          if (el instanceof Path && !el.animators.length) {\n            // We can't accept there still exists element that has no animation\n            // if universalTransition is enabled\n            el.animateFrom({\n              style: {\n                opacity: 0\n              }\n            }, animationCfg);\n          }\n        });\n      }\n    });\n  }\n}\nfunction getSeriesTransitionKey(series) {\n  var seriesKey = series.getModel('universalTransition').get('seriesKey');\n  if (!seriesKey) {\n    // Use series id by default.\n    return series.id;\n  }\n  return seriesKey;\n}\nfunction convertArraySeriesKeyToString(seriesKey) {\n  if (isArray(seriesKey)) {\n    // Order independent.\n    return seriesKey.sort().join(',');\n  }\n  return seriesKey;\n}\nfunction getDivideShapeFromData(data) {\n  if (data.hostModel) {\n    return data.hostModel.getModel('universalTransition').get('divideShape');\n  }\n}\nfunction findTransitionSeriesBatches(globalStore, params) {\n  var updateBatches = createHashMap();\n  var oldDataMap = createHashMap();\n  // Map that only store key in array seriesKey.\n  // Which is used to query the old data when transition from one to multiple series.\n  var oldDataMapForSplit = createHashMap();\n  each(globalStore.oldSeries, function (series, idx) {\n    var oldDataGroupId = globalStore.oldDataGroupIds[idx];\n    var oldData = globalStore.oldData[idx];\n    var transitionKey = getSeriesTransitionKey(series);\n    var transitionKeyStr = convertArraySeriesKeyToString(transitionKey);\n    oldDataMap.set(transitionKeyStr, {\n      dataGroupId: oldDataGroupId,\n      data: oldData\n    });\n    if (isArray(transitionKey)) {\n      // Same key can't in different array seriesKey.\n      each(transitionKey, function (key) {\n        oldDataMapForSplit.set(key, {\n          key: transitionKeyStr,\n          dataGroupId: oldDataGroupId,\n          data: oldData\n        });\n      });\n    }\n  });\n  function checkTransitionSeriesKeyDuplicated(transitionKeyStr) {\n    if (updateBatches.get(transitionKeyStr)) {\n      warn(\"Duplicated seriesKey in universalTransition \" + transitionKeyStr);\n    }\n  }\n  each(params.updatedSeries, function (series) {\n    if (series.isUniversalTransitionEnabled() && series.isAnimationEnabled()) {\n      var newDataGroupId = series.get('dataGroupId');\n      var newData = series.getData();\n      var transitionKey = getSeriesTransitionKey(series);\n      var transitionKeyStr = convertArraySeriesKeyToString(transitionKey);\n      // Only transition between series with same id.\n      var oldData = oldDataMap.get(transitionKeyStr);\n      // string transition key is the best match.\n      if (oldData) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n        }\n        // TODO check if data is same?\n        updateBatches.set(transitionKeyStr, {\n          oldSeries: [{\n            dataGroupId: oldData.dataGroupId,\n            divide: getDivideShapeFromData(oldData.data),\n            data: oldData.data\n          }],\n          newSeries: [{\n            dataGroupId: newDataGroupId,\n            divide: getDivideShapeFromData(newData),\n            data: newData\n          }]\n        });\n      } else {\n        // Transition from multiple series.\n        // e.g. 'female', 'male' -> ['female', 'male']\n        if (isArray(transitionKey)) {\n          if (process.env.NODE_ENV !== 'production') {\n            checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n          }\n          var oldSeries_1 = [];\n          each(transitionKey, function (key) {\n            var oldData = oldDataMap.get(key);\n            if (oldData.data) {\n              oldSeries_1.push({\n                dataGroupId: oldData.dataGroupId,\n                divide: getDivideShapeFromData(oldData.data),\n                data: oldData.data\n              });\n            }\n          });\n          if (oldSeries_1.length) {\n            updateBatches.set(transitionKeyStr, {\n              oldSeries: oldSeries_1,\n              newSeries: [{\n                dataGroupId: newDataGroupId,\n                data: newData,\n                divide: getDivideShapeFromData(newData)\n              }]\n            });\n          }\n        } else {\n          // Try transition to multiple series.\n          // e.g. ['female', 'male'] -> 'female', 'male'\n          var oldData_1 = oldDataMapForSplit.get(transitionKey);\n          if (oldData_1) {\n            var batch = updateBatches.get(oldData_1.key);\n            if (!batch) {\n              batch = {\n                oldSeries: [{\n                  dataGroupId: oldData_1.dataGroupId,\n                  data: oldData_1.data,\n                  divide: getDivideShapeFromData(oldData_1.data)\n                }],\n                newSeries: []\n              };\n              updateBatches.set(oldData_1.key, batch);\n            }\n            batch.newSeries.push({\n              dataGroupId: newDataGroupId,\n              data: newData,\n              divide: getDivideShapeFromData(newData)\n            });\n          }\n        }\n      }\n    }\n  });\n  return updateBatches;\n}\nfunction querySeries(series, finder) {\n  for (var i = 0; i < series.length; i++) {\n    var found = finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id;\n    if (found) {\n      return i;\n    }\n  }\n}\nfunction transitionSeriesFromOpt(transitionOpt, globalStore, params, api) {\n  var from = [];\n  var to = [];\n  each(normalizeToArray(transitionOpt.from), function (finder) {\n    var idx = querySeries(globalStore.oldSeries, finder);\n    if (idx >= 0) {\n      from.push({\n        dataGroupId: globalStore.oldDataGroupIds[idx],\n        data: globalStore.oldData[idx],\n        // TODO can specify divideShape in transition.\n        divide: getDivideShapeFromData(globalStore.oldData[idx]),\n        groupIdDim: finder.dimension\n      });\n    }\n  });\n  each(normalizeToArray(transitionOpt.to), function (finder) {\n    var idx = querySeries(params.updatedSeries, finder);\n    if (idx >= 0) {\n      var data = params.updatedSeries[idx].getData();\n      to.push({\n        dataGroupId: globalStore.oldDataGroupIds[idx],\n        data: data,\n        divide: getDivideShapeFromData(data),\n        groupIdDim: finder.dimension\n      });\n    }\n  });\n  if (from.length > 0 && to.length > 0) {\n    transitionBetween(from, to, api);\n  }\n}\nexport function installUniversalTransition(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecMOdel, api, params) {\n    each(normalizeToArray(params.seriesTransition), function (transOpt) {\n      each(normalizeToArray(transOpt.to), function (finder) {\n        var series = params.updatedSeries;\n        for (var i = 0; i < series.length; i++) {\n          if (finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id) {\n            series[i][SERIES_UNIVERSAL_TRANSITION_PROP] = true;\n          }\n        }\n      });\n    });\n  });\n  registers.registerUpdateLifecycle('series:transition', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var globalStore = getUniversalTransitionGlobalStore(api);\n    // TODO multiple to multiple series.\n    if (globalStore.oldSeries && params.updatedSeries && params.optionChanged) {\n      // TODO transitionOpt was used in an old implementation and can be removed now\n      // Use give transition config if its' give;\n      var transitionOpt = params.seriesTransition;\n      if (transitionOpt) {\n        each(normalizeToArray(transitionOpt), function (opt) {\n          transitionSeriesFromOpt(opt, globalStore, params, api);\n        });\n      } else {\n        // Else guess from series based on transition series key.\n        var updateBatches_1 = findTransitionSeriesBatches(globalStore, params);\n        each(updateBatches_1.keys(), function (key) {\n          var batch = updateBatches_1.get(key);\n          transitionBetween(batch.oldSeries, batch.newSeries, api);\n        });\n      }\n      // Reset\n      each(params.updatedSeries, function (series) {\n        // Reset;\n        if (series[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n          series[SERIES_UNIVERSAL_TRANSITION_PROP] = false;\n        }\n      });\n    }\n    // Save all series of current update. Not only the updated one.\n    var allSeries = ecModel.getSeries();\n    var savedSeries = globalStore.oldSeries = [];\n    var savedDataGroupIds = globalStore.oldDataGroupIds = [];\n    var savedData = globalStore.oldData = [];\n    for (var i = 0; i < allSeries.length; i++) {\n      var data = allSeries[i].getData();\n      // Only save the data that can have transition.\n      // Avoid large data costing too much extra memory\n      if (data.count() < DATA_COUNT_THRESHOLD) {\n        savedSeries.push(allSeries[i]);\n        savedDataGroupIds.push(allSeries[i].get('dataGroupId'));\n        savedData.push(data);\n      }\n    }\n  });\n}"],"names":["RADIAN_EPSILON","linearMap","val","domain","range","clamp","d0","d1","r0","r1","subDomain","subRange","parsePercent","percent","all","zrUtil.isString","str","replace","match","parseFloat","NaN","round","x","precision","returnStr","Math","min","max","toFixed","asc","arr","sort","a","b","getPrecision","isNaN","e","i","toString","toLowerCase","eIndex","indexOf","exp","slice","significandPartLen","length","dotIndex","decimalPartLen","getPrecisionSafe","getPixelPrecision","dataExtent","pixelExtent","log","LN10","dataQuantity","floor","sizeQuantity","abs","isFinite","getPercentSeats","valueList","sum","zrUtil.reduce","acc","digits","pow","votesPerQuota","zrUtil.map","targetSeats","seats","votes","currentSum","remainder","idx","Number","NEGATIVE_INFINITY","maxId","len","seat","addSafe","val0","val1","maxPrecision","MAX_SAFE_INTEGER","remRadian","radian","pi2","PI","isRadianAroundZero","TIME_REG","parseDate","value","Date","exec","hour","toUpperCase","UTC","substring","quantityExponent","nice","exponent","exp10","f","quantile","ascArr","p","H","h","v","reformIntervals","list","littleThan","curr","Infinity","currClose","interval","close_1","close","lg","splice","numericToNumber","valFloat","isNumeric","getRandomIdBase","random","getGreatestCommonDividor","getLeastCommonMultiple","throwError","msg","Error","interpolateNumber","p0","p1","DUMMY_COMPONENT_NAME_PREFIX","INTERNAL_COMPONENT_ID_PREFIX","normalizeToArray","Array","defaultEmphasis","opt","key","subOpts","emphasis","subOptName","hasOwnProperty","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isObject","isArray","isDataItemOption","mappingToExists","existings","newCmptOptions","mode","isNormalMergeMode","isReplaceMergeMode","isReplaceAllMode","existingIdIdxMap","createHashMap","each","cmptOption","index","mapResult","idMap","result","existing","id","set","push","isComponentIdInternal","newOption","keyInfo","brandNew","prepareResult","optionId","makeComparableKey","existingIdx","get","resultItem","assert","mappingById","name","keyExistAndEqual","mappingByName","nextIdx","mappingByIndex","mappingInReplaceAllMode","item","idNum","attr","obj1","obj2","key1","convertOptionIdName","key2","idOrName","defaultValue","isString","isNumber","isStringSafe","isNameSpecified","componentModel","makeInternalComponentId","idSuffix","compressBatches","batchA","batchB","mapA","mapB","makeMap","mapToArray","sourceBatch","map","otherMap","seriesId","dataIndices","dataIndex","otherDataIndices","j","lenj","isData","queryDataIndex","data","payload","dataIndexInside","indexOfRawIndex","indexOfName","makeInner","innerUniqueIndex","hostObj","parseFinder","ecModel","finderInput","_a","preParseFinder","mainTypeSpecified","queryOptionMap","others","defaultMainType","queryOption","mainType","queryResult","queryReferringComponents","useDefault","enableAll","enableNone","models","finder","obj","parsedKey","queryType","includeMainTypes","SINGLE_REFERRING","MULTIPLE_REFERRING","userOption","indexOption","idOption","nameOption","specified","firstCmpt","getComponent","queryComponents","setAttribute","dom","getTooltipRenderMode","renderModeOption","env","domSupported","groupData","array","getKey","buckets","keys","interpolateRawValues","sourceValue","targetValue","isAutoPrecision","interpolated","leftArr","rightArr","length_1","info","getDimensionInfo","type","leftVal","rightVal","IS_CONTAINER","IS_EXTENDED_CLASS","parseClassType","componentType","ret","main","sub","typeArr","split","enableClassExtend","rootClz","mandatoryMethods","$constructor","extend","proto","ExtendedClass","fn","superClass","this","zrUtil.isFunction","test","Function","prototype","call","_super","class_1","apply","arguments","__extends","zrUtil.inherits","zrUtil.extend","superCall","superApply","mountExtend","SubClz","SupperClz","classBase","context","methodName","args","_i","enableClassManagement","target","storage","registerClass","clz","componentFullType","zrUtil.assert","componentTypeInfo","container","makeContainer","getClass","subType","throwWhenNotFound","getClassesByMainType","zrUtil.each","o","hasClass","getAllClassMainTypes","types","hasSubTypes","makeStyleMapper","properties","ignoreParent","model","excludes","includes","style","propName","zrUtil.indexOf","getShallow","getAreaStyle","AreaStyleMixin","getECData","setCommonECData","seriesIndex","dataType","dataIdx","el","ecData","ssrType","traverse","child","childECData","_highlightNextDigit","_highlightKeyMap","getSavedStates","getComponentStates","HOVER_STATE_BLUR","SPECIAL_STATES","DISPLAY_STATES","Z2_EMPHASIS_LIFT","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","hasFillOrStroke","fillOrStroke","doChangeHoverState","stateName","hoverStateEnum","onHoverStateChange","hoverState","singleEnterEmphasis","singleLeaveEmphasis","singleEnterBlur","singleLeaveBlur","singleEnterSelect","selected","singleLeaveSelect","updateElementState","updater","commonParam","traverseUpdateState","isGroup","setStatesFlag","elementStateProxy","targetStates","state","states","hasSelect","cloned","Path","store","fromFill","selectFill","normalFill","fromStroke","selectStroke","normalStroke","emphasisStyle","fill","liftColor","stroke","z2","z2EmphasisLift","createEmphasisDefaultState","hasBlur","currentStates","currentOpacity","opacity","fromState","props","toStateName","animators","animator","__fromStateTransition","targetName","saveTo","getFromStateStyle","blurStyle","createBlurDefaultState","z2SelectLift","createSelectDefaultState","setDefaultStateProxy","stateProxy","textContent","getTextContent","textGuide","getTextGuideLine","enterEmphasisWhenMouseOver","shouldSilent","__highByOuter","leaveEmphasisWhenMouseOut","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","__highDownSilentOnTouch","zrByTouch","allLeaveBlur","api","getModel","leaveBlurredSeries","allComponentViews","eachComponent","componentStates","isSeries","view","getViewOfSeriesModel","getViewOfComponentModel","isBlured","group","toggleBlurSeries","blurSeries","targetSeriesIndex","focus","blurScope","leaveBlurOfIndices","itemEl","getItemGraphicEl","targetSeriesModel","getSeriesByIndex","targetCoordSys","coordinateSystem","master","blurredSeries","eachSeries","seriesModel","sameSeries","coordSys","isArrayLike","getData","dataTypes","d","blurComponent","componentMainType","componentIndex","focusBlurEnabled","findComponentHighDownDispatchers","focusSelf","dispatchers","findHighDownDispatchers","updateSeriesElementSelection","allData","getAllData","eachItemGraphicEl","isSelected","getAllSelectedIndices","getSelectedDataIndices","enableHoverEmphasis","setAsHighDownDispatcher","enableHoverFocus","toggleHoverEmphasis","isDisabled","disableHoverEmphasis","OTHER_STATES","defaultStyleGetterMap","itemStyle","lineStyle","areaStyle","setStatesStylesFromModel","itemModel","styleType","getter","ensureState","asDispatcher","disable","extendedEl","highDownSilentOnTouch","__highDownDispatcher","isHighDownDispatcher","enableComponentHighDownFeatures","componentHighDownName","isSelectChangePayload","payloadType","isHighDownPayload","transitionStore","getAnimationConfig","animationType","animatableModel","extraOpts","extraDelayParams","animationPayload","updatePayload","getUpdatePayload","animation","isUpdate","isAnimationEnabled","duration","easing","delay","retrieve2","isFunction","animateOrSetProps","cb","during","removeOpt","isFrom","isRemove","stopAnimation","animationConfig","getAnimationDelayParams","animateConfig","done","force","setToFinal","scope","animateFrom","animateTo","updateProps","initProps","isElementRemoved","__zr","removeElement","fadeOutDisplayable","removeTextContent","removeTextGuideLine","removeElementWithFadeOut","doRemove","parent","remove","disp","saveOldStyle","oldStyle","mathMax","mathMin","_customShapeMap","extendPathFromString","pathTool.extendFromString","registerShape","ShapeClass","getShapeClass","makePath","pathData","opts","rect","layout","path","pathTool.createFromString","centerGraphic","getBoundingRect","resizePath","makeImage","imageUrl","zrImg","ZRImage","image","y","width","height","onload","img","boundingRect","setStyle","aspect","mergePath","pathTool.mergePath","applyTransform","m","calculateTransform","subPixelOptimizeLine","shape","lineWidth","subPixelOptimizeUtil.subPixelOptimizeLine","subPixelOptimize","subPixelOptimizeUtil.subPixelOptimize","getTransform","ancestor","mat","matrix.identity","matrix.mul","getLocalTransform","transform","invert","Transformable","matrix.invert","vector.applyTransform","transformDirection","direction","hBase","vBase","vertex","isNotGroup","groupTransition","g1","g2","elMap","elMap1","anid","oldEl","newProp","getAnimatableProps","rotation","isPath","clipPointsByRect","points","point","createIcon","iconStr","innerOpts","rectHover","strokeNoScale","defaults","linePolygonIntersect","a1x","a1y","a2x","a2y","p2","lineLineIntersect","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","b1a1x","b1a1y","q","x1","y1","x2","y2","setTooltipConfig","itemTooltipOption","itemName","itemTooltipOptionObj","formatter","formatterParams","$vars","formatterParamsExtra","hasOwn","tooltipConfig","option","content","encodeHTMLContent","traverseElement","stopped","traverseElements","els","Circle","Ellipse","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","targetRect","param","subPixelOptimizeUtil.subPixelOptimizeRect","EMPTY_OBJ","setLabelText","label","labelTexts","text","oldStates","clearStates","normal","useStates","getLabelText","stateModels","interpolatedValue","baseText","labelFetcher","labelDataIndex","labelDimIndex","normalModel","getFormattedLabel","defaultText","statesText","stateModel","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","ZRText","needsCreateText","setTextContent","labelStatesTexts","showNormal","normalStyle","createTextStyle","setTextConfig","createTextConfig","stateObj","stateShow","ignore","textConfig","silent","useStyle","dirty","enableTextSetter","labelInner","getLabelStatesModels","labelName","statesModels","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","richResult","globalTextStyle","richItemNames","richItemNameMap","rich","richKeys","parentModel","getRichItemNames","name_1","richTextStyle","setTokenTextStyle","overflow","margin","setTextStyleCommon","labelPosition","labelRotate","labelDistance","labelOffset","defaultOutsidePosition","position","offset","distance","outsideFill","inheritColor","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","isBlock","inRich","fillColor","strokeColor","color","textBorderColor","textBorderWidth","textBorderType","lineDash","textBorderDashOffset","lineDashOffset","defaultOpacity","verticalAlign","baseline","disableBox","borderType","borderDash","backgroundColor","borderColor","getFont","gTextStyleModel","trim","fontStyle","fontWeight","fontSize","fontFamily","join","setLabelValueAnimation","getDefaultText","prevValue","normalLabelModel","valueAnimation","defaultInterpolatedText","animateLabelValue","textEl","labelInnerStore","currValue","labelText","classAttr","PATH_COLOR","textStyleParams","tmpText","TextStyleMixin","getTextColor","isEmphasis","getTextRect","update","LINE_STYLE_KEY_MAP","getLineStyle","LineStyleMixin","ITEM_STYLE_KEY_MAP","getItemStyle","ItemStyleMixin","Model","init","mergeOption","merge","_doGet","parsePath","hasPath","pathFinal","resolveParentPath","isEmpty","restoreData","clone","Ctor","constructor","node","pathArr","isInstance","mixin","base","getUID","inheritDefaultOption","superOption","subOption","zrUtil.merge","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","document","documentElement","lang","navigator","language","browserLanguage","registerLocale","locale","localeObj","getLocaleModel","time","month","monthAbbr","dayOfWeek","dayOfWeekAbbr","legend","selector","inverse","toolbox","brush","title","polygon","lineX","lineY","keep","clear","dataView","dataZoom","zoom","back","magicType","line","bar","stack","tiled","restore","saveAsImage","series","typeNames","pie","scatter","effectScatter","radar","tree","treemap","boxplot","candlestick","k","heatmap","parallel","lines","graph","sankey","funnel","gauge","pictorialBar","themeRiver","sunburst","custom","chart","aria","general","withTitle","withoutTitle","single","prefix","withName","withoutName","multiple","separator","middle","end","partialData","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","defaultLeveledFormatter","year","day","minute","second","millisecond","none","fullDayFormatter","fullLeveledFormatter","primaryTimeUnits","timeUnits","pad","substr","getPrimaryTimeUnit","timeUnit","isPrimaryTimeUnit","format","template","isUTC","date","numberUtil.parseDate","fullYearGetterName","M","monthGetterName","dateGetterName","hoursGetterName","minutesGetterName","s","secondsGetterName","S","millisecondsGetterName","A","timeModel","getUnitFromValue","isSecond","isMinute","isHour","isDay","isMonth","getUnitValue","unit","zrUtil.isNumber","fullYearSetterName","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","addCommas","parts","toCamelCase","upperCaseFirst","group1","charAt","normalizeCssArray","zrUtil.normalizeCssArray","makeValueReadable","valueType","useUTC","stringToUserReadable","zrUtil.trim","isNumberUserReadable","num","isTypeTime","isValueDate","timeFormat","zrUtil.isStringSafe","numericResult","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","encode","zrUtil.isArray","seriesLen","alias","encodeHTML","formatTplSimple","getTooltipMarker","inOpt","extraCssText","renderMode","markerId","borderRadius","formatTime","getUTC","convertToColorString","defaultColor","zrUtil.isObject","colorStops","windowOpen","link","blank","window","open","opener","location","href","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","gap","maxWidth","maxHeight","currentLineMaxSize","eachChild","nextX","nextY","nextChild","childAt","nextChildRect","moveX","newline","moveY","markRedraw","box","getAvailableSize","positionInfo","containerRect","containerWidth","containerHeight","left","top","right","bottom","formatUtil.normalizeCssArray","getLayoutRect","verticalMargin","horizontalMargin","BoundingRect","positionElement","out","hv","boundingMode","needLocalTransform","layoutRect","zrUtil.defaults","dx","dy","fetchLayoutMode","ins","layoutMode","mergeLayoutParam","targetOption","ignoreSize","hResult","vResult","names","hvIdx","newParams","newValueCount","merged","mergedValueCount","hasProp","hasValue","copy","source","getLayoutParams","copyLayoutParams","zrUtil.curry","inner","ComponentModel","_this","uid","componentUtil.getUID","mergeDefaultAndTheme","layout.fetchLayoutMode","inputPositionParams","layout.getLayoutParams","themeModel","getTheme","getDefaultOption","layout.mergeLayoutParam","optionUpdated","newCptOption","isInit","ctor","isExtendedClass","defaultOption","fields","optList","getReferringComponents","indexKey","idKey","getBoxLayoutParams","boxLayoutModel","getZLevelKey","setZLevel","zlevel","protoInitialize","subTypeDefaulters","registerSubTypeDefaulter","defaulter","determineSubType","componentTypeMain","componentUtil.enableSubTypeDefaulter","entity","dependencyGetter","createDependencyGraphItem","predecessor","successor","topologicalTravel","targetNameList","fullNameList","callback","noEntryList","thisItem","availableDeps","originalDeps","dep","getAvailableDependencies","entryCount","dependentName","thatItem","makeDepndencyGraph","targetNameSet","currComponentType","pop","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","succComponentType","componentUtil.enableTopologicalTravel","deps","concat","dependencies","unshift","platform","decalColor","globalDefault","darkMode","colorBy","gradientColor","decal","decals","dashArrayX","dashArrayY","symbolSize","symbol","blendMode","stateAnimation","animationDuration","animationDurationUpdate","animationEasing","animationEasingUpdate","animationThreshold","progressiveThreshold","progressive","hoverLayerThreshold","VISUAL_DIMENSIONS","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_TYPED_ARRAY","SOURCE_FORMAT_UNKNOWN","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","BE_ORDINAL","innerGlobalModel","makeSeriesEncodeForAxisCoordSys","coordDimensions","datasetModel","querySeriesUpstreamDatasetModel","baseCategoryDimIndex","categoryWayValueDimStart","encodeItemName","encodeSeriesName","datasetMap","seriesLayoutBy","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","categoryWayDim","valueWayDim","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","coordDimName","count","start","seriesName","makeSeriesEncodeForNameBased","dimCount","potentialNameDimIndex","sourceFormat","dimensionsDefine","dim","idxResult","idxRes0","idxRes1","guessRecords","guessResult","doGuessOrdinal","startIndex","isPureNumber","n","fulfilled","nameDimIndex","guessOrdinal","dimIndex","dimName","dimType","isTypedArray","dimDefItem","dataArrayRows","sample","detectValue","row","dataObjectRows","dataOriginal","beStr","internalOptionCreatorMap","registerInternalOptionCreator","creator","reCreateSeriesIndices","assertSeriesInitialized","initBase","innerColor","innerDecal","PaletteMixin","getColorFromPalette","requestNum","defaultPalette","layeredPalette","getFromPalette","clearColorPalette","that","paletteIdx","paletteNameMap","getDecalFromPalette","defaultDecals","scopeFields","palette","palettes","requestColorNum","paletteNum","getNearestPalette","pickedPaletteItem","OPTION_INNER_KEY","GlobalModel","theme","optionManager","_theme","_locale","_optionManager","setOption","optionPreprocessorFuncs","innerOpt","normalizeSetOptionInput","_resetOption","resetOption","optionChanged","baseOption","mountOption","_mergeOption","timelineOption","getTimelineOption","mediaOptions","getMediaOption","mediaOption","componentsMap","_componentsMap","componentsCount","_componentsCount","newCmptTypes","newCmptTypeMap","replaceMergeMainTypeMap","componentOption","mainTypeInReplaceMerge","newCmptOptionList","internalOptionCreator","internalOptions","concatInternalOptions","modelUtil.normalizeToArray","oldCmptList","mergeMode","mappingResult","modelUtil.mappingToExists","componentModelCtor","newCmptOption","existComponent","modelUtil.setComponentTypeToKeyInfo","tooltipExists","optionsByMainType","cmptsByMainType","cmptsCountByMainType","isSeriesType","ComponentModelClass","extraOpt","__requireNewView","_seriesIndices","getOption","optInMainType","realLen","metNonInner","modelUtil.isComponentIdInternal","setUpdatePayload","_payload","cmpt","condition","cmpts","queryByIdOrName","filter","filterBySubType","findComponents","indexAttr","idAttr","nameAttr","res","query","queryCond","ctxForAll_1","cbForAll_1","getSeriesByName","nameStr","modelUtil.convertOptionIdName","oneSeries","getSeriesByType","getSeries","getSeriesCount","rawSeriesIndex","eachRawSeries","eachSeriesByType","eachRawSeriesByType","isSeriesFiltered","_seriesIndicesMap","getCurrentSeriesIndices","filterSeries","newSeriesIndices","seriesRawIdx","componentTypes","components","component","isNotTargetSeries","internalField","seriesIndices","notMergeColorLayer","airaOption","enabled","colorLayer","themeItem","keyMap_1","idOrNameItem","idName_1","replaceMerge","availableMethods","ExtensionAPI","ecInstance","zrUtil.bind","coordinateSystemCreators","CoordinateSystemManager","_coordinateSystems","create","coordinateSystems","getCoordinateSystems","register","QUERY_REG","OptionManager","_timelineOptions","_mediaList","_currentMediaIndices","_api","rawOption","setAsPrimitive","dataset","optionBackup","_optionBackup","newParsedOption","isNew","mediaDefault","mediaList","declaredBaseOption","timelineOnRoot","timeline","timelineOptionsOnRoot","options","mediaOnRoot","media","hasMedia","hasTimeline","singleMedia","doPreprocess","preProcess","timelineOptions","parseRawOption","_newBaseOption","isRecreate","_mediaDefault","timelineModel","getCurrentIndex","indices1","indices2","ecWidth","getWidth","ecHeight","getHeight","indices","applyMediaQuery","realMap","aspectratio","applicable","matched","operator","realAttr","real","expect","compare","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","styleName","normalItemStyleOpt","emphasisItemStyleOpt","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","removeEC3NormalStatus","compatTextStyle","labelOptSingle","modelUtil.TEXT_STYLE_OPTIONS","textPropName","compatEC3CommonStyles","toArr","toObj","globalCompatStyle","isTheme","seriesOpt","markPoint","markLine","markArea","nodes","edgeData","links","edges","zrUtil.isTypedArray","categories","mpData","mlData","breadcrumb","levels","leaves","processSeries","axes","axisName","axisOpt","axisPointer","parallelOpt","parallelAxisDefault","calendar","calendarOpt","radarOpt","nameGap","axisNameGap","geo","geoOpt","regions","regionObj","timelineOpt","toolboxOpt","feature","featureOpt","tooltip","compatLayoutProperties","LAYOUT_PROPERTIES","prop","COMPATITABLE_COMPONENTS","BAR_ITEM_STYLE_MAP","compatBarItemStyle","oldName","newName","compatPieLabel","alignTo","edgeDistance","compatSunburstState","downplay","blur","traverseTree","children","globalBackwardCompat","compatStyle","seriesType","clipOverflow","clip","clockWise","clockwise","hoverOffset","scaleSize","pointerColor","backgroundStyle","highlightPolicy","focusNodeAdjacency","compatGraphFocus","mapType","mapLocation","hoverAnimation","scale","dataRange","visualMap","componentName","calculateStack","stackInfoList","targetStackInfo","idxInStack","resultVal","resultNaN","dims","stackResultDimension","stackedOverDimension","targetData","isStackedByIndex","stackStrategy","modify","v0","v1","byValue","stackedDataRawIndex","stackedDimension","getRawIndex","stackedByDimension","stackedOver","stackInfo","rawIndexOf","getByRawIndex","_b","_c","providerMethods","mountMethods","SourceImpl","dimensionsDetectedCount","metaRawOption","isSourceInstance","createSource","sourceData","thisMetaRawOption","detectSourceFormat","determined","sourceHeader","normalizeDimensionsOption","arrayRowsTravelFirst","firstIndex","objectRowsCollectDimensions","colArr","value0","determineSourceDimensions","dimensions","createSourceFromSeriesDataOption","nameMap","rawItem","displayName","exist","maxLoop","shouldRetrieveDataByName","DefaultDataProvider","sourceParam","dimSize","_source","_data","_offset","_dimSize","getSource","getItem","appendData","newData","clean","pure","persistent","provider","methods","getMethodMapKey","getItemForTypedArray","countForTypedArray","fillStorage","fillStorageForTypedArray","rawItemGetter","getRawSourceItemGetter","bind","rawCounter","getRawSourceDataCounter","extent","dimExtent","appendDataSimply","newCol","oldCol","getItemSimply","rawData","rawSourceItemGetterMap","col","countSimply","rawSourceDataCounterMap","getRawValueSimply","property","rawSourceValueGetterMap","getRawSourceValueGetter","retrieveRawValue","getRawDataItem","getStore","getDimensionIndex","getDimensionProperty","DIMENSION_LABEL_REG","DataFormatMixin","getDataParams","rawValue","getRawValue","rawDataIndex","getName","itemOpt","getItemVisual","userOutput","componentSubType","dimensionNames","fullDimensions","status","extendParams","params","getItemModel","dimensionIndex","origin","dimStr","dimLoose","formatTooltip","multipleSeries","normalizeTooltipFormatResult","markupText","markupFragment","frag","createTask","define","Task","_reset","reset","_plan","plan","_count","_onDirty","onDirty","_dirty","perform","performArgs","planResult","upTask","_upstream","skip","outputData","__pipeline","currentTask","forceFirstProgress","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","modBy","modDataCount","_doReset","step","_dueEnd","_outputDueEnd","_progress","_dueIndex","progress","_doProgress","outputDueEnd","_settedOutputEnd","unfinished","iterator","_callingProgress","next","downstream","_downstream","pipe","downTask","dispose","_disposed","getUpstream","getDownstream","setOutputEnd","current","winCount","it","sStep","sCount","ceil","modNext","sequentialNext","parseDataValue","valueParserMap","number","getRawValueParser","ORDER_COMPARISON_OP_MAP","lt","lval","rval","lte","gt","gte","FilterOrderComparator","op","_opFn","_rvalFloat","evaluate","SortOrderComparator","order","incomparable","isDesc","_resultLT","_incomparable","lvalFloat","rvalFloat","lvalNotNumeric","rvalNotNumeric","lvalIsStr","rvalIsStr","FilterEqualityComparator","isEq","_rval","_isEQ","_rvalTypeof","eqResult","lvalTypeof","createFilterComparator","ExternalSource","getRawData","cloneRawData","cloneAllDimensionInfo","retrieveValue","retrieveValueFromItem","convertValue","rawVal","dimInfo","upstream","isSupportedSourceFormat","dimsByName","externalTransformMap","applySingleDataTransform","transOption","upSourceList","infoForPrint","pipeIndex","transType","externalTransform","extUpSourceList","upSource","internalSource","extSource","sourceHeaderCount","dimDef","dimDefExt","__isBuiltIn","rawValueGetter","createExternalSource","resultList","upstreamList","config","resultIndex","resultMetaRawOption","firstUpSource","defaultDimValueGetters","UNDEFINED","CtorUint32Array","Uint32Array","CtorUint16Array","Uint16Array","CtorInt32Array","Int32Array","CtorFloat64Array","Float64Array","dataCtors","float","int","ordinal","getIndicesCtor","rawCount","getInitialExtent","cloneChunk","originalChunk","prepareStore","dimIdx","append","DataCtor","oldStore","oldLen","newStore","DataStore","_chunks","_rawExtent","_extent","_rawCount","_calcDimNameToIdx","initData","inputDimensions","dimValueGetter","_provider","_indices","_getRawIdxIdentity","defaultGetter","defaultDimValueGetter","_dimValueGetter","_dimensions","_initDataFromProvider","getProvider","ensureCalculationDimension","calcDimNameToIdx","calcDimIdx","collectOrdinalMeta","ordinalMeta","chunk","rawExtents","ordinalOffset","dimRawExtent","parseAndCollect","getOrdinalMeta","appendValues","values","minFillLen","chunks","dimLen","rawExtent","emptyDataItem","sourceIdx","arrayRows","dimNames","dimStorage","dimStore","getValues","dimArr","rawIdx","getSum","getMedian","dimDataArray","sortedDimDataArray","rawIndex","mid","indicesOfNearest","maxDistance","dimData","nearestIndices","minDist","minDiff","nearestIndicesLen","diff","dist","getIndices","newIndices","thisCount","buffer","dim0","_updateGetRawIdx","selectRange","originalCount","storeArr","quickFinished","dimStorage2","min2","max2","val2","dimk","_updateDims","targetChunks","tmpRetValue","dataCount","retValue","rawExtentOnDim","lttbDownSample","valueDimension","rate","maxArea","area","nextRawIndex","sampledIndex","frameSize","currentRawIndex","nextFrameStart","nextFrameEnd","avgX","avgY","frameStart","frameEnd","pointAX","pointAY","firstNaNIndex","countNaN","_getRawIdx","minmaxDownSample","targetStorage","minIndex","minValue","maxIndex","maxValue","thisFrameSize","rawMinIndex","rawMaxIndex","downSample","dimension","sampleValue","sampleIndex","frameValues","sampleFrameIdx","getDataExtent","initialExtent","currEnd","clonedDims","ignoreIndices","clonedDimsMap","reduce","_copyCommonProps","_cloneIndices","getDimValueSimply","objectRows","keyedColumns","original","typedArray","SourceManager","sourceHost","_sourceList","_storeList","_upstreamSignList","_versionSignBase","_sourceHost","_setLocalSource","sourceList","upstreamSignList","_getVersionSign","prepareSource","_isDirty","_createSource","resultSourceList","upSourceMgrList","_getUpstreamSourceManagers","hasUpstream","upSourceMgr","newMetaRawOption","_getSourceMetaRawOption","upMetaRawOption","_applyTransform","upMgrList","transformOption","fromTransformResult","doThrow","upMgr","rawTransOption","pipedTransOption","pipeLen","applyDataTransform","upSrcMgr","sourceIndex","getSharedDataStore","seriesDimRequest","schema","makeStoreSchema","_innerGetDataStore","hash","storeDims","seriesSource","sourceReadKey","storeList","cachedStoreMap","cachedStore","getSourceManager","queryDatasetUpstreamDatasetModels","disableTransformOptionMerge","errMsg","modelUtil.makeInner","getSelectionKey","getId","SERIES_UNIVERSAL_TRANSITION_PROP","SeriesModel","_selectedDataIndicesMap","dataTask","dataTaskCount","dataTaskReset","sourceManager","getInitialData","wrapData","dataBeforeProcessed","autoSeriesName","_initSelectedMapFromData","themeSubType","modelUtil.defaultEmphasis","fillDataTextStyle","newSeriesOption","task","getCurrentTask","getLinkedData","mainData","getLinkedDataAll","setData","getEncode","zrUtil.createHashMap","getColorBy","isColorBySeries","getBaseAxis","defaultSeriesFormatTooltip","ssr","animationEnabled","coordDimToDataDim","coordDim","mapDimensionsAll","getProgressive","getProgressiveThreshold","select","innerDataIndices","_innerSelect","unselect","selectedMap","selectedMode","nameOrId","toggleSelect","tmpArr","selectedDataIndicesMap","nameOrIds","zrUtil.keys","isUniversalTransitionEnabled","universalTransitionOpt","universalTransition","lastDataIndex","hasItemOption","ignoreStyleOnData","hasSymbolVisual","defaultSymbol","visualStyleAccessPath","visualDrawType","modelUtil.isNameSpecified","dataDims","nameArr","dataDim","getSeriesAutoName","cloneShallow","dataTaskProgress","zrUtil.concatArray","CHANGABLE_METHODS","DOWNSAMPLE_METHODS","wrapMethod","onDataChange","newList","scheduler","pipeline","getPipeline","agentStubMap","zrUtil.mixin","ComponentView","Group","render","updateView","updateLayout","updateVisual","seriesModels","isBlur","eachRendered","clazzUtil.enableClassExtend","clazzUtil.enableClassManagement","renderPlanner","createRenderPlanner","ChartView","renderTask","renderTaskPlan","renderTaskReset","highlight","toggleHighlight","removeAll","markUpdateMethod","updateMethod","elSetState","modelUtil.queryDataIndex","highlightKey","getHighlightDigit","progressiveRender","pipelineContext","progressMethodMap","incrementalPrepareRender","incrementalRender","ORIGIN_METHOD","RATE","THROTTLE_TYPE","throttle","debounce","currCall","debounceNextCall","lastCall","lastExec","timer","getTime","cbArgs","thisDelay","thisDebounce","clearTimeout","setTimeout","debounceDelay","createOrUpdate","fnAttr","throttleType","originFn","lastThrottleType","defaultStyleMappers","defaultColorKey","getStyleMapper","stylePath","styleMapper","visualStyleMapper","console","warn","getDefaultColorKey","colorKey","seriesStyleTask","createOnAllSeries","performRawSeries","styleModel","globalStyle","getStyle","decalOption","setVisual","colorCallback","hasAutoColor","colorPalette","dataEach","dataParams","setItemVisual","sharedModel","dataStyleTask","getVisual","existsStyle","ensureUniqueItemVisual","dataColorPaletteTask","overallReset","paletteScopeGroupByType","colorScope","dataAll","idxMap","Scheduler","dataProcessorHandlers","visualHandlers","_stageTaskMap","_dataProcessorHandlers","_visualHandlers","_allHandlers","taskRecord","overallTask","getPerformArgs","_pipelineMap","pCtx","progressiveEnabled","__idxInPipeline","blockIndex","pipelineId","updateStreamModes","dataLen","threshold","large","restorePipelines","pipelineMap","head","tail","preventIncremental","_pipe","prepareStageTasks","stageTaskMap","handler","record","_createSeriesStageTask","_createOverallStageTask","prepareView","__block","performDataProcessorTasks","_performStageTasks","block","performVisualTasks","stageHandlers","needSetDirty","setDirty","dirtyMap","stageHandler","visualType","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","stub","performArgs_1","performSeriesTasks","oldSeriesTaskMap","newSeriesTaskMap","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","overallTaskReset","oldAgentStubMap","newAgentStubMap","overallProgress","shouldOverallTaskDirty","createStub","stubReset","stubOnDirty","agent","wrapStageHandler","detectSeriseType","stubProgress","clearAllVisual","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","legacyFunc","ecModelMock","apiMock","mockMethods","Clz","noop","cond","colorAll","lightTheme","contrastColor","axisCommon","axisLine","splitLine","splitArea","minorSplitLine","crossStyle","pageTextStyle","subtextStyle","iconStyle","brushStyle","handleStyle","moveHandleStyle","fillerColor","dataBackground","selectedDataBackground","controlStyle","dayLabel","monthLabel","yearLabel","timeAxis","logAxis","valueAxis","categoryAxis","axisLabel","detail","color0","borderColor0","show","ECEventProcessor","normalizeQuery","cptQuery","dataQuery","otherQuery","condCptType","suffixes_1","dataKeys_1","reserved","propSuffix","suffixPos","lastIndexOf","eventType","eventInfo","packedEvent","check","filterForExposedEvent","host","propOnHost","afterTrigger","SYMBOL_PROPS_WITH_CB","SYMBOL_PROPS","seriesSymbolTask","legendIcon","symbolOptions","symbolOptionsCb","hasCallback","symbolPropName","symbolKeepAspect","symbolPropsCb","dataSymbolTask","getItemVisualFromData","getVisualFromData","setItemVisualFromData","createLegacyDataSelectAction","ecRegisterAction","getSeriesIndices","eventsMap","dispatchAction","handleSeriesLegacySelectEvents","eventPostfix","ecIns","legacyEventName","isSilent","fromActionPayload","trigger","findEventDispatcher","det","returnFirstMatch","found","__hostTarget","Triangle","graphic.Path","cx","cy","buildPath","moveTo","lineTo","closePath","Diamond","Pin","w","r","angle","asin","cos","tanX","sin","tanY","cpLen","cpLen2","arc","bezierCurveTo","Arrow","ctx","symbolShapeMakers","roundRect","square","size","circle","diamond","pin","arrow","triangle","symbolBuildProxies","graphic.Line","graphic.Rect","graphic.Circle","SymbolClz","symbolType","calculateTextPosition","inBundle","proxySymbol","symbolPathSetColor","symbolStyle","__isEmptyBrush","createSymbol","keepAspect","symbolPath","graphic.makeImage","graphic.makePath","setColor","normalizeSymbolSize","normalizeSymbolOffset","symbolOffset","decalMap","WeakMap","decalCache","LRU","decalKeys","createOrUpdatePatternFromDecal","decalObject","dpr","getDevicePixelRatio","zr","getZr","isSVG","painter","oldPattern","decalOpt","maxTileWidth","maxTileHeight","pattern","repeat","cacheKey","isValidKey","cache","svgElement","normalizeDashArrayX","dash","dashValue_1","dashValue","normalizeDashArrayY","symbolArray","normalizeSymbolArray","lineBlockLengthsX","getLineBlockLengthY","lineBlockLengthY","canvas","platformApi","createCanvas","svgRoot","tag","attrs","pSize","xlen","symbolRepeats","getPatternSize","getContext","clearRect","fillStyle","fillRect","ySum","yId","yIdTotal","xId0","symbolYId","xId1","xId1Total","xSum","top_1","symbolXId","brushSymbol","symbolVNode","renderOneToVNode","brushSingle","brushDecal","put","svgWidth","svgHeight","setPatternnSource","scaleX","scaleY","isAllString","isAllNumber","blockLength","lifecycle","Eventful","implsStore","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","CHART_ITEM","ARIA","DECAL","IN_MAIN_PROCESS_KEY","PENDING_UPDATE","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","createRegisterEventWithLowercaseECharts","method","isDisposed","toLowercaseNameAndCallEventful","createRegisterEventWithLowercaseMessageCenter","prepare","updateDirectly","updateMethods","doConvertPixel","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","renderComponents","renderSeries","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","MessageCenter","messageCenterProto","on","off","ECharts","_chartsViews","_chartsMap","_componentsViews","_pendingActions","themeStorage","_dom","zrender.registerSSRDataGetter","hashMap","_zr","zrender.init","renderer","devicePixelRatio","useDirtyRect","useCoarsePointer","pointerSize","_ssr","_throttledZrFlush","flush","backwardCompat","createLocaleObject","_coordSysMgr","prioritySortFunc","__prio","timsort","visualFuncs","dataProcessorFuncs","_scheduler","_messageCenter","_initEvents","resize","_onframe","updateParams","remainTime","_model","startTime","getDom","isSSR","notMerge","lazyUpdate","transitionOpt","transition","seriesTransition","wakeUp","setTheme","hasGlobalWindow","getRenderedCanvas","renderToCanvas","pixelRatio","renderToSVGString","renderToString","useViewBox","getSvgDataURL","svgSupported","getDisplayList","toDataURL","getDataURL","excludeComponents","excludesComponentViews","self","__viewId","url","getType","getConnectedDataURL","isSvg","groupId","MAX_NUMBER","connectedGroups","left_1","right_1","bottom_1","canvasList_1","dpr_1","instances","getSvgDom","innerHTML","getBoundingClientRect","targetCanvas","zr_1","content_1","getSvgRoot","connectedBackgroundColor","setBackgroundColor","refreshImmediately","add","graphic.Image","convertToPixel","convertFromPixel","containPixel","findResult","modelUtil.parseFinder","containPoint","parsedFinder","messageCenter","MOUSE_EVENT_NAMES","eveName","dataModel","eventData","event","_$eventProcessor","zrEventfulCallAtLast","eventActionMap","actionType","isFromClick","fromAction","modelUtil.setAttribute","DOM_ATTRIBUTE_KEY","_loadingFX","needPrepare","showLoading","cfg","hideLoading","loadingEffects","makeActionFromEvent","eventObj","actions","browser","weChat","updateLabelLayout","updatedSeries","applyElementStates","newStates","updateZ","preventAutoZ","z","doUpdateZ","maxZ2","labelLine","childrenRef","textGuideLineConfig","showAbove","graphic.isElementRemoved","stateTransition","hasState","prevStates","updateStates","stateAnimationModel","enableAnimation","selectState","savePathStates","__dirty","isComponent","viewList","viewMap","__alive","doPrepare","requireNewView","viewId","classType","__id","__model","__ecComponentInfo","excludeSeriesIdMap","excludeSeriesId","modelId","notBlur","focus_1","blurSeriesFromHighlightPayload","dispatcher","toggleSelectionFromPayload","callView","prepareAndUpdate","coordSysMgr","setDarkMode","updateTransform","componentDirtyList","componentView","seriesDirtyMap","chartView","coordSysList","chartsMap","escapeConnect","actionWrap","actionInfo","cptTypeTmp","cptType","payloads","batched","batch","eventObjBatch","isSelectChange","isHighDown","batchItem","action","modelUtil.preParseFinder","newObj","pendingActions","shift","isFinished","handleGlobalMouseOverForHighDown","handleGlobalMouseOutForHighDown","componentZLevels","seriesZLevels","hasSeparateZLevel","zlevelKey","lastSeriesZLevel_1","lastSeriesKey_1","zLevels","allocateZlevels","dirtyList","blend","updateBlend","elCount","worker","preventUsingHoverLayer","hoverLayer","updateHoverLayerStatus","getComponentByElement","modelInfo","updateConnectedChartsStatus","charts","action_1","otherCharts_1","otherChart","echartsProto","one","eventName","wrapped","args2","idBase","existInstance","getAttribute","modelUtil.getAttribute","getInstanceByDom","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerUpdateLifecycle","registerAction","registerVisual","visualTask","registeredTasks","targetList","defaultPriority","__raw","registerLoading","loadingFx","registerTransform","typeParsed","isBuiltIn","hasItemVisual","stackInfoMap","getCalculationInfo","setCalculationInfo","textColor","maskColor","showSpinner","spinnerRadius","graphic.Group","mask","graphic.Text","labelRect","graphic.Arc","startAngle","endAngle","lineCap","animateShape","when","textWidth","setShape","darkTheme","extensions","extensionRegisters","registerPostInit","postInitFunc","registerPostUpdate","postUpdateFunc","registerCoordinateSystem","coordSysCreator","registerLayout","layoutTask","registerMap","mapName","geoJson","specialAreas","registerImpl","impl","registerComponentModel","registerComponentView","ComponentViewClass","registerSeriesModel","SeriesModelClass","registerChartView","ChartViewClass","registerPainter","painterType","PainterCtor","use","ext","singleExt","install","dataIndexMapValueLength","valNumOrArrLengthMoreThan2","defaultKeyGetter","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","diffMode","_old","_new","_oldKeyGetter","_newKeyGetter","_diffModeMultiple","func","_add","_update","updateManyToOne","_updateManyToOne","updateOneToMany","_updateOneToMany","updateManyToMany","_updateManyToMany","_remove","execute","_executeOneToOne","newDataIndexMap","oldDataKeyArr","newDataKeyArr","_initIndexMap","oldKey","newIdxMapVal","newIdxMapValLen","newIdx","_performRestAdd","_executeMultiple","oldDataIndexMap","oldIdxMapVal","oldIdxMapValLen","i_1","newKey","idxMapValLen","keyArr","keyGetterName","cbModeMultiple","idxMapVal","DimensionUserOuput","dimRequest","_encode","_schema","_getFullDimensionNames","_cachedDimNames","makeOutputDimensionNames","getOrCreateEncodeArr","getDimensionTypeByAxis","axisType","SeriesDimensionDefine","otherDims","dimTypeShort","SeriesDataSchema","_dimOmitted","dimensionOmitted","_fullDimCount","fullDimensionCount","_updateDimOmitted","isDimensionOmitted","_dimNameMap","ensureSourceDimNameMap","getSourceDimensionIndex","getSourceDimension","willRetrieveDataByName","makeHashStrict","shouldOmitUnusedDimensions","dimHash","fullDimIdx","seriesDimIdx","seriesDimDef","storeDimIndex","sourceDimDef","isCalculationCoord","appendCalculationDimension","isSeriesDataSchema","createDimNameMap","dataDimNameMap","dimDefItemRaw","userDimName","innerSource","dimNameMap","prepareInvertedIndex","getIdNameFromStore","normalizeDimensions","transferProperties","cloneListForMapAndSample","makeIdFromName","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","SeriesData","dimensionsInput","hostModel","_nameList","_idList","_visual","_layout","_itemVisuals","_itemLayouts","_graphicEls","_approximateExtent","_calculationInfo","TRANSFERABLE_METHODS","assignStoreDimIdx","dimensionInfos","invertedIndicesMap","needsHasOwn","emptyObj","dimInfoInput","dimensionInfo","dimensionName","coordDimIndex","createInvertedIndices","_nameDimIdx","itemId","_idDimIdx","_dimInfos","_initGetDimensionInfo","_invertedIndicesMap","dimIdxToName_1","_dimIdxToName","getDimension","_recognizeDimIndex","_getDimInfo","_getStoreDimIndex","getDimensionsOnCoord","_dimSummary","dataDimsOnCoord","mapDimension","dimensionsSummary","encodeFirstDimNotExtra","_store","nameList","zrUtil.isArrayLike","_nameRepeatCount","_doInit","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutputEncode","dimItem","isExtraCoord","defaultTooltip","otherDim","encodeArr","dataDimIndicesOnCoord","encodeLabel","encodeTooltip","summarizeDimensions","shouldMakeIdFromName","_shouldMakeIdFromName","_updateOrdinalMeta","idList","sharedDataItem","getApproximateExtent","setApproximateExtent","_getCategory","invertedIndices","fCtx","dimIndices","filterSelf","innerRange","mapArray","ctxCompat","otherList","thisList","visual","kvObj","itemVisual","itemVisuals","setLayout","getLayout","getItemLayout","setItemLayout","clearItemLayouts","setItemGraphicEl","injectFunction","originalMethod","__wrappedMethods","zrUtil.slice","zrUtil.clone","nameDimIdx","idDimIdx","nameRepeatCount","nmCnt","prepareSeriesDataSchema","sysDims","coordDimNameMap","optDimCount","sysDimItem","sysDimItemDimsDef","getDimCount","dimensionsCount","omitUnusedDimensions","canOmitUnusedDimensions","isUsingSourceDimensionsDef","encodeDef","encodeDefine","encodeDefaulter","encodeDefMap","indicesMap","getResultItem","dataDimsRaw","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemOtherDims","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","extra","ifNoNameFillWithCoordName","item0","item1","genCoordDimName","duplicationMap","dimOriginalName","removeDuplication","hasKey","CoordSysInfo","coordSysName","coordSysDims","axisMap","categoryAxisMap","getCoordSysInfoBySeries","fetch","fetchers","cartesian2d","xAxisModel","yAxisModel","isCategory","firstCategoryDimIndex","singleAxis","singleAxisModel","polar","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","parallelModel","parallelAxisIndex","axisIndex","axisModel","axisDim","enableDataStack","dimensionDefineList","byIndex","stackedCoordDimension","isLegacyDimensionsInput","stackedByDimInfo","stackedDimInfo","mayStack","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","stackedOverDimensionDefine","stackResultDimensionDefine","isDimensionStacked","stackedDim","getStackedDimension","targetDim","Scale","setting","_setting","getSetting","unionExtent","other","unionExtentFromData","getExtent","setExtent","thisExtent","isInExtentRange","isBlank","_isBlank","setBlank","uidBase","OrdinalMeta","_needCollect","needCollect","_deduplication","deduplication","createByAxisModel","dedplication","getOrdinal","category","_getOrCreateMap","_map","isIntervalOrLogScale","intervalScaleNiceTicks","splitNumber","minInterval","maxInterval","span","intervalPrecision","getIntervalPrecision","niceTickExtent","fixExtent","increaseInterval","contain","normalize","OrdinalScale","_ordinalMeta","parse","rank","scaleHelper.contain","scaleHelper.normalize","_getTickNumber","scaleHelper.scale","getRawOrdinalNumber","getTicks","ticks","getMinorTicks","setSortInfo","infoOrdinalNumbers","ordinalNumbers","ordinalsByTick","_ordinalNumbersByTick","ticksByOrdinal","_ticksByOrdinalNumber","tickNum","allCategoryLen","ordinalNumber","unusedOrdinal","ticksByOrdinalNumber","tickNumber","ordinalNumbersByTick","getLabel","tick","cateogry","calcNiceTicks","calcNiceExtent","roundNumber","numberUtil.round","IntervalScale","_interval","_intervalPrecision","helper.contain","helper.normalize","helper.scale","getInterval","setInterval","_niceExtent","helper.getIntervalPrecision","expandToNicedExtent","lastNiceTick","minorTicks","nextTick","prevTick","minorTicksGroup","minorInterval","minorTick","numberUtil.getPrecision","formatUtil.addCommas","reverse","helper.intervalScaleNiceTicks","expandSize","fixMax","fixMin","setNiceExtent","supportFloat32Array","Float32Array","Float32ArrayCtor","createFloat32Array","arg","STACK_PREFIX","getSeriesStackId","getAxisKey","axis","getLayoutOnAxis","baseAxis","axisKey","bandWidth","getBandWidth","stackId","widthAndOffsets","doCalBarWidthAndOffset","offsetCenter","prepareLayoutBarSeries","isOnCartesian","makeColumnLayout","barSeries","axisMinGaps","axisValues","cnt","valuesInAxis","delta","getValueAxesMinGaps","seriesInfoList","axisExtent","minGap","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","isInLargeMode","barGap","barCategoryGap","columnsMap","seriesInfo","columnsOnAxis","remainedWidth","autoWidthCount","categoryGap","stacks","minWidth","categoryGapPercent","columnCount","barGapPercent","autoWidth","column","finalWidth","lastColumn","widthSum","barWidthAndOffset","columnLayoutInfo","columnOffset","columnWidth","createProgressiveLayout","cartesian","getOtherAxis","valueDimIdx","baseDimIdx","drawBackground","valueDim","stackResultDim","stacked","isValueAxisH","isHorizontal","valueAxisStart","startValue","toGlobalCoord","dataToCoord","getValueAxisStart","isLarge","barMinHeight","stackedDimIdx","largePoints","largeBackgroundPoints","largeDataIndices","coordLayout","getRect","bgSize","idxOffset","baseValue","baseCoord","stackStartValue","coord","dataToPoint","valueAxisHorizontal","TimeScale","settings","getDefaultFormatPrecisionOfInterval","_minLevelUnit","labelFormatter","level","mergedFormatter","inherit","levelId","leveledFormat","innerTicks","bottomUnitName","approxInterval","safeLimit","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","dateTime","notAdd","addLevelTicks","unitName","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","valueA","valueB","dateA","dateB","isSame","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","isUnitValueSame","getFirstTimestampOfUnit","startTick","endTick","getterName","setterName","getMonthInterval","getDateInterval","getHourInterval","getMinutesAndSecondsInterval","getMillisecondsInterval","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","levelTicksRemoveDuplicated","tickValue","targetTickNum","levelsTicksInExtent","maxLevel","getIntervalTicks","_approxInterval","getFullYear","getMonth","getDate","approxTickNum","scaleIntervalsLen","scaleIntervals","lo","hi","bisect","daysInMonth","isMinutes","numberUtil.nice","outDate","scaleProto","intervalScaleProto","roundingErrorFix","mathFloor","mathCeil","mathPow","mathLog","LogScale","_originalScale","originalScale","originalExtent","powVal","_fixMin","fixRoundingError","_fixMax","niceExtent","originalVal","ScaleRawExtentInfo","_prepareParams","_dataMin","_dataMax","isOrdinal","_isOrdinal","_needCrossZero","getNeedCrossZero","axisMinValue","modelMinRaw","_modelMinRaw","_modelMinNum","parseAxisModelMinMax","modelMaxRaw","_modelMaxRaw","_modelMaxNum","_axisDataLen","getCategories","boundaryGap","boundaryGapArr","_boundaryGapInner","calculate","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","eqNaN","determinedMin","_determinedMin","determinedMax","_determinedMax","modifyDataMinMax","minMaxName","DATA_MIN_MAX_ATTR","setDeterminedMinMax","DETERMINED_MIN_MAX_ATTR","freeze","frozen","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","scaleType","rawExtentResult","barSeriesModels","isBaseAxisAndHasBarSeries_1","adjustedScale","axisLength","barsOnCurrentAxis","retrieveColumnLayout","minOverflow","maxOverflow","totalOverFlow","oldRange","overflowBuffer","adjustScaleForOverflow","niceScaleExtent","inModel","extentInfo","isIntervalOrTime","createScaleByModel","makeLabelFormatter","getLabelModel","categoryTickStart","getAxisRawValue","rotateTextRect","textRect","rotate","rotateRadians","beforeWidth","beforeHeight","afterWidth","afterHeight","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","unionAxisExtentFromData","seriesExtent","AxisModelCommonMixin","getCoordSysModel","TMP_TRANSFORM","transformPoints","vec2.applyTransform","updateBBoxFromPoints","projection","project","vec2.min","vec2.max","Region","setCenter","center","_center","getCenter","calcCenter","GeoJSONPolygonGeometry","exterior","interiors","GeoJSONLineStringGeometry","GeoJSONRegion","geometries","cp","largestGeo","largestGeoSize","signedArea","x0","y0","centroid","_rect","loopGeo","polygonContain.contain","transformTo","interior","newRegion","GeoSVGRegion","elOnlyForCalculate","_elOnlyForCalculate","isGeoSVGGraphicRoot","decodeRings","rings","encodeOffsets","encodeScale","c","decodeRing","coordinate","prevX","prevY","charCodeAt","parseGeoJSON","nameProperty","json","UTF8Encoding","jsonCompressed","UTF8Scale","features","geometry","coordinates","decode","zrUtil.filter","featureObj","region","tickValuesToNumbers","nums","createAxisLabels","labelFormatter_1","extent_1","tickNumbers","labels","numval","formattedLabel","rawLabel","labelModel","makeCategoryLabelsActually","labelCategoryInterval","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","tickModel","getTickModel","extent_2","tickCategoryInterval","ticksCache","getListCache","optionTickInterval","listCacheGet","makeLabelsByCustomizedCategoryInterval","labelsResult","labelItem","makeLabelsByNumericCategoryInterval","listCacheSet","makeCategoryTicks","numericLabelInterval","labelsCache","optionLabelInterval","autoInterval","calculateCategoryInterval","makeAutoCategoryInterval","categoryInterval","onlyTick","ordinalScale","ordinalExtent","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","onBand","containData","fixExtentWithBands","coordToData","t","pointToData","getTicksCoords","ticksCoords","tickVal","alignWithLabel","ticksLen","last","diffSize","crossLen","shift_1","ticksItem","fixOnBandTicksCoords","getMinorTicksCoords","getViewLabels","axisRotate","getRotate","font","fetchAutoCategoryIntervalCalculationParams","unitSpan","unitW","unitH","maxW","maxH","textContain.getBoundingRect","dw","dh","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","nTick","PI2","CMD","PathProxy","DEFAULT_SEARCH_SPACE","getCandidateAnchor","pos","outPt","outDir","projectPointToArc","anticlockwise","sqrt","ox","oy","tmp","normalizeRadian","atan2","d2","projectPointToLine","limitToEnds","dx1","dy1","lineLen","projectPointToRect","tmpPt","nearestPointOnRect","pt","nearestPointOnPath","xi","yi","cmd","L","C","cubicProjectPoint","Q","quadraticProjectPoint","rx","ry","theta","dTheta","R","Z","pt0","Point","pt1","pt2","dir","dir2","updateLabelLinePoints","labelLineModel","labelGuideConfig","searchSpace","candidates","getComputedTransform","anchorPoint","anchor","targetTransform","targetInversedTransform","scaleAndAdd","toArray","limitTurnAngle","tmpProjPoint","linePoints","minTurnAngle","fromArray","len1","len2","angleCos","dot","tan","limitSurfaceAngle","surfaceNormal","maxSurfaceAngle","HALF_PI","newAngle","acos","setLabelLineState","isNormal","smooth","styleObj","buildLabelLinePath","vector.dist","moveLen","midPoint0","vector.lerp","midPoint2","midPoint1","setLabelLineStyle","defaultStyle","labelIgnoreNormal","setTextGuideLine","getLabelLineStatesModels","labelLineName","prepareLayoutList","input","defaultAttr","localRect","isAxisAligned","minMargin","globalRect","obb","OrientedBoundingRect","layoutOption","computedLayoutOption","axisAligned","shiftLayout","xyDim","sizeDim","minBound","maxBound","balanceShift","lastPos","adjusted","maxGap","first","updateMinMaxGap","squeezeGaps","takeBoundsGap","squeezeWhenBailout","gapThisBound","gapOtherBound","moveDir","moveFromMaxGap","shiftList","remained","maxSqeezePercent","gaps","totalGaps","prevItemRect","squeezePercent","moveForEachLabel","shiftLayoutOnY","topBound","bottomBound","hideOverlap","labelList","displayedLabels","hideEl","emphasisState","overlapped","existsTextCfg","intersect","labelGuideIgnore","cloneArr","newPoints","prepareLayoutCallbackParams","hostEl","hostRect","align","labelLinePoints","LABEL_OPTION_TO_STYLE_KEYS","dummyTransformable","labelLayoutInnerStore","labelLineAnimationStore","extendWithKeys","LABEL_LAYOUT_PROPS","LabelManager","_labelList","_chartViewList","clearLabels","_addLabel","labelStyle","labelTransform","plain","setLocalTransform","originX","originY","labelGuide","cursor","attachedPos","attachedRot","addLabelsOfSeries","disableLabelLayout","updateLayoutConfig","createDragHandler","defaultLabelAttr","degreeToRadian","local","needsUpdateLabelLine","guideLine","draggable","labelsNeedsAdjustOnX","moveOverlap","labelsNeedsAdjustOnY","processLabelsOverall","ignoreLabelLineUpdate","forceLabelAnimation","_updateLabelLine","_animateLabels","visualStyle","invisible","disableLabelAnimation","oldLayout","layoutStore","newProps","oldLayoutSelect","oldLayoutEmphasis","oldOpacity","layoutSelect","layoutEmphasis","newLayout","strokePercent","getLabelManager","installLabelLayout","registers","labelManager","forEach","SVGPainter","CanvasPainter","isCoordinateSystemType","pointsLayout","forceStoreInTypedArray","useTypedArray","dimIdx0","dimIdx1","segCount","tmpIn","tmpOut","samplers","average","frame","nearest","indexSampler","dataSample","sampling","sampler","SausageShape","SausagePath","getDefaultShape","dr","rCenter","lessThanCircle","unitStartX","unitStartY","unitEndX","unitEndY","createSectorCalculateTextPosition","positionMapping","isRoundCap","textPosition","mappedSectorPosition","sector","middleR","middleAngle","extraDist","mathCos","mathSin","textAlign","textVerticalAlign","adjustAngleDistanceX","adjustAngleDistanceY","setSectorTextRotation","rotateType","anchorAngle","isEnd","dataFilter","legendModels","LegendVisualProvider","getDataWithEncodedVisual","_getDataWithEncodedVisual","_getRawData","getAllNames","containName","negativeDataFilter","curValue","GridModel","containLabel","borderWidth","CartesianAxisModel","nameLocation","nameRotate","nameTruncate","ellipsis","placeholder","nameTextStyle","triggerEvent","onZero","onZeroAxisIndex","axisTick","inside","showMinLabel","showMaxLabel","showMinLine","showMaxLine","axisDefault","primary","logBase","AXIS_TYPES","axisModelCreator","BaseAxisModelClass","extraDefaultOption","AxisModel","getAxisType","__ordinalMeta","Cartesian","_dimList","_axes","getAxis","getAxes","getAxesByScale","addAxis","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","calcAffineTransform","_transform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","translateX","translateY","axisX","axisY","toLocalCoord","containZone","data1","data2","zoneDiag1","zoneDiag2","getArea","zone","xVal","yVal","xAxis","yAxis","clampData","xScale","yScale","xAxisExtent","yAxisExtent","tolerance","xExtent","getGlobalExtent","yExtent","Axis2D","coordExtent","setCategorySortInfo","categorySortInfo","gridModel","grid","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","axisPosition","rectBound","axisOffset","posBound","onZeroCoord","labelDirection","tickDirection","nameDirection","zrUtil.retrieve","labelInside","isCartesian2DSeries","findAxisModels","axisModelMap","alignScaleTicks","alignToScale","alignToTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","scaleExtent","isMinFixed","isMaxFixed","t0","t1","Grid","_coordsMap","_coordsList","_axesMap","_axesList","axisPointerEnabled","_initCartesian","axesMap","updateAxisTicks","axesIndices","axisNeedsAlign","_updateScale","onZeroRecords","fixAxisOnZero","ignoreContainLabel","boxLayoutParams","isContainLabel","gridRect","axesList","adjustAxes","coordBase","axisExtentSum","updateAxisTransform","labelUnionRect","realNumberScaleTicks","categoryScaleExtent","axisLabelModel","singleRect","union","estimateLabelUnionRect","axesMapOnDim","getCartesian","xAxisIndex","yAxisIndex","coordList","getCartesians","_findConvertTarget","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","axesModelMap","getTooltipAxes","baseAxes","otherAxes","otherAxis","grids","otherAxisDim","canOnZeroToAxis","getOnZeroRecordKey","ifAxisCrossZero","valueAxisDefault","defaultsShow","RadarModel","showName","nameFormatter","indicatorModels","indicatorOpt","iNameTextStyle","innerIndicatorOpt","indName","_indicatorModels","getIndicatorModels","radius","indicator","IndicatorAxis","radiusExtent","Radar","radarModel","_indicatorAxes","indicatorModel","indicatorAxis","getIndicatorAxes","indicatorIndex","coordToPoint","closestAxis","minRadianDiff","closestAxisIdx","viewWidth","viewHeight","viewSize","numberUtil.parsePercent","indicatorAxes","radarSeries","dummyScale","pixel","radarList","REGION_AVAILABLE_SVG_TAG_MAP","GeoSVGResource","svg","_usedGraphicMap","_freedGraphics","_mapName","_parsedXML","parseXML","load","firstGraphic","_firstGraphic","_buildGraphic","_boundingRect","named","regionsMap","namedItem","namedFrom","createRegions","_regions","_regionsMap","svgXML","rootFromParse","parseSVG","ignoreViewBox","ignoreRootClip","root","message","viewBoxRect","bRectX","bRectY","bRectWidth","bRectHeight","calculatedBoundingRect","viewBoxTransform","makeViewBoxTransform","setClipPath","svgNodeTagLower","useGraphic","hostKey","usedRootMap","svgGraphic","freeGraphic","removeKey","geoCoord","nanhaiName","coordsOffsetMap","GeoJSONResource","geoJSON","_parsedMap","_specialAreas","_geoJSON","JSON","parsed","rawRegions","_parseToRegions","calculateBoundingRect","finalRegions","regionName","parseGeoJson","fixNanhai","coordFix","fixTextCoord","fixDiaoyuIsland","specialArea","getMapForUser","regionRect","geoSourceManager","rawDef","rawSpecialAreas","resource","getGeoResource","v2ApplyTransform","View","_roamTransformable","_rawTransformable","setBoundingRect","setViewRect","_transformTo","_viewRect","rawTransform","rawParent","decomposeTransform","_updateTransform","centerCoord","_updateCenterAndZoom","setZoom","zoomLimit","_zoom","getDefaultCenter","rawRect","getZoom","getRoamTransform","rawTransformMatrix","roamTransform","defaultCenter","roamTransformable","rawTransformable","matrix.copy","matrix.create","_rawTransform","invTransform","getTransformInfo","roam","raw","getViewRect","getViewRectAfterRoam","noRoam","vector.copy","getCoordSys","GEO_DEFAULT_PARAMS","aspectScale","invertLongitute","geoSVG","geo2DDimensions","Geo","_nameCoordMap","resourceType","defaultParams","zrUtil.retrieve2","_invertLongitute","getRegion","getRegionByCoord","addGeoCoord","getGeoCoord","projectedToPoint","unproject","pointToProjected","projected","geoModel","resizeGeo","boundingCoords","leftTop_1","rightBottom_1","projection_1","xMin","yMin","xMax","yMax","sampleLine","vector.min","vector.max","viewRect","centerOption","sizeOption","useCenterAndSize","boxLayoutOption","layout.getLayoutRect","GeoCreator","geoList","getCommonGeoProperties","geoIndex","mapModelGroupBySeries","getHostGeoModel","getMapType","mapSeries","nameMapList","singleMapSeries","zrUtil.mergeAll","setGeoCoords","getFilledRegions","originRegionArr","regionsArr","dataNameMap","regionOption","specifiedGeoJSONRegionStyle","echartsStyle","geoCreator","GeoModel","_optionModelMap","optionModelMap","regionOpt","getRegionModel","regionModel","unSelect","toggleSelected","scaleLimit","getCenterCoord","updateCenterAndZoom","previousZoom","zoomMin","zoomMax","fixX","fixY","linkSeriesData","datas","datasAttr","linkAll","curry","transferInjection","cloneShallowInjection","changeInjection","linkSingle","struct","structAttr","TreeNode","hostTree","depth","viewChildren","isExpand","isRemoved","eachNode","suppressVisitSub","updateDepthAndHeight","getNodeById","contains","getAncestors","includeSelf","ancestors","parentNode","getAncestorsIndices","currNode","getDescendantIndices","childNode","getValue","getLevelModel","levelModels","getChildIndex","isAncestorOf","isDescendantOf","Tree","_nodes","getNodeByDataIndex","clearLayouts","createTree","dataRoot","beforeLink","listData","dimMax","buildHierarchy","dataNode","addChild","AnimationWrap","_storage","_elExistsMap","finished","_finishedCallback","checkTerminate","aborted","createWrap","CATEGORY_DEFAULT_VISUAL_INDEX","VisualMapping","mappingMethod","thisOption","_normalizeData","normalizers","visualHandler","applyVisual","getColorMapper","_normalizedToVisual","normalizeVisualRange","pieceList","hasSpecialVisual","piece","originIndex","preprocessForPiecewise","categoryMap","cate","visualArr_1","setVisualToOption","preprocessForSpecifiedCategory","mapValueToVisual","normalized","getNormalizer","listVisualTypes","isValidType","eachVisual","mapVisual","isPrimary","newVisual","newVal","retrieveVisuals","hasVisual","prepareVisualTypes","visualTypes","types_1","type1","type2","dependsOn","visualType1","visualType2","findPieceIndex","findClosestWhenOutside","possibleI","pieceValue","updatePossible","newAbs","makeApplyVisual","isNormalized","doMapCategory","returnRGBArray","zrColor.fastLerp","parsedVisual","zrColor.stringify","linear","piecewise","getSpecifiedVisual","fixed","doMapFixed","colorHue","makePartialColorVisualHandler","zrColor.modifyHSL","colorSaturation","colorLightness","colorAlpha","zrColor.modifyAlpha","createNormalizedToNumericVisual","liftZ","setter","doMapToArray","visualArr","applyValue","colorChannel","loop","sourceExtent","zrColor.parse","pieceIndex","zrUtil.noop","generateNodeKey","Graph","directed","_nodesMap","_edgesMap","_directed","isDirected","addNode","nodesMap","GraphNode","hostGraph","getNodeByIndex","addEdge","n1","n2","edgesMap","edge","GraphEdge","outEdges","inEdges","getEdgeByIndex","getEdge","eachEdge","node1","node2","breadthFirstTraverse","startNode","edgeType","__visited","queue","currentNode","otherNode","degree","inDegree","outDegree","getAdjacentDataIndices","adjacentEdge","getTrajectoryDataIndices","connectedEdgesMap","connectedNodesMap","sourceNodesQueue","targetNodesQueue","nodeIteratorIndex","sourceNode","targetNode","sourceNodes","targetNodes","createGraphDataProxyMixin","hostName","dataName","getGraphicEl","parallelPreprocessor","hasParallelSeries","createParallelIfNeeded","parallelAxis","axisOption","parallelIndex","parallelOption","mergeAxisOptionFromParallel","ParallelModel","_initDimensions","setAxisExpand","axisModels","axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandRate","axisExpandDebounce","axisExpandSlideTriggerArea","axisExpandTriggerOn","ParallelAxis","Parallel","_axesLayout","_init","axisHelper.createScaleByModel","_updateAxesFromSeries","layoutInfo","_makeLayoutInfo","axisBase","layoutBase","pixelDimIndex","pAxis","pLayout","layoutLength","axisHelper.niceScaleExtent","layoutUtil.getLayoutRect","_layoutAxes","winSize","xy","wh","layoutExtent","axisCount","restrict","axisExpandWindow","axisCollapseWidth","winInnerIndices","axisExpandWindow0Pos","posInfo","layoutAxisWithExpand","layoutAxisWithoutExpand","positionTable","horizontal","vertical","rotationTable","matrix.rotate","matrix.translate","axisNameAvailableWidth","axisLabelShow","nameTruncateMaxWidth","axisCoordToPoint","eachActiveState","dataDimensions","hasActiveSet","hasAxisBrushed","activeState","getActiveState","graphic.applyTransform","getAxisLayout","getSlidedAxisExpandWindow","behavior","pointCoord","triggerArea","useJump","sliderMove","winSize2","parallelCoordSysCreator","ParallelAxisModel","activeIntervals","getAreaSelectStyle","setActiveIntervals","intervals","numberUtil.asc","dataToCoordSize","dataSize","halfSize","cartesianPrepareCustom","geoPrepareCustom","singlePrepareCustom","polarPrepareCustom","radiusAxis","getRadiusAxis","angleAxis","getAngleAxis","dataToRadius","dataToAngle","calendarPrepareCustom","rangeInfo","getRangeInfo","cellWidth","getCellWidth","cellHeight","getCellHeight","weeks","dayCount","allDay","isEC4CompatibleStyle","elType","hasOwnTextContentOption","hasOwnTextConfig","legacy","convertFromEC4CompatibleStyle","hostStyle","textContentStyle","srcStyle","textFill","textStroke","hasOwnPos","textOffset","textRotation","textDistance","convertEC4CompatibleRichItem","richItem","textFont","textStrokeWidth","lineHeight","textLineHeight","textHeight","textBackgroundColor","padding","textPadding","textBorderRadius","shadowColor","textBoxShadowColor","shadowBlur","textBoxShadowBlur","shadowOffsetX","textBoxShadowOffsetX","shadowOffsetY","textBoxShadowOffsetY","convertToEC4StyleForCustomSerise","itemStl","txStl","txCfg","isInside","hostFill","convertToEC4RichItem","textFillNotSet","insideFill","insideStroke","outsideStroke","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","LEGACY_TRANSFORM_PROPS_MAP","LEGACY_TRANSFORM_PROPS","TRANSFORMABLE_PROPS","ELEMENT_ANIMATABLE_PROPS","transitionInnerStore","getElementAnimationConfig","elOption","animationProp","userDuring","duringCall","applyUpdateTransition","clearStyle","hasAnimation","styleOpt","transFromProps","propsToSet","allProps","legacyName","xyName","legacyArr","prepareTransformAllPropsFinal","prepareShapeOrExtraAllPropsFinal","transitionKeys","isTransitionAll","elVal","prepareTransformTransitionFrom","prepareShapeOrExtraTransitionFrom","fromEl","transFromStyleProps","fromElStyle","styleTransition","elTransition","getAnimationStyleProps","animationProps","animationStyleProps","styleKeys","prepareStyleTransitionFrom","allPropsFinal","changeTarget","applyPropsDirectly","Displayable","autoBatch","applyMiscProps","enterFromProps_1","enterFrom","applyPropsTransition","updateLeaveTo","leaveToProps","leaveTo","applyLeaveTransition","onRemove","parent_1","tmpDuringScope","transitionDuringAPI","setTransform","dirtyShape","getShape","dirtyStyle","setExtra","getExtra","latestUserDuring","scopeUserDuring","mainAttr","attrOpt","transFromPropsInAttr","elPropsInAttr","attrTransition","elPropsInAttrKeys","isNonStyleTransitionEnabled","allPropsInAttr","keysInAttr","cloneValue","optVal","getStateToRestore","KEYFRAME_EXCLUDE_KEYS","stopPreviousKeyframeAnimationAndRestore","applyKeyframeAnimation","animationOpts","singleAnimationOpts","keyframes","stateToRestore","targetPropName","kf","kfValues","propKeys","animate","stopTracks","savedTarget","whenWithKeys","PolarModel","foundAxisModel","PolarAxisModel","AngleAxisModel","RadiusAxisModel","RadiusAxis","radiusToData","AngleAxis","angleExtent","angleToData","polarDimensions","Polar","_radiusAxis","_angleAxis","pointToCoord","minAngle","maxAngle","RADIAN","EPSILON","updatePolarScale","data_1","setAxis","isAngleAxisModel","polarCreator","polarList","parsedRadius","resizePolar","barLayoutPolar","lastStackCoords","calRadialBar","barMinAngle","baseDim","clampLayout","sign","radiusSpan","angleSpan","positionMap","labelRotation","SingleAxisModel","SingleAxis","singleDimensions","Single","_axis","_adjustAxis","_updateAxisTransform","extentSum","singleModel","singleCreator","singles","CalendarModel","mergeAndNormalizeLayoutParams","getCellSize","cellSize","firstDay","cellSizeArr","sizeCalculable","PROXIMATE_ONE_DAY","Calendar","calendarModel","getDimensionsInfo","_rangeInfo","_sw","_sh","getOrient","_orient","getFirstDayOfWeek","_firstDayOfWeek","getDateInfo","mStr","dStr","getDay","formatedDate","getNextNDay","setDate","_lineWidth","_getRangeInfo","_initRangeOption","whNames","layoutParams","cellNumbers","cellSizeSpecified","whGlobal","calendarRect","dayInfo","week","nthWeek","pointToDate","dataToRect","contentShape","tl","tr","br","bl","nthX","nthY","_getDateByWeeksAndDay","normalizedRange","rangeStr","setMonth","reversed","parsedRange","startDateNum","endDateNum","dateNum","fweek","lweek","nthDay","calendarList","calendarSeries","hasKeys","createVisualMappings","stateList","supplementVisualOption","visualMappings","Creater","mappings","__hidden","visualData","mappingOption","__alphaForOpacity","replaceVisualOption","has","getValueState","visualTypesMap","valueOrIndex","rawDataItem","valueState","incrementalApplyVisual","visualDefault","active","inactive","DEFAULT_OPTION","decalPaletteScope","ariaVisual","ariaModel","paletteScopeGroupByType_1","decalScope","enableAriaDecal","paletteDecal","specifiedDecal","mergeDecal","dataAll_1","idxMap_1","decalScope_1","dataCount_1","resultDecal","setDecal","labelLocale","ariaLabel","seriesCnt","maxDataCnt","maxSeriesCnt","displaySeriesCnt","getTitle","seriesLabels_1","seriesCount","seriesLabel","displayCnt","middleSeparator_1","endSeparator_1","excludeDimensionId_1","dataLabels","dataLabel","separatorModel","middleSeparator","endSeparator","setLabel","keyValues","RegExp","RELATIONAL_EXPRESSION_OP_ALIAS_MAP","RegExpEvaluator","rVal","_condVal","isRegExp","lVal","ConstConditionInternal","AndConditionInternal","OrConditionInternal","NotConditionInternal","RelationalConditionInternal","needParse","valueParser","tarValRaw","valueGetterParam","tarValParsed","subCondList","parseOption","exprOption","getters","isObjectNotArray","and","parseAndOrOption","or","not","parseNotOption","prepareGetValue","exprKeys","parserName","parser","keyRaw","valueGetterAttrMap","condValueRaw","condValueParsed","evaluator","parseRelationalOption","subOptionArr","ConditionalExpressionParsed","_cond","parseConditionalExpression","isMultiple","elements","prepareMorphBatches","many","batches","batchCount","moveFrom","pathDividers","approxOpacity","clonePath","applyMorphAnimation","from","to","divideShape","animateOtherProps","updateAnimationCfg","animationDelay","animationCfg","Object","assign","fromIsMany","morphBatches","animateCount","animateIndex","morphOneBatch","forceManyOne","batchMany","batchOne","separateAnimationCfg","dividePath","individualDelay","fromPath","toPath","combineMorph","separateMorph","fromIndividuals","toIndividuals","individualAnimationCfg","batchFrom","batchTo","isCombineMorphing","morphPath","getPathList","pathList_1","pathList","disableMorphing","getUniversalTransitionGlobalStore","getGroupId","dataGroupId","isChild","groupIdDim","visualDimension","dimOrdinalMeta","getValueByDimension","flattenDataDiffItems","items","childGroupId","divide","fadeInElement","newEl","newSeries","newIndex","removeEl","computedTransform","animateElementStyles","getOldStyle","transitionBetween","oldList","oldDiffItems","newDiffItems","updateMorphingPathProps","rawFrom","rawTo","hasMorphAnimation","oldGroupIds","oldChildGroupIds","newGroupId","newChildGroupId","createKeyGetter","isOld","onlyGetId","diffItem","useId","oldItem","newItem","isAllIdSame","isElementStillInChart","updateOneToOne","oldIndex","oldIndices","oldElsList","newElsList","newSeris","getSeriesTransitionKey","seriesKey","convertArraySeriesKeyToString","getDivideShapeFromData","querySeries","installUniversalTransition","ecMOdel","transOpt","globalStore","oldSeries","oldDataGroupIds","oldData","transitionSeriesFromOpt","updateBatches_1","updateBatches","oldDataMap","oldDataMapForSplit","oldDataGroupId","transitionKey","transitionKeyStr","newDataGroupId","oldSeries_1","oldData_1","findTransitionSeriesBatches","allSeries","savedSeries","savedDataGroupIds","savedData"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165]}