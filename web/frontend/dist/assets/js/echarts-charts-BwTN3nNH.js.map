{"version":3,"file":"echarts-charts-BwTN3nNH.js","sources":["../../../node_modules/echarts/lib/chart/helper/createRenderPlanner.js","../../../node_modules/echarts/lib/chart/helper/createSeriesData.js","../../../node_modules/echarts/lib/chart/line/LineSeries.js","../../../node_modules/echarts/lib/chart/helper/labelHelper.js","../../../node_modules/echarts/lib/chart/helper/Symbol.js","../../../node_modules/echarts/lib/chart/helper/SymbolDraw.js","../../../node_modules/echarts/lib/chart/line/helper.js","../../../node_modules/echarts/lib/chart/line/poly.js","../../../node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","../../../node_modules/echarts/lib/chart/line/LineView.js","../../../node_modules/echarts/lib/chart/line/lineAnimationDiff.js","../../../node_modules/echarts/lib/chart/line/install.js","../../../node_modules/echarts/lib/chart/bar/BaseBarSeries.js","../../../node_modules/echarts/lib/chart/bar/BarSeries.js","../../../node_modules/echarts/lib/chart/helper/sectorHelper.js","../../../node_modules/echarts/lib/chart/bar/BarView.js","../../../node_modules/echarts/lib/chart/bar/install.js","../../../node_modules/echarts/lib/chart/pie/pieLayout.js","../../../node_modules/echarts/lib/chart/pie/labelLayout.js","../../../node_modules/echarts/lib/chart/pie/PieView.js","../../../node_modules/echarts/lib/chart/helper/createSeriesDataSimply.js","../../../node_modules/echarts/lib/chart/pie/PieSeries.js","../../../node_modules/echarts/lib/chart/pie/install.js","../../../node_modules/echarts/lib/chart/scatter/ScatterSeries.js","../../../node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","../../../node_modules/echarts/lib/chart/scatter/ScatterView.js","../../../node_modules/echarts/lib/chart/scatter/install.js","../../../node_modules/echarts/lib/chart/radar/radarLayout.js","../../../node_modules/echarts/lib/chart/radar/backwardCompat.js","../../../node_modules/echarts/lib/chart/radar/RadarView.js","../../../node_modules/echarts/lib/chart/radar/RadarSeries.js","../../../node_modules/echarts/lib/chart/radar/install.js","../../../node_modules/echarts/lib/chart/map/MapView.js","../../../node_modules/echarts/lib/chart/map/MapSeries.js","../../../node_modules/echarts/lib/chart/map/mapDataStatistic.js","../../../node_modules/echarts/lib/chart/map/mapSymbolLayout.js","../../../node_modules/echarts/lib/chart/map/install.js","../../../node_modules/echarts/lib/chart/tree/layoutHelper.js","../../../node_modules/echarts/lib/chart/tree/TreeView.js","../../../node_modules/echarts/lib/chart/helper/treeHelper.js","../../../node_modules/echarts/lib/chart/tree/TreeSeries.js","../../../node_modules/echarts/lib/chart/tree/traversalHelper.js","../../../node_modules/echarts/lib/chart/tree/treeLayout.js","../../../node_modules/echarts/lib/chart/tree/treeVisual.js","../../../node_modules/echarts/lib/chart/tree/install.js","../../../node_modules/echarts/lib/chart/tree/treeAction.js","../../../node_modules/echarts/lib/chart/treemap/treemapAction.js","../../../node_modules/echarts/lib/chart/helper/enableAriaDecalForTree.js","../../../node_modules/echarts/lib/chart/treemap/TreemapSeries.js","../../../node_modules/echarts/lib/chart/treemap/Breadcrumb.js","../../../node_modules/echarts/lib/chart/treemap/TreemapView.js","../../../node_modules/echarts/lib/chart/treemap/treemapVisual.js","../../../node_modules/echarts/lib/chart/treemap/treemapLayout.js","../../../node_modules/echarts/lib/chart/treemap/install.js","../../../node_modules/echarts/lib/chart/graph/categoryFilter.js","../../../node_modules/echarts/lib/chart/graph/categoryVisual.js","../../../node_modules/echarts/lib/chart/graph/edgeVisual.js","../../../node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","../../../node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","../../../node_modules/echarts/lib/chart/graph/simpleLayout.js","../../../node_modules/echarts/lib/chart/graph/graphHelper.js","../../../node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","../../../node_modules/echarts/lib/chart/graph/circularLayout.js","../../../node_modules/echarts/lib/chart/graph/forceHelper.js","../../../node_modules/echarts/lib/chart/graph/forceLayout.js","../../../node_modules/echarts/lib/chart/graph/createView.js","../../../node_modules/echarts/lib/chart/helper/LinePath.js","../../../node_modules/echarts/lib/chart/helper/Line.js","../../../node_modules/echarts/lib/chart/helper/LineDraw.js","../../../node_modules/echarts/lib/chart/graph/adjustEdge.js","../../../node_modules/echarts/lib/chart/graph/GraphView.js","../../../node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","../../../node_modules/echarts/lib/chart/graph/GraphSeries.js","../../../node_modules/echarts/lib/chart/graph/install.js","../../../node_modules/echarts/lib/chart/gauge/PointerPath.js","../../../node_modules/echarts/lib/chart/gauge/GaugeView.js","../../../node_modules/echarts/lib/chart/gauge/GaugeSeries.js","../../../node_modules/echarts/lib/chart/gauge/install.js","../../../node_modules/echarts/lib/chart/funnel/FunnelView.js","../../../node_modules/echarts/lib/chart/funnel/FunnelSeries.js","../../../node_modules/echarts/lib/chart/funnel/funnelLayout.js","../../../node_modules/echarts/lib/chart/funnel/install.js","../../../node_modules/echarts/lib/chart/parallel/ParallelView.js","../../../node_modules/echarts/lib/chart/parallel/ParallelSeries.js","../../../node_modules/echarts/lib/chart/parallel/parallelVisual.js","../../../node_modules/echarts/lib/chart/parallel/install.js","../../../node_modules/echarts/lib/chart/sankey/SankeyView.js","../../../node_modules/echarts/lib/chart/sankey/SankeySeries.js","../../../node_modules/echarts/lib/chart/sankey/sankeyLayout.js","../../../node_modules/echarts/lib/chart/sankey/sankeyVisual.js","../../../node_modules/echarts/lib/chart/sankey/install.js","../../../node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","../../../node_modules/echarts/lib/chart/boxplot/BoxplotSeries.js","../../../node_modules/echarts/lib/chart/boxplot/BoxplotView.js","../../../node_modules/echarts/lib/chart/boxplot/boxplotLayout.js","../../../node_modules/echarts/lib/chart/boxplot/boxplotTransform.js","../../../node_modules/echarts/lib/chart/boxplot/prepareBoxplotData.js","../../../node_modules/echarts/lib/chart/boxplot/install.js","../../../node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","../../../node_modules/echarts/lib/chart/candlestick/CandlestickView.js","../../../node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","../../../node_modules/echarts/lib/chart/candlestick/preprocessor.js","../../../node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","../../../node_modules/echarts/lib/chart/candlestick/install.js","../../../node_modules/echarts/lib/chart/helper/EffectSymbol.js","../../../node_modules/echarts/lib/chart/effectScatter/EffectScatterView.js","../../../node_modules/echarts/lib/chart/effectScatter/EffectScatterSeries.js","../../../node_modules/echarts/lib/chart/effectScatter/install.js","../../../node_modules/echarts/lib/chart/helper/EffectLine.js","../../../node_modules/echarts/lib/chart/helper/Polyline.js","../../../node_modules/echarts/lib/chart/helper/EffectPolyline.js","../../../node_modules/echarts/lib/chart/helper/LargeLineDraw.js","../../../node_modules/echarts/lib/chart/lines/linesLayout.js","../../../node_modules/echarts/lib/chart/lines/LinesView.js","../../../node_modules/echarts/lib/chart/lines/LinesSeries.js","../../../node_modules/echarts/lib/chart/lines/linesVisual.js","../../../node_modules/echarts/lib/chart/lines/install.js","../../../node_modules/echarts/lib/chart/heatmap/HeatmapLayer.js","../../../node_modules/echarts/lib/chart/heatmap/HeatmapView.js","../../../node_modules/echarts/lib/chart/heatmap/HeatmapSeries.js","../../../node_modules/echarts/lib/chart/heatmap/install.js","../../../node_modules/echarts/lib/chart/bar/PictorialBarView.js","../../../node_modules/echarts/lib/chart/bar/PictorialBarSeries.js","../../../node_modules/echarts/lib/chart/bar/installPictorialBar.js","../../../node_modules/echarts/lib/chart/themeRiver/ThemeRiverView.js","../../../node_modules/echarts/lib/chart/themeRiver/ThemeRiverSeries.js","../../../node_modules/echarts/lib/chart/themeRiver/themeRiverLayout.js","../../../node_modules/echarts/lib/chart/themeRiver/install.js","../../../node_modules/echarts/lib/chart/sunburst/SunburstPiece.js","../../../node_modules/echarts/lib/chart/sunburst/sunburstAction.js","../../../node_modules/echarts/lib/chart/sunburst/SunburstView.js","../../../node_modules/echarts/lib/chart/sunburst/SunburstSeries.js","../../../node_modules/echarts/lib/chart/sunburst/sunburstLayout.js","../../../node_modules/echarts/lib/chart/sunburst/sunburstVisual.js","../../../node_modules/echarts/lib/chart/sunburst/install.js","../../../node_modules/echarts/lib/chart/custom/CustomSeries.js","../../../node_modules/echarts/lib/chart/custom/CustomView.js","../../../node_modules/echarts/lib/chart/custom/install.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner } from '../../util/model.js';\n/**\r\n * @return {string} If large mode changed, return string 'reset';\r\n */\nexport default function createRenderPlanner() {\n  var inner = makeInner();\n  return function (seriesModel) {\n    var fields = inner(seriesModel);\n    var pipelineContext = seriesModel.pipelineContext;\n    var originalLarge = !!fields.large;\n    var originalProgressive = !!fields.progressiveRender;\n    // FIXME: if the planner works on a filtered series, `pipelineContext` does not\n    // exists. See #11611 . Probably we need to modify this structure, see the comment\n    // on `performRawSeries` in `Schedular.js`.\n    var large = fields.large = !!(pipelineContext && pipelineContext.large);\n    var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\n    return !!(originalLarge !== large || originalProgressive !== progressive) && 'reset';\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { getCoordSysInfoBySeries } from '../../model/referHelper.js';\nimport { createSourceFromSeriesDataOption } from '../../data/Source.js';\nimport { enableDataStack } from '../../data/helper/dataStackHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nimport { SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nfunction getCoordSysDimDefs(seriesModel, coordSysInfo) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysDimDefs;\n  if (coordSysInfo && coordSysInfo.coordSysDims) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType);\n      }\n      return dimInfo;\n    });\n  }\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n  return coordSysDimDefs;\n}\nfunction injectOrdinalMeta(dimInfoList, createInvertedIndices, coordSysInfo) {\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n      if (createInvertedIndices) {\n        dimInfo.createInvertedIndices = true;\n      }\n    }\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n  return firstCategoryDimIndex;\n}\n/**\r\n * Caution: there are side effects to `sourceManager` in this method.\r\n * Should better only be called in `Series['getInitialData']`.\r\n */\nfunction createSeriesData(sourceRaw, seriesModel, opt) {\n  opt = opt || {};\n  var sourceManager = seriesModel.getSourceManager();\n  var source;\n  var isOriginalSource = false;\n  if (sourceRaw) {\n    isOriginalSource = true;\n    source = createSourceFromSeriesDataOption(sourceRaw);\n  } else {\n    source = sourceManager.getSource();\n    // Is series.data. not dataset.\n    isOriginalSource = source.sourceFormat === SOURCE_FORMAT_ORIGINAL;\n  }\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs = getCoordSysDimDefs(seriesModel, coordSysInfo);\n  var useEncodeDefaulter = opt.useEncodeDefaulter;\n  var encodeDefaulter = zrUtil.isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null;\n  var createDimensionOptions = {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefine: seriesModel.getEncode(),\n    encodeDefaulter: encodeDefaulter,\n    canOmitUnusedDimensions: !isOriginalSource\n  };\n  var schema = prepareSeriesDataSchema(source, createDimensionOptions);\n  var firstCategoryDimIndex = injectOrdinalMeta(schema.dimensions, opt.createInvertedIndices, coordSysInfo);\n  var store = !isOriginalSource ? sourceManager.getSharedDataStore(schema) : null;\n  var stackCalculationInfo = enableDataStack(seriesModel, {\n    schema: schema,\n    store: store\n  });\n  var data = new SeriesData(schema, seriesModel);\n  data.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  data.hasItemOption = false;\n  data.initData(\n  // Try to reuse the data store in sourceManager if using dataset.\n  isOriginalSource ? source : store, null, dimValueGetter);\n  return data;\n}\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\nfunction firstDataNotNull(arr) {\n  var i = 0;\n  while (i < arr.length && arr[i] == null) {\n    i++;\n  }\n  return arr[i];\n}\nexport default createSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\nvar LineSeriesModel = /** @class */function (_super) {\n  __extends(LineSeriesModel, _super);\n  function LineSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LineSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  LineSeriesModel.prototype.getInitialData = function (option) {\n    if (process.env.NODE_ENV !== 'production') {\n      var coordSys = option.coordinateSystem;\n      if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n        throw new Error('Line not support coordinateSystem besides cartesian and polar');\n      }\n    }\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  LineSeriesModel.prototype.getLegendIcon = function (opt) {\n    var group = new Group();\n    var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n    group.add(line);\n    line.setStyle(opt.lineStyle);\n    var visualType = this.getData().getVisual('symbol');\n    var visualRotate = this.getData().getVisual('symbolRotate');\n    var symbolType = visualType === 'none' ? 'circle' : visualType;\n    // Symbol size is 80% when there is a line\n    var size = opt.itemHeight * 0.8;\n    var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n    group.add(symbol);\n    symbol.setStyle(opt.itemStyle);\n    var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n    symbol.rotation = symbolRotate * Math.PI / 180;\n    symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n    if (symbolType.indexOf('empty') > -1) {\n      symbol.style.stroke = symbol.style.fill;\n      symbol.style.fill = '#fff';\n      symbol.style.lineWidth = 2;\n    }\n    return group;\n  };\n  LineSeriesModel.type = 'series.line';\n  LineSeriesModel.dependencies = ['grid', 'polar'];\n  LineSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 3,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    clip: true,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    endLabel: {\n      show: false,\n      valueAnimation: true,\n      distance: 8\n    },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    emphasis: {\n      scale: true\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity,\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    triggerLineEvent: false\n  };\n  return LineSeriesModel;\n}(SeriesModel);\nexport default LineSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\r\n * @return label string. Not null/undefined\r\n */\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length;\n  // Simple optimization (in lots of cases, label dims length is 1)\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n  var vals = [];\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport { getDefaultLabel } from './labelHelper.js';\nimport { extend } from 'zrender/lib/core/util.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar Symbol = /** @class */function (_super) {\n  __extends(Symbol, _super);\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n    _this.updateData(data, idx, seriesScope, opts);\n    return _this;\n  }\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll();\n    // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    });\n    // Rewrite drift method\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\r\n   * Stop animation\r\n   * @param {boolean} toLastFrame\r\n   */\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n  Symbol.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\r\n   * FIXME:\r\n   * Caution: This method breaks the encapsulation of this module,\r\n   * but it indeed brings convenience. So do not use the method\r\n   * unless you detailedly know all the implements of `Symbol`,\r\n   * especially animation.\r\n   *\r\n   * Get symbol path element.\r\n   */\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\r\n   * Highlight symbol\r\n   */\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\r\n   * Downplay symbol\r\n   */\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\r\n   * @param {number} zlevel\r\n   * @param {number} z\r\n   */\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n  Symbol.prototype.setDraggable = function (draggable, hasCursorOption) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = !hasCursorOption && draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\r\n   * Update symbol properties\r\n   */\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n    if (disableAnimation) {\n      // Must stop leave transition manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('leave');\n    }\n  };\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var emphasisDisabled;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n      emphasisDisabled = seriesScope.emphasisDisabled;\n    }\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      emphasisDisabled = emphasisModel.get('disabled');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      }\n      // Disable decal because symbol scale will been applied on the decal.\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    });\n    // Do not execute util needed.\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n    // null / undefined / true means to use default strategy.\n    // 0 / false / negative number / NaN / Infinity means no scale.\n    var scaleRatio = hoverScale == null || hoverScale === true ? Math.max(1.1, 3 / this._sizeY)\n    // PENDING: restrict hoverScale > 1? It seems unreasonable to scale down\n    : isFinite(hoverScale) && hoverScale > 0 ? +hoverScale : 1;\n    // always set scale to allow resetting\n    emphasisState.scaleX = this._sizeX * scaleRatio;\n    emphasisState.scaleY = this._sizeY * scaleRatio;\n    this.setSymbolScale(1);\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n  Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\n    var symbolPath = this.childAt(0);\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation;\n    // Avoid mistaken hover when fading out\n    this.silent = symbolPath.silent = true;\n    // Not show text when animating\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n  Symbol.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n  return Symbol;\n}(graphic.Group);\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport SymbolClz from './Symbol.js';\nimport { isObject } from 'zrender/lib/core/util.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx))\n  // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n  return opt || {};\n}\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\nvar SymbolDraw = /** @class */function () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\r\n   * Update symbols draw by new data\r\n   */\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    // Remove progressive els.\n    this._progressiveEls = null;\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    };\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldData) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n      if (!symbolEl\n      // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      }\n      // Add back\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      }, seriesModel);\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n  ;\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n    var data = this._data;\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n  ;\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n  ;\n  /**\r\n   * Update symbols draw by new data\r\n   */\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    // Clear\n    this._progressiveEls = [];\n    opt = normalizeUpdateOpt(opt);\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  SymbolDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data;\n    // Incremental model do not have this._data.\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        }, data.hostModel);\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n  ;\n  return SymbolDraw;\n}();\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\nimport { isNumber, map } from 'zrender/lib/core/util.js';\nexport function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked = false;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n  if (isDimensionStacked(data, dims[0] /* , dims[1] */)) {\n    // jshint ignore:line\n    stacked = true;\n    dims[0] = stackResultDim;\n  }\n  if (isDimensionStacked(data, dims[1] /* , dims[0] */)) {\n    // jshint ignore:line\n    stacked = true;\n    dims[1] = stackResultDim;\n  }\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  }\n  // If origin is specified as a number, use it as\n  // valueStart directly\n  else if (isNumber(valueOrigin) && !isNaN(valueOrigin)) {\n    valueStart = valueOrigin;\n  }\n  // auto\n  else {\n    // Both positive\n    if (extent[0] > 0) {\n      valueStart = extent[0];\n    }\n    // Both negative\n    else if (extent[1] < 0) {\n      valueStart = extent[1];\n    }\n    // If is one positive, and one negative, onZero shall be true\n  }\n  return valueStart;\n}\nexport function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n// Poly path support NaN point\nimport Path from 'zrender/lib/graphic/Path.js';\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\nimport { cubicRootAt, cubicAt } from 'zrender/lib/core/curve.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n/**\r\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\r\n * situations. This should be used when points are non-monotone neither in x or\r\n * y dimension.\r\n */\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n  var prevX;\n  var prevY;\n  var cpx0;\n  var cpy0;\n  var cpx1;\n  var cpy1;\n  var idx = start;\n  var k = 0;\n  for (; k < segLen; k++) {\n    var x = points[idx * 2];\n    var y = points[idx * 2 + 1];\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n    if (isPointNull(x, y)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n      break;\n    }\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n      cpx0 = x;\n      cpy0 = y;\n    } else {\n      var dx = x - prevX;\n      var dy = y - prevY;\n      // Ignore tiny segment.\n      if (dx * dx + dy * dy < 0.5) {\n        idx += dir;\n        continue;\n      }\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextX = points[nextIdx * 2];\n        var nextY = points[nextIdx * 2 + 1];\n        // Ignore duplicate point\n        while (nextX === x && nextY === y && k < segLen) {\n          k++;\n          nextIdx += dir;\n          idx += dir;\n          nextX = points[nextIdx * 2];\n          nextY = points[nextIdx * 2 + 1];\n          x = points[idx * 2];\n          y = points[idx * 2 + 1];\n          dx = x - prevX;\n          dy = y - prevY;\n        }\n        var tmpK = k + 1;\n        if (connectNulls) {\n          // Find next point not null\n          while (isPointNull(nextX, nextY) && tmpK < segLen) {\n            tmpK++;\n            nextIdx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n          }\n        }\n        var ratioNextSeg = 0.5;\n        var vx = 0;\n        var vy = 0;\n        var nextCpx0 = void 0;\n        var nextCpy0 = void 0;\n        // Is last point\n        if (tmpK >= segLen || isPointNull(nextX, nextY)) {\n          cpx1 = x;\n          cpy1 = y;\n        } else {\n          vx = nextX - prevX;\n          vy = nextY - prevY;\n          var dx0 = x - prevX;\n          var dx1 = nextX - x;\n          var dy0 = y - prevY;\n          var dy1 = nextY - y;\n          var lenPrevSeg = void 0;\n          var lenNextSeg = void 0;\n          if (smoothMonotone === 'x') {\n            lenPrevSeg = Math.abs(dx0);\n            lenNextSeg = Math.abs(dx1);\n            var dir_1 = vx > 0 ? 1 : -1;\n            cpx1 = x - dir_1 * lenPrevSeg * smooth;\n            cpy1 = y;\n            nextCpx0 = x + dir_1 * lenNextSeg * smooth;\n            nextCpy0 = y;\n          } else if (smoothMonotone === 'y') {\n            lenPrevSeg = Math.abs(dy0);\n            lenNextSeg = Math.abs(dy1);\n            var dir_2 = vy > 0 ? 1 : -1;\n            cpx1 = x;\n            cpy1 = y - dir_2 * lenPrevSeg * smooth;\n            nextCpx0 = x;\n            nextCpy0 = y + dir_2 * lenNextSeg * smooth;\n          } else {\n            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n            // Use ratio of seg length\n            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n            cpy1 = y - vy * smooth * (1 - ratioNextSeg);\n            // cp0 of next segment\n            nextCpx0 = x + vx * smooth * ratioNextSeg;\n            nextCpy0 = y + vy * smooth * ratioNextSeg;\n            // Smooth constraint between point and next point.\n            // Avoid exceeding extreme after smoothing.\n            nextCpx0 = mathMin(nextCpx0, mathMax(nextX, x));\n            nextCpy0 = mathMin(nextCpy0, mathMax(nextY, y));\n            nextCpx0 = mathMax(nextCpx0, mathMin(nextX, x));\n            nextCpy0 = mathMax(nextCpy0, mathMin(nextY, y));\n            // Reclaculate cp1 based on the adjusted cp0 of next seg.\n            vx = nextCpx0 - x;\n            vy = nextCpy0 - y;\n            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n            cpy1 = y - vy * lenPrevSeg / lenNextSeg;\n            // Smooth constraint between point and prev point.\n            // Avoid exceeding extreme after smoothing.\n            cpx1 = mathMin(cpx1, mathMax(prevX, x));\n            cpy1 = mathMin(cpy1, mathMax(prevY, y));\n            cpx1 = mathMax(cpx1, mathMin(prevX, x));\n            cpy1 = mathMax(cpy1, mathMin(prevY, y));\n            // Adjust next cp0 again.\n            vx = x - cpx1;\n            vy = y - cpy1;\n            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n          }\n        }\n        ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n        cpx0 = nextCpx0;\n        cpy0 = nextCpy0;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    prevX = x;\n    prevY = y;\n    idx += dir;\n  }\n  return k;\n}\nvar ECPolylineShape = /** @class */function () {\n  function ECPolylineShape() {\n    this.smooth = 0;\n    this.smoothConstraint = true;\n  }\n  return ECPolylineShape;\n}();\nvar ECPolyline = /** @class */function (_super) {\n  __extends(ECPolyline, _super);\n  function ECPolyline(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-polyline';\n    return _this;\n  }\n  ECPolyline.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  ECPolyline.prototype.getDefaultShape = function () {\n    return new ECPolylineShape();\n  };\n  ECPolyline.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length / 2;\n    // const result = getBoundingBox(points, shape.smoothConstraint);\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  };\n  ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n    if (!this.path) {\n      this.createPathProxy();\n      this.buildPath(this.path, this.shape);\n    }\n    var path = this.path;\n    var data = path.data;\n    var CMD = PathProxy.CMD;\n    var x0;\n    var y0;\n    var isDimX = dim === 'x';\n    var roots = [];\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n      var x = void 0;\n      var y = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var x3 = void 0;\n      var y3 = void 0;\n      var t = void 0;\n      switch (cmd) {\n        case CMD.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          break;\n        case CMD.L:\n          x = data[i++];\n          y = data[i++];\n          t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n          if (t <= 1 && t >= 0) {\n            var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n            return isDimX ? [xOrY, val] : [val, xOrY];\n          }\n          x0 = x;\n          y0 = y;\n          break;\n        case CMD.C:\n          x = data[i++];\n          y = data[i++];\n          x2 = data[i++];\n          y2 = data[i++];\n          x3 = data[i++];\n          y3 = data[i++];\n          var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n          if (nRoot > 0) {\n            for (var i_1 = 0; i_1 < nRoot; i_1++) {\n              var t_1 = roots[i_1];\n              if (t_1 <= 1 && t_1 >= 0) {\n                var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                return isDimX ? [xOrY, val] : [val, xOrY];\n              }\n            }\n          }\n          x0 = x3;\n          y0 = y3;\n          break;\n      }\n    }\n  };\n  return ECPolyline;\n}(Path);\nexport { ECPolyline };\nvar ECPolygonShape = /** @class */function (_super) {\n  __extends(ECPolygonShape, _super);\n  function ECPolygonShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return ECPolygonShape;\n}(ECPolylineShape);\nvar ECPolygon = /** @class */function (_super) {\n  __extends(ECPolygon, _super);\n  function ECPolygon(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-polygon';\n    return _this;\n  }\n  ECPolygon.prototype.getDefaultShape = function () {\n    return new ECPolygonShape();\n  };\n  ECPolygon.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length / 2;\n    var smoothMonotone = shape.smoothMonotone;\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  };\n  return ECPolygon;\n}(Path);\nexport { ECPolygon };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { round } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 0;\n  // Expand the clip path a bit to avoid the border is clipped and looks thinner\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth;\n  // fix: https://github.com/apache/incubator-echarts/issues/11369\n  width = Math.ceil(width);\n  if (x !== Math.floor(x)) {\n    x = Math.floor(x);\n    // if no extra 1px on `width`, it will still be clipped since `x` is floored\n    width++;\n  }\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n      clipPath.shape.height = 0;\n    }\n    var duringCb = isFunction(during) ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n  return clipPath;\n}\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea();\n  // Avoid float number rounding error for symbol on the edge of axis extent.\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n  return clipPath;\n}\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n  return null;\n}\nexport { createGridClipPath, createPolarClipPath, createClipPath };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n// FIXME step not support polar\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport lineAnimationDiff from './lineAnimationDiff.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as modelUtil from '../../util/model.js';\nimport { ECPolyline, ECPolygon } from './poly.js';\nimport ChartView from '../../view/Chart.js';\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createGridClipPath, createPolarClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setStatesStylesFromModel, setStatesFlag, toggleHoverEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, labelInner } from '../../label/labelStyle.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nimport { convertToColorString } from '../../util/format.js';\nimport { lerp } from 'zrender/lib/tool/color.js';\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n  for (var i = 0; i < points1.length; i++) {\n    if (points1[i] !== points2[i]) {\n      return;\n    }\n  }\n  return true;\n}\nfunction bboxFromPoints(points) {\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n  for (var i = 0; i < points.length;) {\n    var x = points[i++];\n    var y = points[i++];\n    if (!isNaN(x)) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n    }\n    if (!isNaN(y)) {\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n  return [[minX, minY], [maxX, maxY]];\n}\nfunction getBoundingDiff(points1, points2) {\n  var _a = bboxFromPoints(points1),\n    min1 = _a[0],\n    max1 = _a[1];\n  var _b = bboxFromPoints(points2),\n    min2 = _b[0],\n    max2 = _b[1];\n  // Get a max value from each corner of two boundings.\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\nfunction getSmooth(smooth) {\n  return zrUtil.isNumber(smooth) ? smooth : smooth ? 0.5 : 0;\n}\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n  var len = data.count();\n  var points = createFloat32Array(len * 2);\n  for (var idx = 0; idx < len; idx++) {\n    var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n    points[idx * 2] = pt[0];\n    points[idx * 2 + 1] = pt[1];\n  }\n  return points;\n}\n/**\r\n * Filter the null data and extend data for step considering `stepTurnAt`\r\n *\r\n * @param points data to convert, that may containing null\r\n * @param basePoints base data to reference, used only for areaStyle points\r\n * @param coordSys coordinate system\r\n * @param stepTurnAt 'start' | 'end' | 'middle' | true\r\n * @param connectNulls whether to connect nulls\r\n * @returns converted point positions\r\n */\nfunction turnPointsIntoStep(points, basePoints, coordSys, stepTurnAt, connectNulls) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n  var i = 0;\n  var stepPt = [];\n  var pt = [];\n  var nextPt = [];\n  var filteredPoints = [];\n  if (connectNulls) {\n    for (i = 0; i < points.length; i += 2) {\n      /**\r\n       * For areaStyle of stepped lines, `stackedOnPoints` should be\r\n       * filtered the same as `points` so that the base axis values\r\n       * should stay the same as the lines above. See #20021\r\n       */\n      var reference = basePoints || points;\n      if (!isNaN(reference[i]) && !isNaN(reference[i + 1])) {\n        filteredPoints.push(points[i], points[i + 1]);\n      }\n    }\n    points = filteredPoints;\n  }\n  for (i = 0; i < points.length - 2; i += 2) {\n    nextPt[0] = points[i + 2];\n    nextPt[1] = points[i + 3];\n    pt[0] = points[i];\n    pt[1] = points[i + 1];\n    stepPoints.push(pt[0], pt[1]);\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        break;\n      case 'middle':\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        stepPoints.push(stepPt2[0], stepPt2[1]);\n        break;\n      default:\n        // default is start\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n    }\n  }\n  // Last points\n  stepPoints.push(points[i++], points[i++]);\n  return stepPoints;\n}\n/**\r\n * Clip color stops to edge. Avoid creating too large gradients.\r\n * Which may lead to blurry when GPU acceleration is enabled. See #15680\r\n *\r\n * The stops has been sorted from small to large.\r\n */\nfunction clipColorStops(colorStops, maxSize) {\n  var newColorStops = [];\n  var len = colorStops.length;\n  // coord will always < 0 in prevOutOfRangeColorStop.\n  var prevOutOfRangeColorStop;\n  var prevInRangeColorStop;\n  function lerpStop(stop0, stop1, clippedCoord) {\n    var coord0 = stop0.coord;\n    var p = (clippedCoord - coord0) / (stop1.coord - coord0);\n    var color = lerp(p, [stop0.color, stop1.color]);\n    return {\n      coord: clippedCoord,\n      color: color\n    };\n  }\n  for (var i = 0; i < len; i++) {\n    var stop_1 = colorStops[i];\n    var coord = stop_1.coord;\n    if (coord < 0) {\n      prevOutOfRangeColorStop = stop_1;\n    } else if (coord > maxSize) {\n      if (prevInRangeColorStop) {\n        newColorStops.push(lerpStop(prevInRangeColorStop, stop_1, maxSize));\n      } else if (prevOutOfRangeColorStop) {\n        // If there are two stops and coord range is between these two stops\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0), lerpStop(prevOutOfRangeColorStop, stop_1, maxSize));\n      }\n      // All following stop will be out of range. So just ignore them.\n      break;\n    } else {\n      if (prevOutOfRangeColorStop) {\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0));\n        // Reset\n        prevOutOfRangeColorStop = null;\n      }\n      newColorStops.push(stop_1);\n      prevInRangeColorStop = stop_1;\n    }\n  }\n  return newColorStops;\n}\nfunction getVisualGradient(data, coordSys, api) {\n  var visualMetaList = data.getVisual('visualMeta');\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n  if (coordSys.type !== 'cartesian2d') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style is only supported on cartesian2d.');\n    }\n    return;\n  }\n  var coordDim;\n  var visualMeta;\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimInfo = data.getDimensionInfo(visualMetaList[i].dimension);\n    coordDim = dimInfo && dimInfo.coordDim;\n    // Can only be x or y\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n  if (!visualMeta) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style only support x or y dimension.');\n    }\n    return;\n  }\n  // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n  var axis = coordSys.getAxis(coordDim);\n  // dataToCoord mapping may not be linear, but must be monotonic.\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    // offset will be calculated later.\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n  var colorStopsInRange = clipColorStops(colorStops, coordDim === 'x' ? api.getWidth() : api.getHeight());\n  var inRangeStopLen = colorStopsInRange.length;\n  if (!inRangeStopLen && stopLen) {\n    // All stops are out of range. All will be the same color.\n    return colorStops[0].coord < 0 ? outerColors[1] ? outerColors[1] : colorStops[stopLen - 1].color : outerColors[0] ? outerColors[0] : colorStops[0].color;\n  }\n  var tinyExtent = 10; // Arbitrary value: 10px\n  var minCoord = colorStopsInRange[0].coord - tinyExtent;\n  var maxCoord = colorStopsInRange[inRangeStopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n  zrUtil.each(colorStopsInRange, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStopsInRange.push({\n    // NOTE: inRangeStopLen may still be 0 if stoplen is zero.\n    offset: inRangeStopLen ? colorStopsInRange[inRangeStopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStopsInRange.unshift({\n    offset: inRangeStopLen ? colorStopsInRange[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  });\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStopsInRange, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n  if (!categoryAxis) {\n    return;\n  }\n  // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n  if (isAuto\n  // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  }\n  // Otherwise follow the label interval strategy on category axis.\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n    labelMap[ordinalNumber] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In most cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex\n    // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0]\n    // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\nfunction getLastIndexNotNull(points) {\n  var len = points.length / 2;\n  for (; len > 0; len--) {\n    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n      break;\n    }\n  }\n  return len - 1;\n}\nfunction getPointAtIndex(points, idx) {\n  return [points[idx * 2], points[idx * 2 + 1]];\n}\nfunction getIndexRange(points, xOrY, dim) {\n  var len = points.length / 2;\n  var dimIdx = dim === 'x' ? 0 : 1;\n  var a;\n  var b;\n  var prevIndex = 0;\n  var nextIndex = -1;\n  for (var i = 0; i < len; i++) {\n    b = points[i * 2 + dimIdx];\n    if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n      continue;\n    }\n    if (i === 0) {\n      a = b;\n      continue;\n    }\n    if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n      nextIndex = i;\n      break;\n    }\n    prevIndex = i;\n    a = b;\n  }\n  return {\n    range: [prevIndex, nextIndex],\n    t: (xOrY - a) / (b - a)\n  };\n}\nfunction anyStateShowEndLabel(seriesModel) {\n  if (seriesModel.get(['endLabel', 'show'])) {\n    return true;\n  }\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    if (seriesModel.get([SPECIAL_STATES[i], 'endLabel', 'show'])) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    var endLabelModel_1 = seriesModel.getModel('endLabel');\n    var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n    var data_1 = seriesModel.getData();\n    var labelAnimationRecord_1 = {\n      lastFrameIndex: 0\n    };\n    var during = anyStateShowEndLabel(seriesModel) ? function (percent, clipRect) {\n      lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n    } : null;\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n      var endLabel = lineView._endLabel;\n      if (endLabel && hasAnimation) {\n        if (labelAnimationRecord_1.originalX != null) {\n          endLabel.attr({\n            x: labelAnimationRecord_1.originalX,\n            y: labelAnimationRecord_1.originalY\n          });\n        }\n      }\n    }, during);\n    // Expand clip shape to avoid clipping when line value exceeds axis\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    }\n    // Set to the final frame. To make sure label layout is right.\n    if (during) {\n      during(1, clipPath);\n    }\n    return clipPath;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      if (seriesModel.get(['endLabel', 'show'])) {\n        console.warn('endLabel is not supported for lines in polar systems.');\n      }\n    }\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\nfunction getEndLabelStateSpecified(endLabelModel, coordSys) {\n  var baseAxis = coordSys.getBaseAxis();\n  var isHorizontal = baseAxis.isHorizontal();\n  var isBaseInversed = baseAxis.inverse;\n  var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n  var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n  return {\n    normal: {\n      align: endLabelModel.get('align') || align,\n      verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n    }\n  };\n}\nvar LineView = /** @class */function (_super) {\n  __extends(LineView, _super);\n  function LineView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  LineView.prototype.init = function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n    this._changePolyState = zrUtil.bind(this._changePolyState, this);\n  };\n  LineView.prototype.render = function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.getLayout('points') || [];\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = !ecModel.ssr && seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var connectNulls = seriesModel.get('connectNulls');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys);\n    // Remove temporary symbols\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    // Remove previous created symbols if showSymbol changed to false\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n    group.add(lineGroup);\n    // FIXME step not support polar\n    var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n    var clipShapeForSymbol;\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea();\n      // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r += 0.5;\n      }\n    }\n    this._clipShapeForSymbol = clipShapeForSymbol;\n    var visualColor = getVisualGradient(data, coordSys, api) || data.getVisual('style')[data.getVisual('drawType')];\n    // Initialization animation or coordinate system changed\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n      if (step) {\n        if (stackedOnPoints) {\n          stackedOnPoints = turnPointsIntoStep(stackedOnPoints, points, coordSys, step, connectNulls);\n        }\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, null, coordSys, step, connectNulls);\n      }\n      polyline = this._newPolyline(points);\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } // If areaStyle is removed\n      else if (polygon) {\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      }\n      // NOTE: Must update _endLabel before setClipPath.\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      }\n      // NOTE: Must update _endLabel before setClipPath.\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n      // Update clipPath\n      var oldClipPath = lineGroup.getClipPath();\n      if (oldClipPath) {\n        var newClipPath = createLineClipPath(this, coordSys, false, seriesModel);\n        graphic.initProps(oldClipPath, {\n          shape: newClipPath.shape\n        }, seriesModel);\n      } else {\n        lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n      }\n      // Always update, or it is wrong in the case turning on legend\n      // because points are not changed.\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      // In the case data zoom triggered refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing.\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            if (stackedOnPoints) {\n              stackedOnPoints = turnPointsIntoStep(stackedOnPoints, points, coordSys, step, connectNulls);\n            }\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, null, coordSys, step, connectNulls);\n          }\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    polyline.useStyle(zrUtil.defaults(\n    // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n    if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n      var emphasisLineStyle = polyline.getState('emphasis').style;\n      emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n    }\n    // Needs seriesIndex for focus\n    getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n    toggleHoverEmphasis(polyline, focus, blurScope, emphasisDisabled);\n    var smooth = getSmooth(seriesModel.get('smooth'));\n    var smoothMonotone = seriesModel.get('smoothMonotone');\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: smoothMonotone,\n      connectNulls: connectNulls\n    });\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel',\n        decal: data.getVisual('style').decal\n      }));\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n      setStatesStylesFromModel(polygon, seriesModel, 'areaStyle');\n      // Needs seriesIndex for focus\n      getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n      toggleHoverEmphasis(polygon, focus, blurScope, emphasisDisabled);\n    }\n    var changePolyState = this._changePolyState;\n    data.eachItemGraphicEl(function (el) {\n      // Switch polyline / polygon state if element changed its state.\n      el && (el.onHoverStateChange = changePolyState);\n    });\n    this._polyline.onHoverStateChange = changePolyState;\n    this._data = data;\n    // Save the coordinate system for transition animation when data changed\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n    if (seriesModel.get('triggerLineEvent')) {\n      this.packEventData(seriesModel, polyline);\n      polygon && this.packEventData(seriesModel, polygon);\n    }\n  };\n  LineView.prototype.packEventData = function (seriesModel, el) {\n    getECData(el).eventData = {\n      componentType: 'series',\n      componentSubType: 'line',\n      componentIndex: seriesModel.componentIndex,\n      seriesIndex: seriesModel.seriesIndex,\n      seriesName: seriesModel.name,\n      seriesType: 'line'\n    };\n  };\n  LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n    this._changePolyState('emphasis');\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var points = data.getLayout('points');\n      var symbol = data.getItemGraphicEl(dataIndex);\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var x = points[dataIndex * 2];\n        var y = points[dataIndex * 2 + 1];\n        if (isNaN(x) || isNaN(y)) {\n          // Null data\n          return;\n        }\n        // fix #11360: shouldn't draw symbol outside clipShapeForSymbol\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n          return;\n        }\n        var zlevel = seriesModel.get('zlevel') || 0;\n        var z = seriesModel.get('z') || 0;\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.x = x;\n        symbol.y = y;\n        symbol.setZ(zlevel, z);\n        // ensure label text of the temporary symbol is in front of line and area polygon\n        var symbolLabel = symbol.getSymbolPath().getTextContent();\n        if (symbolLabel) {\n          symbolLabel.zlevel = zlevel;\n          symbolLabel.z = z;\n          symbolLabel.z2 = this._polyline.z2 + 1;\n        }\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol);\n        // Stop scale animation\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n  LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n    this._changePolyState('normal');\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n  LineView.prototype._changePolyState = function (toState) {\n    var polygon = this._polygon;\n    setStatesFlag(this._polyline, toState);\n    polygon && setStatesFlag(polygon, toState);\n  };\n  LineView.prototype._newPolyline = function (points) {\n    var polyline = this._polyline;\n    // Remove previous created polyline\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n    polyline = new ECPolyline({\n      shape: {\n        points: points\n      },\n      segmentIgnoreThreshold: 2,\n      z2: 10\n    });\n    this._lineGroup.add(polyline);\n    this._polyline = polyline;\n    return polyline;\n  };\n  LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n    var polygon = this._polygon;\n    // Remove previous created polygon\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n    polygon = new ECPolygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      segmentIgnoreThreshold: 2\n    });\n    this._lineGroup.add(polygon);\n    this._polygon = polygon;\n    return polygon;\n  };\n  LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n    var isHorizontalOrRadial;\n    var isCoordSysPolar;\n    var baseAxis = coordSys.getBaseAxis();\n    var isAxisInverse = baseAxis.inverse;\n    if (coordSys.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n      isCoordSysPolar = false;\n    } else if (coordSys.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n      isCoordSysPolar = true;\n    }\n    var seriesModel = data.hostModel;\n    var seriesDuration = seriesModel.get('animationDuration');\n    if (zrUtil.isFunction(seriesDuration)) {\n      seriesDuration = seriesDuration(null);\n    }\n    var seriesDelay = seriesModel.get('animationDelay') || 0;\n    var seriesDelayValue = zrUtil.isFunction(seriesDelay) ? seriesDelay(null) : seriesDelay;\n    data.eachItemGraphicEl(function (symbol, idx) {\n      var el = symbol;\n      if (el) {\n        var point = [symbol.x, symbol.y];\n        var start = void 0;\n        var end = void 0;\n        var current = void 0;\n        if (clipShape) {\n          if (isCoordSysPolar) {\n            var polarClip = clipShape;\n            var coord = coordSys.pointToCoord(point);\n            if (isHorizontalOrRadial) {\n              start = polarClip.startAngle;\n              end = polarClip.endAngle;\n              current = -coord[1] / 180 * Math.PI;\n            } else {\n              start = polarClip.r0;\n              end = polarClip.r;\n              current = coord[0];\n            }\n          } else {\n            var gridClip = clipShape;\n            if (isHorizontalOrRadial) {\n              start = gridClip.x;\n              end = gridClip.x + gridClip.width;\n              current = symbol.x;\n            } else {\n              start = gridClip.y + gridClip.height;\n              end = gridClip.y;\n              current = symbol.y;\n            }\n          }\n        }\n        var ratio = end === start ? 0 : (current - start) / (end - start);\n        if (isAxisInverse) {\n          ratio = 1 - ratio;\n        }\n        var delay = zrUtil.isFunction(seriesDelay) ? seriesDelay(idx) : seriesDuration * ratio + seriesDelayValue;\n        var symbolPath = el.getSymbolPath();\n        var text = symbolPath.getTextContent();\n        el.attr({\n          scaleX: 0,\n          scaleY: 0\n        });\n        el.animateTo({\n          scaleX: 1,\n          scaleY: 1\n        }, {\n          duration: 200,\n          setToFinal: true,\n          delay: delay\n        });\n        if (text) {\n          text.animateFrom({\n            style: {\n              opacity: 0\n            }\n          }, {\n            duration: 300,\n            delay: delay\n          });\n        }\n        symbolPath.disableLabelAnimation = true;\n      }\n    });\n  };\n  LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n    var endLabelModel = seriesModel.getModel('endLabel');\n    if (anyStateShowEndLabel(seriesModel)) {\n      var data_2 = seriesModel.getData();\n      var polyline = this._polyline;\n      // series may be filtered.\n      var points = data_2.getLayout('points');\n      if (!points) {\n        polyline.removeTextContent();\n        this._endLabel = null;\n        return;\n      }\n      var endLabel = this._endLabel;\n      if (!endLabel) {\n        endLabel = this._endLabel = new graphic.Text({\n          z2: 200 // should be higher than item symbol\n        });\n        endLabel.ignoreClip = true;\n        polyline.setTextContent(this._endLabel);\n        polyline.disableLabelAnimation = true;\n      }\n      // Find last non-NaN data to display data\n      var dataIndex = getLastIndexNotNull(points);\n      if (dataIndex >= 0) {\n        setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n          inheritColor: inheritColor,\n          labelFetcher: seriesModel,\n          labelDataIndex: dataIndex,\n          defaultText: function (dataIndex, opt, interpolatedValue) {\n            return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n          },\n          enableTextSetter: true\n        }, getEndLabelStateSpecified(endLabelModel, coordSys));\n        polyline.textConfig.position = null;\n      }\n    } else if (this._endLabel) {\n      this._polyline.removeTextContent();\n      this._endLabel = null;\n    }\n  };\n  LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n    var endLabel = this._endLabel;\n    var polyline = this._polyline;\n    if (endLabel) {\n      // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n      // The label is not prepared at this time.\n      if (percent < 1 && animationRecord.originalX == null) {\n        animationRecord.originalX = endLabel.x;\n        animationRecord.originalY = endLabel.y;\n      }\n      var points = data.getLayout('points');\n      var seriesModel = data.hostModel;\n      var connectNulls = seriesModel.get('connectNulls');\n      var precision = endLabelModel.get('precision');\n      var distance = endLabelModel.get('distance') || 0;\n      var baseAxis = coordSys.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isBaseInversed = baseAxis.inverse;\n      var clipShape = clipRect.shape;\n      var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n      var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n      var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n      var dim = isHorizontal ? 'x' : 'y';\n      var dataIndexRange = getIndexRange(points, xOrY, dim);\n      var indices = dataIndexRange.range;\n      var diff = indices[1] - indices[0];\n      var value = void 0;\n      if (diff >= 1) {\n        // diff > 1 && connectNulls, which is on the null data.\n        if (diff > 1 && !connectNulls) {\n          var pt = getPointAtIndex(points, indices[0]);\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n        } else {\n          var pt = polyline.getPointOn(xOrY, dim);\n          pt && endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          var startValue = seriesModel.getRawValue(indices[0]);\n          var endValue = seriesModel.getRawValue(indices[1]);\n          valueAnimation && (value = modelUtil.interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n        }\n        animationRecord.lastFrameIndex = indices[0];\n      } else {\n        // If diff <= 0, which is the range is not found(Include NaN)\n        // Choose the first point or last point.\n        var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n        var pt = getPointAtIndex(points, idx);\n        valueAnimation && (value = seriesModel.getRawValue(idx));\n        endLabel.attr({\n          x: pt[0] + distanceX,\n          y: pt[1] + distanceY\n        });\n      }\n      if (valueAnimation) {\n        var inner = labelInner(endLabel);\n        if (typeof inner.setLabelText === 'function') {\n          inner.setLabelText(value);\n        }\n      }\n    }\n  };\n  /**\r\n   * @private\r\n   */\n  // FIXME Two value axis\n  LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n    if (step) {\n      // TODO If stacked series is not step\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, diff.current, coordSys, step, connectNulls);\n      current = turnPointsIntoStep(diff.current, null, coordSys, step, connectNulls);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, diff.next, coordSys, step, connectNulls);\n      next = turnPointsIntoStep(diff.next, null, coordSys, step, connectNulls);\n    }\n    // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.stopAnimation();\n      polyline.setShape({\n        points: next\n      });\n      if (polygon) {\n        polygon.stopAnimation();\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n      return;\n    }\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    var target = {\n      shape: {\n        points: next\n      }\n    };\n    // Also animate the original points.\n    // If points reference is changed when turning into step line.\n    if (diff.current !== current) {\n      target.shape.__points = diff.next;\n    }\n    // Stop previous animation.\n    polyline.stopAnimation();\n    graphic.updateProps(polyline, target, seriesModel);\n    if (polygon) {\n      polygon.setShape({\n        // Reuse the points with polyline.\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      polygon.stopAnimation();\n      graphic.updateProps(polygon, {\n        shape: {\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n      // If use attr directly in updateProps.\n      if (polyline.shape.points !== polygon.shape.points) {\n        polygon.shape.points = polyline.shape.points;\n      }\n    }\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n          });\n        }\n      }\n    }\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        polygon && polygon.dirtyShape();\n        var points = polyline.shape.__points;\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          var offset = updatedDataInfo[i].ptIdx * 2;\n          el.x = points[offset];\n          el.y = points[offset + 1];\n          el.markRedraw();\n        }\n      });\n    }\n  };\n  LineView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n    this._lineGroup.removeAll();\n    this._symbolDraw.remove(true);\n    // Remove temporary created elements when highlighting\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n  };\n  LineView.type = 'line';\n  return LineView;\n}(ChartView);\nexport default LineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\nexport default function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData);\n  // let newIdList = newData.mapArray(newData.getId);\n  // let oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n  var currPoints = [];\n  var nextPoints = [];\n  // Points for stacking base line\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\n  // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n  var oldPoints = oldData.getLayout('points') || [];\n  var newPoints = newData.getLayout('points') || [];\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true;\n    var oldIdx2 = void 0;\n    var newIdx2 = void 0;\n    // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n    switch (diffItem.cmd) {\n      case '=':\n        oldIdx2 = diffItem.idx * 2;\n        newIdx2 = diffItem.idx1 * 2;\n        var currentX = oldPoints[oldIdx2];\n        var currentY = oldPoints[oldIdx2 + 1];\n        var nextX = newPoints[newIdx2];\n        var nextY = newPoints[newIdx2 + 1];\n        // If previous data is NaN, use next point directly\n        if (isNaN(currentX) || isNaN(currentY)) {\n          currentX = nextX;\n          currentY = nextY;\n        }\n        currPoints.push(currentX, currentY);\n        nextPoints.push(nextX, nextY);\n        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n      case '+':\n        var newIdx = diffItem.idx;\n        var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n        var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n        newIdx2 = newIdx * 2;\n        currPoints.push(oldPt[0], oldPt[1]);\n        nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n        var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n        currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(newIdx));\n        break;\n      case '-':\n        pointAdded = false;\n    }\n    // Original indices\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  }\n  // Diff result may be crossed if all items are changed\n  // Sort by data index\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var len = currPoints.length;\n  var sortedCurrPoints = createFloat32Array(len);\n  var sortedNextPoints = createFloat32Array(len);\n  var sortedCurrStackedPoints = createFloat32Array(len);\n  var sortedNextStackedPoints = createFloat32Array(len);\n  var sortedStatus = [];\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    var i2 = i * 2;\n    var idx2 = idx * 2;\n    sortedCurrPoints[i2] = currPoints[idx2];\n    sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n    sortedNextPoints[i2] = nextPoints[idx2];\n    sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n    sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n    sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n    sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n    sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n    sortedStatus[i] = status[idx];\n  }\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport LineSeries from './LineSeries.js';\nimport LineView from './LineView.js';\n// In case developer forget to include grid component\nimport layoutPoints from '../../layout/points.js';\nimport dataSample from '../../processor/dataSample.js';\nexport function install(registers) {\n  registers.registerChartView(LineView);\n  registers.registerSeriesModel(LineSeries);\n  registers.registerLayout(layoutPoints('line', true));\n  registers.registerVisual({\n    seriesType: 'line',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      // Visual coding for legend\n      var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n      if (lineStyle && !lineStyle.stroke) {\n        // Fill in visual should be palette color if\n        // has color callback\n        lineStyle.stroke = data.getVisual('style').fill;\n      }\n      data.setVisual('legendLineStyle', lineStyle);\n    }\n  });\n  // Down sample after filter\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { each } from 'zrender/lib/core/util.js';\nvar BaseBarSeriesModel = /** @class */function (_super) {\n  __extends(BaseBarSeriesModel, _super);\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value, dims, startingAtTick) {\n    var coordSys = this.coordinateSystem;\n    if (coordSys && coordSys.clampData) {\n      // PENDING if clamp ?\n      var clampData_1 = coordSys.clampData(value);\n      var pt_1 = coordSys.dataToPoint(clampData_1);\n      if (startingAtTick) {\n        each(coordSys.getAxes(), function (axis, idx) {\n          // If axis type is category, use tick coords instead\n          if (axis.type === 'category' && dims != null) {\n            var tickCoords = axis.getTicksCoords();\n            var alignTicksWithLabel = axis.getTickModel().get('alignWithLabel');\n            var targetTickId = clampData_1[idx];\n            // The index of rightmost tick of markArea is 1 larger than x1/y1 index\n            var isEnd = dims[idx] === 'x1' || dims[idx] === 'y1';\n            if (isEnd && !alignTicksWithLabel) {\n              targetTickId += 1;\n            }\n            // The only contains one tick, tickCoords is\n            // like [{coord: 0, tickValue: 0}, {coord: 0}]\n            // to the length should always be larger than 1\n            if (tickCoords.length < 2) {\n              return;\n            } else if (tickCoords.length === 2) {\n              // The left value and right value of the axis are\n              // the same. coord is 0 in both items. Use the max\n              // value of the axis as the coord\n              pt_1[idx] = axis.toGlobalCoord(axis.getExtent()[isEnd ? 1 : 0]);\n              return;\n            }\n            var leftCoord = void 0;\n            var coord = void 0;\n            var stepTickValue = 1;\n            for (var i = 0; i < tickCoords.length; i++) {\n              var tickCoord = tickCoords[i].coord;\n              // The last item of tickCoords doesn't contain\n              // tickValue\n              var tickValue = i === tickCoords.length - 1 ? tickCoords[i - 1].tickValue + stepTickValue : tickCoords[i].tickValue;\n              if (tickValue === targetTickId) {\n                coord = tickCoord;\n                break;\n              } else if (tickValue < targetTickId) {\n                leftCoord = tickCoord;\n              } else if (leftCoord != null && tickValue > targetTickId) {\n                coord = (tickCoord + leftCoord) / 2;\n                break;\n              }\n              if (i === 1) {\n                // Here we assume the step of category axes is\n                // the same\n                stepTickValue = tickValue - tickCoords[0].tickValue;\n              }\n            }\n            if (coord == null) {\n              if (!leftCoord) {\n                // targetTickId is smaller than all tick ids in the\n                // visible area, use the leftmost tick coord\n                coord = tickCoords[0].coord;\n              } else if (leftCoord) {\n                // targetTickId is larger than all tick ids in the\n                // visible area, use the rightmost tick coord\n                coord = tickCoords[tickCoords.length - 1].coord;\n              }\n            }\n            pt_1[idx] = axis.toGlobalCoord(coord);\n          }\n        });\n      } else {\n        var data = this.getData();\n        var offset = data.getLayout('offset');\n        var size = data.getLayout('size');\n        var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n        pt_1[offsetIndex] += offset + size / 2;\n      }\n      return pt_1;\n    }\n    return [NaN, NaN];\n  };\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar BarSeriesModel = /** @class */function (_super) {\n  __extends(BarSeriesModel, _super);\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\r\n   * @override\r\n   */\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\r\n   * @override\r\n   */\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n    return progressiveThreshold;\n  };\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\nexport default BarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isArray, map } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nexport function getSectorCornerRadius(model, shape, zeroIfNull) {\n  var cornerRadius = model.get('borderRadius');\n  if (cornerRadius == null) {\n    return zeroIfNull ? {\n      cornerRadius: 0\n    } : null;\n  }\n  if (!isArray(cornerRadius)) {\n    cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];\n  }\n  var dr = Math.abs(shape.r || 0 - shape.r0 || 0);\n  return {\n    cornerRadius: map(cornerRadius, function (cr) {\n      return parsePercent(cr, dr);\n    })\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport { extend, each, map } from 'zrender/lib/core/util.js';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut, traverseElements } from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle.js';\nimport { throttle } from '../../util/throttle.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { warn } from '../../util/log.js';\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis();\n    // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n  return coordSysClipArea;\n}\nvar BarView = /** @class */function (_super) {\n  __extends(BarView, _super);\n  function BarView() {\n    var _this = _super.call(this) || this;\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n    this._removeOnRenderedListener(api);\n    this._updateDrawMode(seriesModel);\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      // Clear previously rendered progressive elements.\n      this._progressiveEls = null;\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n    this._updateDrawMode(seriesModel);\n    // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n    this._updateLargeClip(seriesModel);\n  };\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Reset\n    this._progressiveEls = [];\n    // Do not support progressive in normal mode.\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n  BarView.prototype.eachRendered = function (cb) {\n    traverseElements(this._progressiveEls || this.group, cb);\n  };\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n      this._clear();\n    }\n  };\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data);\n    // If there is clipPath created in large mode. Remove it.\n    group.removeClipPath();\n    // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle());\n      // Only cartesian2d support borderRadius.\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      } else {\n        bgEl.setShape('cornerRadius', barBorderRadius);\n      }\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n      if (drawBackground) {\n        createBackground(dataIndex);\n      }\n      // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n        return;\n      }\n      var isClipped = false;\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n      if (realtimeSortCfg) {\n        /**\r\n         * Force label animation because even if the element is\r\n         * ignored because it's clipped, it may not be clipped after\r\n         * changing order. Then, if not using forceLabelAnimation,\r\n         * the label animation was never started, in which case,\r\n         * the label will be the final value and doesn't have label\r\n         * animation.\r\n         */\n        el.forceLabelAnimation = true;\n      }\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n      if (drawBackground) {\n        var bgEl = void 0;\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle());\n          // Only cartesian2d support borderRadius.\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          } else {\n            bgEl.setShape('cornerRadius', barBorderRadius);\n          }\n          bgEls[newIndex] = bgEl;\n        }\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n      var el = oldData.getItemGraphicEl(oldIndex);\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n        group.remove(el);\n        return;\n      }\n      var isClipped = false;\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n      } else {\n        saveOldStyle(el);\n      }\n      if (realtimeSortCfg) {\n        el.forceLabelAnimation = true;\n      }\n      if (isChangeOrder) {\n        var textEl = el.getTextContent();\n        if (textEl) {\n          var labelInnerStore = labelInner(textEl);\n          if (labelInnerStore.prevValue != null) {\n            /**\r\n             * Set preValue to be value so that no new label\r\n             * should be started, otherwise, it will take a full\r\n             * `animationDurationUpdate` time to finish the\r\n             * animation, which is not expected.\r\n             */\n            labelInnerStore.prevValue = labelInnerStore.value;\n          }\n        }\n      }\n      // Not change anything if only order changed.\n      // Especially not change label.\n      else {\n        updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      }\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n    createLarge(seriesModel, this.group);\n    this._updateLargeClip(seriesModel);\n  };\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    var group = this.group;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n  };\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this;\n    // If no data in the first frame, wait for data to initSort\n    if (!data.count()) {\n      return;\n    }\n    var baseAxis = realtimeSortCfg.baseAxis;\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function (idx) {\n        var el = data.getItemGraphicEl(idx);\n        var shape = el && el.shape;\n        return shape &&\n        // The result should be consistent with the initial sort by data value.\n        // Do not support the case that both positive and negative exist.\n        Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width)\n        // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n        || 0;\n      };\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0\n      // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE\n      // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n      if (value > lastValue) {\n        return true;\n      }\n      lastValue = value;\n    }\n    return false;\n  };\n  /*\r\n   * Consider the case when A and B changed order, whose representing\r\n   * bars are both out of sight, we don't wish to trigger reorder action\r\n   * as long as the order in the view doesn't change.\r\n   */\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult\n    });\n  };\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n    this._removeOnRenderedListener(api);\n  };\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1;\n    // Needs positive width and height\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y;\n    // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Because if data changed and the bar shows again, its transition animation\n    // will begin at this place.\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y;\n    // Reverse back\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n    return xClipped || yClipped;\n  },\n  polar: function (coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1;\n    // Make sure r is larger than r0\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0;\n    // Reverse back\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n    return rect;\n  },\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: layout,\n      z2: 1\n    });\n    sector.name = 'item';\n    var positionMap = createPolarPositionMapping(isRadial);\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n      isRoundCap: ShapeClass === Sausage\n    });\n    // Animation\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? layout.r0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget\n        // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n      }, animationModel);\n    }\n    return sector;\n  }\n};\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\nfunction checkPropertiesNotValid(obj, props) {\n  for (var i = 0; i < props.length; i++) {\n    if (!isFinite(obj[props[i]])) {\n      return true;\n    }\n  }\n  return false;\n}\nvar rectPropties = ['x', 'y', 'width', 'height'];\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\nvar isValidLayout = {\n  cartesian2d: function (layout) {\n    return !checkPropertiesNotValid(layout, rectPropties);\n  },\n  polar: function (layout) {\n    return !checkPropertiesNotValid(layout, polarPropties);\n  }\n};\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0;\n    // fix layout with lineWidth\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle,\n      clockwise: layout.clockwise\n    };\n  }\n};\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\nfunction createPolarPositionMapping(isRadial) {\n  return function (isRadial) {\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n    return function (position) {\n      switch (position) {\n        case 'start':\n        case 'insideStart':\n        case 'end':\n        case 'insideEnd':\n          return position + arcOrAngle;\n        default:\n          return position;\n      }\n    };\n  }(isRadial);\n}\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n  if (!isPolar) {\n    var borderRadius = itemModel.get(['itemStyle', 'borderRadius']) || 0;\n    el.setShape('r', borderRadius);\n  } else if (!seriesModel.get('roundCap')) {\n    var sectorShape = el.shape;\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    extend(sectorShape, cornerRadius);\n    el.setShape(sectorShape);\n  }\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n  var labelStatesModels = getLabelStatesModels(itemModel);\n  setLabelStyle(el, labelStatesModels, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    inheritColor: style.fill,\n    defaultOpacity: style.opacity,\n    defaultOutsidePosition: labelPositionOutside\n  });\n  var label = el.getTextContent();\n  if (isPolar && label) {\n    var position = itemModel.get(['label', 'position']);\n    el.textConfig.inside = position === 'middle' ? true : null;\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n  }\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n    return getDefaultInterpolatedLabel(data, value);\n  });\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  setStatesStylesFromModel(el, itemModel);\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n}\n// In case width or height are too small.\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0;\n  // width or height may be NaN for empty data\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\nvar LagePathShape = /** @class */function () {\n  function LagePathShape() {}\n  return LagePathShape;\n}();\nvar LargePath = /** @class */function (_super) {\n  __extends(LargePath, _super);\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'largeBar';\n    return _this;\n  }\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var baseDimIdx = this.baseDimIdx;\n    var valueDimIdx = 1 - this.baseDimIdx;\n    var startPoint = [];\n    var size = [];\n    var barWidth = this.barWidth;\n    for (var i = 0; i < points.length; i += 3) {\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[i + 2];\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      startPoint[valueDimIdx] = points[i + valueDimIdx];\n      ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n    }\n  };\n  return LargePath;\n}(Path);\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('size');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var bgPoints = data.getLayout('largeBackgroundPoints');\n  if (bgPoints) {\n    var bgEl = new LargePath({\n      shape: {\n        points: bgPoints\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.baseDimIdx = baseDimIdx;\n    bgEl.largeDataIndices = largeDataIndices;\n    bgEl.barWidth = barWidth;\n    bgEl.useStyle(backgroundModel.getItemStyle());\n    group.add(bgEl);\n    progressiveEls && progressiveEls.push(bgEl);\n  }\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    ignoreCoarsePointer: true,\n    z2: 1\n  });\n  el.baseDimIdx = baseDimIdx;\n  el.largeDataIndices = largeDataIndices;\n  el.barWidth = barWidth;\n  group.add(el);\n  el.useStyle(data.getVisual('style'));\n  // Stroke is rendered first to avoid overlapping with fill\n  el.style.stroke = null;\n  // Enable tooltip and user mouse/touch event handlers.\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n  progressiveEls && progressiveEls.push(el);\n}\n// Use throttle to avoid frequently traverse to find dataIndex.\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.largeDataIndices;\n  var startPoint = [];\n  var size = [];\n  var barWidth = largePath.barWidth;\n  for (var i = 0, len = points.length / 3; i < len; i++) {\n    var ii = i * 3;\n    size[baseDimIdx] = barWidth;\n    size[valueDimIdx] = points[ii + 2];\n    startPoint[baseDimIdx] = points[ii + baseDimIdx];\n    startPoint[valueDimIdx] = points[ii + valueDimIdx];\n    if (size[valueDimIdx] < 0) {\n      startPoint[valueDimIdx] += size[valueDimIdx];\n      size[valueDimIdx] = -size[valueDimIdx];\n    }\n    if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n      return largeDataIndices[i];\n    }\n  }\n  return -1;\n}\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\nexport default BarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { layout, createProgressiveLayout } from '../../layout/barGrid.js';\nimport dataSample from '../../processor/dataSample.js';\nimport BarSeries from './BarSeries.js';\nimport BarView from './BarView.js';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar'));\n  // Do layout after other overall layout, which can prepare some information.\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar'));\n  // Down sample after filter\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\r\n   * @payload\r\n   * @property {string} [componentType=series]\r\n   * @property {number} [dx]\r\n   * @property {number} [dy]\r\n   * @property {number} [zoom]\r\n   * @property {number} [originX]\r\n   * @property {number} [originY]\r\n   */\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { normalizeArcAngles } from 'zrender/lib/core/PathProxy.js';\nimport { makeInner } from '../../util/model.js';\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nexport function getBasicPieLayout(seriesModel, api) {\n  var viewRect = getViewRect(seriesModel, api);\n  // center can be string or number when coordinateSystem is specified\n  var center = seriesModel.get('center');\n  var radius = seriesModel.get('radius');\n  if (!zrUtil.isArray(radius)) {\n    radius = [0, radius];\n  }\n  var width = parsePercent(viewRect.width, api.getWidth());\n  var height = parsePercent(viewRect.height, api.getHeight());\n  var size = Math.min(width, height);\n  var r0 = parsePercent(radius[0], size / 2);\n  var r = parsePercent(radius[1], size / 2);\n  var cx;\n  var cy;\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys) {\n    // percentage is not allowed when coordinate system is specified\n    var point = coordSys.dataToPoint(center);\n    cx = point[0] || 0;\n    cy = point[1] || 0;\n  } else {\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n    cx = parsePercent(center[0], width) + viewRect.x;\n    cy = parsePercent(center[1], height) + viewRect.y;\n  }\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r\n  };\n}\nexport default function pieLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n    var _a = getBasicPieLayout(seriesModel, api),\n      cx = _a.cx,\n      cy = _a.cy,\n      r = _a.r,\n      r0 = _a.r0;\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var endAngle = seriesModel.get('endAngle');\n    var padAngle = seriesModel.get('padAngle') * RADIAN;\n    endAngle = endAngle === 'auto' ? startAngle - PI2 : -endAngle * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var minAndPadAngle = minAngle + padAngle;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim);\n    // Sum may be 0\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum');\n    // [0...max]\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0;\n    var dir = clockwise ? 1 : -1;\n    var angles = [startAngle, endAngle];\n    var halfPadAngle = dir * padAngle / 2;\n    normalizeArcAngles(angles, !clockwise);\n    startAngle = angles[0], endAngle = angles[1];\n    var layoutData = getSeriesLayoutData(seriesModel);\n    layoutData.startAngle = startAngle;\n    layoutData.endAngle = endAngle;\n    layoutData.clockwise = clockwise;\n    var angleRange = Math.abs(endAngle - startAngle);\n    // In the case some sector angle is smaller than minAngle\n    var restAngle = angleRange;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    data.setLayout({\n      viewRect: viewRect,\n      r: r\n    });\n    data.each(valueDim, function (value, idx) {\n      var angle;\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      }\n      // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = angleRange / validDataCount;\n      }\n      if (angle < minAndPadAngle) {\n        angle = minAndPadAngle;\n        restAngle -= minAndPadAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n      var endAngle = currentAngle + dir * angle;\n      // calculate display angle\n      var actualStartAngle = 0;\n      var actualEndAngle = 0;\n      if (padAngle > angle) {\n        actualStartAngle = currentAngle + dir * angle / 2;\n        actualEndAngle = actualStartAngle;\n      } else {\n        actualStartAngle = currentAngle + halfPadAngle;\n        actualEndAngle = endAngle - halfPadAngle;\n      }\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: actualStartAngle,\n        endAngle: actualEndAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    });\n    // Some sector is constrained by minAngle and padAngle\n    // Rest sectors needs recalculate angle\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle and padAngle\n      if (restAngle <= 1e-3) {\n        var angle_1 = angleRange / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_1 = data.getItemLayout(idx);\n            layout_1.angle = angle_1;\n            var actualStartAngle = 0;\n            var actualEndAngle = 0;\n            if (angle_1 < padAngle) {\n              actualStartAngle = startAngle + dir * (idx + 1 / 2) * angle_1;\n              actualEndAngle = actualStartAngle;\n            } else {\n              actualStartAngle = startAngle + dir * idx * angle_1 + halfPadAngle;\n              actualEndAngle = startAngle + dir * (idx + 1) * angle_1 - halfPadAngle;\n            }\n            layout_1.startAngle = actualStartAngle;\n            layout_1.endAngle = actualEndAngle;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_2 = data.getItemLayout(idx);\n            var angle = layout_2.angle === minAndPadAngle ? minAndPadAngle : value * unitRadian;\n            var actualStartAngle = 0;\n            var actualEndAngle = 0;\n            if (angle < padAngle) {\n              actualStartAngle = currentAngle + dir * angle / 2;\n              actualEndAngle = actualStartAngle;\n            } else {\n              actualStartAngle = currentAngle + halfPadAngle;\n              actualEndAngle = currentAngle + dir * angle - halfPadAngle;\n            }\n            layout_2.startAngle = actualStartAngle;\n            layout_2.endAngle = actualEndAngle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n  });\n}\nexport var getSeriesLayoutData = makeInner();","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// FIXME emphasis label position is not same with normal label position\nimport { parsePercent } from '../../util/number.js';\nimport { Point } from '../../util/graphic.js';\nimport { each, isNumber } from 'zrender/lib/core/util.js';\nimport { limitTurnAngle, limitSurfaceAngle } from '../../label/labelGuideHelper.js';\nimport { shiftLayoutOnY } from '../../label/labelLayoutHelper.js';\nvar RADIAN = Math.PI / 180;\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  if (list.length < 2) {\n    return;\n  }\n  ;\n  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n    var rB = semi.rB;\n    var rB2 = rB * rB;\n    for (var i = 0; i < semi.list.length; i++) {\n      var item = semi.list[i];\n      var dy = Math.abs(item.label.y - cy);\n      // horizontal r is always same with original r because x is not changed.\n      var rA = r + item.len;\n      var rA2 = rA * rA;\n      // Use ellipse implicit function to calculate x\n      var dx = Math.sqrt(Math.abs((1 - dy * dy / rB2) * rA2));\n      var newX = cx + (dx + item.len2) * dir;\n      var deltaX = newX - item.label.x;\n      var newTargetWidth = item.targetTextWidth - deltaX * dir;\n      // text x is changed, so need to recalculate width.\n      constrainTextWidth(item, newTargetWidth, true);\n      item.label.x = newX;\n    }\n  }\n  // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n  function recalculateX(items) {\n    // Extremes of\n    var topSemi = {\n      list: [],\n      maxY: 0\n    };\n    var bottomSemi = {\n      list: [],\n      maxY: 0\n    };\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].labelAlignTo !== 'none') {\n        continue;\n      }\n      var item = items[i];\n      var semi = item.label.y > cy ? bottomSemi : topSemi;\n      var dy = Math.abs(item.label.y - cy);\n      if (dy >= semi.maxY) {\n        var dx = item.label.x - cx - item.len2 * dir;\n        // horizontal r is always same with original r because x is not changed.\n        var rA = r + item.len;\n        // Canculate rB based on the topest / bottemest label.\n        var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n        semi.rB = rB;\n        semi.maxY = dy;\n      }\n      semi.list.push(item);\n    }\n    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n  }\n  var len = list.length;\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].label.x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].label.x = farthestX;\n    }\n  }\n  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n    recalculateX(list);\n  }\n}\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var label = labelLayoutList[i].label;\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n    if (label.x < cx) {\n      leftmostX = Math.min(leftmostX, label.x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, label.x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      if (layout.labelStyleWidth != null) {\n        continue;\n      }\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var targetTextWidth = void 0;\n      if (layout.labelAlignTo === 'edge') {\n        if (label.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n        }\n      } else if (layout.labelAlignTo === 'labelLine') {\n        if (label.x < cx) {\n          targetTextWidth = leftmostX - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - rightmostX - layout.bleedMargin;\n        }\n      } else {\n        if (label.x < cx) {\n          targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n        }\n      }\n      layout.targetTextWidth = targetTextWidth;\n      constrainTextWidth(layout, targetTextWidth);\n    }\n  }\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var padding = label.style.padding;\n      var paddingH = padding ? padding[1] + padding[3] : 0;\n      // textRect.width already contains paddingH if bgColor is set\n      var extraPaddingH = label.style.backgroundColor ? 0 : paddingH;\n      var realTextWidth = layout.rect.width + extraPaddingH;\n      var dist = linePoints[1][0] - linePoints[2][0];\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          linePoints[2][0] = label.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = label.x - layout.labelDistance;\n        }\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n      linePoints[1][1] = linePoints[2][1] = label.y;\n    }\n  }\n}\n/**\r\n * Set max width of each label, and then wrap each label to the max width.\r\n *\r\n * @param layout label layout\r\n * @param availableWidth max width for the label to display\r\n * @param forceRecalculate recaculate the text layout even if the current width\r\n * is smaller than `availableWidth`. This is useful when the text was previously\r\n * wrapped by calling `constrainTextWidth` but now `availableWidth` changed, in\r\n * which case, previous wrapping should be redo.\r\n */\nfunction constrainTextWidth(layout, availableWidth, forceRecalculate) {\n  if (forceRecalculate === void 0) {\n    forceRecalculate = false;\n  }\n  if (layout.labelStyleWidth != null) {\n    // User-defined style.width has the highest priority.\n    return;\n  }\n  var label = layout.label;\n  var style = label.style;\n  var textRect = layout.rect;\n  var bgColor = style.backgroundColor;\n  var padding = style.padding;\n  var paddingH = padding ? padding[1] + padding[3] : 0;\n  var overflow = style.overflow;\n  // textRect.width already contains paddingH if bgColor is set\n  var oldOuterWidth = textRect.width + (bgColor ? 0 : paddingH);\n  if (availableWidth < oldOuterWidth || forceRecalculate) {\n    var oldHeight = textRect.height;\n    if (overflow && overflow.match('break')) {\n      // Temporarily set background to be null to calculate\n      // the bounding box without background.\n      label.setStyle('backgroundColor', null);\n      // Set constraining width\n      label.setStyle('width', availableWidth - paddingH);\n      // This is the real bounding box of the text without padding.\n      var innerRect = label.getBoundingRect();\n      label.setStyle('width', Math.ceil(innerRect.width));\n      label.setStyle('backgroundColor', bgColor);\n    } else {\n      var availableInnerWidth = availableWidth - paddingH;\n      var newWidth = availableWidth < oldOuterWidth\n      // Current text is too wide, use `availableWidth` as max width.\n      ? availableInnerWidth :\n      // Current available width is enough, but the text may have\n      // already been wrapped with a smaller available width.\n      forceRecalculate ? availableInnerWidth > layout.unconstrainedWidth\n      // Current available is larger than text width,\n      // so don't constrain width (otherwise it may have\n      // empty space in the background).\n      ? null\n      // Current available is smaller than text width, so\n      // use the current available width as constraining\n      // width.\n      : availableInnerWidth\n      // Current available width is enough, so no need to\n      // constrain.\n      : null;\n      label.setStyle('width', newWidth);\n    }\n    var newRect = label.getBoundingRect();\n    textRect.width = newRect.width;\n    var margin = (label.style.margin || 0) + 2.1;\n    textRect.height = newRect.height + margin;\n    textRect.y -= (textRect.height - oldHeight) / 2;\n  }\n}\nfunction isPositionCenter(sectorShape) {\n  // Not change x for center label\n  return sectorShape.position === 'center';\n}\nexport default function pieLabelLayout(seriesModel) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  var viewRect = data.getLayout('viewRect');\n  var r = data.getLayout('r');\n  var viewWidth = viewRect.width;\n  var viewLeft = viewRect.x;\n  var viewTop = viewRect.y;\n  var viewHeight = viewRect.height;\n  function setNotShow(el) {\n    el.ignore = true;\n  }\n  function isLabelShown(label) {\n    if (!label.ignore) {\n      return true;\n    }\n    for (var key in label.states) {\n      if (label.states[key].ignore === false) {\n        return true;\n      }\n    }\n    return false;\n  }\n  data.each(function (idx) {\n    var sector = data.getItemGraphicEl(idx);\n    var sectorShape = sector.shape;\n    var label = sector.getTextContent();\n    var labelLine = sector.getTextGuideLine();\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    // Use position in normal or emphasis\n    var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var edgeDistance = parsePercent(labelModel.get('edgeDistance'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n      each(label.states, setNotShow);\n      label.ignore = true;\n      if (labelLine) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      }\n      return;\n    }\n    if (!isLabelShown(label)) {\n      return;\n    }\n    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n    var nx = Math.cos(midAngle);\n    var ny = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = sectorShape.cx;\n    cy = sectorShape.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n    if (labelPosition === 'center') {\n      textX = sectorShape.cx;\n      textY = sectorShape.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n      textX = x1 + nx * 3;\n      textY = y1 + ny * 3;\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n        } else {\n          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n        }\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n    }\n    var PI = Math.PI;\n    var labelRotate = 0;\n    var rotate = labelModel.get('rotate');\n    if (isNumber(rotate)) {\n      labelRotate = rotate * (PI / 180);\n    } else if (labelPosition === 'center') {\n      labelRotate = 0;\n    } else if (rotate === 'radial' || rotate === true) {\n      var radialAngle = nx < 0 ? -midAngle + PI : -midAngle;\n      labelRotate = radialAngle;\n    } else if (rotate === 'tangential' && labelPosition !== 'outside' && labelPosition !== 'outer') {\n      var rad = Math.atan2(nx, ny);\n      if (rad < 0) {\n        rad = PI * 2 + rad;\n      }\n      var isDown = ny > 0;\n      if (isDown) {\n        rad = PI + rad;\n      }\n      labelRotate = rad - PI;\n    }\n    hasLabelRotate = !!labelRotate;\n    label.x = textX;\n    label.y = textY;\n    label.rotation = labelRotate;\n    label.setStyle({\n      verticalAlign: 'middle'\n    });\n    // Not sectorShape the inside label\n    if (!isLabelInside) {\n      var textRect = label.getBoundingRect().clone();\n      textRect.applyTransform(label.getComputedTransform());\n      // Text has a default 1px stroke. Exclude this.\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.y -= margin / 2;\n      textRect.height += margin;\n      labelLayoutList.push({\n        label: label,\n        labelLine: labelLine,\n        position: labelPosition,\n        len: labelLineLen,\n        len2: labelLineLen2,\n        minTurnAngle: labelLineModel.get('minTurnAngle'),\n        maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n        surfaceNormal: new Point(nx, ny),\n        linePoints: linePoints,\n        textAlign: textAlign,\n        labelDistance: labelDistance,\n        labelAlignTo: labelAlignTo,\n        edgeDistance: edgeDistance,\n        bleedMargin: bleedMargin,\n        rect: textRect,\n        unconstrainedWidth: textRect.width,\n        labelStyleWidth: label.style.width\n      });\n    } else {\n      label.setStyle({\n        align: textAlign\n      });\n      var selectState = label.states.select;\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n    sector.setTextConfig({\n      inside: isLabelInside\n    });\n  });\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n    var labelLine = layout.labelLine;\n    var notShowLabel = isNaN(label.x) || isNaN(label.y);\n    if (label) {\n      label.setStyle({\n        align: layout.textAlign\n      });\n      if (notShowLabel) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n      }\n      var selectState = label.states.select;\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n    if (labelLine) {\n      var linePoints = layout.linePoints;\n      if (notShowLabel || !linePoints) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      } else {\n        limitTurnAngle(linePoints, layout.minTurnAngle);\n        limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n        labelLine.setShape({\n          points: linePoints\n        });\n        // Set the anchor to the midpoint of sector\n        label.__hostTarget.textGuideLineConfig = {\n          anchor: new Point(linePoints[0][0], linePoints[0][1])\n        };\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { extend, retrieve3 } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport labelLayout from './labelLayout.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getBasicPieLayout, getSeriesLayoutData } from './pieLayout.js';\n/**\r\n * Piece of pie including Sector, Label, LabelLine\r\n */\nvar PiePiece = /** @class */function (_super) {\n  __extends(PiePiece, _super);\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n    _this.z2 = 2;\n    var text = new graphic.Text();\n    _this.setTextContent(text);\n    _this.updateData(data, idx, startAngle, true);\n    return _this;\n  }\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx);\n    // cornerRadius & innerCornerRadius doesn't exist in the item layout. Use `0` if null value is specified.\n    // see `setItemLayout` in `pieLayout.ts`.\n    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout, true), layout);\n    // Ignore NaN data.\n    if (isNaN(sectorShape.startAngle)) {\n      // Use NaN shape to avoid drawing shape.\n      sector.setShape(sectorShape);\n      return;\n    }\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n      if (seriesModel.ecModel.ssr) {\n        // Use scale animation in SSR mode(opacity?)\n        // Because CSS SVG animation doesn't support very customized shape animation.\n        graphic.initProps(sector, {\n          scaleX: 0,\n          scaleY: 0\n        }, seriesModel, {\n          dataIndex: idx,\n          isFrom: true\n        });\n        sector.originX = sectorShape.cx;\n        sector.originY = sectorShape.cy;\n      } else if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      }\n      // Expansion\n      else {\n        if (startAngle != null) {\n          sector.setShape({\n            startAngle: startAngle,\n            endAngle: startAngle\n          });\n          graphic.initProps(sector, {\n            shape: {\n              startAngle: layout.startAngle,\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        } else {\n          sector.shape.endAngle = layout.startAngle;\n          graphic.updateProps(sector, {\n            shape: {\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        }\n      }\n    } else {\n      saveOldStyle(sector);\n      // Transition animation from the old shape\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n    this._updateLabel(seriesModel, data, idx);\n    sector.ensureState('emphasis').shape = extend({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    extend(sector.ensureState('blur'), {\n      shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    labelLine && extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    // TODO: needs dx, dy in zrender?\n    extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    setLabelStyle(sector, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent();\n    // Set textConfig on sector.\n    sector.setTextConfig({\n      // reset position, rotation\n      position: null,\n      rotation: null\n    });\n    // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n    labelText.attr({\n      z2: 10\n    });\n    var labelPosition = seriesModel.get(['label', 'position']);\n    if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n      sector.removeTextGuideLine();\n    } else {\n      var polyline = this.getTextGuideLine();\n      if (!polyline) {\n        polyline = new graphic.Polyline();\n        this.setTextGuideLine(polyline);\n      }\n      // Default use item visual color\n      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n        stroke: visualColor,\n        opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n      });\n    }\n  };\n  return PiePiece;\n}(graphic.Sector);\n// Pie view\nvar PieView = /** @class */function (_super) {\n  __extends(PieView, _super);\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle;\n    // First render\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    }\n    // remove empty-circle if it exists\n    if (this._emptyCircleSector) {\n      group.remove(this._emptyCircleSector);\n    }\n    // when all data are filtered, show lightgray empty circle\n    if (data.count() === 0 && seriesModel.get('showEmptyCircle')) {\n      var layoutData = getSeriesLayoutData(seriesModel);\n      var sector = new graphic.Sector({\n        shape: extend(getBasicPieLayout(seriesModel, api), layoutData)\n      });\n      sector.useStyle(seriesModel.getModel('emptyCircleStyle').getItemStyle());\n      this._emptyCircleSector = sector;\n      group.add(sector);\n    }\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout(seriesModel);\n    // Always use initial animation.\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n  PieView.prototype.dispose = function () {};\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n  PieView.type = 'pie';\n  return PieView;\n}(ChartView);\nexport default PieView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { extend, isArray } from 'zrender/lib/core/util.js';\n/**\r\n * [Usage]:\r\n * (1)\r\n * createListSimply(seriesModel, ['value']);\r\n * (2)\r\n * createListSimply(seriesModel, {\r\n *     coordDimensions: ['value'],\r\n *     dimensionsCount: 5\r\n * });\r\n */\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({\n    encodeDefine: seriesModel.getEncode()\n  }, opt);\n  var source = seriesModel.getSource();\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n  var list = new SeriesData(dimensions, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { getPercentSeats } from '../../util/number.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nvar innerData = modelUtil.makeInner();\nvar PieSeriesModel = /** @class */function (_super) {\n  __extends(PieSeriesModel, _super);\n  function PieSeriesModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * @overwrite\r\n   */\n  PieSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n    this._defaultLabelLine(option);\n  };\n  /**\r\n   * @overwrite\r\n   */\n  PieSeriesModel.prototype.mergeOption = function () {\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  /**\r\n   * @overwrite\r\n   */\n  PieSeriesModel.prototype.getInitialData = function () {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  /**\r\n   * @overwrite\r\n   */\n  PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n    // update seats when data is changed\n    var dataInner = innerData(data);\n    var seats = dataInner.seats;\n    if (!seats) {\n      var valueList_1 = [];\n      data.each(data.mapDimension('value'), function (value) {\n        valueList_1.push(value);\n      });\n      seats = dataInner.seats = getPercentSeats(valueList_1, data.hostModel.get('percentPrecision'));\n    }\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n    // seats may be empty when sum is 0\n    params.percent = seats[dataIndex] || 0;\n    params.$vars.push('percent');\n    return params;\n  };\n  PieSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine;\n    // Not show label line if `label.normal.show = false`\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n  PieSeriesModel.type = 'series.pie';\n  PieSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    endAngle: 'auto',\n    padAngle: 0,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // color: 'inherit',\n      // If rotate around circle\n      rotate: 0,\n      show: true,\n      overflow: 'truncate',\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      edgeDistance: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5\n      // formatter: 标签文本格式器，同 tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见 textStyle\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      minTurnAngle: 90,\n      maxSurfaceAngle: 90,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderJoin: 'round'\n    },\n    showEmptyCircle: true,\n    emptyCircleStyle: {\n      color: 'lightgray',\n      opacity: 1\n    },\n    labelLayout: {\n      // Hide the overlapped label.\n      hideOverlap: true\n    },\n    emphasis: {\n      scale: true,\n      scaleSize: 5\n    },\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasingUpdate: 'cubicInOut',\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut'\n  };\n  return PieSeriesModel;\n}(SeriesModel);\nexport default PieSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\nimport pieLayout from '../pie/pieLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport PieView from './PieView.js';\nimport PieSeriesModel from './PieSeries.js';\nimport negativeDataFilter from '../../processor/negativeDataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(PieView);\n  registers.registerSeriesModel(PieSeriesModel);\n  createLegacyDataSelectAction('pie', registers.registerAction);\n  registers.registerLayout(curry(pieLayout, 'pie'));\n  registers.registerProcessor(dataFilter('pie'));\n  registers.registerProcessor(negativeDataFilter('pie'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nvar ScatterSeriesModel = /** @class */function (_super) {\n  __extends(ScatterSeriesModel, _super);\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n    return progressive;\n  };\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n    return progressiveThreshold;\n  };\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n  ScatterSeriesModel.prototype.getZLevelKey = function () {\n    // Each progressive series has individual key.\n    return this.getData().count() > this.getProgressiveThreshold() ? this.id : '';\n  };\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // 图形旋转控制\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8\n      // color: 各异\n    },\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    }\n    // progressive: null\n  };\n  return ScatterSeriesModel;\n}(SeriesModel);\nexport default ScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { getECData } from '../../util/innerStore.js';\nvar BOOST_SIZE_THRESHOLD = 4;\nvar LargeSymbolPathShape = /** @class */function () {\n  function LargeSymbolPathShape() {}\n  return LargeSymbolPathShape;\n}();\nvar LargeSymbolPath = /** @class */function (_super) {\n  __extends(LargeSymbolPath, _super);\n  function LargeSymbolPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n  LargeSymbolPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\n    var softClipShape = this.softClipShape;\n    var i;\n    // Do draw in afterBrush.\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n    this._ctx = null;\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n    var softClipShape = this.softClipShape;\n    var i;\n    if (!ctx) {\n      return;\n    }\n    // PENDING If style or other canvas status changed?\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n      // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4);\n    // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n    return -1;\n  };\n  LargeSymbolPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n    this.hoverDataIdx = -1;\n    return false;\n  };\n  LargeSymbolPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var w = size[0];\n      var h = size[1];\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n      rect = this._rect = new graphic.BoundingRect(minX - w / 2, minY - h / 2, maxX - minX + w, maxY - minY + h);\n    }\n    return rect;\n  };\n  return LargeSymbolPath;\n}(graphic.Path);\nvar LargeSymbolDraw = /** @class */function () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\r\n   * Update symbols draw by new data\r\n   */\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this._clear();\n    var symbolEl = this._create();\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n    this._setCommon(symbolEl, data, opt);\n  };\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n      child.setShape('points', points);\n      // Reset draw cursor.\n      child.reset();\n    });\n  };\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._clear();\n  };\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var lastAdded = this._newAdded[0];\n    var points = data.getLayout('points');\n    var oldPoints = lastAdded && lastAdded.shape.points;\n    // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n    if (oldPoints && oldPoints.length < 2e4) {\n      var oldLen = oldPoints.length;\n      var newPoints = new Float32Array(oldLen + points.length);\n      // Concat two array\n      newPoints.set(oldPoints);\n      newPoints.set(points, oldLen);\n      // Update endIndex\n      lastAdded.endIndex = taskParams.end;\n      lastAdded.setShape({\n        points: newPoints\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n      var symbolEl = this._create();\n      symbolEl.startIndex = taskParams.start;\n      symbolEl.endIndex = taskParams.end;\n      symbolEl.incremental = true;\n      symbolEl.setShape({\n        points: points\n      });\n      this._setCommon(symbolEl, data, opt);\n    }\n  };\n  LargeSymbolDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n  LargeSymbolDraw.prototype._create = function () {\n    var symbolEl = new LargeSymbolPath({\n      cursor: 'default'\n    });\n    symbolEl.ignoreCoarsePointer = true;\n    this.group.add(symbolEl);\n    this._newAdded.push(symbolEl);\n    return symbolEl;\n  };\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null;\n    // Create symbolProxy to build path for each data\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0);\n    // Use symbolProxy setColor method\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle(\n    // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n    var ecData = getECData(symbolEl);\n    // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n    ecData.seriesIndex = hostModel.seriesIndex;\n    symbolEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = symbolEl.hoverDataIdx;\n      if (dataIndex >= 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n      }\n    });\n  };\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clear();\n  };\n  LargeSymbolDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n  return LargeSymbolDraw;\n}();\nexport default LargeSymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\nvar ScatterView = /** @class */function (_super) {\n  __extends(ScatterView, _super);\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScatterView.type;\n    return _this;\n  }\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n    this.group.dirty();\n    if (!this._finished || data.count() > 1e4) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n  ScatterView.prototype.eachRendered = function (cb) {\n    this._symbolDraw && this._symbolDraw.eachRendered(cb);\n  };\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    if (!seriesModel.get('clip', true)) {\n      return;\n    }\n    var coordSys = seriesModel.coordinateSystem;\n    // PENDING make `0.1` configurable, for example, `clipTolerance`?\n    return coordSys && coordSys.getArea && coordSys.getArea(.1);\n  };\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n  ScatterView.prototype.dispose = function () {};\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\nexport default ScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport ScatterSeriesModel from './ScatterSeries.js';\nimport ScatterView from './ScatterView.js';\nimport { install as installGridSimple } from '../../component/grid/installSimple.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function radarLayout(ecModel) {\n  ecModel.eachSeriesByType('radar', function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    var coordSys = seriesModel.coordinateSystem;\n    if (!coordSys) {\n      return;\n    }\n    var axes = coordSys.getIndicatorAxes();\n    zrUtil.each(axes, function (axis, axisIndex) {\n      data.each(data.mapDimension(axes[axisIndex].dim), function (val, dataIndex) {\n        points[dataIndex] = points[dataIndex] || [];\n        var point = coordSys.dataToPoint(val, axisIndex);\n        points[dataIndex][axisIndex] = isValidPoint(point) ? point : getValueMissingPoint(coordSys);\n      });\n    });\n    // Close polygon\n    data.each(function (idx) {\n      // TODO\n      // Is it appropriate to connect to the next data when some data is missing?\n      // Or, should trade it like `connectNull` in line chart?\n      var firstPoint = zrUtil.find(points[idx], function (point) {\n        return isValidPoint(point);\n      }) || getValueMissingPoint(coordSys);\n      // Copy the first actual point to the end of the array\n      points[idx].push(firstPoint.slice());\n      data.setItemLayout(idx, points[idx]);\n    });\n  });\n}\nfunction isValidPoint(point) {\n  return !isNaN(point[0]) && !isNaN(point[1]);\n}\nfunction getValueMissingPoint(coordSys) {\n  // It is error-prone to input [NaN, NaN] into polygon, polygon.\n  // (probably cause problem when refreshing or animating)\n  return [coordSys.cx, coordSys.cy];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\n// Backward compat for radar chart in 2\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function radarBackwardCompat(option) {\n  var polarOptArr = option.polar;\n  if (polarOptArr) {\n    if (!zrUtil.isArray(polarOptArr)) {\n      polarOptArr = [polarOptArr];\n    }\n    var polarNotRadar_1 = [];\n    zrUtil.each(polarOptArr, function (polarOpt, idx) {\n      if (polarOpt.indicator) {\n        if (polarOpt.type && !polarOpt.shape) {\n          polarOpt.shape = polarOpt.type;\n        }\n        option.radar = option.radar || [];\n        if (!zrUtil.isArray(option.radar)) {\n          option.radar = [option.radar];\n        }\n        option.radar.push(polarOpt);\n      } else {\n        polarNotRadar_1.push(polarOpt);\n      }\n    });\n    option.polar = polarNotRadar_1;\n  }\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'radar' && seriesOpt.polarIndex) {\n      seriesOpt.radarIndex = seriesOpt.polarIndex;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar RadarView = /** @class */function (_super) {\n  __extends(RadarView, _super);\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadarView.type;\n    return _this;\n  }\n  RadarView.prototype.render = function (seriesModel, ecModel, api) {\n    var polar = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    function createSymbol(data, idx) {\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n      if (symbolType === 'none') {\n        return;\n      }\n      var symbolSize = symbolUtil.normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2);\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate') || 0;\n      symbolPath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 100,\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2,\n        rotation: symbolRotate * Math.PI / 180 || 0\n      });\n      return symbolPath;\n    }\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\n      // Simply rerender all\n      symbolGroup.removeAll();\n      for (var i = 0; i < newPoints.length - 1; i++) {\n        var symbolPath = createSymbol(data, idx);\n        if (symbolPath) {\n          symbolPath.__dimIdx = i;\n          if (oldPoints[i]) {\n            symbolPath.setPosition(oldPoints[i]);\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\n              x: newPoints[i][0],\n              y: newPoints[i][1]\n            }, seriesModel, idx);\n          } else {\n            symbolPath.setPosition(newPoints[i]);\n          }\n          symbolGroup.add(symbolPath);\n        }\n      }\n    }\n    function getInitialPoints(points) {\n      return zrUtil.map(points, function (pt) {\n        return [polar.cx, polar.cy];\n      });\n    }\n    data.diff(oldData).add(function (idx) {\n      var points = data.getItemLayout(idx);\n      if (!points) {\n        return;\n      }\n      var polygon = new graphic.Polygon();\n      var polyline = new graphic.Polyline();\n      var target = {\n        shape: {\n          points: points\n        }\n      };\n      polygon.shape.points = getInitialPoints(points);\n      polyline.shape.points = getInitialPoints(points);\n      graphic.initProps(polygon, target, seriesModel, idx);\n      graphic.initProps(polyline, target, seriesModel, idx);\n      var itemGroup = new graphic.Group();\n      var symbolGroup = new graphic.Group();\n      itemGroup.add(polyline);\n      itemGroup.add(polygon);\n      itemGroup.add(symbolGroup);\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\n      data.setItemGraphicEl(idx, itemGroup);\n    }).update(function (newIdx, oldIdx) {\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var target = {\n        shape: {\n          points: data.getItemLayout(newIdx)\n        }\n      };\n      if (!target.shape.points) {\n        return;\n      }\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\n      saveOldStyle(polygon);\n      saveOldStyle(polyline);\n      graphic.updateProps(polyline, target, seriesModel);\n      graphic.updateProps(polygon, target, seriesModel);\n      data.setItemGraphicEl(newIdx, itemGroup);\n    }).remove(function (idx) {\n      group.remove(oldData.getItemGraphicEl(idx));\n    }).execute();\n    data.eachItemGraphicEl(function (itemGroup, idx) {\n      var itemModel = data.getItemModel(idx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      // Radar uses the visual encoded from itemStyle.\n      var itemStyle = data.getItemVisual(idx, 'style');\n      var color = itemStyle.fill;\n      group.add(itemGroup);\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle').getLineStyle(), {\n        fill: 'none',\n        stroke: color\n      }));\n      setStatesStylesFromModel(polyline, itemModel, 'lineStyle');\n      setStatesStylesFromModel(polygon, itemModel, 'areaStyle');\n      var areaStyleModel = itemModel.getModel('areaStyle');\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\n      polygon.ignore = polygonIgnore;\n      zrUtil.each(['emphasis', 'select', 'blur'], function (stateName) {\n        var stateModel = itemModel.getModel([stateName, 'areaStyle']);\n        var stateIgnore = stateModel.isEmpty() && stateModel.parentModel.isEmpty();\n        // Won't be ignore if normal state is not ignore.\n        polygon.ensureState(stateName).ignore = stateIgnore && polygonIgnore;\n      });\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: color,\n        opacity: 0.7,\n        decal: itemStyle.decal\n      }));\n      var emphasisModel = itemModel.getModel('emphasis');\n      var itemHoverStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      symbolGroup.eachChild(function (symbolPath) {\n        if (symbolPath instanceof ZRImage) {\n          var pathStyle = symbolPath.style;\n          symbolPath.useStyle(zrUtil.extend({\n            // TODO other properties like x, y ?\n            image: pathStyle.image,\n            x: pathStyle.x,\n            y: pathStyle.y,\n            width: pathStyle.width,\n            height: pathStyle.height\n          }, itemStyle));\n        } else {\n          symbolPath.useStyle(itemStyle);\n          symbolPath.setColor(color);\n          symbolPath.style.strokeNoScale = true;\n        }\n        var pathEmphasisState = symbolPath.ensureState('emphasis');\n        pathEmphasisState.style = zrUtil.clone(itemHoverStyle);\n        var defaultText = data.getStore().get(data.getDimensionIndex(symbolPath.__dimIdx), idx);\n        (defaultText == null || isNaN(defaultText)) && (defaultText = '');\n        setLabelStyle(symbolPath, getLabelStatesModels(itemModel), {\n          labelFetcher: data.hostModel,\n          labelDataIndex: idx,\n          labelDimIndex: symbolPath.__dimIdx,\n          defaultText: defaultText,\n          inheritColor: color,\n          defaultOpacity: itemStyle.opacity\n        });\n      });\n      toggleHoverEmphasis(itemGroup, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    this._data = data;\n  };\n  RadarView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n  RadarView.type = 'radar';\n  return RadarView;\n}(ChartView);\nexport default RadarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport { createTooltipMarkup, retrieveVisualColorForTooltipMarker } from '../../component/tooltip/tooltipMarkup.js';\nvar RadarSeriesModel = /** @class */function (_super) {\n  __extends(RadarSeriesModel, _super);\n  function RadarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  // Overwrite\n  RadarSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  RadarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      generateCoord: 'indicator_',\n      generateCoordCount: Infinity\n    });\n  };\n  RadarSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var coordSys = this.coordinateSystem;\n    var indicatorAxes = coordSys.getIndicatorAxes();\n    var name = this.getData().getName(dataIndex);\n    var nameToDisplay = name === '' ? this.name : name;\n    var markerColor = retrieveVisualColorForTooltipMarker(this, dataIndex);\n    return createTooltipMarkup('section', {\n      header: nameToDisplay,\n      sortBlocks: true,\n      blocks: zrUtil.map(indicatorAxes, function (axis) {\n        var val = data.get(data.mapDimension(axis.dim), dataIndex);\n        return createTooltipMarkup('nameValue', {\n          markerType: 'subItem',\n          markerColor: markerColor,\n          name: axis.name,\n          value: val,\n          sortParam: val\n        });\n      })\n    });\n  };\n  RadarSeriesModel.prototype.getTooltipPosition = function (dataIndex) {\n    if (dataIndex != null) {\n      var data_1 = this.getData();\n      var coordSys = this.coordinateSystem;\n      var values = data_1.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data_1.mapDimension(dim);\n      }), dataIndex);\n      for (var i = 0, len = values.length; i < len; i++) {\n        if (!isNaN(values[i])) {\n          var indicatorAxes = coordSys.getIndicatorAxes();\n          return coordSys.coordToPoint(indicatorAxes[i].dataToCoord(values[i]), i);\n        }\n      }\n    }\n  };\n  RadarSeriesModel.type = 'series.radar';\n  RadarSeriesModel.dependencies = ['radar'];\n  RadarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'radar',\n    legendHoverLink: true,\n    radarIndex: 0,\n    lineStyle: {\n      width: 2,\n      type: 'solid',\n      join: 'round'\n    },\n    label: {\n      position: 'top'\n    },\n    // areaStyle: {\n    // },\n    // itemStyle: {}\n    symbolSize: 8\n    // symbolRotate: null\n  };\n  return RadarSeriesModel;\n}(SeriesModel);\nexport default RadarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport radarLayout from '../radar/radarLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport backwardCompat from '../radar/backwardCompat.js';\nimport RadarView from './RadarView.js';\nimport RadarSeriesModel from './RadarSeries.js';\nimport { install as installRadarComponent } from '../../component/radar/install.js';\nexport function install(registers) {\n  use(installRadarComponent);\n  registers.registerChartView(RadarView);\n  registers.registerSeriesModel(RadarSeriesModel);\n  registers.registerLayout(radarLayout);\n  registers.registerProcessor(dataFilter('radar'));\n  registers.registerPreprocessor(backwardCompat);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport MapDraw from '../../component/helper/MapDraw.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { setStatesFlag, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nvar MapView = /** @class */function (_super) {\n  __extends(MapView, _super);\n  function MapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MapView.type;\n    return _this;\n  }\n  MapView.prototype.render = function (mapModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n    var group = this.group;\n    group.removeAll();\n    if (mapModel.getHostGeoModel()) {\n      return;\n    }\n    if (this._mapDraw && payload && payload.type === 'geoRoam') {\n      this._mapDraw.resetForLabelLayout();\n    }\n    // Not update map if it is an roam action from self\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\n      if (mapModel.needsDrawMap) {\n        var mapDraw = this._mapDraw || new MapDraw(api);\n        group.add(mapDraw.group);\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\n        this._mapDraw = mapDraw;\n      } else {\n        // Remove drawn map\n        this._mapDraw && this._mapDraw.remove();\n        this._mapDraw = null;\n      }\n    } else {\n      var mapDraw = this._mapDraw;\n      mapDraw && group.add(mapDraw.group);\n    }\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\n  };\n  MapView.prototype.remove = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n    this.group.removeAll();\n  };\n  MapView.prototype.dispose = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n  };\n  MapView.prototype._renderSymbols = function (mapModel, ecModel, api) {\n    var originalData = mapModel.originalData;\n    var group = this.group;\n    originalData.each(originalData.mapDimension('value'), function (value, originalDataIndex) {\n      if (isNaN(value)) {\n        return;\n      }\n      var layout = originalData.getItemLayout(originalDataIndex);\n      if (!layout || !layout.point) {\n        // Not exists in map\n        return;\n      }\n      var point = layout.point;\n      var offset = layout.offset;\n      var circle = new graphic.Circle({\n        style: {\n          // Because the special of map draw.\n          // Which needs statistic of multiple series and draw on one map.\n          // And each series also need a symbol with legend color\n          //\n          // Layout and visual are put one the different data\n          // TODO\n          fill: mapModel.getData().getVisual('style').fill\n        },\n        shape: {\n          cx: point[0] + offset * 9,\n          cy: point[1],\n          r: 3\n        },\n        silent: true,\n        // Do not overlap the first series, on which labels are displayed.\n        z2: 8 + (!offset ? Z2_EMPHASIS_LIFT + 1 : 0)\n      });\n      // Only the series that has the first value on the same region is in charge of rendering the label.\n      // But consider the case:\n      // series: [\n      //     {id: 'X', type: 'map', map: 'm', {data: [{name: 'A', value: 11}, {name: 'B', {value: 22}]},\n      //     {id: 'Y', type: 'map', map: 'm', {data: [{name: 'A', value: 21}, {name: 'C', {value: 33}]}\n      // ]\n      // The offset `0` of item `A` is at series `X`, but of item `C` is at series `Y`.\n      // For backward compatibility, we follow the rule that render label `A` by the\n      // settings on series `X` but render label `C` by the settings on series `Y`.\n      if (!offset) {\n        var fullData = mapModel.mainSeries.getData();\n        var name_1 = originalData.getName(originalDataIndex);\n        var fullIndex_1 = fullData.indexOfName(name_1);\n        var itemModel = originalData.getItemModel(originalDataIndex);\n        var labelModel = itemModel.getModel('label');\n        var regionGroup = fullData.getItemGraphicEl(fullIndex_1);\n        // `getFormattedLabel` needs to use `getData` inside. Here\n        // `mapModel.getData()` is shallow cloned from `mainSeries.getData()`.\n        // FIXME\n        // If this is not the `mainSeries`, the item model (like label formatter)\n        // set on original data item will never get. But it has been working\n        // like that from the beginning, and this scenario is rarely encountered.\n        // So it won't be fixed until we have to.\n        setLabelStyle(circle, getLabelStatesModels(itemModel), {\n          labelFetcher: {\n            getFormattedLabel: function (idx, state) {\n              return mapModel.getFormattedLabel(fullIndex_1, state);\n            }\n          },\n          defaultText: name_1\n        });\n        circle.disableLabelAnimation = true;\n        if (!labelModel.get('position')) {\n          circle.setTextConfig({\n            position: 'bottom'\n          });\n        }\n        regionGroup.onHoverStateChange = function (toState) {\n          setStatesFlag(circle, toState);\n        };\n      }\n      group.add(circle);\n    });\n  };\n  MapView.type = 'map';\n  return MapView;\n}(ChartView);\nexport default MapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport SeriesModel from '../../model/Series.js';\nimport geoSourceManager from '../../coord/geo/geoSourceManager.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { createSymbol } from '../../util/symbol.js';\nvar MapSeries = /** @class */function (_super) {\n  __extends(MapSeries, _super);\n  function MapSeries() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MapSeries.type;\n    // Only first map series of same mapType will drawMap.\n    _this.needsDrawMap = false;\n    // Group of all map series with same mapType\n    _this.seriesGroup = [];\n    _this.getTooltipPosition = function (dataIndex) {\n      if (dataIndex != null) {\n        var name_1 = this.getData().getName(dataIndex);\n        var geo = this.coordinateSystem;\n        var region = geo.getRegion(name_1);\n        return region && geo.dataToPoint(region.getCenter());\n      }\n    };\n    return _this;\n  }\n  MapSeries.prototype.getInitialData = function (option) {\n    var data = createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n    var dataNameIndexMap = zrUtil.createHashMap();\n    var toAppendItems = [];\n    for (var i = 0, len = data.count(); i < len; i++) {\n      var name_2 = data.getName(i);\n      dataNameIndexMap.set(name_2, i);\n    }\n    var geoSource = geoSourceManager.load(this.getMapType(), this.option.nameMap, this.option.nameProperty);\n    zrUtil.each(geoSource.regions, function (region) {\n      var name = region.name;\n      var dataNameIdx = dataNameIndexMap.get(name);\n      // apply specified echarts style in GeoJSON data\n      var specifiedGeoJSONRegionStyle = region.properties && region.properties.echartsStyle;\n      var dataItem;\n      if (dataNameIdx == null) {\n        dataItem = {\n          name: name\n        };\n        toAppendItems.push(dataItem);\n      } else {\n        dataItem = data.getRawDataItem(dataNameIdx);\n      }\n      specifiedGeoJSONRegionStyle && zrUtil.merge(dataItem, specifiedGeoJSONRegionStyle);\n    });\n    // Complete data with missing regions. The consequent processes (like visual\n    // map and render) can not be performed without a \"full data\". For example,\n    // find `dataIndex` by name.\n    data.appendData(toAppendItems);\n    return data;\n  };\n  /**\r\n   * If no host geo model, return null, which means using a\r\n   * inner exclusive geo model.\r\n   */\n  MapSeries.prototype.getHostGeoModel = function () {\n    var geoIndex = this.option.geoIndex;\n    return geoIndex != null ? this.ecModel.getComponent('geo', geoIndex) : null;\n  };\n  MapSeries.prototype.getMapType = function () {\n    return (this.getHostGeoModel() || this).option.map;\n  };\n  // _fillOption(option, mapName) {\n  // Shallow clone\n  // option = zrUtil.extend({}, option);\n  // option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap);\n  // return option;\n  // }\n  MapSeries.prototype.getRawValue = function (dataIndex) {\n    // Use value stored in data instead because it is calculated from multiple series\n    // FIXME Provide all value of multiple series ?\n    var data = this.getData();\n    return data.get(data.mapDimension('value'), dataIndex);\n  };\n  /**\r\n   * Get model of region\r\n   */\n  MapSeries.prototype.getRegionModel = function (regionName) {\n    var data = this.getData();\n    return data.getItemModel(data.indexOfName(regionName));\n  };\n  /**\r\n   * Map tooltip formatter\r\n   */\n  MapSeries.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // FIXME orignalData and data is a bit confusing\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    var seriesGroup = this.seriesGroup;\n    var seriesNames = [];\n    for (var i = 0; i < seriesGroup.length; i++) {\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\n      var valueDim = data.mapDimension('value');\n      if (!isNaN(seriesGroup[i].originalData.get(valueDim, otherIndex))) {\n        seriesNames.push(seriesGroup[i].name);\n      }\n    }\n    return createTooltipMarkup('section', {\n      header: seriesNames.join(', '),\n      noHeader: !seriesNames.length,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: name,\n        value: value\n      })]\n    });\n  };\n  MapSeries.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n  MapSeries.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n  MapSeries.prototype.getLegendIcon = function (opt) {\n    var iconType = opt.icon || 'roundRect';\n    var icon = createSymbol(iconType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill);\n    icon.setStyle(opt.itemStyle);\n    // Map do not use itemStyle.borderWidth as border width\n    icon.style.stroke = 'none';\n    // No rotation because no series visual symbol for map\n    if (iconType.indexOf('empty') > -1) {\n      icon.style.stroke = icon.style.fill;\n      icon.style.fill = '#fff';\n      icon.style.lineWidth = 2;\n    }\n    return icon;\n  };\n  MapSeries.type = 'series.map';\n  MapSeries.dependencies = ['geo'];\n  MapSeries.layoutMode = 'box';\n  MapSeries.defaultOption = {\n    // 一级层叠\n    // zlevel: 0,\n    // 二级层叠\n    z: 2,\n    coordinateSystem: 'geo',\n    // map should be explicitly specified since ec3.\n    map: '',\n    // If `geoIndex` is not specified, a exclusive geo will be\n    // created. Otherwise use the specified geo component, and\n    // `map` and `mapType` are ignored.\n    // geoIndex: 0,\n    // 'center' | 'left' | 'right' | 'x%' | {number}\n    left: 'center',\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\n    top: 'center',\n    // right\n    // bottom\n    // width:\n    // height\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    // Default value:\n    // for geoSVG source: 1,\n    // for geoJSON source: 0.75.\n    aspectScale: null,\n    // Layout with center and size\n    // If you want to put map in a fixed size box with right aspect ratio\n    // This two properties may be more convenient.\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    showLegendSymbol: true,\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ],\n    // higher priority than center and zoom\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    selectedMode: true,\n    label: {\n      show: false,\n      color: '#000'\n    },\n    // scaleLimit: null,\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444',\n      areaColor: '#eee'\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        areaColor: 'rgba(255,215,0,0.8)'\n      }\n    },\n    select: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    nameProperty: 'name'\n  };\n  return MapSeries;\n}(SeriesModel);\nexport default MapSeries;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n// FIXME 公用？\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n    var result;\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n    return len === 0 ? NaN : result;\n  });\n}\nexport default function mapDataStatistic(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    }\n    // FIXME Put where?\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function mapSymbolLayout(ecModel) {\n  var processedMapType = {};\n  ecModel.eachSeriesByType('map', function (mapSeries) {\n    var mapType = mapSeries.getMapType();\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\n      return;\n    }\n    var mapSymbolOffsets = {};\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\n      var geo = subMapSeries.coordinateSystem;\n      var data = subMapSeries.originalData;\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\n        data.each(data.mapDimension('value'), function (value, idx) {\n          var name = data.getName(idx);\n          var region = geo.getRegion(name);\n          // If input series.data is [11, 22, '-'/null/undefined, 44],\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\n          // not be drawn. So here must validate if value is NaN.\n          if (!region || isNaN(value)) {\n            return;\n          }\n          var offset = mapSymbolOffsets[name] || 0;\n          var point = geo.dataToPoint(region.getCenter());\n          mapSymbolOffsets[name] = offset + 1;\n          data.setItemLayout(idx, {\n            point: point,\n            offset: offset\n          });\n        });\n      }\n    });\n    // Show label of those region not has legendIcon (which is offset 0)\n    var data = mapSeries.getData();\n    data.each(function (idx) {\n      var name = data.getName(idx);\n      var layout = data.getItemLayout(idx) || {};\n      layout.showLabel = !mapSymbolOffsets[name];\n      data.setItemLayout(idx, layout);\n    });\n    processedMapType[mapType] = true;\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport MapView from './MapView.js';\nimport MapSeries from './MapSeries.js';\nimport mapDataStatistic from './mapDataStatistic.js';\nimport mapSymbolLayout from './mapSymbolLayout.js';\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\nimport { install as installGeo } from '../../component/geo/install.js';\nexport function install(registers) {\n  use(installGeo);\n  registers.registerChartView(MapView);\n  registers.registerSeriesModel(MapSeries);\n  registers.registerLayout(mapSymbolLayout);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\n  createLegacyDataSelectAction('map', registers.registerAction);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The tree layoutHelper implementation was originally copied from\r\n* \"d3.js\"(https://github.com/d3/d3-hierarchy) with\r\n* some modifications made for this project.\r\n* (see more details in the comment of the specific method below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the licence of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\n/**\r\n * @file The layout algorithm of node-link tree diagrams. Here we using Reingold-Tilford algorithm to drawing\r\n *       the tree.\r\n */\nimport * as layout from '../../util/layout.js';\n/**\r\n * Initialize all computational message for following algorithm.\r\n */\nexport function init(inRoot) {\n  var root = inRoot;\n  root.hierNode = {\n    defaultAncestor: null,\n    ancestor: root,\n    prelim: 0,\n    modifier: 0,\n    change: 0,\n    shift: 0,\n    i: 0,\n    thread: null\n  };\n  var nodes = [root];\n  var node;\n  var children;\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    children = node.children;\n    if (node.isExpand && children.length) {\n      var n = children.length;\n      for (var i = n - 1; i >= 0; i--) {\n        var child = children[i];\n        child.hierNode = {\n          defaultAncestor: null,\n          ancestor: child,\n          prelim: 0,\n          modifier: 0,\n          change: 0,\n          shift: 0,\n          i: i,\n          thread: null\n        };\n        nodes.push(child);\n      }\n    }\n  }\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * Computes a preliminary x coordinate for node. Before that, this function is\r\n * applied recursively to the children of node, as well as the function\r\n * apportion(). After spacing out the children by calling executeShifts(), the\r\n * node is placed to the midpoint of its outermost children.\r\n */\nexport function firstWalk(node, separation) {\n  var children = node.isExpand ? node.children : [];\n  var siblings = node.parentNode.children;\n  var subtreeW = node.hierNode.i ? siblings[node.hierNode.i - 1] : null;\n  if (children.length) {\n    executeShifts(node);\n    var midPoint = (children[0].hierNode.prelim + children[children.length - 1].hierNode.prelim) / 2;\n    if (subtreeW) {\n      node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n      node.hierNode.modifier = node.hierNode.prelim - midPoint;\n    } else {\n      node.hierNode.prelim = midPoint;\n    }\n  } else if (subtreeW) {\n    node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n  }\n  node.parentNode.hierNode.defaultAncestor = apportion(node, subtreeW, node.parentNode.hierNode.defaultAncestor || siblings[0], separation);\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * Computes all real x-coordinates by summing up the modifiers recursively.\r\n */\nexport function secondWalk(node) {\n  var nodeX = node.hierNode.prelim + node.parentNode.hierNode.modifier;\n  node.setLayout({\n    x: nodeX\n  }, true);\n  node.hierNode.modifier += node.parentNode.hierNode.modifier;\n}\nexport function separation(cb) {\n  return arguments.length ? cb : defaultSeparation;\n}\n/**\r\n * Transform the common coordinate to radial coordinate.\r\n */\nexport function radialCoordinate(rad, r) {\n  rad -= Math.PI / 2;\n  return {\n    x: r * Math.cos(rad),\n    y: r * Math.sin(rad)\n  };\n}\n/**\r\n * Get the layout position of the whole view.\r\n */\nexport function getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n/**\r\n * All other shifts, applied to the smaller subtrees between w- and w+, are\r\n * performed by this function.\r\n *\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\nfunction executeShifts(node) {\n  var children = node.children;\n  var n = children.length;\n  var shift = 0;\n  var change = 0;\n  while (--n >= 0) {\n    var child = children[n];\n    child.hierNode.prelim += shift;\n    child.hierNode.modifier += shift;\n    change += child.hierNode.change;\n    shift += child.hierNode.shift + change;\n  }\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * The core of the algorithm. Here, a new subtree is combined with the\r\n * previous subtrees. Threads are used to traverse the inside and outside\r\n * contours of the left and right subtree up to the highest common level.\r\n * Whenever two nodes of the inside contours conflict, we compute the left\r\n * one of the greatest uncommon ancestors using the function nextAncestor()\r\n * and call moveSubtree() to shift the subtree and prepare the shifts of\r\n * smaller subtrees. Finally, we add a new thread (if necessary).\r\n */\nfunction apportion(subtreeV, subtreeW, ancestor, separation) {\n  if (subtreeW) {\n    var nodeOutRight = subtreeV;\n    var nodeInRight = subtreeV;\n    var nodeOutLeft = nodeInRight.parentNode.children[0];\n    var nodeInLeft = subtreeW;\n    var sumOutRight = nodeOutRight.hierNode.modifier;\n    var sumInRight = nodeInRight.hierNode.modifier;\n    var sumOutLeft = nodeOutLeft.hierNode.modifier;\n    var sumInLeft = nodeInLeft.hierNode.modifier;\n    while (nodeInLeft = nextRight(nodeInLeft), nodeInRight = nextLeft(nodeInRight), nodeInLeft && nodeInRight) {\n      nodeOutRight = nextRight(nodeOutRight);\n      nodeOutLeft = nextLeft(nodeOutLeft);\n      nodeOutRight.hierNode.ancestor = subtreeV;\n      var shift = nodeInLeft.hierNode.prelim + sumInLeft - nodeInRight.hierNode.prelim - sumInRight + separation(nodeInLeft, nodeInRight);\n      if (shift > 0) {\n        moveSubtree(nextAncestor(nodeInLeft, subtreeV, ancestor), subtreeV, shift);\n        sumInRight += shift;\n        sumOutRight += shift;\n      }\n      sumInLeft += nodeInLeft.hierNode.modifier;\n      sumInRight += nodeInRight.hierNode.modifier;\n      sumOutRight += nodeOutRight.hierNode.modifier;\n      sumOutLeft += nodeOutLeft.hierNode.modifier;\n    }\n    if (nodeInLeft && !nextRight(nodeOutRight)) {\n      nodeOutRight.hierNode.thread = nodeInLeft;\n      nodeOutRight.hierNode.modifier += sumInLeft - sumOutRight;\n    }\n    if (nodeInRight && !nextLeft(nodeOutLeft)) {\n      nodeOutLeft.hierNode.thread = nodeInRight;\n      nodeOutLeft.hierNode.modifier += sumInRight - sumOutLeft;\n      ancestor = subtreeV;\n    }\n  }\n  return ancestor;\n}\n/**\r\n * This function is used to traverse the right contour of a subtree.\r\n * It returns the rightmost child of node or the thread of node. The function\r\n * returns null if and only if node is on the highest depth of its subtree.\r\n */\nfunction nextRight(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[children.length - 1] : node.hierNode.thread;\n}\n/**\r\n * This function is used to traverse the left contour of a subtree (or a subforest).\r\n * It returns the leftmost child of node or the thread of node. The function\r\n * returns null if and only if node is on the highest depth of its subtree.\r\n */\nfunction nextLeft(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[0] : node.hierNode.thread;\n}\n/**\r\n * If nodeInLeft’s ancestor is a sibling of node, returns nodeInLeft’s ancestor.\r\n * Otherwise, returns the specified ancestor.\r\n */\nfunction nextAncestor(nodeInLeft, node, ancestor) {\n  return nodeInLeft.hierNode.ancestor.parentNode === node.parentNode ? nodeInLeft.hierNode.ancestor : ancestor;\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * Shifts the current subtree rooted at wr.\r\n * This is done by increasing prelim(w+) and modifier(w+) by shift.\r\n */\nfunction moveSubtree(wl, wr, shift) {\n  var change = shift / (wr.hierNode.i - wl.hierNode.i);\n  wr.hierNode.change -= change;\n  wr.hierNode.shift += shift;\n  wr.hierNode.modifier += shift;\n  wr.hierNode.prelim += shift;\n  wl.hierNode.change += change;\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\nfunction defaultSeparation(node1, node2) {\n  return node1.parentNode === node2.parentNode ? 1 : 2;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport { radialCoordinate } from './layoutHelper.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport View from '../../coord/View.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport { parsePercent } from '../../util/number.js';\nimport ChartView from '../../view/Chart.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { setStatesStylesFromModel, setStatesFlag, setDefaultStateProxy, HOVER_STATE_BLUR } from '../../util/states.js';\nvar TreeEdgeShape = /** @class */function () {\n  function TreeEdgeShape() {\n    this.parentPoint = [];\n    this.childPoints = [];\n  }\n  return TreeEdgeShape;\n}();\nvar TreePath = /** @class */function (_super) {\n  __extends(TreePath, _super);\n  function TreePath(opts) {\n    return _super.call(this, opts) || this;\n  }\n  TreePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  TreePath.prototype.getDefaultShape = function () {\n    return new TreeEdgeShape();\n  };\n  TreePath.prototype.buildPath = function (ctx, shape) {\n    var childPoints = shape.childPoints;\n    var childLen = childPoints.length;\n    var parentPoint = shape.parentPoint;\n    var firstChildPos = childPoints[0];\n    var lastChildPos = childPoints[childLen - 1];\n    if (childLen === 1) {\n      ctx.moveTo(parentPoint[0], parentPoint[1]);\n      ctx.lineTo(firstChildPos[0], firstChildPos[1]);\n      return;\n    }\n    var orient = shape.orient;\n    var forkDim = orient === 'TB' || orient === 'BT' ? 0 : 1;\n    var otherDim = 1 - forkDim;\n    var forkPosition = parsePercent(shape.forkPosition, 1);\n    var tmpPoint = [];\n    tmpPoint[forkDim] = parentPoint[forkDim];\n    tmpPoint[otherDim] = parentPoint[otherDim] + (lastChildPos[otherDim] - parentPoint[otherDim]) * forkPosition;\n    ctx.moveTo(parentPoint[0], parentPoint[1]);\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.moveTo(firstChildPos[0], firstChildPos[1]);\n    tmpPoint[forkDim] = firstChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    tmpPoint[forkDim] = lastChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.lineTo(lastChildPos[0], lastChildPos[1]);\n    for (var i = 1; i < childLen - 1; i++) {\n      var point = childPoints[i];\n      ctx.moveTo(point[0], point[1]);\n      tmpPoint[forkDim] = point[forkDim];\n      ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    }\n  };\n  return TreePath;\n}(Path);\nvar TreeView = /** @class */function (_super) {\n  __extends(TreeView, _super);\n  function TreeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TreeView.type;\n    _this._mainGroup = new graphic.Group();\n    return _this;\n  }\n  TreeView.prototype.init = function (ecModel, api) {\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  };\n  TreeView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n    if (layout === 'radial') {\n      group.x = layoutInfo.x + layoutInfo.width / 2;\n      group.y = layoutInfo.y + layoutInfo.height / 2;\n    } else {\n      group.x = layoutInfo.x;\n      group.y = layoutInfo.y;\n    }\n    this._updateViewCoordSys(seriesModel, api);\n    this._updateController(seriesModel, ecModel, api);\n    var oldData = this._data;\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n        return;\n      }\n      // Update node and edge\n      updateNode(data, newIdx, symbolEl, group, seriesModel);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n    this._updateNodeAndLinkScale(seriesModel);\n    if (seriesModel.get('expandAndCollapse') === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n    this._data = data;\n  };\n  TreeView.prototype._updateViewCoordSys = function (seriesModel, api) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max);\n    // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n    var oldMin = this._min;\n    var oldMax = this._max;\n    // If width or height is 0\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'), api);\n    viewCoordSys.setZoom(seriesModel.get('zoom'));\n    // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n    this.group.attr({\n      x: viewCoordSys.x,\n      y: viewCoordSys.y,\n      scaleX: viewCoordSys.scaleX,\n      scaleY: viewCoordSys.scaleY\n    });\n    this._min = min;\n    this._max = max;\n  };\n  TreeView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n      _this._updateNodeAndLinkScale(seriesModel);\n      // Only update label layout on zoom\n      api.updateLabelLayout();\n    });\n  };\n  TreeView.prototype._updateNodeAndLinkScale = function (seriesModel) {\n    var data = seriesModel.getData();\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n  TreeView.prototype._getNodeGlobalScale = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupZoom = coordSys.scaleX || 1;\n    // Scale node when zoom changes\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  };\n  TreeView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n  TreeView.prototype.remove = function () {\n    this._mainGroup.removeAll();\n    this._data = null;\n  };\n  TreeView.type = 'tree';\n  return TreeView;\n}(ChartView);\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y);\n}\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var visualColor = node.getVisual('style').fill;\n  var symbolInnerColor = node.isExpand === false && node.children.length !== 0 ? visualColor : '#fff';\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.__oldX,\n    y: sourceSymbolEl.__oldY,\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n    symbolEl.x = sourceOldLayout.x;\n    symbolEl.y = sourceOldLayout.y;\n  } else {\n    symbolEl.updateData(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n  }\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  symbolEl.__oldX = symbolEl.x;\n  symbolEl.__oldY = symbolEl.y;\n  graphic.updateProps(symbolEl, {\n    x: targetLayout.x,\n    y: targetLayout.y\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n  if (seriesModel.get('layout') === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length_1 = realRoot.children.length;\n    var rad = void 0;\n    var isLeft = void 0;\n    if (targetLayout.x === rootLayout.x && node.isExpand === true && realRoot.children.length) {\n      var center = {\n        x: (realRoot.children[0].getLayout().x + realRoot.children[length_1 - 1].getLayout().x) / 2,\n        y: (realRoot.children[0].getLayout().y + realRoot.children[length_1 - 1].getLayout().y) / 2\n      };\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n      isLeft = center.x < rootLayout.x;\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n    var textPosition = isLeft ? 'left' : 'right';\n    var normalLabelModel = itemModel.getModel('label');\n    var rotate = normalLabelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    var textContent = symbolPath.getTextContent();\n    if (textContent) {\n      symbolPath.setTextConfig({\n        position: normalLabelModel.get('position') || textPosition,\n        rotation: rotate == null ? -rad : labelRotateRadian,\n        origin: 'center'\n      });\n      textContent.setStyle('verticalAlign', 'middle');\n    }\n  }\n  // Handle status\n  var focus = itemModel.get(['emphasis', 'focus']);\n  var focusDataIndices = focus === 'relative' ? zrUtil.concatArray(node.getAncestorsIndices(), node.getDescendantIndices()) : focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : null;\n  if (focusDataIndices) {\n    // Modify the focus to data indices.\n    getECData(symbolEl).focus = focusDataIndices;\n  }\n  drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group);\n  if (symbolEl.__edge) {\n    symbolEl.onHoverStateChange = function (toState) {\n      if (toState !== 'blur') {\n        // NOTE: Ensure the parent elements will been blurred firstly.\n        // According to the return of getAncestorsIndices and getDescendantIndices\n        // TODO: A bit tricky.\n        var parentEl = node.parentNode && data.getItemGraphicEl(node.parentNode.dataIndex);\n        if (!(parentEl && parentEl.hoverState === HOVER_STATE_BLUR)) {\n          setStatesFlag(symbolEl.__edge, toState);\n        }\n      }\n    };\n  }\n}\nfunction drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group) {\n  var itemModel = node.getModel();\n  var edgeShape = seriesModel.get('edgeShape');\n  var layout = seriesModel.get('layout');\n  var orient = seriesModel.getOrient();\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n  var edgeForkPosition = seriesModel.get('edgeForkPosition');\n  var lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  var edge = symbolEl.__edge;\n  // curve edge from node -> parent\n  // polyline edge from node -> children\n  if (edgeShape === 'curve') {\n    if (node.parentNode && node.parentNode !== virtualRoot) {\n      if (!edge) {\n        edge = symbolEl.__edge = new graphic.BezierCurve({\n          shape: getEdgeShape(layout, orient, curvature, sourceOldLayout, sourceOldLayout)\n        });\n      }\n      graphic.updateProps(edge, {\n        shape: getEdgeShape(layout, orient, curvature, sourceLayout, targetLayout)\n      }, seriesModel);\n    }\n  } else if (edgeShape === 'polyline') {\n    if (layout === 'orthogonal') {\n      if (node !== virtualRoot && node.children && node.children.length !== 0 && node.isExpand === true) {\n        var children = node.children;\n        var childPoints = [];\n        for (var i = 0; i < children.length; i++) {\n          var childLayout = children[i].getLayout();\n          childPoints.push([childLayout.x, childLayout.y]);\n        }\n        if (!edge) {\n          edge = symbolEl.__edge = new TreePath({\n            shape: {\n              parentPoint: [targetLayout.x, targetLayout.y],\n              childPoints: [[targetLayout.x, targetLayout.y]],\n              orient: orient,\n              forkPosition: edgeForkPosition\n            }\n          });\n        }\n        graphic.updateProps(edge, {\n          shape: {\n            parentPoint: [targetLayout.x, targetLayout.y],\n            childPoints: childPoints\n          }\n        }, seriesModel);\n      }\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('The polyline edgeShape can only be used in orthogonal layout');\n      }\n    }\n  }\n  // show all edge when edgeShape is 'curve', filter node `isExpand` is false when edgeShape is 'polyline'\n  if (edge && !(edgeShape === 'polyline' && !node.isExpand)) {\n    edge.useStyle(zrUtil.defaults({\n      strokeNoScale: true,\n      fill: null\n    }, lineStyle));\n    setStatesStylesFromModel(edge, itemModel, 'lineStyle');\n    setDefaultStateProxy(edge);\n    group.add(edge);\n  }\n}\nfunction removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt) {\n  var virtualRoot = data.tree.root;\n  var _a = getSourceNode(virtualRoot, node),\n    source = _a.source,\n    sourceLayout = _a.sourceLayout;\n  var symbolEl = data.getItemGraphicEl(node.dataIndex);\n  if (!symbolEl) {\n    return;\n  }\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceEdge = sourceSymbolEl.__edge;\n  // 1. when expand the sub tree, delete the children node should delete the edge of\n  // the source at the same time. because the polyline edge shape is only owned by the source.\n  // 2.when the node is the only children of the source, delete the node should delete the edge of\n  // the source at the same time. the same reason as above.\n  var edge = symbolEl.__edge || (source.isExpand === false || source.children.length === 1 ? sourceEdge : undefined);\n  var edgeShape = seriesModel.get('edgeShape');\n  var layoutOpt = seriesModel.get('layout');\n  var orient = seriesModel.get('orient');\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n  if (edge) {\n    if (edgeShape === 'curve') {\n      graphic.removeElement(edge, {\n        shape: getEdgeShape(layoutOpt, orient, curvature, sourceLayout, sourceLayout),\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    } else if (edgeShape === 'polyline' && seriesModel.get('layout') === 'orthogonal') {\n      graphic.removeElement(edge, {\n        shape: {\n          parentPoint: [sourceLayout.x, sourceLayout.y],\n          childPoints: [[sourceLayout.x, sourceLayout.y]]\n        },\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    }\n  }\n}\nfunction getSourceNode(virtualRoot, node) {\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceLayout;\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n  return {\n    source: source,\n    sourceLayout: sourceLayout\n  };\n}\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var sourceLayout = getSourceNode(virtualRoot, node).sourceLayout;\n  // Use same duration and easing with update to have more consistent animation.\n  var removeAnimationOpt = {\n    duration: seriesModel.get('animationDurationUpdate'),\n    easing: seriesModel.get('animationEasingUpdate')\n  };\n  graphic.removeElement(symbolEl, {\n    x: sourceLayout.x + 1,\n    y: sourceLayout.y + 1\n  }, seriesModel, {\n    cb: function () {\n      group.remove(symbolEl);\n      data.setItemGraphicEl(dataIndex, null);\n    },\n    removeOpt: removeAnimationOpt\n  });\n  symbolEl.fadeOut(null, data.hostModel, {\n    fadeLabel: true,\n    animation: removeAnimationOpt\n  });\n  // remove edge as parent node\n  node.children.forEach(function (childNode) {\n    removeNodeEdge(childNode, data, group, seriesModel, removeAnimationOpt);\n  });\n  // remove edge as child node\n  removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt);\n}\nfunction getEdgeShape(layoutOpt, orient, curvature, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n  if (layoutOpt === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x || 0,\n      y1: radialCoor1.y || 0,\n      x2: radialCoor4.x || 0,\n      y2: radialCoor4.y || 0,\n      cpx1: radialCoor2.x || 0,\n      cpy1: radialCoor2.y || 0,\n      cpx2: radialCoor3.x || 0,\n      cpy2: radialCoor3.y || 0\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * curvature;\n      cpy2 = y2;\n    }\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * curvature;\n    }\n  }\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\nexport default TreeView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport function retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n    if (zrUtil.isString(targetNode)) {\n      targetNode = root.getNodeById(targetNode);\n    }\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n    var targetNodeId = payload.targetNodeId;\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n}\n// Not includes the given node at the last item.\nexport function getPathToRoot(node) {\n  var path = [];\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n  return path.reverse();\n}\nexport function aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n}\n// From root to the input node (the input node will be included).\nexport function wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n  treePathInfo.reverse();\n  return treePathInfo;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nvar TreeSeriesModel = /** @class */function (_super) {\n  __extends(TreeSeriesModel, _super);\n  function TreeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.hasSymbolVisual = true;\n    // Do it self.\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n  /**\r\n   * Init a tree data structure from data in option series\r\n   */\n  TreeSeriesModel.prototype.getInitialData = function (option) {\n    // create a virtual root\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    var leaves = option.leaves || {};\n    var leavesModel = new Model(leaves, this, this.ecModel);\n    var tree = Tree.createTree(root, this, beforeLink);\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        if (!(node && node.children.length && node.isExpand)) {\n          model.parentModel = leavesModel;\n        }\n        return model;\n      });\n    }\n    var treeDepth = 0;\n    tree.eachNode('preorder', function (node) {\n      if (node.depth > treeDepth) {\n        treeDepth = node.depth;\n      }\n    });\n    var expandAndCollapse = option.expandAndCollapse;\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\n    tree.root.eachNode('preorder', function (node) {\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex);\n      // Add item.collapsed != null, because users can collapse node original in the series.data.\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\n    });\n    return tree.data;\n  };\n  /**\r\n   * Make the configuration 'orient' backward compatibly, with 'horizontal = LR', 'vertical = TB'.\r\n   * @returns {string} orient\r\n   */\n  TreeSeriesModel.prototype.getOrient = function () {\n    var orient = this.get('orient');\n    if (orient === 'horizontal') {\n      orient = 'LR';\n    } else if (orient === 'vertical') {\n      orient = 'TB';\n    }\n    return orient;\n  };\n  TreeSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n  TreeSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n  TreeSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var tree = this.getData().tree;\n    var realRoot = tree.root.children[0];\n    var node = tree.getNodeByDataIndex(dataIndex);\n    var value = node.getValue();\n    var name = node.name;\n    while (node && node !== realRoot) {\n      name = node.parentNode.name + '.' + name;\n      node = node.parentNode;\n    }\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value,\n      noValue: isNaN(value) || value == null\n    });\n  };\n  // Add tree path to tooltip param\n  TreeSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this);\n    params.collapsed = !node.isExpand;\n    return params;\n  };\n  TreeSeriesModel.type = 'series.tree';\n  // can support the position parameters 'left', 'top','right','bottom', 'width',\n  // 'height' in the setOption() with 'merge' mode normal.\n  TreeSeriesModel.layoutMode = 'box';\n  TreeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // the position of the whole view\n    left: '12%',\n    top: '12%',\n    right: '12%',\n    bottom: '12%',\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\n    layout: 'orthogonal',\n    // value can be 'polyline'\n    edgeShape: 'curve',\n    edgeForkPosition: '50%',\n    // true | false | 'move' | 'scale', see module:component/helper/RoamController.\n    roam: false,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.4,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    orient: 'LR',\n    symbol: 'emptyCircle',\n    symbolSize: 7,\n    expandAndCollapse: true,\n    initialTreeDepth: 2,\n    lineStyle: {\n      color: '#ccc',\n      width: 1.5,\n      curveness: 0.5\n    },\n    itemStyle: {\n      color: 'lightsteelblue',\n      // borderColor: '#c23531',\n      borderWidth: 1.5\n    },\n    label: {\n      show: true\n    },\n    animationEasing: 'linear',\n    animationDuration: 700,\n    animationDurationUpdate: 500\n  };\n  return TreeSeriesModel;\n}(SeriesModel);\nexport default TreeSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Traverse the tree from bottom to top and do something\r\n */\nfunction eachAfter(root, callback, separation) {\n  var nodes = [root];\n  var next = [];\n  var node;\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    next.push(node);\n    if (node.isExpand) {\n      var children = node.children;\n      if (children.length) {\n        for (var i = 0; i < children.length; i++) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n  while (node = next.pop()) {\n    // jshint ignore:line\n    callback(node, separation);\n  }\n}\n/**\r\n * Traverse the tree from top to bottom and do something\r\n */\nfunction eachBefore(root, callback) {\n  var nodes = [root];\n  var node;\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    callback(node);\n    if (node.isExpand) {\n      var children = node.children;\n      if (children.length) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n}\nexport { eachAfter, eachBefore };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { eachAfter, eachBefore } from './traversalHelper.js';\nimport { init, firstWalk, secondWalk, separation as sep, radialCoordinate, getViewRect } from './layoutHelper.js';\nexport default function treeLayout(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\nfunction commonLayout(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n  if (realRoot) {\n    init(virtualRoot);\n    eachAfter(realRoot, firstWalk, separation);\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n    eachBefore(realRoot, secondWalk);\n    var left_1 = realRoot;\n    var right_1 = realRoot;\n    var bottom_1 = realRoot;\n    eachBefore(realRoot, function (node) {\n      var x = node.getLayout().x;\n      if (x < left_1.getLayout().x) {\n        left_1 = node;\n      }\n      if (x > right_1.getLayout().x) {\n        right_1 = node;\n      }\n      if (node.depth > bottom_1.depth) {\n        bottom_1 = node;\n      }\n    });\n    var delta = left_1 === right_1 ? 1 : separation(left_1, right_1) / 2;\n    var tx_1 = delta - left_1.getLayout().x;\n    var kx_1 = 0;\n    var ky_1 = 0;\n    var coorX_1 = 0;\n    var coorY_1 = 0;\n    if (layout === 'radial') {\n      kx_1 = width / (right_1.getLayout().x + delta + tx_1);\n      // here we use (node.depth - 1), bucause the real root's depth is 1\n      ky_1 = height / (bottom_1.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n        coorY_1 = (node.depth - 1) * ky_1;\n        var finalCoor = radialCoordinate(coorX_1, coorY_1);\n        node.setLayout({\n          x: finalCoor.x,\n          y: finalCoor.y,\n          rawX: coorX_1,\n          rawY: coorY_1\n        }, true);\n      });\n    } else {\n      var orient_1 = seriesModel.getOrient();\n      if (orient_1 === 'RL' || orient_1 === 'LR') {\n        ky_1 = height / (right_1.getLayout().x + delta + tx_1);\n        kx_1 = width / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorY_1 = (node.getLayout().x + tx_1) * ky_1;\n          coorX_1 = orient_1 === 'LR' ? (node.depth - 1) * kx_1 : width - (node.depth - 1) * kx_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      } else if (orient_1 === 'TB' || orient_1 === 'BT') {\n        kx_1 = width / (right_1.getLayout().x + delta + tx_1);\n        ky_1 = height / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n          coorY_1 = orient_1 === 'TB' ? (node.depth - 1) * ky_1 : height - (node.depth - 1) * ky_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nexport default function treeVisual(ecModel) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel();\n      // TODO Optimize\n      var style = model.getModel('itemStyle').getItemStyle();\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport TreeView from './TreeView.js';\nimport TreeSeriesModel from './TreeSeries.js';\nimport treeLayout from './treeLayout.js';\nimport treeVisual from './treeVisual.js';\nimport { installTreeAction } from './treeAction.js';\nexport function install(registers) {\n  registers.registerChartView(TreeView);\n  registers.registerSeriesModel(TreeSeriesModel);\n  registers.registerLayout(treeLayout);\n  registers.registerVisual(treeVisual);\n  installTreeAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nexport function installTreeAction(registers) {\n  registers.registerAction({\n    type: 'treeExpandAndCollapse',\n    event: 'treeExpandAndCollapse',\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var dataIndex = payload.dataIndex;\n      var tree = seriesModel.getData().tree;\n      var node = tree.getNodeByDataIndex(dataIndex);\n      node.isExpand = !node.isExpand;\n    });\n  });\n  registers.registerAction({\n    type: 'treeRoam',\n    event: 'treeRoam',\n    // Here we set 'none' instead of 'update', because roam action\n    // just need to update the transform matrix without having to recalculate\n    // the layout. So don't need to go through the whole update process, such\n    // as 'dataPrcocess', 'coordSystemUpdate', 'layout' and so on.\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as helper from '../helper/treeHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionTypes = ['treemapZoomToNode', 'treemapRender', 'treemapMove'];\nexport function installTreemapAction(registers) {\n  for (var i = 0; i < actionTypes.length; i++) {\n    registers.registerAction({\n      type: actionTypes[i],\n      update: 'updateView'\n    }, noop);\n  }\n  registers.registerAction({\n    type: 'treemapRootToNode',\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    }, handleRootToNode);\n    function handleRootToNode(model, index) {\n      var types = ['treemapZoomToNode', 'treemapRootToNode'];\n      var targetInfo = helper.retrieveTargetInfo(payload, types, model);\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n        if (originViewRoot) {\n          payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getDecalFromPalette } from '../../model/mixin/palette.js';\nexport default function enableAriaDecalForTree(seriesModel) {\n  var data = seriesModel.getData();\n  var tree = data.tree;\n  var decalPaletteScope = {};\n  tree.eachNode(function (node) {\n    // Use decal of level 1 node\n    var current = node;\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n    var decal = getDecalFromPalette(seriesModel.ecModel, current.name || current.dataIndex + '', decalPaletteScope);\n    node.setVisual('decal', decal);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\nvar TreemapSeriesModel = /** @class */function (_super) {\n  __extends(TreemapSeriesModel, _super);\n  function TreemapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TreemapSeriesModel.type;\n    _this.preventUsingHoverLayer = true;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || [];\n    // Used in \"visual priority\" in `treemapVisual.js`.\n    // This way is a little tricky, must satisfy the precondition:\n    //   1. There is no `treeNode.getModel('itemStyle.xxx')` used.\n    //   2. The `Model.prototype.getModel()` will not use any clone-like way.\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\n    var designatedVisualModel = new Model({\n      itemStyle: designatedVisualItemStyle\n    }, this, ecModel);\n    levels = option.levels = setDefault(levels, ecModel);\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\n      return new Model(levelDefine, designatedVisualModel, ecModel);\n    }, this);\n    // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n    var tree = Tree.createTree(root, this, beforeLink);\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = node ? levelModels[node.depth] : null;\n        // If no levelModel, we also need `designatedVisualModel`.\n        model.parentModel = levelModel || designatedVisualModel;\n        return model;\n      });\n    }\n    return tree.data;\n  };\n  TreemapSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /**\r\n   * @override\r\n   * @param {number} dataIndex\r\n   * @param {boolean} [mutipleSeries=false]\r\n   */\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n  /**\r\n   * Add tree path to tooltip param\r\n   *\r\n   * @override\r\n   * @param {number} dataIndex\r\n   * @return {Object}\r\n   */\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this);\n    // compatitable the previous code.\n    params.treePathInfo = params.treeAncestors;\n    return params;\n  };\n  /**\r\n   * @public\r\n   * @param {Object} layoutInfo {\r\n   *                                x: containerGroup x\r\n   *                                y: containerGroup y\r\n   *                                width: containerGroup width\r\n   *                                height: containerGroup height\r\n   *                            }\r\n   */\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\n    /**\r\n     * @readOnly\r\n     * @type {Object}\r\n     */\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  };\n  /**\r\n   * @param  {string} id\r\n   * @return {number} index\r\n   */\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\n    // A feature is implemented:\n    // index is monotone increasing with the sequence of\n    // input id at the first time.\n    // This feature can make sure that each data item and its\n    // mapped color have the same index between data list and\n    // color list at the beginning, which is useful for user\n    // to adjust data-color mapping.\n    /**\r\n     * @private\r\n     * @type {Object}\r\n     */\n    var idIndexMap = this._idIndexMap;\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      /**\r\n       * @private\r\n       * @type {number}\r\n       */\n      this._idIndexMapCount = 0;\n    }\n    var index = idIndexMap.get(id);\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n    return index;\n  };\n  TreemapSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n  TreemapSeriesModel.type = 'series.treemap';\n  TreemapSeriesModel.layoutMode = 'box';\n  TreemapSeriesModel.defaultOption = {\n    // Disable progressive rendering\n    progressive: 0,\n    // size: ['80%', '80%'],            // deprecated, compatible with ec2.\n    left: 'center',\n    top: 'middle',\n    width: '80%',\n    height: '80%',\n    sort: true,\n    clipWindow: 'origin',\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    leafDepth: null,\n    drillDownIcon: '▶',\n    // to align specialized icon. ▷▶❒❐▼✚\n    zoomToNodeRatio: 0.32 * 0.32,\n    scaleLimit: null,\n    roam: true,\n    nodeClick: 'zoomToNode',\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      // right\n      // bottom\n      emptyItemWidth: 25,\n      itemStyle: {\n        color: 'rgba(0,0,0,0.7)',\n        textStyle: {\n          color: '#fff'\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          color: 'rgba(0,0,0,0.9)' // '#5793f3',\n        }\n      }\n    },\n    label: {\n      show: true,\n      // Do not use textDistance, for ellipsis rect just the same as treemap node rect.\n      distance: 0,\n      padding: 5,\n      position: 'inside',\n      // formatter: null,\n      color: '#fff',\n      overflow: 'truncate'\n      // align\n      // verticalAlign\n    },\n    upperLabel: {\n      show: false,\n      position: [0, '50%'],\n      height: 20,\n      // formatter: null,\n      // color: '#fff',\n      overflow: 'truncate',\n      // align: null,\n      verticalAlign: 'middle'\n    },\n    itemStyle: {\n      color: null,\n      colorAlpha: null,\n      colorSaturation: null,\n      borderWidth: 0,\n      gapWidth: 0,\n      borderColor: '#fff',\n      borderColorSaturation: null // If specified, borderColor will be ineffective, and the\n      // border color is evaluated by color of current node and\n      // borderColorSaturation.\n    },\n    emphasis: {\n      upperLabel: {\n        show: true,\n        position: [0, '50%'],\n        overflow: 'truncate',\n        verticalAlign: 'middle'\n      }\n    },\n    visualDimension: 0,\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    // level[n].color (if necessary).\n    // + Specify color list of each level. level[0].color would be global\n    // color list if not specified. (see method `setDefault`).\n    // + But set as a empty array to forbid fetch color from global palette\n    // when using nodeModel.get('color'), otherwise nodes on deep level\n    // will always has color palette set and are not able to inherit color\n    // from parent node.\n    // + TreemapSeries.color can not be set as 'none', otherwise effect\n    // legend color fetching (see seriesColor.js).\n    colorAlpha: null,\n    colorSaturation: null,\n    colorMappingBy: 'index',\n    visibleMin: 10,\n    // be rendered. Only works when sort is 'asc' or 'desc'.\n    childrenVisibleMin: null,\n    // grandchildren will not show.\n    // Why grandchildren? If not grandchildren but children,\n    // some siblings show children and some not,\n    // the appearance may be mess and not consistent,\n    levels: [] // Each item: {\n    //     visibleMin, itemStyle, visualDimension, label\n    // }\n  };\n  return TreemapSeriesModel;\n}(SeriesModel);\n/**\r\n * @param {Object} dataNode\r\n */\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  }\n  // Value should not less than 0.\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n/**\r\n * set default to level configuration\r\n */\nfunction setDefault(levels, ecModel) {\n  var globalColorList = normalizeToArray(ecModel.get('color'));\n  var globalDecalList = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n  if (!globalColorList) {\n    return;\n  }\n  levels = levels || [];\n  var hasColorDefine;\n  var hasDecalDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n    var modelDecal = model.get('decal');\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\n      hasDecalDefine = true;\n    }\n  });\n  var level0 = levels[0] || (levels[0] = {});\n  if (!hasColorDefine) {\n    level0.color = globalColorList.slice();\n  }\n  if (!hasDecalDefine && globalDecalList) {\n    level0.decal = globalDecalList.slice();\n  }\n  return levels;\n}\nexport default TreemapSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport * as layout from '../../util/layout.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { curry, defaults } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName } from '../../util/model.js';\nimport { toggleHoverEmphasis, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar TEXT_PADDING = 8;\nvar ITEM_GAP = 8;\nvar ARRAY_LENGTH = 5;\nvar Breadcrumb = /** @class */function () {\n  function Breadcrumb(containerGroup) {\n    this.group = new graphic.Group();\n    containerGroup.add(this.group);\n  }\n  Breadcrumb.prototype.render = function (seriesModel, api, targetNode, onSelect) {\n    var model = seriesModel.getModel('breadcrumb');\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    if (!model.get('show') || !targetNode) {\n      return;\n    }\n    var normalStyleModel = model.getModel('itemStyle');\n    var emphasisModel = model.getModel('emphasis');\n    var textStyleModel = normalStyleModel.getModel('textStyle');\n    var emphasisTextStyleModel = emphasisModel.getModel(['itemStyle', 'textStyle']);\n    var layoutParam = {\n      pos: {\n        left: model.get('left'),\n        right: model.get('right'),\n        top: model.get('top'),\n        bottom: model.get('bottom')\n      },\n      box: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      emptyItemWidth: model.get('emptyItemWidth'),\n      totalWidth: 0,\n      renderList: []\n    };\n    this._prepare(targetNode, layoutParam, textStyleModel);\n    this._renderContent(seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect);\n    layout.positionElement(thisGroup, layoutParam.pos, layoutParam.box);\n  };\n  /**\r\n   * Prepare render list and total width\r\n   * @private\r\n   */\n  Breadcrumb.prototype._prepare = function (targetNode, layoutParam, textStyleModel) {\n    for (var node = targetNode; node; node = node.parentNode) {\n      var text = convertOptionIdName(node.getModel().get('name'), '');\n      var textRect = textStyleModel.getTextRect(text);\n      var itemWidth = Math.max(textRect.width + TEXT_PADDING * 2, layoutParam.emptyItemWidth);\n      layoutParam.totalWidth += itemWidth + ITEM_GAP;\n      layoutParam.renderList.push({\n        node: node,\n        text: text,\n        width: itemWidth\n      });\n    }\n  };\n  /**\r\n   * @private\r\n   */\n  Breadcrumb.prototype._renderContent = function (seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect) {\n    // Start rendering.\n    var lastX = 0;\n    var emptyItemWidth = layoutParam.emptyItemWidth;\n    var height = seriesModel.get(['breadcrumb', 'height']);\n    var availableSize = layout.getAvailableSize(layoutParam.pos, layoutParam.box);\n    var totalWidth = layoutParam.totalWidth;\n    var renderList = layoutParam.renderList;\n    var emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n    for (var i = renderList.length - 1; i >= 0; i--) {\n      var item = renderList[i];\n      var itemNode = item.node;\n      var itemWidth = item.width;\n      var text = item.text;\n      // Hdie text and shorten width if necessary.\n      if (totalWidth > availableSize.width) {\n        totalWidth -= itemWidth - emptyItemWidth;\n        itemWidth = emptyItemWidth;\n        text = null;\n      }\n      var el = new graphic.Polygon({\n        shape: {\n          points: makeItemPoints(lastX, 0, itemWidth, height, i === renderList.length - 1, i === 0)\n        },\n        style: defaults(normalStyleModel.getItemStyle(), {\n          lineJoin: 'bevel'\n        }),\n        textContent: new graphic.Text({\n          style: createTextStyle(textStyleModel, {\n            text: text\n          })\n        }),\n        textConfig: {\n          position: 'inside'\n        },\n        z2: Z2_EMPHASIS_LIFT * 1e4,\n        onclick: curry(onSelect, itemNode)\n      });\n      el.disableLabelAnimation = true;\n      el.getTextContent().ensureState('emphasis').style = createTextStyle(emphasisTextStyleModel, {\n        text: text\n      });\n      el.ensureState('emphasis').style = emphasisItemStyle;\n      toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n      this.group.add(el);\n      packEventData(el, seriesModel, itemNode);\n      lastX += itemWidth + ITEM_GAP;\n    }\n  };\n  Breadcrumb.prototype.remove = function () {\n    this.group.removeAll();\n  };\n  return Breadcrumb;\n}();\nfunction makeItemPoints(x, y, itemWidth, itemHeight, head, tail) {\n  var points = [[head ? x : x - ARRAY_LENGTH, y], [x + itemWidth, y], [x + itemWidth, y + itemHeight], [head ? x : x - ARRAY_LENGTH, y + itemHeight]];\n  !tail && points.splice(2, 0, [x + itemWidth + ARRAY_LENGTH, y + itemHeight / 2]);\n  !head && points.push([x, y + itemHeight / 2]);\n  return points;\n}\n// Package custom mouse event.\nfunction packEventData(el, seriesModel, itemNode) {\n  getECData(el).eventData = {\n    componentType: 'series',\n    componentSubType: 'treemap',\n    componentIndex: seriesModel.componentIndex,\n    seriesIndex: seriesModel.seriesIndex,\n    seriesName: seriesModel.name,\n    seriesType: 'treemap',\n    selfType: 'breadcrumb',\n    nodeData: {\n      dataIndex: itemNode && itemNode.dataIndex,\n      name: itemNode && itemNode.name\n    },\n    treePathInfo: itemNode && wrapTreePathInfo(itemNode, seriesModel)\n  };\n}\nexport default Breadcrumb;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, indexOf, curry, extend, normalizeCssArray, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isHighDownDispatcher, setAsHighDownDispatcher, setDefaultStateProxy, enableHoverFocus, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as helper from '../helper/treeHelper.js';\nimport Breadcrumb from './Breadcrumb.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as animationUtil from '../../util/animation.js';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper.js';\nimport ChartView from '../../view/Chart.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { makeInner, convertOptionIdName } from '../../util/model.js';\nimport { windowOpen } from '../../util/format.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nvar Group = graphic.Group;\nvar Rect = graphic.Rect;\nvar DRAG_THRESHOLD = 3;\nvar PATH_LABEL_NOAMAL = 'label';\nvar PATH_UPPERLABEL_NORMAL = 'upperLabel';\n// Should larger than emphasis states lift z\nvar Z2_BASE = Z2_EMPHASIS_LIFT * 10; // Should bigger than every z2.\nvar Z2_BG = Z2_EMPHASIS_LIFT * 2;\nvar Z2_CONTENT = Z2_EMPHASIS_LIFT * 3;\nvar getStateItemStyle = makeStyleMapper([['fill', 'color'],\n// `borderColor` and `borderWidth` has been occupied,\n// so use `stroke` to indicate the stroke of the rect.\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n]);\nvar getItemStyleNormal = function (model) {\n  // Normal style props should include emphasis style props.\n  var itemStyle = getStateItemStyle(model);\n  // Clear styles set by emphasis.\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\n  return itemStyle;\n};\nvar inner = makeInner();\nvar TreemapView = /** @class */function (_super) {\n  __extends(TreemapView, _super);\n  function TreemapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TreemapView.type;\n    _this._state = 'ready';\n    _this._storage = createStorage();\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  TreemapView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var models = ecModel.findComponents({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    });\n    if (indexOf(models, seriesModel) < 0) {\n      return;\n    }\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var payloadType = payload && payload.type;\n    var layoutInfo = seriesModel.layoutInfo;\n    var isInit = !this._oldTree;\n    var thisStorage = this._storage;\n    // Mark new root when action is treemapRootToNode.\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\n      direction: payload.direction\n    } : null;\n    var containerGroup = this._giveContainerGroup(layoutInfo);\n    var hasAnimation = seriesModel.get('animation');\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\n    hasAnimation && !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\n    this._resetController(api);\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\n  };\n  TreemapView.prototype._giveContainerGroup = function (layoutInfo) {\n    var containerGroup = this._containerGroup;\n    if (!containerGroup) {\n      // FIXME\n      // 加一层containerGroup是为了clip，但是现在clip功能并没有实现。\n      containerGroup = this._containerGroup = new Group();\n      this._initEvents(containerGroup);\n      this.group.add(containerGroup);\n    }\n    containerGroup.x = layoutInfo.x;\n    containerGroup.y = layoutInfo.y;\n    return containerGroup;\n  };\n  TreemapView.prototype._doRender = function (containerGroup, seriesModel, reRoot) {\n    var thisTree = seriesModel.getData().tree;\n    var oldTree = this._oldTree;\n    // Clear last shape records.\n    var lastsForAnimation = createStorage();\n    var thisStorage = createStorage();\n    var oldStorage = this._storage;\n    var willInvisibleEls = [];\n    function doRenderNode(thisNode, oldNode, parentGroup, depth) {\n      return renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth);\n    }\n    // Notice: When thisTree and oldTree are the same tree (see list.cloneShallow),\n    // the oldTree is actually losted, so we cannot find all of the old graphic\n    // elements from tree. So we use this strategy: make element storage, move\n    // from old storage to new storage, clear old storage.\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0);\n    // Process all removing.\n    var willDeleteEls = clearStorage(oldStorage);\n    this._oldTree = thisTree;\n    this._storage = thisStorage;\n    if (this._controllerHost) {\n      var _oldRootLayout = this.seriesModel.layoutInfo;\n      var rootLayout = thisTree.root.getLayout();\n      if (rootLayout.width === _oldRootLayout.width && rootLayout.height === _oldRootLayout.height) {\n        this._controllerHost.zoom = 1;\n      }\n    }\n    return {\n      lastsForAnimation: lastsForAnimation,\n      willDeleteEls: willDeleteEls,\n      renderFinally: renderFinally\n    };\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\n      // When 'render' is triggered by action,\n      // 'this' and 'old' may be the same tree,\n      // we use rawIndex in that case.\n      if (sameTree) {\n        oldViewChildren = thisViewChildren;\n        each(thisViewChildren, function (child, index) {\n          !child.isRemoved() && processNode(index, index);\n        });\n      }\n      // Diff hierarchically (diff only in each subtree, but not whole).\n      // because, consistency of view is important.\n      else {\n        new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(curry(processNode, null)).execute();\n      }\n      function getKey(node) {\n        // Identify by name or raw index.\n        return node.getId();\n      }\n      function processNode(newIndex, oldIndex) {\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\n      }\n    }\n    function clearStorage(storage) {\n      var willDeleteEls = createStorage();\n      storage && each(storage, function (store, storageName) {\n        var delEls = willDeleteEls[storageName];\n        each(store, function (el) {\n          el && (delEls.push(el), inner(el).willDelete = true);\n        });\n      });\n      return willDeleteEls;\n    }\n    function renderFinally() {\n      each(willDeleteEls, function (els) {\n        each(els, function (el) {\n          el.parent && el.parent.remove(el);\n        });\n      });\n      each(willInvisibleEls, function (el) {\n        el.invisible = true;\n        // Setting invisible is for optimizing, so no need to set dirty,\n        // just mark as invisible.\n        el.dirty();\n      });\n    }\n  };\n  TreemapView.prototype._doAnimation = function (containerGroup, renderResult, seriesModel, reRoot) {\n    var durationOption = seriesModel.get('animationDurationUpdate');\n    var easingOption = seriesModel.get('animationEasing');\n    // TODO: do not support function until necessary.\n    var duration = (isFunction(durationOption) ? 0 : durationOption) || 0;\n    var easing = (isFunction(easingOption) ? null : easingOption) || 'cubicOut';\n    var animationWrap = animationUtil.createWrap();\n    // Make delete animations.\n    each(renderResult.willDeleteEls, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        if (el.invisible) {\n          return;\n        }\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\n        var target;\n        var innerStore = inner(parent);\n        if (reRoot && reRoot.direction === 'drillDown') {\n          target = parent === reRoot.rootNodeGroup\n          // This is the content element of view root.\n          // Only `content` will enter this branch, because\n          // `background` and `nodeGroup` will not be deleted.\n          ? {\n            shape: {\n              x: 0,\n              y: 0,\n              width: innerStore.nodeWidth,\n              height: innerStore.nodeHeight\n            },\n            style: {\n              opacity: 0\n            }\n          }\n          // Others.\n          : {\n            style: {\n              opacity: 0\n            }\n          };\n        } else {\n          var targetX = 0;\n          var targetY = 0;\n          if (!innerStore.willDelete) {\n            // Let node animate to right-bottom corner, cooperating with fadeout,\n            // which is appropriate for user understanding.\n            // Divided by 2 for reRoot rolling up effect.\n            targetX = innerStore.nodeWidth / 2;\n            targetY = innerStore.nodeHeight / 2;\n          }\n          target = storageName === 'nodeGroup' ? {\n            x: targetX,\n            y: targetY,\n            style: {\n              opacity: 0\n            }\n          } : {\n            shape: {\n              x: targetX,\n              y: targetY,\n              width: 0,\n              height: 0\n            },\n            style: {\n              opacity: 0\n            }\n          };\n        }\n        // TODO: do not support delay until necessary.\n        target && animationWrap.add(el, target, duration, 0, easing);\n      });\n    });\n    // Make other animations\n    each(this._storage, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\n        var target = {};\n        if (!last) {\n          return;\n        }\n        if (el instanceof graphic.Group) {\n          if (last.oldX != null) {\n            target.x = el.x;\n            target.y = el.y;\n            el.x = last.oldX;\n            el.y = last.oldY;\n          }\n        } else {\n          if (last.oldShape) {\n            target.shape = extend({}, el.shape);\n            el.setShape(last.oldShape);\n          }\n          if (last.fadein) {\n            el.setStyle('opacity', 0);\n            target.style = {\n              opacity: 1\n            };\n          }\n          // When animation is stopped for succedent animation starting,\n          // el.style.opacity might not be 1\n          else if (el.style.opacity !== 1) {\n            target.style = {\n              opacity: 1\n            };\n          }\n        }\n        animationWrap.add(el, target, duration, 0, easing);\n      });\n    }, this);\n    this._state = 'animating';\n    animationWrap.finished(bind(function () {\n      this._state = 'ready';\n      renderResult.renderFinally();\n    }, this)).start();\n  };\n  TreemapView.prototype._resetController = function (api) {\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    if (!controllerHost) {\n      this._controllerHost = {\n        target: this.group\n      };\n      controllerHost = this._controllerHost;\n    }\n    // Init controller.\n    if (!controller) {\n      controller = this._controller = new RoamController(api.getZr());\n      controller.enable(this.seriesModel.get('roam'));\n      controllerHost.zoomLimit = this.seriesModel.get('scaleLimit');\n      controllerHost.zoom = this.seriesModel.get('zoom');\n      controller.on('pan', bind(this._onPan, this));\n      controller.on('zoom', bind(this._onZoom, this));\n    }\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\n    controller.setPointerChecker(function (e, x, y) {\n      return rect.contain(x, y);\n    });\n  };\n  TreemapView.prototype._clearController = function () {\n    var controller = this._controller;\n    this._controllerHost = null;\n    if (controller) {\n      controller.dispose();\n      controller = null;\n    }\n  };\n  TreemapView.prototype._onPan = function (e) {\n    if (this._state !== 'animating' && (Math.abs(e.dx) > DRAG_THRESHOLD || Math.abs(e.dy) > DRAG_THRESHOLD)) {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n      if (!root) {\n        return;\n      }\n      var rootLayout = root.getLayout();\n      if (!rootLayout) {\n        return;\n      }\n      this.api.dispatchAction({\n        type: 'treemapMove',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rootLayout.x + e.dx,\n          y: rootLayout.y + e.dy,\n          width: rootLayout.width,\n          height: rootLayout.height\n        }\n      });\n    }\n  };\n  TreemapView.prototype._onZoom = function (e) {\n    var mouseX = e.originX;\n    var mouseY = e.originY;\n    var zoomDelta = e.scale;\n    if (this._state !== 'animating') {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n      if (!root) {\n        return;\n      }\n      var rootLayout = root.getLayout();\n      if (!rootLayout) {\n        return;\n      }\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\n      // scaleLimit\n      var zoomLimit = null;\n      var _controllerHost = this._controllerHost;\n      zoomLimit = _controllerHost.zoomLimit;\n      var newZoom = _controllerHost.zoom = _controllerHost.zoom || 1;\n      newZoom *= zoomDelta;\n      if (zoomLimit) {\n        var zoomMin = zoomLimit.min || 0;\n        var zoomMax = zoomLimit.max || Infinity;\n        newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n      }\n      var zoomScale = newZoom / _controllerHost.zoom;\n      _controllerHost.zoom = newZoom;\n      var layoutInfo = this.seriesModel.layoutInfo;\n      // Transform mouse coord from global to containerGroup.\n      mouseX -= layoutInfo.x;\n      mouseY -= layoutInfo.y;\n      // Scale root bounding rect.\n      var m = matrix.create();\n      matrix.translate(m, m, [-mouseX, -mouseY]);\n      matrix.scale(m, m, [zoomScale, zoomScale]);\n      matrix.translate(m, m, [mouseX, mouseY]);\n      rect.applyTransform(m);\n      this.api.dispatchAction({\n        type: 'treemapRender',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    }\n  };\n  TreemapView.prototype._initEvents = function (containerGroup) {\n    var _this = this;\n    containerGroup.on('click', function (e) {\n      if (_this._state !== 'ready') {\n        return;\n      }\n      var nodeClick = _this.seriesModel.get('nodeClick', true);\n      if (!nodeClick) {\n        return;\n      }\n      var targetInfo = _this.findTarget(e.offsetX, e.offsetY);\n      if (!targetInfo) {\n        return;\n      }\n      var node = targetInfo.node;\n      if (node.getLayout().isLeafRoot) {\n        _this._rootToNode(targetInfo);\n      } else {\n        if (nodeClick === 'zoomToNode') {\n          _this._zoomToNode(targetInfo);\n        } else if (nodeClick === 'link') {\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\n          var link = itemModel.get('link', true);\n          var linkTarget = itemModel.get('target', true) || 'blank';\n          link && windowOpen(link, linkTarget);\n        }\n      }\n    }, this);\n  };\n  TreemapView.prototype._renderBreadcrumb = function (seriesModel, api, targetInfo) {\n    var _this = this;\n    if (!targetInfo) {\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\n        node: seriesModel.getViewRoot()\n      }\n      // FIXME\n      // better way?\n      // Find breadcrumb tail on center of containerGroup.\n      : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\n      if (!targetInfo) {\n        targetInfo = {\n          node: seriesModel.getData().tree.root\n        };\n      }\n    }\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, function (node) {\n      if (_this._state !== 'animating') {\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? _this._rootToNode({\n          node: node\n        }) : _this._zoomToNode({\n          node: node\n        });\n      }\n    });\n  };\n  /**\r\n   * @override\r\n   */\n  TreemapView.prototype.remove = function () {\n    this._clearController();\n    this._containerGroup && this._containerGroup.removeAll();\n    this._storage = createStorage();\n    this._state = 'ready';\n    this._breadcrumb && this._breadcrumb.remove();\n  };\n  TreemapView.prototype.dispose = function () {\n    this._clearController();\n  };\n  TreemapView.prototype._zoomToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapZoomToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  TreemapView.prototype._rootToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapRootToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  /**\r\n   * @public\r\n   * @param {number} x Global coord x.\r\n   * @param {number} y Global coord y.\r\n   * @return {Object} info If not found, return undefined;\r\n   * @return {number} info.node Target node.\r\n   * @return {number} info.offsetX x refer to target node.\r\n   * @return {number} info.offsetY y refer to target node.\r\n   */\n  TreemapView.prototype.findTarget = function (x, y) {\n    var targetInfo;\n    var viewRoot = this.seriesModel.getViewRoot();\n    viewRoot.eachNode({\n      attr: 'viewChildren',\n      order: 'preorder'\n    }, function (node) {\n      var bgEl = this._storage.background[node.getRawIndex()];\n      // If invisible, there might be no element.\n      if (bgEl) {\n        var point = bgEl.transformCoordToLocal(x, y);\n        var shape = bgEl.shape;\n        // For performance consideration, don't use 'getBoundingRect'.\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\n          targetInfo = {\n            node: node,\n            offsetX: point[0],\n            offsetY: point[1]\n          };\n        } else {\n          return false; // Suppress visit subtree.\n        }\n      }\n    }, this);\n    return targetInfo;\n  };\n  TreemapView.type = 'treemap';\n  return TreemapView;\n}(ChartView);\n/**\r\n * @inner\r\n */\nfunction createStorage() {\n  return {\n    nodeGroup: [],\n    background: [],\n    content: []\n  };\n}\n/**\r\n * @inner\r\n * @return Return undefined means do not travel further.\r\n */\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\n  // Whether under viewRoot.\n  if (!thisNode) {\n    // Deleting nodes will be performed finally. This method just find\n    // element from old storage, or create new element, set them to new\n    // storage, and set styles.\n    return;\n  }\n  // -------------------------------------------------------------------\n  // Start of closure variables available in \"Procedures in renderNode\".\n  var thisLayout = thisNode.getLayout();\n  var data = seriesModel.getData();\n  var nodeModel = thisNode.getModel();\n  // Only for enabling highlight/downplay. Clear firstly.\n  // Because some node will not be rendered.\n  data.setItemGraphicEl(thisNode.dataIndex, null);\n  if (!thisLayout || !thisLayout.isInView) {\n    return;\n  }\n  var thisWidth = thisLayout.width;\n  var thisHeight = thisLayout.height;\n  var borderWidth = thisLayout.borderWidth;\n  var thisInvisible = thisLayout.invisible;\n  var thisRawIndex = thisNode.getRawIndex();\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\n  var thisViewChildren = thisNode.viewChildren;\n  var upperHeight = thisLayout.upperHeight;\n  var isParent = thisViewChildren && thisViewChildren.length;\n  var itemStyleNormalModel = nodeModel.getModel('itemStyle');\n  var itemStyleEmphasisModel = nodeModel.getModel(['emphasis', 'itemStyle']);\n  var itemStyleBlurModel = nodeModel.getModel(['blur', 'itemStyle']);\n  var itemStyleSelectModel = nodeModel.getModel(['select', 'itemStyle']);\n  var borderRadius = itemStyleNormalModel.get('borderRadius') || 0;\n  // End of closure ariables available in \"Procedures in renderNode\".\n  // -----------------------------------------------------------------\n  // Node group\n  var group = giveGraphic('nodeGroup', Group);\n  if (!group) {\n    return;\n  }\n  parentGroup.add(group);\n  // x,y are not set when el is above view root.\n  group.x = thisLayout.x || 0;\n  group.y = thisLayout.y || 0;\n  group.markRedraw();\n  inner(group).nodeWidth = thisWidth;\n  inner(group).nodeHeight = thisHeight;\n  if (thisLayout.isAboveViewRoot) {\n    return group;\n  }\n  // Background\n  var bg = giveGraphic('background', Rect, depth, Z2_BG);\n  bg && renderBackground(group, bg, isParent && thisLayout.upperLabelHeight);\n  var emphasisModel = nodeModel.getModel('emphasis');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var isDisabled = emphasisModel.get('disabled');\n  var focusOrIndices = focus === 'ancestor' ? thisNode.getAncestorsIndices() : focus === 'descendant' ? thisNode.getDescendantIndices() : focus;\n  // No children, render content.\n  if (isParent) {\n    // Because of the implementation about \"traverse\" in graphic hover style, we\n    // can not set hover listener on the \"group\" of non-leaf node. Otherwise the\n    // hover event from the descendents will be listenered.\n    if (isHighDownDispatcher(group)) {\n      setAsHighDownDispatcher(group, false);\n    }\n    if (bg) {\n      setAsHighDownDispatcher(bg, !isDisabled);\n      // Only for enabling highlight/downplay.\n      data.setItemGraphicEl(thisNode.dataIndex, bg);\n      enableHoverFocus(bg, focusOrIndices, blurScope);\n    }\n  } else {\n    var content = giveGraphic('content', Rect, depth, Z2_CONTENT);\n    content && renderContent(group, content);\n    bg.disableMorphing = true;\n    if (bg && isHighDownDispatcher(bg)) {\n      setAsHighDownDispatcher(bg, false);\n    }\n    setAsHighDownDispatcher(group, !isDisabled);\n    // Only for enabling highlight/downplay.\n    data.setItemGraphicEl(thisNode.dataIndex, group);\n    var cursorStyle = nodeModel.getShallow('cursor');\n    cursorStyle && content.attr('cursor', cursorStyle);\n    enableHoverFocus(group, focusOrIndices, blurScope);\n  }\n  return group;\n  // ----------------------------\n  // | Procedures in renderNode |\n  // ----------------------------\n  function renderBackground(group, bg, useUpperLabel) {\n    var ecData = getECData(bg);\n    // For tooltip.\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    bg.setShape({\n      x: 0,\n      y: 0,\n      width: thisWidth,\n      height: thisHeight,\n      r: borderRadius\n    });\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(bg);\n    } else {\n      bg.invisible = false;\n      var style = thisNode.getVisual('style');\n      var visualBorderColor = style.stroke;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualBorderColor;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      emphasisStyle.fill = itemStyleEmphasisModel.get('borderColor');\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      blurStyle.fill = itemStyleBlurModel.get('borderColor');\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      selectStyle.fill = itemStyleSelectModel.get('borderColor');\n      if (useUpperLabel) {\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\n        prepareText(\n        // PENDING: convert ZRColor to ColorString for text.\n        bg, visualBorderColor, style.opacity, {\n          x: borderWidth,\n          y: 0,\n          width: upperLabelWidth,\n          height: upperHeight\n        });\n      }\n      // For old bg.\n      else {\n        bg.removeTextContent();\n      }\n      bg.setStyle(normalStyle);\n      bg.ensureState('emphasis').style = emphasisStyle;\n      bg.ensureState('blur').style = blurStyle;\n      bg.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(bg);\n    }\n    group.add(bg);\n  }\n  function renderContent(group, content) {\n    var ecData = getECData(content);\n    // For tooltip.\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\n    content.culling = true;\n    content.setShape({\n      x: borderWidth,\n      y: borderWidth,\n      width: contentWidth,\n      height: contentHeight,\n      r: borderRadius\n    });\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(content);\n    } else {\n      content.invisible = false;\n      var nodeStyle = thisNode.getVisual('style');\n      var visualColor = nodeStyle.fill;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualColor;\n      normalStyle.decal = nodeStyle.decal;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      // PENDING: convert ZRColor to ColorString for text.\n      prepareText(content, visualColor, nodeStyle.opacity, null);\n      content.setStyle(normalStyle);\n      content.ensureState('emphasis').style = emphasisStyle;\n      content.ensureState('blur').style = blurStyle;\n      content.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(content);\n    }\n    group.add(content);\n  }\n  function processInvisible(element) {\n    // Delay invisible setting utill animation finished,\n    // avoid element vanish suddenly before animation.\n    !element.invisible && willInvisibleEls.push(element);\n  }\n  function prepareText(rectEl, visualColor, visualOpacity,\n  // Can be null/undefined\n  upperLabelRect) {\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\n    var defaultText = convertOptionIdName(nodeModel.get('name'), null);\n    var isShow = normalLabelModel.getShallow('show');\n    setLabelStyle(rectEl, getLabelStatesModels(nodeModel, upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL), {\n      defaultText: isShow ? defaultText : null,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      labelFetcher: seriesModel,\n      labelDataIndex: thisNode.dataIndex\n    });\n    var textEl = rectEl.getTextContent();\n    if (!textEl) {\n      return;\n    }\n    var textStyle = textEl.style;\n    var textPadding = normalizeCssArray(textStyle.padding || 0);\n    if (upperLabelRect) {\n      rectEl.setTextConfig({\n        layoutRect: upperLabelRect\n      });\n      textEl.disableLabelLayout = true;\n    }\n    textEl.beforeUpdate = function () {\n      var width = Math.max((upperLabelRect ? upperLabelRect.width : rectEl.shape.width) - textPadding[1] - textPadding[3], 0);\n      var height = Math.max((upperLabelRect ? upperLabelRect.height : rectEl.shape.height) - textPadding[0] - textPadding[2], 0);\n      if (textStyle.width !== width || textStyle.height !== height) {\n        textEl.setStyle({\n          width: width,\n          height: height\n        });\n      }\n    };\n    textStyle.truncateMinChar = 2;\n    textStyle.lineOverflow = 'truncate';\n    addDrillDownIcon(textStyle, upperLabelRect, thisLayout);\n    var textEmphasisState = textEl.getState('emphasis');\n    addDrillDownIcon(textEmphasisState ? textEmphasisState.style : null, upperLabelRect, thisLayout);\n  }\n  function addDrillDownIcon(style, upperLabelRect, thisLayout) {\n    var text = style ? style.text : null;\n    if (!upperLabelRect && thisLayout.isLeafRoot && text != null) {\n      var iconChar = seriesModel.get('drillDownIcon', true);\n      style.text = iconChar ? iconChar + ' ' + text : text;\n    }\n  }\n  function giveGraphic(storageName, Ctor, depth, z) {\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\n    var lasts = lastsForAnimation[storageName];\n    if (element) {\n      // Remove from oldStorage\n      oldStorage[storageName][oldRawIndex] = null;\n      prepareAnimationWhenHasOld(lasts, element);\n    }\n    // If invisible and no old element, do not create new element (for optimizing).\n    else if (!thisInvisible) {\n      element = new Ctor();\n      if (element instanceof Displayable) {\n        element.z2 = calculateZ2(depth, z);\n      }\n      prepareAnimationWhenNoOld(lasts, element);\n    }\n    // Set to thisStorage\n    return thisStorage[storageName][thisRawIndex] = element;\n  }\n  function prepareAnimationWhenHasOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    if (element instanceof Group) {\n      lastCfg.oldX = element.x;\n      lastCfg.oldY = element.y;\n    } else {\n      lastCfg.oldShape = extend({}, element.shape);\n    }\n  }\n  // If a element is new, we need to find the animation start point carefully,\n  // otherwise it will looks strange when 'zoomToNode'.\n  function prepareAnimationWhenNoOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    var parentNode = thisNode.parentNode;\n    var isGroup = element instanceof graphic.Group;\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\n      var parentOldX = 0;\n      var parentOldY = 0;\n      // New nodes appear from right-bottom corner in 'zoomToNode' animation.\n      // For convenience, get old bounding rect from background.\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\n      if (!reRoot && parentOldBg && parentOldBg.oldShape) {\n        parentOldX = parentOldBg.oldShape.width;\n        parentOldY = parentOldBg.oldShape.height;\n      }\n      // When no parent old shape found, its parent is new too,\n      // so we can just use {x:0, y:0}.\n      if (isGroup) {\n        lastCfg.oldX = 0;\n        lastCfg.oldY = parentOldY;\n      } else {\n        lastCfg.oldShape = {\n          x: parentOldX,\n          y: parentOldY,\n          width: 0,\n          height: 0\n        };\n      }\n    }\n    // Fade in, user can be aware that these nodes are new.\n    lastCfg.fadein = !isGroup;\n  }\n}\n// We cannot set all background with the same z, because the behaviour of\n// drill down and roll up differ background creation sequence from tree\n// hierarchy sequence, which cause lower background elements to overlap\n// upper ones. So we calculate z based on depth.\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\n// treemap with large z overlaps other components.\nfunction calculateZ2(depth, z2InLevel) {\n  return depth * Z2_BASE + z2InLevel;\n}\nexport default TreemapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { each, extend, isArray } from 'zrender/lib/core/util.js';\nimport { modifyHSL, modifyAlpha } from 'zrender/lib/tool/color.js';\nimport { makeInner } from '../../util/model.js';\nvar ITEM_STYLE_NORMAL = 'itemStyle';\nvar inner = makeInner();\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel) {\n    var tree = seriesModel.getData().tree;\n    var root = tree.root;\n    if (root.isRemoved()) {\n      return;\n    }\n    travelTree(root,\n    // Visual should calculate from tree root but not view root.\n    {}, seriesModel.getViewRoot().getAncestors(), seriesModel);\n  }\n};\nfunction travelTree(node, designatedVisual, viewRootAncestors, seriesModel) {\n  var nodeModel = node.getModel();\n  var nodeLayout = node.getLayout();\n  var data = node.hostTree.data;\n  // Optimize\n  if (!nodeLayout || nodeLayout.invisible || !nodeLayout.isInView) {\n    return;\n  }\n  var nodeItemStyleModel = nodeModel.getModel(ITEM_STYLE_NORMAL);\n  var visuals = buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel);\n  var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n  // calculate border color\n  var borderColor = nodeItemStyleModel.get('borderColor');\n  var borderColorSaturation = nodeItemStyleModel.get('borderColorSaturation');\n  var thisNodeColor;\n  if (borderColorSaturation != null) {\n    // For performance, do not always execute 'calculateColor'.\n    thisNodeColor = calculateColor(visuals);\n    borderColor = calculateBorderColor(borderColorSaturation, thisNodeColor);\n  }\n  existsStyle.stroke = borderColor;\n  var viewChildren = node.viewChildren;\n  if (!viewChildren || !viewChildren.length) {\n    thisNodeColor = calculateColor(visuals);\n    // Apply visual to this node.\n    existsStyle.fill = thisNodeColor;\n  } else {\n    var mapping_1 = buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren);\n    // Designate visual to children.\n    each(viewChildren, function (child, index) {\n      // If higher than viewRoot, only ancestors of viewRoot is needed to visit.\n      if (child.depth >= viewRootAncestors.length || child === viewRootAncestors[child.depth]) {\n        var childVisual = mapVisual(nodeModel, visuals, child, index, mapping_1, seriesModel);\n        travelTree(child, childVisual, viewRootAncestors, seriesModel);\n      }\n    });\n  }\n}\nfunction buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel) {\n  var visuals = extend({}, designatedVisual);\n  var designatedVisualItemStyle = seriesModel.designatedVisualItemStyle;\n  each(['color', 'colorAlpha', 'colorSaturation'], function (visualName) {\n    // Priority: thisNode > thisLevel > parentNodeDesignated > seriesModel\n    designatedVisualItemStyle[visualName] = designatedVisual[visualName];\n    var val = nodeItemStyleModel.get(visualName);\n    designatedVisualItemStyle[visualName] = null;\n    val != null && (visuals[visualName] = val);\n  });\n  return visuals;\n}\nfunction calculateColor(visuals) {\n  var color = getValueVisualDefine(visuals, 'color');\n  if (color) {\n    var colorAlpha = getValueVisualDefine(visuals, 'colorAlpha');\n    var colorSaturation = getValueVisualDefine(visuals, 'colorSaturation');\n    if (colorSaturation) {\n      color = modifyHSL(color, null, null, colorSaturation);\n    }\n    if (colorAlpha) {\n      color = modifyAlpha(color, colorAlpha);\n    }\n    return color;\n  }\n}\nfunction calculateBorderColor(borderColorSaturation, thisNodeColor) {\n  return thisNodeColor != null\n  // Can only be string\n  ? modifyHSL(thisNodeColor, null, null, borderColorSaturation) : null;\n}\nfunction getValueVisualDefine(visuals, name) {\n  var value = visuals[name];\n  if (value != null && value !== 'none') {\n    return value;\n  }\n}\nfunction buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren) {\n  if (!viewChildren || !viewChildren.length) {\n    return;\n  }\n  var rangeVisual = getRangeVisual(nodeModel, 'color') || visuals.color != null && visuals.color !== 'none' && (getRangeVisual(nodeModel, 'colorAlpha') || getRangeVisual(nodeModel, 'colorSaturation'));\n  if (!rangeVisual) {\n    return;\n  }\n  var visualMin = nodeModel.get('visualMin');\n  var visualMax = nodeModel.get('visualMax');\n  var dataExtent = nodeLayout.dataExtent.slice();\n  visualMin != null && visualMin < dataExtent[0] && (dataExtent[0] = visualMin);\n  visualMax != null && visualMax > dataExtent[1] && (dataExtent[1] = visualMax);\n  var colorMappingBy = nodeModel.get('colorMappingBy');\n  var opt = {\n    type: rangeVisual.name,\n    dataExtent: dataExtent,\n    visual: rangeVisual.range\n  };\n  if (opt.type === 'color' && (colorMappingBy === 'index' || colorMappingBy === 'id')) {\n    opt.mappingMethod = 'category';\n    opt.loop = true;\n    // categories is ordinal, so do not set opt.categories.\n  } else {\n    opt.mappingMethod = 'linear';\n  }\n  var mapping = new VisualMapping(opt);\n  inner(mapping).drColorMappingBy = colorMappingBy;\n  return mapping;\n}\n// Notice: If we don't have the attribute 'colorRange', but only use\n// attribute 'color' to represent both concepts of 'colorRange' and 'color',\n// (It means 'colorRange' when 'color' is Array, means 'color' when not array),\n// this problem will be encountered:\n// If a level-1 node doesn't have children, and its siblings have children,\n// and colorRange is set on level-1, then the node cannot be colored.\n// So we separate 'colorRange' and 'color' to different attributes.\nfunction getRangeVisual(nodeModel, name) {\n  // 'colorRange', 'colorARange', 'colorSRange'.\n  // If not exists on this node, fetch from levels and series.\n  var range = nodeModel.get(name);\n  return isArray(range) && range.length ? {\n    name: name,\n    range: range\n  } : null;\n}\nfunction mapVisual(nodeModel, visuals, child, index, mapping, seriesModel) {\n  var childVisuals = extend({}, visuals);\n  if (mapping) {\n    // Only support color, colorAlpha, colorSaturation.\n    var mappingType = mapping.type;\n    var colorMappingBy = mappingType === 'color' && inner(mapping).drColorMappingBy;\n    var value = colorMappingBy === 'index' ? index : colorMappingBy === 'id' ? seriesModel.mapIdToIndex(child.getId()) : child.getValue(nodeModel.get('visualDimension'));\n    childVisuals[mappingType] = mapping.mapValueToVisual(value);\n  }\n  return childVisuals;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The treemap layout implementation was originally copied from\r\n* \"d3.js\" with some modifications made for this project.\r\n* (See more details in the comment of the method \"squarify\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent, MAX_SAFE_INTEGER } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from '../helper/treeHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar retrieveValue = zrUtil.retrieve;\nvar each = zrUtil.each;\nvar PATH_BORDER_WIDTH = ['itemStyle', 'borderWidth'];\nvar PATH_GAP_WIDTH = ['itemStyle', 'gapWidth'];\nvar PATH_UPPER_LABEL_SHOW = ['upperLabel', 'show'];\nvar PATH_UPPER_LABEL_HEIGHT = ['upperLabel', 'height'];\n;\n/**\r\n * @public\r\n */\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel, ecModel, api, payload) {\n    // Layout result in each node:\n    // {x, y, width, height, area, borderWidth}\n    var ecWidth = api.getWidth();\n    var ecHeight = api.getHeight();\n    var seriesOption = seriesModel.option;\n    var layoutInfo = layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    var size = seriesOption.size || []; // Compatible with ec2.\n    var containerWidth = parsePercent(retrieveValue(layoutInfo.width, size[0]), ecWidth);\n    var containerHeight = parsePercent(retrieveValue(layoutInfo.height, size[1]), ecHeight);\n    // Fetch payload info.\n    var payloadType = payload && payload.type;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var rootRect = payloadType === 'treemapRender' || payloadType === 'treemapMove' ? payload.rootRect : null;\n    var viewRoot = seriesModel.getViewRoot();\n    var viewAbovePath = helper.getPathToRoot(viewRoot);\n    if (payloadType !== 'treemapMove') {\n      var rootSize = payloadType === 'treemapZoomToNode' ? estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) : rootRect ? [rootRect.width, rootRect.height] : [containerWidth, containerHeight];\n      var sort_1 = seriesOption.sort;\n      if (sort_1 && sort_1 !== 'asc' && sort_1 !== 'desc') {\n        // Default to be desc order.\n        sort_1 = 'desc';\n      }\n      var options = {\n        squareRatio: seriesOption.squareRatio,\n        sort: sort_1,\n        leafDepth: seriesOption.leafDepth\n      };\n      // layout should be cleared because using updateView but not update.\n      viewRoot.hostTree.clearLayouts();\n      // TODO\n      // optimize: if out of view clip, do not layout.\n      // But take care that if do not render node out of view clip,\n      // how to calculate start po\n      var viewRootLayout_1 = {\n        x: 0,\n        y: 0,\n        width: rootSize[0],\n        height: rootSize[1],\n        area: rootSize[0] * rootSize[1]\n      };\n      viewRoot.setLayout(viewRootLayout_1);\n      squarify(viewRoot, options, false, 0);\n      // Supplement layout.\n      viewRootLayout_1 = viewRoot.getLayout();\n      each(viewAbovePath, function (node, index) {\n        var childValue = (viewAbovePath[index + 1] || viewRoot).getValue();\n        node.setLayout(zrUtil.extend({\n          dataExtent: [childValue, childValue],\n          borderWidth: 0,\n          upperHeight: 0\n        }, viewRootLayout_1));\n      });\n    }\n    var treeRoot = seriesModel.getData().tree.root;\n    treeRoot.setLayout(calculateRootPosition(layoutInfo, rootRect, targetInfo), true);\n    seriesModel.setLayoutInfo(layoutInfo);\n    // FIXME\n    // 现在没有clip功能，暂时取ec高宽。\n    prunning(treeRoot,\n    // Transform to base element coordinate system.\n    new BoundingRect(-layoutInfo.x, -layoutInfo.y, ecWidth, ecHeight), viewAbovePath, viewRoot, 0);\n  }\n};\n/**\r\n * Layout treemap with squarify algorithm.\r\n * The original presentation of this algorithm\r\n * was made by Mark Bruls, Kees Huizing, and Jarke J. van Wijk\r\n * <https://graphics.ethz.ch/teaching/scivis_common/Literature/squarifiedTreeMaps.pdf>.\r\n * The implementation of this algorithm was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/layout/treemap.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * @protected\r\n * @param {module:echarts/data/Tree~TreeNode} node\r\n * @param {Object} options\r\n * @param {string} options.sort 'asc' or 'desc'\r\n * @param {number} options.squareRatio\r\n * @param {boolean} hideChildren\r\n * @param {number} depth\r\n */\nfunction squarify(node, options, hideChildren, depth) {\n  var width;\n  var height;\n  if (node.isRemoved()) {\n    return;\n  }\n  var thisLayout = node.getLayout();\n  width = thisLayout.width;\n  height = thisLayout.height;\n  // Considering border and gap\n  var nodeModel = node.getModel();\n  var borderWidth = nodeModel.get(PATH_BORDER_WIDTH);\n  var halfGapWidth = nodeModel.get(PATH_GAP_WIDTH) / 2;\n  var upperLabelHeight = getUpperLabelHeight(nodeModel);\n  var upperHeight = Math.max(borderWidth, upperLabelHeight);\n  var layoutOffset = borderWidth - halfGapWidth;\n  var layoutOffsetUpper = upperHeight - halfGapWidth;\n  node.setLayout({\n    borderWidth: borderWidth,\n    upperHeight: upperHeight,\n    upperLabelHeight: upperLabelHeight\n  }, true);\n  width = mathMax(width - 2 * layoutOffset, 0);\n  height = mathMax(height - layoutOffset - layoutOffsetUpper, 0);\n  var totalArea = width * height;\n  var viewChildren = initChildren(node, nodeModel, totalArea, options, hideChildren, depth);\n  if (!viewChildren.length) {\n    return;\n  }\n  var rect = {\n    x: layoutOffset,\n    y: layoutOffsetUpper,\n    width: width,\n    height: height\n  };\n  var rowFixedLength = mathMin(width, height);\n  var best = Infinity; // the best row score so far\n  var row = [];\n  row.area = 0;\n  for (var i = 0, len = viewChildren.length; i < len;) {\n    var child = viewChildren[i];\n    row.push(child);\n    row.area += child.getLayout().area;\n    var score = worst(row, rowFixedLength, options.squareRatio);\n    // continue with this orientation\n    if (score <= best) {\n      i++;\n      best = score;\n    }\n    // abort, and try a different orientation\n    else {\n      row.area -= row.pop().getLayout().area;\n      position(row, rowFixedLength, rect, halfGapWidth, false);\n      rowFixedLength = mathMin(rect.width, rect.height);\n      row.length = row.area = 0;\n      best = Infinity;\n    }\n  }\n  if (row.length) {\n    position(row, rowFixedLength, rect, halfGapWidth, true);\n  }\n  if (!hideChildren) {\n    var childrenVisibleMin = nodeModel.get('childrenVisibleMin');\n    if (childrenVisibleMin != null && totalArea < childrenVisibleMin) {\n      hideChildren = true;\n    }\n  }\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    squarify(viewChildren[i], options, hideChildren, depth + 1);\n  }\n}\n/**\r\n * Set area to each child, and calculate data extent for visual coding.\r\n */\nfunction initChildren(node, nodeModel, totalArea, options, hideChildren, depth) {\n  var viewChildren = node.children || [];\n  var orderBy = options.sort;\n  orderBy !== 'asc' && orderBy !== 'desc' && (orderBy = null);\n  var overLeafDepth = options.leafDepth != null && options.leafDepth <= depth;\n  // leafDepth has higher priority.\n  if (hideChildren && !overLeafDepth) {\n    return node.viewChildren = [];\n  }\n  // Sort children, order by desc.\n  viewChildren = zrUtil.filter(viewChildren, function (child) {\n    return !child.isRemoved();\n  });\n  sort(viewChildren, orderBy);\n  var info = statistic(nodeModel, viewChildren, orderBy);\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n  info.sum = filterByThreshold(nodeModel, totalArea, info.sum, orderBy, viewChildren);\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n  // Set area to each child.\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    var area = viewChildren[i].getValue() / info.sum * totalArea;\n    // Do not use setLayout({...}, true), because it is needed to clear last layout.\n    viewChildren[i].setLayout({\n      area: area\n    });\n  }\n  if (overLeafDepth) {\n    viewChildren.length && node.setLayout({\n      isLeafRoot: true\n    }, true);\n    viewChildren.length = 0;\n  }\n  node.viewChildren = viewChildren;\n  node.setLayout({\n    dataExtent: info.dataExtent\n  }, true);\n  return viewChildren;\n}\n/**\r\n * Consider 'visibleMin'. Modify viewChildren and get new sum.\r\n */\nfunction filterByThreshold(nodeModel, totalArea, sum, orderBy, orderedChildren) {\n  // visibleMin is not supported yet when no option.sort.\n  if (!orderBy) {\n    return sum;\n  }\n  var visibleMin = nodeModel.get('visibleMin');\n  var len = orderedChildren.length;\n  var deletePoint = len;\n  // Always travel from little value to big value.\n  for (var i = len - 1; i >= 0; i--) {\n    var value = orderedChildren[orderBy === 'asc' ? len - i - 1 : i].getValue();\n    if (value / sum * totalArea < visibleMin) {\n      deletePoint = i;\n      sum -= value;\n    }\n  }\n  orderBy === 'asc' ? orderedChildren.splice(0, len - deletePoint) : orderedChildren.splice(deletePoint, len - deletePoint);\n  return sum;\n}\n/**\r\n * Sort\r\n */\nfunction sort(viewChildren, orderBy) {\n  if (orderBy) {\n    viewChildren.sort(function (a, b) {\n      var diff = orderBy === 'asc' ? a.getValue() - b.getValue() : b.getValue() - a.getValue();\n      return diff === 0 ? orderBy === 'asc' ? a.dataIndex - b.dataIndex : b.dataIndex - a.dataIndex : diff;\n    });\n  }\n  return viewChildren;\n}\n/**\r\n * Statistic\r\n */\nfunction statistic(nodeModel, children, orderBy) {\n  // Calculate sum.\n  var sum = 0;\n  for (var i = 0, len = children.length; i < len; i++) {\n    sum += children[i].getValue();\n  }\n  // Statistic data extent for latter visual coding.\n  // Notice: data extent should be calculate based on raw children\n  // but not filtered view children, otherwise visual mapping will not\n  // be stable when zoom (where children is filtered by visibleMin).\n  var dimension = nodeModel.get('visualDimension');\n  var dataExtent;\n  // The same as area dimension.\n  if (!children || !children.length) {\n    dataExtent = [NaN, NaN];\n  } else if (dimension === 'value' && orderBy) {\n    dataExtent = [children[children.length - 1].getValue(), children[0].getValue()];\n    orderBy === 'asc' && dataExtent.reverse();\n  }\n  // Other dimension.\n  else {\n    dataExtent = [Infinity, -Infinity];\n    each(children, function (child) {\n      var value = child.getValue(dimension);\n      value < dataExtent[0] && (dataExtent[0] = value);\n      value > dataExtent[1] && (dataExtent[1] = value);\n    });\n  }\n  return {\n    sum: sum,\n    dataExtent: dataExtent\n  };\n}\n/**\r\n * Computes the score for the specified row,\r\n * as the worst aspect ratio.\r\n */\nfunction worst(row, rowFixedLength, ratio) {\n  var areaMax = 0;\n  var areaMin = Infinity;\n  for (var i = 0, area = void 0, len = row.length; i < len; i++) {\n    area = row[i].getLayout().area;\n    if (area) {\n      area < areaMin && (areaMin = area);\n      area > areaMax && (areaMax = area);\n    }\n  }\n  var squareArea = row.area * row.area;\n  var f = rowFixedLength * rowFixedLength * ratio;\n  return squareArea ? mathMax(f * areaMax / squareArea, squareArea / (f * areaMin)) : Infinity;\n}\n/**\r\n * Positions the specified row of nodes. Modifies `rect`.\r\n */\nfunction position(row, rowFixedLength, rect, halfGapWidth, flush) {\n  // When rowFixedLength === rect.width,\n  // it is horizontal subdivision,\n  // rowFixedLength is the width of the subdivision,\n  // rowOtherLength is the height of the subdivision,\n  // and nodes will be positioned from left to right.\n  // wh[idx0WhenH] means: when horizontal,\n  //      wh[idx0WhenH] => wh[0] => 'width'.\n  //      xy[idx1WhenH] => xy[1] => 'y'.\n  var idx0WhenH = rowFixedLength === rect.width ? 0 : 1;\n  var idx1WhenH = 1 - idx0WhenH;\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  var last = rect[xy[idx0WhenH]];\n  var rowOtherLength = rowFixedLength ? row.area / rowFixedLength : 0;\n  if (flush || rowOtherLength > rect[wh[idx1WhenH]]) {\n    rowOtherLength = rect[wh[idx1WhenH]]; // over+underflow\n  }\n  for (var i = 0, rowLen = row.length; i < rowLen; i++) {\n    var node = row[i];\n    var nodeLayout = {};\n    var step = rowOtherLength ? node.getLayout().area / rowOtherLength : 0;\n    var wh1 = nodeLayout[wh[idx1WhenH]] = mathMax(rowOtherLength - 2 * halfGapWidth, 0);\n    // We use Math.max/min to avoid negative width/height when considering gap width.\n    var remain = rect[xy[idx0WhenH]] + rect[wh[idx0WhenH]] - last;\n    var modWH = i === rowLen - 1 || remain < step ? remain : step;\n    var wh0 = nodeLayout[wh[idx0WhenH]] = mathMax(modWH - 2 * halfGapWidth, 0);\n    nodeLayout[xy[idx1WhenH]] = rect[xy[idx1WhenH]] + mathMin(halfGapWidth, wh1 / 2);\n    nodeLayout[xy[idx0WhenH]] = last + mathMin(halfGapWidth, wh0 / 2);\n    last += modWH;\n    node.setLayout(nodeLayout, true);\n  }\n  rect[xy[idx1WhenH]] += rowOtherLength;\n  rect[wh[idx1WhenH]] -= rowOtherLength;\n}\n// Return [containerWidth, containerHeight] as default.\nfunction estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) {\n  // If targetInfo.node exists, we zoom to the node,\n  // so estimate whole width and height by target node.\n  var currNode = (targetInfo || {}).node;\n  var defaultSize = [containerWidth, containerHeight];\n  if (!currNode || currNode === viewRoot) {\n    return defaultSize;\n  }\n  var parent;\n  var viewArea = containerWidth * containerHeight;\n  var area = viewArea * seriesModel.option.zoomToNodeRatio;\n  while (parent = currNode.parentNode) {\n    // jshint ignore:line\n    var sum = 0;\n    var siblings = parent.children;\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      sum += siblings[i].getValue();\n    }\n    var currNodeValue = currNode.getValue();\n    if (currNodeValue === 0) {\n      return defaultSize;\n    }\n    area *= sum / currNodeValue;\n    // Considering border, suppose aspect ratio is 1.\n    var parentModel = parent.getModel();\n    var borderWidth = parentModel.get(PATH_BORDER_WIDTH);\n    var upperHeight = Math.max(borderWidth, getUpperLabelHeight(parentModel));\n    area += 4 * borderWidth * borderWidth + (3 * borderWidth + upperHeight) * Math.pow(area, 0.5);\n    area > MAX_SAFE_INTEGER && (area = MAX_SAFE_INTEGER);\n    currNode = parent;\n  }\n  area < viewArea && (area = viewArea);\n  var scale = Math.pow(area / viewArea, 0.5);\n  return [containerWidth * scale, containerHeight * scale];\n}\n// Root position based on coord of containerGroup\nfunction calculateRootPosition(layoutInfo, rootRect, targetInfo) {\n  if (rootRect) {\n    return {\n      x: rootRect.x,\n      y: rootRect.y\n    };\n  }\n  var defaultPosition = {\n    x: 0,\n    y: 0\n  };\n  if (!targetInfo) {\n    return defaultPosition;\n  }\n  // If targetInfo is fetched by 'retrieveTargetInfo',\n  // old tree and new tree are the same tree,\n  // so the node still exists and we can visit it.\n  var targetNode = targetInfo.node;\n  var layout = targetNode.getLayout();\n  if (!layout) {\n    return defaultPosition;\n  }\n  // Transform coord from local to container.\n  var targetCenter = [layout.width / 2, layout.height / 2];\n  var node = targetNode;\n  while (node) {\n    var nodeLayout = node.getLayout();\n    targetCenter[0] += nodeLayout.x;\n    targetCenter[1] += nodeLayout.y;\n    node = node.parentNode;\n  }\n  return {\n    x: layoutInfo.width / 2 - targetCenter[0],\n    y: layoutInfo.height / 2 - targetCenter[1]\n  };\n}\n// Mark nodes visible for prunning when visual coding and rendering.\n// Prunning depends on layout and root position, so we have to do it after layout.\nfunction prunning(node, clipRect, viewAbovePath, viewRoot, depth) {\n  var nodeLayout = node.getLayout();\n  var nodeInViewAbovePath = viewAbovePath[depth];\n  var isAboveViewRoot = nodeInViewAbovePath && nodeInViewAbovePath === node;\n  if (nodeInViewAbovePath && !isAboveViewRoot || depth === viewAbovePath.length && node !== viewRoot) {\n    return;\n  }\n  node.setLayout({\n    // isInView means: viewRoot sub tree + viewAbovePath\n    isInView: true,\n    // invisible only means: outside view clip so that the node can not\n    // see but still layout for animation preparation but not render.\n    invisible: !isAboveViewRoot && !clipRect.intersect(nodeLayout),\n    isAboveViewRoot: isAboveViewRoot\n  }, true);\n  // Transform to child coordinate.\n  var childClipRect = new BoundingRect(clipRect.x - nodeLayout.x, clipRect.y - nodeLayout.y, clipRect.width, clipRect.height);\n  each(node.viewChildren || [], function (child) {\n    prunning(child, childClipRect, viewAbovePath, viewRoot, depth + 1);\n  });\n}\nfunction getUpperLabelHeight(model) {\n  return model.get(PATH_UPPER_LABEL_SHOW) ? model.get(PATH_UPPER_LABEL_HEIGHT) : 0;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { installTreemapAction } from './treemapAction.js';\nimport TreemapSeriesModel from './TreemapSeries.js';\nimport TreemapView from './TreemapView.js';\nimport treemapVisual from './treemapVisual.js';\nimport treemapLayout from './treemapLayout.js';\nexport function install(registers) {\n  registers.registerSeriesModel(TreemapSeriesModel);\n  registers.registerChartView(TreemapView);\n  registers.registerVisual(treemapVisual);\n  registers.registerLayout(treemapLayout);\n  installTreemapAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n      if (category != null) {\n        if (isNumber(category)) {\n          category = categoryNames[category];\n        }\n        // If in any legend component the status is not selected.\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx);\n      // Add prefix to avoid conflict with Object.prototype.\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    });\n    // Assign category color to visual\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n        if (categoryIdx != null) {\n          if (isString(categoryIdx)) {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n  return a;\n}\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize'));\n    // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      // Edge visual must after node visual\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar KEY_DELIMITER = '-->';\n/**\r\n * params handler\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @returns {*}\r\n */\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\r\n * Generate a list of edge curvatures, 20 is the default\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @param {number} appendLength\r\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\r\n */\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = [];\n  // handler the function set\n  if (zrUtil.isNumber(autoCurvenessParmas)) {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  }\n  // append length\n  if (appendLength > length) {\n    length = appendLength;\n  }\n  // make sure the length is even\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\r\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\r\n * @param {number|string|module:echarts/data/Graph.Node} n1\r\n * @param {number|string|module:echarts/data/Graph.Node} n2\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @returns {string} key\r\n */\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\r\n * get opposite key\r\n * @param {string} key\r\n * @returns {string}\r\n */\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\r\n * get edgeMap with key\r\n * @param edge\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n */\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\r\n * calculate all cases total length\r\n * @param edge\r\n * @param seriesModel\r\n * @returns {number}\r\n */\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\r\n *\r\n * @param key\r\n */\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\r\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\r\n * @see /graph/GraphSeries.js@getInitialData\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n */\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {};\n  // calc the array of curveness List\n  createCurveness(seriesModel);\n}\n/**\r\n * set edgeMap with key\r\n * @param {number|string|module:echarts/data/Graph.Node} n1\r\n * @param {number|string|module:echarts/data/Graph.Node} n2\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @param {number} index\r\n */\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)];\n  // set direction\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\r\n * get curvature for edge\r\n * @param edge\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @param index\r\n */\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n  if (!autoCurvenessParams) {\n    return null;\n  }\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n  if (!edgeArray) {\n    return null;\n  }\n  var edgeIndex = -1;\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  }\n  // if totalLen is Longer createCurveness\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {};\n  // if is opposite edge, must set curvenss to opposite number\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList;\n  // if pass array no need parity\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection];\n    // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n    edge.setLayout(points);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper.js';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n          value.push(val);\n        }\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX;\n  // Scale node when zoom changes\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n  return +symbolSize;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\r\n * `basedOn` can be:\r\n * 'value':\r\n *     This layout is not accurate and have same bad case. For example,\r\n *     if the min value is very smaller than the max value, the nodes\r\n *     with the min value probably overlap even though there is enough\r\n *     space to layout them. So we only use this approach in the as the\r\n *     init layout of the force layout.\r\n *     FIXME\r\n *     Probably we do not need this method any more but use\r\n *     `basedOn: 'symbolSize'` in force layout if\r\n *     delay its init operations to GraphView.\r\n * 'symbolSize':\r\n *     This approach work only if all of the symbol size calculated.\r\n *     That is, the progressive rendering is not applied to graph.\r\n *     FIXME\r\n *     If progressive rendering is applied to graph some day,\r\n *     probably we have to use `basedOn: 'value'`.\r\n */\nexport function circularLayout(seriesModel, basedOn, draggingNode, pointer) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n  if (!count) {\n    return;\n  }\n  if (draggingNode) {\n    var _a = coordSys.pointToData(pointer),\n      tempX = _a[0],\n      tempY = _a[1];\n    var v = [tempX - cx, tempY - cy];\n    vec2.normalize(v, v);\n    vec2.scale(v, v, r);\n    draggingNode.setLayout([cx + v[0], cy + v[1]], true);\n    var circularRotateLabel = seriesModel.get(['circular', 'rotateLabel']);\n    rotateNodeLabel(draggingNode, circularRotateLabel, cx, cy);\n  }\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node);\n      // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r);\n      // when `symbolSize / 2` is bigger than `r`.\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf;\n      // init circular layout for\n      // 1. layout undefined node\n      // 2. not fixed node\n      (!node.getLayout() || !node.getLayout().fixed) && node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};\nexport function rotateNodeLabel(node, circularRotateLabel, cx, cy) {\n  var el = node.getGraphicEl();\n  // need to check if el exists. '-' value may not create node element.\n  if (!el) {\n    return;\n  }\n  var nodeModel = node.getModel();\n  var labelRotate = nodeModel.get(['label', 'rotate']) || 0;\n  var symbolPath = el.getSymbolPath();\n  if (circularRotateLabel) {\n    var pos = node.getLayout();\n    var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n    if (rad < 0) {\n      rad = Math.PI * 2 + rad;\n    }\n    var isLeft = pos[0] < cx;\n    if (isLeft) {\n      rad = rad - Math.PI;\n    }\n    var textPosition = isLeft ? 'left' : 'right';\n    symbolPath.setTextConfig({\n      rotation: -rad,\n      position: textPosition,\n      origin: 'center'\n    });\n    var emphasisState = symbolPath.ensureState('emphasis');\n    zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n      position: textPosition\n    });\n  } else {\n    symbolPath.setTextConfig({\n      rotation: labelRotate *= Math.PI / 180\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { circularLayout } from './circularLayoutHelper.js';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* Some formulas were originally copied from \"d3.js\" with some\r\n* modifications made for this project.\r\n* (See more details in the comment of the method \"step\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar scaleAndAdd = vec2.scaleAndAdd;\n// function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2];\n  // let scale = opts.scale || 1;\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity;\n  // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  }\n  // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n    /**\r\n     * Before step hook\r\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n    /**\r\n     * After step hook\r\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n    /**\r\n     * Some formulas were originally copied from \"d3.js\"\r\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\r\n     * with some modifications made for this project.\r\n     * See the license statement at the head of this file.\r\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n        if (isNaN(w)) {\n          w = 0;\n        }\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      }\n      // Gravity\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p);\n          // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      }\n      // Repulsive\n      // PENDING\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n      var v = [];\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { forceLayout } from './forceHelper.js';\nimport { simpleLayout } from './simpleLayoutHelper.js';\nimport { circularLayout } from './circularLayoutHelper.js';\nimport { linearMap } from '../../util/number.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value');\n      // let edgeDataExtent = edgeData.getDataExtent('value');\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength];\n      // Larger value has smaller length\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      });\n      // let coordSys = graphSeries.coordinateSystem;\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1;\n      // Step to get the layout\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport { extend } from 'zrender/lib/core/util.js';\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n    if (!coordSysType || coordSysType === 'view') {\n      var data_1 = seriesModel.getData();\n      var positions = data_1.mapArray(function (idx) {\n        var itemModel = data_1.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max);\n      // If width or height is 0\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]);\n      // FIXME If get view rect after data processed?\n      var viewRect = getViewRect(seriesModel, api, aspect);\n      // Position may be NaN, use view rect instead\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight);\n      // Update roam info\n      viewCoordSys.setCenter(seriesModel.get('center'), api);\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Line path for bezier and straight line draw\r\n */\nimport * as graphic from '../../util/graphic.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\nvar StraightLineShape = /** @class */function () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0;\n    // End point\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n  return StraightLineShape;\n}();\nvar CurveShape = /** @class */function (_super) {\n  __extends(CurveShape, _super);\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return CurveShape;\n}(StraightLineShape);\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\nvar ECLinePath = /** @class */function (_super) {\n  __extends(ECLinePath, _super);\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-line';\n    return _this;\n  }\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n  return ECLinePath;\n}(graphic.Path);\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each } from 'zrender/lib/core/util.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ECLinePath from './LinePath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle.js';\nimport { round } from '../../util/number.js';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\nfunction makeSymbolTypeValue(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return symbolType;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  return symbolType + symbolSizeArr + symbolOffsetArr + (symbolRotate || '') + (symbolKeepAspect || '');\n}\n/**\r\n * @inner\r\n */\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\nvar Line = /** @class */function (_super) {\n  __extends(Line, _super);\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this._createLine(lineData, idx, seriesScope);\n    return _this;\n  }\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx);\n      // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = makeSymbolTypeValue(symbolCategory, lineData, idx);\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  // TODO More strict on the List type in parameters?\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = makeSymbolTypeValue(symbolCategory, lineData, idx);\n      var key = makeSymbolTypeKey(symbolCategory);\n      // Symbol changed\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n      this[key] = symbolType;\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    // Optimization for large dataset\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle;\n    // Update symbol\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || '#000',\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent();\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign;\n      // 'start', 'middle', 'end'\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n      label.__labelDistance = distance;\n    }\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n    });\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent();\n    // Quick reject\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n    var invScale = 1;\n    var parentNode = this.parent;\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n      parentNode = parentNode.parent;\n    }\n    var line = lineGroup.childOfName('line');\n    // If line not changed\n    // FIXME Parent scale changed\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n      var dir = tangent[0] < 0 ? -1 : 1;\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n        label.rotation = rotation;\n      }\n      var dy = void 0;\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n  return Line;\n}(graphic.Group);\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport LineGroup from './Line.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nvar LineDraw = /** @class */function () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n    // Remove progressive els.\n    this._progressiveEls = null;\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData;\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldLineData) {\n      group.removeAll();\n    }\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n  ;\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData;\n    // Do not support update layout in incremental mode.\n    if (!lineData) {\n      return;\n    }\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n  ;\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    this._progressiveEls = [];\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n  return LineDraw;\n}();\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  var emphasisModel = hostModel.getModel('emphasis');\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: emphasisModel.getModel(['lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    blurScope: emphasisModel.get('blurScope'),\n    focus: emphasisModel.get('focus'),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\nfunction lineNeedsDraw(pts) {\n  return pts && !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as curveTool from 'zrender/lib/core/curve.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize } from './graphHelper.js';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  }\n  // Assume the segment is monotone，Find root through Bisection method\n  // At most 32 iteration\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval;\n    // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    }\n    // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n  return t;\n}\n// Adjust edge to avoid\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n    var originalPoints = linePoints.__original;\n    // Quadratic curve\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale);\n        // Subdivide and get the second\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale);\n        // Subdivide and get the first\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      }\n      // Copy back to layout\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    }\n    // Line\n    else {\n      vec2.copy(pts2[0], originalPoints[0]);\n      vec2.copy(pts2[1], originalPoints[1]);\n      vec2.sub(v, pts2[1], pts2[0]);\n      vec2.normalize(v, v);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n      }\n      vec2.copy(linePoints[0], pts2[0]);\n      vec2.copy(linePoints[1], pts2[1]);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LineDraw from '../helper/LineDraw.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport adjustEdge from './adjustEdge.js';\nimport { getNodeGlobalScale } from './graphHelper.js';\nimport ChartView from '../../view/Chart.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { simpleLayoutEdge } from './simpleLayoutHelper.js';\nimport { circularLayout, rotateNodeLabel } from './circularLayoutHelper.js';\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\nvar GraphView = /** @class */function (_super) {\n  __extends(GraphView, _super);\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphView.type;\n    return _this;\n  }\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  };\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    }\n    // Fix edge contact point with node\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData();\n    // TODO: TYPE\n    lineDraw.updateData(edgeData);\n    this._updateNodeAndLinkScale();\n    this._updateController(seriesModel, ecModel, api);\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n    var layout = seriesModel.get('layout');\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel();\n      if (!el) {\n        return;\n      }\n      // Update draggable\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n      if (draggable) {\n        el.on('drag', function (e) {\n          switch (layout) {\n            case 'force':\n              forceLayout.warmUp();\n              !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\n              forceLayout.setFixed(idx);\n              // Write position back to layout\n              data.setItemLayout(idx, [el.x, el.y]);\n              break;\n            case 'circular':\n              data.setItemLayout(idx, [el.x, el.y]);\n              // mark node fixed\n              node.setLayout({\n                fixed: true\n              }, true);\n              // recalculate circular layout\n              circularLayout(seriesModel, 'symbolSize', node, [e.offsetX, e.offsetY]);\n              _this.updateLayout(seriesModel);\n              break;\n            case 'none':\n            default:\n              data.setItemLayout(idx, [el.x, el.y]);\n              // update edge\n              simpleLayoutEdge(seriesModel.getGraph(), seriesModel);\n              _this.updateLayout(seriesModel);\n              break;\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n      el.setDraggable(draggable, !!itemModel.get('cursor'));\n      var focus = itemModel.get(['emphasis', 'focus']);\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n      if (!el) {\n        return;\n      }\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.graph.eachNode(function (node) {\n      rotateNodeLabel(node, circularRotateLabel, cx, cy);\n    });\n    this._firstRender = false;\n  };\n  GraphView.prototype.dispose = function () {\n    this.remove();\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\n    var self = this;\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\n      controller.disable();\n      return;\n    }\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n      _this._updateNodeAndLinkScale();\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n      _this._lineDraw.updateLayout();\n      // Only update label layout on zoom\n      api.updateLabelLayout();\n    });\n  };\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el && el.setSymbolScale(nodeScale);\n    });\n  };\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    this._symbolDraw.updateLayout();\n    this._lineDraw.updateLayout();\n  };\n  GraphView.prototype.remove = function () {\n    clearTimeout(this._layoutTimeout);\n    this._layouting = false;\n    this._layoutTimeout = null;\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  };\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\nexport default GraphView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport Graph from '../../data/Graph.js';\nimport linkSeriesData from '../../data/helper/linkSeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport createSeriesData from './createSeriesData.js';\nimport { convertOptionIdName } from '../../util/model.js';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve(\n    // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target;\n    // addEdge may fail when source or target not exists\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : [];\n    // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  });\n  // Update dataIndex of nodes and edges because invalid edge may be removed\n  graph.update();\n  return graph;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport Model from '../../model/Model.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip.js';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper.js';\nvar GraphSeriesModel = /** @class */function (_super) {\n  __extends(GraphSeriesModel, _super);\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    var self = this;\n    function getCategoriesData() {\n      return self._categoriesData;\n    }\n    // Provide data for legend select\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n        return model;\n      });\n      // TODO Inherit resolveParentPath by default in Model#getModel?\n      var oldGetModel = Model.prototype.getModel;\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n          return newPathArr;\n        }\n        return pathArr;\n      }\n    }\n  };\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    }\n    // dataType === 'node' or empty\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this)\n    // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\nexport default GraphSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport categoryFilter from './categoryFilter.js';\nimport categoryVisual from './categoryVisual.js';\nimport edgeVisual from './edgeVisual.js';\nimport simpleLayout from './simpleLayout.js';\nimport circularLayout from './circularLayout.js';\nimport forceLayout from './forceLayout.js';\nimport createView from './createView.js';\nimport View from '../../coord/View.js';\nimport GraphView from './GraphView.js';\nimport GraphSeriesModel from './GraphSeries.js';\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  });\n  // Register legacy focus actions\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, noop);\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, noop);\n  // Register roam action.\n  registers.registerAction(actionInfo, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nvar PointerShape = /** @class */function () {\n  function PointerShape() {\n    this.angle = 0;\n    this.width = 10;\n    this.r = 10;\n    this.x = 0;\n    this.y = 0;\n  }\n  return PointerShape;\n}();\nvar PointerPath = /** @class */function (_super) {\n  __extends(PointerPath, _super);\n  function PointerPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'pointer';\n    return _this;\n  }\n  PointerPath.prototype.getDefaultShape = function () {\n    return new PointerShape();\n  };\n  PointerPath.prototype.buildPath = function (ctx, shape) {\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    var r = shape.r;\n    var width = shape.width;\n    var angle = shape.angle;\n    var x = shape.x - mathCos(angle) * width * (width >= r / 3 ? 1 : 2);\n    var y = shape.y - mathSin(angle) * width * (width >= r / 3 ? 1 : 2);\n    angle = shape.angle - Math.PI / 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(shape.x + mathCos(angle) * width, shape.y + mathSin(angle) * width);\n    ctx.lineTo(shape.x + mathCos(shape.angle) * r, shape.y + mathSin(shape.angle) * r);\n    ctx.lineTo(shape.x - mathCos(angle) * width, shape.y - mathSin(angle) * width);\n    ctx.lineTo(x, y);\n  };\n  return PointerPath;\n}(Path);\nexport default PointerPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport PointerPath from './PointerPath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { createTextStyle, setLabelValueAnimation, animateLabelValue } from '../../label/labelStyle.js';\nimport ChartView from '../../view/Chart.js';\nimport { parsePercent, round, linearMap } from '../../util/number.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { extend, isFunction, isString, isNumber, each } from 'zrender/lib/core/util.js';\nimport { setCommonECData } from '../../util/innerStore.js';\nimport { normalizeArcAngles } from 'zrender/lib/core/PathProxy.js';\nfunction parsePosition(seriesModel, api) {\n  var center = seriesModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], api.getWidth());\n  var cy = parsePercent(center[1], api.getHeight());\n  var r = parsePercent(seriesModel.get('radius'), size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r: r\n  };\n}\nfunction formatLabel(value, labelFormatter) {\n  var label = value == null ? '' : value + '';\n  if (labelFormatter) {\n    if (isString(labelFormatter)) {\n      label = labelFormatter.replace('{value}', label);\n    } else if (isFunction(labelFormatter)) {\n      label = labelFormatter(value);\n    }\n  }\n  return label;\n}\nvar GaugeView = /** @class */function (_super) {\n  __extends(GaugeView, _super);\n  function GaugeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GaugeView.type;\n    return _this;\n  }\n  GaugeView.prototype.render = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n    var colorList = seriesModel.get(['axisLine', 'lineStyle', 'color']);\n    var posInfo = parsePosition(seriesModel, api);\n    this._renderMain(seriesModel, ecModel, api, colorList, posInfo);\n    this._data = seriesModel.getData();\n  };\n  GaugeView.prototype.dispose = function () {};\n  GaugeView.prototype._renderMain = function (seriesModel, ecModel, api, colorList, posInfo) {\n    var group = this.group;\n    var clockwise = seriesModel.get('clockwise');\n    var startAngle = -seriesModel.get('startAngle') / 180 * Math.PI;\n    var endAngle = -seriesModel.get('endAngle') / 180 * Math.PI;\n    var axisLineModel = seriesModel.getModel('axisLine');\n    var roundCap = axisLineModel.get('roundCap');\n    var MainPath = roundCap ? Sausage : graphic.Sector;\n    var showAxis = axisLineModel.get('show');\n    var lineStyleModel = axisLineModel.getModel('lineStyle');\n    var axisLineWidth = lineStyleModel.get('width');\n    var angles = [startAngle, endAngle];\n    normalizeArcAngles(angles, !clockwise);\n    startAngle = angles[0];\n    endAngle = angles[1];\n    var angleRangeSpan = endAngle - startAngle;\n    var prevEndAngle = startAngle;\n    var sectors = [];\n    for (var i = 0; showAxis && i < colorList.length; i++) {\n      // Clamp\n      var percent = Math.min(Math.max(colorList[i][0], 0), 1);\n      endAngle = startAngle + angleRangeSpan * percent;\n      var sector = new MainPath({\n        shape: {\n          startAngle: prevEndAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: posInfo.r - axisLineWidth,\n          r: posInfo.r\n        },\n        silent: true\n      });\n      sector.setStyle({\n        fill: colorList[i][1]\n      });\n      sector.setStyle(lineStyleModel.getLineStyle(\n      // Because we use sector to simulate arc\n      // so the properties for stroking are useless\n      ['color', 'width']));\n      sectors.push(sector);\n      prevEndAngle = endAngle;\n    }\n    sectors.reverse();\n    each(sectors, function (sector) {\n      return group.add(sector);\n    });\n    var getColor = function (percent) {\n      // Less than 0\n      if (percent <= 0) {\n        return colorList[0][1];\n      }\n      var i;\n      for (i = 0; i < colorList.length; i++) {\n        if (colorList[i][0] >= percent && (i === 0 ? 0 : colorList[i - 1][0]) < percent) {\n          return colorList[i][1];\n        }\n      }\n      // More than 1\n      return colorList[i - 1][1];\n    };\n    this._renderTicks(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n    this._renderTitleAndDetail(seriesModel, ecModel, api, getColor, posInfo);\n    this._renderAnchor(seriesModel, posInfo);\n    this._renderPointer(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n  };\n  GaugeView.prototype._renderTicks = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var cx = posInfo.cx;\n    var cy = posInfo.cy;\n    var r = posInfo.r;\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var splitLineModel = seriesModel.getModel('splitLine');\n    var tickModel = seriesModel.getModel('axisTick');\n    var labelModel = seriesModel.getModel('axisLabel');\n    var splitNumber = seriesModel.get('splitNumber');\n    var subSplitNumber = tickModel.get('splitNumber');\n    var splitLineLen = parsePercent(splitLineModel.get('length'), r);\n    var tickLen = parsePercent(tickModel.get('length'), r);\n    var angle = startAngle;\n    var step = (endAngle - startAngle) / splitNumber;\n    var subStep = step / subSplitNumber;\n    var splitLineStyle = splitLineModel.getModel('lineStyle').getLineStyle();\n    var tickLineStyle = tickModel.getModel('lineStyle').getLineStyle();\n    var splitLineDistance = splitLineModel.get('distance');\n    var unitX;\n    var unitY;\n    for (var i = 0; i <= splitNumber; i++) {\n      unitX = Math.cos(angle);\n      unitY = Math.sin(angle);\n      // Split line\n      if (splitLineModel.get('show')) {\n        var distance = splitLineDistance ? splitLineDistance + axisLineWidth : axisLineWidth;\n        var splitLine = new graphic.Line({\n          shape: {\n            x1: unitX * (r - distance) + cx,\n            y1: unitY * (r - distance) + cy,\n            x2: unitX * (r - splitLineLen - distance) + cx,\n            y2: unitY * (r - splitLineLen - distance) + cy\n          },\n          style: splitLineStyle,\n          silent: true\n        });\n        if (splitLineStyle.stroke === 'auto') {\n          splitLine.setStyle({\n            stroke: getColor(i / splitNumber)\n          });\n        }\n        group.add(splitLine);\n      }\n      // Label\n      if (labelModel.get('show')) {\n        var distance = labelModel.get('distance') + splitLineDistance;\n        var label = formatLabel(round(i / splitNumber * (maxVal - minVal) + minVal), labelModel.get('formatter'));\n        var autoColor = getColor(i / splitNumber);\n        var textStyleX = unitX * (r - splitLineLen - distance) + cx;\n        var textStyleY = unitY * (r - splitLineLen - distance) + cy;\n        var rotateType = labelModel.get('rotate');\n        var rotate = 0;\n        if (rotateType === 'radial') {\n          rotate = -angle + 2 * Math.PI;\n          if (rotate > Math.PI / 2) {\n            rotate += Math.PI;\n          }\n        } else if (rotateType === 'tangential') {\n          rotate = -angle - Math.PI / 2;\n        } else if (isNumber(rotateType)) {\n          rotate = rotateType * Math.PI / 180;\n        }\n        if (rotate === 0) {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: unitY < -0.8 ? 'top' : unitY > 0.8 ? 'bottom' : 'middle',\n              align: unitX < -0.4 ? 'left' : unitX > 0.4 ? 'right' : 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true\n          }));\n        } else {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: 'middle',\n              align: 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true,\n            originX: textStyleX,\n            originY: textStyleY,\n            rotation: rotate\n          }));\n        }\n      }\n      // Axis tick\n      if (tickModel.get('show') && i !== splitNumber) {\n        var distance = tickModel.get('distance');\n        distance = distance ? distance + axisLineWidth : axisLineWidth;\n        for (var j = 0; j <= subSplitNumber; j++) {\n          unitX = Math.cos(angle);\n          unitY = Math.sin(angle);\n          var tickLine = new graphic.Line({\n            shape: {\n              x1: unitX * (r - distance) + cx,\n              y1: unitY * (r - distance) + cy,\n              x2: unitX * (r - tickLen - distance) + cx,\n              y2: unitY * (r - tickLen - distance) + cy\n            },\n            silent: true,\n            style: tickLineStyle\n          });\n          if (tickLineStyle.stroke === 'auto') {\n            tickLine.setStyle({\n              stroke: getColor((i + j / subSplitNumber) / splitNumber)\n            });\n          }\n          group.add(tickLine);\n          angle += subStep;\n        }\n        angle -= subStep;\n      } else {\n        angle += step;\n      }\n    }\n  };\n  GaugeView.prototype._renderPointer = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var oldData = this._data;\n    var oldProgressData = this._progressEls;\n    var progressList = [];\n    var showPointer = seriesModel.get(['pointer', 'show']);\n    var progressModel = seriesModel.getModel('progress');\n    var showProgress = progressModel.get('show');\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var valueExtent = [minVal, maxVal];\n    var angleExtent = [startAngle, endAngle];\n    function createPointer(idx, angle) {\n      var itemModel = data.getItemModel(idx);\n      var pointerModel = itemModel.getModel('pointer');\n      var pointerWidth = parsePercent(pointerModel.get('width'), posInfo.r);\n      var pointerLength = parsePercent(pointerModel.get('length'), posInfo.r);\n      var pointerStr = seriesModel.get(['pointer', 'icon']);\n      var pointerOffset = pointerModel.get('offsetCenter');\n      var pointerOffsetX = parsePercent(pointerOffset[0], posInfo.r);\n      var pointerOffsetY = parsePercent(pointerOffset[1], posInfo.r);\n      var pointerKeepAspect = pointerModel.get('keepAspect');\n      var pointer;\n      // not exist icon type will be set 'rect'\n      if (pointerStr) {\n        pointer = createSymbol(pointerStr, pointerOffsetX - pointerWidth / 2, pointerOffsetY - pointerLength, pointerWidth, pointerLength, null, pointerKeepAspect);\n      } else {\n        pointer = new PointerPath({\n          shape: {\n            angle: -Math.PI / 2,\n            width: pointerWidth,\n            r: pointerLength,\n            x: pointerOffsetX,\n            y: pointerOffsetY\n          }\n        });\n      }\n      pointer.rotation = -(angle + Math.PI / 2);\n      pointer.x = posInfo.cx;\n      pointer.y = posInfo.cy;\n      return pointer;\n    }\n    function createProgress(idx, endAngle) {\n      var roundCap = progressModel.get('roundCap');\n      var ProgressPath = roundCap ? Sausage : graphic.Sector;\n      var isOverlap = progressModel.get('overlap');\n      var progressWidth = isOverlap ? progressModel.get('width') : axisLineWidth / data.count();\n      var r0 = isOverlap ? posInfo.r - progressWidth : posInfo.r - (idx + 1) * progressWidth;\n      var r = isOverlap ? posInfo.r : posInfo.r - idx * progressWidth;\n      var progress = new ProgressPath({\n        shape: {\n          startAngle: startAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: r0,\n          r: r\n        }\n      });\n      isOverlap && (progress.z2 = linearMap(data.get(valueDim, idx), [minVal, maxVal], [100, 0], true));\n      return progress;\n    }\n    if (showProgress || showPointer) {\n      data.diff(oldData).add(function (idx) {\n        var val = data.get(valueDim, idx);\n        if (showPointer) {\n          var pointer = createPointer(idx, startAngle);\n          // TODO hide pointer on NaN value?\n          graphic.initProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(idx, pointer);\n        }\n        if (showProgress) {\n          var progress = createProgress(idx, startAngle);\n          var isClip = progressModel.get('clip');\n          graphic.initProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress);\n          // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n          setCommonECData(seriesModel.seriesIndex, data.dataType, idx, progress);\n          progressList[idx] = progress;\n        }\n      }).update(function (newIdx, oldIdx) {\n        var val = data.get(valueDim, newIdx);\n        if (showPointer) {\n          var previousPointer = oldData.getItemGraphicEl(oldIdx);\n          var previousRotate = previousPointer ? previousPointer.rotation : startAngle;\n          var pointer = createPointer(newIdx, previousRotate);\n          pointer.rotation = previousRotate;\n          graphic.updateProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(newIdx, pointer);\n        }\n        if (showProgress) {\n          var previousProgress = oldProgressData[oldIdx];\n          var previousEndAngle = previousProgress ? previousProgress.shape.endAngle : startAngle;\n          var progress = createProgress(newIdx, previousEndAngle);\n          var isClip = progressModel.get('clip');\n          graphic.updateProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress);\n          // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n          setCommonECData(seriesModel.seriesIndex, data.dataType, newIdx, progress);\n          progressList[newIdx] = progress;\n        }\n      }).execute();\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel = itemModel.getModel('emphasis');\n        var focus = emphasisModel.get('focus');\n        var blurScope = emphasisModel.get('blurScope');\n        var emphasisDisabled = emphasisModel.get('disabled');\n        if (showPointer) {\n          var pointer = data.getItemGraphicEl(idx);\n          var symbolStyle = data.getItemVisual(idx, 'style');\n          var visualColor = symbolStyle.fill;\n          if (pointer instanceof ZRImage) {\n            var pathStyle = pointer.style;\n            pointer.useStyle(extend({\n              image: pathStyle.image,\n              x: pathStyle.x,\n              y: pathStyle.y,\n              width: pathStyle.width,\n              height: pathStyle.height\n            }, symbolStyle));\n          } else {\n            pointer.useStyle(symbolStyle);\n            pointer.type !== 'pointer' && pointer.setColor(visualColor);\n          }\n          pointer.setStyle(itemModel.getModel(['pointer', 'itemStyle']).getItemStyle());\n          if (pointer.style.fill === 'auto') {\n            pointer.setStyle('fill', getColor(linearMap(data.get(valueDim, idx), valueExtent, [0, 1], true)));\n          }\n          pointer.z2EmphasisLift = 0;\n          setStatesStylesFromModel(pointer, itemModel);\n          toggleHoverEmphasis(pointer, focus, blurScope, emphasisDisabled);\n        }\n        if (showProgress) {\n          var progress = progressList[idx];\n          progress.useStyle(data.getItemVisual(idx, 'style'));\n          progress.setStyle(itemModel.getModel(['progress', 'itemStyle']).getItemStyle());\n          progress.z2EmphasisLift = 0;\n          setStatesStylesFromModel(progress, itemModel);\n          toggleHoverEmphasis(progress, focus, blurScope, emphasisDisabled);\n        }\n      });\n      this._progressEls = progressList;\n    }\n  };\n  GaugeView.prototype._renderAnchor = function (seriesModel, posInfo) {\n    var anchorModel = seriesModel.getModel('anchor');\n    var showAnchor = anchorModel.get('show');\n    if (showAnchor) {\n      var anchorSize = anchorModel.get('size');\n      var anchorType = anchorModel.get('icon');\n      var offsetCenter = anchorModel.get('offsetCenter');\n      var anchorKeepAspect = anchorModel.get('keepAspect');\n      var anchor = createSymbol(anchorType, posInfo.cx - anchorSize / 2 + parsePercent(offsetCenter[0], posInfo.r), posInfo.cy - anchorSize / 2 + parsePercent(offsetCenter[1], posInfo.r), anchorSize, anchorSize, null, anchorKeepAspect);\n      anchor.z2 = anchorModel.get('showAbove') ? 1 : 0;\n      anchor.setStyle(anchorModel.getModel('itemStyle').getItemStyle());\n      this.group.add(anchor);\n    }\n  };\n  GaugeView.prototype._renderTitleAndDetail = function (seriesModel, ecModel, api, getColor, posInfo) {\n    var _this = this;\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var contentGroup = new graphic.Group();\n    var newTitleEls = [];\n    var newDetailEls = [];\n    var hasAnimation = seriesModel.isAnimationEnabled();\n    var showPointerAbove = seriesModel.get(['pointer', 'showAbove']);\n    data.diff(this._data).add(function (idx) {\n      newTitleEls[idx] = new graphic.Text({\n        silent: true\n      });\n      newDetailEls[idx] = new graphic.Text({\n        silent: true\n      });\n    }).update(function (idx, oldIdx) {\n      newTitleEls[idx] = _this._titleEls[oldIdx];\n      newDetailEls[idx] = _this._detailEls[oldIdx];\n    }).execute();\n    data.each(function (idx) {\n      var itemModel = data.getItemModel(idx);\n      var value = data.get(valueDim, idx);\n      var itemGroup = new graphic.Group();\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      var itemTitleModel = itemModel.getModel('title');\n      if (itemTitleModel.get('show')) {\n        var titleOffsetCenter = itemTitleModel.get('offsetCenter');\n        var titleX = posInfo.cx + parsePercent(titleOffsetCenter[0], posInfo.r);\n        var titleY = posInfo.cy + parsePercent(titleOffsetCenter[1], posInfo.r);\n        var labelEl = newTitleEls[idx];\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemTitleModel, {\n            x: titleX,\n            y: titleY,\n            text: data.getName(idx),\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: autoColor\n          })\n        });\n        itemGroup.add(labelEl);\n      }\n      var itemDetailModel = itemModel.getModel('detail');\n      if (itemDetailModel.get('show')) {\n        var detailOffsetCenter = itemDetailModel.get('offsetCenter');\n        var detailX = posInfo.cx + parsePercent(detailOffsetCenter[0], posInfo.r);\n        var detailY = posInfo.cy + parsePercent(detailOffsetCenter[1], posInfo.r);\n        var width = parsePercent(itemDetailModel.get('width'), posInfo.r);\n        var height = parsePercent(itemDetailModel.get('height'), posInfo.r);\n        var detailColor = seriesModel.get(['progress', 'show']) ? data.getItemVisual(idx, 'style').fill : autoColor;\n        var labelEl = newDetailEls[idx];\n        var formatter_1 = itemDetailModel.get('formatter');\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemDetailModel, {\n            x: detailX,\n            y: detailY,\n            text: formatLabel(value, formatter_1),\n            width: isNaN(width) ? null : width,\n            height: isNaN(height) ? null : height,\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: detailColor\n          })\n        });\n        setLabelValueAnimation(labelEl, {\n          normal: itemDetailModel\n        }, value, function (value) {\n          return formatLabel(value, formatter_1);\n        });\n        hasAnimation && animateLabelValue(labelEl, idx, data, seriesModel, {\n          getFormattedLabel: function (labelDataIndex, status, dataType, labelDimIndex, fmt, extendParams) {\n            return formatLabel(extendParams ? extendParams.interpolatedValue : value, formatter_1);\n          }\n        });\n        itemGroup.add(labelEl);\n      }\n      contentGroup.add(itemGroup);\n    });\n    this.group.add(contentGroup);\n    this._titleEls = newTitleEls;\n    this._detailEls = newDetailEls;\n  };\n  GaugeView.type = 'gauge';\n  return GaugeView;\n}(ChartView);\nexport default GaugeView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport SeriesModel from '../../model/Series.js';\nvar GaugeSeriesModel = /** @class */function (_super) {\n  __extends(GaugeSeriesModel, _super);\n  function GaugeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GaugeSeriesModel.type;\n    _this.visualStyleAccessPath = 'itemStyle';\n    return _this;\n  }\n  GaugeSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, ['value']);\n  };\n  GaugeSeriesModel.type = 'series.gauge';\n  GaugeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    // 默认全局居中\n    center: ['50%', '50%'],\n    legendHoverLink: true,\n    radius: '75%',\n    startAngle: 225,\n    endAngle: -45,\n    clockwise: true,\n    // 最小值\n    min: 0,\n    // 最大值\n    max: 100,\n    // 分割段数，默认为10\n    splitNumber: 10,\n    // 坐标轴线\n    axisLine: {\n      // 默认显示，属性show控制显示与否\n      show: true,\n      roundCap: false,\n      lineStyle: {\n        color: [[1, '#E6EBF8']],\n        width: 10\n      }\n    },\n    // 坐标轴线\n    progress: {\n      // 默认显示，属性show控制显示与否\n      show: false,\n      overlap: true,\n      width: 10,\n      roundCap: false,\n      clip: true\n    },\n    // 分隔线\n    splitLine: {\n      // 默认显示，属性show控制显示与否\n      show: true,\n      // 属性length控制线长\n      length: 10,\n      distance: 10,\n      // 属性lineStyle（详见lineStyle）控制线条样式\n      lineStyle: {\n        color: '#63677A',\n        width: 3,\n        type: 'solid'\n      }\n    },\n    // 坐标轴小标记\n    axisTick: {\n      // 属性show控制显示与否，默认不显示\n      show: true,\n      // 每份split细分多少段\n      splitNumber: 5,\n      // 属性length控制线长\n      length: 6,\n      distance: 10,\n      // 属性lineStyle控制线条样式\n      lineStyle: {\n        color: '#63677A',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    axisLabel: {\n      show: true,\n      distance: 15,\n      // formatter: null,\n      color: '#464646',\n      fontSize: 12,\n      rotate: 0\n    },\n    pointer: {\n      icon: null,\n      offsetCenter: [0, 0],\n      show: true,\n      showAbove: true,\n      length: '60%',\n      width: 6,\n      keepAspect: false\n    },\n    anchor: {\n      show: false,\n      showAbove: false,\n      size: 6,\n      icon: 'circle',\n      offsetCenter: [0, 0],\n      keepAspect: false,\n      itemStyle: {\n        color: '#fff',\n        borderWidth: 0,\n        borderColor: '#5470c6'\n      }\n    },\n    title: {\n      show: true,\n      // x, y，单位px\n      offsetCenter: [0, '20%'],\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#464646',\n      fontSize: 16,\n      valueAnimation: false\n    },\n    detail: {\n      show: true,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 0,\n      borderColor: '#ccc',\n      width: 100,\n      height: null,\n      padding: [5, 10],\n      // x, y，单位px\n      offsetCenter: [0, '40%'],\n      // formatter: null,\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#464646',\n      fontSize: 30,\n      fontWeight: 'bold',\n      lineHeight: 30,\n      valueAnimation: false\n    }\n  };\n  return GaugeSeriesModel;\n}(SeriesModel);\nexport default GaugeSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport GaugeView from './GaugeView.js';\nimport GaugeSeriesModel from './GaugeSeries.js';\nexport function install(registers) {\n  registers.registerChartView(GaugeView);\n  registers.registerSeriesModel(GaugeSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar opacityAccessPath = ['itemStyle', 'opacity'];\n/**\r\n * Piece of pie including Sector, Label, LabelLine\r\n */\nvar FunnelPiece = /** @class */function (_super) {\n  __extends(FunnelPiece, _super);\n  function FunnelPiece(data, idx) {\n    var _this = _super.call(this) || this;\n    var polygon = _this;\n    var labelLine = new graphic.Polyline();\n    var text = new graphic.Text();\n    polygon.setTextContent(text);\n    _this.setTextGuideLine(labelLine);\n    _this.updateData(data, idx, true);\n    return _this;\n  }\n  FunnelPiece.prototype.updateData = function (data, idx, firstCreate) {\n    var polygon = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var opacity = itemModel.get(opacityAccessPath);\n    opacity = opacity == null ? 1 : opacity;\n    if (!firstCreate) {\n      saveOldStyle(polygon);\n    }\n    // Update common style\n    polygon.useStyle(data.getItemVisual(idx, 'style'));\n    polygon.style.lineJoin = 'round';\n    if (firstCreate) {\n      polygon.setShape({\n        points: layout.points\n      });\n      polygon.style.opacity = 0;\n      graphic.initProps(polygon, {\n        style: {\n          opacity: opacity\n        }\n      }, seriesModel, idx);\n    } else {\n      graphic.updateProps(polygon, {\n        style: {\n          opacity: opacity\n        },\n        shape: {\n          points: layout.points\n        }\n      }, seriesModel, idx);\n    }\n    setStatesStylesFromModel(polygon, itemModel);\n    this._updateLabel(data, idx);\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  FunnelPiece.prototype._updateLabel = function (data, idx) {\n    var polygon = this;\n    var labelLine = this.getTextGuideLine();\n    var labelText = polygon.getTextContent();\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var labelLayout = layout.label;\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style.fill;\n    setLabelStyle(\n    // position will not be used in setLabelStyle\n    labelText, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      defaultOpacity: style.opacity,\n      defaultText: data.getName(idx)\n    }, {\n      normal: {\n        align: labelLayout.textAlign,\n        verticalAlign: labelLayout.verticalAlign\n      }\n    });\n    polygon.setTextConfig({\n      local: true,\n      inside: !!labelLayout.inside,\n      insideStroke: visualColor,\n      // insideFill: 'auto',\n      outsideFill: visualColor\n    });\n    var linePoints = labelLayout.linePoints;\n    labelLine.setShape({\n      points: linePoints\n    });\n    polygon.textGuideLineConfig = {\n      anchor: linePoints ? new graphic.Point(linePoints[0][0], linePoints[0][1]) : null\n    };\n    // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n    graphic.updateProps(labelText, {\n      style: {\n        x: labelLayout.x,\n        y: labelLayout.y\n      }\n    }, seriesModel, idx);\n    labelText.attr({\n      rotation: labelLayout.rotation,\n      originX: labelLayout.x,\n      originY: labelLayout.y,\n      z2: 10\n    });\n    setLabelLineStyle(polygon, getLabelLineStatesModels(itemModel), {\n      // Default use item visual color\n      stroke: visualColor\n    });\n  };\n  return FunnelPiece;\n}(graphic.Polygon);\nvar FunnelView = /** @class */function (_super) {\n  __extends(FunnelView, _super);\n  function FunnelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = FunnelView.type;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n  FunnelView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    data.diff(oldData).add(function (idx) {\n      var funnelPiece = new FunnelPiece(data, idx);\n      data.setItemGraphicEl(idx, funnelPiece);\n      group.add(funnelPiece);\n    }).update(function (newIdx, oldIdx) {\n      var piece = oldData.getItemGraphicEl(oldIdx);\n      piece.updateData(data, newIdx);\n      group.add(piece);\n      data.setItemGraphicEl(newIdx, piece);\n    }).remove(function (idx) {\n      var piece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piece, seriesModel, idx);\n    }).execute();\n    this._data = data;\n  };\n  FunnelView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n  FunnelView.prototype.dispose = function () {};\n  FunnelView.type = 'funnel';\n  return FunnelView;\n}(ChartView);\nexport default FunnelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nvar FunnelSeriesModel = /** @class */function (_super) {\n  __extends(FunnelSeriesModel, _super);\n  function FunnelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = FunnelSeriesModel.type;\n    return _this;\n  }\n  FunnelSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n    // Extend labelLine emphasis\n    this._defaultLabelLine(option);\n  };\n  FunnelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  FunnelSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine;\n    // Not show label line if `label.normal.show = false`\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n  // Overwrite\n  FunnelSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n    var valueDim = data.mapDimension('value');\n    var sum = data.getSum(valueDim);\n    // Percent is 0 if sum is 0\n    params.percent = !sum ? 0 : +(data.get(valueDim, dataIndex) / sum * 100).toFixed(2);\n    params.$vars.push('percent');\n    return params;\n  };\n  FunnelSeriesModel.type = 'series.funnel';\n  FunnelSeriesModel.defaultOption = {\n    // zlevel: 0,                  // 一级层叠\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    // 默认取数据最小最大值\n    // min: 0,\n    // max: 100,\n    minSize: '0%',\n    maxSize: '100%',\n    sort: 'descending',\n    orient: 'vertical',\n    gap: 0,\n    funnelAlign: 'center',\n    label: {\n      show: true,\n      position: 'outer'\n      // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n    },\n    labelLine: {\n      show: true,\n      length: 20,\n      lineStyle: {\n        // color: 各异,\n        width: 1\n      }\n    },\n    itemStyle: {\n      // color: 各异,\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return FunnelSeriesModel;\n}(SeriesModel);\nexport default FunnelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as layout from '../../util/layout.js';\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  }\n  // Add custom sortable function & none sortable opetion by \"options.sort\"\n  if (isFunction(sort)) {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n  return indices;\n}\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\nexport default function funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n    if (max == null) {\n      max = dataExtent[1];\n    }\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n    var getLinePoints = function (idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n      indices = indices.reverse();\n    }\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = parsePercent(width, viewWidth);\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = parsePercent(height, viewHeight);\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n    labelLayout(data);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport FunnelView from './FunnelView.js';\nimport FunnelSeriesModel from './FunnelSeries.js';\nimport funnelLayout from './funnelLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(FunnelView);\n  registers.registerSeriesModel(FunnelSeriesModel);\n  registers.registerLayout(funnelLayout);\n  registers.registerProcessor(dataFilter('funnel'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { numericToNumber } from '../../util/number.js';\nimport { eqNaN } from 'zrender/lib/core/util.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar DEFAULT_SMOOTH = 0.3;\nvar ParallelView = /** @class */function (_super) {\n  __extends(ParallelView, _super);\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelView.type;\n    _this._dataGroup = new graphic.Group();\n    _this._initialized = false;\n    return _this;\n  }\n  ParallelView.prototype.init = function () {\n    this.group.add(this._dataGroup);\n  };\n  /**\r\n   * @override\r\n   */\n  ParallelView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var dataGroup = this._dataGroup;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    data.diff(oldData).add(add).update(update).remove(remove).execute();\n    function add(newDataIndex) {\n      var line = addEl(data, dataGroup, newDataIndex, dimensions, coordSys);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n    function update(newDataIndex, oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      var points = createLinePoints(data, newDataIndex, dimensions, coordSys);\n      data.setItemGraphicEl(newDataIndex, line);\n      graphic.updateProps(line, {\n        shape: {\n          points: points\n        }\n      }, seriesModel, newDataIndex);\n      saveOldStyle(line);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n    function remove(oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      dataGroup.remove(line);\n    }\n    // First create\n    if (!this._initialized) {\n      this._initialized = true;\n      var clipPath = createGridClipShape(coordSys, seriesModel, function () {\n        // Callback will be invoked immediately if there is no animation\n        setTimeout(function () {\n          dataGroup.removeClipPath();\n        });\n      });\n      dataGroup.setClipPath(clipPath);\n    }\n    this._data = data;\n  };\n  ParallelView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._initialized = true;\n    this._data = null;\n    this._dataGroup.removeAll();\n  };\n  ParallelView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    var progressiveEls = this._progressiveEls = [];\n    for (var dataIndex = taskParams.start; dataIndex < taskParams.end; dataIndex++) {\n      var line = addEl(data, this._dataGroup, dataIndex, dimensions, coordSys);\n      line.incremental = true;\n      updateElCommon(line, data, dataIndex, seriesScope);\n      progressiveEls.push(line);\n    }\n  };\n  ParallelView.prototype.remove = function () {\n    this._dataGroup && this._dataGroup.removeAll();\n    this._data = null;\n  };\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ChartView);\nfunction createGridClipShape(coordSys, seriesModel, cb) {\n  var parallelModel = coordSys.model;\n  var rect = coordSys.getRect();\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    }\n  });\n  var dim = parallelModel.get('layout') === 'horizontal' ? 'width' : 'height';\n  rectEl.setShape(dim, 0);\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width,\n      height: rect.height\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nfunction createLinePoints(data, dataIndex, dimensions, coordSys) {\n  var points = [];\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimName = dimensions[i];\n    var value = data.get(data.mapDimension(dimName), dataIndex);\n    if (!isEmptyValue(value, coordSys.getAxis(dimName).type)) {\n      points.push(coordSys.dataToPoint(value, dimName));\n    }\n  }\n  return points;\n}\nfunction addEl(data, dataGroup, dataIndex, dimensions, coordSys) {\n  var points = createLinePoints(data, dataIndex, dimensions, coordSys);\n  var line = new graphic.Polyline({\n    shape: {\n      points: points\n    },\n    // silent: true,\n    z2: 10\n  });\n  dataGroup.add(line);\n  data.setItemGraphicEl(dataIndex, line);\n  return line;\n}\nfunction makeSeriesScope(seriesModel) {\n  var smooth = seriesModel.get('smooth', true);\n  smooth === true && (smooth = DEFAULT_SMOOTH);\n  smooth = numericToNumber(smooth);\n  eqNaN(smooth) && (smooth = 0);\n  return {\n    smooth: smooth\n  };\n}\nfunction updateElCommon(el, data, dataIndex, seriesScope) {\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.fill = null;\n  el.setShape('smooth', seriesScope.smooth);\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel, 'lineStyle');\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n}\n// function simpleDiff(oldData, newData, dimensions) {\n//     let oldLen;\n//     if (!oldData\n//         || !oldData.__plProgressive\n//         || (oldLen = oldData.count()) !== newData.count()\n//     ) {\n//         return true;\n//     }\n//     let dimLen = dimensions.length;\n//     for (let i = 0; i < oldLen; i++) {\n//         for (let j = 0; j < dimLen; j++) {\n//             if (oldData.get(dimensions[j], i) !== newData.get(dimensions[j], i)) {\n//                 return true;\n//             }\n//         }\n//     }\n//     return false;\n// }\n// FIXME put in common util?\nfunction isEmptyValue(val, axisType) {\n  return axisType === 'category' ? val == null : val == null || isNaN(val); // axisType === 'value'\n}\nexport default ParallelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { each, bind } from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nvar ParallelSeriesModel = /** @class */function (_super) {\n  __extends(ParallelSeriesModel, _super);\n  function ParallelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n  ParallelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: bind(makeDefaultEncode, null, this)\n    });\n  };\n  /**\r\n   * User can get data raw indices on 'axisAreaSelected' event received.\r\n   *\r\n   * @return Raw indices\r\n   */\n  ParallelSeriesModel.prototype.getRawIndicesByActiveState = function (activeState) {\n    var coordSys = this.coordinateSystem;\n    var data = this.getData();\n    var indices = [];\n    coordSys.eachActiveState(data, function (theActiveState, dataIndex) {\n      if (activeState === theActiveState) {\n        indices.push(data.getRawIndex(dataIndex));\n      }\n    });\n    return indices;\n  };\n  ParallelSeriesModel.type = 'series.parallel';\n  ParallelSeriesModel.dependencies = ['parallel'];\n  ParallelSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'parallel',\n    parallelIndex: 0,\n    label: {\n      show: false\n    },\n    inactiveOpacity: 0.05,\n    activeOpacity: 1,\n    lineStyle: {\n      width: 1,\n      opacity: 0.45,\n      type: 'solid'\n    },\n    emphasis: {\n      label: {\n        show: false\n      }\n    },\n    progressive: 500,\n    smooth: false,\n    animationEasing: 'linear'\n  };\n  return ParallelSeriesModel;\n}(SeriesModel);\nfunction makeDefaultEncode(seriesModel) {\n  // The mapping of parallelAxis dimension to data dimension can\n  // be specified in parallelAxis.option.dim. For example, if\n  // parallelAxis.option.dim is 'dim3', it mapping to the third\n  // dimension of data. But `data.encode` has higher priority.\n  // Moreover, parallelModel.dimension should not be regarded as data\n  // dimensions. Consider dimensions = ['dim4', 'dim2', 'dim6'];\n  var parallelModel = seriesModel.ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n  if (!parallelModel) {\n    return;\n  }\n  var encodeDefine = {};\n  each(parallelModel.dimensions, function (axisDim) {\n    var dataDimIndex = convertDimNameToNumber(axisDim);\n    encodeDefine[axisDim] = dataDimIndex;\n  });\n  return encodeDefine;\n}\nfunction convertDimNameToNumber(dimName) {\n  return +dimName.replace('dim', '');\n}\nexport default ParallelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar opacityAccessPath = ['lineStyle', 'opacity'];\nvar parallelVisual = {\n  seriesType: 'parallel',\n  reset: function (seriesModel, ecModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var opacityMap = {\n      normal: seriesModel.get(['lineStyle', 'opacity']),\n      active: seriesModel.get('activeOpacity'),\n      inactive: seriesModel.get('inactiveOpacity')\n    };\n    return {\n      progress: function (params, data) {\n        coordSys.eachActiveState(data, function (activeState, dataIndex) {\n          var opacity = opacityMap[activeState];\n          if (activeState === 'normal' && data.hasItemOption) {\n            var itemOpacity = data.getItemModel(dataIndex).get(opacityAccessPath, true);\n            itemOpacity != null && (opacity = itemOpacity);\n          }\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          existsStyle.opacity = opacity;\n        }, params.start, params.end);\n      }\n    };\n  }\n};\nexport default parallelVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport ParallelView from './ParallelView.js';\nimport ParallelSeriesModel from './ParallelSeries.js';\nimport parallelVisual from './parallelVisual.js';\nimport { install as installParallelComponent } from '../../component/parallel/install.js';\nexport function install(registers) {\n  use(installParallelComponent);\n  registers.registerChartView(ParallelView);\n  registers.registerSeriesModel(ParallelSeriesModel);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, parallelVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isString, retrieve3 } from 'zrender/lib/core/util.js';\nvar SankeyPathShape = /** @class */function () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n  return SankeyPathShape;\n}();\nvar SankeyPath = /** @class */function (_super) {\n  __extends(SankeyPath, _super);\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n    ctx.closePath();\n  };\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  return SankeyPath;\n}(graphic.Path);\nvar SankeyView = /** @class */function (_super) {\n  __extends(SankeyView, _super);\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SankeyView.type;\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo;\n    // view width\n    var width = layoutInfo.width;\n    // view height\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.x = layoutInfo.x;\n    group.y = layoutInfo.y;\n    // generate a bezire Curve for each edge\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle());\n      // Special color, use source node color or target node color\n      applyCurveStyle(curve.style, orient, edge);\n      var defaultEdgeLabelText = \"\" + edgeModel.get('value');\n      var edgeLabelStateModels = getLabelStatesModels(edgeModel, 'edgeLabel');\n      setLabelStyle(curve, edgeLabelStateModels, {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName, dataType, labelDimIndex, formatter, extendParams) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'edge', labelDimIndex,\n            // ensure edgeLabel formatter is provided\n            // to prevent the inheritance from `label.formatter` of the series\n            retrieve3(formatter, edgeLabelStateModels.normal && edgeLabelStateModels.normal.get('formatter'), defaultEdgeLabelText), extendParams);\n          }\n        },\n        labelDataIndex: edge.dataIndex,\n        defaultText: defaultEdgeLabelText\n      });\n      curve.setTextConfig({\n        position: 'inside'\n      });\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        var style = model.getItemStyle();\n        applyCurveStyle(style, orient, edge);\n        return style;\n      });\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus === 'trajectory' ? edge.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    // Generate a rect for each node\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var borderRadius = itemModel.get(['itemStyle', 'borderRadius']) || 0;\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy,\n          r: borderRadius\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'node');\n          }\n        },\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus === 'trajectory' ? node.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n    this._data = seriesModel.getData();\n  };\n  SankeyView.prototype.dispose = function () {};\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView);\n/**\r\n * Special color, use source node color or target node color\r\n * @param curveProps curve's style to parse\r\n * @param orient direction\r\n * @param edge current curve data\r\n */\nfunction applyCurveStyle(curveProps, orient, edge) {\n  switch (curveProps.fill) {\n    case 'source':\n      curveProps.fill = edge.node1.getVisual('color');\n      curveProps.decal = edge.node1.getVisual('style').decal;\n      break;\n    case 'target':\n      curveProps.fill = edge.node2.getVisual('color');\n      curveProps.decal = edge.node2.getVisual('style').decal;\n      break;\n    case 'gradient':\n      var sourceColor = edge.node1.getVisual('color');\n      var targetColor = edge.node2.getVisual('color');\n      if (isString(sourceColor) && isString(targetColor)) {\n        curveProps.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n          color: sourceColor,\n          offset: 0\n        }, {\n          color: targetColor,\n          offset: 1\n        }]);\n      }\n  }\n}\n// Add animation to the view\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nexport default SankeyView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar SankeySeriesModel = /** @class */function (_super) {\n  __extends(SankeySeriesModel, _super);\n  function SankeySeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SankeySeriesModel.type;\n    return _this;\n  }\n  /**\r\n   * Init a graph data structure from data in option series\r\n   */\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var links = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var levels = option.levels || [];\n    this.levelModels = [];\n    var levelModels = this.levelModels;\n    for (var i = 0; i < levels.length; i++) {\n      if (levels[i].depth != null && levels[i].depth >= 0) {\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('levels[i].depth is mandatory and should be natural number');\n        }\n      }\n    }\n    var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\n    return graph.data;\n    function beforeLink(nodeData, edgeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var layout = seriesModel.getData().getItemLayout(idx);\n        if (layout) {\n          var nodeDepth = layout.depth;\n          var levelModel = seriesModel.levelModels[nodeDepth];\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n        return model;\n      });\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\n        var layout = edge.node1.getLayout();\n        if (layout) {\n          var depth = layout.depth;\n          var levelModel = seriesModel.levelModels[depth];\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n        return model;\n      });\n    }\n  };\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\n    var nodes = this.option.data || this.option.nodes;\n    var dataItem = nodes[dataIndex];\n    dataItem.localX = localPosition[0];\n    dataItem.localY = localPosition[1];\n  };\n  /**\r\n   * Return the graphic data structure\r\n   *\r\n   * @return graphic data structure\r\n   */\n  SankeySeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  /**\r\n   * Get edge data of graphic data structure\r\n   *\r\n   * @return data structure of list\r\n   */\n  SankeySeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    function noValue(val) {\n      return isNaN(val) || val == null;\n    }\n    // dataType === 'node' or empty do not show tooltip by default\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var edgeValue = params.value;\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n      return createTooltipMarkup('nameValue', {\n        name: edgeName,\n        value: edgeValue,\n        noValue: noValue(edgeValue)\n      });\n    }\n    // dataType === 'node'\n    else {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var value = node.getLayout().value;\n      var name_1 = this.getDataParams(dataIndex, dataType).data.name;\n      return createTooltipMarkup('nameValue', {\n        name: name_1 != null ? name_1 + '' : null,\n        value: value,\n        noValue: noValue(value)\n      });\n    }\n  };\n  SankeySeriesModel.prototype.optionUpdated = function () {};\n  // Override Series.getDataParams()\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n    if (params.value == null && dataType === 'node') {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var nodeValue = node.getLayout().value;\n      params.value = nodeValue;\n    }\n    return params;\n  };\n  SankeySeriesModel.type = 'series.sankey';\n  SankeySeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    orient: 'horizontal',\n    nodeWidth: 20,\n    nodeGap: 8,\n    draggable: true,\n    layoutIterations: 32,\n    label: {\n      show: true,\n      position: 'right',\n      fontSize: 12\n    },\n    edgeLabel: {\n      show: false,\n      fontSize: 12\n    },\n    levels: [],\n    nodeAlign: 'justify',\n    lineStyle: {\n      color: '#314656',\n      opacity: 0.2,\n      curveness: 0.5\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        opacity: 0.5\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  };\n  return SankeySeriesModel;\n}(SeriesModel);\nexport default SankeySeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData } from '../../util/model.js';\nexport default function sankeyLayout(ecModel, api) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var nodeWidth = seriesModel.get('nodeWidth');\n    var nodeGap = seriesModel.get('nodeGap');\n    var layoutInfo = getViewRect(seriesModel, api);\n    seriesModel.layoutInfo = layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    computeNodeValues(nodes);\n    var filteredNodes = zrUtil.filter(nodes, function (node) {\n      return node.getLayout().value === 0;\n    });\n    var iterations = filteredNodes.length !== 0 ? 0 : seriesModel.get('layoutIterations');\n    var orient = seriesModel.get('orient');\n    var nodeAlign = seriesModel.get('nodeAlign');\n    layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign);\n  });\n}\n/**\r\n * Get the layout position of the whole view\r\n */\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nfunction layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign) {\n  computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign);\n  computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient);\n  computeEdgeDepths(nodes, orient);\n}\n/**\r\n * Compute the value of each node by summing the associated edge's value\r\n */\nfunction computeNodeValues(nodes) {\n  zrUtil.each(nodes, function (node) {\n    var value1 = sum(node.outEdges, getEdgeValue);\n    var value2 = sum(node.inEdges, getEdgeValue);\n    var nodeRawValue = node.getValue() || 0;\n    var value = Math.max(value1, value2, nodeRawValue);\n    node.setLayout({\n      value: value\n    }, true);\n  });\n}\n/**\r\n * Compute the x-position for each node.\r\n *\r\n * Here we use Kahn algorithm to detect cycle when we traverse\r\n * the node to computer the initial x position.\r\n */\nfunction computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign) {\n  // Used to mark whether the edge is deleted. if it is deleted,\n  // the value is 0, otherwise it is 1.\n  var remainEdges = [];\n  // Storage each node's indegree.\n  var indegreeArr = [];\n  // Used to storage the node with indegree is equal to 0.\n  var zeroIndegrees = [];\n  var nextTargetNode = [];\n  var x = 0;\n  // let kx = 0;\n  for (var i = 0; i < edges.length; i++) {\n    remainEdges[i] = 1;\n  }\n  for (var i = 0; i < nodes.length; i++) {\n    indegreeArr[i] = nodes[i].inEdges.length;\n    if (indegreeArr[i] === 0) {\n      zeroIndegrees.push(nodes[i]);\n    }\n  }\n  var maxNodeDepth = -1;\n  // Traversing nodes using topological sorting to calculate the\n  // horizontal(if orient === 'horizontal') or vertical(if orient === 'vertical')\n  // position of the nodes.\n  while (zeroIndegrees.length) {\n    for (var idx = 0; idx < zeroIndegrees.length; idx++) {\n      var node = zeroIndegrees[idx];\n      var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n      var isItemDepth = item.depth != null && item.depth >= 0;\n      if (isItemDepth && item.depth > maxNodeDepth) {\n        maxNodeDepth = item.depth;\n      }\n      node.setLayout({\n        depth: isItemDepth ? item.depth : x\n      }, true);\n      orient === 'vertical' ? node.setLayout({\n        dy: nodeWidth\n      }, true) : node.setLayout({\n        dx: nodeWidth\n      }, true);\n      for (var edgeIdx = 0; edgeIdx < node.outEdges.length; edgeIdx++) {\n        var edge = node.outEdges[edgeIdx];\n        var indexEdge = edges.indexOf(edge);\n        remainEdges[indexEdge] = 0;\n        var targetNode = edge.node2;\n        var nodeIndex = nodes.indexOf(targetNode);\n        if (--indegreeArr[nodeIndex] === 0 && nextTargetNode.indexOf(targetNode) < 0) {\n          nextTargetNode.push(targetNode);\n        }\n      }\n    }\n    ++x;\n    zeroIndegrees = nextTargetNode;\n    nextTargetNode = [];\n  }\n  for (var i = 0; i < remainEdges.length; i++) {\n    if (remainEdges[i] === 1) {\n      throw new Error('Sankey is a DAG, the original data has cycle!');\n    }\n  }\n  var maxDepth = maxNodeDepth > x - 1 ? maxNodeDepth : x - 1;\n  if (nodeAlign && nodeAlign !== 'left') {\n    adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth);\n  }\n  var kx = orient === 'vertical' ? (height - nodeWidth) / maxDepth : (width - nodeWidth) / maxDepth;\n  scaleNodeBreadths(nodes, kx, orient);\n}\nfunction isNodeDepth(node) {\n  var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n  return item.depth != null && item.depth >= 0;\n}\nfunction adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth) {\n  if (nodeAlign === 'right') {\n    var nextSourceNode = [];\n    var remainNodes = nodes;\n    var nodeHeight = 0;\n    while (remainNodes.length) {\n      for (var i = 0; i < remainNodes.length; i++) {\n        var node = remainNodes[i];\n        node.setLayout({\n          skNodeHeight: nodeHeight\n        }, true);\n        for (var j = 0; j < node.inEdges.length; j++) {\n          var edge = node.inEdges[j];\n          if (nextSourceNode.indexOf(edge.node1) < 0) {\n            nextSourceNode.push(edge.node1);\n          }\n        }\n      }\n      remainNodes = nextSourceNode;\n      nextSourceNode = [];\n      ++nodeHeight;\n    }\n    zrUtil.each(nodes, function (node) {\n      if (!isNodeDepth(node)) {\n        node.setLayout({\n          depth: Math.max(0, maxDepth - node.getLayout().skNodeHeight)\n        }, true);\n      }\n    });\n  } else if (nodeAlign === 'justify') {\n    moveSinksRight(nodes, maxDepth);\n  }\n}\n/**\r\n * All the node without outEgdes are assigned maximum x-position and\r\n *     be aligned in the last column.\r\n *\r\n * @param nodes.  node of sankey view.\r\n * @param maxDepth.  use to assign to node without outEdges as x-position.\r\n */\nfunction moveSinksRight(nodes, maxDepth) {\n  zrUtil.each(nodes, function (node) {\n    if (!isNodeDepth(node) && !node.outEdges.length) {\n      node.setLayout({\n        depth: maxDepth\n      }, true);\n    }\n  });\n}\n/**\r\n * Scale node x-position to the width\r\n *\r\n * @param nodes  node of sankey view\r\n * @param kx   multiple used to scale nodes\r\n */\nfunction scaleNodeBreadths(nodes, kx, orient) {\n  zrUtil.each(nodes, function (node) {\n    var nodeDepth = node.getLayout().depth * kx;\n    orient === 'vertical' ? node.setLayout({\n      y: nodeDepth\n    }, true) : node.setLayout({\n      x: nodeDepth\n    }, true);\n  });\n}\n/**\r\n * Using Gauss-Seidel iterations method to compute the node depth(y-position)\r\n *\r\n * @param nodes  node of sankey view\r\n * @param edges  edge of sankey view\r\n * @param height  the whole height of the area to draw the view\r\n * @param nodeGap  the vertical distance between two nodes\r\n *     in the same column.\r\n * @param iterations  the number of iterations for the algorithm\r\n */\nfunction computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient) {\n  var nodesByBreadth = prepareNodesByBreadth(nodes, orient);\n  initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient);\n  resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n  for (var alpha = 1; iterations > 0; iterations--) {\n    // 0.99 is a experience parameter, ensure that each iterations of\n    // changes as small as possible.\n    alpha *= 0.99;\n    relaxRightToLeft(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n    relaxLeftToRight(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n  }\n}\nfunction prepareNodesByBreadth(nodes, orient) {\n  var nodesByBreadth = [];\n  var keyAttr = orient === 'vertical' ? 'y' : 'x';\n  var groupResult = groupData(nodes, function (node) {\n    return node.getLayout()[keyAttr];\n  });\n  groupResult.keys.sort(function (a, b) {\n    return a - b;\n  });\n  zrUtil.each(groupResult.keys, function (key) {\n    nodesByBreadth.push(groupResult.buckets.get(key));\n  });\n  return nodesByBreadth;\n}\n/**\r\n * Compute the original y-position for each node\r\n */\nfunction initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient) {\n  var minKy = Infinity;\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    var n = nodes.length;\n    var sum = 0;\n    zrUtil.each(nodes, function (node) {\n      sum += node.getLayout().value;\n    });\n    var ky = orient === 'vertical' ? (width - (n - 1) * nodeGap) / sum : (height - (n - 1) * nodeGap) / sum;\n    if (ky < minKy) {\n      minKy = ky;\n    }\n  });\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node, i) {\n      var nodeDy = node.getLayout().value * minKy;\n      if (orient === 'vertical') {\n        node.setLayout({\n          x: i\n        }, true);\n        node.setLayout({\n          dx: nodeDy\n        }, true);\n      } else {\n        node.setLayout({\n          y: i\n        }, true);\n        node.setLayout({\n          dy: nodeDy\n        }, true);\n      }\n    });\n  });\n  zrUtil.each(edges, function (edge) {\n    var edgeDy = +edge.getValue() * minKy;\n    edge.setLayout({\n      dy: edgeDy\n    }, true);\n  });\n}\n/**\r\n * Resolve the collision of initialized depth (y-position)\r\n */\nfunction resolveCollisions(nodesByBreadth, nodeGap, height, width, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    nodes.sort(function (a, b) {\n      return a.getLayout()[keyAttr] - b.getLayout()[keyAttr];\n    });\n    var nodeX;\n    var node;\n    var dy;\n    var y0 = 0;\n    var n = nodes.length;\n    var nodeDyAttr = orient === 'vertical' ? 'dx' : 'dy';\n    for (var i = 0; i < n; i++) {\n      node = nodes[i];\n      dy = y0 - node.getLayout()[keyAttr];\n      if (dy > 0) {\n        nodeX = node.getLayout()[keyAttr] + dy;\n        orient === 'vertical' ? node.setLayout({\n          x: nodeX\n        }, true) : node.setLayout({\n          y: nodeX\n        }, true);\n      }\n      y0 = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap;\n    }\n    var viewWidth = orient === 'vertical' ? width : height;\n    // If the bottommost node goes outside the bounds, push it back up\n    dy = y0 - nodeGap - viewWidth;\n    if (dy > 0) {\n      nodeX = node.getLayout()[keyAttr] - dy;\n      orient === 'vertical' ? node.setLayout({\n        x: nodeX\n      }, true) : node.setLayout({\n        y: nodeX\n      }, true);\n      y0 = nodeX;\n      for (var i = n - 2; i >= 0; --i) {\n        node = nodes[i];\n        dy = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap - y0;\n        if (dy > 0) {\n          nodeX = node.getLayout()[keyAttr] - dy;\n          orient === 'vertical' ? node.setLayout({\n            x: nodeX\n          }, true) : node.setLayout({\n            y: nodeX\n          }, true);\n        }\n        y0 = node.getLayout()[keyAttr];\n      }\n    }\n  });\n}\n/**\r\n * Change the y-position of the nodes, except most the right side nodes\r\n * @param nodesByBreadth\r\n * @param alpha  parameter used to adjust the nodes y-position\r\n */\nfunction relaxRightToLeft(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth.slice().reverse(), function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.outEdges.length) {\n        var y = sum(node.outEdges, weightedTarget, orient) / sum(node.outEdges, getEdgeValue);\n        if (isNaN(y)) {\n          var len = node.outEdges.length;\n          y = len ? sum(node.outEdges, centerTarget, orient) / len : 0;\n        }\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\nfunction weightedTarget(edge, orient) {\n  return center(edge.node2, orient) * edge.getValue();\n}\nfunction centerTarget(edge, orient) {\n  return center(edge.node2, orient);\n}\nfunction weightedSource(edge, orient) {\n  return center(edge.node1, orient) * edge.getValue();\n}\nfunction centerSource(edge, orient) {\n  return center(edge.node1, orient);\n}\nfunction center(node, orient) {\n  return orient === 'vertical' ? node.getLayout().x + node.getLayout().dx / 2 : node.getLayout().y + node.getLayout().dy / 2;\n}\nfunction getEdgeValue(edge) {\n  return edge.getValue();\n}\nfunction sum(array, cb, orient) {\n  var sum = 0;\n  var len = array.length;\n  var i = -1;\n  while (++i < len) {\n    var value = +cb(array[i], orient);\n    if (!isNaN(value)) {\n      sum += value;\n    }\n  }\n  return sum;\n}\n/**\r\n * Change the y-position of the nodes, except most the left side nodes\r\n */\nfunction relaxLeftToRight(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.inEdges.length) {\n        var y = sum(node.inEdges, weightedSource, orient) / sum(node.inEdges, getEdgeValue);\n        if (isNaN(y)) {\n          var len = node.inEdges.length;\n          y = len ? sum(node.inEdges, centerSource, orient) / len : 0;\n        }\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n/**\r\n * Compute the depth(y-position) of each edge\r\n */\nfunction computeEdgeDepths(nodes, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodes, function (node) {\n    node.outEdges.sort(function (a, b) {\n      return a.node2.getLayout()[keyAttr] - b.node2.getLayout()[keyAttr];\n    });\n    node.inEdges.sort(function (a, b) {\n      return a.node1.getLayout()[keyAttr] - b.node1.getLayout()[keyAttr];\n    });\n  });\n  zrUtil.each(nodes, function (node) {\n    var sy = 0;\n    var ty = 0;\n    zrUtil.each(node.outEdges, function (edge) {\n      edge.setLayout({\n        sy: sy\n      }, true);\n      sy += edge.getLayout().dy;\n    });\n    zrUtil.each(node.inEdges, function (edge) {\n      edge.setLayout({\n        ty: ty\n      }, true);\n      ty += edge.getLayout().dy;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nexport default function sankeyVisual(ecModel) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    if (nodes.length) {\n      var minValue_1 = Infinity;\n      var maxValue_1 = -Infinity;\n      zrUtil.each(nodes, function (node) {\n        var nodeValue = node.getLayout().value;\n        if (nodeValue < minValue_1) {\n          minValue_1 = nodeValue;\n        }\n        if (nodeValue > maxValue_1) {\n          maxValue_1 = nodeValue;\n        }\n      });\n      zrUtil.each(nodes, function (node) {\n        var mapping = new VisualMapping({\n          type: 'color',\n          mappingMethod: 'linear',\n          dataExtent: [minValue_1, maxValue_1],\n          visual: seriesModel.get('color')\n        });\n        var mapValueToColor = mapping.mapValueToVisual(node.getLayout().value);\n        var customColor = node.getModel().get(['itemStyle', 'color']);\n        if (customColor != null) {\n          node.setVisual('color', customColor);\n          node.setVisual('style', {\n            fill: customColor\n          });\n        } else {\n          node.setVisual('color', mapValueToColor);\n          node.setVisual('style', {\n            fill: mapValueToColor\n          });\n        }\n      });\n    }\n    if (edges.length) {\n      zrUtil.each(edges, function (edge) {\n        var edgeStyle = edge.getModel().get('lineStyle');\n        edge.setVisual('style', edgeStyle);\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport SankeyView from './SankeyView.js';\nimport SankeySeriesModel from './SankeySeries.js';\nimport sankeyLayout from './sankeyLayout.js';\nimport sankeyVisual from './sankeyVisual.js';\nexport function install(registers) {\n  registers.registerChartView(SankeyView);\n  registers.registerSeriesModel(SankeySeriesModel);\n  registers.registerLayout(sankeyLayout);\n  registers.registerVisual(sankeyVisual);\n  registers.registerAction({\n    type: 'dragNode',\n    event: 'dragnode',\n    // here can only use 'update' now, other value is not support in echarts.\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sankey',\n      query: payload\n    }, function (seriesModel) {\n      seriesModel.setNodePosition(payload.dataIndex, [payload.localX, payload.localY]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nvar WhiskerBoxCommonMixin = /** @class */function () {\n  function WhiskerBoxCommonMixin() {}\n  /**\r\n   * @private\r\n   */\n  WhiskerBoxCommonMixin.prototype._hasEncodeRule = function (key) {\n    var encodeRules = this.getEncode();\n    return encodeRules && encodeRules.get(key) != null;\n  };\n  /**\r\n   * @override\r\n   */\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal;\n    // FIXME\n    // Consider time axis.\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = !this._hasEncodeRule('x');\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = !this._hasEncodeRule('y');\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data;\n    // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice();\n          // Modify current using data.\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice();\n          // Modify current using data.\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\r\n   * If horizontal, base axis is x, otherwise y.\r\n   * @override\r\n   */\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n  return WhiskerBoxCommonMixin;\n}();\n;\nexport { WhiskerBoxCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nvar BoxplotSeriesModel = /** @class */function (_super) {\n  __extends(BoxplotSeriesModel, _super);\n  function BoxplotSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BoxplotSeriesModel.type;\n    // TODO\n    // box width represents group size, so dimension should have 'size'.\n    /**\r\n     * @see <https://en.wikipedia.org/wiki/Box_plot>\r\n     * The meanings of 'min' and 'max' depend on user,\r\n     * and echarts do not need to know it.\r\n     * @readOnly\r\n     */\n    _this.defaultValueDimensions = [{\n      name: 'min',\n      defaultTooltip: true\n    }, {\n      name: 'Q1',\n      defaultTooltip: true\n    }, {\n      name: 'median',\n      defaultTooltip: true\n    }, {\n      name: 'Q3',\n      defaultTooltip: true\n    }, {\n      name: 'max',\n      defaultTooltip: true\n    }];\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n  BoxplotSeriesModel.type = 'series.boxplot';\n  BoxplotSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  BoxplotSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    layout: null,\n    boxWidth: [7, 50],\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2,\n        shadowBlur: 5,\n        shadowOffsetX: 1,\n        shadowOffsetY: 1,\n        shadowColor: 'rgba(0,0,0,0.2)'\n      }\n    },\n    animationDuration: 800\n  };\n  return BoxplotSeriesModel;\n}(SeriesModel);\nmixin(BoxplotSeriesModel, WhiskerBoxCommonMixin, true);\nexport default BoxplotSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar BoxplotView = /** @class */function (_super) {\n  __extends(BoxplotView, _super);\n  function BoxplotView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BoxplotView.type;\n    return _this;\n  }\n  BoxplotView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var group = this.group;\n    var oldData = this._data;\n    // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!this._data) {\n      group.removeAll();\n    }\n    var constDim = seriesModel.get('layout') === 'horizontal' ? 1 : 0;\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        var symbolEl = createNormalBox(itemLayout, data, newIdx, constDim, true);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      // Empty data\n      if (!data.hasValue(newIdx)) {\n        group.remove(symbolEl);\n        return;\n      }\n      var itemLayout = data.getItemLayout(newIdx);\n      if (!symbolEl) {\n        symbolEl = createNormalBox(itemLayout, data, newIdx, constDim);\n      } else {\n        saveOldStyle(symbolEl);\n        updateNormalBoxData(itemLayout, symbolEl, data, newIdx);\n      }\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n  BoxplotView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var data = this._data;\n    this._data = null;\n    data && data.eachItemGraphicEl(function (el) {\n      el && group.remove(el);\n    });\n  };\n  BoxplotView.type = 'boxplot';\n  return BoxplotView;\n}(ChartView);\nvar BoxPathShape = /** @class */function () {\n  function BoxPathShape() {}\n  return BoxPathShape;\n}();\nvar BoxPath = /** @class */function (_super) {\n  __extends(BoxPath, _super);\n  function BoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'boxplotBoxPath';\n    return _this;\n  }\n  BoxPath.prototype.getDefaultShape = function () {\n    return new BoxPathShape();\n  };\n  BoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    var i = 0;\n    ctx.moveTo(ends[i][0], ends[i][1]);\n    i++;\n    for (; i < 4; i++) {\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n    ctx.closePath();\n    for (; i < ends.length; i++) {\n      ctx.moveTo(ends[i][0], ends[i][1]);\n      i++;\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n  };\n  return BoxPath;\n}(Path);\nfunction createNormalBox(itemLayout, data, dataIndex, constDim, isInit) {\n  var ends = itemLayout.ends;\n  var el = new BoxPath({\n    shape: {\n      points: isInit ? transInit(ends, constDim, itemLayout) : ends\n    }\n  });\n  updateNormalBoxData(itemLayout, el, data, dataIndex, isInit);\n  return el;\n}\nfunction updateNormalBoxData(itemLayout, el, data, dataIndex, isInit) {\n  var seriesModel = data.hostModel;\n  var updateMethod = graphic[isInit ? 'initProps' : 'updateProps'];\n  updateMethod(el, {\n    shape: {\n      points: itemLayout.ends\n    }\n  }, seriesModel, dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.z2 = 100;\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n}\nfunction transInit(points, dim, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[dim] = itemLayout.initBaseline;\n    return point;\n  });\n}\nexport default BoxplotView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../../util/number.js';\nvar each = zrUtil.each;\nexport default function boxplotLayout(ecModel) {\n  var groupResult = groupSeriesByAxis(ecModel);\n  each(groupResult, function (groupItem) {\n    var seriesModels = groupItem.seriesModels;\n    if (!seriesModels.length) {\n      return;\n    }\n    calculateBase(groupItem);\n    each(seriesModels, function (seriesModel, idx) {\n      layoutSingleSeries(seriesModel, groupItem.boxOffsetList[idx], groupItem.boxWidthList[idx]);\n    });\n  });\n}\n/**\r\n * Group series by axis.\r\n */\nfunction groupSeriesByAxis(ecModel) {\n  var result = [];\n  var axisList = [];\n  ecModel.eachSeriesByType('boxplot', function (seriesModel) {\n    var baseAxis = seriesModel.getBaseAxis();\n    var idx = zrUtil.indexOf(axisList, baseAxis);\n    if (idx < 0) {\n      idx = axisList.length;\n      axisList[idx] = baseAxis;\n      result[idx] = {\n        axis: baseAxis,\n        seriesModels: []\n      };\n    }\n    result[idx].seriesModels.push(seriesModel);\n  });\n  return result;\n}\n/**\r\n * Calculate offset and box width for each series.\r\n */\nfunction calculateBase(groupItem) {\n  var baseAxis = groupItem.axis;\n  var seriesModels = groupItem.seriesModels;\n  var seriesCount = seriesModels.length;\n  var boxWidthList = groupItem.boxWidthList = [];\n  var boxOffsetList = groupItem.boxOffsetList = [];\n  var boundList = [];\n  var bandWidth;\n  if (baseAxis.type === 'category') {\n    bandWidth = baseAxis.getBandWidth();\n  } else {\n    var maxDataCount_1 = 0;\n    each(seriesModels, function (seriesModel) {\n      maxDataCount_1 = Math.max(maxDataCount_1, seriesModel.getData().count());\n    });\n    var extent = baseAxis.getExtent();\n    bandWidth = Math.abs(extent[1] - extent[0]) / maxDataCount_1;\n  }\n  each(seriesModels, function (seriesModel) {\n    var boxWidthBound = seriesModel.get('boxWidth');\n    if (!zrUtil.isArray(boxWidthBound)) {\n      boxWidthBound = [boxWidthBound, boxWidthBound];\n    }\n    boundList.push([parsePercent(boxWidthBound[0], bandWidth) || 0, parsePercent(boxWidthBound[1], bandWidth) || 0]);\n  });\n  var availableWidth = bandWidth * 0.8 - 2;\n  var boxGap = availableWidth / seriesCount * 0.3;\n  var boxWidth = (availableWidth - boxGap * (seriesCount - 1)) / seriesCount;\n  var base = boxWidth / 2 - availableWidth / 2;\n  each(seriesModels, function (seriesModel, idx) {\n    boxOffsetList.push(base);\n    base += boxGap + boxWidth;\n    boxWidthList.push(Math.min(Math.max(boxWidth, boundList[idx][0]), boundList[idx][1]));\n  });\n}\n/**\r\n * Calculate points location for each series.\r\n */\nfunction layoutSingleSeries(seriesModel, offset, boxWidth) {\n  var coordSys = seriesModel.coordinateSystem;\n  var data = seriesModel.getData();\n  var halfWidth = boxWidth / 2;\n  var cDimIdx = seriesModel.get('layout') === 'horizontal' ? 0 : 1;\n  var vDimIdx = 1 - cDimIdx;\n  var coordDims = ['x', 'y'];\n  var cDim = data.mapDimension(coordDims[cDimIdx]);\n  var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\n  if (cDim == null || vDims.length < 5) {\n    return;\n  }\n  for (var dataIndex = 0; dataIndex < data.count(); dataIndex++) {\n    var axisDimVal = data.get(cDim, dataIndex);\n    var median = getPoint(axisDimVal, vDims[2], dataIndex);\n    var end1 = getPoint(axisDimVal, vDims[0], dataIndex);\n    var end2 = getPoint(axisDimVal, vDims[1], dataIndex);\n    var end4 = getPoint(axisDimVal, vDims[3], dataIndex);\n    var end5 = getPoint(axisDimVal, vDims[4], dataIndex);\n    var ends = [];\n    addBodyEnd(ends, end2, false);\n    addBodyEnd(ends, end4, true);\n    ends.push(end1, end2, end5, end4);\n    layEndLine(ends, end1);\n    layEndLine(ends, end5);\n    layEndLine(ends, median);\n    data.setItemLayout(dataIndex, {\n      initBaseline: median[vDimIdx],\n      ends: ends\n    });\n  }\n  function getPoint(axisDimVal, dim, dataIndex) {\n    var val = data.get(dim, dataIndex);\n    var p = [];\n    p[cDimIdx] = axisDimVal;\n    p[vDimIdx] = val;\n    var point;\n    if (isNaN(axisDimVal) || isNaN(val)) {\n      point = [NaN, NaN];\n    } else {\n      point = coordSys.dataToPoint(p);\n      point[cDimIdx] += offset;\n    }\n    return point;\n  }\n  function addBodyEnd(ends, point, start) {\n    var point1 = point.slice();\n    var point2 = point.slice();\n    point1[cDimIdx] += halfWidth;\n    point2[cDimIdx] -= halfWidth;\n    start ? ends.push(point1, point2) : ends.push(point2, point1);\n  }\n  function layEndLine(ends, endCenter) {\n    var from = endCenter.slice();\n    var to = endCenter.slice();\n    from[cDimIdx] -= halfWidth;\n    to[cDimIdx] += halfWidth;\n    ends.push(from, to);\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport prepareBoxplotData from './prepareBoxplotData.js';\nimport { throwError, makePrintable } from '../../util/log.js';\nimport { SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nexport var boxplotTransform = {\n  type: 'echarts:boxplot',\n  transform: function transform(params) {\n    var upstream = params.upstream;\n    if (upstream.sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('source data is not applicable for this boxplot transform. Expect number[][].');\n      }\n      throwError(errMsg);\n    }\n    var result = prepareBoxplotData(upstream.getRawData(), params.config);\n    return [{\n      dimensions: ['ItemName', 'Low', 'Q1', 'Q2', 'Q3', 'High'],\n      data: result.boxData\n    }, {\n      data: result.outliers\n    }];\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { quantile, asc } from '../../util/number.js';\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\n/**\r\n * See:\r\n *  <https://en.wikipedia.org/wiki/Box_plot#cite_note-frigge_hoaglin_iglewicz-2>\r\n *  <http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/boxplot.stats.html>\r\n *\r\n * Helper method for preparing data.\r\n *\r\n * @param rawData like\r\n *        [\r\n *            [12,232,443], (raw data set for the first box)\r\n *            [3843,5545,1232], (raw data set for the second box)\r\n *            ...\r\n *        ]\r\n * @param opt.boundIQR=1.5 Data less than min bound is outlier.\r\n *      default 1.5, means Q1 - 1.5 * (Q3 - Q1).\r\n *      If 'none'/0 passed, min bound will not be used.\r\n */\nexport default function prepareBoxplotData(rawData, opt) {\n  opt = opt || {};\n  var boxData = [];\n  var outliers = [];\n  var boundIQR = opt.boundIQR;\n  var useExtreme = boundIQR === 'none' || boundIQR === 0;\n  for (var i = 0; i < rawData.length; i++) {\n    var ascList = asc(rawData[i].slice());\n    var Q1 = quantile(ascList, 0.25);\n    var Q2 = quantile(ascList, 0.5);\n    var Q3 = quantile(ascList, 0.75);\n    var min = ascList[0];\n    var max = ascList[ascList.length - 1];\n    var bound = (boundIQR == null ? 1.5 : boundIQR) * (Q3 - Q1);\n    var low = useExtreme ? min : Math.max(min, Q1 - bound);\n    var high = useExtreme ? max : Math.min(max, Q3 + bound);\n    var itemNameFormatter = opt.itemNameFormatter;\n    var itemName = isFunction(itemNameFormatter) ? itemNameFormatter({\n      value: i\n    }) : isString(itemNameFormatter) ? itemNameFormatter.replace('{value}', i + '') : i + '';\n    boxData.push([itemName, low, Q1, Q2, Q3, high]);\n    for (var j = 0; j < ascList.length; j++) {\n      var dataItem = ascList[j];\n      if (dataItem < low || dataItem > high) {\n        var outlier = [itemName, dataItem];\n        outliers.push(outlier);\n      }\n    }\n  }\n  return {\n    boxData: boxData,\n    outliers: outliers\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport BoxplotSeriesModel from './BoxplotSeries.js';\nimport BoxplotView from './BoxplotView.js';\nimport boxplotLayout from './boxplotLayout.js';\nimport { boxplotTransform } from './boxplotTransform.js';\nexport function install(registers) {\n  registers.registerSeriesModel(BoxplotSeriesModel);\n  registers.registerChartView(BoxplotView);\n  registers.registerLayout(boxplotLayout);\n  registers.registerTransform(boxplotTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { extend } from 'zrender/lib/core/util.js';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar dojiBorderColorQuery = ['itemStyle', 'borderColorDoji'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nexport function getColor(sign, model) {\n  return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n}\nexport function getBorderColor(sign, model) {\n  return model.get(sign === 0 ? dojiBorderColorQuery : sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n}\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getBorderColor, getColor } from './candlestickVisual.js';\nvar SKIP_PROPS = ['color', 'borderColor'];\nvar CandlestickView = /** @class */function (_super) {\n  __extends(CandlestickView, _super);\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath();\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    this._updateDrawMode(seriesModel);\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n    this._updateDrawMode(seriesModel);\n  };\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._progressiveEls = [];\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n  CandlestickView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n      this._clear();\n    }\n  };\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea();\n    // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!this._data) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      // Empty data\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n      var itemLayout = data.getItemLayout(newIdx);\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n      this._progressiveEls.push(el);\n    }\n  };\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\nvar NormalBoxPathShape = /** @class */function () {\n  function NormalBoxPathShape() {}\n  return NormalBoxPathShape;\n}();\nvar NormalBoxPath = /** @class */function (_super) {\n  __extends(NormalBoxPath, _super);\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n  return NormalBoxPath;\n}(Path);\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n  return clipped;\n}\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n  var sign = data.getItemLayout(dataIndex).sign;\n  zrUtil.each(el.states, function (state, stateName) {\n    var stateModel = itemModel.getModel(stateName);\n    var color = getColor(sign, stateModel);\n    var borderColor = getBorderColor(sign, stateModel) || color;\n    var stateStyle = state.style || (state.style = {});\n    color && (stateStyle.fill = color);\n    borderColor && (stateStyle.stroke = borderColor);\n  });\n  var emphasisModel = itemModel.getModel('emphasis');\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n}\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\nvar LargeBoxPathShape = /** @class */function () {\n  function LargeBoxPathShape() {}\n  return LargeBoxPathShape;\n}();\nvar LargeBoxPath = /** @class */function (_super) {\n  __extends(LargeBoxPath, _super);\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n  return LargeBoxPath;\n}(Path);\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elN);\n  var elDoji = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 0,\n    ignoreCoarsePointer: true\n  });\n  group.add(elDoji);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n  setLargeStyle(0, elDoji, seriesModel, data);\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n  if (progressiveEls) {\n    progressiveEls.push(elP, elN);\n  }\n}\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = getBorderColor(sign, seriesModel)\n  // Use color for border color by default.\n  || getColor(sign, seriesModel);\n  // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nvar CandlestickSeriesModel = /** @class */function (_super) {\n  __extends(CandlestickSeriesModel, _super);\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\r\n   * Get dimension for shadow in dataZoom\r\n   * @return dimension name\r\n   */\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      borderColorDoji: null,\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  }\n  // Translate 'k' to 'candlestick'.\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { subPixelOptimize } from '../../util/graphic.js';\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { parsePercent } from '../../util/number.js';\nimport { map, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        var itemModel = data.getItemModel(dataIndex);\n        var hasDojiColor = !!itemModel.get(['itemStyle', 'borderColorDoji']);\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = createFloat32Array(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n      var hasDojiColor = !!seriesModel.get(['itemStyle', 'borderColorDoji']);\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n/**\r\n * Get the sign of a single data.\r\n *\r\n * @returns 0 for doji with hasDojiColor: true,\r\n *          1 for positive,\r\n *          -1 for negative.\r\n */\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor) {\n  var sign;\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = hasDojiColor\n    // When doji color is set, use it instead of color/color0.\n    ? 0 : dataIndex > 0\n    // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1\n    // No record of previous, set to be positive\n    : 1;\n  }\n  return sign;\n}\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth)\n  // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport CandlestickView from './CandlestickView.js';\nimport CandlestickSeriesModel from './CandlestickSeries.js';\nimport preprocessor from './preprocessor.js';\nimport candlestickVisual from './candlestickVisual.js';\nimport candlestickLayout from './candlestickLayout.js';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport SymbolClz from './Symbol.js';\nfunction updateRipplePath(rippleGroup, effectCfg) {\n  var color = effectCfg.rippleEffectColor || effectCfg.color;\n  rippleGroup.eachChild(function (ripplePath) {\n    ripplePath.attr({\n      z: effectCfg.z,\n      zlevel: effectCfg.zlevel,\n      style: {\n        stroke: effectCfg.brushType === 'stroke' ? color : null,\n        fill: effectCfg.brushType === 'fill' ? color : null\n      }\n    });\n  });\n}\nvar EffectSymbol = /** @class */function (_super) {\n  __extends(EffectSymbol, _super);\n  function EffectSymbol(data, idx) {\n    var _this = _super.call(this) || this;\n    var symbol = new SymbolClz(data, idx);\n    var rippleGroup = new Group();\n    _this.add(symbol);\n    _this.add(rippleGroup);\n    _this.updateData(data, idx);\n    return _this;\n  }\n  EffectSymbol.prototype.stopEffectAnimation = function () {\n    this.childAt(1).removeAll();\n  };\n  EffectSymbol.prototype.startEffectAnimation = function (effectCfg) {\n    var symbolType = effectCfg.symbolType;\n    var color = effectCfg.color;\n    var rippleNumber = effectCfg.rippleNumber;\n    var rippleGroup = this.childAt(1);\n    for (var i = 0; i < rippleNumber; i++) {\n      // If width/height are set too small (e.g., set to 1) on ios10\n      // and macOS Sierra, a circle stroke become a rect, no matter what\n      // the scale is set. So we set width/height as 2. See #4136.\n      var ripplePath = createSymbol(symbolType, -1, -1, 2, 2, color);\n      ripplePath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 99,\n        silent: true,\n        scaleX: 0.5,\n        scaleY: 0.5\n      });\n      var delay = -i / rippleNumber * effectCfg.period + effectCfg.effectOffset;\n      ripplePath.animate('', true).when(effectCfg.period, {\n        scaleX: effectCfg.rippleScale / 2,\n        scaleY: effectCfg.rippleScale / 2\n      }).delay(delay).start();\n      ripplePath.animateStyle(true).when(effectCfg.period, {\n        opacity: 0\n      }).delay(delay).start();\n      rippleGroup.add(ripplePath);\n    }\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\r\n   * Update effect symbol\r\n   */\n  EffectSymbol.prototype.updateEffectAnimation = function (effectCfg) {\n    var oldEffectCfg = this._effectCfg;\n    var rippleGroup = this.childAt(1);\n    // Must reinitialize effect if following configuration changed\n    var DIFFICULT_PROPS = ['symbolType', 'period', 'rippleScale', 'rippleNumber'];\n    for (var i = 0; i < DIFFICULT_PROPS.length; i++) {\n      var propName = DIFFICULT_PROPS[i];\n      if (oldEffectCfg[propName] !== effectCfg[propName]) {\n        this.stopEffectAnimation();\n        this.startEffectAnimation(effectCfg);\n        return;\n      }\n    }\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\r\n   * Highlight symbol\r\n   */\n  EffectSymbol.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  /**\r\n   * Downplay symbol\r\n   */\n  EffectSymbol.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  EffectSymbol.prototype.getSymbolType = function () {\n    var symbol = this.childAt(0);\n    return symbol && symbol.getSymbolType();\n  };\n  /**\r\n   * Update symbol properties\r\n   */\n  EffectSymbol.prototype.updateData = function (data, idx) {\n    var _this = this;\n    var seriesModel = data.hostModel;\n    this.childAt(0).updateData(data, idx);\n    var rippleGroup = this.childAt(1);\n    var itemModel = data.getItemModel(idx);\n    var symbolType = data.getItemVisual(idx, 'symbol');\n    var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var color = symbolStyle && symbolStyle.fill;\n    var emphasisModel = itemModel.getModel('emphasis');\n    rippleGroup.setScale(symbolSize);\n    rippleGroup.traverse(function (ripplePath) {\n      ripplePath.setStyle('fill', color);\n    });\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n    if (symbolOffset) {\n      rippleGroup.x = symbolOffset[0];\n      rippleGroup.y = symbolOffset[1];\n    }\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    rippleGroup.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n    var effectCfg = {};\n    effectCfg.showEffectOn = seriesModel.get('showEffectOn');\n    effectCfg.rippleScale = itemModel.get(['rippleEffect', 'scale']);\n    effectCfg.brushType = itemModel.get(['rippleEffect', 'brushType']);\n    effectCfg.period = itemModel.get(['rippleEffect', 'period']) * 1000;\n    effectCfg.effectOffset = idx / data.count();\n    effectCfg.z = seriesModel.getShallow('z') || 0;\n    effectCfg.zlevel = seriesModel.getShallow('zlevel') || 0;\n    effectCfg.symbolType = symbolType;\n    effectCfg.color = color;\n    effectCfg.rippleEffectColor = itemModel.get(['rippleEffect', 'color']);\n    effectCfg.rippleNumber = itemModel.get(['rippleEffect', 'number']);\n    if (effectCfg.showEffectOn === 'render') {\n      this._effectCfg ? this.updateEffectAnimation(effectCfg) : this.startEffectAnimation(effectCfg);\n      this._effectCfg = effectCfg;\n    } else {\n      // Not keep old effect config\n      this._effectCfg = null;\n      this.stopEffectAnimation();\n      this.onHoverStateChange = function (toState) {\n        if (toState === 'emphasis') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.startEffectAnimation(effectCfg);\n          }\n        } else if (toState === 'normal') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.stopEffectAnimation();\n          }\n        }\n      };\n    }\n    this._effectCfg = effectCfg;\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  ;\n  EffectSymbol.prototype.fadeOut = function (cb) {\n    cb && cb();\n  };\n  ;\n  return EffectSymbol;\n}(Group);\nexport default EffectSymbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport EffectSymbol from '../helper/EffectSymbol.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\nvar EffectScatterView = /** @class */function (_super) {\n  __extends(EffectScatterView, _super);\n  function EffectScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = EffectScatterView.type;\n    return _this;\n  }\n  EffectScatterView.prototype.init = function () {\n    this._symbolDraw = new SymbolDraw(EffectSymbol);\n  };\n  EffectScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var effectSymbolDraw = this._symbolDraw;\n    effectSymbolDraw.updateData(data, {\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this.group.add(effectSymbolDraw.group);\n  };\n  EffectScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n  EffectScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    this.group.dirty();\n    var res = pointsLayout('').reset(seriesModel, ecModel, api);\n    if (res.progress) {\n      res.progress({\n        start: 0,\n        end: data.count(),\n        count: data.count()\n      }, data);\n    }\n    this._symbolDraw.updateLayout();\n  };\n  EffectScatterView.prototype._updateGroupTransform = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.getRoamTransform) {\n      this.group.transform = matrix.clone(coordSys.getRoamTransform());\n      this.group.decomposeTransform();\n    }\n  };\n  EffectScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n  };\n  EffectScatterView.type = 'effectScatter';\n  return EffectScatterView;\n}(ChartView);\nexport default EffectScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nvar EffectScatterSeriesModel = /** @class */function (_super) {\n  __extends(EffectScatterSeriesModel, _super);\n  function EffectScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = EffectScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  EffectScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  EffectScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n  EffectScatterSeriesModel.type = 'series.effectScatter';\n  EffectScatterSeriesModel.dependencies = ['grid', 'polar'];\n  EffectScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    effectType: 'ripple',\n    progressive: 0,\n    // When to show the effect, option: 'render'|'emphasis'\n    showEffectOn: 'render',\n    clip: true,\n    // Ripple effect config\n    rippleEffect: {\n      period: 4,\n      // Scale of ripple\n      scale: 2.5,\n      // Brush type can be fill or stroke\n      brushType: 'fill',\n      // Ripple number\n      number: 3\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // 图形类型\n    symbolSize: 10 // 图形大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2\n    // symbolRotate: null,  // 图形旋转控制\n    // itemStyle: {\n    //     opacity: 1\n    // }\n  };\n  return EffectScatterSeriesModel;\n}(SeriesModel);\nexport default EffectScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport EffectScatterView from './EffectScatterView.js';\nimport EffectScatterSeriesModel from './EffectScatterSeries.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  registers.registerChartView(EffectScatterView);\n  registers.registerSeriesModel(EffectScatterSeriesModel);\n  registers.registerLayout(layoutPoints('effectScatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Provide effect for line\r\n */\nimport * as graphic from '../../util/graphic.js';\nimport Line from './Line.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as curveUtil from 'zrender/lib/core/curve.js';\nvar EffectLine = /** @class */function (_super) {\n  __extends(EffectLine, _super);\n  function EffectLine(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this.add(_this.createLine(lineData, idx, seriesScope));\n    _this._updateEffectSymbol(lineData, idx);\n    return _this;\n  }\n  EffectLine.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Line(lineData, idx, seriesScope);\n  };\n  EffectLine.prototype._updateEffectSymbol = function (lineData, idx) {\n    var itemModel = lineData.getItemModel(idx);\n    var effectModel = itemModel.getModel('effect');\n    var size = effectModel.get('symbolSize');\n    var symbolType = effectModel.get('symbol');\n    if (!zrUtil.isArray(size)) {\n      size = [size, size];\n    }\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var color = effectModel.get('color') || lineStyle && lineStyle.stroke;\n    var symbol = this.childAt(1);\n    if (this._symbolType !== symbolType) {\n      // Remove previous\n      this.remove(symbol);\n      symbol = createSymbol(symbolType, -0.5, -0.5, 1, 1, color);\n      symbol.z2 = 100;\n      symbol.culling = true;\n      this.add(symbol);\n    }\n    // Symbol may be removed if loop is false\n    if (!symbol) {\n      return;\n    }\n    // Shadow color is same with color in default\n    symbol.setStyle('shadowColor', color);\n    symbol.setStyle(effectModel.getItemStyle(['color']));\n    symbol.scaleX = size[0];\n    symbol.scaleY = size[1];\n    symbol.setColor(color);\n    this._symbolType = symbolType;\n    this._symbolScale = size;\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n  EffectLine.prototype._updateEffectAnimation = function (lineData, effectModel, idx) {\n    var symbol = this.childAt(1);\n    if (!symbol) {\n      return;\n    }\n    var points = lineData.getItemLayout(idx);\n    var period = effectModel.get('period') * 1000;\n    var loop = effectModel.get('loop');\n    var roundTrip = effectModel.get('roundTrip');\n    var constantSpeed = effectModel.get('constantSpeed');\n    var delayExpr = zrUtil.retrieve(effectModel.get('delay'), function (idx) {\n      return idx / lineData.count() * period / 3;\n    });\n    // Ignore when updating\n    symbol.ignore = true;\n    this._updateAnimationPoints(symbol, points);\n    if (constantSpeed > 0) {\n      period = this._getLineLength(symbol) / constantSpeed * 1000;\n    }\n    if (period !== this._period || loop !== this._loop || roundTrip !== this._roundTrip) {\n      symbol.stopAnimation();\n      var delayNum = void 0;\n      if (zrUtil.isFunction(delayExpr)) {\n        delayNum = delayExpr(idx);\n      } else {\n        delayNum = delayExpr;\n      }\n      if (symbol.__t > 0) {\n        delayNum = -period * symbol.__t;\n      }\n      this._animateSymbol(symbol, period, delayNum, loop, roundTrip);\n    }\n    this._period = period;\n    this._loop = loop;\n    this._roundTrip = roundTrip;\n  };\n  EffectLine.prototype._animateSymbol = function (symbol, period, delayNum, loop, roundTrip) {\n    if (period > 0) {\n      symbol.__t = 0;\n      var self_1 = this;\n      var animator = symbol.animate('', loop).when(roundTrip ? period * 2 : period, {\n        __t: roundTrip ? 2 : 1\n      }).delay(delayNum).during(function () {\n        self_1._updateSymbolPosition(symbol);\n      });\n      if (!loop) {\n        animator.done(function () {\n          self_1.remove(symbol);\n        });\n      }\n      animator.start();\n    }\n  };\n  EffectLine.prototype._getLineLength = function (symbol) {\n    // Not so accurate\n    return vec2.dist(symbol.__p1, symbol.__cp1) + vec2.dist(symbol.__cp1, symbol.__p2);\n  };\n  EffectLine.prototype._updateAnimationPoints = function (symbol, points) {\n    symbol.__p1 = points[0];\n    symbol.__p2 = points[1];\n    symbol.__cp1 = points[2] || [(points[0][0] + points[1][0]) / 2, (points[0][1] + points[1][1]) / 2];\n  };\n  EffectLine.prototype.updateData = function (lineData, idx, seriesScope) {\n    this.childAt(0).updateData(lineData, idx, seriesScope);\n    this._updateEffectSymbol(lineData, idx);\n  };\n  EffectLine.prototype._updateSymbolPosition = function (symbol) {\n    var p1 = symbol.__p1;\n    var p2 = symbol.__p2;\n    var cp1 = symbol.__cp1;\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var pos = [symbol.x, symbol.y];\n    var lastPos = pos.slice();\n    var quadraticAt = curveUtil.quadraticAt;\n    var quadraticDerivativeAt = curveUtil.quadraticDerivativeAt;\n    pos[0] = quadraticAt(p1[0], cp1[0], p2[0], t);\n    pos[1] = quadraticAt(p1[1], cp1[1], p2[1], t);\n    // Tangent\n    var tx = symbol.__t < 1 ? quadraticDerivativeAt(p1[0], cp1[0], p2[0], t) : quadraticDerivativeAt(p2[0], cp1[0], p1[0], 1 - t);\n    var ty = symbol.__t < 1 ? quadraticDerivativeAt(p1[1], cp1[1], p2[1], t) : quadraticDerivativeAt(p2[1], cp1[1], p1[1], 1 - t);\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    // enable continuity trail for 'line', 'rect', 'roundRect' symbolType\n    if (this._symbolType === 'line' || this._symbolType === 'rect' || this._symbolType === 'roundRect') {\n      if (symbol.__lastT !== undefined && symbol.__lastT < symbol.__t) {\n        symbol.scaleY = vec2.dist(lastPos, pos) * 1.05;\n        // make sure the last segment render within endPoint\n        if (t === 1) {\n          pos[0] = lastPos[0] + (pos[0] - lastPos[0]) / 2;\n          pos[1] = lastPos[1] + (pos[1] - lastPos[1]) / 2;\n        }\n      } else if (symbol.__lastT === 1) {\n        // After first loop, symbol.__t does NOT start with 0, so connect p1 to pos directly.\n        symbol.scaleY = 2 * vec2.dist(p1, pos);\n      } else {\n        symbol.scaleY = this._symbolScale[1];\n      }\n    }\n    symbol.__lastT = symbol.__t;\n    symbol.ignore = false;\n    symbol.x = pos[0];\n    symbol.y = pos[1];\n  };\n  EffectLine.prototype.updateLayout = function (lineData, idx) {\n    this.childAt(0).updateLayout(lineData, idx);\n    var effectModel = lineData.getItemModel(idx).getModel('effect');\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n  return EffectLine;\n}(graphic.Group);\nexport default EffectLine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nvar Polyline = /** @class */function (_super) {\n  __extends(Polyline, _super);\n  function Polyline(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this._createPolyline(lineData, idx, seriesScope);\n    return _this;\n  }\n  Polyline.prototype._createPolyline = function (lineData, idx, seriesScope) {\n    // let seriesModel = lineData.hostModel;\n    var points = lineData.getItemLayout(idx);\n    var line = new graphic.Polyline({\n      shape: {\n        points: points\n      }\n    });\n    this.add(line);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Polyline.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childAt(0);\n    var target = {\n      shape: {\n        points: lineData.getItemLayout(idx)\n      }\n    };\n    graphic.updateProps(line, target, seriesModel, idx);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Polyline.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var line = this.childAt(0);\n    var itemModel = lineData.getItemModel(idx);\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    if (!seriesScope || lineData.hasItemOption) {\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n    }\n    line.useStyle(lineData.getItemVisual(idx, 'style'));\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    var lineEmphasisState = line.ensureState('emphasis');\n    lineEmphasisState.style = emphasisLineStyle;\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  ;\n  Polyline.prototype.updateLayout = function (lineData, idx) {\n    var polyline = this.childAt(0);\n    polyline.setShape('points', lineData.getItemLayout(idx));\n  };\n  ;\n  return Polyline;\n}(graphic.Group);\nexport default Polyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Polyline from './Polyline.js';\nimport EffectLine from './EffectLine.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar EffectPolyline = /** @class */function (_super) {\n  __extends(EffectPolyline, _super);\n  function EffectPolyline() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._lastFrame = 0;\n    _this._lastFramePercent = 0;\n    return _this;\n  }\n  // Override\n  EffectPolyline.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Polyline(lineData, idx, seriesScope);\n  };\n  ;\n  // Override\n  EffectPolyline.prototype._updateAnimationPoints = function (symbol, points) {\n    this._points = points;\n    var accLenArr = [0];\n    var len = 0;\n    for (var i = 1; i < points.length; i++) {\n      var p1 = points[i - 1];\n      var p2 = points[i];\n      len += vec2.dist(p1, p2);\n      accLenArr.push(len);\n    }\n    if (len === 0) {\n      this._length = 0;\n      return;\n    }\n    for (var i = 0; i < accLenArr.length; i++) {\n      accLenArr[i] /= len;\n    }\n    this._offsets = accLenArr;\n    this._length = len;\n  };\n  ;\n  // Override\n  EffectPolyline.prototype._getLineLength = function () {\n    return this._length;\n  };\n  ;\n  // Override\n  EffectPolyline.prototype._updateSymbolPosition = function (symbol) {\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var points = this._points;\n    var offsets = this._offsets;\n    var len = points.length;\n    if (!offsets) {\n      // Has length 0\n      return;\n    }\n    var lastFrame = this._lastFrame;\n    var frame;\n    if (t < this._lastFramePercent) {\n      // Start from the next frame\n      // PENDING start from lastFrame ?\n      var start = Math.min(lastFrame + 1, len - 1);\n      for (frame = start; frame >= 0; frame--) {\n        if (offsets[frame] <= t) {\n          break;\n        }\n      }\n      // PENDING really need to do this ?\n      frame = Math.min(frame, len - 2);\n    } else {\n      for (frame = lastFrame; frame < len; frame++) {\n        if (offsets[frame] > t) {\n          break;\n        }\n      }\n      frame = Math.min(frame - 1, len - 2);\n    }\n    var p = (t - offsets[frame]) / (offsets[frame + 1] - offsets[frame]);\n    var p0 = points[frame];\n    var p1 = points[frame + 1];\n    symbol.x = p0[0] * (1 - p) + p * p1[0];\n    symbol.y = p0[1] * (1 - p) + p * p1[1];\n    var tx = symbol.__t < 1 ? p1[0] - p0[0] : p0[0] - p1[0];\n    var ty = symbol.__t < 1 ? p1[1] - p0[1] : p0[1] - p1[1];\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    this._lastFrame = frame;\n    this._lastFramePercent = t;\n    symbol.ignore = false;\n  };\n  ;\n  return EffectPolyline;\n}(EffectLine);\nexport default EffectPolyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n// TODO Batch by color\nimport * as graphic from '../../util/graphic.js';\nimport * as lineContain from 'zrender/lib/contain/line.js';\nimport * as quadraticContain from 'zrender/lib/contain/quadratic.js';\nimport { getECData } from '../../util/innerStore.js';\nvar LargeLinesPathShape = /** @class */function () {\n  function LargeLinesPathShape() {\n    this.polyline = false;\n    this.curveness = 0;\n    this.segs = [];\n  }\n  return LargeLinesPathShape;\n}();\nvar LargeLinesPath = /** @class */function (_super) {\n  __extends(LargeLinesPath, _super);\n  function LargeLinesPath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n  LargeLinesPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n  LargeLinesPath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  LargeLinesPath.prototype.getDefaultShape = function () {\n    return new LargeLinesPathShape();\n  };\n  LargeLinesPath.prototype.buildPath = function (ctx, shape) {\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var i;\n    if (shape.polyline) {\n      for (i = this._off; i < segs.length;) {\n        var count = segs[i++];\n        if (count > 0) {\n          ctx.moveTo(segs[i++], segs[i++]);\n          for (var k = 1; k < count; k++) {\n            ctx.lineTo(segs[i++], segs[i++]);\n          }\n        }\n      }\n    } else {\n      for (i = this._off; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        ctx.moveTo(x0, y0);\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          ctx.quadraticCurveTo(x2, y2, x1, y1);\n        } else {\n          ctx.lineTo(x1, y1);\n        }\n      }\n    }\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n  LargeLinesPath.prototype.findDataIndex = function (x, y) {\n    var shape = this.shape;\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var lineWidth = this.style.lineWidth;\n    if (shape.polyline) {\n      var dataIndex = 0;\n      for (var i = 0; i < segs.length;) {\n        var count = segs[i++];\n        if (count > 0) {\n          var x0 = segs[i++];\n          var y0 = segs[i++];\n          for (var k = 1; k < count; k++) {\n            var x1 = segs[i++];\n            var y1 = segs[i++];\n            if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n              return dataIndex;\n            }\n          }\n        }\n        dataIndex++;\n      }\n    } else {\n      var dataIndex = 0;\n      for (var i = 0; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          if (quadraticContain.containStroke(x0, y0, x2, y2, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        } else {\n          if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        }\n        dataIndex++;\n      }\n    }\n    return -1;\n  };\n  LargeLinesPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n    this.hoverDataIdx = -1;\n    return false;\n  };\n  LargeLinesPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.segs;\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n      rect = this._rect = new graphic.BoundingRect(minX, minY, maxX, maxY);\n    }\n    return rect;\n  };\n  return LargeLinesPath;\n}(graphic.Path);\nvar LargeLineDraw = /** @class */function () {\n  function LargeLineDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\r\n   * Update symbols draw by new data\r\n   */\n  LargeLineDraw.prototype.updateData = function (data) {\n    this._clear();\n    var lineEl = this._create();\n    lineEl.setShape({\n      segs: data.getLayout('linesPoints')\n    });\n    this._setCommon(lineEl, data);\n  };\n  ;\n  /**\r\n   * @override\r\n   */\n  LargeLineDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n    this._clear();\n  };\n  ;\n  /**\r\n   * @override\r\n   */\n  LargeLineDraw.prototype.incrementalUpdate = function (taskParams, data) {\n    var lastAdded = this._newAdded[0];\n    var linePoints = data.getLayout('linesPoints');\n    var oldSegs = lastAdded && lastAdded.shape.segs;\n    // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n    if (oldSegs && oldSegs.length < 2e4) {\n      var oldLen = oldSegs.length;\n      var newSegs = new Float32Array(oldLen + linePoints.length);\n      // Concat two array\n      newSegs.set(oldSegs);\n      newSegs.set(linePoints, oldLen);\n      lastAdded.setShape({\n        segs: newSegs\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n      var lineEl = this._create();\n      lineEl.incremental = true;\n      lineEl.setShape({\n        segs: linePoints\n      });\n      this._setCommon(lineEl, data);\n      lineEl.__startIndex = taskParams.start;\n    }\n  };\n  /**\r\n   * @override\r\n   */\n  LargeLineDraw.prototype.remove = function () {\n    this._clear();\n  };\n  LargeLineDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n  LargeLineDraw.prototype._create = function () {\n    var lineEl = new LargeLinesPath({\n      cursor: 'default',\n      ignoreCoarsePointer: true\n    });\n    this._newAdded.push(lineEl);\n    this.group.add(lineEl);\n    return lineEl;\n  };\n  LargeLineDraw.prototype._setCommon = function (lineEl, data, isIncremental) {\n    var hostModel = data.hostModel;\n    lineEl.setShape({\n      polyline: hostModel.get('polyline'),\n      curveness: hostModel.get(['lineStyle', 'curveness'])\n    });\n    lineEl.useStyle(hostModel.getModel('lineStyle').getLineStyle());\n    lineEl.style.strokeNoScale = true;\n    var style = data.getVisual('style');\n    if (style && style.stroke) {\n      lineEl.setStyle('stroke', style.stroke);\n    }\n    lineEl.setStyle('fill', null);\n    var ecData = getECData(lineEl);\n    // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n    ecData.seriesIndex = hostModel.seriesIndex;\n    lineEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = lineEl.hoverDataIdx;\n      if (dataIndex > 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + lineEl.__startIndex;\n      }\n    });\n  };\n  ;\n  LargeLineDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n  ;\n  return LargeLineDraw;\n}();\nexport default LargeLineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/* global Float32Array */\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { error } from '../../util/log.js';\nvar linesLayout = {\n  seriesType: 'lines',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (!coordSys) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('The lines series must have a coordinate system.');\n      }\n      return;\n    }\n    var isPolyline = seriesModel.get('polyline');\n    var isLarge = seriesModel.pipelineContext.large;\n    return {\n      progress: function (params, lineData) {\n        var lineCoords = [];\n        if (isLarge) {\n          var points = void 0;\n          var segCount = params.end - params.start;\n          if (isPolyline) {\n            var totalCoordsCount = 0;\n            for (var i = params.start; i < params.end; i++) {\n              totalCoordsCount += seriesModel.getLineCoordsCount(i);\n            }\n            points = new Float32Array(segCount + totalCoordsCount * 2);\n          } else {\n            points = new Float32Array(segCount * 4);\n          }\n          var offset = 0;\n          var pt = [];\n          for (var i = params.start; i < params.end; i++) {\n            var len = seriesModel.getLineCoords(i, lineCoords);\n            if (isPolyline) {\n              points[offset++] = len;\n            }\n            for (var k = 0; k < len; k++) {\n              pt = coordSys.dataToPoint(lineCoords[k], false, pt);\n              points[offset++] = pt[0];\n              points[offset++] = pt[1];\n            }\n          }\n          lineData.setLayout('linesPoints', points);\n        } else {\n          for (var i = params.start; i < params.end; i++) {\n            var itemModel = lineData.getItemModel(i);\n            var len = seriesModel.getLineCoords(i, lineCoords);\n            var pts = [];\n            if (isPolyline) {\n              for (var j = 0; j < len; j++) {\n                pts.push(coordSys.dataToPoint(lineCoords[j]));\n              }\n            } else {\n              pts[0] = coordSys.dataToPoint(lineCoords[0]);\n              pts[1] = coordSys.dataToPoint(lineCoords[1]);\n              var curveness = itemModel.get(['lineStyle', 'curveness']);\n              if (+curveness) {\n                pts[2] = [(pts[0][0] + pts[1][0]) / 2 - (pts[0][1] - pts[1][1]) * curveness, (pts[0][1] + pts[1][1]) / 2 - (pts[1][0] - pts[0][0]) * curveness];\n              }\n            }\n            lineData.setItemLayout(i, pts);\n          }\n        }\n      }\n    };\n  }\n};\nexport default linesLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport LineDraw from '../helper/LineDraw.js';\nimport EffectLine from '../helper/EffectLine.js';\nimport Line from '../helper/Line.js';\nimport Polyline from '../helper/Polyline.js';\nimport EffectPolyline from '../helper/EffectPolyline.js';\nimport LargeLineDraw from '../helper/LargeLineDraw.js';\nimport linesLayout from './linesLayout.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport ChartView from '../../view/Chart.js';\nvar LinesView = /** @class */function (_super) {\n  __extends(LinesView, _super);\n  function LinesView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LinesView.type;\n    return _this;\n  }\n  LinesView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n    var zlevel = seriesModel.get('zlevel');\n    var trailLength = seriesModel.get(['effect', 'trailLength']);\n    var zr = api.getZr();\n    // Avoid the drag cause ghost shadow\n    // FIXME Better way ?\n    // SVG doesn't support\n    var isSvg = zr.painter.getType() === 'svg';\n    if (!isSvg) {\n      zr.painter.getLayer(zlevel).clear(true);\n    }\n    // Config layer with motion blur\n    if (this._lastZlevel != null && !isSvg) {\n      zr.configLayer(this._lastZlevel, {\n        motionBlur: false\n      });\n    }\n    if (this._showEffect(seriesModel) && trailLength > 0) {\n      if (!isSvg) {\n        zr.configLayer(zlevel, {\n          motionBlur: true,\n          lastFrameAlpha: Math.max(Math.min(trailLength / 10 + 0.9, 1), 0)\n        });\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.warn('SVG render mode doesn\\'t support lines with trail effect');\n      }\n    }\n    lineDraw.updateData(data);\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n    this._lastZlevel = zlevel;\n    this._finished = true;\n  };\n  LinesView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n    lineDraw.incrementalPrepareUpdate(data);\n    this._clearLayer(api);\n    this._finished = false;\n  };\n  LinesView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._lineDraw.incrementalUpdate(taskParams, seriesModel.getData());\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n  LinesView.prototype.eachRendered = function (cb) {\n    this._lineDraw && this._lineDraw.eachRendered(cb);\n  };\n  LinesView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var pipelineContext = seriesModel.pipelineContext;\n    if (!this._finished || pipelineContext.large || pipelineContext.progressiveRender) {\n      // TODO Don't have to do update in large mode. Only do it when there are millions of data.\n      return {\n        update: true\n      };\n    } else {\n      // TODO Use same logic with ScatterView.\n      // Manually update layout\n      var res = linesLayout.reset(seriesModel, ecModel, api);\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n      // Not in large mode\n      this._lineDraw.updateLayout();\n      this._clearLayer(api);\n    }\n  };\n  LinesView.prototype._updateLineDraw = function (data, seriesModel) {\n    var lineDraw = this._lineDraw;\n    var hasEffect = this._showEffect(seriesModel);\n    var isPolyline = !!seriesModel.get('polyline');\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n    if (process.env.NODE_ENV !== 'production') {\n      if (hasEffect && isLargeDraw) {\n        console.warn('Large lines not support effect');\n      }\n    }\n    if (!lineDraw || hasEffect !== this._hasEffet || isPolyline !== this._isPolyline || isLargeDraw !== this._isLargeDraw) {\n      if (lineDraw) {\n        lineDraw.remove();\n      }\n      lineDraw = this._lineDraw = isLargeDraw ? new LargeLineDraw() : new LineDraw(isPolyline ? hasEffect ? EffectPolyline : Polyline : hasEffect ? EffectLine : Line);\n      this._hasEffet = hasEffect;\n      this._isPolyline = isPolyline;\n      this._isLargeDraw = isLargeDraw;\n    }\n    this.group.add(lineDraw.group);\n    return lineDraw;\n  };\n  LinesView.prototype._showEffect = function (seriesModel) {\n    return !!seriesModel.get(['effect', 'show']);\n  };\n  LinesView.prototype._clearLayer = function (api) {\n    // Not use motion when dragging or zooming\n    var zr = api.getZr();\n    var isSvg = zr.painter.getType() === 'svg';\n    if (!isSvg && this._lastZlevel != null) {\n      zr.painter.getLayer(this._lastZlevel).clear(true);\n    }\n  };\n  LinesView.prototype.remove = function (ecModel, api) {\n    this._lineDraw && this._lineDraw.remove();\n    this._lineDraw = null;\n    // Clear motion when lineDraw is removed\n    this._clearLayer(api);\n  };\n  LinesView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n  LinesView.type = 'lines';\n  return LinesView;\n}(ChartView);\nexport default LinesView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/* global Uint32Array, Float64Array, Float32Array */\nimport SeriesModel from '../../model/Series.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { concatArray, mergeAll, map, isNumber } from 'zrender/lib/core/util.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar Uint32Arr = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\nvar Float64Arr = typeof Float64Array === 'undefined' ? Array : Float64Array;\nfunction compatEc2(seriesOpt) {\n  var data = seriesOpt.data;\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Lines data configuration has been changed to' + ' { coords:[[1,2],[2,3]] }');\n    }\n    seriesOpt.data = map(data, function (itemOpt) {\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\n      var target = {\n        coords: coords\n      };\n      if (itemOpt[0].name) {\n        target.fromName = itemOpt[0].name;\n      }\n      if (itemOpt[1].name) {\n        target.toName = itemOpt[1].name;\n      }\n      return mergeAll([target, itemOpt[0], itemOpt[1]]);\n    });\n  }\n}\nvar LinesSeriesModel = /** @class */function (_super) {\n  __extends(LinesSeriesModel, _super);\n  function LinesSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LinesSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n  LinesSeriesModel.prototype.init = function (option) {\n    // The input data may be null/undefined.\n    option.data = option.data || [];\n    // Not using preprocessor because mergeOption may not have series.type\n    compatEc2(option);\n    var result = this._processFlatCoordsArray(option.data);\n    this._flatCoords = result.flatCoords;\n    this._flatCoordsOffset = result.flatCoordsOffset;\n    if (result.flatCoords) {\n      option.data = new Float32Array(result.count);\n    }\n    _super.prototype.init.apply(this, arguments);\n  };\n  LinesSeriesModel.prototype.mergeOption = function (option) {\n    compatEc2(option);\n    if (option.data) {\n      // Only update when have option data to merge.\n      var result = this._processFlatCoordsArray(option.data);\n      this._flatCoords = result.flatCoords;\n      this._flatCoordsOffset = result.flatCoordsOffset;\n      if (result.flatCoords) {\n        option.data = new Float32Array(result.count);\n      }\n    }\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  LinesSeriesModel.prototype.appendData = function (params) {\n    var result = this._processFlatCoordsArray(params.data);\n    if (result.flatCoords) {\n      if (!this._flatCoords) {\n        this._flatCoords = result.flatCoords;\n        this._flatCoordsOffset = result.flatCoordsOffset;\n      } else {\n        this._flatCoords = concatArray(this._flatCoords, result.flatCoords);\n        this._flatCoordsOffset = concatArray(this._flatCoordsOffset, result.flatCoordsOffset);\n      }\n      params.data = new Float32Array(result.count);\n    }\n    this.getRawData().appendData(params.data);\n  };\n  LinesSeriesModel.prototype._getCoordsFromItemModel = function (idx) {\n    var itemModel = this.getData().getItemModel(idx);\n    var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.getShallow('coords');\n    if (process.env.NODE_ENV !== 'production') {\n      if (!(coords instanceof Array && coords.length > 0 && coords[0] instanceof Array)) {\n        throw new Error('Invalid coords ' + JSON.stringify(coords) + '. Lines must have 2d coords array in data item.');\n      }\n    }\n    return coords;\n  };\n  LinesSeriesModel.prototype.getLineCoordsCount = function (idx) {\n    if (this._flatCoordsOffset) {\n      return this._flatCoordsOffset[idx * 2 + 1];\n    } else {\n      return this._getCoordsFromItemModel(idx).length;\n    }\n  };\n  LinesSeriesModel.prototype.getLineCoords = function (idx, out) {\n    if (this._flatCoordsOffset) {\n      var offset = this._flatCoordsOffset[idx * 2];\n      var len = this._flatCoordsOffset[idx * 2 + 1];\n      for (var i = 0; i < len; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = this._flatCoords[offset + i * 2];\n        out[i][1] = this._flatCoords[offset + i * 2 + 1];\n      }\n      return len;\n    } else {\n      var coords = this._getCoordsFromItemModel(idx);\n      for (var i = 0; i < coords.length; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = coords[i][0];\n        out[i][1] = coords[i][1];\n      }\n      return coords.length;\n    }\n  };\n  LinesSeriesModel.prototype._processFlatCoordsArray = function (data) {\n    var startOffset = 0;\n    if (this._flatCoords) {\n      startOffset = this._flatCoords.length;\n    }\n    // Stored as a typed array. In format\n    // Points Count(2) | x | y | x | y | Points Count(3) | x |  y | x | y | x | y |\n    if (isNumber(data[0])) {\n      var len = data.length;\n      // Store offset and len of each segment\n      var coordsOffsetAndLenStorage = new Uint32Arr(len);\n      var coordsStorage = new Float64Arr(len);\n      var coordsCursor = 0;\n      var offsetCursor = 0;\n      var dataCount = 0;\n      for (var i = 0; i < len;) {\n        dataCount++;\n        var count = data[i++];\n        // Offset\n        coordsOffsetAndLenStorage[offsetCursor++] = coordsCursor + startOffset;\n        // Len\n        coordsOffsetAndLenStorage[offsetCursor++] = count;\n        for (var k = 0; k < count; k++) {\n          var x = data[i++];\n          var y = data[i++];\n          coordsStorage[coordsCursor++] = x;\n          coordsStorage[coordsCursor++] = y;\n          if (i > len) {\n            if (process.env.NODE_ENV !== 'production') {\n              throw new Error('Invalid data format.');\n            }\n          }\n        }\n      }\n      return {\n        flatCoordsOffset: new Uint32Array(coordsOffsetAndLenStorage.buffer, 0, offsetCursor),\n        flatCoords: coordsStorage,\n        count: dataCount\n      };\n    }\n    return {\n      flatCoordsOffset: null,\n      flatCoords: null,\n      count: data.length\n    };\n  };\n  LinesSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      var CoordSys = CoordinateSystem.get(option.coordinateSystem);\n      if (!CoordSys) {\n        throw new Error('Unknown coordinate system ' + option.coordinateSystem);\n      }\n    }\n    var lineData = new SeriesData(['value'], this);\n    lineData.hasItemOption = false;\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\n      // dataItem is simply coords\n      if (dataItem instanceof Array) {\n        return NaN;\n      } else {\n        lineData.hasItemOption = true;\n        var value = dataItem.value;\n        if (value != null) {\n          return value instanceof Array ? value[dimIndex] : value;\n        }\n      }\n    });\n    return lineData;\n  };\n  LinesSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var itemModel = data.getItemModel(dataIndex);\n    var name = itemModel.get('name');\n    if (name) {\n      return name;\n    }\n    var fromName = itemModel.get('fromName');\n    var toName = itemModel.get('toName');\n    var nameArr = [];\n    fromName != null && nameArr.push(fromName);\n    toName != null && nameArr.push(toName);\n    return createTooltipMarkup('nameValue', {\n      name: nameArr.join(' > ')\n    });\n  };\n  LinesSeriesModel.prototype.preventIncremental = function () {\n    return !!this.get(['effect', 'show']);\n  };\n  LinesSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n    if (progressive == null) {\n      return this.option.large ? 1e4 : this.get('progressive');\n    }\n    return progressive;\n  };\n  LinesSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n    if (progressiveThreshold == null) {\n      return this.option.large ? 2e4 : this.get('progressiveThreshold');\n    }\n    return progressiveThreshold;\n  };\n  LinesSeriesModel.prototype.getZLevelKey = function () {\n    var effectModel = this.getModel('effect');\n    var trailLength = effectModel.get('trailLength');\n    return this.getData().count() > this.getProgressiveThreshold()\n    // Each progressive series has individual key.\n    ? this.id : effectModel.get('show') && trailLength > 0 ? trailLength + '' : '';\n  };\n  LinesSeriesModel.type = 'series.lines';\n  LinesSeriesModel.dependencies = ['grid', 'polar', 'geo', 'calendar'];\n  LinesSeriesModel.defaultOption = {\n    coordinateSystem: 'geo',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Cartesian coordinate system\n    xAxisIndex: 0,\n    yAxisIndex: 0,\n    symbol: ['none', 'none'],\n    symbolSize: [10, 10],\n    // Geo coordinate system\n    geoIndex: 0,\n    effect: {\n      show: false,\n      period: 4,\n      constantSpeed: 0,\n      symbol: 'circle',\n      symbolSize: 3,\n      loop: true,\n      trailLength: 0.2\n    },\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    polyline: false,\n    clip: true,\n    label: {\n      show: false,\n      position: 'end'\n      // distance: 5,\n      // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n    },\n    lineStyle: {\n      opacity: 0.5\n    }\n  };\n  return LinesSeriesModel;\n}(SeriesModel);\nexport default LinesSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n  return a;\n}\nvar linesVisual = {\n  seriesType: 'lines',\n  reset: function (seriesModel) {\n    var symbolType = normalize(seriesModel.get('symbol'));\n    var symbolSize = normalize(seriesModel.get('symbolSize'));\n    var data = seriesModel.getData();\n    data.setVisual('fromSymbol', symbolType && symbolType[0]);\n    data.setVisual('toSymbol', symbolType && symbolType[1]);\n    data.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    data.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      symbolType[0] && data.setItemVisual(idx, 'fromSymbol', symbolType[0]);\n      symbolType[1] && data.setItemVisual(idx, 'toSymbol', symbolType[1]);\n      symbolSize[0] && data.setItemVisual(idx, 'fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && data.setItemVisual(idx, 'toSymbolSize', symbolSize[1]);\n    }\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport default linesVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport LinesView from './LinesView.js';\nimport LinesSeriesModel from './LinesSeries.js';\nimport linesLayout from './linesLayout.js';\nimport linesVisual from './linesVisual.js';\nexport function install(registers) {\n  registers.registerChartView(LinesView);\n  registers.registerSeriesModel(LinesSeriesModel);\n  registers.registerLayout(linesLayout);\n  registers.registerVisual(linesVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/* global Uint8ClampedArray */\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar GRADIENT_LEVELS = 256;\nvar HeatmapLayer = /** @class */function () {\n  function HeatmapLayer() {\n    this.blurSize = 30;\n    this.pointSize = 20;\n    this.maxOpacity = 1;\n    this.minOpacity = 0;\n    this._gradientPixels = {\n      inRange: null,\n      outOfRange: null\n    };\n    var canvas = platformApi.createCanvas();\n    this.canvas = canvas;\n  }\n  /**\r\n   * Renders Heatmap and returns the rendered canvas\r\n   * @param data array of data, each has x, y, value\r\n   * @param width canvas width\r\n   * @param height canvas height\r\n   */\n  HeatmapLayer.prototype.update = function (data, width, height, normalize, colorFunc, isInRange) {\n    var brush = this._getBrush();\n    var gradientInRange = this._getGradient(colorFunc, 'inRange');\n    var gradientOutOfRange = this._getGradient(colorFunc, 'outOfRange');\n    var r = this.pointSize + this.blurSize;\n    var canvas = this.canvas;\n    var ctx = canvas.getContext('2d');\n    var len = data.length;\n    canvas.width = width;\n    canvas.height = height;\n    for (var i = 0; i < len; ++i) {\n      var p = data[i];\n      var x = p[0];\n      var y = p[1];\n      var value = p[2];\n      // calculate alpha using value\n      var alpha = normalize(value);\n      // draw with the circle brush with alpha\n      ctx.globalAlpha = alpha;\n      ctx.drawImage(brush, x - r, y - r);\n    }\n    if (!canvas.width || !canvas.height) {\n      // Avoid \"Uncaught DOMException: Failed to execute 'getImageData' on\n      // 'CanvasRenderingContext2D': The source height is 0.\"\n      return canvas;\n    }\n    // colorize the canvas using alpha value and set with gradient\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    var pixels = imageData.data;\n    var offset = 0;\n    var pixelLen = pixels.length;\n    var minOpacity = this.minOpacity;\n    var maxOpacity = this.maxOpacity;\n    var diffOpacity = maxOpacity - minOpacity;\n    while (offset < pixelLen) {\n      var alpha = pixels[offset + 3] / 256;\n      var gradientOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1)) * 4;\n      // Simple optimize to ignore the empty data\n      if (alpha > 0) {\n        var gradient = isInRange(alpha) ? gradientInRange : gradientOutOfRange;\n        // Any alpha > 0 will be mapped to [minOpacity, maxOpacity]\n        alpha > 0 && (alpha = alpha * diffOpacity + minOpacity);\n        pixels[offset++] = gradient[gradientOffset];\n        pixels[offset++] = gradient[gradientOffset + 1];\n        pixels[offset++] = gradient[gradientOffset + 2];\n        pixels[offset++] = gradient[gradientOffset + 3] * alpha * 256;\n      } else {\n        offset += 4;\n      }\n    }\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  };\n  /**\r\n   * get canvas of a black circle brush used for canvas to draw later\r\n   */\n  HeatmapLayer.prototype._getBrush = function () {\n    var brushCanvas = this._brushCanvas || (this._brushCanvas = platformApi.createCanvas());\n    // set brush size\n    var r = this.pointSize + this.blurSize;\n    var d = r * 2;\n    brushCanvas.width = d;\n    brushCanvas.height = d;\n    var ctx = brushCanvas.getContext('2d');\n    ctx.clearRect(0, 0, d, d);\n    // in order to render shadow without the distinct circle,\n    // draw the distinct circle in an invisible place,\n    // and use shadowOffset to draw shadow in the center of the canvas\n    ctx.shadowOffsetX = d;\n    ctx.shadowBlur = this.blurSize;\n    // draw the shadow in black, and use alpha and shadow blur to generate\n    // color in color map\n    ctx.shadowColor = '#000';\n    // draw circle in the left to the canvas\n    ctx.beginPath();\n    ctx.arc(-r, r, this.pointSize, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    return brushCanvas;\n  };\n  /**\r\n   * get gradient color map\r\n   * @private\r\n   */\n  HeatmapLayer.prototype._getGradient = function (colorFunc, state) {\n    var gradientPixels = this._gradientPixels;\n    var pixelsSingleState = gradientPixels[state] || (gradientPixels[state] = new Uint8ClampedArray(256 * 4));\n    var color = [0, 0, 0, 0];\n    var off = 0;\n    for (var i = 0; i < 256; i++) {\n      colorFunc[state](i / 255, true, color);\n      pixelsSingleState[off++] = color[0];\n      pixelsSingleState[off++] = color[1];\n      pixelsSingleState[off++] = color[2];\n      pixelsSingleState[off++] = color[3];\n    }\n    return pixelsSingleState;\n  };\n  return HeatmapLayer;\n}();\nexport default HeatmapLayer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nimport HeatmapLayer from './HeatmapLayer.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nfunction getIsInPiecewiseRange(dataExtent, pieceList, selected) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  pieceList = zrUtil.map(pieceList, function (piece) {\n    return {\n      interval: [(piece.interval[0] - dataExtent[0]) / dataSpan, (piece.interval[1] - dataExtent[0]) / dataSpan]\n    };\n  });\n  var len = pieceList.length;\n  var lastIndex = 0;\n  return function (val) {\n    var i;\n    // Try to find in the location of the last found\n    for (i = lastIndex; i < len; i++) {\n      var interval = pieceList[i].interval;\n      if (interval[0] <= val && val <= interval[1]) {\n        lastIndex = i;\n        break;\n      }\n    }\n    if (i === len) {\n      // Not found, back interation\n      for (i = lastIndex - 1; i >= 0; i--) {\n        var interval = pieceList[i].interval;\n        if (interval[0] <= val && val <= interval[1]) {\n          lastIndex = i;\n          break;\n        }\n      }\n    }\n    return i >= 0 && i < len && selected[i];\n  };\n}\nfunction getIsInContinuousRange(dataExtent, range) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  range = [(range[0] - dataExtent[0]) / dataSpan, (range[1] - dataExtent[0]) / dataSpan];\n  return function (val) {\n    return val >= range[0] && val <= range[1];\n  };\n}\nfunction isGeoCoordSys(coordSys) {\n  var dimensions = coordSys.dimensions;\n  // Not use coordSys.type === 'geo' because coordSys maybe extended\n  return dimensions[0] === 'lng' && dimensions[1] === 'lat';\n}\nvar HeatmapView = /** @class */function (_super) {\n  __extends(HeatmapView, _super);\n  function HeatmapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = HeatmapView.type;\n    return _this;\n  }\n  HeatmapView.prototype.render = function (seriesModel, ecModel, api) {\n    var visualMapOfThisSeries;\n    ecModel.eachComponent('visualMap', function (visualMap) {\n      visualMap.eachTargetSeries(function (targetSeries) {\n        if (targetSeries === seriesModel) {\n          visualMapOfThisSeries = visualMap;\n        }\n      });\n    });\n    if (process.env.NODE_ENV !== 'production') {\n      if (!visualMapOfThisSeries) {\n        throw new Error('Heatmap must use with visualMap');\n      }\n    }\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    this.group.removeAll();\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys.type === 'cartesian2d' || coordSys.type === 'calendar') {\n      this._renderOnCartesianAndCalendar(seriesModel, api, 0, seriesModel.getData().count());\n    } else if (isGeoCoordSys(coordSys)) {\n      this._renderOnGeo(coordSys, seriesModel, visualMapOfThisSeries, api);\n    }\n  };\n  HeatmapView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n  };\n  HeatmapView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys) {\n      // geo does not support incremental rendering?\n      if (isGeoCoordSys(coordSys)) {\n        this.render(seriesModel, ecModel, api);\n      } else {\n        this._progressiveEls = [];\n        this._renderOnCartesianAndCalendar(seriesModel, api, params.start, params.end, true);\n      }\n    }\n  };\n  HeatmapView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  HeatmapView.prototype._renderOnCartesianAndCalendar = function (seriesModel, api, start, end, incremental) {\n    var coordSys = seriesModel.coordinateSystem;\n    var isCartesian2d = isCoordinateSystemType(coordSys, 'cartesian2d');\n    var width;\n    var height;\n    var xAxisExtent;\n    var yAxisExtent;\n    if (isCartesian2d) {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      if (process.env.NODE_ENV !== 'production') {\n        if (!(xAxis.type === 'category' && yAxis.type === 'category')) {\n          throw new Error('Heatmap on cartesian must have two category axes');\n        }\n        if (!(xAxis.onBand && yAxis.onBand)) {\n          throw new Error('Heatmap on cartesian must have two axes with boundaryGap true');\n        }\n      }\n      // add 0.5px to avoid the gaps\n      width = xAxis.getBandWidth() + .5;\n      height = yAxis.getBandWidth() + .5;\n      xAxisExtent = xAxis.scale.getExtent();\n      yAxisExtent = yAxis.scale.getExtent();\n    }\n    var group = this.group;\n    var data = seriesModel.getData();\n    var emphasisStyle = seriesModel.getModel(['emphasis', 'itemStyle']).getItemStyle();\n    var blurStyle = seriesModel.getModel(['blur', 'itemStyle']).getItemStyle();\n    var selectStyle = seriesModel.getModel(['select', 'itemStyle']).getItemStyle();\n    var borderRadius = seriesModel.get(['itemStyle', 'borderRadius']);\n    var labelStatesModels = getLabelStatesModels(seriesModel);\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    var dataDims = isCartesian2d ? [data.mapDimension('x'), data.mapDimension('y'), data.mapDimension('value')] : [data.mapDimension('time'), data.mapDimension('value')];\n    for (var idx = start; idx < end; idx++) {\n      var rect = void 0;\n      var style = data.getItemVisual(idx, 'style');\n      if (isCartesian2d) {\n        var dataDimX = data.get(dataDims[0], idx);\n        var dataDimY = data.get(dataDims[1], idx);\n        // Ignore empty data and out of extent data\n        if (isNaN(data.get(dataDims[2], idx)) || isNaN(dataDimX) || isNaN(dataDimY) || dataDimX < xAxisExtent[0] || dataDimX > xAxisExtent[1] || dataDimY < yAxisExtent[0] || dataDimY > yAxisExtent[1]) {\n          continue;\n        }\n        var point = coordSys.dataToPoint([dataDimX, dataDimY]);\n        rect = new graphic.Rect({\n          shape: {\n            x: point[0] - width / 2,\n            y: point[1] - height / 2,\n            width: width,\n            height: height\n          },\n          style: style\n        });\n      } else {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[1], idx))) {\n          continue;\n        }\n        rect = new graphic.Rect({\n          z2: 1,\n          shape: coordSys.dataToRect([data.get(dataDims[0], idx)]).contentShape,\n          style: style\n        });\n      }\n      // Optimization for large dataset\n      if (data.hasItemOption) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel_1 = itemModel.getModel('emphasis');\n        emphasisStyle = emphasisModel_1.getModel('itemStyle').getItemStyle();\n        blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n        selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n        // Each item value struct in the data would be firstly\n        // {\n        //     itemStyle: { borderRadius: [30, 30] },\n        //     value: [2022, 02, 22]\n        // }\n        borderRadius = itemModel.get(['itemStyle', 'borderRadius']);\n        focus = emphasisModel_1.get('focus');\n        blurScope = emphasisModel_1.get('blurScope');\n        emphasisDisabled = emphasisModel_1.get('disabled');\n        labelStatesModels = getLabelStatesModels(itemModel);\n      }\n      rect.shape.r = borderRadius;\n      var rawValue = seriesModel.getRawValue(idx);\n      var defaultText = '-';\n      if (rawValue && rawValue[2] != null) {\n        defaultText = rawValue[2] + '';\n      }\n      setLabelStyle(rect, labelStatesModels, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultOpacity: style.opacity,\n        defaultText: defaultText\n      });\n      rect.ensureState('emphasis').style = emphasisStyle;\n      rect.ensureState('blur').style = blurStyle;\n      rect.ensureState('select').style = selectStyle;\n      toggleHoverEmphasis(rect, focus, blurScope, emphasisDisabled);\n      rect.incremental = incremental;\n      // PENDING\n      if (incremental) {\n        // Rect must use hover layer if it's incremental.\n        rect.states.emphasis.hoverLayer = true;\n      }\n      group.add(rect);\n      data.setItemGraphicEl(idx, rect);\n      if (this._progressiveEls) {\n        this._progressiveEls.push(rect);\n      }\n    }\n  };\n  HeatmapView.prototype._renderOnGeo = function (geo, seriesModel, visualMapModel, api) {\n    var inRangeVisuals = visualMapModel.targetVisuals.inRange;\n    var outOfRangeVisuals = visualMapModel.targetVisuals.outOfRange;\n    // if (!visualMapping) {\n    //     throw new Error('Data range must have color visuals');\n    // }\n    var data = seriesModel.getData();\n    var hmLayer = this._hmLayer || this._hmLayer || new HeatmapLayer();\n    hmLayer.blurSize = seriesModel.get('blurSize');\n    hmLayer.pointSize = seriesModel.get('pointSize');\n    hmLayer.minOpacity = seriesModel.get('minOpacity');\n    hmLayer.maxOpacity = seriesModel.get('maxOpacity');\n    var rect = geo.getViewRect().clone();\n    var roamTransform = geo.getRoamTransform();\n    rect.applyTransform(roamTransform);\n    // Clamp on viewport\n    var x = Math.max(rect.x, 0);\n    var y = Math.max(rect.y, 0);\n    var x2 = Math.min(rect.width + rect.x, api.getWidth());\n    var y2 = Math.min(rect.height + rect.y, api.getHeight());\n    var width = x2 - x;\n    var height = y2 - y;\n    var dims = [data.mapDimension('lng'), data.mapDimension('lat'), data.mapDimension('value')];\n    var points = data.mapArray(dims, function (lng, lat, value) {\n      var pt = geo.dataToPoint([lng, lat]);\n      pt[0] -= x;\n      pt[1] -= y;\n      pt.push(value);\n      return pt;\n    });\n    var dataExtent = visualMapModel.getExtent();\n    var isInRange = visualMapModel.type === 'visualMap.continuous' ? getIsInContinuousRange(dataExtent, visualMapModel.option.range) : getIsInPiecewiseRange(dataExtent, visualMapModel.getPieceList(), visualMapModel.option.selected);\n    hmLayer.update(points, width, height, inRangeVisuals.color.getNormalizer(), {\n      inRange: inRangeVisuals.color.getColorMapper(),\n      outOfRange: outOfRangeVisuals.color.getColorMapper()\n    }, isInRange);\n    var img = new graphic.Image({\n      style: {\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        image: hmLayer.canvas\n      },\n      silent: true\n    });\n    this.group.add(img);\n  };\n  HeatmapView.type = 'heatmap';\n  return HeatmapView;\n}(ChartView);\nexport default HeatmapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nvar HeatmapSeriesModel = /** @class */function (_super) {\n  __extends(HeatmapSeriesModel, _super);\n  function HeatmapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = HeatmapSeriesModel.type;\n    return _this;\n  }\n  HeatmapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      generateCoord: 'value'\n    });\n  };\n  HeatmapSeriesModel.prototype.preventIncremental = function () {\n    var coordSysCreator = CoordinateSystem.get(this.get('coordinateSystem'));\n    if (coordSysCreator && coordSysCreator.dimensions) {\n      return coordSysCreator.dimensions[0] === 'lng' && coordSysCreator.dimensions[1] === 'lat';\n    }\n  };\n  HeatmapSeriesModel.type = 'series.heatmap';\n  HeatmapSeriesModel.dependencies = ['grid', 'geo', 'calendar'];\n  HeatmapSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Geo coordinate system\n    geoIndex: 0,\n    blurSize: 30,\n    pointSize: 20,\n    maxOpacity: 1,\n    minOpacity: 0,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return HeatmapSeriesModel;\n}(SeriesModel);\nexport default HeatmapSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport HeatmapView from './HeatmapView.js';\nimport HeatmapSeriesModel from './HeatmapSeries.js';\nexport function install(registers) {\n  registers.registerChartView(HeatmapView);\n  registers.registerSeriesModel(HeatmapSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport { parsePercent, isNumeric } from '../../util/number.js';\nimport ChartView from '../../view/Chart.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth'];\n// index: +isHorizontal\nvar LAYOUT_ATTRS = [{\n  xy: 'x',\n  wh: 'width',\n  index: 0,\n  posDesc: ['left', 'right']\n}, {\n  xy: 'y',\n  wh: 'height',\n  index: 1,\n  posDesc: ['top', 'bottom']\n}];\nvar pathForLineWidth = new graphic.Circle();\nvar PictorialBarView = /** @class */function (_super) {\n  __extends(PictorialBarView, _super);\n  function PictorialBarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PictorialBarView.type;\n    return _this;\n  }\n  PictorialBarView.prototype.render = function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var coordSysRect = cartesian.master.getRect();\n    var opt = {\n      ecSize: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      seriesModel: seriesModel,\n      coordSys: cartesian,\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\n      isHorizontal: isHorizontal,\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\n      categoryDim: LAYOUT_ATTRS[1 - +isHorizontal]\n    };\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n      var itemModel = getItemModel(data, dataIndex);\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\n      var bar = createBar(data, opt, symbolMeta);\n      data.setItemGraphicEl(dataIndex, bar);\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).update(function (newIndex, oldIndex) {\n      var bar = oldData.getItemGraphicEl(oldIndex);\n      if (!data.hasValue(newIndex)) {\n        group.remove(bar);\n        return;\n      }\n      var itemModel = getItemModel(data, newIndex);\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\n        group.remove(bar);\n        data.setItemGraphicEl(newIndex, null);\n        bar = null;\n      }\n      if (bar) {\n        updateBar(bar, opt, symbolMeta);\n      } else {\n        bar = createBar(data, opt, symbolMeta, true);\n      }\n      data.setItemGraphicEl(newIndex, bar);\n      bar.__pictorialSymbolMeta = symbolMeta;\n      // Add back\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).remove(function (dataIndex) {\n      var bar = oldData.getItemGraphicEl(dataIndex);\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\n    }).execute();\n    // Do clipping\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n    this._data = data;\n    return this.group;\n  };\n  PictorialBarView.prototype.remove = function (ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (bar) {\n          removeBar(data, getECData(bar).dataIndex, ecModel, bar);\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  };\n  PictorialBarView.type = 'pictorialBar';\n  return PictorialBarView;\n}(ChartView);\n// Set or calculate default value about symbol, and calculate layout info.\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\n  var layout = data.getItemLayout(dataIndex);\n  var symbolRepeat = itemModel.get('symbolRepeat');\n  var symbolClip = itemModel.get('symbolClip');\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\n  var symbolRotate = itemModel.get('symbolRotate');\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\n  var symbolMeta = {\n    dataIndex: dataIndex,\n    layout: layout,\n    itemModel: itemModel,\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\n    style: data.getItemVisual(dataIndex, 'style'),\n    symbolClip: symbolClip,\n    symbolRepeat: symbolRepeat,\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\n    symbolPatternSize: symbolPatternSize,\n    rotation: rotation,\n    animationModel: isAnimationEnabled ? itemModel : null,\n    hoverScale: isAnimationEnabled && itemModel.get(['emphasis', 'scale']),\n    z2: itemModel.getShallow('z', true) || 0\n  };\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\n  var symbolSize = symbolMeta.symbolSize;\n  var symbolOffset = normalizeSymbolOffset(itemModel.get('symbolOffset'), symbolSize);\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\n  return symbolMeta;\n}\n// bar length can be negative.\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\n  var boundingLength;\n  if (zrUtil.isArray(symbolBoundingData)) {\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\n    boundingLength = symbolBoundingExtent[pxSignIdx];\n  } else if (symbolBoundingData != null) {\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\n  } else if (symbolRepeat) {\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\n  } else {\n    boundingLength = layout[valueDim.wh];\n  }\n  outputSymbolMeta.boundingLength = boundingLength;\n  if (symbolRepeat) {\n    outputSymbolMeta.repeatCutLength = layout[valueDim.wh];\n  }\n  // if 'pxSign' means sign of pixel,  it can't be zero, or symbolScale will be zero\n  // and when borderWidth be settled, the actual linewidth will be NaN\n  var isXAxis = valueDim.xy === 'x';\n  var isInverse = valueAxis.inverse;\n  outputSymbolMeta.pxSign = isXAxis && !isInverse || !isXAxis && isInverse ? boundingLength >= 0 ? 1 : -1 : boundingLength > 0 ? 1 : -1;\n}\nfunction convertToCoordOnAxis(axis, value) {\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\n}\n// Support ['100%', '100%']\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var categoryDim = opt.categoryDim;\n  var categorySize = Math.abs(layout[categoryDim.wh]);\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\n  var parsedSymbolSize;\n  if (zrUtil.isArray(symbolSize)) {\n    parsedSymbolSize = symbolSize.slice();\n  } else {\n    if (symbolSize == null) {\n      // will parse to number below\n      parsedSymbolSize = ['100%', '100%'];\n    } else {\n      parsedSymbolSize = [symbolSize, symbolSize];\n    }\n  }\n  // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\n  // to complicated to calculate real percent value if considering scaled lineWidth.\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\n  // which can be tolerated in pictorial chart.\n  parsedSymbolSize[categoryDim.index] = parsePercent(parsedSymbolSize[categoryDim.index], categorySize);\n  parsedSymbolSize[valueDim.index] = parsePercent(parsedSymbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\n  outputSymbolMeta.symbolSize = parsedSymbolSize;\n  // If x or y is less than zero, show reversed shape.\n  var symbolScale = outputSymbolMeta.symbolScale = [parsedSymbolSize[0] / symbolPatternSize, parsedSymbolSize[1] / symbolPatternSize];\n  // Follow convention, 'right' and 'top' is the normal scale.\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\n}\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, outputSymbolMeta) {\n  // In symbols are drawn with scale, so do not need to care about the case that width\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\n  // be calculated.\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n  if (valueLineWidth) {\n    pathForLineWidth.attr({\n      scaleX: symbolScale[0],\n      scaleY: symbolScale[1],\n      rotation: rotation\n    });\n    pathForLineWidth.updateTransform();\n    valueLineWidth /= pathForLineWidth.getLineScale();\n    valueLineWidth *= symbolScale[opt.valueDim.index];\n  }\n  outputSymbolMeta.valueLineWidth = valueLineWidth || 0;\n}\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, outputSymbolMeta) {\n  var categoryDim = opt.categoryDim;\n  var valueDim = opt.valueDim;\n  var pxSign = outputSymbolMeta.pxSign;\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\n  var pathLen = unitLength;\n  // Note: rotation will not effect the layout of symbols, because user may\n  // want symbols to rotate on its center, which should not be translated\n  // when rotating.\n  if (symbolRepeat) {\n    var absBoundingLength = Math.abs(boundingLength);\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\n    var hasEndGap = false;\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\n      hasEndGap = true;\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\n    }\n    var symbolMarginNumeric = parsePercent(symbolMargin, symbolSize[valueDim.index]);\n    var uLenWithMargin = Math.max(unitLength + symbolMarginNumeric * 2, 0);\n    // When symbol margin is less than 0, margin at both ends will be subtracted\n    // to ensure that all of the symbols will not be overflow the given area.\n    var endFix = hasEndGap ? 0 : symbolMarginNumeric * 2;\n    // Both final repeatTimes and final symbolMarginNumeric area calculated based on\n    // boundingLength.\n    var repeatSpecified = isNumeric(symbolRepeat);\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin);\n    // Adjust calculate margin, to ensure each symbol is displayed\n    // entirely in the given layout area.\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\n    symbolMarginNumeric = mDiff / 2 / (hasEndGap ? repeatTimes : Math.max(repeatTimes - 1, 1));\n    uLenWithMargin = unitLength + symbolMarginNumeric * 2;\n    endFix = hasEndGap ? 0 : symbolMarginNumeric * 2;\n    // Update repeatTimes when not all symbol will be shown.\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\n    }\n    pathLen = repeatTimes * uLenWithMargin - endFix;\n    outputSymbolMeta.repeatTimes = repeatTimes;\n    outputSymbolMeta.symbolMargin = symbolMarginNumeric;\n  }\n  var sizeFix = pxSign * (pathLen / 2);\n  var pathPosition = outputSymbolMeta.pathPosition = [];\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\n  if (symbolOffset) {\n    pathPosition[0] += symbolOffset[0];\n    pathPosition[1] += symbolOffset[1];\n  }\n  var bundlePosition = outputSymbolMeta.bundlePosition = [];\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\n  var barRectShape = outputSymbolMeta.barRectShape = zrUtil.extend({}, layout);\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\n  var clipShape = outputSymbolMeta.clipShape = {};\n  // Consider that symbol may be overflow layout rect.\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\n  clipShape[valueDim.xy] = 0;\n  clipShape[valueDim.wh] = layout[valueDim.wh];\n}\nfunction createPath(symbolMeta) {\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\n  var path = createSymbol(\n  // Consider texture img, make a big size.\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize);\n  path.attr({\n    culling: true\n  });\n  path.type !== 'image' && path.setStyle({\n    strokeNoScale: true\n  });\n  return path;\n}\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var symbolSize = symbolMeta.symbolSize;\n  var valueLineWidth = symbolMeta.valueLineWidth;\n  var pathPosition = symbolMeta.pathPosition;\n  var valueDim = opt.valueDim;\n  var repeatTimes = symbolMeta.repeatTimes || 0;\n  var index = 0;\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\n  eachPath(bar, function (path) {\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    if (index < repeatTimes) {\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\n    } else {\n      updateAttr(path, null, {\n        scaleX: 0,\n        scaleY: 0\n      }, symbolMeta, isUpdate, function () {\n        bundle.remove(path);\n      });\n    }\n    // updateHoverAnimation(path, symbolMeta);\n    index++;\n  });\n  for (; index < repeatTimes; index++) {\n    var path = createPath(symbolMeta);\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    bundle.add(path);\n    var target = makeTarget(index);\n    updateAttr(path, {\n      x: target.x,\n      y: target.y,\n      scaleX: 0,\n      scaleY: 0\n    }, {\n      scaleX: target.scaleX,\n      scaleY: target.scaleY,\n      rotation: target.rotation\n    }, symbolMeta, isUpdate);\n  }\n  function makeTarget(index) {\n    var position = pathPosition.slice();\n    // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\n    // Otherwise: i = index;\n    var pxSign = symbolMeta.pxSign;\n    var i = index;\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\n      i = repeatTimes - 1 - index;\n    }\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\n    return {\n      x: position[0],\n      y: position[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    };\n  }\n}\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var mainPath = bar.__pictorialMainPath;\n  if (!mainPath) {\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\n    bundle.add(mainPath);\n    updateAttr(mainPath, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: 0,\n      scaleY: 0,\n      rotation: symbolMeta.rotation\n    }, {\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1]\n    }, symbolMeta, isUpdate);\n  } else {\n    updateAttr(mainPath, null, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    }, symbolMeta, isUpdate);\n  }\n}\n// bar rect is used for label.\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\n  var barRect = bar.__pictorialBarRect;\n  if (!barRect) {\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\n      z2: 2,\n      shape: rectShape,\n      silent: true,\n      style: {\n        stroke: 'transparent',\n        fill: 'transparent',\n        lineWidth: 0\n      }\n    });\n    barRect.disableMorphing = true;\n    bar.add(barRect);\n  } else {\n    updateAttr(barRect, null, {\n      shape: rectShape\n    }, symbolMeta, isUpdate);\n  }\n}\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\n  // If not clip, symbol will be remove and rebuilt.\n  if (symbolMeta.symbolClip) {\n    var clipPath = bar.__pictorialClipPath;\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\n    var valueDim = opt.valueDim;\n    var animationModel = symbolMeta.animationModel;\n    var dataIndex = symbolMeta.dataIndex;\n    if (clipPath) {\n      graphic.updateProps(clipPath, {\n        shape: clipShape\n      }, animationModel, dataIndex);\n    } else {\n      clipShape[valueDim.wh] = 0;\n      clipPath = new graphic.Rect({\n        shape: clipShape\n      });\n      bar.__pictorialBundle.setClipPath(clipPath);\n      bar.__pictorialClipPath = clipPath;\n      var target = {};\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\n        shape: target\n      }, animationModel, dataIndex);\n    }\n  }\n}\nfunction getItemModel(data, dataIndex) {\n  var itemModel = data.getItemModel(dataIndex);\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\n  itemModel.isAnimationEnabled = isAnimationEnabled;\n  return itemModel;\n}\nfunction getAnimationDelayParams(path) {\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\n  return {\n    index: path.__pictorialAnimationIndex,\n    count: path.__pictorialRepeatTimes\n  };\n}\nfunction isAnimationEnabled() {\n  // `animation` prop can be set on itemModel in pictorial bar chart.\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\n}\nfunction createBar(data, opt, symbolMeta, isUpdate) {\n  // bar is the main element for each data.\n  var bar = new graphic.Group();\n  // bundle is used for location and clip.\n  var bundle = new graphic.Group();\n  bar.add(bundle);\n  bar.__pictorialBundle = bundle;\n  bundle.x = symbolMeta.bundlePosition[0];\n  bundle.y = symbolMeta.bundlePosition[1];\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\n  }\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\n  bar.__pictorialSymbolMeta = symbolMeta;\n  return bar;\n}\nfunction updateBar(bar, opt, symbolMeta) {\n  var animationModel = symbolMeta.animationModel;\n  var dataIndex = symbolMeta.dataIndex;\n  var bundle = bar.__pictorialBundle;\n  graphic.updateProps(bundle, {\n    x: symbolMeta.bundlePosition[0],\n    y: symbolMeta.bundlePosition[1]\n  }, animationModel, dataIndex);\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\n  }\n  createOrUpdateBarRect(bar, symbolMeta, true);\n  createOrUpdateClip(bar, opt, symbolMeta, true);\n}\nfunction removeBar(data, dataIndex, animationModel, bar) {\n  // Not show text when animating\n  var labelRect = bar.__pictorialBarRect;\n  labelRect && labelRect.removeTextContent();\n  var paths = [];\n  eachPath(bar, function (path) {\n    paths.push(path);\n  });\n  bar.__pictorialMainPath && paths.push(bar.__pictorialMainPath);\n  // I do not find proper remove animation for clip yet.\n  bar.__pictorialClipPath && (animationModel = null);\n  zrUtil.each(paths, function (path) {\n    graphic.removeElement(path, {\n      scaleX: 0,\n      scaleY: 0\n    }, animationModel, dataIndex, function () {\n      bar.parent && bar.parent.remove(bar);\n    });\n  });\n  data.setItemGraphicEl(dataIndex, null);\n}\nfunction getShapeStr(data, symbolMeta) {\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\n}\nfunction eachPath(bar, cb, context) {\n  // Do not use Group#eachChild, because it do not support remove.\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\n    el !== bar.__pictorialBarRect && cb.call(context, el);\n  });\n}\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\n  immediateAttrs && el.attr(immediateAttrs);\n  // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\n  if (symbolMeta.symbolClip && !isUpdate) {\n    animationAttrs && el.attr(animationAttrs);\n  } else {\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\n  }\n}\nfunction updateCommon(bar, opt, symbolMeta) {\n  var dataIndex = symbolMeta.dataIndex;\n  var itemModel = symbolMeta.itemModel;\n  // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n  var emphasisModel = itemModel.getModel('emphasis');\n  var emphasisStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n  var blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n  var selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var hoverScale = emphasisModel.get('scale');\n  eachPath(bar, function (path) {\n    if (path instanceof ZRImage) {\n      var pathStyle = path.style;\n      path.useStyle(zrUtil.extend({\n        // TODO other properties like dx, dy ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolMeta.style));\n    } else {\n      path.useStyle(symbolMeta.style);\n    }\n    var emphasisState = path.ensureState('emphasis');\n    emphasisState.style = emphasisStyle;\n    if (hoverScale) {\n      // NOTE: Must after scale is set after updateAttr\n      emphasisState.scaleX = path.scaleX * 1.1;\n      emphasisState.scaleY = path.scaleY * 1.1;\n    }\n    path.ensureState('blur').style = blurStyle;\n    path.ensureState('select').style = selectStyle;\n    cursorStyle && (path.cursor = cursorStyle);\n    path.z2 = symbolMeta.z2;\n  });\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\n  var barRect = bar.__pictorialBarRect;\n  barRect.ignoreClip = true;\n  setLabelStyle(barRect, getLabelStatesModels(itemModel), {\n    labelFetcher: opt.seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(opt.seriesModel.getData(), dataIndex),\n    inheritColor: symbolMeta.style.fill,\n    defaultOpacity: symbolMeta.style.opacity,\n    defaultOutsidePosition: barPositionOutside\n  });\n  toggleHoverEmphasis(bar, focus, blurScope, emphasisModel.get('disabled'));\n}\nfunction toIntTimes(times) {\n  var roundedTimes = Math.round(times);\n  // Escapse accurate error\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\n}\nexport default PictorialBarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar PictorialBarSeriesModel = /** @class */function (_super) {\n  __extends(PictorialBarSeriesModel, _super);\n  function PictorialBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PictorialBarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    _this.defaultSymbol = 'roundRect';\n    return _this;\n  }\n  PictorialBarSeriesModel.prototype.getInitialData = function (option) {\n    // Disable stack.\n    option.stack = null;\n    return _super.prototype.getInitialData.apply(this, arguments);\n  };\n  PictorialBarSeriesModel.type = 'series.pictorialBar';\n  PictorialBarSeriesModel.dependencies = ['grid'];\n  PictorialBarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    symbol: 'circle',\n    symbolSize: null,\n    symbolRotate: null,\n    symbolPosition: null,\n    symbolOffset: null,\n    symbolMargin: null,\n    symbolRepeat: false,\n    symbolRepeatDirection: 'end',\n    symbolClip: false,\n    symbolBoundingData: null,\n    symbolPatternSize: 400,\n    barGap: '-100%',\n    // Pictorial bar do not clip by default because in many cases\n    // xAxis and yAxis are not displayed and it's expected not to clip\n    clip: false,\n    // z can be set in data item, which is z2 actually.\n    // Disable progressive\n    progressive: 0,\n    emphasis: {\n      // By default pictorialBar do not hover scale. Hover scale is not suitable\n      // for the case that both has foreground and background.\n      scale: false\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  });\n  return PictorialBarSeriesModel;\n}(BaseBarSeriesModel);\nexport default PictorialBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport PictorialBarView from './PictorialBarView.js';\nimport PictorialBarSeriesModel from './PictorialBarSeries.js';\nimport { createProgressiveLayout, layout } from '../../layout/barGrid.js';\nimport { curry } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  registers.registerChartView(PictorialBarView);\n  registers.registerSeriesModel(PictorialBarSeriesModel);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, curry(layout, 'pictorialBar'));\n  // Do layout after other overall layout, which can prepare some information.\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('pictorialBar'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { ECPolygon } from '../line/poly.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { bind } from 'zrender/lib/core/util.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar ThemeRiverView = /** @class */function (_super) {\n  __extends(ThemeRiverView, _super);\n  function ThemeRiverView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ThemeRiverView.type;\n    _this._layers = [];\n    return _this;\n  }\n  ThemeRiverView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var self = this;\n    var group = this.group;\n    var layersSeries = seriesModel.getLayerSeries();\n    var layoutInfo = data.getLayout('layoutInfo');\n    var rect = layoutInfo.rect;\n    var boundaryGap = layoutInfo.boundaryGap;\n    group.x = 0;\n    group.y = rect.y + boundaryGap[0];\n    function keyGetter(item) {\n      return item.name;\n    }\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layersSeries, keyGetter, keyGetter);\n    var newLayersGroups = [];\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\n    function process(status, idx, oldIdx) {\n      var oldLayersGroups = self._layers;\n      if (status === 'remove') {\n        group.remove(oldLayersGroups[idx]);\n        return;\n      }\n      var points0 = [];\n      var points1 = [];\n      var style;\n      var indices = layersSeries[idx].indices;\n      var j = 0;\n      for (; j < indices.length; j++) {\n        var layout = data.getItemLayout(indices[j]);\n        var x = layout.x;\n        var y0 = layout.y0;\n        var y = layout.y;\n        points0.push(x, y0);\n        points1.push(x, y0 + y);\n        style = data.getItemVisual(indices[j], 'style');\n      }\n      var polygon;\n      var textLayout = data.getItemLayout(indices[0]);\n      var labelModel = seriesModel.getModel('label');\n      var margin = labelModel.get('margin');\n      var emphasisModel = seriesModel.getModel('emphasis');\n      if (status === 'add') {\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\n        polygon = new ECPolygon({\n          shape: {\n            points: points0,\n            stackedOnPoints: points1,\n            smooth: 0.4,\n            stackedOnSmooth: 0.4,\n            smoothConstraint: false\n          },\n          z2: 0\n        });\n        layerGroup.add(polygon);\n        group.add(layerGroup);\n        if (seriesModel.isAnimationEnabled()) {\n          polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\n            polygon.removeClipPath();\n          }));\n        }\n      } else {\n        var layerGroup = oldLayersGroups[oldIdx];\n        polygon = layerGroup.childAt(0);\n        group.add(layerGroup);\n        newLayersGroups[idx] = layerGroup;\n        graphic.updateProps(polygon, {\n          shape: {\n            points: points0,\n            stackedOnPoints: points1\n          }\n        }, seriesModel);\n        saveOldStyle(polygon);\n      }\n      setLabelStyle(polygon, getLabelStatesModels(seriesModel), {\n        labelDataIndex: indices[j - 1],\n        defaultText: data.getName(indices[j - 1]),\n        inheritColor: style.fill\n      }, {\n        normal: {\n          verticalAlign: 'middle'\n          // align: 'right'\n        }\n      });\n      polygon.setTextConfig({\n        position: null,\n        local: true\n      });\n      var labelEl = polygon.getTextContent();\n      // TODO More label position options.\n      if (labelEl) {\n        labelEl.x = textLayout.x - margin;\n        labelEl.y = textLayout.y0 + textLayout.y / 2;\n      }\n      polygon.useStyle(style);\n      data.setItemGraphicEl(idx, polygon);\n      setStatesStylesFromModel(polygon, seriesModel);\n      toggleHoverEmphasis(polygon, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    }\n    this._layersSeries = layersSeries;\n    this._layers = newLayersGroups;\n  };\n  ThemeRiverView.type = 'themeRiver';\n  return ThemeRiverView;\n}(ChartView);\n;\n// add animation to the view\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      x: rect.x - 50,\n      width: rect.width + 100,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\nexport default ThemeRiverView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData, SINGLE_REFERRING } from '../../util/model.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar DATA_NAME_INDEX = 2;\nvar ThemeRiverSeriesModel = /** @class */function (_super) {\n  __extends(ThemeRiverSeriesModel, _super);\n  function ThemeRiverSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ThemeRiverSeriesModel.type;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  ThemeRiverSeriesModel.prototype.init = function (option) {\n    // eslint-disable-next-line\n    _super.prototype.init.apply(this, arguments);\n    // Put this function here is for the sake of consistency of code style.\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  /**\r\n   * If there is no value of a certain point in the time for some event,set it value to 0.\r\n   *\r\n   * @param {Array} data  initial data in the option\r\n   * @return {Array}\r\n   */\n  ThemeRiverSeriesModel.prototype.fixData = function (data) {\n    var rawDataLength = data.length;\n    /**\r\n     * Make sure every layer data get the same keys.\r\n     * The value index tells which layer has visited.\r\n     * {\r\n     *  2014/01/01: -1\r\n     * }\r\n     */\n    var timeValueKeys = {};\n    // grouped data by name\n    var groupResult = groupData(data, function (item) {\n      if (!timeValueKeys.hasOwnProperty(item[0] + '')) {\n        timeValueKeys[item[0] + ''] = -1;\n      }\n      return item[2];\n    });\n    var layerData = [];\n    groupResult.buckets.each(function (items, key) {\n      layerData.push({\n        name: key,\n        dataList: items\n      });\n    });\n    var layerNum = layerData.length;\n    for (var k = 0; k < layerNum; ++k) {\n      var name_1 = layerData[k].name;\n      for (var j = 0; j < layerData[k].dataList.length; ++j) {\n        var timeValue = layerData[k].dataList[j][0] + '';\n        timeValueKeys[timeValue] = k;\n      }\n      for (var timeValue in timeValueKeys) {\n        if (timeValueKeys.hasOwnProperty(timeValue) && timeValueKeys[timeValue] !== k) {\n          timeValueKeys[timeValue] = k;\n          data[rawDataLength] = [timeValue, 0, name_1];\n          rawDataLength++;\n        }\n      }\n    }\n    return data;\n  };\n  /**\r\n   * @override\r\n   * @param  option  the initial option that user gave\r\n   * @param  ecModel  the model object for themeRiver option\r\n   */\n  ThemeRiverSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var singleAxisModel = this.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    var axisType = singleAxisModel.get('type');\n    // filter the data item with the value of label is undefined\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\n      return dataItem[2] !== undefined;\n    });\n    // ??? TODO design a stage to transfer data for themeRiver and lines?\n    var data = this.fixData(filterData || []);\n    var nameList = [];\n    var nameMap = this.nameMap = zrUtil.createHashMap();\n    var count = 0;\n    for (var i = 0; i < data.length; ++i) {\n      nameList.push(data[i][DATA_NAME_INDEX]);\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\n        count++;\n      }\n    }\n    var dimensions = prepareSeriesDataSchema(data, {\n      coordDimensions: ['single'],\n      dimensionsDefine: [{\n        name: 'time',\n        type: getDimensionTypeByAxis(axisType)\n      }, {\n        name: 'value',\n        type: 'float'\n      }, {\n        name: 'name',\n        type: 'ordinal'\n      }],\n      encodeDefine: {\n        single: 0,\n        value: 1,\n        itemName: 2\n      }\n    }).dimensions;\n    var list = new SeriesData(dimensions, this);\n    list.initData(data);\n    return list;\n  };\n  /**\r\n   * The raw data is divided into multiple layers and each layer\r\n   *     has same name.\r\n   */\n  ThemeRiverSeriesModel.prototype.getLayerSeries = function () {\n    var data = this.getData();\n    var lenCount = data.count();\n    var indexArr = [];\n    for (var i = 0; i < lenCount; ++i) {\n      indexArr[i] = i;\n    }\n    var timeDim = data.mapDimension('single');\n    // data group by name\n    var groupResult = groupData(indexArr, function (index) {\n      return data.get('name', index);\n    });\n    var layerSeries = [];\n    groupResult.buckets.each(function (items, key) {\n      items.sort(function (index1, index2) {\n        return data.get(timeDim, index1) - data.get(timeDim, index2);\n      });\n      layerSeries.push({\n        name: key,\n        indices: items\n      });\n    });\n    return layerSeries;\n  };\n  /**\r\n   * Get data indices for show tooltip content\r\n   */\n  ThemeRiverSeriesModel.prototype.getAxisTooltipData = function (dim, value, baseAxis) {\n    if (!zrUtil.isArray(dim)) {\n      dim = dim ? [dim] : [];\n    }\n    var data = this.getData();\n    var layerSeries = this.getLayerSeries();\n    var indices = [];\n    var layerNum = layerSeries.length;\n    var nestestValue;\n    for (var i = 0; i < layerNum; ++i) {\n      var minDist = Number.MAX_VALUE;\n      var nearestIdx = -1;\n      var pointNum = layerSeries[i].indices.length;\n      for (var j = 0; j < pointNum; ++j) {\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\n        var dist = Math.abs(theValue - value);\n        if (dist <= minDist) {\n          nestestValue = theValue;\n          minDist = dist;\n          nearestIdx = layerSeries[i].indices[j];\n        }\n      }\n      indices.push(nearestIdx);\n    }\n    return {\n      dataIndices: indices,\n      nestestValue: nestestValue\n    };\n  };\n  ThemeRiverSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var name = data.getName(dataIndex);\n    var value = data.get(data.mapDimension('value'), dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n  ThemeRiverSeriesModel.type = 'series.themeRiver';\n  ThemeRiverSeriesModel.dependencies = ['singleAxis'];\n  ThemeRiverSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'singleAxis',\n    // gap in axis's orthogonal orientation\n    boundaryGap: ['10%', '10%'],\n    // legendHoverLink: true,\n    singleAxisIndex: 0,\n    animationEasing: 'linear',\n    label: {\n      margin: 4,\n      show: true,\n      position: 'left',\n      fontSize: 11\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return ThemeRiverSeriesModel;\n}(SeriesModel);\nexport default ThemeRiverSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nexport default function themeRiverLayout(ecModel, api) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var single = seriesModel.coordinateSystem;\n    var layoutInfo = {};\n    // use the axis boundingRect for view\n    var rect = single.getRect();\n    layoutInfo.rect = rect;\n    var boundaryGap = seriesModel.get('boundaryGap');\n    var axis = single.getAxis();\n    layoutInfo.boundaryGap = boundaryGap;\n    if (axis.orient === 'horizontal') {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, height);\n    } else {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, width);\n    }\n    data.setLayout('layoutInfo', layoutInfo);\n  });\n}\n/**\r\n * The layout information about themeriver\r\n *\r\n * @param data  data in the series\r\n * @param seriesModel  the model object of themeRiver series\r\n * @param height  value used to compute every series height\r\n */\nfunction doThemeRiverLayout(data, seriesModel, height) {\n  if (!data.count()) {\n    return;\n  }\n  var coordSys = seriesModel.coordinateSystem;\n  // the data in each layer are organized into a series.\n  var layerSeries = seriesModel.getLayerSeries();\n  // the points in each layer.\n  var timeDim = data.mapDimension('single');\n  var valueDim = data.mapDimension('value');\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\n    return zrUtil.map(singleLayer.indices, function (idx) {\n      var pt = coordSys.dataToPoint(data.get(timeDim, idx));\n      pt[1] = data.get(valueDim, idx);\n      return pt;\n    });\n  });\n  var base = computeBaseline(layerPoints);\n  var baseLine = base.y0;\n  var ky = height / base.max;\n  // set layout information for each item.\n  var n = layerSeries.length;\n  var m = layerSeries[0].indices.length;\n  var baseY0;\n  for (var j = 0; j < m; ++j) {\n    baseY0 = baseLine[j] * ky;\n    data.setItemLayout(layerSeries[0].indices[j], {\n      layerIndex: 0,\n      x: layerPoints[0][j][0],\n      y0: baseY0,\n      y: layerPoints[0][j][1] * ky\n    });\n    for (var i = 1; i < n; ++i) {\n      baseY0 += layerPoints[i - 1][j][1] * ky;\n      data.setItemLayout(layerSeries[i].indices[j], {\n        layerIndex: i,\n        x: layerPoints[i][j][0],\n        y0: baseY0,\n        y: layerPoints[i][j][1] * ky\n      });\n    }\n  }\n}\n/**\r\n * Compute the baseLine of the rawdata\r\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\r\n *\r\n * @param  data  the points in each layer\r\n */\nfunction computeBaseline(data) {\n  var layerNum = data.length;\n  var pointNum = data[0].length;\n  var sums = [];\n  var y0 = [];\n  var max = 0;\n  for (var i = 0; i < pointNum; ++i) {\n    var temp = 0;\n    for (var j = 0; j < layerNum; ++j) {\n      temp += data[j][i][1];\n    }\n    if (temp > max) {\n      max = temp;\n    }\n    sums.push(temp);\n  }\n  for (var k = 0; k < pointNum; ++k) {\n    y0[k] = (max - sums[k]) / 2;\n  }\n  max = 0;\n  for (var l = 0; l < pointNum; ++l) {\n    var sum = sums[l] + y0[l];\n    if (sum > max) {\n      max = sum;\n    }\n  }\n  return {\n    y0: y0,\n    max: max\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport ThemeRiverView from './ThemeRiverView.js';\nimport ThemeRiverSeriesModel from './ThemeRiverSeries.js';\nimport themeRiverLayout from './themeRiverLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(ThemeRiverView);\n  registers.registerSeriesModel(ThemeRiverSeriesModel);\n  registers.registerLayout(themeRiverLayout);\n  registers.registerProcessor(dataFilter('themeRiver'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, SPECIAL_STATES, DISPLAY_STATES } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nimport { isRadianAroundZero } from '../../util/number.js';\nvar DEFAULT_SECTOR_Z = 2;\nvar DEFAULT_TEXT_Z = 4;\n/**\r\n * Sunburstce of Sunburst including Sector, Label, LabelLine\r\n */\nvar SunburstPiece = /** @class */function (_super) {\n  __extends(SunburstPiece, _super);\n  function SunburstPiece(node, seriesModel, ecModel, api) {\n    var _this = _super.call(this) || this;\n    _this.z2 = DEFAULT_SECTOR_Z;\n    _this.textConfig = {\n      inside: true\n    };\n    getECData(_this).seriesIndex = seriesModel.seriesIndex;\n    var text = new graphic.Text({\n      z2: DEFAULT_TEXT_Z,\n      silent: node.getModel().get(['label', 'silent'])\n    });\n    _this.setTextContent(text);\n    _this.updateData(true, node, seriesModel, ecModel, api);\n    return _this;\n  }\n  SunburstPiece.prototype.updateData = function (firstCreate, node,\n  // state: 'emphasis' | 'normal' | 'highlight' | 'downplay',\n  seriesModel, ecModel, api) {\n    this.node = node;\n    node.piece = this;\n    seriesModel = seriesModel || this._seriesModel;\n    ecModel = ecModel || this._ecModel;\n    var sector = this;\n    getECData(sector).dataIndex = node.dataIndex;\n    var itemModel = node.getModel();\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = node.getLayout();\n    var sectorShape = zrUtil.extend({}, layout);\n    sectorShape.label = null;\n    var normalStyle = node.getVisual('style');\n    normalStyle.lineJoin = 'bevel';\n    var decal = node.getVisual('decal');\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    zrUtil.extend(sectorShape, cornerRadius);\n    zrUtil.each(SPECIAL_STATES, function (stateName) {\n      var state = sector.ensureState(stateName);\n      var itemStyleModel = itemModel.getModel([stateName, 'itemStyle']);\n      state.style = itemStyleModel.getItemStyle();\n      // border radius\n      var cornerRadius = getSectorCornerRadius(itemStyleModel, sectorShape);\n      if (cornerRadius) {\n        state.shape = cornerRadius;\n      }\n    });\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, node.dataIndex);\n    } else {\n      // Disable animation for gradient since no interpolation method\n      // is supported for gradient\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel);\n      saveOldStyle(sector);\n    }\n    sector.useStyle(normalStyle);\n    this._updateLabel(seriesModel);\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n    this._seriesModel = seriesModel || this._seriesModel;\n    this._ecModel = ecModel || this._ecModel;\n    var focus = emphasisModel.get('focus');\n    var focusOrIndices = focus === 'relative' ? zrUtil.concatArray(node.getAncestorsIndices(), node.getDescendantIndices()) : focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : focus;\n    toggleHoverEmphasis(this, focusOrIndices, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  SunburstPiece.prototype._updateLabel = function (seriesModel) {\n    var _this = this;\n    var itemModel = this.node.getModel();\n    var normalLabelModel = itemModel.getModel('label');\n    var layout = this.node.getLayout();\n    var angle = layout.endAngle - layout.startAngle;\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var sector = this;\n    var label = sector.getTextContent();\n    var dataIndex = this.node.dataIndex;\n    var labelMinAngle = normalLabelModel.get('minAngle') / 180 * Math.PI;\n    var isNormalShown = normalLabelModel.get('show') && !(labelMinAngle != null && Math.abs(angle) < labelMinAngle);\n    label.ignore = !isNormalShown;\n    // TODO use setLabelStyle\n    zrUtil.each(DISPLAY_STATES, function (stateName) {\n      var labelStateModel = stateName === 'normal' ? itemModel.getModel('label') : itemModel.getModel([stateName, 'label']);\n      var isNormal = stateName === 'normal';\n      var state = isNormal ? label : label.ensureState(stateName);\n      var text = seriesModel.getFormattedLabel(dataIndex, stateName);\n      if (isNormal) {\n        text = text || _this.node.name;\n      }\n      state.style = createTextStyle(labelStateModel, {}, null, stateName !== 'normal', true);\n      if (text) {\n        state.style.text = text;\n      }\n      // Not displaying text when angle is too small\n      var isShown = labelStateModel.get('show');\n      if (isShown != null && !isNormal) {\n        state.ignore = !isShown;\n      }\n      var labelPosition = getLabelAttr(labelStateModel, 'position');\n      var sectorState = isNormal ? sector : sector.states[stateName];\n      var labelColor = sectorState.style.fill;\n      sectorState.textConfig = {\n        outsideFill: labelStateModel.get('color') === 'inherit' ? labelColor : null,\n        inside: labelPosition !== 'outside'\n      };\n      var r;\n      var labelPadding = getLabelAttr(labelStateModel, 'distance') || 0;\n      var textAlign = getLabelAttr(labelStateModel, 'align');\n      var rotateType = getLabelAttr(labelStateModel, 'rotate');\n      var flipStartAngle = Math.PI * 0.5;\n      var flipEndAngle = Math.PI * 1.5;\n      var midAngleNormal = normalizeRadian(rotateType === 'tangential' ? Math.PI / 2 - midAngle : midAngle);\n      // For text that is up-side down, rotate 180 degrees to make sure\n      // it's readable\n      var needsFlip = midAngleNormal > flipStartAngle && !isRadianAroundZero(midAngleNormal - flipStartAngle) && midAngleNormal < flipEndAngle;\n      if (labelPosition === 'outside') {\n        r = layout.r + labelPadding;\n        textAlign = needsFlip ? 'right' : 'left';\n      } else {\n        if (!textAlign || textAlign === 'center') {\n          // Put label in the center if it's a circle\n          if (angle === 2 * Math.PI && layout.r0 === 0) {\n            r = 0;\n          } else {\n            r = (layout.r + layout.r0) / 2;\n          }\n          textAlign = 'center';\n        } else if (textAlign === 'left') {\n          r = layout.r0 + labelPadding;\n          textAlign = needsFlip ? 'right' : 'left';\n        } else if (textAlign === 'right') {\n          r = layout.r - labelPadding;\n          textAlign = needsFlip ? 'left' : 'right';\n        }\n      }\n      state.style.align = textAlign;\n      state.style.verticalAlign = getLabelAttr(labelStateModel, 'verticalAlign') || 'middle';\n      state.x = r * dx + layout.cx;\n      state.y = r * dy + layout.cy;\n      var rotate = 0;\n      if (rotateType === 'radial') {\n        rotate = normalizeRadian(-midAngle) + (needsFlip ? Math.PI : 0);\n      } else if (rotateType === 'tangential') {\n        rotate = normalizeRadian(Math.PI / 2 - midAngle) + (needsFlip ? Math.PI : 0);\n      } else if (zrUtil.isNumber(rotateType)) {\n        rotate = rotateType * Math.PI / 180;\n      }\n      state.rotation = normalizeRadian(rotate);\n    });\n    function getLabelAttr(model, name) {\n      var stateAttr = model.get(name);\n      if (stateAttr == null) {\n        return normalLabelModel.get(name);\n      }\n      return stateAttr;\n    }\n    label.dirtyStyle();\n  };\n  return SunburstPiece;\n}(graphic.Sector);\nexport default SunburstPiece;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog } from '../../util/log.js';\nimport { retrieveTargetInfo, aboveViewRoot } from '../helper/treeHelper.js';\nexport var ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\nvar HIGHLIGHT_ACTION = 'sunburstHighlight';\nvar UNHIGHLIGHT_ACTION = 'sunburstUnhighlight';\nexport function installSunburstAction(registers) {\n  registers.registerAction({\n    type: ROOT_TO_NODE_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleRootToNode);\n    function handleRootToNode(model, index) {\n      var targetInfo = retrieveTargetInfo(payload, [ROOT_TO_NODE_ACTION], model);\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n        if (originViewRoot) {\n          payload.direction = aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n  registers.registerAction({\n    type: HIGHLIGHT_ACTION,\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    // Clone\n    payload = extend({}, payload);\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleHighlight);\n    function handleHighlight(model) {\n      var targetInfo = retrieveTargetInfo(payload, [HIGHLIGHT_ACTION], model);\n      if (targetInfo) {\n        payload.dataIndex = targetInfo.node.dataIndex;\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstHighlight', 'highlight');\n    }\n    // Fast forward action\n    api.dispatchAction(extend(payload, {\n      type: 'highlight'\n    }));\n  });\n  registers.registerAction({\n    type: UNHIGHLIGHT_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel, api) {\n    payload = extend({}, payload);\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstUnhighlight', 'downplay');\n    }\n    api.dispatchAction(extend(payload, {\n      type: 'downplay'\n    }));\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport SunburstPiece from './SunburstPiece.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport { ROOT_TO_NODE_ACTION } from './sunburstAction.js';\nimport { windowOpen } from '../../util/format.js';\nvar SunburstView = /** @class */function (_super) {\n  __extends(SunburstView, _super);\n  function SunburstView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SunburstView.type;\n    return _this;\n  }\n  SunburstView.prototype.render = function (seriesModel, ecModel, api,\n  // @ts-ignore\n  payload) {\n    var self = this;\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var data = seriesModel.getData();\n    var virtualRoot = data.tree.root;\n    var newRoot = seriesModel.getViewRoot();\n    var group = this.group;\n    var renderLabelForZeroData = seriesModel.get('renderLabelForZeroData');\n    var newChildren = [];\n    newRoot.eachNode(function (node) {\n      newChildren.push(node);\n    });\n    var oldChildren = this._oldChildren || [];\n    dualTravel(newChildren, oldChildren);\n    renderRollUp(virtualRoot, newRoot);\n    this._initEvents();\n    this._oldChildren = newChildren;\n    function dualTravel(newChildren, oldChildren) {\n      if (newChildren.length === 0 && oldChildren.length === 0) {\n        return;\n      }\n      new DataDiffer(oldChildren, newChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n      function getKey(node) {\n        return node.getId();\n      }\n      function processNode(newIdx, oldIdx) {\n        var newNode = newIdx == null ? null : newChildren[newIdx];\n        var oldNode = oldIdx == null ? null : oldChildren[oldIdx];\n        doRenderNode(newNode, oldNode);\n      }\n    }\n    function doRenderNode(newNode, oldNode) {\n      if (!renderLabelForZeroData && newNode && !newNode.getValue()) {\n        // Not render data with value 0\n        newNode = null;\n      }\n      if (newNode !== virtualRoot && oldNode !== virtualRoot) {\n        if (oldNode && oldNode.piece) {\n          if (newNode) {\n            // Update\n            oldNode.piece.updateData(false, newNode, seriesModel, ecModel, api);\n            // For tooltip\n            data.setItemGraphicEl(newNode.dataIndex, oldNode.piece);\n          } else {\n            // Remove\n            removeNode(oldNode);\n          }\n        } else if (newNode) {\n          // Add\n          var piece = new SunburstPiece(newNode, seriesModel, ecModel, api);\n          group.add(piece);\n          // For tooltip\n          data.setItemGraphicEl(newNode.dataIndex, piece);\n        }\n      }\n    }\n    function removeNode(node) {\n      if (!node) {\n        return;\n      }\n      if (node.piece) {\n        group.remove(node.piece);\n        node.piece = null;\n      }\n    }\n    function renderRollUp(virtualRoot, viewRoot) {\n      if (viewRoot.depth > 0) {\n        // Render\n        if (self.virtualPiece) {\n          // Update\n          self.virtualPiece.updateData(false, virtualRoot, seriesModel, ecModel, api);\n        } else {\n          // Add\n          self.virtualPiece = new SunburstPiece(virtualRoot, seriesModel, ecModel, api);\n          group.add(self.virtualPiece);\n        }\n        // TODO event scope\n        viewRoot.piece.off('click');\n        self.virtualPiece.on('click', function (e) {\n          self._rootToNode(viewRoot.parentNode);\n        });\n      } else if (self.virtualPiece) {\n        // Remove\n        group.remove(self.virtualPiece);\n        self.virtualPiece = null;\n      }\n    }\n  };\n  /**\r\n   * @private\r\n   */\n  SunburstView.prototype._initEvents = function () {\n    var _this = this;\n    this.group.off('click');\n    this.group.on('click', function (e) {\n      var targetFound = false;\n      var viewRoot = _this.seriesModel.getViewRoot();\n      viewRoot.eachNode(function (node) {\n        if (!targetFound && node.piece && node.piece === e.target) {\n          var nodeClick = node.getModel().get('nodeClick');\n          if (nodeClick === 'rootToNode') {\n            _this._rootToNode(node);\n          } else if (nodeClick === 'link') {\n            var itemModel = node.getModel();\n            var link = itemModel.get('link');\n            if (link) {\n              var linkTarget = itemModel.get('target', true) || '_blank';\n              windowOpen(link, linkTarget);\n            }\n          }\n          targetFound = true;\n        }\n      });\n    });\n  };\n  /**\r\n   * @private\r\n   */\n  SunburstView.prototype._rootToNode = function (node) {\n    if (node !== this.seriesModel.getViewRoot()) {\n      this.api.dispatchAction({\n        type: ROOT_TO_NODE_ACTION,\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        targetNode: node\n      });\n    }\n  };\n  /**\r\n   * @implement\r\n   */\n  SunburstView.prototype.containPoint = function (point, seriesModel) {\n    var treeRoot = seriesModel.getData();\n    var itemLayout = treeRoot.getItemLayout(0);\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n  SunburstView.type = 'sunburst';\n  return SunburstView;\n}(ChartView);\nexport default SunburstView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport Model from '../../model/Model.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\nvar SunburstSeriesModel = /** @class */function (_super) {\n  __extends(SunburstSeriesModel, _super);\n  function SunburstSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SunburstSeriesModel.type;\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n  SunburstSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levelModels = this._levelModels = zrUtil.map(option.levels || [], function (levelDefine) {\n      return new Model(levelDefine, this, ecModel);\n    }, this);\n    // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n    var tree = Tree.createTree(root, this, beforeLink);\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth];\n        levelModel && (model.parentModel = levelModel);\n        return model;\n      });\n    }\n    return tree.data;\n  };\n  SunburstSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /*\r\n   * @override\r\n   */\n  SunburstSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n  SunburstSeriesModel.prototype.getLevelModel = function (node) {\n    return this._levelModels && this._levelModels[node.depth];\n  };\n  SunburstSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n  SunburstSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n  SunburstSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n  SunburstSeriesModel.type = 'series.sunburst';\n  SunburstSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // 'rootToNode', 'link', or false\n    nodeClick: 'rootToNode',\n    renderLabelForZeroData: false,\n    label: {\n      // could be: 'radial', 'tangential', or 'none'\n      rotate: 'radial',\n      show: true,\n      opacity: 1,\n      // 'left' is for inner side of inside, and 'right' is for outer\n      // side for inside\n      align: 'center',\n      position: 'inside',\n      distance: 5,\n      silent: true\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderColor: 'white',\n      borderType: 'solid',\n      shadowBlur: 0,\n      shadowColor: 'rgba(0, 0, 0, 0.2)',\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    emphasis: {\n      focus: 'descendant'\n    },\n    blur: {\n      itemStyle: {\n        opacity: 0.2\n      },\n      label: {\n        opacity: 0.1\n      }\n    },\n    // Animation type can be expansion, scale.\n    animationType: 'expansion',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    data: [],\n    /**\r\n     * Sort order.\r\n     *\r\n     * Valid values: 'desc', 'asc', null, or callback function.\r\n     * 'desc' and 'asc' for descend and ascendant order;\r\n     * null for not sorting;\r\n     * example of callback function:\r\n     * function(nodeA, nodeB) {\r\n     *     return nodeA.getValue() - nodeB.getValue();\r\n     * }\r\n     */\n    sort: 'desc'\n  };\n  return SunburstSeriesModel;\n}(SeriesModel);\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    // TODO First value of array must be a number\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  }\n  // Value should not less than 0.\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\nexport default SunburstSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { parsePercent } from '../../util/number.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\n// let PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\nexport default function sunburstLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var virtualRoot = seriesModel.getData().tree.root;\n    var treeRoot = seriesModel.getViewRoot();\n    var rootDepth = treeRoot.depth;\n    var sort = seriesModel.get('sort');\n    if (sort != null) {\n      initChildren(treeRoot, sort);\n    }\n    var validDataCount = 0;\n    zrUtil.each(treeRoot.children, function (child) {\n      !isNaN(child.getValue()) && validDataCount++;\n    });\n    var sum = treeRoot.getValue();\n    // Sum may be 0\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var renderRollupNode = treeRoot.depth > 0;\n    var levels = treeRoot.height - (renderRollupNode ? -1 : 1);\n    var rPerLevel = (r - r0) / (levels || 1);\n    var clockwise = seriesModel.get('clockwise');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum');\n    // In the case some sector angle is smaller than minAngle\n    // let restAngle = PI2;\n    // let valueSumLargerThanMinAngle = 0;\n    var dir = clockwise ? 1 : -1;\n    /**\r\n     * Render a tree\r\n     * @return increased angle\r\n     */\n    var renderNode = function (node, startAngle) {\n      if (!node) {\n        return;\n      }\n      var endAngle = startAngle;\n      // Render self\n      if (node !== virtualRoot) {\n        // Tree node is virtual, so it doesn't need to be drawn\n        var value = node.getValue();\n        var angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n        if (angle < minAngle) {\n          angle = minAngle;\n          // restAngle -= minAngle;\n        }\n        // else {\n        //     valueSumLargerThanMinAngle += value;\n        // }\n        endAngle = startAngle + dir * angle;\n        var depth = node.depth - rootDepth - (renderRollupNode ? -1 : 1);\n        var rStart = r0 + rPerLevel * depth;\n        var rEnd = r0 + rPerLevel * (depth + 1);\n        var levelModel = seriesModel.getLevelModel(node);\n        if (levelModel) {\n          var r0_1 = levelModel.get('r0', true);\n          var r_1 = levelModel.get('r', true);\n          var radius_1 = levelModel.get('radius', true);\n          if (radius_1 != null) {\n            r0_1 = radius_1[0];\n            r_1 = radius_1[1];\n          }\n          r0_1 != null && (rStart = parsePercent(r0_1, size / 2));\n          r_1 != null && (rEnd = parsePercent(r_1, size / 2));\n        }\n        node.setLayout({\n          angle: angle,\n          startAngle: startAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: rStart,\n          r: rEnd\n        });\n      }\n      // Render children\n      if (node.children && node.children.length) {\n        // currentAngle = startAngle;\n        var siblingAngle_1 = 0;\n        zrUtil.each(node.children, function (node) {\n          siblingAngle_1 += renderNode(node, startAngle + siblingAngle_1);\n        });\n      }\n      return endAngle - startAngle;\n    };\n    // Virtual root node for roll up\n    if (renderRollupNode) {\n      var rStart = r0;\n      var rEnd = r0 + rPerLevel;\n      var angle = Math.PI * 2;\n      virtualRoot.setLayout({\n        angle: angle,\n        startAngle: startAngle,\n        endAngle: startAngle + angle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: rStart,\n        r: rEnd\n      });\n    }\n    renderNode(treeRoot, startAngle);\n  });\n}\n/**\r\n * Init node children by order and update visual\r\n */\nfunction initChildren(node, sortOrder) {\n  var children = node.children || [];\n  node.children = sort(children, sortOrder);\n  // Init children recursively\n  if (children.length) {\n    zrUtil.each(node.children, function (child) {\n      initChildren(child, sortOrder);\n    });\n  }\n}\n/**\r\n * Sort children nodes\r\n *\r\n * @param {TreeNode[]}               children children of node to be sorted\r\n * @param {string | function | null} sort sort method\r\n *                                   See SunburstSeries.js for details.\r\n */\nfunction sort(children, sortOrder) {\n  if (zrUtil.isFunction(sortOrder)) {\n    var sortTargets = zrUtil.map(children, function (child, idx) {\n      var value = child.getValue();\n      return {\n        params: {\n          depth: child.depth,\n          height: child.height,\n          dataIndex: child.dataIndex,\n          getValue: function () {\n            return value;\n          }\n        },\n        index: idx\n      };\n    });\n    sortTargets.sort(function (a, b) {\n      return sortOrder(a.params, b.params);\n    });\n    return zrUtil.map(sortTargets, function (target) {\n      return children[target.index];\n    });\n  } else {\n    var isAsc_1 = sortOrder === 'asc';\n    return children.sort(function (a, b) {\n      var diff = (a.getValue() - b.getValue()) * (isAsc_1 ? 1 : -1);\n      return diff === 0 ? (a.dataIndex - b.dataIndex) * (isAsc_1 ? -1 : 1) : diff;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { lift } from 'zrender/lib/tool/color.js';\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function sunburstVisual(ecModel) {\n  var paletteScope = {};\n  // Default color strategy\n  function pickColor(node, seriesModel, treeHeight) {\n    // Choose color from palette based on the first level.\n    var current = node;\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n    var color = seriesModel.getColorFromPalette(current.name || current.dataIndex + '', paletteScope);\n    if (node.depth > 1 && isString(color)) {\n      // Lighter on the deeper level.\n      color = lift(color, (node.depth - 1) / (treeHeight - 1) * 0.5);\n    }\n    return color;\n  }\n  ecModel.eachSeriesByType('sunburst', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel();\n      var style = model.getModel('itemStyle').getItemStyle();\n      if (!style.fill) {\n        style.fill = pickColor(node, seriesModel, tree.root.height);\n      }\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport SunburstView from './SunburstView.js';\nimport SunburstSeriesModel from './SunburstSeries.js';\nimport sunburstLayout from './sunburstLayout.js';\nimport sunburstVisual from './sunburstVisual.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport { installSunburstAction } from './sunburstAction.js';\nexport function install(registers) {\n  registers.registerChartView(SunburstView);\n  registers.registerSeriesModel(SunburstSeriesModel);\n  registers.registerLayout(curry(sunburstLayout, 'sunburst'));\n  registers.registerProcessor(curry(dataFilter, 'sunburst'));\n  registers.registerVisual(sunburstVisual);\n  installSunburstAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { makeInner } from '../../util/model.js';\nimport SeriesModel from '../../model/Series.js';\n// Also compat with ec4, where\n// `visual('color') visual('borderColor')` is supported.\nexport var STYLE_VISUAL_TYPE = {\n  color: 'fill',\n  borderColor: 'stroke'\n};\nexport var NON_STYLE_VISUAL_PROPS = {\n  symbol: 1,\n  symbolSize: 1,\n  symbolKeepAspect: 1,\n  legendIcon: 1,\n  visualMeta: 1,\n  liftZ: 1,\n  decal: 1\n};\n;\nexport var customInnerStore = makeInner();\nvar CustomSeriesModel = /** @class */function (_super) {\n  __extends(CustomSeriesModel, _super);\n  function CustomSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CustomSeriesModel.type;\n    return _this;\n  }\n  CustomSeriesModel.prototype.optionUpdated = function () {\n    this.currentZLevel = this.get('zlevel', true);\n    this.currentZ = this.get('z', true);\n  };\n  CustomSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this);\n  };\n  CustomSeriesModel.prototype.getDataParams = function (dataIndex, dataType, el) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n    el && (params.info = customInnerStore(el).info);\n    return params;\n  };\n  CustomSeriesModel.type = 'series.custom';\n  CustomSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  CustomSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Custom series will not clip by default.\n    // Some case will use custom series to draw label\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\n    clip: false\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n  };\n  return CustomSeriesModel;\n}(SeriesModel);\nexport default CustomSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { hasOwn, assert, isString, retrieve2, retrieve3, defaults, each, indexOf } from 'zrender/lib/core/util.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport { setDefaultStateProxy, toggleHoverEmphasis } from '../../util/states.js';\nimport * as labelStyleHelper from '../../label/labelStyle.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { getLayoutOnAxis } from '../../layout/barGrid.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport prepareCartesian2d from '../../coord/cartesian/prepareCustom.js';\nimport prepareGeo from '../../coord/geo/prepareCustom.js';\nimport prepareSingleAxis from '../../coord/single/prepareCustom.js';\nimport preparePolar from '../../coord/polar/prepareCustom.js';\nimport prepareCalendar from '../../coord/calendar/prepareCustom.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { convertToEC4StyleForCustomSerise, isEC4CompatibleStyle, convertFromEC4CompatibleStyle, warnDeprecated } from '../../util/styleCompat.js';\nimport { throwError } from '../../util/log.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { STYLE_VISUAL_TYPE, NON_STYLE_VISUAL_PROPS, customInnerStore } from './CustomSeries.js';\nimport { applyLeaveTransition, applyUpdateTransition } from '../../animation/customGraphicTransition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal';\nvar BLUR = 'blur';\nvar SELECT = 'select';\nvar STATES = [NORMAL, EMPHASIS, BLUR, SELECT];\nvar PATH_ITEM_STYLE = {\n  normal: ['itemStyle'],\n  emphasis: [EMPHASIS, 'itemStyle'],\n  blur: [BLUR, 'itemStyle'],\n  select: [SELECT, 'itemStyle']\n};\nvar PATH_LABEL = {\n  normal: ['label'],\n  emphasis: [EMPHASIS, 'label'],\n  blur: [BLUR, 'label'],\n  select: [SELECT, 'label']\n};\nvar DEFAULT_TRANSITION = ['x', 'y'];\n// Use prefix to avoid index to be the same as el.name,\n// which will cause weird update animation.\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\nvar attachedTxInfoTmp = {\n  normal: {},\n  emphasis: {},\n  blur: {},\n  select: {}\n};\n/**\r\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\r\n * of each coordinate systems are not required by each coordinate systems directly, but\r\n * required by the module `custom`.\r\n *\r\n * prepareInfoForCustomSeries {Function}: optional\r\n *     @return {Object} {coordSys: {...}, api: {\r\n *         coord: function (data, clamp) {}, // return point in global.\r\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\r\n *     }}\r\n */\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  single: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n};\nfunction isPath(el) {\n  return el instanceof graphicUtil.Path;\n}\nfunction isDisplayable(el) {\n  return el instanceof Displayable;\n}\nfunction copyElement(sourceEl, targetEl) {\n  targetEl.copyTransform(sourceEl);\n  if (isDisplayable(targetEl) && isDisplayable(sourceEl)) {\n    targetEl.setStyle(sourceEl.style);\n    targetEl.z = sourceEl.z;\n    targetEl.z2 = sourceEl.z2;\n    targetEl.zlevel = sourceEl.zlevel;\n    targetEl.invisible = sourceEl.invisible;\n    targetEl.ignore = sourceEl.ignore;\n    if (isPath(targetEl) && isPath(sourceEl)) {\n      targetEl.setShape(sourceEl.shape);\n    }\n  }\n}\nvar CustomChartView = /** @class */function (_super) {\n  __extends(CustomChartView, _super);\n  function CustomChartView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CustomChartView.type;\n    return _this;\n  }\n  CustomChartView.prototype.render = function (customSeries, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    if (!oldData) {\n      // Previous render is incremental render or first render.\n      // Needs remove the incremental rendered elements.\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdateItem(api, null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && applyLeaveTransition(el, customInnerStore(el).option, customSeries);\n    }).update(function (newIdx, oldIdx) {\n      var oldEl = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdateItem(api, oldEl, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).execute();\n    // Do clipping\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n    this._data = data;\n  };\n  CustomChartView.prototype.incrementalPrepareRender = function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  };\n  CustomChartView.prototype.incrementalRender = function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    var progressiveEls = this._progressiveEls = [];\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdateItem(null, null, idx, renderItem(idx, payload), customSeries, this.group, data);\n      if (el) {\n        el.traverse(setIncrementalAndHoverLayer);\n        progressiveEls.push(el);\n      }\n    }\n  };\n  CustomChartView.prototype.eachRendered = function (cb) {\n    graphicUtil.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  CustomChartView.prototype.filterForExposedEvent = function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    }\n    // Enable to give a name on a group made by `renderItem`, and listen\n    // events that are triggered by its descendents.\n    while ((targetEl = targetEl.__hostTarget || targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n    return false;\n  };\n  CustomChartView.type = 'custom';\n  return CustomChartView;\n}(ChartView);\nexport default CustomChartView;\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el;\n  // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  if (graphicType === 'path') {\n    var shape = elOption.shape;\n    // Using pathRect brings convenience to users sacle svg path.\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape);\n    // Path is also used for icon, so layout 'center' by default.\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    customInnerStore(el).customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    customInnerStore(el).customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({});\n    // customInnerStore(el).customText = (elOption.style as TextStyleProps).text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n    if (!Clz) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'graphic type \"' + graphicType + '\" can not be found.';\n      }\n      throwError(errMsg);\n    }\n    el = new Clz();\n  }\n  customInnerStore(el).customGraphicType = graphicType;\n  el.name = elOption.name;\n  // Compat ec4: the default z2 lift is 1. If changing the number,\n  // some cases probably be broken: hierarchy layout along z, like circle packing,\n  // where emphasis only intending to modify color/border rather than lift z2.\n  el.z2EmphasisLift = 1;\n  el.z2SelectLift = 1;\n  return el;\n}\nfunction updateElNormal(\n// Can be null/undefined\napi, el, dataIndex, elOption, attachedTxInfo, seriesModel, isInit) {\n  // Stop and restore before update any other attributes.\n  stopPreviousKeyframeAnimationAndRestore(el);\n  var txCfgOpt = attachedTxInfo && attachedTxInfo.normal.cfg;\n  if (txCfgOpt) {\n    // PENDING: whether use user object directly rather than clone?\n    // TODO:5.0 textConfig transition animation?\n    el.setTextConfig(txCfgOpt);\n  }\n  // Default transition ['x', 'y']\n  if (elOption && elOption.transition == null) {\n    elOption.transition = DEFAULT_TRANSITION;\n  }\n  // Do some normalization on style.\n  var styleOpt = elOption && elOption.style;\n  if (styleOpt) {\n    if (el.type === 'text') {\n      var textOptionStyle = styleOpt;\n      // Compatible with ec4: if `textFill` or `textStroke` exists use them.\n      hasOwn(textOptionStyle, 'textFill') && (textOptionStyle.fill = textOptionStyle.textFill);\n      hasOwn(textOptionStyle, 'textStroke') && (textOptionStyle.stroke = textOptionStyle.textStroke);\n    }\n    var decalPattern = void 0;\n    var decalObj = isPath(el) ? styleOpt.decal : null;\n    if (api && decalObj) {\n      decalObj.dirty = true;\n      decalPattern = createOrUpdatePatternFromDecal(decalObj, api);\n    }\n    // Always overwrite in case user specify this prop.\n    styleOpt.__decalPattern = decalPattern;\n  }\n  if (isDisplayable(el)) {\n    if (styleOpt) {\n      var decalPattern = styleOpt.__decalPattern;\n      if (decalPattern) {\n        styleOpt.decal = decalPattern;\n      }\n    }\n  }\n  applyUpdateTransition(el, elOption, seriesModel, {\n    dataIndex: dataIndex,\n    isInit: isInit,\n    clearStyle: true\n  });\n  applyKeyframeAnimation(el, elOption.keyframeAnimation, seriesModel);\n}\nfunction updateElOnState(state, el, elStateOpt, styleOpt, attachedTxInfo) {\n  var elDisplayable = el.isGroup ? null : el;\n  var txCfgOpt = attachedTxInfo && attachedTxInfo[state].cfg;\n  // PENDING:5.0 support customize scale change and transition animation?\n  if (elDisplayable) {\n    // By default support auto lift color when hover whether `emphasis` specified.\n    var stateObj = elDisplayable.ensureState(state);\n    if (styleOpt === false) {\n      var existingEmphasisState = elDisplayable.getState(state);\n      if (existingEmphasisState) {\n        existingEmphasisState.style = null;\n      }\n    } else {\n      // style is needed to enable default emphasis.\n      stateObj.style = styleOpt || null;\n    }\n    // If `elOption.styleEmphasis` or `elOption.emphasis.style` is `false`,\n    // remove hover style.\n    // If `elOption.textConfig` or `elOption.emphasis.textConfig` is null/undefined, it does not\n    // make sense. So for simplicity, we do not ditinguish `hasOwnProperty` and null/undefined.\n    if (txCfgOpt) {\n      stateObj.textConfig = txCfgOpt;\n    }\n    setDefaultStateProxy(elDisplayable);\n  }\n}\nfunction updateZ(el, elOption, seriesModel) {\n  // Group not support textContent and not support z yet.\n  if (el.isGroup) {\n    return;\n  }\n  var elDisplayable = el;\n  var currentZ = seriesModel.currentZ;\n  var currentZLevel = seriesModel.currentZLevel;\n  // Always erase.\n  elDisplayable.z = currentZ;\n  elDisplayable.zlevel = currentZLevel;\n  // z2 must not be null/undefined, otherwise sort error may occur.\n  var optZ2 = elOption.z2;\n  optZ2 != null && (elDisplayable.z2 = optZ2 || 0);\n  for (var i = 0; i < STATES.length; i++) {\n    updateZForEachState(elDisplayable, elOption, STATES[i]);\n  }\n}\nfunction updateZForEachState(elDisplayable, elOption, state) {\n  var isNormal = state === NORMAL;\n  var elStateOpt = isNormal ? elOption : retrieveStateOption(elOption, state);\n  var optZ2 = elStateOpt ? elStateOpt.z2 : null;\n  var stateObj;\n  if (optZ2 != null) {\n    // Do not `ensureState` until required.\n    stateObj = isNormal ? elDisplayable : elDisplayable.ensureState(state);\n    stateObj.z2 = optZ2 || 0;\n  }\n}\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n  if (coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(renderItem, 'series.render is required.');\n      assert(coordSys.prepareCustoms || prepareCustoms[coordSys.type], 'This coordSys does not support custom series.');\n    }\n    // `coordSys.prepareCustoms` is used for external coord sys like bmap.\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms(coordSys) : prepareCustoms[coordSys.type](coordSys);\n  }\n  var userAPI = defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    ordinalRawValue: ordinalRawValue,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  };\n  // If someday intending to refactor them to a class, should consider do not\n  // break change: currently these attribute member are encapsulated in a closure\n  // so that do not need to force user to call these method with a scope.\n  // Do not support call `api` asynchronously without dataIndexInside input.\n  var currDataIndexInside;\n  var currItemModel;\n  var currItemStyleModels = {};\n  var currLabelModels = {};\n  var seriesItemStyleModels = {};\n  var seriesLabelModels = {};\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    seriesItemStyleModels[stateName] = customSeries.getModel(PATH_ITEM_STYLE[stateName]);\n    seriesLabelModels[stateName] = customSeries.getModel(PATH_LABEL[stateName]);\n  }\n  function getItemModel(dataIndexInside) {\n    return dataIndexInside === currDataIndexInside ? currItemModel || (currItemModel = data.getItemModel(dataIndexInside)) : data.getItemModel(dataIndexInside);\n  }\n  function getItemStyleModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesItemStyleModels[state] : dataIndexInside === currDataIndexInside ? currItemStyleModels[state] || (currItemStyleModels[state] = getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])) : getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]);\n  }\n  function getLabelModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesLabelModels[state] : dataIndexInside === currDataIndexInside ? currLabelModels[state] || (currLabelModels[state] = getItemModel(dataIndexInside).getModel(PATH_LABEL[state])) : getItemModel(dataIndexInside).getModel(PATH_LABEL[state]);\n  }\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currItemModel = null;\n    currItemStyleModels = {};\n    currLabelModels = {};\n    return renderItem && renderItem(defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  };\n  /**\r\n   * @public\r\n   * @param dim by default 0.\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getStore().get(data.getDimensionIndex(dim || 0), dataIndexInside);\n  }\n  /**\r\n   * @public\r\n   * @param dim by default 0.\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n  function ordinalRawValue(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    dim = dim || 0;\n    var dimInfo = data.getDimensionInfo(dim);\n    if (!dimInfo) {\n      var dimIndex = data.getDimensionIndex(dim);\n      return dimIndex >= 0 ? data.getStore().get(dimIndex, dataIndexInside) : undefined;\n    }\n    var val = data.get(dimInfo.name, dataIndexInside);\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\n    return ordinalMeta ? ordinalMeta.categories[val] : val;\n  }\n  /**\r\n   * @deprecated The original intention of `api.style` is enable to set itemStyle\r\n   * like other series. But it is not necessary and not easy to give a strict definition\r\n   * of what it returns. And since echarts5 it needs to be make compat work. So\r\n   * deprecates it since echarts5.\r\n   *\r\n   * By default, `visual` is applied to style (to support visualMap).\r\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\r\n   * it can be implemented as:\r\n   * `api.style({stroke: api.visual('color'), fill: null})`;\r\n   *\r\n   * [Compat]: since ec5, RectText has been separated from its hosts el.\r\n   * so `api.style()` will only return the style from `itemStyle` but not handle `label`\r\n   * any more. But `series.label` config is never published in doc.\r\n   * We still compat it in `api.style()`. But not encourage to use it and will still not\r\n   * to pulish it to doc.\r\n   * @public\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n  function style(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.style', 'Please write literal style directly instead.');\n    }\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var style = data.getItemVisual(dataIndexInside, 'style');\n    var visualColor = style && style.fill;\n    var opacity = style && style.opacity;\n    var itemStyle = getItemStyleModel(dataIndexInside, NORMAL).getItemStyle();\n    visualColor != null && (itemStyle.fill = visualColor);\n    opacity != null && (itemStyle.opacity = opacity);\n    var opt = {\n      inheritColor: isString(visualColor) ? visualColor : '#000'\n    };\n    var labelModel = getLabelModel(dataIndexInside, NORMAL);\n    // Now that the feature of \"auto adjust text fill/stroke\" has been migrated to zrender\n    // since ec5, we should set `isAttached` as `false` here and make compat in\n    // `convertToEC4StyleForCustomSerise`.\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, opt, false, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve2(customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, opt, false);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  /**\r\n   * @deprecated The reason see `api.style()`\r\n   * @public\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n  function styleEmphasis(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.styleEmphasis', 'Please write literal style directly instead.');\n    }\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var itemStyle = getItemStyleModel(dataIndexInside, EMPHASIS).getItemStyle();\n    var labelModel = getLabelModel(dataIndexInside, EMPHASIS);\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, null, true, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve3(customSeries.getFormattedLabel(dataIndexInside, EMPHASIS), customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, null, true);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  function applyUserPropsAfter(itemStyle, extra) {\n    for (var key in extra) {\n      if (hasOwn(extra, key)) {\n        itemStyle[key] = extra[key];\n      }\n    }\n  }\n  function preFetchFromExtra(extra, itemStyle) {\n    // A trick to retrieve those props firstly, which are used to\n    // apply auto inside fill/stroke in `convertToEC4StyleForCustomSerise`.\n    // (It's not reasonable but only for a degree of compat)\n    if (extra) {\n      extra.textFill && (itemStyle.textFill = extra.textFill);\n      extra.textPosition && (itemStyle.textPosition = extra.textPosition);\n    }\n  }\n  /**\r\n   * @public\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    if (hasOwn(STYLE_VISUAL_TYPE, visualType)) {\n      var style_1 = data.getItemVisual(dataIndexInside, 'style');\n      return style_1 ? style_1[STYLE_VISUAL_TYPE[visualType]] : null;\n    }\n    // Only support these visuals. Other visual might be inner tricky\n    // for performance (like `style`), do not expose to users.\n    if (hasOwn(NON_STYLE_VISUAL_PROPS, visualType)) {\n      return data.getItemVisual(dataIndexInside, visualType);\n    }\n  }\n  /**\r\n   * @public\r\n   * @return If not support, return undefined.\r\n   */\n  function barLayout(opt) {\n    if (coordSys.type === 'cartesian2d') {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(defaults({\n        axis: baseAxis\n      }, opt));\n    }\n  }\n  /**\r\n   * @public\r\n   */\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\r\n   * @public\r\n   * @return font string\r\n   */\n  function font(opt) {\n    return labelStyleHelper.getFont(opt, ecModel);\n  }\n}\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  each(data.dimensions, function (dimName) {\n    var dimInfo = data.getDimensionInfo(dimName);\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = data.getDimensionIndex(dimName);\n    }\n  });\n  return encodeDef;\n}\nfunction createOrUpdateItem(api, existsEl, dataIndex, elOption, seriesModel, group, data) {\n  // [Rule]\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  // The rule or \"merge\" see [STRATEGY_MERGE].\n  // If `elOption` is `null`/`undefined`/`false` (when `renderItem` returns nothing).\n  if (!elOption) {\n    group.remove(existsEl);\n    return;\n  }\n  var el = doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group);\n  el && data.setItemGraphicEl(dataIndex, el);\n  el && toggleHoverEmphasis(el, elOption.focus, elOption.blurScope, elOption.emphasisDisabled);\n  return el;\n}\nfunction doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(elOption, 'should not have an null/undefined element setting');\n  }\n  var toBeReplacedIdx = -1;\n  var oldEl = existsEl;\n  if (existsEl && doesElNeedRecreate(existsEl, elOption, seriesModel)\n  // || (\n  //     // PENDING: even in one-to-one mapping case, if el is marked as morph,\n  //     // do not sure whether the el will be mapped to another el with different\n  //     // hierarchy in Group tree. So always recreate el rather than reuse the el.\n  //     morphHelper && morphHelper.isOneToOneFrom(el)\n  // )\n  ) {\n    // Should keep at the original index, otherwise \"merge by index\" will be incorrect.\n    toBeReplacedIdx = indexOf(group.childrenRef(), existsEl);\n    existsEl = null;\n  }\n  var isInit = !existsEl;\n  var el = existsEl;\n  if (!el) {\n    el = createEl(elOption);\n    if (oldEl) {\n      copyElement(oldEl, el);\n    }\n  } else {\n    // FIMXE:NEXT unified clearState?\n    // If in some case the performance issue arised, consider\n    // do not clearState but update cached normal state directly.\n    el.clearStates();\n  }\n  // Need to set morph: false explictly to disable automatically morphing.\n  if (elOption.morph === false) {\n    el.disableMorphing = true;\n  } else if (el.disableMorphing) {\n    el.disableMorphing = false;\n  }\n  attachedTxInfoTmp.normal.cfg = attachedTxInfoTmp.normal.conOpt = attachedTxInfoTmp.emphasis.cfg = attachedTxInfoTmp.emphasis.conOpt = attachedTxInfoTmp.blur.cfg = attachedTxInfoTmp.blur.conOpt = attachedTxInfoTmp.select.cfg = attachedTxInfoTmp.select.conOpt = null;\n  attachedTxInfoTmp.isLegacy = false;\n  doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfoTmp);\n  doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit);\n  updateElNormal(api, el, dataIndex, elOption, attachedTxInfoTmp, seriesModel, isInit);\n  // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n  hasOwn(elOption, 'info') && (customInnerStore(el).info = elOption.info);\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    if (stateName !== NORMAL) {\n      var otherStateOpt = retrieveStateOption(elOption, stateName);\n      var otherStyleOpt = retrieveStyleOptionOnState(elOption, otherStateOpt, stateName);\n      updateElOnState(stateName, el, otherStateOpt, otherStyleOpt, attachedTxInfoTmp);\n    }\n  }\n  updateZ(el, elOption, seriesModel);\n  if (elOption.type === 'group') {\n    mergeChildren(api, el, dataIndex, elOption, seriesModel);\n  }\n  if (toBeReplacedIdx >= 0) {\n    group.replaceAt(el, toBeReplacedIdx);\n  } else {\n    group.add(el);\n  }\n  return el;\n}\n// `el` must not be null/undefined.\nfunction doesElNeedRecreate(el, elOption, seriesModel) {\n  var elInner = customInnerStore(el);\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n  return (\n    // Always create new if universal transition is enabled.\n    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.\n    seriesModel.isUniversalTransitionEnabled()\n    // If `elOptionType` is `null`, follow the merge principle.\n    || elOptionType != null && elOptionType !== elInner.customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== elInner.customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== elInner.customImagePath\n    // // FIXME test and remove this restriction?\n    // || (elOptionType === 'text'\n    //     && hasOwn(elOptionStyle, 'text')\n    //     && (elOptionStyle as TextStyleProps).text !== elInner.customText\n    // )\n  );\n}\nfunction doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit) {\n  // Based on the \"merge\" principle, if no clipPath provided,\n  // do nothing. The exists clip will be totally removed only if\n  // `el.clipPath` is `false`. Otherwise it will be merged/replaced.\n  var clipPathOpt = elOption.clipPath;\n  if (clipPathOpt === false) {\n    if (el && el.getClipPath()) {\n      el.removeClipPath();\n    }\n  } else if (clipPathOpt) {\n    var clipPath = el.getClipPath();\n    if (clipPath && doesElNeedRecreate(clipPath, clipPathOpt, seriesModel)) {\n      clipPath = null;\n    }\n    if (!clipPath) {\n      clipPath = createEl(clipPathOpt);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(isPath(clipPath), 'Only any type of `path` can be used in `clipPath`, rather than ' + clipPath.type + '.');\n      }\n      el.setClipPath(clipPath);\n    }\n    updateElNormal(null, clipPath, dataIndex, clipPathOpt, null, seriesModel, isInit);\n  }\n  // If not define `clipPath` in option, do nothing unnecessary.\n}\nfunction doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfo) {\n  // Group does not support textContent temporarily until necessary.\n  if (el.isGroup) {\n    return;\n  }\n  // Normal must be called before emphasis, for `isLegacy` detection.\n  processTxInfo(elOption, null, attachedTxInfo);\n  processTxInfo(elOption, EMPHASIS, attachedTxInfo);\n  // If `elOption.textConfig` or `elOption.textContent` is null/undefined, it does not make sense.\n  // So for simplicity, if \"elOption hasOwnProperty of them but be null/undefined\", we do not\n  // trade them as set to null to el.\n  // Especially:\n  // `elOption.textContent: false` means remove textContent.\n  // `elOption.textContent.emphasis.style: false` means remove the style from emphasis state.\n  var txConOptNormal = attachedTxInfo.normal.conOpt;\n  var txConOptEmphasis = attachedTxInfo.emphasis.conOpt;\n  var txConOptBlur = attachedTxInfo.blur.conOpt;\n  var txConOptSelect = attachedTxInfo.select.conOpt;\n  if (txConOptNormal != null || txConOptEmphasis != null || txConOptSelect != null || txConOptBlur != null) {\n    var textContent = el.getTextContent();\n    if (txConOptNormal === false) {\n      textContent && el.removeTextContent();\n    } else {\n      txConOptNormal = attachedTxInfo.normal.conOpt = txConOptNormal || {\n        type: 'text'\n      };\n      if (!textContent) {\n        textContent = createEl(txConOptNormal);\n        el.setTextContent(textContent);\n      } else {\n        // If in some case the performance issue arised, consider\n        // do not clearState but update cached normal state directly.\n        textContent.clearStates();\n      }\n      updateElNormal(null, textContent, dataIndex, txConOptNormal, null, seriesModel, isInit);\n      var txConStlOptNormal = txConOptNormal && txConOptNormal.style;\n      for (var i = 0; i < STATES.length; i++) {\n        var stateName = STATES[i];\n        if (stateName !== NORMAL) {\n          var txConOptOtherState = attachedTxInfo[stateName].conOpt;\n          updateElOnState(stateName, textContent, txConOptOtherState, retrieveStyleOptionOnState(txConOptNormal, txConOptOtherState, stateName), null);\n        }\n      }\n      txConStlOptNormal ? textContent.dirty() : textContent.markRedraw();\n    }\n  }\n}\nfunction processTxInfo(elOption, state, attachedTxInfo) {\n  var stateOpt = !state ? elOption : retrieveStateOption(elOption, state);\n  var styleOpt = !state ? elOption.style : retrieveStyleOptionOnState(elOption, stateOpt, EMPHASIS);\n  var elType = elOption.type;\n  var txCfg = stateOpt ? stateOpt.textConfig : null;\n  var txConOptNormal = elOption.textContent;\n  var txConOpt = !txConOptNormal ? null : !state ? txConOptNormal : retrieveStateOption(txConOptNormal, state);\n  if (styleOpt && (\n  // Because emphasis style has little info to detect legacy,\n  // if normal is legacy, emphasis is trade as legacy.\n  attachedTxInfo.isLegacy || isEC4CompatibleStyle(styleOpt, elType, !!txCfg, !!txConOpt))) {\n    attachedTxInfo.isLegacy = true;\n    var convertResult = convertFromEC4CompatibleStyle(styleOpt, elType, !state);\n    // Explicitly specified `textConfig` and `textContent` has higher priority than\n    // the ones generated by legacy style. Otherwise if users use them and `api.style`\n    // at the same time, they not both work and hardly to known why.\n    if (!txCfg && convertResult.textConfig) {\n      txCfg = convertResult.textConfig;\n    }\n    if (!txConOpt && convertResult.textContent) {\n      txConOpt = convertResult.textContent;\n    }\n  }\n  if (!state && txConOpt) {\n    var txConOptNormal_1 = txConOpt;\n    // `textContent: {type: 'text'}`, the \"type\" is easy to be missing. So we tolerate it.\n    !txConOptNormal_1.type && (txConOptNormal_1.type = 'text');\n    if (process.env.NODE_ENV !== 'production') {\n      // Do not tolerate incorrcet type for forward compat.\n      assert(txConOptNormal_1.type === 'text', 'textContent.type must be \"text\"');\n    }\n  }\n  var info = !state ? attachedTxInfo.normal : attachedTxInfo[state];\n  info.cfg = txCfg;\n  info.conOpt = txConOpt;\n}\nfunction retrieveStateOption(elOption, state) {\n  return !state ? elOption : elOption ? elOption[state] : null;\n}\nfunction retrieveStyleOptionOnState(stateOptionNormal, stateOption, state) {\n  var style = stateOption && stateOption.style;\n  if (style == null && state === EMPHASIS && stateOptionNormal) {\n    style = stateOptionNormal.styleEmphasis;\n  }\n  return style;\n}\n// Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates\n//     that the existing children will not be removed, and enables the feature\n//     that update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will\n//     happen.\n// (5) If `elOption.$mergeChildren` is not `false` neither `'byName'` and the\n//     `el` is a group, and if any of the new child is null, it means to remove\n//     the element at the same index, if exists. On the other hand, if the new\n//     child is and empty object `{}`, it means to keep the element not changed.\n//\n// For implementation simpleness, do not provide a direct way to remove single\n// child (otherwise the total indices of the children array have to be modified).\n// User can remove a single child by setting its `ignore` to `true`.\nfunction mergeChildren(api, el, dataIndex, elOption, seriesModel) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren;\n  // `diffChildrenByName` has been deprecated.\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false;\n  // For better performance on roam update, only enter if necessary.\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n  if (byName) {\n    diffGroupChildren({\n      api: api,\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      seriesModel: seriesModel,\n      group: el\n    });\n    return;\n  }\n  notMerge && el.removeAll();\n  // Mapping children of a group simply by index, which\n  // might be better performance.\n  var index = 0;\n  for (; index < newLen; index++) {\n    var newChild = newChildren[index];\n    var oldChild = el.childAt(index);\n    if (newChild) {\n      if (newChild.ignore == null) {\n        // The old child is set to be ignored if null (see comments\n        // below). So we need to set ignore to be false back.\n        newChild.ignore = false;\n      }\n      doCreateOrUpdateEl(api, oldChild, dataIndex, newChild, seriesModel, el);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(oldChild, 'renderItem should not return a group containing elements' + ' as null/undefined/{} if they do not exist before.');\n      }\n      // If the new element option is null, it means to remove the old\n      // element. But we cannot really remove the element from the group\n      // directly, because the element order may not be stable when this\n      // element is added back. So we set the element to be ignored.\n      oldChild.ignore = true;\n    }\n  }\n  for (var i = el.childCount() - 1; i >= index; i--) {\n    var child = el.childAt(i);\n    removeChildFromGroup(el, child, seriesModel);\n  }\n}\nfunction removeChildFromGroup(group, child, seriesModel) {\n  // Do not support leave elements that are not mentioned in the latest\n  // `renderItem` return. Otherwise users may not have a clear and simple\n  // concept that how to control all of the elements.\n  child && applyLeaveTransition(child, customInnerStore(group).option, seriesModel);\n}\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdateEl(context.api, child, context.dataIndex, childOption, context.seriesModel, context.group);\n}\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && applyLeaveTransition(child, customInnerStore(child).option, context.seriesModel);\n}\n/**\r\n * @return SVG Path data.\r\n */\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\nfunction hasOwnPathData(shape) {\n  return shape && (hasOwn(shape, 'pathData') || hasOwn(shape, 'd'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport CustomSeriesModel from './CustomSeries.js';\nimport CustomChartView from './CustomView.js';\nexport function install(registers) {\n  registers.registerChartView(CustomChartView);\n  registers.registerSeriesModel(CustomSeriesModel);\n}"],"names":["createRenderPlanner","inner","makeInner","seriesModel","fields","pipelineContext","originalLarge","large","originalProgressive","progressiveRender","progressive","createSeriesData","sourceRaw","opt","source","sourceManager","getSourceManager","isOriginalSource","createSourceFromSeriesDataOption","getSource","sourceFormat","SOURCE_FORMAT_ORIGINAL","coordSysInfo","getCoordSysInfoBySeries","coordSysDimDefs","coordSysName","get","registeredCoordSys","CoordinateSystem","coordSysDims","zrUtil.map","dim","dimInfo","name","axisModel","axisMap","axisType","type","getDimensionTypeByAxis","getDimensionsInfo","dimensions","slice","getCoordSysDimDefs","useEncodeDefaulter","encodeDefaulter","zrUtil.isFunction","zrUtil.curry","makeSeriesEncodeForAxisCoordSys","createDimensionOptions","coordDimensions","generateCoord","encodeDefine","getEncode","canOmitUnusedDimensions","schema","prepareSeriesDataSchema","firstCategoryDimIndex","dimInfoList","createInvertedIndices","hasNameEncode","zrUtil.each","dimIndex","coordDim","categoryAxisModel","categoryAxisMap","ordinalMeta","getOrdinalMeta","otherDims","itemName","injectOrdinalMeta","store","getSharedDataStore","stackCalculationInfo","enableDataStack","data","SeriesData","setCalculationInfo","dimValueGetter","sampleItem","arr","i","length","firstDataNotNull","zrUtil.isArray","getDataItemValue","isNeedCompleteOrdinalData","itemOpt","dimName","dataIndex","this","defaultDimValueGetter","hasItemOption","initData","LineSeriesModel","_super","_this","apply","arguments","hasSymbolVisual","__extends","prototype","getInitialData","option","getLegendIcon","group","Group","line","createSymbol","itemHeight","itemWidth","lineStyle","stroke","add","setStyle","visualType","getData","getVisual","visualRotate","symbolType","size","symbol","itemStyle","fill","symbolRotate","iconRotate","rotation","Math","PI","setOrigin","indexOf","style","lineWidth","dependencies","defaultOption","z","coordinateSystem","legendHoverLink","clip","label","position","endLabel","show","valueAnimation","distance","width","emphasis","scale","step","smooth","smoothMonotone","symbolSize","showSymbol","showAllSymbol","connectNulls","sampling","animationEasing","hoverLayerThreshold","Infinity","universalTransition","divideShape","triggerLineEvent","SeriesModel","getDefaultLabel","labelDims","mapDimensionsAll","len","rawVal","retrieveRawValue","vals","push","join","getDefaultInterpolatedLabel","interpolatedValue","isArray","getDimensionIndex","Symbol","idx","seriesScope","opts","call","updateData","_createSymbol","keepAspect","removeAll","symbolPath","attr","z2","culling","scaleX","scaleY","drift","driftSymbol","_symbolType","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolType","getSymbolPath","highlight","enterEmphasis","downplay","leaveEmphasis","setZ","zlevel","setDraggable","draggable","hasCursorOption","cursor","silent","getItemVisual","hostModel","getSymbolSize","isInit","disableAnimation","target","graphic.updateProps","saveOldStyle","_updateCommon","_sizeX","_sizeY","opacity","graphic.initProps","emphasisItemStyle","blurItemStyle","selectItemStyle","focus","blurScope","emphasisDisabled","labelStatesModels","hoverScale","cursorStyle","itemModel","getItemModel","emphasisModel","getModel","getItemStyle","getLabelStatesModels","getShallow","symbolOffset","normalizeSymbolOffset","x","y","symbolStyle","visualColor","ZRImage","pathStyle","useStyle","extend","image","height","__isEmptyBrush","decal","setColor","symbolInnerColor","strokeNoScale","liftZ","z2Origin","_z2","useNameLabel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","getName","inheritColor","defaultOpacity","emphasisState","ensureState","scaleRatio","max","isFinite","setSymbolScale","toggleHoverEmphasis","fadeOut","cb","getECData","animationOpt","animation","fadeLabel","textContent","getTextContent","graphic.removeElement","removeOpt","removeTextContent","normalizeSymbolSize","graphic.Group","dx","dy","parent","symbolNeedsDraw","point","isNaN","isIgnore","clipShape","contain","normalizeUpdateOpt","isObject","makeSeriesScope","SymbolDraw","SymbolCtor","_SymbolCtor","SymbolClz","_progressiveEls","oldData","_data","symbolUpdateOpt","getSymbolPoint","getItemLayout","diff","newIdx","symbolEl","setPosition","setItemGraphicEl","update","oldIdx","getItemGraphicEl","newSymbolType","oldSymbolType","remove","el","execute","_getSymbolPoint","updateLayout","eachItemGraphicEl","markRedraw","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","incremental","hoverLayer","start","end","traverse","eachRendered","graphic.traverseElements","enableAnimation","prepareDataCoordInfo","coordSys","valueOrigin","baseAxis","getBaseAxis","valueAxis","getOtherAxis","valueStart","extent","getExtent","isNumber","getValueStart","baseAxisDim","valueAxisDim","valueDim","mapDimension","baseDim","baseDataOffset","dims","map","stacked","stackResultDim","getCalculationInfo","isDimensionStacked","dataDimsForPoint","stackedOverDimension","getStackedOnPoint","dataCoordInfo","value","NaN","stackedData","dataToPoint","mathMin","min","mathMax","isPointNull","drawSegment","ctx","points","segLen","allLen","dir","prevX","prevY","cpx0","cpy0","cpx1","cpy1","k","nextIdx","nextX","nextY","tmpK","ratioNextSeg","vx","vy","nextCpx0","nextCpy0","dx0","dx1","dy0","dy1","lenPrevSeg","lenNextSeg","dir_1","abs","dir_2","sqrt","bezierCurveTo","lineTo","ECPolylineShape","smoothConstraint","ECPolyline","getDefaultStyle","getDefaultShape","buildPath","shape","getPointOn","xOrY","path","createPathProxy","x0","y0","CMD","PathProxy","isDimX","roots","x2","y2","x3","y3","t","M","L","val","C","nRoot","cubicRootAt","i_1","t_1","cubicAt","Path","ECPolygonShape","ECPolygon","stackedOnPoints","stackedOnSmooth","closePath","createGridClipPath","cartesian","hasAnimation","done","during","rect","getArea","ceil","floor","clipPath","graphic.Rect","isHorizontal","isAxisInversed","inverse","duringCb","isFunction","percent","createPolarClipPath","polar","sectorArea","r0","round","r","graphic.Sector","cx","cy","startAngle","endAngle","clockwise","createClipPath","isPointsSame","points1","points2","bboxFromPoints","minX","minY","maxX","maxY","getBoundingDiff","_a","min1","max1","_b","min2","max2","getSmooth","zrUtil.isNumber","turnPointsIntoStep","basePoints","stepTurnAt","baseIndex","stepPoints","stepPt","pt","nextPt","filteredPoints","reference","middle","stepPt2","getVisualGradient","api","visualMetaList","count","visualMeta","getDimensionInfo","dimension","axis","getAxis","colorStops","stops","stop","coord","toGlobalCoord","dataToCoord","color","stopLen","outerColors","reverse","colorStopsInRange","maxSize","prevOutOfRangeColorStop","prevInRangeColorStop","newColorStops","lerpStop","stop0","stop1","clippedCoord","coord0","p","lerp","stop_1","clipColorStops","getWidth","getHeight","inRangeStopLen","minCoord","maxCoord","coordSpan","offset","unshift","gradient","graphic.LinearGradient","getIsIgnoreFunc","isAuto","categoryAxis","getAxesByScale","axisExtent","availSize","dataLen","canShowAllSymbolForCategory","categoryDataDim","labelMap","getViewLabels","labelItem","ordinalNumber","getRawOrdinalNumber","tickValue","hasOwnProperty","getPointAtIndex","anyStateShowEndLabel","SPECIAL_STATES","createLineClipPath","lineView","isCoordinateSystemType","endLabelModel_1","valueAnimation_1","data_1","labelAnimationRecord_1","lastFrameIndex","clipRect","_endLabelOnDuring","_endLabel","originalX","originalY","rectShape","expandSize","LineView","init","lineGroup","symbolDraw","_symbolDraw","_lineGroup","_changePolyState","zrUtil.bind","render","ecModel","lineStyleModel","areaStyleModel","getLayout","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","polygon","_polygon","ssr","isAreaChart","isEmpty","createFloat32Array","getStackedOnPoints","isIgnoreFunc","__temp","clipShapeForSymbol","_clipShapeForSymbol","_step","_newPolygon","_initOrUpdateEndLabel","convertToColorString","oldClipPath","getClipPath","newClipPath","setClipPath","_stackedOnPoints","_points","_doUpdateAnimation","setShape","_initSymbolLabelAnimation","_newPolyline","zrUtil.defaults","getLineStyle","lineJoin","setStatesStylesFromModel","getState","seriesIndex","stackedOnSeries","getAreaStyle","changePolyState","onHoverStateChange","_valueOrigin","packEventData","eventData","componentType","componentSubType","componentIndex","seriesName","seriesType","payload","modelUtil.queryDataIndex","Array","symbolLabel","ChartView","toState","setStatesFlag","segmentIgnoreThreshold","isHorizontalOrRadial","isAxisInverse","seriesDuration","seriesDelay","seriesDelayValue","current","polarClip","pointToCoord","gridClip","ratio","delay","text","animateTo","duration","setToFinal","animateFrom","disableLabelAnimation","endLabelModel","data_2","graphic.Text","ignoreClip","setTextContent","getLastIndexNotNull","enableTextSetter","isBaseInversed","align","verticalAlign","normal","getEndLabelStateSpecified","textConfig","animationRecord","precision","distanceX","distanceY","dataIndexRange","a","b","dimIdx","prevIndex","nextIndex","range","getIndexRange","indices","getRawValue","startValue","endValue","modelUtil.interpolateRawValues","labelInner","setLabelText","newData","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","diffResult","cmd","idx1","diffData","currPoints","nextPoints","currStackedPoints","nextStackedPoints","status","sortedIndices","rawIndices","newDataOldCoordInfo","oldPoints","newPoints","diffItem","pointAdded","oldIdx2","newIdx2","currentX","currentY","getRawIndex","newDataDimsForPoint","oldPt","stackedOnPoint","sort","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","next","stackedOnCurrent","stackedOnNext","lineAnimationDiff","__points","updatedDataInfo","diffStatus","ptIdx","animators","dirtyShape","install","registers","registerChartView","registerSeriesModel","LineSeries","registerLayout","layoutPoints","registerVisual","reset","setVisual","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","dataSample","BaseBarSeriesModel","getMarkerPosition","startingAtTick","clampData","clampData_1","pt_1","each","getAxes","tickCoords","getTicksCoords","alignTicksWithLabel","getTickModel","targetTickId","isEnd","leftCoord","stepTickValue","tickCoord","offsetIndex","barMinHeight","barMinAngle","largeThreshold","progressiveChunkMode","registerClass","BarSeriesModel","getProgressive","getProgressiveThreshold","progressiveThreshold","brushSelector","selectors","inheritDefaultOption","roundCap","showBackground","backgroundStyle","borderColor","borderWidth","borderType","borderRadius","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","select","realtimeSort","getSectorCornerRadius","model","zeroIfNull","cornerRadius","dr","cr","parsePercent","BarView","_isFirstFrame","_model","_removeOnRenderedListener","_updateDrawMode","coordinateSystemType","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","_updateLargeClip","incrementalRender","params","_incrementalRenderLarge","traverseElements","isLargeDraw","animationModel","isAnimationEnabled","realtimeSortCfg","realtimeSortOption","otherAxis","shouldRealtimeSort","_enableRealtimeSort","needsClip","coordSysClipArea","onBand","expandWidth","getClipArea","removeClipPath","drawBackground","backgroundModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isInitSort","isChangeOrder","createBackground","bgLayout","bgEl","layout","ElementClz","Sector","Rect","createBackgroundShape","createBackgroundEl","hasValue","isValidLayout","isClipped","elementCreator","forceLabelAnimation","updateStyle","updateRealtimeAnimation","initProps","ignore","newIndex","oldIndex","updateProps","textEl","labelInnerStore","prevValue","removeElementWithFadeOut","bgGroup","_backgroundGroup","createLarge","_removeBackground","_dispatchInitSort","orderMapping_1","_onRendered","_updateSortWithinSameData","getZr","on","_dataSort","orderMapping","info","dataIdx","mappedValue","ordinalNumbers","item","_isOrderChangedWithinSameData","ordinalDataDim","lastValue","Number","MAX_VALUE","tickNum","categories","rawIdx","rawIndexOf","MIN_VALUE","indexOfRawIndex","_isOrderDifferentInView","orderInfo","tickMax","sortInfo","dispatchAction","axisId","index","sortResult","dispose","off","cartesian2d","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","xClipped","yClipped","signR","tmp","clipped","isUpdate","__dataIndex","isRadial","ShapeClass","Sausage","sector","positionMap","createPolarPositionMapping","calculateTextPosition","createSectorCalculateTextPosition","isRoundCap","animateProperty","animateTarget","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","obj","props","rectPropties","polarPropties","fixedLineWidth","rawLayout","getLineWidth","signX","signY","arcOrAngle","isPolar","sectorShape","labelPositionOutside","defaultOutsidePosition","inside","setSectorTextRotation","setLabelValueAnimation","isZeroOnPolar","states","state","LagePathShape","LargePath","baseDimIdx","valueDimIdx","startPoint","barWidth","progressiveEls","largeDataIndices","bgPoints","ignoreCoarsePointer","largePathUpdateDataIndex","throttle","event","largePath","ii","largePathFindDataIndex","offsetX","offsetY","coordLayout","BarSeries","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","createProgressiveLayout","registerAction","eachComponent","mainType","query","componentModel","setCategorySortInfo","PI2","RADIAN","getViewRect","layout.getLayoutRect","getBoxLayoutParams","getBasicPieLayout","viewRect","center","radius","pieLayout","eachSeriesByType","padAngle","minAndPadAngle","validDataCount","sum","getSum","unitRadian","roseType","stillShowZeroSum","getDataExtent","angles","halfPadAngle","normalizeArcAngles","layoutData","getSeriesLayoutData","angleRange","restAngle","valueSumLargerThanMinAngle","currentAngle","setLayout","angle","setItemLayout","actualStartAngle","actualEndAngle","linearMap","angle_1","layout_1","layout_2","adjustSingleSide","list","viewWidth","viewHeight","viewLeft","viewTop","farthestX","labelAlignTo","linePoints","shiftLayoutOnY","items","topSemi","bottomSemi","semi","len2","rA","rB","recalculateXOnSemiToAlignOnEllipseCurve","recalculateX","rB2","rA2","newX","deltaX","constrainTextWidth","targetTextWidth","availableWidth","forceRecalculate","labelStyleWidth","textRect","bgColor","backgroundColor","padding","paddingH","overflow","oldOuterWidth","oldHeight","match","innerRect","getBoundingRect","availableInnerWidth","newWidth","unconstrainedWidth","newRect","margin","isPositionCenter","pieLabelLayout","labelLayoutList","hasLabelRotate","minShowLabelRadian","setNotShow","labelLine","getTextGuideLine","labelModel","labelPosition","labelDistance","edgeDistance","bleedMargin","labelLineModel","labelLineLen","labelLineLen2","key","isLabelShown","textX","textY","textAlign","midAngle","nx","cos","ny","sin","isLabelInside","x1","y1","labelRotate","rotate","rad","atan2","selectState","clone","applyTransform","getComputedTransform","minTurnAngle","maxSurfaceAngle","surfaceNormal","Point","setTextConfig","leftList","rightList","leftmostX","rightmostX","isAlignToEdge","extraPaddingH","realTextWidth","dist","avoidOverlap","notShowLabel","limitTurnAngle","limitSurfaceAngle","__hostTarget","textGuideLineConfig","anchor","PiePiece","firstCreate","animationType","isFrom","originX","originY","_updateLabel","labelText","visualOpacity","getFormattedLabel","removeTextGuideLine","graphic.Polyline","setTextGuideLine","setLabelLineStyle","getLabelLineStatesModels","retrieve3","PieView","ignoreLabelLineUpdate","s","_emptyCircleSector","piePiece","graphic.removeElementWithFadeOut","labelLayout","containPoint","itemLayout","createSeriesDataSimply","nameList","innerData","modelUtil.makeInner","PieSeriesModel","legendVisualProvider","LegendVisualProvider","getRawData","_defaultLabelLine","mergeOption","makeSeriesEncodeForNameBased","getDataParams","dataInner","seats","valueList_1","getPercentSeats","$vars","modelUtil.defaultEmphasis","labelLineNormalOpt","labelLineEmphasisOpt","colorBy","minAngle","minShowLabelAngle","selectedOffset","percentPrecision","left","top","right","bottom","alignTo","distanceToLabelLine","length2","borderJoin","showEmptyCircle","emptyCircleStyle","hideOverlap","scaleSize","avoidLabelOverlap","animationDuration","animationTypeUpdate","animationEasingUpdate","animationDurationUpdate","createLegacyDataSelectAction","curry","dataFilter","negativeDataFilter","ScatterSeriesModel","getZLevelKey","id","LargeSymbolPathShape","LargeSymbolPath","_off","hoverDataIdx","notClear","symbolProxy","symbolProxyShape","getContext","canBoost","softClipShape","_ctx","afterBrush","fillRect","findDataIndex","w","h","localPos","transformCoordToLocal","_rect","graphic.BoundingRect","graphic.Path","LargeSymbolDraw","_create","_setCommon","eachChild","child","startIndex","endIndex","byteOffset","Float32Array","buffer","lastAdded","_newAdded","oldLen","set","extrudeShadow","globalStyle","ecData","e","ScatterView","_updateSymbolDraw","_getClipShape","_finished","updateTransform","dirty","res","pointsLayout","progress","use","installGridSimple","radarLayout","axes","getIndicatorAxes","axisIndex","isValidPoint","getValueMissingPoint","firstPoint","zrUtil.find","radarBackwardCompat","polarOptArr","polarNotRadar_1","polarOpt","indicator","radar","series","seriesOpt","polarIndex","radarIndex","RadarView","symbolUtil.normalizeSymbolSize","symbolUtil.createSymbol","updateSymbols","symbolGroup","__dimIdx","graphic","getInitialPoints","graphic.Polygon","itemGroup","polygonIgnore","parentModel","stateName","stateModel","stateIgnore","itemHoverStyle","zrUtil.extend","zrUtil.clone","getStore","labelDimIndex","RadarSeriesModel","generateCoordCount","formatTooltip","multipleSeries","dataType","indicatorAxes","nameToDisplay","markerColor","retrieveVisualColorForTooltipMarker","createTooltipMarkup","header","sortBlocks","blocks","markerType","sortParam","getTooltipPosition","values","getValues","coordToPoint","installRadarComponent","registerPreprocessor","backwardCompat","MapView","mapModel","from","uid","getHostGeoModel","_mapDraw","resetForLabelLayout","seriesId","mapDraw","needsDrawMap","MapDraw","draw","getComponent","_renderSymbols","originalData","originalDataIndex","circle","graphic.Circle","Z2_EMPHASIS_LIFT","fullData","mainSeries","name_1","fullIndex_1","indexOfName","regionGroup","MapSeries","seriesGroup","geo","region","getRegion","getCenter","dataNameIndexMap","zrUtil.createHashMap","toAppendItems","name_2","geoSource","geoSourceManager","load","getMapType","nameMap","nameProperty","regions","dataItem","dataNameIdx","specifiedGeoJSONRegionStyle","properties","echartsStyle","getRawDataItem","zrUtil.merge","appendData","geoIndex","getRegionModel","regionName","seriesNames","otherIndex","noHeader","setZoom","zoom","setCenter","iconType","icon","layoutMode","aspectScale","showLegendSymbol","boundingCoords","scaleLimit","selectedMode","areaColor","mapDataStatistic","seriesGroups","hostGeoModel","seriesList","datas","statisticType","dataNameMap","mapKey","setData","cloneShallow","mapSymbolLayout","processedMapType","mapSeries","mapType","mapSymbolOffsets","subMapSeries","showLabel","installGeo","firstWalk","node","separation","children","isExpand","siblings","parentNode","subtreeW","hierNode","n","shift","change","prelim","modifier","executeShifts","midPoint","defaultAncestor","subtreeV","ancestor","nodeOutRight","nodeInRight","nodeOutLeft","nodeInLeft","sumOutRight","sumInRight","sumOutLeft","sumInLeft","nextRight","nextLeft","moveSubtree","nextAncestor","thread","apportion","secondWalk","nodeX","defaultSeparation","radialCoordinate","wl","wr","node1","node2","TreeEdgeShape","parentPoint","childPoints","TreePath","childLen","firstChildPos","lastChildPos","moveTo","orient","forkDim","otherDim","forkPosition","tmpPoint","TreeView","_mainGroup","_controller","RoamController","_controllerHost","layoutInfo","_updateViewCoordSys","_updateController","updateNode","removeNode","_nodeScaleRatio","_updateNodeAndLinkScale","bbox.fromPoints","oldMin","_min","oldMax","_max","viewCoordSys","View","zoomLimit","setBoundingRect","controller","controllerHost","setPointerChecker","transform","onIrrelevantElement","enable","getZoom","roamHelper.updateViewOnPan","roamHelper.updateViewOnZoom","updateLabelLayout","nodeScale","_getNodeGlobalScale","nodeScaleRatio","groupZoom","tree","getNodeByDataIndex","virtualRoot","root","sourceSymbolEl","sourceLayout","sourceOldLayout","__oldX","__oldY","rawX","__radialOldRawX","rawY","__radialOldRawY","targetLayout","__radialRawX","__radialRawY","realRoot","rootLayout","length_1","isLeft","textPosition","normalLabelModel","labelRotateRadian","origin","focusDataIndices","zrUtil.concatArray","getAncestorsIndices","getDescendantIndices","edgeShape","getOrient","curvature","edgeForkPosition","edge","__edge","graphic.BezierCurve","getEdgeShape","childLayout","setDefaultStateProxy","drawEdge","parentEl","hoverState","HOVER_STATE_BLUR","removeNodeEdge","removeAnimationOpt","getSourceNode","sourceEdge","layoutOpt","easing","forEach","childNode","cpx2","cpy2","radialCoor1","radialCoor2","radialCoor3","radialCoor4","retrieveTargetInfo","validPayloadTypes","zrUtil.indexOf","targetNode","zrUtil.isString","getNodeById","contains","targetNodeId","getPathToRoot","aboveViewRoot","viewRoot","viewPath","wrapTreePathInfo","treePathInfo","nodeDataIndex","TreeSeriesModel","ignoreStyleOnData","leaves","leavesModel","Model","Tree","createTree","nodeData","wrapMethod","treeDepth","eachNode","depth","expandTreeDepth","expandAndCollapse","initialTreeDepth","hostTree","collapsed","getValue","noValue","treeAncestors","roam","curveness","eachBefore","callback","nodes","pop","treeLayout","sep","inRoot","eachAfter","left_1","right_1","bottom_1","delta","tx_1","kx_1","ky_1","coorX_1","coorY_1","finalCoor","orient_1","commonLayout","treeVisual","existsStyle","ensureUniqueItemVisual","subType","updateCenterAndZoom","installTreeAction","actionTypes","enableAriaDecalForTree","decalPaletteScope","getDecalFromPalette","TreemapSeriesModel","preventUsingHoverLayer","completeTreeValue","levels","designatedVisualItemStyle","designatedVisualModel","hasColorDefine","hasDecalDefine","globalColorList","normalizeToArray","globalDecalList","levelDefine","modelColor","modelDecal","level0","setDefault","levelModels","levelModel","optionUpdated","resetViewRoot","setLayoutInfo","mapIdToIndex","idIndexMap","_idIndexMap","_idIndexMapCount","getViewRoot","_viewRoot","enableAriaDecal","clipWindow","squareRatio","leafDepth","drillDownIcon","zoomToNodeRatio","nodeClick","breadcrumb","emptyItemWidth","textStyle","upperLabel","colorAlpha","colorSaturation","gapWidth","borderColorSaturation","visualDimension","visualMin","visualMax","colorMappingBy","visibleMin","childrenVisibleMin","dataNode","childValue","thisValue","Breadcrumb","containerGroup","onSelect","thisGroup","normalStyleModel","textStyleModel","emphasisTextStyleModel","layoutParam","pos","box","totalWidth","renderList","_prepare","_renderContent","layout.positionElement","convertOptionIdName","getTextRect","TEXT_PADDING","lastX","availableSize","layout.getAvailableSize","itemNode","makeItemPoints","defaults","createTextStyle","onclick","head","tail","splice","selfType","PATH_LABEL_NOAMAL","PATH_UPPERLABEL_NORMAL","Z2_BASE","Z2_BG","Z2_CONTENT","getStateItemStyle","makeStyleMapper","getItemStyleNormal","TreemapView","_state","_storage","nodeGroup","background","content","models","findComponents","targetInfo","helper.retrieveTargetInfo","payloadType","_oldTree","thisStorage","reRoot","rootNodeGroup","direction","_giveContainerGroup","renderResult","_doRender","renderFinally","_doAnimation","_resetController","_renderBreadcrumb","_containerGroup","_initEvents","thisTree","oldTree","lastsForAnimation","oldStorage","willInvisibleEls","doRenderNode","thisNode","oldNode","parentGroup","thisLayout","nodeModel","isInView","thisWidth","thisHeight","thisInvisible","invisible","thisRawIndex","oldRawIndex","thisViewChildren","viewChildren","upperHeight","isParent","itemStyleNormalModel","itemStyleEmphasisModel","itemStyleBlurModel","itemStyleSelectModel","giveGraphic","nodeWidth","nodeHeight","isAboveViewRoot","bg","renderBackground","upperLabelHeight","isDisabled","focusOrIndices","isHighDownDispatcher","setAsHighDownDispatcher","enableHoverFocus","renderContent","disableMorphing","useUpperLabel","processInvisible","visualBorderColor","normalStyle","emphasisStyle","blurStyle","selectStyle","upperLabelWidth","prepareText","contentWidth","contentHeight","nodeStyle","element","rectEl","upperLabelRect","isShow","textPadding","normalizeCssArray","layoutRect","disableLabelLayout","beforeUpdate","truncateMinChar","lineOverflow","addDrillDownIcon","textEmphasisState","isLeafRoot","iconChar","storageName","Ctor","lasts","prepareAnimationWhenHasOld","Displayable","z2InLevel","calculateZ2","prepareAnimationWhenNoOld","lastCfg","oldX","oldY","oldShape","parentOldX","parentOldY","parentOldBg","fadein","renderNode","dualTravel","oldViewChildren","sameTree","isRemoved","processNode","DataDiffer","getKey","getId","storage","willDeleteEls","delEls","willDelete","_oldRootLayout","els","durationOption","easingOption","animationWrap","animationUtil.createWrap","rawIndex","innerStore","targetX","targetY","last","finished","bind","_onPan","_onZoom","BoundingRect","_clearController","rootRect","mouseX","mouseY","zoomDelta","newZoom","zoomMin","zoomMax","zoomScale","m","matrix.create","matrix.translate","matrix.scale","findTarget","_rootToNode","_zoomToNode","link","linkTarget","windowOpen","_breadcrumb","helper.aboveViewRoot","order","treemapVisual","travelTree","getAncestors","designatedVisual","viewRootAncestors","nodeLayout","thisNodeColor","nodeItemStyleModel","visuals","visualName","buildVisuals","modifyHSL","calculateBorderColor","calculateColor","mapping_1","rangeVisual","getRangeVisual","dataExtent","visual","mappingMethod","loop","mapping","VisualMapping","drColorMappingBy","buildVisualMapping","childVisual","childVisuals","mappingType","mapValueToVisual","mapVisual","getValueVisualDefine","modifyAlpha","retrieveValue","zrUtil.retrieve","PATH_BORDER_WIDTH","PATH_GAP_WIDTH","PATH_UPPER_LABEL_SHOW","PATH_UPPER_LABEL_HEIGHT","treemapLayout","ecWidth","ecHeight","seriesOption","containerWidth","containerHeight","viewAbovePath","helper.getPathToRoot","rootSize","currNode","defaultSize","viewArea","area","currNodeValue","getUpperLabelHeight","pow","MAX_SAFE_INTEGER","estimateRootSize","sort_1","options","clearLayouts","viewRootLayout_1","squarify","treeRoot","defaultPosition","targetCenter","calculateRootPosition","prunning","hideChildren","halfGapWidth","layoutOffset","layoutOffsetUpper","totalArea","orderBy","overLeafDepth","zrUtil.filter","statistic","orderedChildren","deletePoint","filterByThreshold","initChildren","rowFixedLength","best","row","score","worst","areaMax","areaMin","squareArea","f","flush","idx0WhenH","idx1WhenH","xy","wh","rowOtherLength","rowLen","wh1","remain","modWH","wh0","nodeInViewAbovePath","intersect","childClipRect","noop","originViewRoot","installTreemapAction","categoryFilter","legendModels","graphSeries","categoriesData","getCategoriesData","getGraph","categoryNames","mapArray","filterSelf","category","isSelected","categoryVisual","paletteScope","categoryNameIdxMap","getColorFromPalette","setItemVisual","symbolVisualList","symbolVisual","categoryIdx","isString","categoryStyle","visualList","normalize","graphEdgeVisual","graph","edgeData","getEdgeData","getEdgeByIndex","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","curvenessList","__curvenessList","getKeyOfEdges","n1","n2","getOppositeKey","keys","split","getEdgeMapLengthWithKey","edgeMap","__edgeMap","getCurvenessForEdge","needReverse","autoCurvenessParams","isArrayParam","edgeArray","getEdgeFromMap","edgeIndex","totalLen","getTotalLengthBetweenNodes","curKey","parityCorrection","isForward","oppositeKey","resValue","simpleLayout","simpleLayoutEdge","eachEdge","zrUtil.retrieve3","p1","vec2.clone","p2","graphSimpleLayout","dimensions_1","concat","getNodeGlobalScale","_symbolRadiansHalf","circularLayout","basedOn","draggingNode","pointer","pointToData","tempX","tempY","v","vec2.normalize","vec2.scale","rotateNodeLabel","_layoutNodesBasedOn","cp1","x12","y12","unitAngle","radianHalf","sumRadian","symbolRadianHalf","asin","halfRemainRadian","fixed","circularRotateLabel","getGraphicEl","graphCircularLayout","scaleAndAdd","vec2.scaleAndAdd","graphForceLayout","preservedPoints_1","preservedPoints","graph_1","nodeData_1","forceModel","initLayout","nodeDataExtent_1","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","rep","edges","d","edgeModel","ignoreForceLayout","forceInstance","inNodes","inEdges","gravity","vec2.create","random","pp","beforeStepCallback","afterStepCallback","initialFriction","friction","warmUp","setFixed","setUnfixed","beforeStep","afterStep","v12","nLen","vec2.sub","vec2.len","j","vec2.set","repFact","vec2.copy","forceLayout","l","getNodeByIndex","stopped","createViewCoordSys","viewList","coordSysType","positions","aspect","getLayoutRect","bbWidth","bbHeight","setViewRect","straightLineProto","graphic.Line","bezierCurveProto","StraightLineShape","isStraightLine","CurveShape","ECLinePath","pointAt","tangentAt","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","makeSymbolTypeValue","lineData","symbolKeepAspect","symbolSizeArr","symbolUtil.normalizeSymbolOffset","symbolOffsetArr","__specifiedRotation","setLinePoints","targetShape","Line","_createLine","subPixelOptimize","createLine","_updateCommonStl","childOfName","getLinePath","emphasisLineStyle","blurLineStyle","selectLineStyle","lineState","lineStateStyle","stateStyle","labelNormalModel","__align","__verticalAlign","__position","__labelDistance","local","linePath","symbolFrom","symbolTo","invScale","__dirty","fromPos","toPos","vector.sub","vector.normalize","setSymbolRotation","textVerticalAlign","halfPercent","tangent","cp","specifiedRotation","LineDraw","LineCtor","_LineCtor","LineGroup","lineDraw","oldLineData","_lineData","_doAdd","_doUpdate","isEffectObject","lineNeedsDraw","newLineData","itemEl","isPointNaN","pts","v1","v2","v3","quadraticAt","curveTool.quadraticAt","v2DistSquare","vec2.distSquare","mathAbs","intersectCurveCircle","curvePoints","p0","radiusSquare","interval","_t","nextDiff","adjustEdge","tmp0","quadraticSubdivide","curveTool.quadraticSubdivide","pts2","fromSymbol","toSymbol","__original","originalPoints","isViewCoordSys","GraphView","_lineDraw","_firstRender","groupNewProp","clearTimeout","_layoutTimeout","layoutAnimation","_startForceLayoutIteration","_layouting","getAdjacentDataIndices","self","setTimeout","disable","createGraphFromNodeEdge","directed","beforeLink","Graph","addNode","linkNameList","validEdges","linkCount","addEdge","coordSysCtor","linkSeriesData","mainData","struct","structAttr","datasAttr","GraphSeriesModel","_categoriesData","fillDataTextStyle","links","_updateCategoriesData","mergeDefaultAndTheme","defaultEmphasis","categoryModel","_categoriesModels","oldGetModel","newGetModel","resolveParentPath","pathArr","newPathArr","oppositeEdges","createEdgeMapForCurveness","sourceName","targetName","nameArr","defaultSeriesFormatTooltip","circular","rotateLabel","force","edgeSymbol","edgeSymbolSize","edgeLabel","formatter","actionInfo","edgeVisual","POST_CHART_LAYOUT","registerCoordinateSystem","create","createView","PointerShape","PointerPath","mathCos","mathSin","formatLabel","labelFormatter","replace","GaugeView","colorList","posInfo","parsePosition","_renderMain","axisLineModel","MainPath","showAxis","axisLineWidth","angleRangeSpan","prevEndAngle","sectors","getColor","_renderTicks","_renderTitleAndDetail","_renderAnchor","_renderPointer","unitX","unitY","minVal","maxVal","splitLineModel","tickModel","splitNumber","subSplitNumber","splitLineLen","tickLen","subStep","splitLineStyle","tickLineStyle","splitLineDistance","splitLine","autoColor","textStyleX","textStyleY","rotateType","tickLine","oldProgressData","_progressEls","progressList","showPointer","progressModel","showProgress","valueExtent","angleExtent","createPointer","pointerModel","pointerWidth","pointerLength","pointerStr","pointerOffset","pointerOffsetX","pointerOffsetY","pointerKeepAspect","createProgress","ProgressPath","isOverlap","progressWidth","isClip","setCommonECData","previousPointer","previousRotate","previousProgress","z2EmphasisLift","anchorModel","anchorSize","anchorType","offsetCenter","anchorKeepAspect","contentGroup","newTitleEls","newDetailEls","showPointerAbove","_titleEls","_detailEls","itemTitleModel","titleOffsetCenter","titleX","titleY","labelEl","itemDetailModel","detailOffsetCenter","detailX","detailY","detailColor","formatter_1","animateLabelValue","fmt","extendParams","GaugeSeriesModel","visualStyleAccessPath","axisLine","overlap","axisTick","axisLabel","fontSize","showAbove","title","detail","fontWeight","lineHeight","opacityAccessPath","FunnelPiece","insideStroke","outsideFill","graphic.Point","FunnelView","funnelPiece","piece","FunnelSeriesModel","toFixed","minSize","gap","funnelAlign","funnelLayout","valueArr","isAscending","getSortedIndices","sizeExtent","itemSize","getLinePoints","val_1","ParallelView","_dataGroup","_initialized","dataGroup","newDataIndex","updateElCommon","addEl","oldDataIndex","createLinePoints","parallelModel","getRect","createGridClipShape","isEmptyValue","numericToNumber","eqNaN","ParallelSeriesModel","visualDrawType","makeDefaultEncode","getRawIndicesByActiveState","activeState","eachActiveState","theActiveState","parallelIndex","inactiveOpacity","activeOpacity","axisDim","dataDimIndex","parallelVisual","opacityMap","active","inactive","itemOpacity","installParallelComponent","BRUSH","SankeyPathShape","SankeyPath","SankeyView","_focusAdjacencyDisabled","sankeyView","curve","n1Layout","node1Model","dragX1","dragY1","n2Layout","node2Model","dragX2","dragY2","edgeLayout","sy","ty","applyCurveStyle","defaultEdgeLabelText","edgeLabelStateModels","getTrajectoryDataIndices","dragX","dragY","localX","localY","ondragend","curveProps","sourceColor","targetColor","SankeySeriesModel","nodeDepth","setNodePosition","localPosition","rawDataOpt","edgeValue","edgeName","nodeValue","nodeGap","layoutIterations","nodeAlign","sankeyLayout","value1","outEdges","getEdgeValue","value2","nodeRawValue","computeNodeValues","iterations","remainEdges","indegreeArr","zeroIndegrees","nextTargetNode","maxNodeDepth","hostGraph","isItemDepth","edgeIdx","Error","maxDepth","nextSourceNode","remainNodes","skNodeHeight","isNodeDepth","moveSinksRight","adjustNodeWithNodeAlign","kx","scaleNodeBreadths","computeNodeBreadths","nodesByBreadth","keyAttr","groupResult","groupData","buckets","prepareNodesByBreadth","minKy","ky","nodeDy","edgeDy","initializeNodeDepth","resolveCollisions","alpha","relaxRightToLeft","relaxLeftToRight","computeNodeDepths","computeEdgeDepths","layoutSankey","nodeDyAttr","weightedTarget","centerTarget","nodeY","weightedSource","centerSource","array","sankeyVisual","minValue_1","maxValue_1","mapValueToColor","customColor","edgeStyle","WhiskerBoxCommonMixin","_hasEncodeRule","encodeRules","addOrdinal","xAxisModel","yAxisModel","xAxisType","yAxisType","coordDims","baseAxisDimIndex","_baseAxisDim","otherAxisDim","axisModels","baseAxisType","otherAxisType","newOptionData_1","newItem","defaultValueDimensions","tooltip","dimsDef","dimensionsCount","BoxplotSeriesModel","defaultTooltip","boxWidth","mixin","BoxplotView","constDim","createNormalBox","updateNormalBoxData","BoxPathShape","BoxPath","ends","transInit","updateMethod","initBaseline","boxplotLayout","result","axisList","seriesModels","groupSeriesByAxis","groupItem","bandWidth","seriesCount","boxWidthList","boxOffsetList","boundList","getBandWidth","maxDataCount_1","boxWidthBound","boxGap","base","calculateBase","halfWidth","cDimIdx","vDimIdx","cDim","vDims","axisDimVal","median","getPoint","end1","end2","end4","end5","addBodyEnd","layEndLine","point1","point2","endCenter","to","layoutSingleSeries","boxplotTransform","upstream","SOURCE_FORMAT_ARRAY_ROWS","throwError","rawData","boxData","outliers","boundIQR","useExtreme","ascList","asc","Q1","quantile","Q2","Q3","bound","low","high","itemNameFormatter","outlier","prepareBoxplotData","config","registerTransform","positiveBorderColorQuery","negativeBorderColorQuery","dojiBorderColorQuery","positiveColorQuery","negativeColorQuery","sign","getBorderColor","candlestickVisual","plan","performRawSeries","isSeriesFiltered","SKIP_PROPS","CandlestickView","_incrementalRenderNormal","isSimpleBox","clipArea","isNormalBoxClipped","setBoxCommon","NormalBoxPathShape","NormalBoxPath","__simpleBox","LargeBoxPathShape","LargeBoxPath","__sign","largePoints","elP","elN","elDoji","setLargeStyle","CandlestickSeriesModel","getShadowDim","brushRect","color0","borderColor0","borderColorDoji","barMaxWidth","barMinWidth","candlestickPreprocessor","seriesItem","zrUtil.isObject","candlestickLayout","candleWidth","retrieve2","calculateCandleWidth","cDimI","vDimsI","openDimI","closeDimI","lowestDimI","highestDimI","tmpIn","tmpOut","hasDojiColor","openVal","closeVal","lowestVal","highestVal","getSign","ocLow","ocHigh","ocLowPoint","ocHighPoint","lowestPoint","highestPoint","subPixelOptimizePoint","makeBrushRect","pmin","pmax","preprocessor","updateRipplePath","rippleGroup","effectCfg","rippleEffectColor","ripplePath","brushType","EffectSymbol","stopEffectAnimation","startEffectAnimation","rippleNumber","period","effectOffset","animate","when","rippleScale","animateStyle","updateEffectAnimation","oldEffectCfg","_effectCfg","DIFFICULT_PROPS","propName","setScale","showEffectOn","EffectScatterView","effectSymbolDraw","_updateGroupTransform","getRoamTransform","matrix.clone","decomposeTransform","EffectScatterSeriesModel","effectType","rippleEffect","number","EffectLine","_updateEffectSymbol","effectModel","_symbolScale","_updateEffectAnimation","roundTrip","constantSpeed","delayExpr","_updateAnimationPoints","_getLineLength","_period","_loop","_roundTrip","delayNum","__t","_animateSymbol","self_1","animator","_updateSymbolPosition","vec2.dist","__p1","__cp1","__p2","lastPos","curveUtil.quadraticAt","quadraticDerivativeAt","curveUtil.quadraticDerivativeAt","tx","__lastT","Polyline","_createPolyline","EffectPolyline","_lastFrame","_lastFramePercent","accLenArr","_offsets","_length","offsets","frame","lastFrame","LargeLinesPathShape","segs","LargeLinesPath","quadraticCurveTo","lineContain.containStroke","quadraticContain.containStroke","LargeLineDraw","lineEl","oldSegs","newSegs","__startIndex","isIncremental","linesLayout","isPolyline","isLarge","lineCoords","segCount","totalCoordsCount","getLineCoordsCount","getLineCoords","LinesView","_updateLineDraw","trailLength","zr","isSvg","painter","getType","getLayer","clear","_lastZlevel","configLayer","motionBlur","_showEffect","lastFrameAlpha","_clearLayer","hasEffect","_hasEffet","_isPolyline","Uint32Arr","Uint32Array","Float64Arr","Float64Array","compatEc2","coords","fromName","toName","mergeAll","LinesSeriesModel","_processFlatCoordsArray","_flatCoords","flatCoords","_flatCoordsOffset","flatCoordsOffset","concatArray","_getCoordsFromItemModel","out","startOffset","coordsOffsetAndLenStorage","coordsStorage","coordsCursor","offsetCursor","dataCount","preventIncremental","xAxisIndex","yAxisIndex","effect","linesVisual","dataEach","HeatmapLayer","blurSize","pointSize","maxOpacity","minOpacity","_gradientPixels","inRange","outOfRange","canvas","platformApi","createCanvas","colorFunc","isInRange","brush","_getBrush","gradientInRange","_getGradient","gradientOutOfRange","globalAlpha","drawImage","imageData","getImageData","pixels","pixelLen","diffOpacity","gradientOffset","putImageData","brushCanvas","_brushCanvas","clearRect","beginPath","arc","gradientPixels","pixelsSingleState","Uint8ClampedArray","isGeoCoordSys","HeatmapView","visualMapOfThisSeries","visualMap","eachTargetSeries","targetSeries","_renderOnCartesianAndCalendar","_renderOnGeo","xAxisExtent","yAxisExtent","isCartesian2d","xAxis","yAxis","dataDims","dataDimX","dataDimY","dataToRect","contentShape","emphasisModel_1","rawValue","visualMapModel","inRangeVisuals","targetVisuals","outOfRangeVisuals","hmLayer","_hmLayer","roamTransform","lng","lat","dataSpan","getIsInContinuousRange","pieceList","selected","lastIndex","getIsInPiecewiseRange","getPieceList","getNormalizer","getColorMapper","img","graphic.Image","HeatmapSeriesModel","coordSysCreator","BAR_BORDER_WIDTH_QUERY","LAYOUT_ATTRS","posDesc","pathForLineWidth","PictorialBarView","coordSysRect","master","ecSize","coordSysExtent","categoryDim","symbolMeta","getSymbolMeta","bar","createBar","updateCommon","pictorialShapeStr","getShapeStr","__pictorialShapeStr","bundle","__pictorialBundle","bundlePosition","symbolRepeat","createOrUpdateRepeatSymbols","createOrUpdateSingleSymbol","createOrUpdateBarRect","createOrUpdateClip","updateBar","__pictorialSymbolMeta","removeBar","symbolClip","symbolPosition","symbolPatternSize","symbolRepeatDirection","outputSymbolMeta","boundingLength","symbolBoundingData","zeroPx","pxSignIdx","symbolBoundingExtent","convertToCoordOnAxis","repeatCutLength","isXAxis","isInverse","pxSign","prepareBarLength","parsedSymbolSize","categorySize","symbolScale","prepareSymbolSize","valueLineWidth","getLineScale","prepareLineWidth","unitLength","pathLen","absBoundingLength","symbolMargin","hasEndGap","lastIndexOf","symbolMarginNumeric","uLenWithMargin","endFix","repeatSpecified","isNumeric","repeatTimes","toIntTimes","sizeFix","pathPosition","barRectShape","prepareLayoutInfo","parse","createPath","unit","eachPath","__pictorialAnimationIndex","__pictorialRepeatTimes","updateAttr","makeTarget","mainPath","__pictorialMainPath","barRect","__pictorialBarRect","__pictorialClipPath","getAnimationDelayParams","labelRect","paths","context","immediateAttrs","animationAttrs","barPositionOutside","times","roundedTimes","PictorialBarSeriesModel","defaultSymbol","stack","barGap","ThemeRiverView","_layers","layersSeries","getLayerSeries","boundaryGap","keyGetter","dataDiffer","_layersSeries","newLayersGroups","process","oldLayersGroups","points0","textLayout","layerGroup","ThemeRiverSeriesModel","fixData","rawDataLength","timeValueKeys","layerData","dataList","layerNum","timeValue","getReferringComponents","SINGLE_REFERRING","filterData","dimensionsDefine","single","lenCount","indexArr","timeDim","layerSeries","index1","index2","getAxisTooltipData","nestestValue","minDist","nearestIdx","pointNum","theValue","dataIndices","singleAxisIndex","themeRiverLayout","numberUtil.parsePercent","doThemeRiverLayout","baseY0","layerPoints","singleLayer","sums","temp","computeBaseline","baseLine","layerIndex","SunburstPiece","_seriesModel","_ecModel","createOrUpdatePatternFromDecal","itemStyleModel","labelMinAngle","isNormalShown","getLabelAttr","stateAttr","DISPLAY_STATES","labelStateModel","isNormal","isShown","sectorState","labelColor","labelPadding","flipStartAngle","flipEndAngle","midAngleNormal","normalizeRadian","needsFlip","isRadianAroundZero","dirtyStyle","ROOT_TO_NODE_ACTION","HIGHLIGHT_ACTION","SunburstView","newRoot","renderLabelForZeroData","newChildren","oldChildren","_oldChildren","newNode","virtualPiece","targetFound","SunburstSeriesModel","_levelModels","getLevelModel","blur","sunburstLayout","rootDepth","renderRollupNode","rPerLevel","rStart","rEnd","r0_1","r_1","radius_1","siblingAngle_1","sortOrder","sortTargets","isAsc_1","sunburstVisual","treeHeight","lift","pickColor","installSunburstAction","STYLE_VISUAL_TYPE","NON_STYLE_VISUAL_PROPS","legendIcon","customInnerStore","CustomSeriesModel","currentZLevel","currentZ","EMPHASIS","NORMAL","BLUR","SELECT","STATES","PATH_ITEM_STYLE","PATH_LABEL","DEFAULT_TRANSITION","attachedTxInfoTmp","prepareCustoms","prepareCartesian2d","prepareGeo","prepareSingleAxis","preparePolar","calendar","prepareCalendar","isPath","graphicUtil.Path","isDisplayable","CustomChartView","customSeries","renderItem","makeRenderItem","createOrUpdateItem","applyLeaveTransition","oldEl","setIncrementalAndHoverLayer","graphicUtil.traverseElements","filterForExposedEvent","eventType","targetEl","packedEvent","elementName","createEl","elOption","graphicType","pathRect","pathData","getPathData","graphicUtil.makePath","customPathData","graphicUtil.Image","customImagePath","graphicUtil.Text","graphicUtil.Group","Clz","graphicUtil.getShapeClass","customGraphicType","z2SelectLift","updateElNormal","attachedTxInfo","stopPreviousKeyframeAnimationAndRestore","txCfgOpt","cfg","transition","styleOpt","textOptionStyle","hasOwn","textFill","textStroke","decalPattern","decalObj","__decalPattern","applyUpdateTransition","clearStyle","applyKeyframeAnimation","keyframeAnimation","updateElOnState","elStateOpt","elDisplayable","stateObj","existingEmphasisState","updateZForEachState","retrieveStateOption","optZ2","prepareResult","currDataIndexInside","currItemModel","userAPI","getDevicePixelRatio","dataIndexInside","userProps","getItemStyleModel","getLabelModel","labelStyleHelper.createTextStyle","labelStyleHelper.createTextConfig","preFetchFromExtra","convertToEC4StyleForCustomSerise","applyUserPropsAfter","legacy","ordinalRawValue","styleEmphasis","style_1","barLayout","getLayoutOnAxis","currentSeriesIndices","getCurrentSeriesIndices","font","labelStyleHelper.getFont","userParams","dataInsideLength","encode","wrapEncodeDef","currItemStyleModels","currLabelModels","seriesItemStyleModels","seriesLabelModels","actionType","extra","encodeDef","isExtraCoord","coordDimIndex","existsEl","doCreateOrUpdateEl","toBeReplacedIdx","doesElNeedRecreate","childrenRef","sourceEl","clearStates","copyTransform","morph","conOpt","isLegacy","processTxInfo","txConOptNormal","txConOptEmphasis","txConOptBlur","txConOptSelect","txConStlOptNormal","txConOptOtherState","retrieveStyleOptionOnState","doCreateOrUpdateAttachedTx","clipPathOpt","doCreateOrUpdateClipPath","otherStateOpt","updateZ","newLen","mergeChildren","$mergeChildren","byName","diffChildrenByName","notMerge","processAddUpdate","processRemove","newChild","oldChild","childCount","removeChildFromGroup","replaceAt","elInner","elOptionType","elOptionShape","elOptionStyle","isUniversalTransitionEnabled","stateOpt","elType","txCfg","txConOpt","isEC4CompatibleStyle","convertResult","convertFromEC4CompatibleStyle","txConOptNormal_1","stateOptionNormal","stateOption","childOption"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137]}