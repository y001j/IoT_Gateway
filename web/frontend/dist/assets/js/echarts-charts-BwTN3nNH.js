import{b0 as e}from"./vendor-CG-KndAb.js";import{m as t,c as a,S as i,g as n,a as o,p as r,e as s,b as l,C as u,d,f as c,h,i as p,r as g,j as f,l as y,u as m,s as v,k as x,n as b,o as S,q as _,t as w,v as I,w as M,x as L,y as D,z as A,A as C,B as N,D as T,E as P,F as E,G as R,H as V,I as z,J as k,K as O,L as G,M as B,N as F,O as W,P as Y,Q as H,R as X,T as U,U as Z,V as j,W as q,X as K,Y as J,Z as Q,_ as $,$ as ee,a0 as te,a1 as ae,a2 as ie,a3 as ne,a4 as oe,a5 as re,a6 as se,a7 as le,a8 as ue,a9 as de,aa as ce,ab as he,ac as pe,ad as ge,ae as fe,af as ye,ag as me,ah as ve,ai as xe,aj as be,ak as Se,al as _e,am as we,an as Ie,ao as Me,ap as Le,aq as De,ar as Ae,as as Ce,at as Ne,au as Te,av as Pe,aw as Ee,ax as Re,ay as Ve,az as ze,aA as ke,aB as Oe,aC as Ge,aD as Be,aE as Fe,aF as We,aG as Ye,aH as He,aI as Xe,aJ as Ue,aK as Ze,aL as je,aM as qe,aN as Ke,aO as Je,aP as Qe,aQ as $e,aR as et,aS as tt,aT as at,aU as it,aV as nt,aW as ot,aX as rt,aY as st,aZ as lt,a_ as ut,a$ as dt,b0 as ct,b1 as ht,b2 as pt,b3 as gt,b4 as ft}from"./echarts-core-DHH3aYep.js";import{i as yt,c as mt,m as vt,e as xt,a as bt,G as St,Z as _t,b as wt,d as It,f as Mt,P as Lt,g as Dt,h as At,j as Ct,R as Nt,S as Tt,k as Pt,l as Et,n as Rt,L as Vt,o as zt,p as kt,q as Ot,r as Gt,s as Bt,t as Ft,B as Wt,u as Yt,v as Ht,w as Xt,C as Ut,x as Zt,y as jt,z as qt,A as Kt,D as Jt,E as Qt,F as $t,H as ea,I as ta,J as aa,K as ia,M as na,N as oa,O as ra,Q as sa,T as la,U as ua,V as da,W as ca,X as ha,Y as pa,_ as ga,$ as fa,a0 as ya,a1 as ma,a2 as va,a3 as xa,a4 as ba,a5 as Sa,a6 as _a,a7 as wa,a8 as Ia,a9 as Ma,aa as La,ab as Da,ac as Aa,ad as Ca,ae as Na,af as Ta,ag as Pa,ah as Ea,ai as Ra,aj as Va}from"./echarts-vendor-D7t-5Co9.js";import{i as za,r as ka,c as Oa,a as Ga,M as Ba,b as Fa,R as Wa,o as Ya,u as Ha,d as Xa,e as Ua,f as Za}from"./echarts-components-qRndAGwt.js";function ja(){var e=t();return function(t){var a=e(t),i=t.pipelineContext,n=!!a.large,o=!!a.progressiveRender,r=a.large=!(!i||!i.large),s=a.progressiveRender=!(!i||!i.progressiveRender);return!(n===r&&o===s)&&"reset"}}function qa(e,t,h){h=h||{};var p,g=t.getSourceManager(),f=!1;e?(f=!0,p=a(e)):f=(p=g.getSource()).sourceFormat===i;var y=n(t),m=function(e,t){var a,i=e.get("coordinateSystem"),n=u.get(i);return t&&t.coordSysDims&&(a=vt(t.coordSysDims,function(e){var a={name:e},i=t.axisMap.get(e);if(i){var n=i.get("type");a.type=d(n)}return a})),a||(a=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),a}(t,y),v=h.useEncodeDefaulter,x=yt(v)?v:v?mt(o,m,t):null,b={coordDimensions:m,generateCoord:h.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:x,canOmitUnusedDimensions:!f},S=r(p,b),_=function(e,t,a){var i,n;return a&&xt(e,function(e,o){var r=e.coordDim,s=a.categoryAxisMap.get(r);s&&(null==i&&(i=o),e.ordinalMeta=s.getOrdinalMeta(),t&&(e.createInvertedIndices=!0)),null!=e.otherDims.itemName&&(n=!0)}),n||null==i||(e[i].otherDims.itemName=0),i}(S.dimensions,h.createInvertedIndices,y),w=f?null:g.getSharedDataStore(S),I=s(t,{schema:S,store:w}),M=new l(S,t);M.setCalculationInfo(I);var L=null!=_&&function(e){if(e.sourceFormat===i){var t=function(e){var t=0;for(;t<e.length&&null==e[t];)t++;return e[t]}(e.data||[]);return!bt(c(t))}}(p)?function(e,t,a,i){return i===_?a:this.defaultDimValueGetter(e,t,a,i)}:null;return M.hasItemOption=!1,M.initData(f?p:w,null,L),M}var Ka=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.hasSymbolVisual=!0,e}return e(a,t),a.prototype.getInitialData=function(e){return qa(null,this,{useEncodeDefaulter:!0})},a.prototype.getLegendIcon=function(e){var t=new St,a=h("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);t.add(a),a.setStyle(e.lineStyle);var i=this.getData().getVisual("symbol"),n=this.getData().getVisual("symbolRotate"),o="none"===i?"circle":i,r=.8*e.itemHeight,s=h(o,(e.itemWidth-r)/2,(e.itemHeight-r)/2,r,r,e.itemStyle.fill);t.add(s),s.setStyle(e.itemStyle);var l="inherit"===e.iconRotate?n:e.iconRotate||0;return s.rotation=l*Math.PI/180,s.setOrigin([e.itemWidth/2,e.itemHeight/2]),o.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),t},a.type="series.line",a.dependencies=["grid","polar"],a.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},a}(p);function Ja(e,t){var a=e.mapDimensionsAll("defaultedLabel"),i=a.length;if(1===i){var n=g(e,t,a[0]);return null!=n?n+"":null}if(i){for(var o=[],r=0;r<a.length;r++)o.push(g(e,t,a[r]));return o.join(" ")}}function Qa(e,t){var a=e.mapDimensionsAll("defaultedLabel");if(!bt(t))return t+"";for(var i=[],n=0;n<a.length;n++){var o=e.getDimensionIndex(a[n]);o>=0&&i.push(t[o])}return i.join(" ")}var $a=function(t){function a(e,a,i,n){var o=t.call(this)||this;return o.updateData(e,a,i,n),o}return e(a,t),a.prototype._createSymbol=function(e,t,a,i,n){this.removeAll();var o=h(e,-1,-1,2,2,null,n);o.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),o.drift=ei,this._symbolType=e,this.add(o)},a.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},a.prototype.getSymbolType=function(){return this._symbolType},a.prototype.getSymbolPath=function(){return this.childAt(0)},a.prototype.highlight=function(){f(this.childAt(0))},a.prototype.downplay=function(){y(this.childAt(0))},a.prototype.setZ=function(e,t){var a=this.childAt(0);a.zlevel=e,a.z=t},a.prototype.setDraggable=function(e,t){var a=this.childAt(0);a.draggable=e,a.cursor=!t&&e?"move":a.cursor},a.prototype.updateData=function(e,t,i,n){this.silent=!1;var o=e.getItemVisual(t,"symbol")||"circle",r=e.hostModel,s=a.getSymbolSize(e,t),l=o!==this._symbolType,u=n&&n.disableAnimation;if(l){var d=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(o,e,t,s,d)}else{(h=this.childAt(0)).silent=!1;var c={scaleX:s[0]/2,scaleY:s[1]/2};u?h.attr(c):m(h,c,r,t),v(h)}if(this._updateCommon(e,t,s,i,n),l){var h=this.childAt(0);if(!u){c={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,x(h,c,r,t)}}u&&this.childAt(0).stopAnimation("leave")},a.prototype._updateCommon=function(e,t,a,i,n){var o,r,s,l,u,d,c,h,p,g=this.childAt(0),f=e.hostModel;if(i&&(o=i.emphasisItemStyle,r=i.blurItemStyle,s=i.selectItemStyle,l=i.focus,u=i.blurScope,c=i.labelStatesModels,h=i.hoverScale,p=i.cursorStyle,d=i.emphasisDisabled),!i||e.hasItemOption){var y=i&&i.itemModel?i.itemModel:e.getItemModel(t),m=y.getModel("emphasis");o=m.getModel("itemStyle").getItemStyle(),s=y.getModel(["select","itemStyle"]).getItemStyle(),r=y.getModel(["blur","itemStyle"]).getItemStyle(),l=m.get("focus"),u=m.get("blurScope"),d=m.get("disabled"),c=b(y),h=m.getShallow("scale"),p=y.getShallow("cursor")}var v=e.getItemVisual(t,"symbolRotate");g.attr("rotation",(v||0)*Math.PI/180||0);var x=S(e.getItemVisual(t,"symbolOffset"),a);x&&(g.x=x[0],g.y=x[1]),p&&g.attr("cursor",p);var I=e.getItemVisual(t,"style"),M=I.fill;if(g instanceof _t){var L=g.style;g.useStyle(wt({image:L.image,x:L.x,y:L.y,width:L.width,height:L.height},I))}else g.__isEmptyBrush?g.useStyle(wt({},I)):g.useStyle(I),g.style.decal=null,g.setColor(M,n&&n.symbolInnerColor),g.style.strokeNoScale=!0;var D=e.getItemVisual(t,"liftZ"),A=this._z2;null!=D?null==A&&(this._z2=g.z2,g.z2+=D):null!=A&&(g.z2=A,this._z2=null);var C=n&&n.useNameLabel;_(g,c,{labelFetcher:f,labelDataIndex:t,defaultText:function(t){return C?e.getName(t):Ja(e,t)},inheritColor:M,defaultOpacity:I.opacity}),this._sizeX=a[0]/2,this._sizeY=a[1]/2;var N=g.ensureState("emphasis");N.style=o,g.ensureState("select").style=s,g.ensureState("blur").style=r;var T=null==h||!0===h?Math.max(1.1,3/this._sizeY):isFinite(h)&&h>0?+h:1;N.scaleX=this._sizeX*T,N.scaleY=this._sizeY*T,this.setSymbolScale(1),w(this,l,u,d)},a.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},a.prototype.fadeOut=function(e,t,a){var i=this.childAt(0),n=I(this).dataIndex,o=a&&a.animation;if(this.silent=i.silent=!0,a&&a.fadeLabel){var r=i.getTextContent();r&&M(r,{style:{opacity:0}},t,{dataIndex:n,removeOpt:o,cb:function(){i.removeTextContent()}})}else i.removeTextContent();M(i,{style:{opacity:0},scaleX:0,scaleY:0},t,{dataIndex:n,cb:e,removeOpt:o})},a.getSymbolSize=function(e,t){return L(e.getItemVisual(t,"symbolSize"))},a}(St);function ei(e,t){this.parent.drift(e,t)}function ti(e,t,a,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(a))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(a,"symbol")}function ai(e){return null==e||It(e)||(e={isIgnore:e}),e||{}}function ii(e){var t=e.hostModel,a=t.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:b(t),cursorStyle:t.get("cursor")}}var ni=function(){function e(e){this.group=new St,this._SymbolCtor=e||$a}return e.prototype.updateData=function(e,t){this._progressiveEls=null,t=ai(t);var a=this.group,i=e.hostModel,n=this._data,o=this._SymbolCtor,r=t.disableAnimation,s=ii(e),l={disableAnimation:r},u=t.getSymbolPoint||function(t){return e.getItemLayout(t)};n||a.removeAll(),e.diff(n).add(function(i){var n=u(i);if(ti(e,n,i,t)){var r=new o(e,i,s,l);r.setPosition(n),e.setItemGraphicEl(i,r),a.add(r)}}).update(function(d,c){var h=n.getItemGraphicEl(c),p=u(d);if(ti(e,p,d,t)){var g=e.getItemVisual(d,"symbol")||"circle",f=h&&h.getSymbolType&&h.getSymbolType();if(!h||f&&f!==g)a.remove(h),(h=new o(e,d,s,l)).setPosition(p);else{h.updateData(e,d,s,l);var y={x:p[0],y:p[1]};r?h.attr(y):m(h,y,i)}a.add(h),e.setItemGraphicEl(d,h)}else a.remove(h)}).remove(function(e){var t=n.getItemGraphicEl(e);t&&t.fadeOut(function(){a.remove(t)},i)}).execute(),this._getSymbolPoint=u,this._data=e},e.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(t,a){var i=e._getSymbolPoint(a);t.setPosition(i),t.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=ii(e),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t,a){function i(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],a=ai(a);for(var n=e.start;n<e.end;n++){var o=t.getItemLayout(n);if(ti(t,o,n,a)){var r=new this._SymbolCtor(t,n,this._seriesScope);r.traverse(i),r.setPosition(o),this.group.add(r),t.setItemGraphicEl(n,r),this._progressiveEls.push(r)}}},e.prototype.eachRendered=function(e){D(this._progressiveEls||this.group,e)},e.prototype.remove=function(e){var t=this.group,a=this._data;a&&e?a.eachItemGraphicEl(function(e){e.fadeOut(function(){t.remove(e)},a.hostModel)}):t.removeAll()},e}();function oi(e,t,a){var i=e.getBaseAxis(),n=e.getOtherAxis(i),o=function(e,t){var a=0,i=e.scale.getExtent();"start"===t?a=i[0]:"end"===t?a=i[1]:Mt(t)&&!isNaN(t)?a=t:i[0]>0?a=i[0]:i[1]<0&&(a=i[1]);return a}(n,a),r=i.dim,s=n.dim,l=t.mapDimension(s),u=t.mapDimension(r),d="x"===s||"radius"===s?1:0,c=vt(e.dimensions,function(e){return t.mapDimension(e)}),h=!1,p=t.getCalculationInfo("stackResultDimension");return A(t,c[0])&&(h=!0,c[0]=p),A(t,c[1])&&(h=!0,c[1]=p),{dataDimsForPoint:c,valueStart:o,valueAxisDim:s,baseAxisDim:r,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:d,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function ri(e,t,a,i){var n=NaN;e.stacked&&(n=a.get(a.getCalculationInfo("stackedOverDimension"),i)),isNaN(n)&&(n=e.valueStart);var o=e.baseDataOffset,r=[];return r[o]=a.get(e.baseDim,i),r[1-o]=n,t.dataToPoint(r)}var si=Math.min,li=Math.max;function ui(e,t){return isNaN(e)||isNaN(t)}function di(e,t,a,i,n,o,r,s,l){for(var u,d,c,h,p,g,f=a,y=0;y<i;y++){var m=t[2*f],v=t[2*f+1];if(f>=n||f<0)break;if(ui(m,v)){if(l){f+=o;continue}break}if(f===a)e[o>0?"moveTo":"lineTo"](m,v),c=m,h=v;else{var x=m-u,b=v-d;if(x*x+b*b<.5){f+=o;continue}if(r>0){for(var S=f+o,_=t[2*S],w=t[2*S+1];_===m&&w===v&&y<i;)y++,f+=o,_=t[2*(S+=o)],w=t[2*S+1],x=(m=t[2*f])-u,b=(v=t[2*f+1])-d;var I=y+1;if(l)for(;ui(_,w)&&I<i;)I++,_=t[2*(S+=o)],w=t[2*S+1];var M=.5,L=0,D=0,A=void 0,C=void 0;if(I>=i||ui(_,w))p=m,g=v;else{L=_-u,D=w-d;var N=m-u,T=_-m,P=v-d,E=w-v,R=void 0,V=void 0;if("x"===s){var z=L>0?1:-1;p=m-z*(R=Math.abs(N))*r,g=v,A=m+z*(V=Math.abs(T))*r,C=v}else if("y"===s){var k=D>0?1:-1;p=m,g=v-k*(R=Math.abs(P))*r,A=m,C=v+k*(V=Math.abs(E))*r}else R=Math.sqrt(N*N+P*P),p=m-L*r*(1-(M=(V=Math.sqrt(T*T+E*E))/(V+R))),g=v-D*r*(1-M),C=v+D*r*M,A=si(A=m+L*r*M,li(_,m)),C=si(C,li(w,v)),A=li(A,si(_,m)),g=v-(D=(C=li(C,si(w,v)))-v)*R/V,p=si(p=m-(L=A-m)*R/V,li(u,m)),g=si(g,li(d,v)),A=m+(L=m-(p=li(p,si(u,m))))*V/R,C=v+(D=v-(g=li(g,si(d,v))))*V/R}e.bezierCurveTo(c,h,p,g,m,v),c=A,h=C}else e.lineTo(m,v)}u=m,d=v,f+=o}return y}var ci=function(){return function(){this.smooth=0,this.smoothConstraint=!0}}(),hi=function(t){function a(e){var a=t.call(this,e)||this;return a.type="ec-polyline",a}return e(a,t),a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new ci},a.prototype.buildPath=function(e,t){var a=t.points,i=0,n=a.length/2;if(t.connectNulls){for(;n>0&&ui(a[2*n-2],a[2*n-1]);n--);for(;i<n&&ui(a[2*i],a[2*i+1]);i++);}for(;i<n;)i+=di(e,a,i,n,n,1,t.smooth,t.smoothMonotone,t.connectNulls)+1},a.prototype.getPointOn=function(e,t){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var a,i,n=this.path.data,o=Lt.CMD,r="x"===t,s=[],l=0;l<n.length;){var u=void 0,d=void 0,c=void 0,h=void 0,p=void 0,g=void 0,f=void 0;switch(n[l++]){case o.M:a=n[l++],i=n[l++];break;case o.L:if(u=n[l++],d=n[l++],(f=r?(e-a)/(u-a):(e-i)/(d-i))<=1&&f>=0){var y=r?(d-i)*f+i:(u-a)*f+a;return r?[e,y]:[y,e]}a=u,i=d;break;case o.C:u=n[l++],d=n[l++],c=n[l++],h=n[l++],p=n[l++],g=n[l++];var m=r?Dt(a,u,c,p,e,s):Dt(i,d,h,g,e,s);if(m>0)for(var v=0;v<m;v++){var x=s[v];if(x<=1&&x>=0){y=r?At(i,d,h,g,x):At(a,u,c,p,x);return r?[e,y]:[y,e]}}a=p,i=g}}},a}(Ct),pi=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a}(ci),gi=function(t){function a(e){var a=t.call(this,e)||this;return a.type="ec-polygon",a}return e(a,t),a.prototype.getDefaultShape=function(){return new pi},a.prototype.buildPath=function(e,t){var a=t.points,i=t.stackedOnPoints,n=0,o=a.length/2,r=t.smoothMonotone;if(t.connectNulls){for(;o>0&&ui(a[2*o-2],a[2*o-1]);o--);for(;n<o&&ui(a[2*n],a[2*n+1]);n++);}for(;n<o;){var s=di(e,a,n,o,o,1,t.smooth,r,t.connectNulls);di(e,i,n+s-1,s,o,-1,t.stackedOnSmooth,r,t.connectNulls),n+=s+1,e.closePath()}},a}(Ct);function fi(e,t,a,i,n){var o=e.getArea(),r=o.x,s=o.y,l=o.width,u=o.height,d=a.get(["lineStyle","width"])||0;r-=d/2,s-=d/2,l+=d,u+=d,l=Math.ceil(l),r!==Math.floor(r)&&(r=Math.floor(r),l++);var c=new Nt({shape:{x:r,y:s,width:l,height:u}});if(t){var h=e.getBaseAxis(),p=h.isHorizontal(),g=h.inverse;p?(g&&(c.shape.x+=l),c.shape.width=0):(g||(c.shape.y+=u),c.shape.height=0);var f=yt(n)?function(e){n(e,c)}:null;x(c,{shape:{width:l,height:u,x:r,y:s}},a,null,i,f)}return c}function yi(e,t,a){var i=e.getArea(),n=N(i.r0,1),o=N(i.r,1),r=new Tt({shape:{cx:N(e.cx,1),cy:N(e.cy,1),r0:n,r:o,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});t&&("angle"===e.getBaseAxis().dim?r.shape.endAngle=i.startAngle:r.shape.r=n,x(r,{shape:{endAngle:i.endAngle,r:o}},a));return r}function mi(e,t,a,i,n){return e?"polar"===e.type?yi(e,t,a):"cartesian2d"===e.type?fi(e,t,a,i,n):null:null}function vi(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return;return!0}}function xi(e){for(var t=1/0,a=1/0,i=-1/0,n=-1/0,o=0;o<e.length;){var r=e[o++],s=e[o++];isNaN(r)||(t=Math.min(r,t),i=Math.max(r,i)),isNaN(s)||(a=Math.min(s,a),n=Math.max(s,n))}return[[t,a],[i,n]]}function bi(e,t){var a=xi(e),i=a[0],n=a[1],o=xi(t),r=o[0],s=o[1];return Math.max(Math.abs(i[0]-r[0]),Math.abs(i[1]-r[1]),Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]))}function Si(e){return Mt(e)?e:e?.5:0}function _i(e,t,a,i,n){var o=a.getBaseAxis(),r="x"===o.dim||"radius"===o.dim?0:1,s=[],l=0,u=[],d=[],c=[],h=[];if(n){for(l=0;l<e.length;l+=2){var p=t||e;isNaN(p[l])||isNaN(p[l+1])||h.push(e[l],e[l+1])}e=h}for(l=0;l<e.length-2;l+=2)switch(c[0]=e[l+2],c[1]=e[l+3],d[0]=e[l],d[1]=e[l+1],s.push(d[0],d[1]),i){case"end":u[r]=c[r],u[1-r]=d[1-r],s.push(u[0],u[1]);break;case"middle":var g=(d[r]+c[r])/2,f=[];u[r]=f[r]=g,u[1-r]=d[1-r],f[1-r]=c[1-r],s.push(u[0],u[1]),s.push(f[0],f[1]);break;default:u[r]=d[r],u[1-r]=c[1-r],s.push(u[0],u[1])}return s.push(e[l++],e[l++]),s}function wi(e,t,a){var i=e.getVisual("visualMeta");if(i&&i.length&&e.count()&&"cartesian2d"===t.type){for(var n,o,r=i.length-1;r>=0;r--){var s=e.getDimensionInfo(i[r].dimension);if("x"===(n=s&&s.coordDim)||"y"===n){o=i[r];break}}if(o){var l=t.getAxis(n),u=vt(o.stops,function(e){return{coord:l.toGlobalCoord(l.dataToCoord(e.value)),color:e.color}}),d=u.length,c=o.outerColors.slice();d&&u[0].coord>u[d-1].coord&&(u.reverse(),c.reverse());var h=function(e,t){var a,i,n=[],o=e.length;function r(e,t,a){var i=e.coord,n=(a-i)/(t.coord-i);return{coord:a,color:zt(n,[e.color,t.color])}}for(var s=0;s<o;s++){var l=e[s],u=l.coord;if(u<0)a=l;else{if(u>t){i?n.push(r(i,l,t)):a&&n.push(r(a,l,0),r(a,l,t));break}a&&(n.push(r(a,l,0)),a=null),n.push(l),i=l}}return n}(u,"x"===n?a.getWidth():a.getHeight()),p=h.length;if(!p&&d)return u[0].coord<0?c[1]?c[1]:u[d-1].color:c[0]?c[0]:u[0].color;var g=h[0].coord-10,f=h[p-1].coord+10,y=f-g;if(y<.001)return"transparent";xt(h,function(e){e.offset=(e.coord-g)/y}),h.push({offset:p?h[p-1].offset:.5,color:c[1]||"transparent"}),h.unshift({offset:p?h[0].offset:.5,color:c[0]||"transparent"});var m=new Vt(0,0,0,0,h,!0);return m[n]=g,m[n+"2"]=f,m}}}function Ii(e,t,a){var i=e.get("showAllSymbol"),n="auto"===i;if(!i||n){var o=a.getAxesByScale("ordinal")[0];if(o&&(!n||!function(e,t){var a=e.getExtent(),i=Math.abs(a[1]-a[0])/e.scale.count();isNaN(i)&&(i=0);for(var n=t.count(),o=Math.max(1,Math.round(n/5)),r=0;r<n;r+=o)if(1.5*$a.getSymbolSize(t,r)[e.isHorizontal()?1:0]>i)return!1;return!0}(o,t))){var r=t.mapDimension(o.dim),s={};return xt(o.getViewLabels(),function(e){var t=o.scale.getRawOrdinalNumber(e.tickValue);s[t]=1}),function(e){return!s.hasOwnProperty(t.get(r,e))}}}}function Mi(e,t){return isNaN(e)||isNaN(t)}function Li(e,t){return[e[2*t],e[2*t+1]]}function Di(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<G.length;t++)if(e.get([G[t],"endLabel","show"]))return!0;return!1}function Ai(e,t,a,i){if(O(t,"cartesian2d")){var n=i.getModel("endLabel"),o=n.get("valueAnimation"),r=i.getData(),s={lastFrameIndex:0},l=Di(i)?function(a,i){e._endLabelOnDuring(a,i,r,s,o,n,t)}:null,u=t.getBaseAxis().isHorizontal(),d=fi(t,a,i,function(){var t=e._endLabel;t&&a&&null!=s.originalX&&t.attr({x:s.originalX,y:s.originalY})},l);if(!i.get("clip",!0)){var c=d.shape,h=Math.max(c.width,c.height);u?(c.y-=h,c.height+=2*h):(c.x-=h,c.width+=2*h)}return l&&l(1,d),d}return yi(t,a,i)}var Ci=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.init=function(){var e=new St,t=new ni;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e,this._changePolyState=Pt(this._changePolyState,this)},a.prototype.render=function(e,t,a){var i=e.coordinateSystem,n=this.group,o=e.getData(),r=e.getModel("lineStyle"),s=e.getModel("areaStyle"),l=o.getLayout("points")||[],u="polar"===i.type,d=this._coordSys,c=this._symbolDraw,h=this._polyline,p=this._polygon,g=this._lineGroup,f=!t.ssr&&e.get("animation"),y=!s.isEmpty(),m=s.get("origin"),v=oi(i,o,m),b=y&&function(e,t,a){if(!a.valueDim)return[];for(var i=t.count(),n=C(2*i),o=0;o<i;o++){var r=ri(a,e,t,o);n[2*o]=r[0],n[2*o+1]=r[1]}return n}(i,o,v),S=e.get("showSymbol"),_=e.get("connectNulls"),M=S&&!u&&Ii(e,o,i),L=this._data;L&&L.eachItemGraphicEl(function(e,t){e.__temp&&(n.remove(e),L.setItemGraphicEl(t,null))}),S||c.remove(),n.add(g);var D,A=!u&&e.get("step");i&&i.getArea&&e.get("clip",!0)&&(null!=(D=i.getArea()).width?(D.x-=.1,D.y-=.1,D.width+=.2,D.height+=.2):D.r0&&(D.r0-=.5,D.r+=.5)),this._clipShapeForSymbol=D;var N=wi(o,i,a)||o.getVisual("style")[o.getVisual("drawType")];if(h&&d.type===i.type&&A===this._step){y&&!p?p=this._newPolygon(l,b):p&&!y&&(g.remove(p),p=this._polygon=null),u||this._initOrUpdateEndLabel(e,i,T(N));var E=g.getClipPath();if(E){var R=Ai(this,i,!1,e);x(E,{shape:R.shape},e)}else g.setClipPath(Ai(this,i,!0,e));S&&c.updateData(o,{isIgnore:M,clipShape:D,disableAnimation:!0,getSymbolPoint:function(e){return[l[2*e],l[2*e+1]]}}),vi(this._stackedOnPoints,b)&&vi(this._points,l)||(f?this._doUpdateAnimation(o,b,i,a,A,m,_):(A&&(b&&(b=_i(b,l,i,A,_)),l=_i(l,null,i,A,_)),h.setShape({points:l}),p&&p.setShape({points:l,stackedOnPoints:b})))}else S&&c.updateData(o,{isIgnore:M,clipShape:D,disableAnimation:!0,getSymbolPoint:function(e){return[l[2*e],l[2*e+1]]}}),f&&this._initSymbolLabelAnimation(o,i,D),A&&(b&&(b=_i(b,l,i,A,_)),l=_i(l,null,i,A,_)),h=this._newPolyline(l),y?p=this._newPolygon(l,b):p&&(g.remove(p),p=this._polygon=null),u||this._initOrUpdateEndLabel(e,i,T(N)),g.setClipPath(Ai(this,i,!0,e));var V=e.getModel("emphasis"),z=V.get("focus"),k=V.get("blurScope"),O=V.get("disabled");(h.useStyle(Et(r.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"})),P(h,e,"lineStyle"),h.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"]))&&(h.getState("emphasis").style.lineWidth=+h.style.lineWidth+1);I(h).seriesIndex=e.seriesIndex,w(h,z,k,O);var G=Si(e.get("smooth")),B=e.get("smoothMonotone");if(h.setShape({smooth:G,smoothMonotone:B,connectNulls:_}),p){var F=o.getCalculationInfo("stackedOnSeries"),W=0;p.useStyle(Et(s.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),F&&(W=Si(F.get("smooth"))),p.setShape({smooth:G,stackedOnSmooth:W,smoothMonotone:B,connectNulls:_}),P(p,e,"areaStyle"),I(p).seriesIndex=e.seriesIndex,w(p,z,k,O)}var Y=this._changePolyState;o.eachItemGraphicEl(function(e){e&&(e.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=o,this._coordSys=i,this._stackedOnPoints=b,this._points=l,this._step=A,this._valueOrigin=m,e.get("triggerLineEvent")&&(this.packEventData(e,h),p&&this.packEventData(e,p))},a.prototype.packEventData=function(e,t){I(t).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},a.prototype.highlight=function(e,t,a,i){var n=e.getData(),o=E(n,i);if(this._changePolyState("emphasis"),!(o instanceof Array)&&null!=o&&o>=0){var r=n.getLayout("points"),s=n.getItemGraphicEl(o);if(!s){var l=r[2*o],u=r[2*o+1];if(isNaN(l)||isNaN(u))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,u))return;var d=e.get("zlevel")||0,c=e.get("z")||0;(s=new $a(n,o)).x=l,s.y=u,s.setZ(d,c);var h=s.getSymbolPath().getTextContent();h&&(h.zlevel=d,h.z=c,h.z2=this._polyline.z2+1),s.__temp=!0,n.setItemGraphicEl(o,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else R.prototype.highlight.call(this,e,t,a,i)},a.prototype.downplay=function(e,t,a,i){var n=e.getData(),o=E(n,i);if(this._changePolyState("normal"),null!=o&&o>=0){var r=n.getItemGraphicEl(o);r&&(r.__temp?(n.setItemGraphicEl(o,null),this.group.remove(r)):r.downplay())}else R.prototype.downplay.call(this,e,t,a,i)},a.prototype._changePolyState=function(e){var t=this._polygon;V(this._polyline,e),t&&V(t,e)},a.prototype._newPolyline=function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new hi({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(t),this._polyline=t,t},a.prototype._newPolygon=function(e,t){var a=this._polygon;return a&&this._lineGroup.remove(a),a=new gi({shape:{points:e,stackedOnPoints:t},segmentIgnoreThreshold:2}),this._lineGroup.add(a),this._polygon=a,a},a.prototype._initSymbolLabelAnimation=function(e,t,a){var i,n,o=t.getBaseAxis(),r=o.inverse;"cartesian2d"===t.type?(i=o.isHorizontal(),n=!1):"polar"===t.type&&(i="angle"===o.dim,n=!0);var s=e.hostModel,l=s.get("animationDuration");yt(l)&&(l=l(null));var u=s.get("animationDelay")||0,d=yt(u)?u(null):u;e.eachItemGraphicEl(function(e,o){var s=e;if(s){var c=[e.x,e.y],h=void 0,p=void 0,g=void 0;if(a)if(n){var f=a,y=t.pointToCoord(c);i?(h=f.startAngle,p=f.endAngle,g=-y[1]/180*Math.PI):(h=f.r0,p=f.r,g=y[0])}else{var m=a;i?(h=m.x,p=m.x+m.width,g=e.x):(h=m.y+m.height,p=m.y,g=e.y)}var v=p===h?0:(g-h)/(p-h);r&&(v=1-v);var x=yt(u)?u(o):l*v+d,b=s.getSymbolPath(),S=b.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:x}),S&&S.animateFrom({style:{opacity:0}},{duration:300,delay:x}),b.disableLabelAnimation=!0}})},a.prototype._initOrUpdateEndLabel=function(e,t,a){var i=e.getModel("endLabel");if(Di(e)){var n=e.getData(),o=this._polyline,r=n.getLayout("points");if(!r)return o.removeTextContent(),void(this._endLabel=null);var s=this._endLabel;s||((s=this._endLabel=new Rt({z2:200})).ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var l=function(e){for(var t=e.length/2;t>0&&Mi(e[2*t-2],e[2*t-1]);t--);return t-1}(r);l>=0&&(_(o,b(e,"endLabel"),{inheritColor:a,labelFetcher:e,labelDataIndex:l,defaultText:function(e,t,a){return null!=a?Qa(n,a):Ja(n,e)},enableTextSetter:!0},function(e,t){var a=t.getBaseAxis(),i=a.isHorizontal(),n=a.inverse,o=i?n?"right":"left":"center",r=i?"middle":n?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||r}}}(i,t)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},a.prototype._endLabelOnDuring=function(e,t,a,i,n,o,r){var s=this._endLabel,l=this._polyline;if(s){e<1&&null==i.originalX&&(i.originalX=s.x,i.originalY=s.y);var u=a.getLayout("points"),d=a.hostModel,c=d.get("connectNulls"),h=o.get("precision"),p=o.get("distance")||0,g=r.getBaseAxis(),f=g.isHorizontal(),y=g.inverse,m=t.shape,v=y?f?m.x:m.y+m.height:f?m.x+m.width:m.y,x=(f?p:0)*(y?-1:1),b=(f?0:-p)*(y?-1:1),S=f?"x":"y",_=function(e,t,a){for(var i,n,o=e.length/2,r="x"===a?0:1,s=0,l=-1,u=0;u<o;u++)if(n=e[2*u+r],!isNaN(n)&&!isNaN(e[2*u+1-r]))if(0!==u){if(i<=t&&n>=t||i>=t&&n<=t){l=u;break}s=u,i=n}else i=n;return{range:[s,l],t:(t-i)/(n-i)}}(u,v,S),w=_.range,I=w[1]-w[0],M=void 0;if(I>=1){if(I>1&&!c){var L=Li(u,w[0]);s.attr({x:L[0]+x,y:L[1]+b}),n&&(M=d.getRawValue(w[0]))}else{(L=l.getPointOn(v,S))&&s.attr({x:L[0]+x,y:L[1]+b});var D=d.getRawValue(w[0]),A=d.getRawValue(w[1]);n&&(M=z(a,h,D,A,_.t))}i.lastFrameIndex=w[0]}else{var C=1===e||i.lastFrameIndex>0?w[0]:0;L=Li(u,C);n&&(M=d.getRawValue(C)),s.attr({x:L[0]+x,y:L[1]+b})}if(n){var N=k(s);"function"==typeof N.setLabelText&&N.setLabelText(M)}}},a.prototype._doUpdateAnimation=function(e,t,a,i,n,o,r){var s=this._polyline,l=this._polygon,u=e.hostModel,d=function(e,t,a,i,n,o,r){for(var s=function(e,t){var a=[];return t.diff(e).add(function(e){a.push({cmd:"+",idx:e})}).update(function(e,t){a.push({cmd:"=",idx:t,idx1:e})}).remove(function(e){a.push({cmd:"-",idx:e})}).execute(),a}(e,t),l=[],u=[],d=[],c=[],h=[],p=[],g=[],f=oi(n,t,r),y=e.getLayout("points")||[],m=t.getLayout("points")||[],v=0;v<s.length;v++){var x=s[v],b=!0,S=void 0,_=void 0;switch(x.cmd){case"=":S=2*x.idx,_=2*x.idx1;var w=y[S],I=y[S+1],M=m[_],L=m[_+1];(isNaN(w)||isNaN(I))&&(w=M,I=L),l.push(w,I),u.push(M,L),d.push(a[S],a[S+1]),c.push(i[_],i[_+1]),g.push(t.getRawIndex(x.idx1));break;case"+":var D=x.idx,A=f.dataDimsForPoint,N=n.dataToPoint([t.get(A[0],D),t.get(A[1],D)]);_=2*D,l.push(N[0],N[1]),u.push(m[_],m[_+1]);var T=ri(f,n,t,D);d.push(T[0],T[1]),c.push(i[_],i[_+1]),g.push(t.getRawIndex(D));break;case"-":b=!1}b&&(h.push(x),p.push(p.length))}p.sort(function(e,t){return g[e]-g[t]});var P=l.length,E=C(P),R=C(P),V=C(P),z=C(P),k=[];for(v=0;v<p.length;v++){var O=p[v],G=2*v,B=2*O;E[G]=l[B],E[G+1]=l[B+1],R[G]=u[B],R[G+1]=u[B+1],V[G]=d[B],V[G+1]=d[B+1],z[G]=c[B],z[G+1]=c[B+1],k[v]=h[O]}return{current:E,next:R,stackedOnCurrent:V,stackedOnNext:z,status:k}}(this._data,e,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),c=d.current,h=d.stackedOnCurrent,p=d.next,g=d.stackedOnNext;if(n&&(h=_i(d.stackedOnCurrent,d.current,a,n,r),c=_i(d.current,null,a,n,r),g=_i(d.stackedOnNext,d.next,a,n,r),p=_i(d.next,null,a,n,r)),bi(c,p)>3e3||l&&bi(h,g)>3e3)return s.stopAnimation(),s.setShape({points:p}),void(l&&(l.stopAnimation(),l.setShape({points:p,stackedOnPoints:g})));s.shape.__points=d.current,s.shape.points=c;var f={shape:{points:p}};d.current!==c&&(f.shape.__points=d.next),s.stopAnimation(),m(s,f,u),l&&(l.setShape({points:c,stackedOnPoints:h}),l.stopAnimation(),m(l,{shape:{stackedOnPoints:g}},u),s.shape.points!==l.shape.points&&(l.shape.points=s.shape.points));for(var y=[],v=d.status,x=0;x<v.length;x++){if("="===v[x].cmd){var b=e.getItemGraphicEl(v[x].idx1);b&&y.push({el:b,ptIdx:x})}}s.animators&&s.animators.length&&s.animators[0].during(function(){l&&l.dirtyShape();for(var e=s.shape.__points,t=0;t<y.length;t++){var a=y[t].el,i=2*y[t].ptIdx;a.x=e[i],a.y=e[i+1],a.markRedraw()}})},a.prototype.remove=function(e){var t=this.group,a=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),a&&a.eachItemGraphicEl(function(e,i){e.__temp&&(t.remove(e),a.setItemGraphicEl(i,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},a.type="line",a}(R);function Ni(e){e.registerChartView(Ci),e.registerSeriesModel(Ka),e.registerLayout(B("line",!0)),e.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),a=e.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",a)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,F("line"))}var Ti=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.getInitialData=function(e,t){return qa(null,this,{useEncodeDefaulter:!0})},a.prototype.getMarkerPosition=function(e,t,a){var i=this.coordinateSystem;if(i&&i.clampData){var n=i.clampData(e),o=i.dataToPoint(n);if(a)xt(i.getAxes(),function(e,a){if("category"===e.type&&null!=t){var i=e.getTicksCoords(),r=e.getTickModel().get("alignWithLabel"),s=n[a],l="x1"===t[a]||"y1"===t[a];if(l&&!r&&(s+=1),i.length<2)return;if(2===i.length)return void(o[a]=e.toGlobalCoord(e.getExtent()[l?1:0]));for(var u=void 0,d=void 0,c=1,h=0;h<i.length;h++){var p=i[h].coord,g=h===i.length-1?i[h-1].tickValue+c:i[h].tickValue;if(g===s){d=p;break}if(g<s)u=p;else if(null!=u&&g>s){d=(p+u)/2;break}1===h&&(c=g-i[0].tickValue)}null==d&&(u?u&&(d=i[i.length-1].coord):d=i[0].coord),o[a]=e.toGlobalCoord(d)}});else{var r=this.getData(),s=r.getLayout("offset"),l=r.getLayout("size"),u=i.getBaseAxis().isHorizontal()?0:1;o[u]+=s+l/2}return o}return[NaN,NaN]},a.type="series.__base_bar__",a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},a}(p);p.registerClass(Ti);var Pi=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.getInitialData=function(){return qa(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},a.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},a.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},a.prototype.brushSelector=function(e,t,a){return a.rect(t.getItemLayout(e))},a.type="series.bar",a.dependencies=["grid","polar"],a.defaultOption=W(Ti.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),a}(Ti);function Ei(e,t,a){var i=e.get("borderRadius");if(null==i)return a?{cornerRadius:0}:null;bt(i)||(i=[i,i,i,i]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:vt(i,function(e){return kt(e,n)})}}var Ri=Math.max,Vi=Math.min;var zi=function(t){function a(){var e=t.call(this)||this;return e.type=a.type,e._isFirstFrame=!0,e}return e(a,t),a.prototype.render=function(e,t,a,i){this._model=e,this._removeOnRenderedListener(a),this._updateDrawMode(e);var n=e.get("coordinateSystem");"cartesian2d"!==n&&"polar"!==n||(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,a):this._renderNormal(e,t,a,i))},a.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},a.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},a.prototype.eachRendered=function(e){D(this._progressiveEls||this.group,e)},a.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},a.prototype._renderNormal=function(e,t,a,i){var n,o=this.group,r=e.getData(),s=this._data,l=e.coordinateSystem,u=l.getBaseAxis();"cartesian2d"===l.type?n=u.isHorizontal():"polar"===l.type&&(n="angle"===u.dim);var d=e.isAnimationEnabled()?e:null,c=function(e,t){var a=e.get("realtimeSort",!0),i=t.getBaseAxis();if(a&&"category"===i.type&&"cartesian2d"===t.type)return{baseAxis:i,otherAxis:t.getOtherAxis(i)}}(e,l);c&&this._enableRealtimeSort(c,r,a);var h=e.get("clip",!0)||c,p=function(e,t){var a=e.getArea&&e.getArea();if(O(e,"cartesian2d")){var i=e.getBaseAxis();if("category"!==i.type||!i.onBand){var n=t.getLayout("bandWidth");i.isHorizontal()?(a.x-=n,a.width+=2*n):(a.y-=n,a.height+=2*n)}}return a}(l,r);o.removeClipPath();var g=e.get("roundCap",!0),f=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),b=y.get("borderRadius")||0,S=[],_=this._backgroundEls,w=i&&i.isInitSort,I=i&&"changeAxisOrder"===i.type;function M(e){var t=Hi[l.type](r,e),a=function(e,t,a){var i="polar"===e.type?Tt:Nt;return new i({shape:Ji(t,a,e),silent:!0,z2:0})}(l,n,t);return a.useStyle(y.getItemStyle()),"cartesian2d"===l.type?a.setShape("r",b):a.setShape("cornerRadius",b),S[e]=a,a}r.diff(s).add(function(t){var a=r.getItemModel(t),i=Hi[l.type](r,t,a);if(f&&M(t),r.hasValue(t)&&Yi[l.type](i)){var s=!1;h&&(s=ki[l.type](p,i));var y=Oi[l.type](e,r,t,i,n,d,u.model,!1,g);c&&(y.forceLabelAnimation=!0),Ui(y,r,t,a,i,e,n,"polar"===l.type),w?y.attr({shape:i}):c?Gi(c,d,y,i,t,n,!1,!1):x(y,{shape:i},e,t),r.setItemGraphicEl(t,y),o.add(y),y.ignore=s}}).update(function(t,a){var i=r.getItemModel(t),x=Hi[l.type](r,t,i);if(f){var L=void 0;0===_.length?L=M(a):((L=_[a]).useStyle(y.getItemStyle()),"cartesian2d"===l.type?L.setShape("r",b):L.setShape("cornerRadius",b),S[t]=L);var D=Hi[l.type](r,t),A=Ji(n,D,l);m(L,{shape:A},d,t)}var C=s.getItemGraphicEl(a);if(r.hasValue(t)&&Yi[l.type](x)){var N=!1;if(h&&(N=ki[l.type](p,x))&&o.remove(C),C?v(C):C=Oi[l.type](e,r,t,x,n,d,u.model,!!C,g),c&&(C.forceLabelAnimation=!0),I){var T=C.getTextContent();if(T){var P=k(T);null!=P.prevValue&&(P.prevValue=P.value)}}else Ui(C,r,t,i,x,e,n,"polar"===l.type);w?C.attr({shape:x}):c?Gi(c,d,C,x,t,n,!0,I):m(C,{shape:x},e,t,null),r.setItemGraphicEl(t,C),C.ignore=N,o.add(C)}else o.remove(C)}).remove(function(t){var a=s.getItemGraphicEl(t);a&&Y(a,e,t)}).execute();var L=this._backgroundGroup||(this._backgroundGroup=new St);L.removeAll();for(var D=0;D<S.length;++D)L.add(S[D]);o.add(L),this._backgroundEls=S,this._data=r},a.prototype._renderLarge=function(e,t,a){this._clear(),qi(e,this.group),this._updateLargeClip(e)},a.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),qi(t,this.group,this._progressiveEls,!0)},a.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&mi(e.coordinateSystem,!1,e),a=this.group;t?a.setClipPath(t):a.removeClipPath()},a.prototype._enableRealtimeSort=function(e,t,a){var i=this;if(t.count()){var n=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,a),this._isFirstFrame=!1;else{var o=function(e){var a=t.getItemGraphicEl(e),i=a&&a.shape;return i&&Math.abs(n.isHorizontal()?i.height:i.width)||0};this._onRendered=function(){i._updateSortWithinSameData(t,o,n,a)},a.getZr().on("rendered",this._onRendered)}}},a.prototype._dataSort=function(e,t,a){var i=[];return e.each(e.mapDimension(t.dim),function(e,t){var n=a(t);n=null==n?NaN:n,i.push({dataIndex:t,mappedValue:n,ordinalNumber:e})}),i.sort(function(e,t){return t.mappedValue-e.mappedValue}),{ordinalNumbers:vt(i,function(e){return e.ordinalNumber})}},a.prototype._isOrderChangedWithinSameData=function(e,t,a){for(var i=a.scale,n=e.mapDimension(a.dim),o=Number.MAX_VALUE,r=0,s=i.getOrdinalMeta().categories.length;r<s;++r){var l=e.rawIndexOf(n,i.getRawOrdinalNumber(r)),u=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(u>o)return!0;o=u}return!1},a.prototype._isOrderDifferentInView=function(e,t){for(var a=t.scale,i=a.getExtent(),n=Math.max(0,i[0]),o=Math.min(i[1],a.getOrdinalMeta().categories.length-1);n<=o;++n)if(e.ordinalNumbers[n]!==a.getRawOrdinalNumber(n))return!0},a.prototype._updateSortWithinSameData=function(e,t,a,i){if(this._isOrderChangedWithinSameData(e,t,a)){var n=this._dataSort(e,a,t);this._isOrderDifferentInView(n,a)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:n}))}},a.prototype._dispatchInitSort=function(e,t,a){var i=t.baseAxis,n=this._dataSort(e,i,function(a){return e.get(e.mapDimension(t.otherAxis.dim),a)});a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:n})},a.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},a.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},a.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},a.prototype._clear=function(e){var t=this.group,a=this._data;e&&e.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(t){Y(t,e,I(t).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},a.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},a.type="bar",a}(R),ki={cartesian2d:function(e,t){var a=t.width<0?-1:1,i=t.height<0?-1:1;a<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var n=e.x+e.width,o=e.y+e.height,r=Ri(t.x,e.x),s=Vi(t.x+t.width,n),l=Ri(t.y,e.y),u=Vi(t.y+t.height,o),d=s<r,c=u<l;return t.x=d&&r>n?s:r,t.y=c&&l>o?u:l,t.width=d?0:s-r,t.height=c?0:u-l,a<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),d||c},polar:function(e,t){var a=t.r0<=t.r?1:-1;if(a<0){var i=t.r;t.r=t.r0,t.r0=i}var n=Vi(t.r,e.r),o=Ri(t.r0,e.r0);t.r=n,t.r0=o;var r=n-o<0;if(a<0){i=t.r;t.r=t.r0,t.r0=i}return r}},Oi={cartesian2d:function(e,t,a,i,n,o,r,s,l){var u=new Nt({shape:wt({},i),z2:1});(u.__dataIndex=a,u.name="item",o)&&(u.shape[n?"height":"width"]=0);return u},polar:function(e,t,a,i,n,o,r,s,l){var u=!n&&l?H:Tt,d=new u({shape:i,z2:1});d.name="item";var c=Xi(n);if(d.calculateTextPosition=X(c,{isRoundCap:u===H}),o){var h=n?"r":"endAngle",p={};d.shape[h]=n?i.r0:i.startAngle,p[h]=i[h],(s?m:x)(d,{shape:p},o)}return d}};function Gi(e,t,a,i,n,o,r,s){var l,u;o?(u={x:i.x,width:i.width},l={y:i.y,height:i.height}):(u={y:i.y,height:i.height},l={x:i.x,width:i.width}),s||(r?m:x)(a,{shape:l},t,n,null);var d=t?e.baseAxis.model:null;(r?m:x)(a,{shape:u},d,n)}function Bi(e,t){for(var a=0;a<t.length;a++)if(!isFinite(e[t[a]]))return!0;return!1}var Fi=["x","y","width","height"],Wi=["cx","cy","r","startAngle","endAngle"],Yi={cartesian2d:function(e){return!Bi(e,Fi)},polar:function(e){return!Bi(e,Wi)}},Hi={cartesian2d:function(e,t,a){var i=e.getItemLayout(t),n=a?function(e,t){var a=e.get(["itemStyle","borderColor"]);if(!a||"none"===a)return 0;var i=e.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(i,n,o)}(a,i):0,o=i.width>0?1:-1,r=i.height>0?1:-1;return{x:i.x+o*n/2,y:i.y+r*n/2,width:i.width-o*n,height:i.height-r*n}},polar:function(e,t,a){var i=e.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function Xi(e){return function(e){var t=e?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(e)}function Ui(e,t,a,i,n,o,r,s){var l=t.getItemVisual(a,"style");if(s){if(!o.get("roundCap")){var u=e.shape,d=Ei(i.getModel("itemStyle"),u,!0);wt(u,d),e.setShape(u)}}else{var c=i.get(["itemStyle","borderRadius"])||0;e.setShape("r",c)}e.useStyle(l);var h=i.getShallow("cursor");h&&e.attr("cursor",h);var p=s?r?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":r?n.height>=0?"bottom":"top":n.width>=0?"right":"left",g=b(i);_(e,g,{labelFetcher:o,labelDataIndex:a,defaultText:Ja(o.getData(),a),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:p});var f=e.getTextContent();if(s&&f){var y=i.get(["label","position"]);e.textConfig.inside="middle"===y||null,U(e,"outside"===y?p:y,Xi(r),i.get(["label","rotate"]))}Z(f,g,o.getRawValue(a),function(e){return Qa(t,e)});var m=i.getModel(["emphasis"]);w(e,m.get("focus"),m.get("blurScope"),m.get("disabled")),P(e,i),function(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}(n)&&(e.style.fill="none",e.style.stroke="none",xt(e.states,function(e){e.style&&(e.style.fill=e.style.stroke="none")}))}var Zi=function(){return function(){}}(),ji=function(t){function a(e){var a=t.call(this,e)||this;return a.type="largeBar",a}return e(a,t),a.prototype.getDefaultShape=function(){return new Zi},a.prototype.buildPath=function(e,t){for(var a=t.points,i=this.baseDimIdx,n=1-this.baseDimIdx,o=[],r=[],s=this.barWidth,l=0;l<a.length;l+=3)r[i]=s,r[n]=a[l+2],o[i]=a[l+i],o[n]=a[l+n],e.rect(o[0],o[1],r[0],r[1])},a}(Ct);function qi(e,t,a,i){var n=e.getData(),o=n.getLayout("valueAxisHorizontal")?1:0,r=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=e.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var d=new ji({shape:{points:u},incremental:!!i,silent:!0,z2:0});d.baseDimIdx=o,d.largeDataIndices=r,d.barWidth=s,d.useStyle(l.getItemStyle()),t.add(d),a&&a.push(d)}var c=new ji({shape:{points:n.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=o,c.largeDataIndices=r,c.barWidth=s,t.add(c),c.useStyle(n.getVisual("style")),c.style.stroke=null,I(c).seriesIndex=e.seriesIndex,e.get("silent")||(c.on("mousedown",Ki),c.on("mousemove",Ki)),a&&a.push(c)}var Ki=j(function(e){var t=function(e,t,a){for(var i=e.baseDimIdx,n=1-i,o=e.shape.points,r=e.largeDataIndices,s=[],l=[],u=e.barWidth,d=0,c=o.length/3;d<c;d++){var h=3*d;if(l[i]=u,l[n]=o[h+2],s[i]=o[h+i],s[n]=o[h+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),t>=s[0]&&t<=s[0]+l[0]&&a>=s[1]&&a<=s[1]+l[1])return r[d]}return-1}(this,e.offsetX,e.offsetY);I(this).dataIndex=t>=0?t:null},30,!1);function Ji(e,t,a){if(O(a,"cartesian2d")){var i=t,n=a.getArea();return{x:e?i.x:n.x,y:e?n.y:i.y,width:e?i.width:n.width,height:e?n.height:i.height}}var o=t;return{cx:(n=a.getArea()).cx,cy:n.cy,r0:e?n.r0:o.r0,r:e?n.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:2*Math.PI}}function Qi(e){e.registerChartView(zi),e.registerSeriesModel(Pi),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,mt(q,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,K("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,F("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var a=e.componentType||"series";t.eachComponent({mainType:a,query:e},function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)})})}var $i=2*Math.PI,en=Math.PI/180;function tn(e,t){return Q(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function an(e,t){var a=tn(e,t),i=e.get("center"),n=e.get("radius");bt(n)||(n=[0,n]);var o,r,s=$(a.width,t.getWidth()),l=$(a.height,t.getHeight()),u=Math.min(s,l),d=$(n[0],u/2),c=$(n[1],u/2),h=e.coordinateSystem;if(h){var p=h.dataToPoint(i);o=p[0]||0,r=p[1]||0}else bt(i)||(i=[i,i]),o=$(i[0],s)+a.x,r=$(i[1],l)+a.y;return{cx:o,cy:r,r0:d,r:c}}function nn(e,t,a){t.eachSeriesByType(e,function(e){var t=e.getData(),i=t.mapDimension("value"),n=tn(e,a),o=an(e,a),r=o.cx,s=o.cy,l=o.r,u=o.r0,d=-e.get("startAngle")*en,c=e.get("endAngle"),h=e.get("padAngle")*en;c="auto"===c?d-$i:-c*en;var p=e.get("minAngle")*en+h,g=0;t.each(i,function(e){!isNaN(e)&&g++});var f=t.getSum(i),y=Math.PI/(f||g)*2,m=e.get("clockwise"),v=e.get("roseType"),x=e.get("stillShowZeroSum"),b=t.getDataExtent(i);b[0]=0;var S=m?1:-1,_=[d,c],w=S*h/2;Ot(_,!m),d=_[0],c=_[1];var I=on(e);I.startAngle=d,I.endAngle=c,I.clockwise=m;var M=Math.abs(c-d),L=M,D=0,A=d;if(t.setLayout({viewRect:n,r:l}),t.each(i,function(e,a){var i;if(isNaN(e))t.setItemLayout(a,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:m,cx:r,cy:s,r0:u,r:v?NaN:l});else{(i="area"!==v?0===f&&x?y:e*y:M/g)<p?(i=p,L-=p):D+=e;var n=A+S*i,o=0,d=0;h>i?d=o=A+S*i/2:(o=A+w,d=n-w),t.setItemLayout(a,{angle:i,startAngle:o,endAngle:d,clockwise:m,cx:r,cy:s,r0:u,r:v?J(e,b,[u,l]):l}),A=n}}),L<$i&&g)if(L<=.001){var C=M/g;t.each(i,function(e,a){if(!isNaN(e)){var i=t.getItemLayout(a);i.angle=C;var n=0,o=0;C<h?o=n=d+S*(a+.5)*C:(n=d+S*a*C+w,o=d+S*(a+1)*C-w),i.startAngle=n,i.endAngle=o}})}else y=L/D,A=d,t.each(i,function(e,a){if(!isNaN(e)){var i=t.getItemLayout(a),n=i.angle===p?p:e*y,o=0,r=0;n<h?r=o=A+S*n/2:(o=A+w,r=A+S*n-w),i.startAngle=o,i.endAngle=r,A+=S*n}})})}var on=t(),rn=Math.PI/180;function sn(e,t,a,i,n,o,r,s,l,u){if(!(e.length<2)){for(var d=e.length,c=0;c<d;c++)if("outer"===e[c].position&&"labelLine"===e[c].labelAlignTo){var h=e[c].label.x-u;e[c].linePoints[1][0]+=h,e[c].label.x=u}ae(e,l,l+r)&&function(e){for(var o={list:[],maxY:0},r={list:[],maxY:0},s=0;s<e.length;s++)if("none"===e[s].labelAlignTo){var l=e[s],u=l.label.y>a?r:o,d=Math.abs(l.label.y-a);if(d>=u.maxY){var c=l.label.x-t-l.len2*n,h=i+l.len,g=Math.abs(c)<h?Math.sqrt(d*d/(1-c*c/h/h)):h;u.rB=g,u.maxY=d}u.list.push(l)}p(o),p(r)}(e)}function p(e){for(var o=e.rB,r=o*o,s=0;s<e.list.length;s++){var l=e.list[s],u=Math.abs(l.label.y-a),d=i+l.len,c=d*d,h=Math.sqrt(Math.abs((1-u*u/r)*c)),p=t+(h+l.len2)*n,g=p-l.label.x;ln(l,l.targetTextWidth-g*n,!0),l.label.x=p}}}function ln(e,t,a){if(void 0===a&&(a=!1),null==e.labelStyleWidth){var i=e.label,n=i.style,o=e.rect,r=n.backgroundColor,s=n.padding,l=s?s[1]+s[3]:0,u=n.overflow,d=o.width+(r?0:l);if(t<d||a){var c=o.height;if(u&&u.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",t-l);var h=i.getBoundingRect();i.setStyle("width",Math.ceil(h.width)),i.setStyle("backgroundColor",r)}else{var p=t-l,g=t<d?p:a?p>e.unconstrainedWidth?null:p:null;i.setStyle("width",g)}var f=i.getBoundingRect();o.width=f.width;var y=(i.style.margin||0)+2.1;o.height=f.height+y,o.y-=(o.height-c)/2}}}function un(e){return"center"===e.position}function dn(e){var t,a,i=e.getData(),n=[],o=!1,r=(e.get("minShowLabelAngle")||0)*rn,s=i.getLayout("viewRect"),l=i.getLayout("r"),u=s.width,d=s.x,c=s.y,h=s.height;function p(e){e.ignore=!0}i.each(function(e){var s=i.getItemGraphicEl(e),c=s.shape,h=s.getTextContent(),g=s.getTextGuideLine(),f=i.getItemModel(e),y=f.getModel("label"),m=y.get("position")||f.get(["emphasis","label","position"]),v=y.get("distanceToLabelLine"),x=y.get("alignTo"),b=$(y.get("edgeDistance"),u),S=y.get("bleedMargin"),_=f.getModel("labelLine"),w=_.get("length");w=$(w,u);var I=_.get("length2");if(I=$(I,u),Math.abs(c.endAngle-c.startAngle)<r)return xt(h.states,p),h.ignore=!0,void(g&&(xt(g.states,p),g.ignore=!0));if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(h)){var M,L,D,A,C=(c.startAngle+c.endAngle)/2,N=Math.cos(C),T=Math.sin(C);t=c.cx,a=c.cy;var P="inside"===m||"inner"===m;if("center"===m)M=c.cx,L=c.cy,A="center";else{var E=(P?(c.r+c.r0)/2*N:c.r*N)+t,R=(P?(c.r+c.r0)/2*T:c.r*T)+a;if(M=E+3*N,L=R+3*T,!P){var V=E+N*(w+l-c.r),z=R+T*(w+l-c.r),k=V+(N<0?-1:1)*I;M="edge"===x?N<0?d+b:d+u-b:k+(N<0?-v:v),L=z,D=[[E,R],[V,z],[k,z]]}A=P?"center":"edge"===x?N>0?"right":"left":N>0?"left":"right"}var O=Math.PI,G=0,B=y.get("rotate");if(Mt(B))G=B*(O/180);else if("center"===m)G=0;else if("radial"===B||!0===B){G=N<0?-C+O:-C}else if("tangential"===B&&"outside"!==m&&"outer"!==m){var F=Math.atan2(N,T);F<0&&(F=2*O+F),T>0&&(F=O+F),G=F-O}if(o=!!G,h.x=M,h.y=L,h.rotation=G,h.setStyle({verticalAlign:"middle"}),P){h.setStyle({align:A});var W=h.states.select;W&&(W.x+=h.x,W.y+=h.y)}else{var Y=h.getBoundingRect().clone();Y.applyTransform(h.getComputedTransform());var H=(h.style.margin||0)+2.1;Y.y-=H/2,Y.height+=H,n.push({label:h,labelLine:g,position:m,len:w,len2:I,minTurnAngle:_.get("minTurnAngle"),maxSurfaceAngle:_.get("maxSurfaceAngle"),surfaceNormal:new Gt(N,T),linePoints:D,textAlign:A,labelDistance:v,labelAlignTo:x,edgeDistance:b,bleedMargin:S,rect:Y,unconstrainedWidth:Y.width,labelStyleWidth:h.style.width})}s.setTextConfig({inside:P})}}),!o&&e.get("avoidLabelOverlap")&&function(e,t,a,i,n,o,r,s){for(var l=[],u=[],d=Number.MAX_VALUE,c=-Number.MAX_VALUE,h=0;h<e.length;h++){var p=e[h].label;un(e[h])||(p.x<t?(d=Math.min(d,p.x),l.push(e[h])):(c=Math.max(c,p.x),u.push(e[h])))}for(h=0;h<e.length;h++)if(!un(y=e[h])&&y.linePoints){if(null!=y.labelStyleWidth)continue;p=y.label;var g=y.linePoints,f=void 0;f="edge"===y.labelAlignTo?p.x<t?g[2][0]-y.labelDistance-r-y.edgeDistance:r+n-y.edgeDistance-g[2][0]-y.labelDistance:"labelLine"===y.labelAlignTo?p.x<t?d-r-y.bleedMargin:r+n-c-y.bleedMargin:p.x<t?p.x-r-y.bleedMargin:r+n-p.x-y.bleedMargin,y.targetTextWidth=f,ln(y,f)}for(sn(u,t,a,i,1,0,o,0,s,c),sn(l,t,a,i,-1,0,o,0,s,d),h=0;h<e.length;h++){var y;if(!un(y=e[h])&&y.linePoints){p=y.label,g=y.linePoints;var m="edge"===y.labelAlignTo,v=p.style.padding,x=v?v[1]+v[3]:0,b=p.style.backgroundColor?0:x,S=y.rect.width+b,_=g[1][0]-g[2][0];m?p.x<t?g[2][0]=r+y.edgeDistance+S+y.labelDistance:g[2][0]=r+n-y.edgeDistance-S-y.labelDistance:(p.x<t?g[2][0]=p.x+y.labelDistance:g[2][0]=p.x-y.labelDistance,g[1][0]=g[2][0]+_),g[1][1]=g[2][1]=p.y}}}(n,t,a,l,u,h,d,c);for(var g=0;g<n.length;g++){var f=n[g],y=f.label,m=f.labelLine,v=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:f.textAlign}),v&&(xt(y.states,p),y.ignore=!0);var x=y.states.select;x&&(x.x+=y.x,x.y+=y.y)}if(m){var b=f.linePoints;v||!b?(xt(m.states,p),m.ignore=!0):(ee(b,f.minTurnAngle),te(b,f.surfaceNormal,f.maxSurfaceAngle),m.setShape({points:b}),y.__hostTarget.textGuideLineConfig={anchor:new Gt(b[0][0],b[0][1])})}}}var cn=function(t){function a(e,a,i){var n=t.call(this)||this;n.z2=2;var o=new Rt;return n.setTextContent(o),n.updateData(e,a,i,!0),n}return e(a,t),a.prototype.updateData=function(e,t,a,i){var n=this,o=e.hostModel,r=e.getItemModel(t),s=r.getModel("emphasis"),l=e.getItemLayout(t),u=wt(Ei(r.getModel("itemStyle"),l,!0),l);if(isNaN(u.startAngle))n.setShape(u);else{if(i){n.setShape(u);var d=o.getShallow("animationType");o.ecModel.ssr?(x(n,{scaleX:0,scaleY:0},o,{dataIndex:t,isFrom:!0}),n.originX=u.cx,n.originY=u.cy):"scale"===d?(n.shape.r=l.r0,x(n,{shape:{r:l.r}},o,t)):null!=a?(n.setShape({startAngle:a,endAngle:a}),x(n,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},o,t)):(n.shape.endAngle=l.startAngle,m(n,{shape:{endAngle:l.endAngle}},o,t))}else v(n),m(n,{shape:u},o,t);n.useStyle(e.getItemVisual(t,"style")),P(n,r);var c=(l.startAngle+l.endAngle)/2,h=o.get("selectedOffset"),p=Math.cos(c)*h,g=Math.sin(c)*h,f=r.getShallow("cursor");f&&n.attr("cursor",f),this._updateLabel(o,e,t),n.ensureState("emphasis").shape=wt({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},Ei(s.getModel("itemStyle"),l)),wt(n.ensureState("select"),{x:p,y:g,shape:Ei(r.getModel(["select","itemStyle"]),l)}),wt(n.ensureState("blur"),{shape:Ei(r.getModel(["blur","itemStyle"]),l)});var y=n.getTextGuideLine(),b=n.getTextContent();y&&wt(y.ensureState("select"),{x:p,y:g}),wt(b.ensureState("select"),{x:p,y:g}),w(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))}},a.prototype._updateLabel=function(e,t,a){var i=this,n=t.getItemModel(a),o=n.getModel("labelLine"),r=t.getItemVisual(a,"style"),s=r&&r.fill,l=r&&r.opacity;_(i,b(n),{labelFetcher:t.hostModel,labelDataIndex:a,inheritColor:s,defaultOpacity:l,defaultText:e.getFormattedLabel(a,"normal")||t.getName(a)});var u=i.getTextContent();i.setTextConfig({position:null,rotation:null}),u.attr({z2:10});var d=e.get(["label","position"]);if("outside"!==d&&"outer"!==d)i.removeTextGuideLine();else{var c=this.getTextGuideLine();c||(c=new Bt,this.setTextGuideLine(c)),ie(this,ne(n),{stroke:s,opacity:Ft(o.get(["lineStyle","opacity"]),l,1)})}},a}(Tt),hn=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return e(a,t),a.prototype.render=function(e,t,a,i){var n,o=e.getData(),r=this._data,s=this.group;if(!r&&o.count()>0){for(var l=o.getItemLayout(0),u=1;isNaN(l&&l.startAngle)&&u<o.count();++u)l=o.getItemLayout(u);l&&(n=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===o.count()&&e.get("showEmptyCircle")){var d=on(e),c=new Tt({shape:wt(an(e,a),d)});c.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=c,s.add(c)}o.diff(r).add(function(e){var t=new cn(o,e,n);o.setItemGraphicEl(e,t),s.add(t)}).update(function(e,t){var a=r.getItemGraphicEl(t);a.updateData(o,e,n),a.off("click"),s.add(a),o.setItemGraphicEl(e,a)}).remove(function(t){var a=r.getItemGraphicEl(t);Y(a,e,t)}).execute(),dn(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=o)},a.prototype.dispose=function(){},a.prototype.containPoint=function(e,t){var a=t.getData().getItemLayout(0);if(a){var i=e[0]-a.cx,n=e[1]-a.cy,o=Math.sqrt(i*i+n*n);return o<=a.r&&o>=a.r0}},a.type="pie",a}(R);function pn(e,t,a){t=bt(t)&&{coordDimensions:t}||wt({encodeDefine:e.getEncode()},t);var i=e.getSource(),n=r(i,t).dimensions,o=new l(n,e);return o.initData(i,a),o}var gn=t(),fn=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new oe(Pt(this.getData,this),Pt(this.getRawData,this)),this._defaultLabelLine(e)},a.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return pn(this,{coordDimensions:["value"],encodeDefaulter:mt(re,this)})},a.prototype.getDataParams=function(e){var a=this.getData(),i=gn(a),n=i.seats;if(!n){var o=[];a.each(a.mapDimension("value"),function(e){o.push(e)}),n=i.seats=se(o,a.hostModel.get("percentPrecision"))}var r=t.prototype.getDataParams.call(this,e);return r.percent=n[e]||0,r.$vars.push("percent"),r},a.prototype._defaultLabelLine=function(e){le(e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(p);function yn(e){e.registerChartView(hn),e.registerSeriesModel(fn),ue("pie",e.registerAction),e.registerLayout(mt(nn,"pie")),e.registerProcessor(de("pie")),e.registerProcessor(ce("pie"))}var mn=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.hasSymbolVisual=!0,e}return e(a,t),a.prototype.getInitialData=function(e,t){return qa(null,this,{useEncodeDefaulter:!0})},a.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},a.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},a.prototype.brushSelector=function(e,t,a){return a.point(t.getItemLayout(e))},a.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},a.type="series.scatter",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},a}(p),vn=function(){return function(){}}(),xn=function(t){function a(e){var a=t.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return e(a,t),a.prototype.getDefaultShape=function(){return new vn},a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.buildPath=function(e,t){var a,i=t.points,n=t.size,o=this.symbolProxy,r=o.shape,s=e.getContext?e.getContext():e,l=s&&n[0]<4,u=this.softClipShape;if(l)this._ctx=s;else{for(this._ctx=null,a=this._off;a<i.length;){var d=i[a++],c=i[a++];isNaN(d)||isNaN(c)||(u&&!u.contain(d,c)||(r.x=d-n[0]/2,r.y=c-n[1]/2,r.width=n[0],r.height=n[1],o.buildPath(e,r,!0)))}this.incremental&&(this._off=a,this.notClear=!0)}},a.prototype.afterBrush=function(){var e,t=this.shape,a=t.points,i=t.size,n=this._ctx,o=this.softClipShape;if(n){for(e=this._off;e<a.length;){var r=a[e++],s=a[e++];isNaN(r)||isNaN(s)||(o&&!o.contain(r,s)||n.fillRect(r-i[0]/2,s-i[1]/2,i[0],i[1]))}this.incremental&&(this._off=e,this.notClear=!0)}},a.prototype.findDataIndex=function(e,t){for(var a=this.shape,i=a.points,n=a.size,o=Math.max(n[0],4),r=Math.max(n[1],4),s=i.length/2-1;s>=0;s--){var l=2*s,u=i[l]-o/2,d=i[l+1]-r/2;if(e>=u&&t>=d&&e<=u+o&&t<=d+r)return s}return-1},a.prototype.contain=function(e,t){var a=this.transformCoordToLocal(e,t),i=this.getBoundingRect();return e=a[0],t=a[1],i.contain(e,t)?(this.hoverDataIdx=this.findDataIndex(e,t))>=0:(this.hoverDataIdx=-1,!1)},a.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape,a=t.points,i=t.size,n=i[0],o=i[1],r=1/0,s=1/0,l=-1/0,u=-1/0,d=0;d<a.length;){var c=a[d++],h=a[d++];r=Math.min(c,r),l=Math.max(c,l),s=Math.min(h,s),u=Math.max(h,u)}e=this._rect=new Wt(r-n/2,s-o/2,l-r+n,u-s+o)}return e},a}(Ct),bn=function(){function e(){this.group=new St}return e.prototype.updateData=function(e,t){this._clear();var a=this._create();a.setShape({points:e.getLayout("points")}),this._setCommon(a,e,t)},e.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(e){if(null!=e.startIndex){var a=2*(e.endIndex-e.startIndex),i=4*e.startIndex*2;t=new Float32Array(t.buffer,i,a)}e.setShape("points",t),e.reset()})},e.prototype.incrementalPrepareUpdate=function(e){this._clear()},e.prototype.incrementalUpdate=function(e,t,a){var i=this._newAdded[0],n=t.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var r=o.length,s=new Float32Array(r+n.length);s.set(o),s.set(n,r),i.endIndex=e.end,i.setShape({points:s})}else{this._newAdded=[];var l=this._create();l.startIndex=e.start,l.endIndex=e.end,l.incremental=!0,l.setShape({points:n}),this._setCommon(l,t,a)}},e.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},e.prototype._create=function(){var e=new xn({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},e.prototype._setCommon=function(e,t,a){var i=t.hostModel;a=a||{};var n=t.getVisual("symbolSize");e.setShape("size",n instanceof Array?n:[n,n]),e.softClipShape=a.clipShape||null,e.symbolProxy=h(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<4;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var r=t.getVisual("style"),s=r&&r.fill;s&&e.setColor(s);var l=I(e);l.seriesIndex=i.seriesIndex,e.on("mousemove",function(t){l.dataIndex=null;var a=e.hoverDataIdx;a>=0&&(l.dataIndex=a+(e.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),Sn=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a){var i=e.getData();this._updateSymbolDraw(i,e).updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},a.prototype.incrementalPrepareRender=function(e,t,a){var i=e.getData();this._updateSymbolDraw(i,e).incrementalPrepareUpdate(i),this._finished=!1},a.prototype.incrementalRender=function(e,t,a){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},a.prototype.updateTransform=function(e,t,a){var i=e.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var n=B("").reset(e,t,a);n.progress&&n.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},a.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},a.prototype._getClipShape=function(e){if(e.get("clip",!0)){var t=e.coordinateSystem;return t&&t.getArea&&t.getArea(.1)}},a.prototype._updateSymbolDraw=function(e,t){var a=this._symbolDraw,i=t.pipelineContext.large;return a&&i===this._isLargeDraw||(a&&a.remove(),a=this._symbolDraw=i?new bn:new ni,this._isLargeDraw=i,this.group.removeAll()),this.group.add(a.group),a},a.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},a.prototype.dispose=function(){},a.type="scatter",a}(R);function _n(e){he(za),e.registerSeriesModel(mn),e.registerChartView(Sn),e.registerLayout(B("scatter"))}function wn(e){e.eachSeriesByType("radar",function(e){var t=e.getData(),a=[],i=e.coordinateSystem;if(i){var n=i.getIndicatorAxes();xt(n,function(e,o){t.each(t.mapDimension(n[o].dim),function(e,t){a[t]=a[t]||[];var n=i.dataToPoint(e,o);a[t][o]=In(n)?n:Mn(i)})}),t.each(function(e){var n=Yt(a[e],function(e){return In(e)})||Mn(i);a[e].push(n.slice()),t.setItemLayout(e,a[e])})}})}function In(e){return!isNaN(e[0])&&!isNaN(e[1])}function Mn(e){return[e.cx,e.cy]}function Ln(e){var t=e.polar;if(t){bt(t)||(t=[t]);var a=[];xt(t,function(t,i){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),e.radar=e.radar||[],bt(e.radar)||(e.radar=[e.radar]),e.radar.push(t)):a.push(t)}),e.polar=a}xt(e.series,function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)})}var Dn=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a){var i=e.coordinateSystem,n=this.group,o=e.getData(),r=this._data;function s(e,t){var a=e.getItemVisual(t,"symbol")||"circle";if("none"!==a){var i=L(e.getItemVisual(t,"symbolSize")),n=h(a,-1,-1,2,2),o=e.getItemVisual(t,"symbolRotate")||0;return n.attr({style:{strokeNoScale:!0},z2:100,scaleX:i[0]/2,scaleY:i[1]/2,rotation:o*Math.PI/180||0}),n}}function l(t,a,i,n,o,r){i.removeAll();for(var l=0;l<a.length-1;l++){var u=s(n,o);u&&(u.__dimIdx=l,t[l]?(u.setPosition(t[l]),pe[r?"initProps":"updateProps"](u,{x:a[l][0],y:a[l][1]},e,o)):u.setPosition(a[l]),i.add(u))}}function u(e){return vt(e,function(e){return[i.cx,i.cy]})}o.diff(r).add(function(t){var a=o.getItemLayout(t);if(a){var i=new Ht,n=new Bt,r={shape:{points:a}};i.shape.points=u(a),n.shape.points=u(a),x(i,r,e,t),x(n,r,e,t);var s=new St,d=new St;s.add(n),s.add(i),s.add(d),l(n.shape.points,a,d,o,t,!0),o.setItemGraphicEl(t,s)}}).update(function(t,a){var i=r.getItemGraphicEl(a),n=i.childAt(0),s=i.childAt(1),u=i.childAt(2),d={shape:{points:o.getItemLayout(t)}};d.shape.points&&(l(n.shape.points,d.shape.points,u,o,t,!1),v(s),v(n),m(n,d,e),m(s,d,e),o.setItemGraphicEl(t,i))}).remove(function(e){n.remove(r.getItemGraphicEl(e))}).execute(),o.eachItemGraphicEl(function(e,t){var a=o.getItemModel(t),i=e.childAt(0),r=e.childAt(1),s=e.childAt(2),l=o.getItemVisual(t,"style"),u=l.fill;n.add(e),i.useStyle(Et(a.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:u})),P(i,a,"lineStyle"),P(r,a,"areaStyle");var d=a.getModel("areaStyle"),c=d.isEmpty()&&d.parentModel.isEmpty();r.ignore=c,xt(["emphasis","select","blur"],function(e){var t=a.getModel([e,"areaStyle"]),i=t.isEmpty()&&t.parentModel.isEmpty();r.ensureState(e).ignore=i&&c}),r.useStyle(Et(d.getAreaStyle(),{fill:u,opacity:.7,decal:l.decal}));var h=a.getModel("emphasis"),p=h.getModel("itemStyle").getItemStyle();s.eachChild(function(e){if(e instanceof _t){var i=e.style;e.useStyle(wt({image:i.image,x:i.x,y:i.y,width:i.width,height:i.height},l))}else e.useStyle(l),e.setColor(u),e.style.strokeNoScale=!0;e.ensureState("emphasis").style=Xt(p);var n=o.getStore().get(o.getDimensionIndex(e.__dimIdx),t);(null==n||isNaN(n))&&(n=""),_(e,b(a),{labelFetcher:o.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:n,inheritColor:u,defaultOpacity:l.opacity})}),w(e,h.get("focus"),h.get("blurScope"),h.get("disabled"))}),this._data=o},a.prototype.remove=function(){this.group.removeAll(),this._data=null},a.type="radar",a}(R),An=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.hasSymbolVisual=!0,e}return e(a,t),a.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new oe(Pt(this.getData,this),Pt(this.getRawData,this))},a.prototype.getInitialData=function(e,t){return pn(this,{generateCoord:"indicator_",generateCoordCount:1/0})},a.prototype.formatTooltip=function(e,t,a){var i=this.getData(),n=this.coordinateSystem.getIndicatorAxes(),o=this.getData().getName(e),r=""===o?this.name:o,s=ka(this,e);return Oa("section",{header:r,sortBlocks:!0,blocks:vt(n,function(t){var a=i.get(i.mapDimension(t.dim),e);return Oa("nameValue",{markerType:"subItem",markerColor:s,name:t.name,value:a,sortParam:a})})})},a.prototype.getTooltipPosition=function(e){if(null!=e)for(var t=this.getData(),a=this.coordinateSystem,i=t.getValues(vt(a.dimensions,function(e){return t.mapDimension(e)}),e),n=0,o=i.length;n<o;n++)if(!isNaN(i[n])){var r=a.getIndicatorAxes();return a.coordToPoint(r[n].dataToCoord(i[n]),n)}},a.type="series.radar",a.dependencies=["radar"],a.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},a}(p);function Cn(e){he(Ga),e.registerChartView(Dn),e.registerSeriesModel(An),e.registerLayout(wn),e.registerProcessor(de("radar")),e.registerPreprocessor(Ln)}var Nn=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var n=this.group;if(n.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&i&&"geoRoam"===i.type&&this._mapDraw.resetForLabelLayout(),i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===e.id)(o=this._mapDraw)&&n.add(o.group);else if(e.needsDrawMap){var o=this._mapDraw||new Ba(a);n.add(o.group),o.draw(e,t,a,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,a)}}},a.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},a.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},a.prototype._renderSymbols=function(e,t,a){var i=e.originalData,n=this.group;i.each(i.mapDimension("value"),function(t,a){if(!isNaN(t)){var o=i.getItemLayout(a);if(o&&o.point){var r=o.point,s=o.offset,l=new Ut({style:{fill:e.getData().getVisual("style").fill},shape:{cx:r[0]+9*s,cy:r[1],r:3},silent:!0,z2:8+(s?0:ge+1)});if(!s){var u=e.mainSeries.getData(),d=i.getName(a),c=u.indexOfName(d),h=i.getItemModel(a),p=h.getModel("label"),g=u.getItemGraphicEl(c);_(l,b(h),{labelFetcher:{getFormattedLabel:function(t,a){return e.getFormattedLabel(c,a)}},defaultText:d}),l.disableLabelAnimation=!0,p.get("position")||l.setTextConfig({position:"bottom"}),g.onHoverStateChange=function(e){V(l,e)}}n.add(l)}}})},a.type="map",a}(R),Tn=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(e){if(null!=e){var t=this.getData().getName(e),a=this.coordinateSystem,i=a.getRegion(t);return i&&a.dataToPoint(i.getCenter())}},e}return e(a,t),a.prototype.getInitialData=function(e){for(var t=pn(this,{coordDimensions:["value"],encodeDefaulter:mt(re,this)}),a=Zt(),i=[],n=0,o=t.count();n<o;n++){var r=t.getName(n);a.set(r,n)}var s=fe.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return xt(s.regions,function(e){var n,o=e.name,r=a.get(o),s=e.properties&&e.properties.echartsStyle;null==r?(n={name:o},i.push(n)):n=t.getRawDataItem(r),s&&jt(n,s)}),t.appendData(i),t},a.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},a.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},a.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},a.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},a.prototype.formatTooltip=function(e,t,a){for(var i=this.getData(),n=this.getRawValue(e),o=i.getName(e),r=this.seriesGroup,s=[],l=0;l<r.length;l++){var u=r[l].originalData.indexOfName(o),d=i.mapDimension("value");isNaN(r[l].originalData.get(d,u))||s.push(r[l].name)}return Oa("section",{header:s.join(", "),noHeader:!s.length,blocks:[Oa("nameValue",{name:o,value:n})]})},a.prototype.setZoom=function(e){this.option.zoom=e},a.prototype.setCenter=function(e){this.option.center=e},a.prototype.getLegendIcon=function(e){var t=e.icon||"roundRect",a=h(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return a.setStyle(e.itemStyle),a.style.stroke="none",t.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a},a.type="series.map",a.dependencies=["geo"],a.layoutMode="box",a.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},a}(p);function Pn(e){var t={};e.eachSeriesByType("map",function(e){var a=e.getHostGeoModel(),i=a?"o"+a.id:"i"+e.getMapType();(t[i]=t[i]||[]).push(e)}),xt(t,function(e,t){for(var a,i,n,o=(a=vt(e,function(e){return e.getData()}),i=e[0].get("mapValueCalculation"),n={},xt(a,function(e){e.each(e.mapDimension("value"),function(t,a){var i="ec-"+e.getName(a);n[i]=n[i]||[],isNaN(t)||n[i].push(t)})}),a[0].map(a[0].mapDimension("value"),function(e,t){for(var o="ec-"+a[0].getName(t),r=0,s=1/0,l=-1/0,u=n[o].length,d=0;d<u;d++)s=Math.min(s,n[o][d]),l=Math.max(l,n[o][d]),r+=n[o][d];return 0===u?NaN:"min"===i?s:"max"===i?l:"average"===i?r/u:r})),r=0;r<e.length;r++)e[r].originalData=e[r].getData();for(r=0;r<e.length;r++)e[r].seriesGroup=e,e[r].needsDrawMap=0===r&&!e[r].getHostGeoModel(),e[r].setData(o.cloneShallow()),e[r].mainSeries=e[0]})}function En(e){var t={};e.eachSeriesByType("map",function(a){var i=a.getMapType();if(!a.getHostGeoModel()&&!t[i]){var n={};xt(a.seriesGroup,function(t){var a=t.coordinateSystem,i=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&i.each(i.mapDimension("value"),function(e,t){var o=i.getName(t),r=a.getRegion(o);if(r&&!isNaN(e)){var s=n[o]||0,l=a.dataToPoint(r.getCenter());n[o]=s+1,i.setItemLayout(t,{point:l,offset:s})}})});var o=a.getData();o.each(function(e){var t=o.getName(e),a=o.getItemLayout(e)||{};a.showLabel=!n[t],o.setItemLayout(e,a)}),t[i]=!0}})}function Rn(e){he(Fa),e.registerChartView(Nn),e.registerSeriesModel(Tn),e.registerLayout(En),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Pn),ue("map",e.registerAction)}function Vn(e,t){var a=e.isExpand?e.children:[],i=e.parentNode.children,n=e.hierNode.i?i[e.hierNode.i-1]:null;if(a.length){!function(e){var t=e.children,a=t.length,i=0,n=0;for(;--a>=0;){var o=t[a];o.hierNode.prelim+=i,o.hierNode.modifier+=i,n+=o.hierNode.change,i+=o.hierNode.shift+n}}(e);var o=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;n?(e.hierNode.prelim=n.hierNode.prelim+t(e,n),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else n&&(e.hierNode.prelim=n.hierNode.prelim+t(e,n));e.parentNode.hierNode.defaultAncestor=function(e,t,a,i){if(t){for(var n=e,o=e,r=o.parentNode.children[0],s=t,l=n.hierNode.modifier,u=o.hierNode.modifier,d=r.hierNode.modifier,c=s.hierNode.modifier;s=Gn(s),o=Bn(o),s&&o;){n=Gn(n),r=Bn(r),n.hierNode.ancestor=e;var h=s.hierNode.prelim+c-o.hierNode.prelim-u+i(s,o);h>0&&(Wn(Fn(s,e,a),e,h),u+=h,l+=h),c+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=n.hierNode.modifier,d+=r.hierNode.modifier}s&&!Gn(n)&&(n.hierNode.thread=s,n.hierNode.modifier+=c-l),o&&!Bn(r)&&(r.hierNode.thread=o,r.hierNode.modifier+=u-d,a=e)}return a}(e,n,e.parentNode.hierNode.defaultAncestor||i[0],t)}function zn(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function kn(e){return arguments.length?e:Yn}function On(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function Gn(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Bn(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Fn(e,t,a){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:a}function Wn(e,t,a){var i=a/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=a,t.hierNode.modifier+=a,t.hierNode.prelim+=a,e.hierNode.change+=i}function Yn(e,t){return e.parentNode===t.parentNode?1:2}var Hn=function(){return function(){this.parentPoint=[],this.childPoints=[]}}(),Xn=function(t){function a(e){return t.call(this,e)||this}return e(a,t),a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new Hn},a.prototype.buildPath=function(e,t){var a=t.childPoints,i=a.length,n=t.parentPoint,o=a[0],r=a[i-1];if(1===i)return e.moveTo(n[0],n[1]),void e.lineTo(o[0],o[1]);var s=t.orient,l="TB"===s||"BT"===s?0:1,u=1-l,d=$(t.forkPosition,1),c=[];c[l]=n[l],c[u]=n[u]+(r[u]-n[u])*d,e.moveTo(n[0],n[1]),e.lineTo(c[0],c[1]),e.moveTo(o[0],o[1]),c[l]=o[l],e.lineTo(c[0],c[1]),c[l]=r[l],e.lineTo(c[0],c[1]),e.lineTo(r[0],r[1]);for(var h=1;h<i-1;h++){var p=a[h];e.moveTo(p[0],p[1]),c[l]=p[l],e.lineTo(c[0],c[1])}},a}(Ct),Un=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e._mainGroup=new St,e}return e(a,t),a.prototype.init=function(e,t){this._controller=new Wa(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},a.prototype.render=function(e,t,a){var i=e.getData(),n=e.layoutInfo,o=this._mainGroup;"radial"===e.get("layout")?(o.x=n.x+n.width/2,o.y=n.y+n.height/2):(o.x=n.x,o.y=n.y),this._updateViewCoordSys(e,a),this._updateController(e,t,a);var r=this._data;i.diff(r).add(function(t){Zn(i,t)&&jn(i,t,null,o,e)}).update(function(t,a){var n=r.getItemGraphicEl(a);Zn(i,t)?jn(i,t,n,o,e):n&&Jn(r,a,n,o,e)}).remove(function(t){var a=r.getItemGraphicEl(t);a&&Jn(r,t,a,o,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&i.eachItemGraphicEl(function(t,i){t.off("click").on("click",function(){a.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:i})})}),this._data=i},a.prototype._updateViewCoordSys=function(e,t){var a=e.getData(),i=[];a.each(function(e){var t=a.getItemLayout(e);!t||isNaN(t.x)||isNaN(t.y)||i.push([+t.x,+t.y])});var n=[],o=[];qt(i,n,o);var r=this._min,s=this._max;o[0]-n[0]===0&&(n[0]=r?r[0]:n[0]-1,o[0]=s?s[0]:o[0]+1),o[1]-n[1]===0&&(n[1]=r?r[1]:n[1]-1,o[1]=s?s[1]:o[1]+1);var l=e.coordinateSystem=new ye;l.zoomLimit=e.get("scaleLimit"),l.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1]),l.setCenter(e.get("center"),t),l.setZoom(e.get("zoom")),this.group.attr({x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY}),this._min=n,this._max=o},a.prototype._updateController=function(e,t,a){var i=this,n=this._controller,o=this._controllerHost,r=this.group;n.setPointerChecker(function(t,i,n){var o=r.getBoundingRect();return o.applyTransform(r.transform),o.contain(i,n)&&!Ya(t,a,e)}),n.enable(e.get("roam")),o.zoomLimit=e.get("scaleLimit"),o.zoom=e.coordinateSystem.getZoom(),n.off("pan").off("zoom").on("pan",function(t){Ha(o,t.dx,t.dy),a.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){Xa(o,t.scale,t.originX,t.originY),a.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),i._updateNodeAndLinkScale(e),a.updateLabelLayout()})},a.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),a=this._getNodeGlobalScale(e);t.eachItemGraphicEl(function(e,t){e.setSymbolScale(a)})},a.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var a=this._nodeScaleRatio,i=t.scaleX||1;return((t.getZoom()-1)*a+1)/i},a.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},a.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},a.type="tree",a}(R);function Zn(e,t){var a=e.getItemLayout(t);return a&&!isNaN(a.x)&&!isNaN(a.y)}function jn(e,t,a,i,n){var o=!a,r=e.tree.getNodeByDataIndex(t),s=r.getModel(),l=r.getVisual("style").fill,u=!1===r.isExpand&&0!==r.children.length?l:"#fff",d=e.tree.root,c=r.parentNode===d?r:r.parentNode||r,h=e.getItemGraphicEl(c.dataIndex),p=c.getLayout(),g=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:p,f=r.getLayout();o?((a=new $a(e,t,null,{symbolInnerColor:u,useNameLabel:!0})).x=g.x,a.y=g.y):a.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=f.rawX,a.__radialRawY=f.rawY,i.add(a),e.setItemGraphicEl(t,a),a.__oldX=a.x,a.__oldY=a.y,m(a,{x:f.x,y:f.y},n);var y=a.getSymbolPath();if("radial"===n.get("layout")){var v=d.children[0],x=v.getLayout(),b=v.children.length,S=void 0,_=void 0;if(f.x===x.x&&!0===r.isExpand&&v.children.length){var w={x:(v.children[0].getLayout().x+v.children[b-1].getLayout().x)/2,y:(v.children[0].getLayout().y+v.children[b-1].getLayout().y)/2};(S=Math.atan2(w.y-x.y,w.x-x.x))<0&&(S=2*Math.PI+S),(_=w.x<x.x)&&(S-=Math.PI)}else(S=Math.atan2(f.y-x.y,f.x-x.x))<0&&(S=2*Math.PI+S),0===r.children.length||0!==r.children.length&&!1===r.isExpand?(_=f.x<x.x)&&(S-=Math.PI):(_=f.x>x.x)||(S-=Math.PI);var M=_?"left":"right",L=s.getModel("label"),D=L.get("rotate"),A=D*(Math.PI/180),C=y.getTextContent();C&&(y.setTextConfig({position:L.get("position")||M,rotation:null==D?-S:A,origin:"center"}),C.setStyle("verticalAlign","middle"))}var N=s.get(["emphasis","focus"]),T="relative"===N?Kt(r.getAncestorsIndices(),r.getDescendantIndices()):"ancestor"===N?r.getAncestorsIndices():"descendant"===N?r.getDescendantIndices():null;T&&(I(a).focus=T),function(e,t,a,i,n,o,r,s){var l=t.getModel(),u=e.get("edgeShape"),d=e.get("layout"),c=e.getOrient(),h=e.get(["lineStyle","curveness"]),p=e.get("edgeForkPosition"),g=l.getModel("lineStyle").getLineStyle(),f=i.__edge;if("curve"===u)t.parentNode&&t.parentNode!==a&&(f||(f=i.__edge=new Jt({shape:Qn(d,c,h,n,n)})),m(f,{shape:Qn(d,c,h,o,r)},e));else if("polyline"===u&&"orthogonal"===d&&t!==a&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var y=t.children,v=[],x=0;x<y.length;x++){var b=y[x].getLayout();v.push([b.x,b.y])}f||(f=i.__edge=new Xn({shape:{parentPoint:[r.x,r.y],childPoints:[[r.x,r.y]],orient:c,forkPosition:p}})),m(f,{shape:{parentPoint:[r.x,r.y],childPoints:v}},e)}f&&("polyline"!==u||t.isExpand)&&(f.useStyle(Et({strokeNoScale:!0,fill:null},g)),P(f,l,"lineStyle"),ve(f),s.add(f))}(n,r,d,a,g,p,f,i),a.__edge&&(a.onHoverStateChange=function(t){if("blur"!==t){var i=r.parentNode&&e.getItemGraphicEl(r.parentNode.dataIndex);i&&i.hoverState===me||V(a.__edge,t)}})}function qn(e,t,a,i,n){var o=Kn(t.tree.root,e),r=o.source,s=o.sourceLayout,l=t.getItemGraphicEl(e.dataIndex);if(l){var u=t.getItemGraphicEl(r.dataIndex).__edge,d=l.__edge||(!1===r.isExpand||1===r.children.length?u:void 0),c=i.get("edgeShape"),h=i.get("layout"),p=i.get("orient"),g=i.get(["lineStyle","curveness"]);d&&("curve"===c?M(d,{shape:Qn(h,p,g,s,s),style:{opacity:0}},i,{cb:function(){a.remove(d)},removeOpt:n}):"polyline"===c&&"orthogonal"===i.get("layout")&&M(d,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},i,{cb:function(){a.remove(d)},removeOpt:n}))}}function Kn(e,t){for(var a,i=t.parentNode===e?t:t.parentNode||t;null==(a=i.getLayout());)i=i.parentNode===e?i:i.parentNode||i;return{source:i,sourceLayout:a}}function Jn(e,t,a,i,n){var o=e.tree.getNodeByDataIndex(t),r=Kn(e.tree.root,o).sourceLayout,s={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};M(a,{x:r.x+1,y:r.y+1},n,{cb:function(){i.remove(a),e.setItemGraphicEl(t,null)},removeOpt:s}),a.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:s}),o.children.forEach(function(t){qn(t,e,i,n,s)}),qn(o,e,i,n,s)}function Qn(e,t,a,i,n){var o,r,s,l,u,d,c,h;if("radial"===e){u=i.rawX,c=i.rawY,d=n.rawX,h=n.rawY;var p=On(u,c),g=On(u,c+(h-c)*a),f=On(d,h+(c-h)*a),y=On(d,h);return{x1:p.x||0,y1:p.y||0,x2:y.x||0,y2:y.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:f.x||0,cpy2:f.y||0}}return u=i.x,c=i.y,d=n.x,h=n.y,"LR"!==t&&"RL"!==t||(o=u+(d-u)*a,r=c,s=d+(u-d)*a,l=h),"TB"!==t&&"BT"!==t||(o=u,r=c+(h-c)*a,s=d,l=h+(c-h)*a),{x1:u,y1:c,x2:d,y2:h,cpx1:o,cpy1:r,cpx2:s,cpy2:l}}function $n(e,t,a){if(e&&Qt(t,e.type)>=0){var i=a.getData().tree.root,n=e.targetNode;if($t(n)&&(n=i.getNodeById(n)),n&&i.contains(n))return{node:n};var o=e.targetNodeId;if(null!=o&&(n=i.getNodeById(o)))return{node:n}}}function eo(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function to(e,t){var a=eo(e);return Qt(a,t)>=0}function ao(e,t){for(var a=[];e;){var i=e.dataIndex;a.push({name:e.name,dataIndex:i,value:t.getRawValue(i)}),e=e.parentNode}return a.reverse(),a}var io=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return e(a,t),a.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},a=e.leaves||{},i=new xe(a,this,this.ecModel),n=be.createTree(t,this,function(e){e.wrapMethod("getItemModel",function(e,t){var a=n.getNodeByDataIndex(t);return a&&a.children.length&&a.isExpand||(e.parentModel=i),e})});var o=0;n.eachNode("preorder",function(e){e.depth>o&&(o=e.depth)});var r=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:o;return n.root.eachNode("preorder",function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=r}),n.data},a.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},a.prototype.setZoom=function(e){this.option.zoom=e},a.prototype.setCenter=function(e){this.option.center=e},a.prototype.formatTooltip=function(e,t,a){for(var i=this.getData().tree,n=i.root.children[0],o=i.getNodeByDataIndex(e),r=o.getValue(),s=o.name;o&&o!==n;)s=o.parentNode.name+"."+s,o=o.parentNode;return Oa("nameValue",{name:s,value:r,noValue:isNaN(r)||null==r})},a.prototype.getDataParams=function(e){var a=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return a.treeAncestors=ao(i,this),a.collapsed=!i.isExpand,a},a.type="series.tree",a.layoutMode="box",a.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},a}(p);function no(e,t){for(var a,i=[e];a=i.pop();)if(t(a),a.isExpand){var n=a.children;if(n.length)for(var o=n.length-1;o>=0;o--)i.push(n[o])}}function oo(e,t){e.eachSeriesByType("tree",function(e){!function(e,t){var a=function(e,t){return Q(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=a;var i=e.get("layout"),n=0,o=0,r=null;"radial"===i?(n=2*Math.PI,o=Math.min(a.height,a.width)/2,r=kn(function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth})):(n=a.width,o=a.height,r=kn());var s=e.getData().tree.root,l=s.children[0];if(l){!function(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var a,i,n=[t];a=n.pop();)if(i=a.children,a.isExpand&&i.length)for(var o=i.length-1;o>=0;o--){var r=i[o];r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},n.push(r)}}(s),function(e,t,a){for(var i,n=[e],o=[];i=n.pop();)if(o.push(i),i.isExpand){var r=i.children;if(r.length)for(var s=0;s<r.length;s++)n.push(r[s])}for(;i=o.pop();)t(i,a)}(l,Vn,r),s.hierNode.modifier=-l.hierNode.prelim,no(l,zn);var u=l,d=l,c=l;no(l,function(e){var t=e.getLayout().x;t<u.getLayout().x&&(u=e),t>d.getLayout().x&&(d=e),e.depth>c.depth&&(c=e)});var h=u===d?1:r(u,d)/2,p=h-u.getLayout().x,g=0,f=0,y=0,m=0;if("radial"===i)g=n/(d.getLayout().x+h+p),f=o/(c.depth-1||1),no(l,function(e){y=(e.getLayout().x+p)*g,m=(e.depth-1)*f;var t=On(y,m);e.setLayout({x:t.x,y:t.y,rawX:y,rawY:m},!0)});else{var v=e.getOrient();"RL"===v||"LR"===v?(f=o/(d.getLayout().x+h+p),g=n/(c.depth-1||1),no(l,function(e){m=(e.getLayout().x+p)*f,y="LR"===v?(e.depth-1)*g:n-(e.depth-1)*g,e.setLayout({x:y,y:m},!0)})):"TB"!==v&&"BT"!==v||(g=n/(d.getLayout().x+h+p),f=o/(c.depth-1||1),no(l,function(e){y=(e.getLayout().x+p)*g,m="TB"===v?(e.depth-1)*f:o-(e.depth-1)*f,e.setLayout({x:y,y:m},!0)}))}}}(e,t)})}function ro(e){e.eachSeriesByType("tree",function(e){var t=e.getData();t.tree.eachNode(function(e){var a=e.getModel().getModel("itemStyle").getItemStyle(),i=t.ensureUniqueItemVisual(e.dataIndex,"style");wt(i,a)})})}function so(e){e.registerChartView(Un),e.registerSeriesModel(io),e.registerLayout(oo),e.registerVisual(ro),function(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var a=e.dataIndex,i=t.getData().tree.getNodeByDataIndex(a);i.isExpand=!i.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,a){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var i=t.coordinateSystem,n=Se(i,e,void 0,a);t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom)})})}(e)}var lo=["treemapZoomToNode","treemapRender","treemapMove"];function uo(e){var t=e.getData().tree,a={};t.eachNode(function(t){for(var i=t;i&&i.depth>1;)i=i.parentNode;var n=_e(e.ecModel,i.name||i.dataIndex+"",a);t.setVisual("decal",n)})}var co=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.preventUsingHoverLayer=!0,e}return e(a,t),a.prototype.getInitialData=function(e,t){var a={name:e.name,children:e.data};ho(a);var i=e.levels||[],n=this.designatedVisualItemStyle={},o=new xe({itemStyle:n},this,t);i=e.levels=function(e,t){var a,i,n=we(t.get("color")),o=we(t.get(["aria","decal","decals"]));if(!n)return;e=e||[],xt(e,function(e){var t=new xe(e),n=t.get("color"),o=t.get("decal");(t.get(["itemStyle","color"])||n&&"none"!==n)&&(a=!0),(t.get(["itemStyle","decal"])||o&&"none"!==o)&&(i=!0)});var r=e[0]||(e[0]={});a||(r.color=n.slice());!i&&o&&(r.decal=o.slice());return e}(i,t);var r=vt(i||[],function(e){return new xe(e,o,t)},this),s=be.createTree(a,this,function(e){e.wrapMethod("getItemModel",function(e,t){var a=s.getNodeByDataIndex(t),i=a?r[a.depth]:null;return e.parentModel=i||o,e})});return s.data},a.prototype.optionUpdated=function(){this.resetViewRoot()},a.prototype.formatTooltip=function(e,t,a){var i=this.getData(),n=this.getRawValue(e),o=i.getName(e);return Oa("nameValue",{name:o,value:n})},a.prototype.getDataParams=function(e){var a=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return a.treeAncestors=ao(i,this),a.treePathInfo=a.treeAncestors,a},a.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},wt(this.layoutInfo,e)},a.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=Zt(),this._idIndexMapCount=0);var a=t.get(e);return null==a&&t.set(e,a=this._idIndexMapCount++),a},a.prototype.getViewRoot=function(){return this._viewRoot},a.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},a.prototype.enableAriaDecal=function(){uo(this)},a.type="series.treemap",a.layoutMode="box",a.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},a}(p);function ho(e){var t=0;xt(e.children,function(e){ho(e);var a=e.value;bt(a)&&(a=a[0]),t+=a});var a=e.value;bt(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=t),a<0&&(a=0),bt(e.value)?e.value[0]=a:e.value=a}var po=function(){function e(e){this.group=new St,e.add(this.group)}return e.prototype.render=function(e,t,a,i){var n=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),n.get("show")&&a){var r=n.getModel("itemStyle"),s=n.getModel("emphasis"),l=r.getModel("textStyle"),u=s.getModel(["itemStyle","textStyle"]),d={pos:{left:n.get("left"),right:n.get("right"),top:n.get("top"),bottom:n.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:n.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(a,d,l),this._renderContent(e,d,r,s,l,u,i),Ie(o,d.pos,d.box)}},e.prototype._prepare=function(e,t,a){for(var i=e;i;i=i.parentNode){var n=Me(i.getModel().get("name"),""),o=a.getTextRect(n),r=Math.max(o.width+16,t.emptyItemWidth);t.totalWidth+=r+8,t.renderList.push({node:i,text:n,width:r})}},e.prototype._renderContent=function(e,t,a,i,n,o,r){for(var s=0,l=t.emptyItemWidth,u=e.get(["breadcrumb","height"]),d=Le(t.pos,t.box),c=t.totalWidth,h=t.renderList,p=i.getModel("itemStyle").getItemStyle(),g=h.length-1;g>=0;g--){var f=h[g],y=f.node,m=f.width,v=f.text;c>d.width&&(c-=m-l,m=l,v=null);var x=new Ht({shape:{points:go(s,0,m,u,g===h.length-1,0===g)},style:Et(a.getItemStyle(),{lineJoin:"bevel"}),textContent:new Rt({style:De(n,{text:v})}),textConfig:{position:"inside"},z2:1e4*ge,onclick:mt(r,y)});x.disableLabelAnimation=!0,x.getTextContent().ensureState("emphasis").style=De(o,{text:v}),x.ensureState("emphasis").style=p,w(x,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(x),fo(x,e,y),s+=m+8}},e.prototype.remove=function(){this.group.removeAll()},e}();function go(e,t,a,i,n,o){var r=[[n?e:e-5,t],[e+a,t],[e+a,t+i],[n?e:e-5,t+i]];return!o&&r.splice(2,0,[e+a+5,t+i/2]),!n&&r.push([e,t+i/2]),r}function fo(e,t,a){I(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&ao(a,t)}}var yo=St,mo=Nt,vo="label",xo="upperLabel",bo=10*ge,So=2*ge,_o=3*ge,wo=Re([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Io=function(e){var t=wo(e);return t.stroke=t.fill=t.lineWidth=null,t},Mo=t(),Lo=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e._state="ready",e._storage={nodeGroup:[],background:[],content:[]},e}return e(a,t),a.prototype.render=function(e,t,a,i){var n=t.findComponents({mainType:"series",subType:"treemap",query:i});if(!(Qt(n,e)<0)){this.seriesModel=e,this.api=a,this.ecModel=t;var o=$n(i,["treemapZoomToNode","treemapRootToNode"],e),r=i&&i.type,s=e.layoutInfo,l=!this._oldTree,u=this._storage,d="treemapRootToNode"===r&&o&&u?{rootNodeGroup:u.nodeGroup[o.node.getRawIndex()],direction:i.direction}:null,c=this._giveContainerGroup(s),h=e.get("animation"),p=this._doRender(c,e,d);!h||l||r&&"treemapZoomToNode"!==r&&"treemapRootToNode"!==r?p.renderFinally():this._doAnimation(c,p,e,d),this._resetController(a),this._renderBreadcrumb(e,a,o)}},a.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new yo,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},a.prototype._doRender=function(e,t,a){var i=t.getData().tree,n=this._oldTree,o={nodeGroup:[],background:[],content:[]},r={nodeGroup:[],background:[],content:[]},s=this._storage,l=[];function u(e,i,n,u){return function(e,t,a,i,n,o,r,s,l,u){if(!r)return;var d=r.getLayout(),c=e.getData(),h=r.getModel();if(c.setItemGraphicEl(r.dataIndex,null),!d||!d.isInView)return;var p=d.width,g=d.height,f=d.borderWidth,y=d.invisible,m=r.getRawIndex(),v=s&&s.getRawIndex(),x=r.viewChildren,S=d.upperHeight,w=x&&x.length,M=h.getModel("itemStyle"),L=h.getModel(["emphasis","itemStyle"]),D=h.getModel(["blur","itemStyle"]),A=h.getModel(["select","itemStyle"]),C=M.get("borderRadius")||0,N=H("nodeGroup",yo);if(!N)return;if(l.add(N),N.x=d.x||0,N.y=d.y||0,N.markRedraw(),Mo(N).nodeWidth=p,Mo(N).nodeHeight=g,d.isAboveViewRoot)return N;var T=H("background",mo,u,So);T&&G(N,T,w&&d.upperLabelHeight);var P=h.getModel("emphasis"),E=P.get("focus"),R=P.get("blurScope"),V=P.get("disabled"),z="ancestor"===E?r.getAncestorsIndices():"descendant"===E?r.getDescendantIndices():E;if(w)Te(N)&&Pe(N,!1),T&&(Pe(T,!V),c.setItemGraphicEl(r.dataIndex,T),Ee(T,z,R));else{var k=H("content",mo,u,_o);k&&B(N,k),T.disableMorphing=!0,T&&Te(T)&&Pe(T,!1),Pe(N,!V),c.setItemGraphicEl(r.dataIndex,N);var O=h.getShallow("cursor");O&&k.attr("cursor",O),Ee(N,z,R)}return N;function G(t,a,i){var n=I(a);if(n.dataIndex=r.dataIndex,n.seriesIndex=e.seriesIndex,a.setShape({x:0,y:0,width:p,height:g,r:C}),y)F(a);else{a.invisible=!1;var o=r.getVisual("style"),s=o.stroke,l=Io(M);l.fill=s;var u=wo(L);u.fill=L.get("borderColor");var d=wo(D);d.fill=D.get("borderColor");var c=wo(A);if(c.fill=A.get("borderColor"),i){var h=p-2*f;W(a,s,o.opacity,{x:f,y:0,width:h,height:S})}else a.removeTextContent();a.setStyle(l),a.ensureState("emphasis").style=u,a.ensureState("blur").style=d,a.ensureState("select").style=c,ve(a)}t.add(a)}function B(t,a){var i=I(a);i.dataIndex=r.dataIndex,i.seriesIndex=e.seriesIndex;var n=Math.max(p-2*f,0),o=Math.max(g-2*f,0);if(a.culling=!0,a.setShape({x:f,y:f,width:n,height:o,r:C}),y)F(a);else{a.invisible=!1;var s=r.getVisual("style"),l=s.fill,u=Io(M);u.fill=l,u.decal=s.decal;var d=wo(L),c=wo(D),h=wo(A);W(a,l,s.opacity,null),a.setStyle(u),a.ensureState("emphasis").style=d,a.ensureState("blur").style=c,a.ensureState("select").style=h,ve(a)}t.add(a)}function F(e){!e.invisible&&o.push(e)}function W(t,a,i,n){var o=h.getModel(n?xo:vo),s=Me(h.get("name"),null),l=o.getShallow("show");_(t,b(h,n?xo:vo),{defaultText:l?s:null,inheritColor:a,defaultOpacity:i,labelFetcher:e,labelDataIndex:r.dataIndex});var u=t.getTextContent();if(u){var c=u.style,p=na(c.padding||0);n&&(t.setTextConfig({layoutRect:n}),u.disableLabelLayout=!0),u.beforeUpdate=function(){var e=Math.max((n?n.width:t.shape.width)-p[1]-p[3],0),a=Math.max((n?n.height:t.shape.height)-p[0]-p[2],0);c.width===e&&c.height===a||u.setStyle({width:e,height:a})},c.truncateMinChar=2,c.lineOverflow="truncate",Y(c,n,d);var g=u.getState("emphasis");Y(g?g.style:null,n,d)}}function Y(t,a,i){var n=t?t.text:null;if(!a&&i.isLeafRoot&&null!=n){var o=e.get("drillDownIcon",!0);t.text=o?o+" "+n:n}}function H(e,i,o,r){var s=null!=v&&a[e][v],l=n[e];return s?(a[e][v]=null,X(l,s)):y||((s=new i)instanceof oa&&(s.z2=function(e,t){return e*bo+t}(o,r)),U(l,s)),t[e][m]=s}function X(e,t){var a=e[m]={};t instanceof yo?(a.oldX=t.x,a.oldY=t.y):a.oldShape=wt({},t.shape)}function U(e,t){var a=e[m]={},o=r.parentNode,s=t instanceof St;if(o&&(!i||"drillDown"===i.direction)){var l=0,u=0,d=n.background[o.getRawIndex()];!i&&d&&d.oldShape&&(l=d.oldShape.width,u=d.oldShape.height),s?(a.oldX=0,a.oldY=u):a.oldShape={x:l,y:u,width:0,height:0}}a.fadein=!s}}(t,r,s,a,o,l,e,i,n,u)}!function e(t,a,i,n,o){n?(a=t,xt(t,function(e,t){!e.isRemoved()&&s(t,t)})):new Ae(a,t,r,r).add(s).update(s).remove(mt(s,null)).execute();function r(e){return e.getId()}function s(r,s){var l=null!=r?t[r]:null,d=null!=s?a[s]:null,c=u(l,d,i,o);c&&e(l&&l.viewChildren||[],d&&d.viewChildren||[],c,n,o+1)}}(i.root?[i.root]:[],n&&n.root?[n.root]:[],e,i===n||!n,0);var d,c,h=(c={nodeGroup:[],background:[],content:[]},(d=s)&&xt(d,function(e,t){var a=c[t];xt(e,function(e){e&&(a.push(e),Mo(e).willDelete=!0)})}),c);if(this._oldTree=i,this._storage=r,this._controllerHost){var p=this.seriesModel.layoutInfo,g=i.root.getLayout();g.width===p.width&&g.height===p.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:o,willDeleteEls:h,renderFinally:function(){xt(h,function(e){xt(e,function(e){e.parent&&e.parent.remove(e)})}),xt(l,function(e){e.invisible=!0,e.dirty()})}}},a.prototype._doAnimation=function(e,t,a,i){var n=a.get("animationDurationUpdate"),o=a.get("animationEasing"),r=(yt(n)?0:n)||0,s=(yt(o)?null:o)||"cubicOut",l=Ce();xt(t.willDeleteEls,function(e,t){xt(e,function(e,a){if(!e.invisible){var n,o=e.parent,u=Mo(o);if(i&&"drillDown"===i.direction)n=o===i.rootNodeGroup?{shape:{x:0,y:0,width:u.nodeWidth,height:u.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var d=0,c=0;u.willDelete||(d=u.nodeWidth/2,c=u.nodeHeight/2),n="nodeGroup"===t?{x:d,y:c,style:{opacity:0}}:{shape:{x:d,y:c,width:0,height:0},style:{opacity:0}}}n&&l.add(e,n,r,0,s)}})}),xt(this._storage,function(e,a){xt(e,function(e,i){var n=t.lastsForAnimation[a][i],o={};n&&(e instanceof St?null!=n.oldX&&(o.x=e.x,o.y=e.y,e.x=n.oldX,e.y=n.oldY):(n.oldShape&&(o.shape=wt({},e.shape),e.setShape(n.oldShape)),n.fadein?(e.setStyle("opacity",0),o.style={opacity:1}):1!==e.style.opacity&&(o.style={opacity:1})),l.add(e,o,r,0,s))})},this),this._state="animating",l.finished(Pt(function(){this._state="ready",t.renderFinally()},this)).start()},a.prototype._resetController=function(e){var t=this._controller,a=this._controllerHost;a||(this._controllerHost={target:this.group},a=this._controllerHost),t||((t=this._controller=new Wa(e.getZr())).enable(this.seriesModel.get("roam")),a.zoomLimit=this.seriesModel.get("scaleLimit"),a.zoom=this.seriesModel.get("zoom"),t.on("pan",Pt(this._onPan,this)),t.on("zoom",Pt(this._onZoom,this)));var i=new Wt(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(e,t,a){return i.contain(t,a)})},a.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},a.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var a=t.getLayout();if(!a)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x+e.dx,y:a.y+e.dy,width:a.width,height:a.height}})}},a.prototype._onZoom=function(e){var t=e.originX,a=e.originY,i=e.scale;if("animating"!==this._state){var n=this.seriesModel.getData().tree.root;if(!n)return;var o=n.getLayout();if(!o)return;var r,s=new Wt(o.x,o.y,o.width,o.height),l=this._controllerHost;r=l.zoomLimit;var u=l.zoom=l.zoom||1;if(u*=i,r){var d=r.min||0,c=r.max||1/0;u=Math.max(Math.min(c,u),d)}var h=u/l.zoom;l.zoom=u;var p=this.seriesModel.layoutInfo;t-=p.x,a-=p.y;var g=aa();ta(g,g,[-t,-a]),ia(g,g,[h,h]),ta(g,g,[t,a]),s.applyTransform(g),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},a.prototype._initEvents=function(e){var t=this;e.on("click",function(e){if("ready"===t._state){var a=t.seriesModel.get("nodeClick",!0);if(a){var i=t.findTarget(e.offsetX,e.offsetY);if(i){var n=i.node;if(n.getLayout().isLeafRoot)t._rootToNode(i);else if("zoomToNode"===a)t._zoomToNode(i);else if("link"===a){var o=n.hostTree.data.getItemModel(n.dataIndex),r=o.get("link",!0),s=o.get("target",!0)||"blank";r&&Ne(r,s)}}}}},this)},a.prototype._renderBreadcrumb=function(e,t,a){var i=this;a||(a=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(a={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new po(this.group))).render(e,t,a.node,function(t){"animating"!==i._state&&(to(e.getViewRoot(),t)?i._rootToNode({node:t}):i._zoomToNode({node:t}))})},a.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},a.prototype.dispose=function(){this._clearController()},a.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},a.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},a.prototype.findTarget=function(e,t){var a;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(i){var n=this._storage.background[i.getRawIndex()];if(n){var o=n.transformCoordToLocal(e,t),r=n.shape;if(!(r.x<=o[0]&&o[0]<=r.x+r.width&&r.y<=o[1]&&o[1]<=r.y+r.height))return!1;a={node:i,offsetX:o[0],offsetY:o[1]}}},this),a},a.type="treemap",a}(R);var Do=t();const Ao={seriesType:"treemap",reset:function(e){var t=e.getData().tree.root;t.isRemoved()||Co(t,{},e.getViewRoot().getAncestors(),e)}};function Co(e,t,a,i){var n=e.getModel(),o=e.getLayout(),r=e.hostTree.data;if(o&&!o.invisible&&o.isInView){var s,l=n.getModel("itemStyle"),u=function(e,t,a){var i=wt({},t),n=a.designatedVisualItemStyle;return xt(["color","colorAlpha","colorSaturation"],function(a){n[a]=t[a];var o=e.get(a);n[a]=null,null!=o&&(i[a]=o)}),i}(l,t,i),d=r.ensureUniqueItemVisual(e.dataIndex,"style"),c=l.get("borderColor"),h=l.get("borderColorSaturation");null!=h&&(c=function(e,t){return null!=t?ra(t,null,null,e):null}(h,s=No(u))),d.stroke=c;var p=e.viewChildren;if(p&&p.length){var g=function(e,t,a,i,n,o){if(!o||!o.length)return;var r=Po(t,"color")||null!=n.color&&"none"!==n.color&&(Po(t,"colorAlpha")||Po(t,"colorSaturation"));if(!r)return;var s=t.get("visualMin"),l=t.get("visualMax"),u=a.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var d=t.get("colorMappingBy"),c={type:r.name,dataExtent:u,visual:r.range};"color"!==c.type||"index"!==d&&"id"!==d?c.mappingMethod="linear":(c.mappingMethod="category",c.loop=!0);var h=new Ve(c);return Do(h).drColorMappingBy=d,h}(0,n,o,0,u,p);xt(p,function(e,t){if(e.depth>=a.length||e===a[e.depth]){var o=function(e,t,a,i,n,o){var r=wt({},t);if(n){var s=n.type,l="color"===s&&Do(n).drColorMappingBy,u="index"===l?i:"id"===l?o.mapIdToIndex(a.getId()):a.getValue(e.get("visualDimension"));r[s]=n.mapValueToVisual(u)}return r}(n,u,e,t,g,i);Co(e,o,a,i)}})}else s=No(u),d.fill=s}}function No(e){var t=To(e,"color");if(t){var a=To(e,"colorAlpha"),i=To(e,"colorSaturation");return i&&(t=ra(t,null,null,i)),a&&(t=sa(t,a)),t}}function To(e,t){var a=e[t];if(null!=a&&"none"!==a)return a}function Po(e,t){var a=e.get(t);return bt(a)&&a.length?{name:t,range:a}:null}var Eo=Math.max,Ro=Math.min,Vo=la,zo=xt,ko=["itemStyle","borderWidth"],Oo=["itemStyle","gapWidth"],Go=["upperLabel","show"],Bo=["upperLabel","height"];const Fo={seriesType:"treemap",reset:function(e,t,a,i){var n=a.getWidth(),o=a.getHeight(),r=e.option,s=Q(e.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),l=r.size||[],u=$(Vo(s.width,l[0]),n),d=$(Vo(s.height,l[1]),o),c=i&&i.type,h=$n(i,["treemapZoomToNode","treemapRootToNode"],e),p="treemapRender"===c||"treemapMove"===c?i.rootRect:null,g=e.getViewRoot(),f=eo(g);if("treemapMove"!==c){var y="treemapZoomToNode"===c?function(e,t,a,i,n){var o,r=(t||{}).node,s=[i,n];if(!r||r===a)return s;var l=i*n,u=l*e.option.zoomToNodeRatio;for(;o=r.parentNode;){for(var d=0,c=o.children,h=0,p=c.length;h<p;h++)d+=c[h].getValue();var g=r.getValue();if(0===g)return s;u*=d/g;var f=o.getModel(),y=f.get(ko);(u+=4*y*y+(3*y+Math.max(y,Uo(f)))*Math.pow(u,.5))>ze&&(u=ze),r=o}u<l&&(u=l);var m=Math.pow(u/l,.5);return[i*m,n*m]}(e,h,g,u,d):p?[p.width,p.height]:[u,d],m=r.sort;m&&"asc"!==m&&"desc"!==m&&(m="desc");var v={squareRatio:r.squareRatio,sort:m,leafDepth:r.leafDepth};g.hostTree.clearLayouts();var x={x:0,y:0,width:y[0],height:y[1],area:y[0]*y[1]};g.setLayout(x),Wo(g,v,!1,0),x=g.getLayout(),zo(f,function(e,t){var a=(f[t+1]||g).getValue();e.setLayout(wt({dataExtent:[a,a],borderWidth:0,upperHeight:0},x))})}var b=e.getData().tree.root;b.setLayout(function(e,t,a){if(t)return{x:t.x,y:t.y};var i={x:0,y:0};if(!a)return i;var n=a.node,o=n.getLayout();if(!o)return i;var r=[o.width/2,o.height/2],s=n;for(;s;){var l=s.getLayout();r[0]+=l.x,r[1]+=l.y,s=s.parentNode}return{x:e.width/2-r[0],y:e.height/2-r[1]}}(s,p,h),!0),e.setLayoutInfo(s),Xo(b,new Wt(-s.x,-s.y,n,o),f,g,0)}};function Wo(e,t,a,i){var n,o;if(!e.isRemoved()){var r=e.getLayout();n=r.width,o=r.height;var s=e.getModel(),l=s.get(ko),u=s.get(Oo)/2,d=Uo(s),c=Math.max(l,d),h=l-u,p=c-u;e.setLayout({borderWidth:l,upperHeight:c,upperLabelHeight:d},!0);var g=(n=Eo(n-2*h,0))*(o=Eo(o-h-p,0)),f=function(e,t,a,i,n,o){var r=e.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=o;if(n&&!l)return e.viewChildren=[];r=ua(r,function(e){return!e.isRemoved()}),function(e,t){t&&e.sort(function(e,a){var i="asc"===t?e.getValue()-a.getValue():a.getValue()-e.getValue();return 0===i?"asc"===t?e.dataIndex-a.dataIndex:a.dataIndex-e.dataIndex:i})}(r,s);var u=function(e,t,a){for(var i=0,n=0,o=t.length;n<o;n++)i+=t[n].getValue();var r,s=e.get("visualDimension");t&&t.length?"value"===s&&a?(r=[t[t.length-1].getValue(),t[0].getValue()],"asc"===a&&r.reverse()):(r=[1/0,-1/0],zo(t,function(e){var t=e.getValue(s);t<r[0]&&(r[0]=t),t>r[1]&&(r[1]=t)})):r=[NaN,NaN];return{sum:i,dataExtent:r}}(t,r,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=function(e,t,a,i,n){if(!i)return a;for(var o=e.get("visibleMin"),r=n.length,s=r,l=r-1;l>=0;l--){var u=n["asc"===i?r-l-1:l].getValue();u/a*t<o&&(s=l,a-=u)}return"asc"===i?n.splice(0,r-s):n.splice(s,r-s),a}(t,a,u.sum,s,r),0===u.sum)return e.viewChildren=[];for(var d=0,c=r.length;d<c;d++){var h=r[d].getValue()/u.sum*a;r[d].setLayout({area:h})}l&&(r.length&&e.setLayout({isLeafRoot:!0},!0),r.length=0);return e.viewChildren=r,e.setLayout({dataExtent:u.dataExtent},!0),r}(e,s,g,t,a,i);if(f.length){var y={x:h,y:p,width:n,height:o},m=Ro(n,o),v=1/0,x=[];x.area=0;for(var b=0,S=f.length;b<S;){var _=f[b];x.push(_),x.area+=_.getLayout().area;var w=Yo(x,m,t.squareRatio);w<=v?(b++,v=w):(x.area-=x.pop().getLayout().area,Ho(x,m,y,u,!1),m=Ro(y.width,y.height),x.length=x.area=0,v=1/0)}if(x.length&&Ho(x,m,y,u,!0),!a){var I=s.get("childrenVisibleMin");null!=I&&g<I&&(a=!0)}for(b=0,S=f.length;b<S;b++)Wo(f[b],t,a,i+1)}}}function Yo(e,t,a){for(var i=0,n=1/0,o=0,r=void 0,s=e.length;o<s;o++)(r=e[o].getLayout().area)&&(r<n&&(n=r),r>i&&(i=r));var l=e.area*e.area,u=t*t*a;return l?Eo(u*i/l,l/(u*n)):1/0}function Ho(e,t,a,i,n){var o=t===a.width?0:1,r=1-o,s=["x","y"],l=["width","height"],u=a[s[o]],d=t?e.area/t:0;(n||d>a[l[r]])&&(d=a[l[r]]);for(var c=0,h=e.length;c<h;c++){var p=e[c],g={},f=d?p.getLayout().area/d:0,y=g[l[r]]=Eo(d-2*i,0),m=a[s[o]]+a[l[o]]-u,v=c===h-1||m<f?m:f,x=g[l[o]]=Eo(v-2*i,0);g[s[r]]=a[s[r]]+Ro(i,y/2),g[s[o]]=u+Ro(i,x/2),u+=v,p.setLayout(g,!0)}a[s[r]]+=d,a[l[r]]-=d}function Xo(e,t,a,i,n){var o=e.getLayout(),r=a[n],s=r&&r===e;if(!(r&&!s||n===a.length&&e!==i)){e.setLayout({isInView:!0,invisible:!s&&!t.intersect(o),isAboveViewRoot:s},!0);var l=new Wt(t.x-o.x,t.y-o.y,t.width,t.height);zo(e.viewChildren||[],function(e){Xo(e,l,a,i,n+1)})}}function Uo(e){return e.get(Go)?e.get(Bo):0}function Zo(e){e.registerSeriesModel(co),e.registerChartView(Lo),e.registerVisual(Ao),e.registerLayout(Fo),function(e){for(var t=0;t<lo.length;t++)e.registerAction({type:lo[t],update:"updateView"},ea);e.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},function(t,a){var i=$n(e,["treemapZoomToNode","treemapRootToNode"],t);if(i){var n=t.getViewRoot();n&&(e.direction=to(n,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}})})}(e)}function jo(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),i=e.getGraph().data,n=a.mapArray(a.getName);i.filterSelf(function(e){var a=i.getItemModel(e).getShallow("category");if(null!=a){Mt(a)&&(a=n[a]);for(var o=0;o<t.length;o++)if(!t[o].isSelected(a))return!1}return!0})})}function qo(e){var t={};e.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),i=e.getData(),n={};a.each(function(i){var o=a.getName(i);n["ec-"+o]=i;var r=a.getItemModel(i),s=r.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e.getColorFromPalette(o,t)),a.setItemVisual(i,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var d=r.getShallow(l[u],!0);null!=d&&a.setItemVisual(i,l[u],d)}}),a.count()&&i.each(function(e){var t=i.getItemModel(e).getShallow("category");if(null!=t){$t(t)&&(t=n["ec-"+t]);var o=a.getItemVisual(t,"style"),r=i.ensureUniqueItemVisual(e,"style");wt(r,o);for(var s=["symbol","symbolSize","symbolKeepAspect"],l=0;l<s.length;l++)i.setItemVisual(e,s[l],a.getItemVisual(t,s[l]))}})})}function Ko(e){return e instanceof Array||(e=[e,e]),e}function Jo(e){e.eachSeriesByType("graph",function(e){var t=e.getGraph(),a=e.getEdgeData(),i=Ko(e.get("edgeSymbol")),n=Ko(e.get("edgeSymbolSize"));a.setVisual("fromSymbol",i&&i[0]),a.setVisual("toSymbol",i&&i[1]),a.setVisual("fromSymbolSize",n&&n[0]),a.setVisual("toSymbolSize",n&&n[1]),a.setVisual("style",e.getModel("lineStyle").getLineStyle()),a.each(function(e){var i=a.getItemModel(e),n=t.getEdgeByIndex(e),o=Ko(i.getShallow("symbol",!0)),r=Ko(i.getShallow("symbolSize",!0)),s=i.getModel("lineStyle").getLineStyle(),l=a.ensureUniqueItemVisual(e,"style");switch(wt(l,s),l.stroke){case"source":var u=n.node1.getVisual("style");l.stroke=u&&u.fill;break;case"target":u=n.node2.getVisual("style");l.stroke=u&&u.fill}o[0]&&n.setVisual("fromSymbol",o[0]),o[1]&&n.setVisual("toSymbol",o[1]),r[0]&&n.setVisual("fromSymbolSize",r[0]),r[1]&&n.setVisual("toSymbolSize",r[1])})})}var Qo="--\x3e",$o=function(e){return e.get("autoCurveness")||null},er=function(e,t){var a=$o(e),i=20,n=[];if(Mt(a))i=a;else if(bt(a))return void(e.__curvenessList=a);t>i&&(i=t);var o=i%2?i+2:i+3;n=[];for(var r=0;r<o;r++)n.push((r%2?r+1:r)/10*(r%2?-1:1));e.__curvenessList=n},tr=function(e,t,a){var i=[e.id,e.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[a.uid,i,n].join(Qo)},ar=function(e){var t=e.split(Qo);return[t[0],t[2],t[1]].join(Qo)},ir=function(e,t){var a=t.__edgeMap;return a[e]?a[e].length:0};function nr(e,t,a,i){var n=$o(t),o=bt(n);if(!n)return null;var r=function(e,t){var a=tr(e.node1,e.node2,t);return t.__edgeMap[a]}(e,t);if(!r)return null;for(var s=-1,l=0;l<r.length;l++)if(r[l]===a){s=l;break}var u=function(e,t){return ir(tr(e.node1,e.node2,t),t)+ir(tr(e.node2,e.node1,t),t)}(e,t);er(t,u),e.lineStyle=e.lineStyle||{};var d=tr(e.node1,e.node2,t),c=t.__curvenessList,h=o||u%2?0:1;if(r.isForward)return c[h+s];var p=ar(d),g=ir(p,t),f=c[s+g+h];return i?o?n&&0===n[0]?(g+h)%2?f:-f:((g%2?0:1)+h)%2?f:-f:(g+h)%2?f:-f:c[s+g+h]}function or(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var a=e.getGraph();a.eachNode(function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])}),rr(a,e)}}function rr(e,t){e.eachEdge(function(e,a){var i=Ft(e.getModel().get(["lineStyle","curveness"]),-nr(e,t,a,!0),0),n=da(e.node1.getLayout()),o=da(e.node2.getLayout()),r=[n,o];+i&&r.push([(n[0]+o[0])/2-(n[1]-o[1])*i,(n[1]+o[1])/2-(o[0]-n[0])*i]),e.setLayout(r)})}function sr(e,t){e.eachSeriesByType("graph",function(e){var t=e.get("layout"),a=e.coordinateSystem;if(a&&"view"!==a.type){var i=e.getData(),n=[];xt(a.dimensions,function(e){n=n.concat(i.mapDimensionsAll(e))});for(var o=0;o<i.count();o++){for(var r=[],s=!1,l=0;l<n.length;l++){var u=i.get(n[l],o);isNaN(u)||(s=!0),r.push(u)}s?i.setItemLayout(o,a.dataToPoint(r)):i.setItemLayout(o,[NaN,NaN])}rr(i.graph,e)}else t&&"none"!==t||or(e)})}function lr(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var a=e.option.nodeScaleRatio,i=t.scaleX;return((t.getZoom()-1)*a+1)/i}function ur(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var dr=Math.PI,cr=[];function hr(e,t,a,i){var n=e.coordinateSystem;if(!n||"view"===n.type){var o=n.getBoundingRect(),r=e.getData(),s=r.graph,l=o.width/2+o.x,u=o.height/2+o.y,d=Math.min(o.width,o.height)/2,c=r.count();if(r.setLayout({cx:l,cy:u}),c){if(a){var h=n.pointToData(i),p=h[0],g=h[1],f=[p-l,g-u];ca(f,f),ha(f,f,d),a.setLayout([l+f[0],u+f[1]],!0),gr(a,e.get(["circular","rotateLabel"]),l,u)}pr[t](e,s,r,d,l,u,c),s.eachEdge(function(t,a){var i,n=Ft(t.getModel().get(["lineStyle","curveness"]),nr(t,e,a),0),o=da(t.node1.getLayout()),r=da(t.node2.getLayout()),s=(o[0]+r[0])/2,d=(o[1]+r[1])/2;+n&&(i=[l*(n*=3)+s*(1-n),u*n+d*(1-n)]),t.setLayout([o,r,i])})}}}var pr={value:function(e,t,a,i,n,o,r){var s=0,l=a.getSum("value"),u=2*Math.PI/(l||r);t.eachNode(function(e){var t=e.getValue("value"),a=u*(l?t:1)/2;s+=a,e.setLayout([i*Math.cos(s)+n,i*Math.sin(s)+o]),s+=a})},symbolSize:function(e,t,a,i,n,o,r){var s=0;cr.length=r;var l=lr(e);t.eachNode(function(e){var t=ur(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=l;var a=Math.asin(t/2/i);isNaN(a)&&(a=dr/2),cr[e.dataIndex]=a,s+=2*a});var u=(2*dr-s)/r/2,d=0;t.eachNode(function(e){var t=u+cr[e.dataIndex];d+=t,(!e.getLayout()||!e.getLayout().fixed)&&e.setLayout([i*Math.cos(d)+n,i*Math.sin(d)+o]),d+=t})}};function gr(e,t,a,i){var n=e.getGraphicEl();if(n){var o=e.getModel().get(["label","rotate"])||0,r=n.getSymbolPath();if(t){var s=e.getLayout(),l=Math.atan2(s[1]-i,s[0]-a);l<0&&(l=2*Math.PI+l);var u=s[0]<a;u&&(l-=Math.PI);var d=u?"left":"right";r.setTextConfig({rotation:-l,position:d,origin:"center"});var c=r.ensureState("emphasis");wt(c.textConfig||(c.textConfig={}),{position:d})}else r.setTextConfig({rotation:o*=Math.PI/180})}}function fr(e){e.eachSeriesByType("graph",function(e){"circular"===e.get("layout")&&hr(e,"symbolSize")})}var yr=ya;function mr(e){e.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var a=e.preservedPoints||{},i=e.getGraph(),n=i.data,o=i.edgeData,r=e.getModel("force"),s=r.get("initLayout");e.preservedPoints?n.each(function(e){var t=n.getId(e);n.setItemLayout(e,a[t]||[NaN,NaN])}):s&&"none"!==s?"circular"===s&&hr(e,"value"):or(e);var l=n.getDataExtent("value"),u=o.getDataExtent("value"),d=r.get("repulsion"),c=r.get("edgeLength"),h=bt(d)?d:[d,d],p=bt(c)?c:[c,c];p=[p[1],p[0]];var g=n.mapArray("value",function(e,t){var a=n.getItemLayout(t),i=J(e,l,h);return isNaN(i)&&(i=(h[0]+h[1])/2),{w:i,rep:i,fixed:n.getItemModel(t).get("fixed"),p:!a||isNaN(a[0])||isNaN(a[1])?null:a}}),f=o.mapArray("value",function(t,a){var n=i.getEdgeByIndex(a),o=J(t,u,p);isNaN(o)&&(o=(p[0]+p[1])/2);var r=n.getModel(),s=Ft(n.getModel().get(["lineStyle","curveness"]),-nr(n,e,a,!0),0);return{n1:g[n.node1.dataIndex],n2:g[n.node2.dataIndex],d:o,curveness:s,ignoreForceLayout:r.get("ignoreForceLayout")}}),y=t.getBoundingRect(),m=function(e,t,a){for(var i=e,n=t,o=a.rect,r=o.width,s=o.height,l=[o.x+r/2,o.y+s/2],u=null==a.gravity?.1:a.gravity,d=0;d<i.length;d++){var c=i[d];c.p||(c.p=pa(r*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),c.pp=da(c.p),c.edges=null}var h,p,g=null==a.friction?.6:a.friction,f=g;return{warmUp:function(){f=.8*g},setFixed:function(e){i[e].fixed=!0},setUnfixed:function(e){i[e].fixed=!1},beforeStep:function(e){h=e},afterStep:function(e){p=e},step:function(e){h&&h(i,n);for(var t=[],a=i.length,o=0;o<n.length;o++){var r=n[o];if(!r.ignoreForceLayout){var s=r.n1,d=r.n2;ga(t,d.p,s.p);var c=fa(t)-r.d,g=d.w/(s.w+d.w);isNaN(g)&&(g=0),ca(t,t),!s.fixed&&yr(s.p,s.p,t,g*c*f),!d.fixed&&yr(d.p,d.p,t,-(1-g)*c*f)}}for(o=0;o<a;o++)(x=i[o]).fixed||(ga(t,l,x.p),yr(x.p,x.p,t,u*f));for(o=0;o<a;o++){s=i[o];for(var y=o+1;y<a;y++){d=i[y],ga(t,d.p,s.p),0===(c=fa(t))&&(ma(t,Math.random()-.5,Math.random()-.5),c=1);var m=(s.rep+d.rep)/c/c;!s.fixed&&yr(s.pp,s.pp,t,m),!d.fixed&&yr(d.pp,d.pp,t,-m)}}var v=[];for(o=0;o<a;o++){var x;(x=i[o]).fixed||(ga(v,x.p,x.pp),yr(x.p,x.p,v,f),va(x.pp,x.p))}var b=(f*=.992)<.01;p&&p(i,n,b),e&&e(b)}}}(g,f,{rect:y,gravity:r.get("gravity"),friction:r.get("friction")});m.beforeStep(function(e,t){for(var a=0,n=e.length;a<n;a++)e[a].fixed&&va(e[a].p,i.getNodeByIndex(a).getLayout())}),m.afterStep(function(e,t,o){for(var r=0,s=e.length;r<s;r++)e[r].fixed||i.getNodeByIndex(r).setLayout(e[r].p),a[n.getId(r)]=e[r].p;for(r=0,s=t.length;r<s;r++){var l=t[r],u=i.getEdgeByIndex(r),d=l.n1.p,c=l.n2.p,h=u.getLayout();(h=h?h.slice():[])[0]=h[0]||[],h[1]=h[1]||[],va(h[0],d),va(h[1],c),+l.curveness&&(h[2]=[(d[0]+c[0])/2-(d[1]-c[1])*l.curveness,(d[1]+c[1])/2-(c[0]-d[0])*l.curveness]),u.setLayout(h)}}),e.forceLayout=m,e.preservedPoints=a,m.step()}else e.forceLayout=null})}function vr(e,t){var a=[];return e.eachSeriesByType("graph",function(e){var i=e.get("coordinateSystem");if(!i||"view"===i){var n=e.getData(),o=n.mapArray(function(e){var t=n.getItemModel(e);return[+t.get("x"),+t.get("y")]}),r=[],s=[];qt(o,r,s),s[0]-r[0]===0&&(s[0]+=1,r[0]-=1),s[1]-r[1]===0&&(s[1]+=1,r[1]-=1);var l=(s[0]-r[0])/(s[1]-r[1]),u=function(e,t,a){var i=wt(e.getBoxLayoutParams(),{aspect:a});return Q(i,{width:t.getWidth(),height:t.getHeight()})}(e,t,l);isNaN(l)&&(r=[u.x,u.y],s=[u.x+u.width,u.y+u.height]);var d=s[0]-r[0],c=s[1]-r[1],h=u.width,p=u.height,g=e.coordinateSystem=new ye;g.zoomLimit=e.get("scaleLimit"),g.setBoundingRect(r[0],r[1],d,c),g.setViewRect(u.x,u.y,h,p),g.setCenter(e.get("center"),t),g.setZoom(e.get("zoom")),a.push(g)}}),a}var xr=xa.prototype,br=Jt.prototype,Sr=function(){return function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}}();function _r(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}!function(t){function a(){return null!==t&&t.apply(this,arguments)||this}e(a,t)}(Sr);var wr=function(t){function a(e){var a=t.call(this,e)||this;return a.type="ec-line",a}return e(a,t),a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new Sr},a.prototype.buildPath=function(e,t){_r(t)?xr.buildPath.call(this,e,t):br.buildPath.call(this,e,t)},a.prototype.pointAt=function(e){return _r(this.shape)?xr.pointAt.call(this,e):br.pointAt.call(this,e)},a.prototype.tangentAt=function(e){var t=this.shape,a=_r(t)?[t.x2-t.x1,t.y2-t.y1]:br.tangentAt.call(this,e);return ca(a,a)},a}(Ct),Ir=["fromSymbol","toSymbol"];function Mr(e){return"_"+e+"Type"}function Lr(e,t,a){var i=t.getItemVisual(a,e);if(!i||"none"===i)return i;var n=t.getItemVisual(a,e+"Size"),o=t.getItemVisual(a,e+"Rotate"),r=t.getItemVisual(a,e+"Offset"),s=t.getItemVisual(a,e+"KeepAspect"),l=L(n);return i+l+S(r||0,l)+(o||"")+(s||"")}function Dr(e,t,a){var i=t.getItemVisual(a,e);if(i&&"none"!==i){var n=t.getItemVisual(a,e+"Size"),o=t.getItemVisual(a,e+"Rotate"),r=t.getItemVisual(a,e+"Offset"),s=t.getItemVisual(a,e+"KeepAspect"),l=L(n),u=S(r||0,l),d=h(i,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return d.__specifiedRotation=null==o||isNaN(o)?void 0:+o*Math.PI/180||0,d.name=e,d}}function Ar(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var a=t[2];a?(e.cpx1=a[0],e.cpy1=a[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Cr=function(t){function a(e,a,i){var n=t.call(this)||this;return n._createLine(e,a,i),n}return e(a,t),a.prototype._createLine=function(e,t,a){var i=e.hostModel,n=function(e){var t=new wr({name:"line",subPixelOptimize:!0});return Ar(t.shape,e),t}(e.getItemLayout(t));n.shape.percent=0,x(n,{shape:{percent:1}},i,t),this.add(n),xt(Ir,function(a){var i=Dr(a,e,t);this.add(i),this[Mr(a)]=Lr(a,e,t)},this),this._updateCommonStl(e,t,a)},a.prototype.updateData=function(e,t,a){var i=e.hostModel,n=this.childOfName("line"),o=e.getItemLayout(t),r={shape:{}};Ar(r.shape,o),m(n,r,i,t),xt(Ir,function(a){var i=Lr(a,e,t),n=Mr(a);if(this[n]!==i){this.remove(this.childOfName(a));var o=Dr(a,e,t);this.add(o)}this[n]=i},this),this._updateCommonStl(e,t,a)},a.prototype.getLinePath=function(){return this.childAt(0)},a.prototype._updateCommonStl=function(e,t,a){var i=e.hostModel,n=this.childOfName("line"),o=a&&a.emphasisLineStyle,r=a&&a.blurLineStyle,s=a&&a.selectLineStyle,l=a&&a.labelStatesModels,u=a&&a.emphasisDisabled,d=a&&a.focus,c=a&&a.blurScope;if(!a||e.hasItemOption){var h=e.getItemModel(t),p=h.getModel("emphasis");o=p.getModel("lineStyle").getLineStyle(),r=h.getModel(["blur","lineStyle"]).getLineStyle(),s=h.getModel(["select","lineStyle"]).getLineStyle(),u=p.get("disabled"),d=p.get("focus"),c=p.get("blurScope"),l=b(h)}var g=e.getItemVisual(t,"style"),f=g.stroke;n.useStyle(g),n.style.fill=null,n.style.strokeNoScale=!0,n.ensureState("emphasis").style=o,n.ensureState("blur").style=r,n.ensureState("select").style=s,xt(Ir,function(e){var t=this.childOfName(e);if(t){t.setColor(f),t.style.opacity=g.opacity;for(var a=0;a<G.length;a++){var i=G[a],o=n.getState(i);if(o){var r=o.style||{},s=t.ensureState(i),l=s.style||(s.style={});null!=r.stroke&&(l[t.__isEmptyBrush?"stroke":"fill"]=r.stroke),null!=r.opacity&&(l.opacity=r.opacity)}}t.markRedraw()}},this);var y=i.getRawValue(t);_(this,l,{labelDataIndex:t,labelFetcher:{getFormattedLabel:function(t,a){return i.getFormattedLabel(t,a,e.dataType)}},inheritColor:f||"#000",defaultOpacity:g.opacity,defaultText:(null==y?e.getName(t):isFinite(y)?N(y):y)+""});var m=this.getTextContent();if(m){var v=l.normal;m.__align=m.style.align,m.__verticalAlign=m.style.verticalAlign,m.__position=v.get("position")||"middle";var x=v.get("distance");bt(x)||(x=[x,x]),m.__labelDistance=x}this.setTextConfig({position:null,local:!0,inside:!1}),w(this,d,c,u)},a.prototype.highlight=function(){f(this)},a.prototype.downplay=function(){y(this)},a.prototype.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},a.prototype.setLinePoints=function(e){var t=this.childOfName("line");Ar(t.shape,e),t.dirty()},a.prototype.beforeUpdate=function(){var e=this,t=e.childOfName("fromSymbol"),a=e.childOfName("toSymbol"),i=e.getTextContent();if(t||a||i&&!i.ignore){for(var n=1,o=this.parent;o;)o.scaleX&&(n/=o.scaleX),o=o.parent;var r=e.childOfName("line");if(this.__dirty||r.__dirty){var s=r.shape.percent,l=r.pointAt(0),u=r.pointAt(s),d=ga([],u,l);if(ca(d,d),t&&(t.setPosition(l),w(t,0),t.scaleX=t.scaleY=n*s,t.markRedraw()),a&&(a.setPosition(u),w(a,1),a.scaleX=a.scaleY=n*s,a.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var c=void 0,h=void 0,p=i.__labelDistance,g=p[0]*n,f=p[1]*n,y=s/2,m=r.tangentAt(y),v=[m[1],-m[0]],x=r.pointAt(y);v[1]>0&&(v[0]=-v[0],v[1]=-v[1]);var b=m[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var S=-Math.atan2(m[1],m[0]);u[0]<l[0]&&(S=Math.PI+S),i.rotation=S}var _=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":_=-f,h="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":_=f,h="top";break;default:_=0,h="middle"}switch(i.__position){case"end":i.x=d[0]*g+u[0],i.y=d[1]*f+u[1],c=d[0]>.8?"left":d[0]<-.8?"right":"center",h=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":i.x=-d[0]*g+l[0],i.y=-d[1]*f+l[1],c=d[0]>.8?"right":d[0]<-.8?"left":"center",h=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=g*b+l[0],i.y=l[1]+_,c=m[0]<0?"right":"left",i.originX=-g*b,i.originY=-_;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=x[0],i.y=x[1]+_,c="center",i.originY=-_;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-g*b+u[0],i.y=u[1]+_,c=m[0]>=0?"right":"left",i.originX=g*b,i.originY=-_}i.scaleX=i.scaleY=n,i.setStyle({verticalAlign:i.__verticalAlign||h,align:i.__align||c})}}}function w(e,t){var a=e.__specifiedRotation;if(null==a){var i=r.tangentAt(t);e.attr("rotation",(1===t?-1:1)*Math.PI/2-Math.atan2(i[1],i[0]))}else e.attr("rotation",a)}},a}(St),Nr=function(){function e(e){this.group=new St,this._LineCtor=e||Cr}return e.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var a=this,i=a.group,n=a._lineData;a._lineData=e,n||i.removeAll();var o=Tr(e);e.diff(n).add(function(a){t._doAdd(e,a,o)}).update(function(a,i){t._doUpdate(n,e,i,a,o)}).remove(function(e){i.remove(n.getItemGraphicEl(e))}).execute()},e.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,a){t.updateLayout(e,a)},this)},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Tr(e),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t){function a(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var i=e.start;i<e.end;i++){if(Er(t.getItemLayout(i))){var n=new this._LineCtor(t,i,this._seriesScope);n.traverse(a),this.group.add(n),t.setItemGraphicEl(i,n),this._progressiveEls.push(n)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(e){D(this._progressiveEls||this.group,e)},e.prototype._doAdd=function(e,t,a){if(Er(e.getItemLayout(t))){var i=new this._LineCtor(e,t,a);e.setItemGraphicEl(t,i),this.group.add(i)}},e.prototype._doUpdate=function(e,t,a,i,n){var o=e.getItemGraphicEl(a);Er(t.getItemLayout(i))?(o?o.updateData(t,i,n):o=new this._LineCtor(t,i,n),t.setItemGraphicEl(i,o),this.group.add(o)):this.group.remove(o)},e}();function Tr(e){var t=e.hostModel,a=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:b(t)}}function Pr(e){return isNaN(e[0])||isNaN(e[1])}function Er(e){return e&&!Pr(e[0])&&!Pr(e[1])}var Rr=[],Vr=[],zr=[],kr=Sa,Or=_a,Gr=Math.abs;function Br(e,t,a){for(var i,n=e[0],o=e[1],r=e[2],s=1/0,l=a*a,u=.1,d=.1;d<=.9;d+=.1){Rr[0]=kr(n[0],o[0],r[0],d),Rr[1]=kr(n[1],o[1],r[1],d),(p=Gr(Or(Rr,t)-l))<s&&(s=p,i=d)}for(var c=0;c<32;c++){var h=i+u;Vr[0]=kr(n[0],o[0],r[0],i),Vr[1]=kr(n[1],o[1],r[1],i),zr[0]=kr(n[0],o[0],r[0],h),zr[1]=kr(n[1],o[1],r[1],h);var p=Or(Vr,t)-l;if(Gr(p)<.01)break;var g=Or(zr,t)-l;u/=2,p<0?g>=0?i+=u:i-=u:g>=0?i-=u:i+=u}return i}function Fr(e,t){var a=[],i=ba,n=[[],[],[]],o=[[],[]],r=[];t/=2,e.eachEdge(function(e,s){var l=e.getLayout(),u=e.getVisual("fromSymbol"),d=e.getVisual("toSymbol");l.__original||(l.__original=[da(l[0]),da(l[1])],l[2]&&l.__original.push(da(l[2])));var c=l.__original;if(null!=l[2]){if(va(n[0],c[0]),va(n[1],c[2]),va(n[2],c[1]),u&&"none"!==u){var h=ur(e.node1),p=Br(n,c[0],h*t);i(n[0][0],n[1][0],n[2][0],p,a),n[0][0]=a[3],n[1][0]=a[4],i(n[0][1],n[1][1],n[2][1],p,a),n[0][1]=a[3],n[1][1]=a[4]}if(d&&"none"!==d){h=ur(e.node2),p=Br(n,c[1],h*t);i(n[0][0],n[1][0],n[2][0],p,a),n[1][0]=a[1],n[2][0]=a[2],i(n[0][1],n[1][1],n[2][1],p,a),n[1][1]=a[1],n[2][1]=a[2]}va(l[0],n[0]),va(l[1],n[2]),va(l[2],n[1])}else{if(va(o[0],c[0]),va(o[1],c[1]),ga(r,o[1],o[0]),ca(r,r),u&&"none"!==u){h=ur(e.node1);ya(o[0],o[0],r,h*t)}if(d&&"none"!==d){h=ur(e.node2);ya(o[1],o[1],r,-h*t)}va(l[0],o[0]),va(l[1],o[1])}})}function Wr(e){return"view"===e.type}var Yr=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.init=function(e,t){var a=new ni,i=new Nr,n=this.group;this._controller=new Wa(t.getZr()),this._controllerHost={target:n},n.add(a.group),n.add(i.group),this._symbolDraw=a,this._lineDraw=i,this._firstRender=!0},a.prototype.render=function(e,t,a){var i=this,n=e.coordinateSystem;this._model=e;var o=this._symbolDraw,r=this._lineDraw,s=this.group;if(Wr(n)){var l={x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY};this._firstRender?s.attr(l):m(s,l,e)}Fr(e.getGraph(),lr(e));var u=e.getData();o.updateData(u);var d=e.getEdgeData();r.updateData(d),this._updateNodeAndLinkScale(),this._updateController(e,t,a),clearTimeout(this._layoutTimeout);var c=e.forceLayout,h=e.get(["force","layoutAnimation"]);c&&this._startForceLayoutIteration(c,h);var p=e.get("layout");u.graph.eachNode(function(t){var a=t.dataIndex,n=t.getGraphicEl(),o=t.getModel();if(n){n.off("drag").off("dragend");var r=o.get("draggable");r&&n.on("drag",function(o){switch(p){case"force":c.warmUp(),!i._layouting&&i._startForceLayoutIteration(c,h),c.setFixed(a),u.setItemLayout(a,[n.x,n.y]);break;case"circular":u.setItemLayout(a,[n.x,n.y]),t.setLayout({fixed:!0},!0),hr(e,"symbolSize",t,[o.offsetX,o.offsetY]),i.updateLayout(e);break;default:u.setItemLayout(a,[n.x,n.y]),rr(e.getGraph(),e),i.updateLayout(e)}}).on("dragend",function(){c&&c.setUnfixed(a)}),n.setDraggable(r,!!o.get("cursor")),"adjacency"===o.get(["emphasis","focus"])&&(I(n).focus=t.getAdjacentDataIndices())}}),u.graph.eachEdge(function(e){var t=e.getGraphicEl(),a=e.getModel().get(["emphasis","focus"]);t&&"adjacency"===a&&(I(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})});var g="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),f=u.getLayout("cx"),y=u.getLayout("cy");u.graph.eachNode(function(e){gr(e,g,f,y)}),this._firstRender=!1},a.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},a.prototype._startForceLayoutIteration=function(e,t){var a=this;!function i(){e.step(function(e){a.updateLayout(a._model),(a._layouting=!e)&&(t?a._layoutTimeout=setTimeout(i,16):i())})}()},a.prototype._updateController=function(e,t,a){var i=this,n=this._controller,o=this._controllerHost,r=this.group;n.setPointerChecker(function(t,i,n){var o=r.getBoundingRect();return o.applyTransform(r.transform),o.contain(i,n)&&!Ya(t,a,e)}),Wr(e.coordinateSystem)?(n.enable(e.get("roam")),o.zoomLimit=e.get("scaleLimit"),o.zoom=e.coordinateSystem.getZoom(),n.off("pan").off("zoom").on("pan",function(t){Ha(o,t.dx,t.dy),a.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){Xa(o,t.scale,t.originX,t.originY),a.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),i._updateNodeAndLinkScale(),Fr(e.getGraph(),lr(e)),i._lineDraw.updateLayout(),a.updateLabelLayout()})):n.disable()},a.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),a=lr(e);t.eachItemGraphicEl(function(e,t){e&&e.setSymbolScale(a)})},a.prototype.updateLayout=function(e){Fr(e.getGraph(),lr(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},a.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},a.type="graph",a}(R);function Hr(e,t,a,i,n){for(var o=new ke(i),s=0;s<e.length;s++)o.addNode(la(e[s].id,e[s].name,s),s);var d=[],c=[],h=0;for(s=0;s<t.length;s++){var p=t[s],g=p.source,f=p.target;o.addEdge(g,f,h)&&(c.push(p),d.push(la(Me(p.id,null),g+" > "+f)),h++)}var y,m=a.get("coordinateSystem");if("cartesian2d"===m||"polar"===m)y=qa(e,a);else{var v=u.get(m),x=v&&v.dimensions||[];Qt(x,"value")<0&&x.concat(["value"]);var b=r(e,{coordDimensions:x,encodeDefine:a.getEncode()}).dimensions;(y=new l(b,a)).initData(e)}var S=new l(["value"],a);return S.initData(c,d),n&&n(y,S),Oe({mainData:y,struct:o,structAttr:"graph",datas:{node:y,edge:S},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var Xr=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.hasSymbolVisual=!0,e}return e(a,t),a.prototype.init=function(e){t.prototype.init.apply(this,arguments);var a=this;function i(){return a._categoriesData}this.legendVisualProvider=new oe(i,i),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},a.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},a.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),le(e,"edgeLabel",["show"])},a.prototype.getInitialData=function(e,t){var a,i=e.edges||e.links||[],n=e.data||e.nodes||[],o=this;if(n&&i){$o(a=this)&&(a.__curvenessList=[],a.__edgeMap={},er(a));var r=Hr(n,i,this,!0,function(e,t){e.wrapMethod("getItemModel",function(e){var t=o._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e});var a=xe.prototype.getModel;function i(e,t){var i=a.call(this,e,t);return i.resolveParentPath=n,i}function n(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",function(e){return e.resolveParentPath=n,e.getModel=i,e})});return xt(r.edges,function(e){!function(e,t,a,i){if($o(a)){var n=tr(e,t,a),o=a.__edgeMap,r=o[ar(n)];o[n]&&!r?o[n].isForward=!0:r&&o[n]&&(r.isForward=!0,o[n].isForward=!1),o[n]=o[n]||[],o[n].push(i)}}(e.node1,e.node2,this,e.dataIndex)},this),r.data}},a.prototype.getGraph=function(){return this.getData().graph},a.prototype.getEdgeData=function(){return this.getGraph().edgeData},a.prototype.getCategoriesData=function(){return this._categoriesData},a.prototype.formatTooltip=function(e,t,a){if("edge"===a){var i=this.getData(),n=this.getDataParams(e,a),o=i.graph.getEdgeByIndex(e),r=i.getName(o.node1.dataIndex),s=i.getName(o.node2.dataIndex),l=[];return null!=r&&l.push(r),null!=s&&l.push(s),Oa("nameValue",{name:l.join(" > "),value:n.value,noValue:null==n.value})}return Ua({series:this,dataIndex:e,multipleSeries:t})},a.prototype._updateCategoriesData=function(){var e=vt(this.option.categories||[],function(e){return null!=e.value?e:wt({value:0},e)}),t=new l(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(e){return t.getItemModel(e)})},a.prototype.setZoom=function(e){this.option.zoom=e},a.prototype.setCenter=function(e){this.option.center=e},a.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},a.type="series.graph",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},a}(p),Ur={type:"graphRoam",event:"graphRoam",update:"none"};function Zr(e){e.registerChartView(Yr),e.registerSeriesModel(Xr),e.registerProcessor(jo),e.registerVisual(qo),e.registerVisual(Jo),e.registerLayout(sr),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,fr),e.registerLayout(mr),e.registerCoordinateSystem("graphView",{dimensions:ye.dimensions,create:vr}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},ea),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},ea),e.registerAction(Ur,function(e,t,a){t.eachComponent({mainType:"series",query:e},function(t){var i=t.coordinateSystem,n=Se(i,e,void 0,a);t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom)})})}var jr=function(){return function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}}(),qr=function(t){function a(e){var a=t.call(this,e)||this;return a.type="pointer",a}return e(a,t),a.prototype.getDefaultShape=function(){return new jr},a.prototype.buildPath=function(e,t){var a=Math.cos,i=Math.sin,n=t.r,o=t.width,r=t.angle,s=t.x-a(r)*o*(o>=n/3?1:2),l=t.y-i(r)*o*(o>=n/3?1:2);r=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+a(r)*o,t.y+i(r)*o),e.lineTo(t.x+a(t.angle)*n,t.y+i(t.angle)*n),e.lineTo(t.x-a(r)*o,t.y-i(r)*o),e.lineTo(s,l)},a}(Ct);function Kr(e,t){var a=null==e?"":e+"";return t&&($t(t)?a=t.replace("{value}",a):yt(t)&&(a=t(e))),a}var Jr=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a){this.group.removeAll();var i=e.get(["axisLine","lineStyle","color"]),n=function(e,t){var a=e.get("center"),i=t.getWidth(),n=t.getHeight(),o=Math.min(i,n);return{cx:$(a[0],t.getWidth()),cy:$(a[1],t.getHeight()),r:$(e.get("radius"),o/2)}}(e,a);this._renderMain(e,t,a,i,n),this._data=e.getData()},a.prototype.dispose=function(){},a.prototype._renderMain=function(e,t,a,i,n){var o=this.group,r=e.get("clockwise"),s=-e.get("startAngle")/180*Math.PI,l=-e.get("endAngle")/180*Math.PI,u=e.getModel("axisLine"),d=u.get("roundCap")?H:Tt,c=u.get("show"),h=u.getModel("lineStyle"),p=h.get("width"),g=[s,l];Ot(g,!r);for(var f=(l=g[1])-(s=g[0]),y=s,m=[],v=0;c&&v<i.length;v++){var x=new d({shape:{startAngle:y,endAngle:l=s+f*Math.min(Math.max(i[v][0],0),1),cx:n.cx,cy:n.cy,clockwise:r,r0:n.r-p,r:n.r},silent:!0});x.setStyle({fill:i[v][1]}),x.setStyle(h.getLineStyle(["color","width"])),m.push(x),y=l}m.reverse(),xt(m,function(e){return o.add(e)});var b=function(e){if(e<=0)return i[0][1];var t;for(t=0;t<i.length;t++)if(i[t][0]>=e&&(0===t?0:i[t-1][0])<e)return i[t][1];return i[t-1][1]};this._renderTicks(e,t,a,b,n,s,l,r,p),this._renderTitleAndDetail(e,t,a,b,n),this._renderAnchor(e,n),this._renderPointer(e,t,a,b,n,s,l,r,p)},a.prototype._renderTicks=function(e,t,a,i,n,o,r,s,l){for(var u,d,c=this.group,h=n.cx,p=n.cy,g=n.r,f=+e.get("min"),y=+e.get("max"),m=e.getModel("splitLine"),v=e.getModel("axisTick"),x=e.getModel("axisLabel"),b=e.get("splitNumber"),S=v.get("splitNumber"),_=$(m.get("length"),g),w=$(v.get("length"),g),I=o,M=(r-o)/b,L=M/S,D=m.getModel("lineStyle").getLineStyle(),A=v.getModel("lineStyle").getLineStyle(),C=m.get("distance"),T=0;T<=b;T++){if(u=Math.cos(I),d=Math.sin(I),m.get("show")){var P=new xa({shape:{x1:u*(g-(E=C?C+l:l))+h,y1:d*(g-E)+p,x2:u*(g-_-E)+h,y2:d*(g-_-E)+p},style:D,silent:!0});"auto"===D.stroke&&P.setStyle({stroke:i(T/b)}),c.add(P)}if(x.get("show")){var E=x.get("distance")+C,R=Kr(N(T/b*(y-f)+f),x.get("formatter")),V=i(T/b),z=u*(g-_-E)+h,k=d*(g-_-E)+p,O=x.get("rotate"),G=0;"radial"===O?(G=-I+2*Math.PI)>Math.PI/2&&(G+=Math.PI):"tangential"===O?G=-I-Math.PI/2:Mt(O)&&(G=O*Math.PI/180),0===G?c.add(new Rt({style:De(x,{text:R,x:z,y:k,verticalAlign:d<-.8?"top":d>.8?"bottom":"middle",align:u<-.4?"left":u>.4?"right":"center"},{inheritColor:V}),silent:!0})):c.add(new Rt({style:De(x,{text:R,x:z,y:k,verticalAlign:"middle",align:"center"},{inheritColor:V}),silent:!0,originX:z,originY:k,rotation:G}))}if(v.get("show")&&T!==b){E=(E=v.get("distance"))?E+l:l;for(var B=0;B<=S;B++){u=Math.cos(I),d=Math.sin(I);var F=new xa({shape:{x1:u*(g-E)+h,y1:d*(g-E)+p,x2:u*(g-w-E)+h,y2:d*(g-w-E)+p},silent:!0,style:A});"auto"===A.stroke&&F.setStyle({stroke:i((T+B/S)/b)}),c.add(F),I+=L}I-=L}else I+=M}},a.prototype._renderPointer=function(e,t,a,i,n,o,r,s,l){var u=this.group,d=this._data,c=this._progressEls,p=[],g=e.get(["pointer","show"]),f=e.getModel("progress"),y=f.get("show"),v=e.getData(),b=v.mapDimension("value"),S=+e.get("min"),_=+e.get("max"),I=[S,_],M=[o,r];function L(t,a){var i,o=v.getItemModel(t).getModel("pointer"),r=$(o.get("width"),n.r),s=$(o.get("length"),n.r),l=e.get(["pointer","icon"]),u=o.get("offsetCenter"),d=$(u[0],n.r),c=$(u[1],n.r),p=o.get("keepAspect");return(i=l?h(l,d-r/2,c-s,r,s,null,p):new qr({shape:{angle:-Math.PI/2,width:r,r:s,x:d,y:c}})).rotation=-(a+Math.PI/2),i.x=n.cx,i.y=n.cy,i}function D(e,t){var a=f.get("roundCap")?H:Tt,i=f.get("overlap"),r=i?f.get("width"):l/v.count(),u=i?n.r-r:n.r-(e+1)*r,d=i?n.r:n.r-e*r,c=new a({shape:{startAngle:o,endAngle:t,cx:n.cx,cy:n.cy,clockwise:s,r0:u,r:d}});return i&&(c.z2=J(v.get(b,e),[S,_],[100,0],!0)),c}(y||g)&&(v.diff(d).add(function(t){var a=v.get(b,t);if(g){var i=L(t,o);x(i,{rotation:-((isNaN(+a)?M[0]:J(a,I,M,!0))+Math.PI/2)},e),u.add(i),v.setItemGraphicEl(t,i)}if(y){var n=D(t,o),r=f.get("clip");x(n,{shape:{endAngle:J(a,I,M,r)}},e),u.add(n),Ge(e.seriesIndex,v.dataType,t,n),p[t]=n}}).update(function(t,a){var i=v.get(b,t);if(g){var n=d.getItemGraphicEl(a),r=n?n.rotation:o,s=L(t,r);s.rotation=r,m(s,{rotation:-((isNaN(+i)?M[0]:J(i,I,M,!0))+Math.PI/2)},e),u.add(s),v.setItemGraphicEl(t,s)}if(y){var l=c[a],h=D(t,l?l.shape.endAngle:o),x=f.get("clip");m(h,{shape:{endAngle:J(i,I,M,x)}},e),u.add(h),Ge(e.seriesIndex,v.dataType,t,h),p[t]=h}}).execute(),v.each(function(e){var t=v.getItemModel(e),a=t.getModel("emphasis"),n=a.get("focus"),o=a.get("blurScope"),r=a.get("disabled");if(g){var s=v.getItemGraphicEl(e),l=v.getItemVisual(e,"style"),u=l.fill;if(s instanceof _t){var d=s.style;s.useStyle(wt({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},l))}else s.useStyle(l),"pointer"!==s.type&&s.setColor(u);s.setStyle(t.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===s.style.fill&&s.setStyle("fill",i(J(v.get(b,e),I,[0,1],!0))),s.z2EmphasisLift=0,P(s,t),w(s,n,o,r)}if(y){var c=p[e];c.useStyle(v.getItemVisual(e,"style")),c.setStyle(t.getModel(["progress","itemStyle"]).getItemStyle()),c.z2EmphasisLift=0,P(c,t),w(c,n,o,r)}}),this._progressEls=p)},a.prototype._renderAnchor=function(e,t){var a=e.getModel("anchor");if(a.get("show")){var i=a.get("size"),n=a.get("icon"),o=a.get("offsetCenter"),r=a.get("keepAspect"),s=h(n,t.cx-i/2+$(o[0],t.r),t.cy-i/2+$(o[1],t.r),i,i,null,r);s.z2=a.get("showAbove")?1:0,s.setStyle(a.getModel("itemStyle").getItemStyle()),this.group.add(s)}},a.prototype._renderTitleAndDetail=function(e,t,a,i,n){var o=this,r=e.getData(),s=r.mapDimension("value"),l=+e.get("min"),u=+e.get("max"),d=new St,c=[],h=[],p=e.isAnimationEnabled(),g=e.get(["pointer","showAbove"]);r.diff(this._data).add(function(e){c[e]=new Rt({silent:!0}),h[e]=new Rt({silent:!0})}).update(function(e,t){c[e]=o._titleEls[t],h[e]=o._detailEls[t]}).execute(),r.each(function(t){var a=r.getItemModel(t),o=r.get(s,t),f=new St,y=i(J(o,[l,u],[0,1],!0)),m=a.getModel("title");if(m.get("show")){var v=m.get("offsetCenter"),x=n.cx+$(v[0],n.r),b=n.cy+$(v[1],n.r);(A=c[t]).attr({z2:g?0:2,style:De(m,{x:x,y:b,text:r.getName(t),align:"center",verticalAlign:"middle"},{inheritColor:y})}),f.add(A)}var S=a.getModel("detail");if(S.get("show")){var _=S.get("offsetCenter"),w=n.cx+$(_[0],n.r),I=n.cy+$(_[1],n.r),M=$(S.get("width"),n.r),L=$(S.get("height"),n.r),D=e.get(["progress","show"])?r.getItemVisual(t,"style").fill:y,A=h[t],C=S.get("formatter");A.attr({z2:g?0:2,style:De(S,{x:w,y:I,text:Kr(o,C),width:isNaN(M)?null:M,height:isNaN(L)?null:L,align:"center",verticalAlign:"middle"},{inheritColor:D})}),Z(A,{normal:S},o,function(e){return Kr(e,C)}),p&&Be(A,t,r,e,{getFormattedLabel:function(e,t,a,i,n,r){return Kr(r?r.interpolatedValue:o,C)}}),f.add(A)}d.add(f)}),this.group.add(d),this._titleEls=c,this._detailEls=h},a.type="gauge",a}(R),Qr=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.visualStyleAccessPath="itemStyle",e}return e(a,t),a.prototype.getInitialData=function(e,t){return pn(this,["value"])},a.type="series.gauge",a.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},a}(p);function $r(e){e.registerChartView(Jr),e.registerSeriesModel(Qr)}var es=["itemStyle","opacity"],ts=function(t){function a(e,a){var i=t.call(this)||this,n=i,o=new Bt,r=new Rt;return n.setTextContent(r),i.setTextGuideLine(o),i.updateData(e,a,!0),i}return e(a,t),a.prototype.updateData=function(e,t,a){var i=this,n=e.hostModel,o=e.getItemModel(t),r=e.getItemLayout(t),s=o.getModel("emphasis"),l=o.get(es);l=null==l?1:l,a||v(i),i.useStyle(e.getItemVisual(t,"style")),i.style.lineJoin="round",a?(i.setShape({points:r.points}),i.style.opacity=0,x(i,{style:{opacity:l}},n,t)):m(i,{style:{opacity:l},shape:{points:r.points}},n,t),P(i,o),this._updateLabel(e,t),w(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))},a.prototype._updateLabel=function(e,t){var a=this,i=this.getTextGuideLine(),n=a.getTextContent(),o=e.hostModel,r=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"style"),u=l.fill;_(n,b(r),{labelFetcher:e.hostModel,labelDataIndex:t,defaultOpacity:l.opacity,defaultText:e.getName(t)},{normal:{align:s.textAlign,verticalAlign:s.verticalAlign}}),a.setTextConfig({local:!0,inside:!!s.inside,insideStroke:u,outsideFill:u});var d=s.linePoints;i.setShape({points:d}),a.textGuideLineConfig={anchor:d?new Gt(d[0][0],d[0][1]):null},m(n,{style:{x:s.x,y:s.y}},o,t),n.attr({rotation:s.rotation,originX:s.x,originY:s.y,z2:10}),ie(a,ne(r),{stroke:u})},a}(Ht),as=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.ignoreLabelLineUpdate=!0,e}return e(a,t),a.prototype.render=function(e,t,a){var i=e.getData(),n=this._data,o=this.group;i.diff(n).add(function(e){var t=new ts(i,e);i.setItemGraphicEl(e,t),o.add(t)}).update(function(e,t){var a=n.getItemGraphicEl(t);a.updateData(i,e),o.add(a),i.setItemGraphicEl(e,a)}).remove(function(t){var a=n.getItemGraphicEl(t);Y(a,e,t)}).execute(),this._data=i},a.prototype.remove=function(){this.group.removeAll(),this._data=null},a.prototype.dispose=function(){},a.type="funnel",a}(R),is=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new oe(Pt(this.getData,this),Pt(this.getRawData,this)),this._defaultLabelLine(e)},a.prototype.getInitialData=function(e,t){return pn(this,{coordDimensions:["value"],encodeDefaulter:mt(re,this)})},a.prototype._defaultLabelLine=function(e){le(e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},a.prototype.getDataParams=function(e){var a=this.getData(),i=t.prototype.getDataParams.call(this,e),n=a.mapDimension("value"),o=a.getSum(n);return i.percent=o?+(a.get(n,e)/o*100).toFixed(2):0,i.$vars.push("percent"),i},a.type="series.funnel",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},a}(p);function ns(e,t){e.eachSeriesByType("funnel",function(e){var a=e.getData(),i=a.mapDimension("value"),n=e.get("sort"),o=function(e,t){return Q(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t),r=e.get("orient"),s=o.width,l=o.height,u=function(e,t){for(var a=e.mapDimension("value"),i=e.mapArray(a,function(e){return e}),n=[],o="ascending"===t,r=0,s=e.count();r<s;r++)n[r]=r;return yt(t)?n.sort(t):"none"!==t&&n.sort(function(e,t){return o?i[e]-i[t]:i[t]-i[e]}),n}(a,n),d=o.x,c=o.y,h="horizontal"===r?[$(e.get("minSize"),l),$(e.get("maxSize"),l)]:[$(e.get("minSize"),s),$(e.get("maxSize"),s)],p=a.getDataExtent(i),g=e.get("min"),f=e.get("max");null==g&&(g=Math.min(p[0],0)),null==f&&(f=p[1]);var y=e.get("funnelAlign"),m=e.get("gap"),v=(("horizontal"===r?s:l)-m*(a.count()-1))/a.count(),x=function(e,t){if("horizontal"===r){var n=a.get(i,e)||0,o=J(n,[g,f],h,!0),u=void 0;switch(y){case"top":u=c;break;case"center":u=c+(l-o)/2;break;case"bottom":u=c+(l-o)}return[[t,u],[t,u+o]]}var p,m=a.get(i,e)||0,v=J(m,[g,f],h,!0);switch(y){case"left":p=d;break;case"center":p=d+(s-v)/2;break;case"right":p=d+s-v}return[[p,t],[p+v,t]]};"ascending"===n&&(v=-v,m=-m,"horizontal"===r?d+=s:c+=l,u=u.reverse());for(var b=0;b<u.length;b++){var S=u[b],_=u[b+1],w=a.getItemModel(S);if("horizontal"===r){var I=w.get(["itemStyle","width"]);null==I?I=v:(I=$(I,s),"ascending"===n&&(I=-I));var M=x(S,d),L=x(_,d+I);d+=I+m,a.setItemLayout(S,{points:M.concat(L.slice().reverse())})}else{var D=w.get(["itemStyle","height"]);null==D?D=v:(D=$(D,l),"ascending"===n&&(D=-D));M=x(S,c),L=x(_,c+D);c+=D+m,a.setItemLayout(S,{points:M.concat(L.slice().reverse())})}}!function(e){var t=e.hostModel.get("orient");e.each(function(a){var i,n,o,r,s=e.getItemModel(a),l=s.getModel("label").get("position"),u=s.getModel("labelLine"),d=e.getItemLayout(a),c=d.points,h="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(h)"insideLeft"===l?(n=(c[0][0]+c[3][0])/2+5,o=(c[0][1]+c[3][1])/2,i="left"):"insideRight"===l?(n=(c[1][0]+c[2][0])/2-5,o=(c[1][1]+c[2][1])/2,i="right"):(n=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,o=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,i="center"),r=[[n,o],[n,o]];else{var p=void 0,g=void 0,f=void 0,y=void 0,m=u.get("length");"left"===l?(p=(c[3][0]+c[0][0])/2,g=(c[3][1]+c[0][1])/2,n=(f=p-m)-5,i="right"):"right"===l?(p=(c[1][0]+c[2][0])/2,g=(c[1][1]+c[2][1])/2,n=(f=p+m)+5,i="left"):"top"===l?(p=(c[3][0]+c[0][0])/2,o=(y=(g=(c[3][1]+c[0][1])/2)-m)-5,i="center"):"bottom"===l?(p=(c[1][0]+c[2][0])/2,o=(y=(g=(c[1][1]+c[2][1])/2)+m)+5,i="center"):"rightTop"===l?(p="horizontal"===t?c[3][0]:c[1][0],g="horizontal"===t?c[3][1]:c[1][1],"horizontal"===t?(o=(y=g-m)-5,i="center"):(n=(f=p+m)+5,i="top")):"rightBottom"===l?(p=c[2][0],g=c[2][1],"horizontal"===t?(o=(y=g+m)+5,i="center"):(n=(f=p+m)+5,i="bottom")):"leftTop"===l?(p=c[0][0],g="horizontal"===t?c[0][1]:c[1][1],"horizontal"===t?(o=(y=g-m)-5,i="center"):(n=(f=p-m)-5,i="right")):"leftBottom"===l?(p="horizontal"===t?c[1][0]:c[3][0],g="horizontal"===t?c[1][1]:c[2][1],"horizontal"===t?(o=(y=g+m)+5,i="center"):(n=(f=p-m)-5,i="right")):(p=(c[1][0]+c[2][0])/2,g=(c[1][1]+c[2][1])/2,"horizontal"===t?(o=(y=g+m)+5,i="center"):(n=(f=p+m)+5,i="left")),"horizontal"===t?n=f=p:o=y=g,r=[[p,g],[f,y]]}d.label={linePoints:r,x:n,y:o,verticalAlign:"middle",textAlign:i,inside:h}})}(a)})}function os(e){e.registerChartView(as),e.registerSeriesModel(is),e.registerLayout(ns),e.registerProcessor(de("funnel"))}var rs=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e._dataGroup=new St,e._initialized=!1,e}return e(a,t),a.prototype.init=function(){this.group.add(this._dataGroup)},a.prototype.render=function(e,t,a,i){this._progressiveEls=null;var n=this._dataGroup,o=e.getData(),r=this._data,s=e.coordinateSystem,l=s.dimensions,u=us(e);if(o.diff(r).add(function(e){ds(ls(o,n,e,l,s),o,e,u)}).update(function(t,a){var i=r.getItemGraphicEl(a),n=ss(o,t,l,s);o.setItemGraphicEl(t,i),m(i,{shape:{points:n}},e,t),v(i),ds(i,o,t,u)}).remove(function(e){var t=r.getItemGraphicEl(e);n.remove(t)}).execute(),!this._initialized){this._initialized=!0;var d=function(e,t,a){var i=e.model,n=e.getRect(),o=new Nt({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),r="horizontal"===i.get("layout")?"width":"height";return o.setShape(r,0),x(o,{shape:{width:n.width,height:n.height}},t,a),o}(s,e,function(){setTimeout(function(){n.removeClipPath()})});n.setClipPath(d)}this._data=o},a.prototype.incrementalPrepareRender=function(e,t,a){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},a.prototype.incrementalRender=function(e,t,a){for(var i=t.getData(),n=t.coordinateSystem,o=n.dimensions,r=us(t),s=this._progressiveEls=[],l=e.start;l<e.end;l++){var u=ls(i,this._dataGroup,l,o,n);u.incremental=!0,ds(u,i,l,r),s.push(u)}},a.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},a.type="parallel",a}(R);function ss(e,t,a,i){for(var n=[],o=0;o<a.length;o++){var r=a[o],s=e.get(e.mapDimension(r),t);cs(s,i.getAxis(r).type)||n.push(i.dataToPoint(s,r))}return n}function ls(e,t,a,i,n){var o=ss(e,a,i,n),r=new Bt({shape:{points:o},z2:10});return t.add(r),e.setItemGraphicEl(a,r),r}function us(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),t=Fe(t),wa(t)&&(t=0),{smooth:t}}function ds(e,t,a,i){e.useStyle(t.getItemVisual(a,"style")),e.style.fill=null,e.setShape("smooth",i.smooth);var n=t.getItemModel(a),o=n.getModel("emphasis");P(e,n,"lineStyle"),w(e,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function cs(e,t){return"category"===t?null==e:null==e||isNaN(e)}var hs=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return e(a,t),a.prototype.getInitialData=function(e,t){return qa(null,this,{useEncodeDefaulter:Pt(ps,null,this)})},a.prototype.getRawIndicesByActiveState=function(e){var t=this.coordinateSystem,a=this.getData(),i=[];return t.eachActiveState(a,function(t,n){e===t&&i.push(a.getRawIndex(n))}),i},a.type="series.parallel",a.dependencies=["parallel"],a.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},a}(p);function ps(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var a={};return xt(t.dimensions,function(e){var t=+e.replace("dim","");a[e]=t}),a}}var gs=["lineStyle","opacity"],fs={seriesType:"parallel",reset:function(e,t){var a=e.coordinateSystem,i={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(e,t){a.eachActiveState(t,function(e,a){var n=i[e];if("normal"===e&&t.hasItemOption){var o=t.getItemModel(a).get(gs,!0);null!=o&&(n=o)}t.ensureUniqueItemVisual(a,"style").opacity=n},e.start,e.end)}}}};function ys(e){he(Za),e.registerChartView(rs),e.registerSeriesModel(hs),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,fs)}var ms=function(){return function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}}(),vs=function(t){function a(e){return t.call(this,e)||this}return e(a,t),a.prototype.getDefaultShape=function(){return new ms},a.prototype.buildPath=function(e,t){var a=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+a,t.y2),e.bezierCurveTo(t.cpx2+a,t.cpy2,t.cpx1+a,t.cpy1,t.x1+a,t.y1)):(e.lineTo(t.x2,t.y2+a),e.bezierCurveTo(t.cpx2,t.cpy2+a,t.cpx1,t.cpy1+a,t.x1,t.y1+a)),e.closePath()},a.prototype.highlight=function(){f(this)},a.prototype.downplay=function(){y(this)},a}(Ct),xs=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e._focusAdjacencyDisabled=!1,e}return e(a,t),a.prototype.render=function(e,t,a){var i=this,n=e.getGraph(),o=this.group,r=e.layoutInfo,s=r.width,l=r.height,u=e.getData(),d=e.getData("edge"),c=e.get("orient");this._model=e,o.removeAll(),o.x=r.x,o.y=r.y,n.eachEdge(function(t){var a=new vs,i=I(a);i.dataIndex=t.dataIndex,i.seriesIndex=e.seriesIndex,i.dataType="edge";var n,r,u,h,p,g,f,y,m=t.getModel(),v=m.getModel("lineStyle"),x=v.get("curveness"),S=t.node1.getLayout(),M=t.node1.getModel(),L=M.get("localX"),D=M.get("localY"),A=t.node2.getLayout(),C=t.node2.getModel(),N=C.get("localX"),T=C.get("localY"),E=t.getLayout();a.shape.extent=Math.max(1,E.dy),a.shape.orient=c,"vertical"===c?(n=(null!=L?L*s:S.x)+E.sy,r=(null!=D?D*l:S.y)+S.dy,u=(null!=N?N*s:A.x)+E.ty,p=n,g=r*(1-x)+(h=null!=T?T*l:A.y)*x,f=u,y=r*x+h*(1-x)):(n=(null!=L?L*s:S.x)+S.dx,r=(null!=D?D*l:S.y)+E.sy,p=n*(1-x)+(u=null!=N?N*s:A.x)*x,g=r,f=n*x+u*(1-x),y=h=(null!=T?T*l:A.y)+E.ty),a.setShape({x1:n,y1:r,x2:u,y2:h,cpx1:p,cpy1:g,cpx2:f,cpy2:y}),a.useStyle(v.getItemStyle()),bs(a.style,c,t);var R=""+m.get("value"),V=b(m,"edgeLabel");_(a,V,{labelFetcher:{getFormattedLabel:function(t,a,i,n,o,r){return e.getFormattedLabel(t,a,"edge",n,Ft(o,V.normal&&V.normal.get("formatter"),R),r)}},labelDataIndex:t.dataIndex,defaultText:R}),a.setTextConfig({position:"inside"});var z=m.getModel("emphasis");P(a,m,"lineStyle",function(e){var a=e.getItemStyle();return bs(a,c,t),a}),o.add(a),d.setItemGraphicEl(t.dataIndex,a);var k=z.get("focus");w(a,"adjacency"===k?t.getAdjacentDataIndices():"trajectory"===k?t.getTrajectoryDataIndices():k,z.get("blurScope"),z.get("disabled"))}),n.eachNode(function(t){var a=t.getLayout(),i=t.getModel(),n=i.get("localX"),r=i.get("localY"),d=i.getModel("emphasis"),c=i.get(["itemStyle","borderRadius"])||0,h=new Nt({shape:{x:null!=n?n*s:a.x,y:null!=r?r*l:a.y,width:a.dx,height:a.dy,r:c},style:i.getModel("itemStyle").getItemStyle(),z2:10});_(h,b(i),{labelFetcher:{getFormattedLabel:function(t,a){return e.getFormattedLabel(t,a,"node")}},labelDataIndex:t.dataIndex,defaultText:t.id}),h.disableLabelAnimation=!0,h.setStyle("fill",t.getVisual("color")),h.setStyle("decal",t.getVisual("style").decal),P(h,i),o.add(h),u.setItemGraphicEl(t.dataIndex,h),I(h).dataType="node";var p=d.get("focus");w(h,"adjacency"===p?t.getAdjacentDataIndices():"trajectory"===p?t.getTrajectoryDataIndices():p,d.get("blurScope"),d.get("disabled"))}),u.eachItemGraphicEl(function(t,n){u.getItemModel(n).get("draggable")&&(t.drift=function(t,o){i._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=o,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:u.getRawIndex(n),localX:this.shape.x/s,localY:this.shape.y/l})},t.ondragend=function(){i._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")}),!this._data&&e.isAnimationEnabled()&&o.setClipPath(function(e,t,a){var i=new Nt({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return x(i,{shape:{width:e.width+20}},t,a),i}(o.getBoundingRect(),e,function(){o.removeClipPath()})),this._data=e.getData()},a.prototype.dispose=function(){},a.type="sankey",a}(R);function bs(e,t,a){switch(e.fill){case"source":e.fill=a.node1.getVisual("color"),e.decal=a.node1.getVisual("style").decal;break;case"target":e.fill=a.node2.getVisual("color"),e.decal=a.node2.getVisual("style").decal;break;case"gradient":var i=a.node1.getVisual("color"),n=a.node2.getVisual("color");$t(i)&&$t(n)&&(e.fill=new Vt(0,0,+("horizontal"===t),+("vertical"===t),[{color:i,offset:0},{color:n,offset:1}]))}}var Ss=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.getInitialData=function(e,t){var a=e.edges||e.links||[],i=e.data||e.nodes||[],n=e.levels||[];this.levelModels=[];for(var o=this.levelModels,r=0;r<n.length;r++)null!=n[r].depth&&n[r].depth>=0&&(o[n[r].depth]=new xe(n[r],this,t));return Hr(i,a,this,!0,function(e,t){e.wrapMethod("getItemModel",function(e,t){var a=e.parentModel,i=a.getData().getItemLayout(t);if(i){var n=i.depth,o=a.levelModels[n];o&&(e.parentModel=o)}return e}),t.wrapMethod("getItemModel",function(e,t){var a=e.parentModel,i=a.getGraph().getEdgeByIndex(t).node1.getLayout();if(i){var n=i.depth,o=a.levelModels[n];o&&(e.parentModel=o)}return e})}).data},a.prototype.setNodePosition=function(e,t){var a=(this.option.data||this.option.nodes)[e];a.localX=t[0],a.localY=t[1]},a.prototype.getGraph=function(){return this.getData().graph},a.prototype.getEdgeData=function(){return this.getGraph().edgeData},a.prototype.formatTooltip=function(e,t,a){function i(e){return isNaN(e)||null==e}if("edge"===a){var n=this.getDataParams(e,a),o=n.data,r=n.value,s=o.source+" -- "+o.target;return Oa("nameValue",{name:s,value:r,noValue:i(r)})}var l=this.getGraph().getNodeByIndex(e).getLayout().value,u=this.getDataParams(e,a).data.name;return Oa("nameValue",{name:null!=u?u+"":null,value:l,noValue:i(l)})},a.prototype.optionUpdated=function(){},a.prototype.getDataParams=function(e,a){var i=t.prototype.getDataParams.call(this,e,a);if(null==i.value&&"node"===a){var n=this.getGraph().getNodeByIndex(e).getLayout().value;i.value=n}return i},a.type="series.sankey",a.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},a}(p);function _s(e,t){e.eachSeriesByType("sankey",function(e){var a=e.get("nodeWidth"),i=e.get("nodeGap"),n=function(e,t){return Q(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=n;var o=n.width,r=n.height,s=e.getGraph(),l=s.nodes,u=s.edges;!function(e){xt(e,function(e){var t=Ps(e.outEdges,Ts),a=Ps(e.inEdges,Ts),i=e.getValue()||0,n=Math.max(t,a,i);e.setLayout({value:n},!0)})}(l),function(e,t,a,i,n,o,r,s,l){(function(e,t,a,i,n,o,r){for(var s=[],l=[],u=[],d=[],c=0,h=0;h<t.length;h++)s[h]=1;for(h=0;h<e.length;h++)l[h]=e[h].inEdges.length,0===l[h]&&u.push(e[h]);var p=-1;for(;u.length;){for(var g=0;g<u.length;g++){var f=u[g],y=f.hostGraph.data.getRawDataItem(f.dataIndex),m=null!=y.depth&&y.depth>=0;m&&y.depth>p&&(p=y.depth),f.setLayout({depth:m?y.depth:c},!0),"vertical"===o?f.setLayout({dy:a},!0):f.setLayout({dx:a},!0);for(var v=0;v<f.outEdges.length;v++){var x=f.outEdges[v];s[t.indexOf(x)]=0;var b=x.node2;0===--l[e.indexOf(b)]&&d.indexOf(b)<0&&d.push(b)}}++c,u=d,d=[]}for(h=0;h<s.length;h++)if(1===s[h])throw new Error("Sankey is a DAG, the original data has cycle!");var S=p>c-1?p:c-1;r&&"left"!==r&&function(e,t,a,i){if("right"===t){for(var n=[],o=e,r=0;o.length;){for(var s=0;s<o.length;s++){var l=o[s];l.setLayout({skNodeHeight:r},!0);for(var u=0;u<l.inEdges.length;u++){var d=l.inEdges[u];n.indexOf(d.node1)<0&&n.push(d.node1)}}o=n,n=[],++r}xt(e,function(e){ws(e)||e.setLayout({depth:Math.max(0,i-e.getLayout().skNodeHeight)},!0)})}else"justify"===t&&function(e,t){xt(e,function(e){ws(e)||e.outEdges.length||e.setLayout({depth:t},!0)})}(e,i)}(e,r,0,S);var _="vertical"===o?(n-a)/S:(i-a)/S;!function(e,t,a){xt(e,function(e){var i=e.getLayout().depth*t;"vertical"===a?e.setLayout({y:i},!0):e.setLayout({x:i},!0)})}(e,_,o)})(e,t,a,n,o,s,l),function(e,t,a,i,n,o,r){var s=function(e,t){var a=[],i="vertical"===t?"y":"x",n=We(e,function(e){return e.getLayout()[i]});return n.keys.sort(function(e,t){return e-t}),xt(n.keys,function(e){a.push(n.buckets.get(e))}),a}(e,r);(function(e,t,a,i,n,o){var r=1/0;xt(e,function(e){var t=e.length,s=0;xt(e,function(e){s+=e.getLayout().value});var l="vertical"===o?(i-(t-1)*n)/s:(a-(t-1)*n)/s;l<r&&(r=l)}),xt(e,function(e){xt(e,function(e,t){var a=e.getLayout().value*r;"vertical"===o?(e.setLayout({x:t},!0),e.setLayout({dx:a},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:a},!0))})}),xt(t,function(e){var t=+e.getValue()*r;e.setLayout({dy:t},!0)})})(s,t,a,i,n,r),Is(s,n,a,i,r);for(var l=1;o>0;o--)Ms(s,l*=.99,r),Is(s,n,a,i,r),Es(s,l,r),Is(s,n,a,i,r)}(e,t,o,n,i,r,s),function(e,t){var a="vertical"===t?"x":"y";xt(e,function(e){e.outEdges.sort(function(e,t){return e.node2.getLayout()[a]-t.node2.getLayout()[a]}),e.inEdges.sort(function(e,t){return e.node1.getLayout()[a]-t.node1.getLayout()[a]})}),xt(e,function(e){var t=0,a=0;xt(e.outEdges,function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy}),xt(e.inEdges,function(e){e.setLayout({ty:a},!0),a+=e.getLayout().dy})})}(e,s)}(l,u,a,i,o,r,0!==ua(l,function(e){return 0===e.getLayout().value}).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))})}function ws(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function Is(e,t,a,i,n){var o="vertical"===n?"x":"y";xt(e,function(e){var r,s,l;e.sort(function(e,t){return e.getLayout()[o]-t.getLayout()[o]});for(var u=0,d=e.length,c="vertical"===n?"dx":"dy",h=0;h<d;h++)(l=u-(s=e[h]).getLayout()[o])>0&&(r=s.getLayout()[o]+l,"vertical"===n?s.setLayout({x:r},!0):s.setLayout({y:r},!0)),u=s.getLayout()[o]+s.getLayout()[c]+t;if((l=u-t-("vertical"===n?i:a))>0){r=s.getLayout()[o]-l,"vertical"===n?s.setLayout({x:r},!0):s.setLayout({y:r},!0),u=r;for(h=d-2;h>=0;--h)(l=(s=e[h]).getLayout()[o]+s.getLayout()[c]+t-u)>0&&(r=s.getLayout()[o]-l,"vertical"===n?s.setLayout({x:r},!0):s.setLayout({y:r},!0)),u=s.getLayout()[o]}})}function Ms(e,t,a){xt(e.slice().reverse(),function(e){xt(e,function(e){if(e.outEdges.length){var i=Ps(e.outEdges,Ls,a)/Ps(e.outEdges,Ts);if(isNaN(i)){var n=e.outEdges.length;i=n?Ps(e.outEdges,Ds,a)/n:0}if("vertical"===a){var o=e.getLayout().x+(i-Ns(e,a))*t;e.setLayout({x:o},!0)}else{var r=e.getLayout().y+(i-Ns(e,a))*t;e.setLayout({y:r},!0)}}})})}function Ls(e,t){return Ns(e.node2,t)*e.getValue()}function Ds(e,t){return Ns(e.node2,t)}function As(e,t){return Ns(e.node1,t)*e.getValue()}function Cs(e,t){return Ns(e.node1,t)}function Ns(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function Ts(e){return e.getValue()}function Ps(e,t,a){for(var i=0,n=e.length,o=-1;++o<n;){var r=+t(e[o],a);isNaN(r)||(i+=r)}return i}function Es(e,t,a){xt(e,function(e){xt(e,function(e){if(e.inEdges.length){var i=Ps(e.inEdges,As,a)/Ps(e.inEdges,Ts);if(isNaN(i)){var n=e.inEdges.length;i=n?Ps(e.inEdges,Cs,a)/n:0}if("vertical"===a){var o=e.getLayout().x+(i-Ns(e,a))*t;e.setLayout({x:o},!0)}else{var r=e.getLayout().y+(i-Ns(e,a))*t;e.setLayout({y:r},!0)}}})})}function Rs(e){e.eachSeriesByType("sankey",function(e){var t=e.getGraph(),a=t.nodes,i=t.edges;if(a.length){var n=1/0,o=-1/0;xt(a,function(e){var t=e.getLayout().value;t<n&&(n=t),t>o&&(o=t)}),xt(a,function(t){var a=new Ve({type:"color",mappingMethod:"linear",dataExtent:[n,o],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),i=t.getModel().get(["itemStyle","color"]);null!=i?(t.setVisual("color",i),t.setVisual("style",{fill:i})):(t.setVisual("color",a),t.setVisual("style",{fill:a}))})}i.length&&xt(i,function(e){var t=e.getModel().get("lineStyle");e.setVisual("style",t)})})}function Vs(e){e.registerChartView(xs),e.registerSeriesModel(Ss),e.registerLayout(_s),e.registerVisual(Rs),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var zs=function(){function e(){}return e.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&null!=t.get(e)},e.prototype.getInitialData=function(e,t){var a,i,n=t.getComponent("xAxis",this.get("xAxisIndex")),r=t.getComponent("yAxis",this.get("yAxisIndex")),s=n.get("type"),l=r.get("type");"category"===s?(e.layout="horizontal",a=n.getOrdinalMeta(),i=!this._hasEncodeRule("x")):"category"===l?(e.layout="vertical",a=r.getOrdinalMeta(),i=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var u=["x","y"],c="horizontal"===e.layout?0:1,h=this._baseAxisDim=u[c],p=u[1-c],g=[n,r],f=g[c].get("type"),y=g[1-c].get("type"),m=e.data;if(m&&i){var v=[];xt(m,function(e,t){var a;bt(e)?(a=e.slice(),e.unshift(t)):bt(e.value)?((a=wt({},e)).value=a.value.slice(),e.value.unshift(t)):a=e,v.push(a)}),e.data=v}var x=this.defaultValueDimensions,b=[{name:h,type:d(f),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:d(y),dimsDef:x.slice()}];return pn(this,{coordDimensions:b,dimensionsCount:x.length+1,encodeDefaulter:mt(o,b,this)})},e.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},e}(),ks=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return e(a,t),a.type="series.boxplot",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},a}(p);Ia(ks,zs,!0);var Os=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a){var i=e.getData(),n=this.group,o=this._data;this._data||n.removeAll();var r="horizontal"===e.get("layout")?1:0;i.diff(o).add(function(e){if(i.hasValue(e)){var t=Fs(i.getItemLayout(e),i,e,r,!0);i.setItemGraphicEl(e,t),n.add(t)}}).update(function(e,t){var a=o.getItemGraphicEl(t);if(i.hasValue(e)){var s=i.getItemLayout(e);a?(v(a),Ws(s,a,i,e)):a=Fs(s,i,e,r),n.add(a),i.setItemGraphicEl(e,a)}else n.remove(a)}).remove(function(e){var t=o.getItemGraphicEl(e);t&&n.remove(t)}).execute(),this._data=i},a.prototype.remove=function(e){var t=this.group,a=this._data;this._data=null,a&&a.eachItemGraphicEl(function(e){e&&t.remove(e)})},a.type="boxplot",a}(R),Gs=function(){return function(){}}(),Bs=function(t){function a(e){var a=t.call(this,e)||this;return a.type="boxplotBoxPath",a}return e(a,t),a.prototype.getDefaultShape=function(){return new Gs},a.prototype.buildPath=function(e,t){var a=t.points,i=0;for(e.moveTo(a[i][0],a[i][1]),i++;i<4;i++)e.lineTo(a[i][0],a[i][1]);for(e.closePath();i<a.length;i++)e.moveTo(a[i][0],a[i][1]),i++,e.lineTo(a[i][0],a[i][1])},a}(Ct);function Fs(e,t,a,i,n){var o=e.ends,r=new Bs({shape:{points:n?Ys(o,i,e):o}});return Ws(e,r,t,a,n),r}function Ws(e,t,a,i,n){var o=a.hostModel;(0,pe[n?"initProps":"updateProps"])(t,{shape:{points:e.ends}},o,i),t.useStyle(a.getItemVisual(i,"style")),t.style.strokeNoScale=!0,t.z2=100;var r=a.getItemModel(i),s=r.getModel("emphasis");P(t,r),w(t,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function Ys(e,t,a){return vt(e,function(e){return(e=e.slice())[t]=a.initBaseline,e})}var Hs=xt;function Xs(e){var t=function(e){var t=[],a=[];return e.eachSeriesByType("boxplot",function(e){var i=e.getBaseAxis(),n=Qt(a,i);n<0&&(n=a.length,a[n]=i,t[n]={axis:i,seriesModels:[]}),t[n].seriesModels.push(e)}),t}(e);Hs(t,function(e){var t=e.seriesModels;t.length&&(!function(e){var t,a=e.axis,i=e.seriesModels,n=i.length,o=e.boxWidthList=[],r=e.boxOffsetList=[],s=[];if("category"===a.type)t=a.getBandWidth();else{var l=0;Hs(i,function(e){l=Math.max(l,e.getData().count())});var u=a.getExtent();t=Math.abs(u[1]-u[0])/l}Hs(i,function(e){var a=e.get("boxWidth");bt(a)||(a=[a,a]),s.push([$(a[0],t)||0,$(a[1],t)||0])});var d=.8*t-2,c=d/n*.3,h=(d-c*(n-1))/n,p=h/2-d/2;Hs(i,function(e,t){r.push(p),p+=c+h,o.push(Math.min(Math.max(h,s[t][0]),s[t][1]))})}(e),Hs(t,function(t,a){!function(e,t,a){var i=e.coordinateSystem,n=e.getData(),o=a/2,r="horizontal"===e.get("layout")?0:1,s=1-r,l=["x","y"],u=n.mapDimension(l[r]),d=n.mapDimensionsAll(l[s]);if(null==u||d.length<5)return;for(var c=0;c<n.count();c++){var h=n.get(u,c),p=x(h,d[2],c),g=x(h,d[0],c),f=x(h,d[1],c),y=x(h,d[3],c),m=x(h,d[4],c),v=[];b(v,f,!1),b(v,y,!0),v.push(g,f,m,y),S(v,g),S(v,m),S(v,p),n.setItemLayout(c,{initBaseline:p[s],ends:v})}function x(e,a,o){var l,u=n.get(a,o),d=[];return d[r]=e,d[s]=u,isNaN(e)||isNaN(u)?l=[NaN,NaN]:(l=i.dataToPoint(d))[r]+=t,l}function b(e,t,a){var i=t.slice(),n=t.slice();i[r]+=o,n[r]-=o,a?e.push(i,n):e.push(n,i)}function S(e,t){var a=t.slice(),i=t.slice();a[r]-=o,i[r]+=o,e.push(a,i)}}(t,e.boxOffsetList[a],e.boxWidthList[a])}))})}var Us={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Xe){Ue("")}var a=function(e,t){for(var a=[],i=[],n=(t=t||{}).boundIQR,o="none"===n||0===n,r=0;r<e.length;r++){var s=Ye(e[r].slice()),l=He(s,.25),u=He(s,.5),d=He(s,.75),c=s[0],h=s[s.length-1],p=(null==n?1.5:n)*(d-l),g=o?c:Math.max(c,l-p),f=o?h:Math.min(h,d+p),y=t.itemNameFormatter,m=yt(y)?y({value:r}):$t(y)?y.replace("{value}",r+""):r+"";a.push([m,g,l,u,d,f]);for(var v=0;v<s.length;v++){var x=s[v];if(x<g||x>f){var b=[m,x];i.push(b)}}}return{boxData:a,outliers:i}}(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:a.boxData},{data:a.outliers}]}};function Zs(e){e.registerSeriesModel(ks),e.registerChartView(Os),e.registerLayout(Xs),e.registerTransform(Us)}var js=["itemStyle","borderColor"],qs=["itemStyle","borderColor0"],Ks=["itemStyle","borderColorDoji"],Js=["itemStyle","color"],Qs=["itemStyle","color0"];function $s(e,t){return t.get(e>0?Js:Qs)}function el(e,t){return t.get(0===e?Ks:e>0?js:qs)}var tl={seriesType:"candlestick",plan:ja(),performRawSeries:!0,reset:function(e,t){if(!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(e,t){for(var a;null!=(a=e.next());){var i=t.getItemModel(a),n=t.getItemLayout(a).sign,o=i.getItemStyle();o.fill=$s(n,i),o.stroke=el(n,i)||o.fill;var r=t.ensureUniqueItemVisual(a,"style");wt(r,o)}}}}},al=["color","borderColor"],il=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},a.prototype.incrementalPrepareRender=function(e,t,a){this._clear(),this._updateDrawMode(e)},a.prototype.incrementalRender=function(e,t,a,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},a.prototype.eachRendered=function(e){D(this._progressiveEls||this.group,e)},a.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},a.prototype._renderNormal=function(e){var t=e.getData(),a=this._data,i=this.group,n=t.getLayout("isSimpleBox"),o=e.get("clip",!0),r=e.coordinateSystem,s=r.getArea&&r.getArea();this._data||i.removeAll(),t.diff(a).add(function(a){if(t.hasValue(a)){var r=t.getItemLayout(a);if(o&&sl(s,r))return;var l=rl(r,a,!0);x(l,{shape:{points:r.ends}},e,a),ll(l,t,a,n),i.add(l),t.setItemGraphicEl(a,l)}}).update(function(r,l){var u=a.getItemGraphicEl(l);if(t.hasValue(r)){var d=t.getItemLayout(r);o&&sl(s,d)?i.remove(u):(u?(m(u,{shape:{points:d.ends}},e,r),v(u)):u=rl(d),ll(u,t,r,n),i.add(u),t.setItemGraphicEl(r,u))}else i.remove(u)}).remove(function(e){var t=a.getItemGraphicEl(e);t&&i.remove(t)}).execute(),this._data=t},a.prototype._renderLarge=function(e){this._clear(),hl(e,this.group);var t=e.get("clip",!0)?mi(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},a.prototype._incrementalRenderNormal=function(e,t){for(var a,i=t.getData(),n=i.getLayout("isSimpleBox");null!=(a=e.next());){var o=rl(i.getItemLayout(a));ll(o,i,a,n),o.incremental=!0,this.group.add(o),this._progressiveEls.push(o)}},a.prototype._incrementalRenderLarge=function(e,t){hl(t,this.group,this._progressiveEls,!0)},a.prototype.remove=function(e){this._clear()},a.prototype._clear=function(){this.group.removeAll(),this._data=null},a.type="candlestick",a}(R),nl=function(){return function(){}}(),ol=function(t){function a(e){var a=t.call(this,e)||this;return a.type="normalCandlestickBox",a}return e(a,t),a.prototype.getDefaultShape=function(){return new nl},a.prototype.buildPath=function(e,t){var a=t.points;this.__simpleBox?(e.moveTo(a[4][0],a[4][1]),e.lineTo(a[6][0],a[6][1])):(e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.closePath(),e.moveTo(a[4][0],a[4][1]),e.lineTo(a[5][0],a[5][1]),e.moveTo(a[6][0],a[6][1]),e.lineTo(a[7][0],a[7][1]))},a}(Ct);function rl(e,t,a){var i=e.ends;return new ol({shape:{points:a?ul(i,e):i},z2:100})}function sl(e,t){for(var a=!0,i=0;i<t.ends.length;i++)if(e.contain(t.ends[i][0],t.ends[i][1])){a=!1;break}return a}function ll(e,t,a,i){var n=t.getItemModel(a);e.useStyle(t.getItemVisual(a,"style")),e.style.strokeNoScale=!0,e.__simpleBox=i,P(e,n);var o=t.getItemLayout(a).sign;xt(e.states,function(e,t){var a=n.getModel(t),i=$s(o,a),r=el(o,a)||i,s=e.style||(e.style={});i&&(s.fill=i),r&&(s.stroke=r)});var r=n.getModel("emphasis");w(e,r.get("focus"),r.get("blurScope"),r.get("disabled"))}function ul(e,t){return vt(e,function(e){return(e=e.slice())[1]=t.initBaseline,e})}var dl=function(){return function(){}}(),cl=function(t){function a(e){var a=t.call(this,e)||this;return a.type="largeCandlestickBox",a}return e(a,t),a.prototype.getDefaultShape=function(){return new dl},a.prototype.buildPath=function(e,t){for(var a=t.points,i=0;i<a.length;)if(this.__sign===a[i++]){var n=a[i++];e.moveTo(n,a[i++]),e.lineTo(n,a[i++])}else i+=3},a}(Ct);function hl(e,t,a,i){var n=e.getData().getLayout("largePoints"),o=new cl({shape:{points:n},__sign:1,ignoreCoarsePointer:!0});t.add(o);var r=new cl({shape:{points:n},__sign:-1,ignoreCoarsePointer:!0});t.add(r);var s=new cl({shape:{points:n},__sign:0,ignoreCoarsePointer:!0});t.add(s),pl(1,o,e),pl(-1,r,e),pl(0,s,e),i&&(o.incremental=!0,r.incremental=!0),a&&a.push(o,r)}function pl(e,t,a,i){var n=el(e,a)||$s(e,a),o=a.getModel("itemStyle").getItemStyle(al);t.useStyle(o),t.style.fill=null,t.style.stroke=n}var gl=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return e(a,t),a.prototype.getShadowDim=function(){return"open"},a.prototype.brushSelector=function(e,t,a){var i=t.getItemLayout(e);return i&&a.rect(i.brushRect)},a.type="series.candlestick",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},a}(p);function fl(e){e&&bt(e.series)&&xt(e.series,function(e){It(e)&&"k"===e.type&&(e.type="candlestick")})}Ia(gl,zs,!0);var yl={seriesType:"candlestick",plan:ja(),reset:function(e){var t=e.coordinateSystem,a=e.getData(),i=function(e,t){var a,i=e.getBaseAxis(),n="category"===i.type?i.getBandWidth():(a=i.getExtent(),Math.abs(a[1]-a[0])/t.count()),o=$(Ma(e.get("barMaxWidth"),n),n),r=$(Ma(e.get("barMinWidth"),1),n),s=e.get("barWidth");return null!=s?$(s,n):Math.max(Math.min(n/2,o),r)}(e,a),n=["x","y"],o=a.getDimensionIndex(a.mapDimension(n[0])),r=vt(a.mapDimensionsAll(n[1]),a.getDimensionIndex,a),s=r[0],l=r[1],u=r[2],d=r[3];if(a.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(o<0||r.length<4))return{progress:e.pipelineContext.large?function(a,i){var n,r,c=C(4*a.count),h=0,p=[],g=[],f=i.getStore(),y=!!e.get(["itemStyle","borderColorDoji"]);for(;null!=(r=a.next());){var m=f.get(o,r),v=f.get(s,r),x=f.get(l,r),b=f.get(u,r),S=f.get(d,r);isNaN(m)||isNaN(b)||isNaN(S)?(c[h++]=NaN,h+=3):(c[h++]=ml(f,r,v,x,l,y),p[0]=m,p[1]=b,n=t.dataToPoint(p,null,g),c[h++]=n?n[0]:NaN,c[h++]=n?n[1]:NaN,p[1]=S,n=t.dataToPoint(p,null,g),c[h++]=n?n[1]:NaN)}i.setLayout("largePoints",c)}:function(e,a){var n,r=a.getStore();for(;null!=(n=e.next());){var c=r.get(o,n),h=r.get(s,n),p=r.get(l,n),g=r.get(u,n),f=r.get(d,n),y=Math.min(h,p),m=Math.max(h,p),v=I(y,c),x=I(m,c),b=I(g,c),S=I(f,c),_=[];M(_,x,0),M(_,v,1),_.push(D(S),D(x),D(b),D(v));var w=!!a.getItemModel(n).get(["itemStyle","borderColorDoji"]);a.setItemLayout(n,{sign:ml(r,n,h,p,l,w),initBaseline:h>p?x[1]:v[1],ends:_,brushRect:L(g,f,c)})}function I(e,a){var i=[];return i[0]=a,i[1]=e,isNaN(a)||isNaN(e)?[NaN,NaN]:t.dataToPoint(i)}function M(e,t,a){var n=t.slice(),o=t.slice();n[0]=Ze(n[0]+i/2,1,!1),o[0]=Ze(o[0]-i/2,1,!0),a?e.push(n,o):e.push(o,n)}function L(e,t,a){var n=I(e,a),o=I(t,a);return n[0]-=i/2,o[0]-=i/2,{x:n[0],y:n[1],width:i,height:o[1]-n[1]}}function D(e){return e[0]=Ze(e[0],1),e}}}}};function ml(e,t,a,i,n,o){return a>i?-1:a<i?1:o?0:t>0?e.get(n,t-1)<=i?1:-1:1}function vl(e){e.registerChartView(il),e.registerSeriesModel(gl),e.registerPreprocessor(fl),e.registerVisual(tl),e.registerLayout(yl)}function xl(e,t){var a=t.rippleEffectColor||t.color;e.eachChild(function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?a:null,fill:"fill"===t.brushType?a:null}})})}var bl=function(t){function a(e,a){var i=t.call(this)||this,n=new $a(e,a),o=new St;return i.add(n),i.add(o),i.updateData(e,a),i}return e(a,t),a.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},a.prototype.startEffectAnimation=function(e){for(var t=e.symbolType,a=e.color,i=e.rippleNumber,n=this.childAt(1),o=0;o<i;o++){var r=h(t,-1,-1,2,2,a);r.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-o/i*e.period+e.effectOffset;r.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(s).start(),r.animateStyle(!0).when(e.period,{opacity:0}).delay(s).start(),n.add(r)}xl(n,e)},a.prototype.updateEffectAnimation=function(e){for(var t=this._effectCfg,a=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],n=0;n<i.length;n++){var o=i[n];if(t[o]!==e[o])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}xl(a,e)},a.prototype.highlight=function(){f(this)},a.prototype.downplay=function(){y(this)},a.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},a.prototype.updateData=function(e,t){var a=this,i=e.hostModel;this.childAt(0).updateData(e,t);var n=this.childAt(1),o=e.getItemModel(t),r=e.getItemVisual(t,"symbol"),s=L(e.getItemVisual(t,"symbolSize")),l=e.getItemVisual(t,"style"),u=l&&l.fill,d=o.getModel("emphasis");n.setScale(s),n.traverse(function(e){e.setStyle("fill",u)});var c=S(e.getItemVisual(t,"symbolOffset"),s);c&&(n.x=c[0],n.y=c[1]);var h=e.getItemVisual(t,"symbolRotate");n.rotation=(h||0)*Math.PI/180||0;var p={};p.showEffectOn=i.get("showEffectOn"),p.rippleScale=o.get(["rippleEffect","scale"]),p.brushType=o.get(["rippleEffect","brushType"]),p.period=1e3*o.get(["rippleEffect","period"]),p.effectOffset=t/e.count(),p.z=i.getShallow("z")||0,p.zlevel=i.getShallow("zlevel")||0,p.symbolType=r,p.color=u,p.rippleEffectColor=o.get(["rippleEffect","color"]),p.rippleNumber=o.get(["rippleEffect","number"]),"render"===p.showEffectOn?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(e){"emphasis"===e?"render"!==p.showEffectOn&&a.startEffectAnimation(p):"normal"===e&&"render"!==p.showEffectOn&&a.stopEffectAnimation()}),this._effectCfg=p,w(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},a.prototype.fadeOut=function(e){e&&e()},a}(St),Sl=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.init=function(){this._symbolDraw=new ni(bl)},a.prototype.render=function(e,t,a){var i=e.getData(),n=this._symbolDraw;n.updateData(i,{clipShape:this._getClipShape(e)}),this.group.add(n.group)},a.prototype._getClipShape=function(e){var t=e.coordinateSystem,a=t&&t.getArea&&t.getArea();return e.get("clip",!0)?a:null},a.prototype.updateTransform=function(e,t,a){var i=e.getData();this.group.dirty();var n=B("").reset(e,t,a);n.progress&&n.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},a.prototype._updateGroupTransform=function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=La(t.getRoamTransform()),this.group.decomposeTransform())},a.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0)},a.type="effectScatter",a}(R),_l=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.hasSymbolVisual=!0,e}return e(a,t),a.prototype.getInitialData=function(e,t){return qa(null,this,{useEncodeDefaulter:!0})},a.prototype.brushSelector=function(e,t,a){return a.point(t.getItemLayout(e))},a.type="series.effectScatter",a.dependencies=["grid","polar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},a}(p);function wl(e){e.registerChartView(Sl),e.registerSeriesModel(_l),e.registerLayout(B("effectScatter"))}var Il=function(t){function a(e,a,i){var n=t.call(this)||this;return n.add(n.createLine(e,a,i)),n._updateEffectSymbol(e,a),n}return e(a,t),a.prototype.createLine=function(e,t,a){return new Cr(e,t,a)},a.prototype._updateEffectSymbol=function(e,t){var a=e.getItemModel(t).getModel("effect"),i=a.get("symbolSize"),n=a.get("symbol");bt(i)||(i=[i,i]);var o=e.getItemVisual(t,"style"),r=a.get("color")||o&&o.stroke,s=this.childAt(1);this._symbolType!==n&&(this.remove(s),(s=h(n,-.5,-.5,1,1,r)).z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",r),s.setStyle(a.getItemStyle(["color"])),s.scaleX=i[0],s.scaleY=i[1],s.setColor(r),this._symbolType=n,this._symbolScale=i,this._updateEffectAnimation(e,a,t))},a.prototype._updateEffectAnimation=function(e,t,a){var i=this.childAt(1);if(i){var n=e.getItemLayout(a),o=1e3*t.get("period"),r=t.get("loop"),s=t.get("roundTrip"),l=t.get("constantSpeed"),u=la(t.get("delay"),function(t){return t/e.count()*o/3});if(i.ignore=!0,this._updateAnimationPoints(i,n),l>0&&(o=this._getLineLength(i)/l*1e3),o!==this._period||r!==this._loop||s!==this._roundTrip){i.stopAnimation();var d=void 0;d=yt(u)?u(a):u,i.__t>0&&(d=-o*i.__t),this._animateSymbol(i,o,d,r,s)}this._period=o,this._loop=r,this._roundTrip=s}},a.prototype._animateSymbol=function(e,t,a,i,n){if(t>0){e.__t=0;var o=this,r=e.animate("",i).when(n?2*t:t,{__t:n?2:1}).delay(a).during(function(){o._updateSymbolPosition(e)});i||r.done(function(){o.remove(e)}),r.start()}},a.prototype._getLineLength=function(e){return Da(e.__p1,e.__cp1)+Da(e.__cp1,e.__p2)},a.prototype._updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},a.prototype.updateData=function(e,t,a){this.childAt(0).updateData(e,t,a),this._updateEffectSymbol(e,t)},a.prototype._updateSymbolPosition=function(e){var t=e.__p1,a=e.__p2,i=e.__cp1,n=e.__t<1?e.__t:2-e.__t,o=[e.x,e.y],r=o.slice(),s=Sa,l=Aa;o[0]=s(t[0],i[0],a[0],n),o[1]=s(t[1],i[1],a[1],n);var u=e.__t<1?l(t[0],i[0],a[0],n):l(a[0],i[0],t[0],1-n),d=e.__t<1?l(t[1],i[1],a[1],n):l(a[1],i[1],t[1],1-n);e.rotation=-Math.atan2(d,u)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==e.__lastT&&e.__lastT<e.__t?(e.scaleY=1.05*Da(r,o),1===n&&(o[0]=r[0]+(o[0]-r[0])/2,o[1]=r[1]+(o[1]-r[1])/2)):1===e.__lastT?e.scaleY=2*Da(t,o):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=o[0],e.y=o[1]},a.prototype.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var a=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,a,t)},a}(St),Ml=function(t){function a(e,a,i){var n=t.call(this)||this;return n._createPolyline(e,a,i),n}return e(a,t),a.prototype._createPolyline=function(e,t,a){var i=e.getItemLayout(t),n=new Bt({shape:{points:i}});this.add(n),this._updateCommonStl(e,t,a)},a.prototype.updateData=function(e,t,a){var i=e.hostModel,n=this.childAt(0),o={shape:{points:e.getItemLayout(t)}};m(n,o,i,t),this._updateCommonStl(e,t,a)},a.prototype._updateCommonStl=function(e,t,a){var i=this.childAt(0),n=e.getItemModel(t),o=a&&a.emphasisLineStyle,r=a&&a.focus,s=a&&a.blurScope,l=a&&a.emphasisDisabled;if(!a||e.hasItemOption){var u=n.getModel("emphasis");o=u.getModel("lineStyle").getLineStyle(),l=u.get("disabled"),r=u.get("focus"),s=u.get("blurScope")}i.useStyle(e.getItemVisual(t,"style")),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=o,w(this,r,s,l)},a.prototype.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},a}(St),Ll=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return e(a,t),a.prototype.createLine=function(e,t,a){return new Ml(e,t,a)},a.prototype._updateAnimationPoints=function(e,t){this._points=t;for(var a=[0],i=0,n=1;n<t.length;n++){var o=t[n-1],r=t[n];i+=Da(o,r),a.push(i)}if(0!==i){for(n=0;n<a.length;n++)a[n]/=i;this._offsets=a,this._length=i}else this._length=0},a.prototype._getLineLength=function(){return this._length},a.prototype._updateSymbolPosition=function(e){var t=e.__t<1?e.__t:2-e.__t,a=this._points,i=this._offsets,n=a.length;if(i){var o,r=this._lastFrame;if(t<this._lastFramePercent){for(o=Math.min(r+1,n-1);o>=0&&!(i[o]<=t);o--);o=Math.min(o,n-2)}else{for(o=r;o<n&&!(i[o]>t);o++);o=Math.min(o-1,n-2)}var s=(t-i[o])/(i[o+1]-i[o]),l=a[o],u=a[o+1];e.x=l[0]*(1-s)+s*u[0],e.y=l[1]*(1-s)+s*u[1];var d=e.__t<1?u[0]-l[0]:l[0]-u[0],c=e.__t<1?u[1]-l[1]:l[1]-u[1];e.rotation=-Math.atan2(c,d)-Math.PI/2,this._lastFrame=o,this._lastFramePercent=t,e.ignore=!1}},a}(Il),Dl=function(){return function(){this.polyline=!1,this.curveness=0,this.segs=[]}}(),Al=function(t){function a(e){var a=t.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return e(a,t),a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new Dl},a.prototype.buildPath=function(e,t){var a,i=t.segs,n=t.curveness;if(t.polyline)for(a=this._off;a<i.length;){var o=i[a++];if(o>0){e.moveTo(i[a++],i[a++]);for(var r=1;r<o;r++)e.lineTo(i[a++],i[a++])}}else for(a=this._off;a<i.length;){var s=i[a++],l=i[a++],u=i[a++],d=i[a++];if(e.moveTo(s,l),n>0){var c=(s+u)/2-(l-d)*n,h=(l+d)/2-(u-s)*n;e.quadraticCurveTo(c,h,u,d)}else e.lineTo(u,d)}this.incremental&&(this._off=a,this.notClear=!0)},a.prototype.findDataIndex=function(e,t){var a=this.shape,i=a.segs,n=a.curveness,o=this.style.lineWidth;if(a.polyline)for(var r=0,s=0;s<i.length;){var l=i[s++];if(l>0)for(var u=i[s++],d=i[s++],c=1;c<l;c++){var h=i[s++],p=i[s++];if(Ca(u,d,h,p,o,e,t))return r}r++}else for(r=0,s=0;s<i.length;){u=i[s++],d=i[s++],h=i[s++],p=i[s++];if(n>0){if(Na(u,d,(u+h)/2-(d-p)*n,(d+p)/2-(h-u)*n,h,p,o,e,t))return r}else if(Ca(u,d,h,p,o,e,t))return r;r++}return-1},a.prototype.contain=function(e,t){var a=this.transformCoordToLocal(e,t),i=this.getBoundingRect();return e=a[0],t=a[1],i.contain(e,t)?(this.hoverDataIdx=this.findDataIndex(e,t))>=0:(this.hoverDataIdx=-1,!1)},a.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape.segs,a=1/0,i=1/0,n=-1/0,o=-1/0,r=0;r<t.length;){var s=t[r++],l=t[r++];a=Math.min(s,a),n=Math.max(s,n),i=Math.min(l,i),o=Math.max(l,o)}e=this._rect=new Wt(a,i,n,o)}return e},a}(Ct),Cl=function(){function e(){this.group=new St}return e.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},e.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(e,t){var a=this._newAdded[0],i=t.getLayout("linesPoints"),n=a&&a.shape.segs;if(n&&n.length<2e4){var o=n.length,r=new Float32Array(o+i.length);r.set(n),r.set(i,o),a.setShape({segs:r})}else{this._newAdded=[];var s=this._create();s.incremental=!0,s.setShape({segs:i}),this._setCommon(s,t),s.__startIndex=e.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},e.prototype._create=function(){var e=new Al({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},e.prototype._setCommon=function(e,t,a){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var n=t.getVisual("style");n&&n.stroke&&e.setStyle("stroke",n.stroke),e.setStyle("fill",null);var o=I(e);o.seriesIndex=i.seriesIndex,e.on("mousemove",function(t){o.dataIndex=null;var a=e.hoverDataIdx;a>0&&(o.dataIndex=a+e.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),Nl={seriesType:"lines",plan:ja(),reset:function(e){var t=e.coordinateSystem;if(t){var a=e.get("polyline"),i=e.pipelineContext.large;return{progress:function(n,o){var r=[];if(i){var s=void 0,l=n.end-n.start;if(a){for(var u=0,d=n.start;d<n.end;d++)u+=e.getLineCoordsCount(d);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var c=0,h=[];for(d=n.start;d<n.end;d++){var p=e.getLineCoords(d,r);a&&(s[c++]=p);for(var g=0;g<p;g++)h=t.dataToPoint(r[g],!1,h),s[c++]=h[0],s[c++]=h[1]}o.setLayout("linesPoints",s)}else for(d=n.start;d<n.end;d++){var f=o.getItemModel(d),y=(p=e.getLineCoords(d,r),[]);if(a)for(var m=0;m<p;m++)y.push(t.dataToPoint(r[m]));else{y[0]=t.dataToPoint(r[0]),y[1]=t.dataToPoint(r[1]);var v=f.get(["lineStyle","curveness"]);+v&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*v,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*v])}o.setItemLayout(d,y)}}}}}},Tl=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a){var i=e.getData(),n=this._updateLineDraw(i,e),o=e.get("zlevel"),r=e.get(["effect","trailLength"]),s=a.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(o).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&r>0&&(l||s.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(r/10+.9,1),0)})),n.updateData(i);var u=e.get("clip",!0)&&mi(e.coordinateSystem,!1,e);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},a.prototype.incrementalPrepareRender=function(e,t,a){var i=e.getData();this._updateLineDraw(i,e).incrementalPrepareUpdate(i),this._clearLayer(a),this._finished=!1},a.prototype.incrementalRender=function(e,t,a){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},a.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},a.prototype.updateTransform=function(e,t,a){var i=e.getData(),n=e.pipelineContext;if(!this._finished||n.large||n.progressiveRender)return{update:!0};var o=Nl.reset(e,t,a);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(a)},a.prototype._updateLineDraw=function(e,t){var a=this._lineDraw,i=this._showEffect(t),n=!!t.get("polyline"),o=t.pipelineContext.large;return a&&i===this._hasEffet&&n===this._isPolyline&&o===this._isLargeDraw||(a&&a.remove(),a=this._lineDraw=o?new Cl:new Nr(n?i?Ll:Ml:i?Il:Cr),this._hasEffet=i,this._isPolyline=n,this._isLargeDraw=o),this.group.add(a.group),a},a.prototype._showEffect=function(e){return!!e.get(["effect","show"])},a.prototype._clearLayer=function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},a.prototype.remove=function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},a.prototype.dispose=function(e,t){this.remove(e,t)},a.type="lines",a}(R),Pl="undefined"==typeof Uint32Array?Array:Uint32Array,El="undefined"==typeof Float64Array?Array:Float64Array;function Rl(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=vt(t,function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),Ta([t,e[0],e[1]])}))}var Vl=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return e(a,t),a.prototype.init=function(e){e.data=e.data||[],Rl(e);var a=this._processFlatCoordsArray(e.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(e.data=new Float32Array(a.count)),t.prototype.init.apply(this,arguments)},a.prototype.mergeOption=function(e){if(Rl(e),e.data){var a=this._processFlatCoordsArray(e.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(e.data=new Float32Array(a.count))}t.prototype.mergeOption.apply(this,arguments)},a.prototype.appendData=function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=Kt(this._flatCoords,t.flatCoords),this._flatCoordsOffset=Kt(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},a.prototype._getCoordsFromItemModel=function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},a.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},a.prototype.getLineCoords=function(e,t){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[2*e],i=this._flatCoordsOffset[2*e+1],n=0;n<i;n++)t[n]=t[n]||[],t[n][0]=this._flatCoords[a+2*n],t[n][1]=this._flatCoords[a+2*n+1];return i}var o=this._getCoordsFromItemModel(e);for(n=0;n<o.length;n++)t[n]=t[n]||[],t[n][0]=o[n][0],t[n][1]=o[n][1];return o.length},a.prototype._processFlatCoordsArray=function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),Mt(e[0])){for(var a=e.length,i=new Pl(a),n=new El(a),o=0,r=0,s=0,l=0;l<a;){s++;var u=e[l++];i[r++]=o+t,i[r++]=u;for(var d=0;d<u;d++){var c=e[l++],h=e[l++];n[o++]=c,n[o++]=h}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,r),flatCoords:n,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},a.prototype.getInitialData=function(e,t){var a=new l(["value"],this);return a.hasItemOption=!1,a.initData(e.data,[],function(e,t,i,n){if(e instanceof Array)return NaN;a.hasItemOption=!0;var o=e.value;return null!=o?o instanceof Array?o[n]:o:void 0}),a},a.prototype.formatTooltip=function(e,t,a){var i=this.getData().getItemModel(e),n=i.get("name");if(n)return n;var o=i.get("fromName"),r=i.get("toName"),s=[];return null!=o&&s.push(o),null!=r&&s.push(r),Oa("nameValue",{name:s.join(" > ")})},a.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},a.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},a.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},a.prototype.getZLevelKey=function(){var e=this.getModel("effect"),t=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&t>0?t+"":""},a.type="series.lines",a.dependencies=["grid","polar","geo","calendar"],a.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},a}(p);function zl(e){return e instanceof Array||(e=[e,e]),e}var kl={seriesType:"lines",reset:function(e){var t=zl(e.get("symbol")),a=zl(e.get("symbolSize")),i=e.getData();return i.setVisual("fromSymbol",t&&t[0]),i.setVisual("toSymbol",t&&t[1]),i.setVisual("fromSymbolSize",a&&a[0]),i.setVisual("toSymbolSize",a&&a[1]),{dataEach:i.hasItemOption?function(e,t){var a=e.getItemModel(t),i=zl(a.getShallow("symbol",!0)),n=zl(a.getShallow("symbolSize",!0));i[0]&&e.setItemVisual(t,"fromSymbol",i[0]),i[1]&&e.setItemVisual(t,"toSymbol",i[1]),n[0]&&e.setItemVisual(t,"fromSymbolSize",n[0]),n[1]&&e.setItemVisual(t,"toSymbolSize",n[1])}:null}}};function Ol(e){e.registerChartView(Tl),e.registerSeriesModel(Vl),e.registerLayout(Nl),e.registerVisual(kl)}var Gl=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=Pa.createCanvas();this.canvas=e}return e.prototype.update=function(e,t,a,i,n,o){var r=this._getBrush(),s=this._getGradient(n,"inRange"),l=this._getGradient(n,"outOfRange"),u=this.pointSize+this.blurSize,d=this.canvas,c=d.getContext("2d"),h=e.length;d.width=t,d.height=a;for(var p=0;p<h;++p){var g=e[p],f=g[0],y=g[1],m=i(g[2]);c.globalAlpha=m,c.drawImage(r,f-u,y-u)}if(!d.width||!d.height)return d;for(var v=c.getImageData(0,0,d.width,d.height),x=v.data,b=0,S=x.length,_=this.minOpacity,w=this.maxOpacity-_;b<S;){m=x[b+3]/256;var I=4*Math.floor(255*m);if(m>0){var M=o(m)?s:l;m>0&&(m=m*w+_),x[b++]=M[I],x[b++]=M[I+1],x[b++]=M[I+2],x[b++]=M[I+3]*m*256}else b+=4}return c.putImageData(v,0,0),d},e.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=Pa.createCanvas()),t=this.pointSize+this.blurSize,a=2*t;e.width=a,e.height=a;var i=e.getContext("2d");return i.clearRect(0,0,a,a),i.shadowOffsetX=a,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),e},e.prototype._getGradient=function(e,t){for(var a=this._gradientPixels,i=a[t]||(a[t]=new Uint8ClampedArray(1024)),n=[0,0,0,0],o=0,r=0;r<256;r++)e[t](r/255,!0,n),i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],i[o++]=n[3];return i},e}();function Bl(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}var Fl=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a){var i;t.eachComponent("visualMap",function(t){t.eachTargetSeries(function(a){a===e&&(i=t)})}),this._progressiveEls=null,this.group.removeAll();var n=e.coordinateSystem;"cartesian2d"===n.type||"calendar"===n.type?this._renderOnCartesianAndCalendar(e,a,0,e.getData().count()):Bl(n)&&this._renderOnGeo(n,e,i,a)},a.prototype.incrementalPrepareRender=function(e,t,a){this.group.removeAll()},a.prototype.incrementalRender=function(e,t,a,i){var n=t.coordinateSystem;n&&(Bl(n)?this.render(t,a,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(t,i,e.start,e.end,!0)))},a.prototype.eachRendered=function(e){D(this._progressiveEls||this.group,e)},a.prototype._renderOnCartesianAndCalendar=function(e,t,a,i,n){var o,r,s,l,u=e.coordinateSystem,d=O(u,"cartesian2d");if(d){var c=u.getAxis("x"),h=u.getAxis("y");o=c.getBandWidth()+.5,r=h.getBandWidth()+.5,s=c.scale.getExtent(),l=h.scale.getExtent()}for(var p=this.group,g=e.getData(),f=e.getModel(["emphasis","itemStyle"]).getItemStyle(),y=e.getModel(["blur","itemStyle"]).getItemStyle(),m=e.getModel(["select","itemStyle"]).getItemStyle(),v=e.get(["itemStyle","borderRadius"]),x=b(e),S=e.getModel("emphasis"),I=S.get("focus"),M=S.get("blurScope"),L=S.get("disabled"),D=d?[g.mapDimension("x"),g.mapDimension("y"),g.mapDimension("value")]:[g.mapDimension("time"),g.mapDimension("value")],A=a;A<i;A++){var C=void 0,N=g.getItemVisual(A,"style");if(d){var T=g.get(D[0],A),P=g.get(D[1],A);if(isNaN(g.get(D[2],A))||isNaN(T)||isNaN(P)||T<s[0]||T>s[1]||P<l[0]||P>l[1])continue;var E=u.dataToPoint([T,P]);C=new Nt({shape:{x:E[0]-o/2,y:E[1]-r/2,width:o,height:r},style:N})}else{if(isNaN(g.get(D[1],A)))continue;C=new Nt({z2:1,shape:u.dataToRect([g.get(D[0],A)]).contentShape,style:N})}if(g.hasItemOption){var R=g.getItemModel(A),V=R.getModel("emphasis");f=V.getModel("itemStyle").getItemStyle(),y=R.getModel(["blur","itemStyle"]).getItemStyle(),m=R.getModel(["select","itemStyle"]).getItemStyle(),v=R.get(["itemStyle","borderRadius"]),I=V.get("focus"),M=V.get("blurScope"),L=V.get("disabled"),x=b(R)}C.shape.r=v;var z=e.getRawValue(A),k="-";z&&null!=z[2]&&(k=z[2]+""),_(C,x,{labelFetcher:e,labelDataIndex:A,defaultOpacity:N.opacity,defaultText:k}),C.ensureState("emphasis").style=f,C.ensureState("blur").style=y,C.ensureState("select").style=m,w(C,I,M,L),C.incremental=n,n&&(C.states.emphasis.hoverLayer=!0),p.add(C),g.setItemGraphicEl(A,C),this._progressiveEls&&this._progressiveEls.push(C)}},a.prototype._renderOnGeo=function(e,t,a,i){var n=a.targetVisuals.inRange,o=a.targetVisuals.outOfRange,r=t.getData(),s=this._hmLayer||this._hmLayer||new Gl;s.blurSize=t.get("blurSize"),s.pointSize=t.get("pointSize"),s.minOpacity=t.get("minOpacity"),s.maxOpacity=t.get("maxOpacity");var l=e.getViewRect().clone(),u=e.getRoamTransform();l.applyTransform(u);var d=Math.max(l.x,0),c=Math.max(l.y,0),h=Math.min(l.width+l.x,i.getWidth()),p=Math.min(l.height+l.y,i.getHeight()),g=h-d,f=p-c,y=[r.mapDimension("lng"),r.mapDimension("lat"),r.mapDimension("value")],m=r.mapArray(y,function(t,a,i){var n=e.dataToPoint([t,a]);return n[0]-=d,n[1]-=c,n.push(i),n}),v=a.getExtent(),x="visualMap.continuous"===a.type?function(e,t){var a=e[1]-e[0];return t=[(t[0]-e[0])/a,(t[1]-e[0])/a],function(e){return e>=t[0]&&e<=t[1]}}(v,a.option.range):function(e,t,a){var i=e[1]-e[0],n=(t=vt(t,function(t){return{interval:[(t.interval[0]-e[0])/i,(t.interval[1]-e[0])/i]}})).length,o=0;return function(e){var i;for(i=o;i<n;i++)if((r=t[i].interval)[0]<=e&&e<=r[1]){o=i;break}if(i===n)for(i=o-1;i>=0;i--){var r;if((r=t[i].interval)[0]<=e&&e<=r[1]){o=i;break}}return i>=0&&i<n&&a[i]}}(v,a.getPieceList(),a.option.selected);s.update(m,g,f,n.color.getNormalizer(),{inRange:n.color.getColorMapper(),outOfRange:o.color.getColorMapper()},x);var b=new _t({style:{width:g,height:f,x:d,y:c,image:s.canvas},silent:!0});this.group.add(b)},a.type="heatmap",a}(R),Wl=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.getInitialData=function(e,t){return qa(null,this,{generateCoord:"value"})},a.prototype.preventIncremental=function(){var e=u.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},a.type="series.heatmap",a.dependencies=["grid","geo","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},a}(p);function Yl(e){e.registerChartView(Fl),e.registerSeriesModel(Wl)}var Hl=["itemStyle","borderWidth"],Xl=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Ul=new Ut,Zl=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a){var i=this.group,n=e.getData(),o=this._data,r=e.coordinateSystem,s=r.getBaseAxis().isHorizontal(),l=r.master.getRect(),u={ecSize:{width:a.getWidth(),height:a.getHeight()},seriesModel:e,coordSys:r,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:Xl[+s],categoryDim:Xl[1-+s]};n.diff(o).add(function(e){if(n.hasValue(e)){var t=tu(n,e),a=jl(n,e,t,u),o=nu(n,u,a);n.setItemGraphicEl(e,o),i.add(o),uu(o,u,a)}}).update(function(e,t){var a=o.getItemGraphicEl(t);if(n.hasValue(e)){var r=tu(n,e),s=jl(n,e,r,u),l=ru(n,s);a&&l!==a.__pictorialShapeStr&&(i.remove(a),n.setItemGraphicEl(e,null),a=null),a?function(e,t,a){var i=a.animationModel,n=a.dataIndex,o=e.__pictorialBundle;m(o,{x:a.bundlePosition[0],y:a.bundlePosition[1]},i,n),a.symbolRepeat?Jl(e,t,a,!0):Ql(e,t,a,!0);$l(e,a,!0),eu(e,t,a,!0)}(a,u,s):a=nu(n,u,s,!0),n.setItemGraphicEl(e,a),a.__pictorialSymbolMeta=s,i.add(a),uu(a,u,s)}else i.remove(a)}).remove(function(e){var t=o.getItemGraphicEl(e);t&&ou(o,e,t.__pictorialSymbolMeta.animationModel,t)}).execute();var d=e.get("clip",!0)?mi(e.coordinateSystem,!1,e):null;return d?i.setClipPath(d):i.removeClipPath(),this._data=n,this.group},a.prototype.remove=function(e,t){var a=this.group,i=this._data;e.get("animation")?i&&i.eachItemGraphicEl(function(t){ou(i,I(t).dataIndex,e,t)}):a.removeAll()},a.type="pictorialBar",a}(R);function jl(e,t,a,i){var n=e.getItemLayout(t),o=a.get("symbolRepeat"),r=a.get("symbolClip"),s=a.get("symbolPosition")||"start",l=(a.get("symbolRotate")||0)*Math.PI/180||0,u=a.get("symbolPatternSize")||2,d=a.isAnimationEnabled(),c={dataIndex:t,layout:n,itemModel:a,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:r,symbolRepeat:o,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:l,animationModel:d?a:null,hoverScale:d&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};!function(e,t,a,i,n){var o,r=i.valueDim,s=e.get("symbolBoundingData"),l=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),u=l.toGlobalCoord(l.dataToCoord(0)),d=1-+(a[r.wh]<=0);if(bt(s)){var c=[ql(l,s[0])-u,ql(l,s[1])-u];c[1]<c[0]&&c.reverse(),o=c[d]}else o=null!=s?ql(l,s)-u:t?i.coordSysExtent[r.index][d]-u:a[r.wh];n.boundingLength=o,t&&(n.repeatCutLength=a[r.wh]);var h="x"===r.xy,p=l.inverse;n.pxSign=h&&!p||!h&&p?o>=0?1:-1:o>0?1:-1}(a,o,n,i,c),function(e,t,a,i,n,o,r,s,l,u){var d,c=l.valueDim,h=l.categoryDim,p=Math.abs(a[h.wh]),g=e.getItemVisual(t,"symbolSize");d=bt(g)?g.slice():null==g?["100%","100%"]:[g,g];d[h.index]=$(d[h.index],p),d[c.index]=$(d[c.index],i?p:Math.abs(o)),u.symbolSize=d;var f=u.symbolScale=[d[0]/s,d[1]/s];f[c.index]*=(l.isHorizontal?-1:1)*r}(e,t,n,o,0,c.boundingLength,c.pxSign,u,i,c),function(e,t,a,i,n){var o=e.get(Hl)||0;o&&(Ul.attr({scaleX:t[0],scaleY:t[1],rotation:a}),Ul.updateTransform(),o/=Ul.getLineScale(),o*=t[i.valueDim.index]);n.valueLineWidth=o||0}(a,c.symbolScale,l,i,c);var h=c.symbolSize,p=S(a.get("symbolOffset"),h);return function(e,t,a,i,n,o,r,s,l,u,d,c){var h=d.categoryDim,p=d.valueDim,g=c.pxSign,f=Math.max(t[p.index]+s,0),y=f;if(i){var m=Math.abs(l),v=la(e.get("symbolMargin"),"15%")+"",x=!1;v.lastIndexOf("!")===v.length-1&&(x=!0,v=v.slice(0,v.length-1));var b=$(v,t[p.index]),S=Math.max(f+2*b,0),_=x?0:2*b,w=je(i),I=w?i:du((m+_)/S);S=f+2*(b=(m-I*f)/2/(x?I:Math.max(I-1,1))),_=x?0:2*b,w||"fixed"===i||(I=u?du((Math.abs(u)+_)/S):0),y=I*S-_,c.repeatTimes=I,c.symbolMargin=b}var M=g*(y/2),L=c.pathPosition=[];L[h.index]=a[h.wh]/2,L[p.index]="start"===r?M:"end"===r?l-M:l/2,o&&(L[0]+=o[0],L[1]+=o[1]);var D=c.bundlePosition=[];D[h.index]=a[h.xy],D[p.index]=a[p.xy];var A=c.barRectShape=wt({},a);A[p.wh]=g*Math.max(Math.abs(a[p.wh]),Math.abs(L[p.index]+M)),A[h.wh]=a[h.wh];var C=c.clipShape={};C[h.xy]=-a[h.xy],C[h.wh]=d.ecSize[h.wh],C[p.xy]=0,C[p.wh]=a[p.wh]}(a,h,n,o,0,p,s,c.valueLineWidth,c.boundingLength,c.repeatCutLength,i,c),c}function ql(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function Kl(e){var t=e.symbolPatternSize,a=h(e.symbolType,-t/2,-t/2,t,t);return a.attr({culling:!0}),"image"!==a.type&&a.setStyle({strokeNoScale:!0}),a}function Jl(e,t,a,i){var n=e.__pictorialBundle,o=a.symbolSize,r=a.valueLineWidth,s=a.pathPosition,l=t.valueDim,u=a.repeatTimes||0,d=0,c=o[t.valueDim.index]+r+2*a.symbolMargin;for(su(e,function(e){e.__pictorialAnimationIndex=d,e.__pictorialRepeatTimes=u,d<u?lu(e,null,g(d),a,i):lu(e,null,{scaleX:0,scaleY:0},a,i,function(){n.remove(e)}),d++});d<u;d++){var h=Kl(a);h.__pictorialAnimationIndex=d,h.__pictorialRepeatTimes=u,n.add(h);var p=g(d);lu(h,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},a,i)}function g(e){var t=s.slice(),i=a.pxSign,n=e;return("start"===a.symbolRepeatDirection?i>0:i<0)&&(n=u-1-e),t[l.index]=c*(n-u/2+.5)+s[l.index],{x:t[0],y:t[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function Ql(e,t,a,i){var n=e.__pictorialBundle,o=e.__pictorialMainPath;o?lu(o,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,i):(o=e.__pictorialMainPath=Kl(a),n.add(o),lu(o,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,i))}function $l(e,t,a){var i=wt({},t.barRectShape),n=e.__pictorialBarRect;n?lu(n,null,{shape:i},t,a):((n=e.__pictorialBarRect=new Nt({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,e.add(n))}function eu(e,t,a,i){if(a.symbolClip){var n=e.__pictorialClipPath,o=wt({},a.clipShape),r=t.valueDim,s=a.animationModel,l=a.dataIndex;if(n)m(n,{shape:o},s,l);else{o[r.wh]=0,n=new Nt({shape:o}),e.__pictorialBundle.setClipPath(n),e.__pictorialClipPath=n;var u={};u[r.wh]=a.clipShape[r.wh],pe[i?"updateProps":"initProps"](n,{shape:u},s,l)}}}function tu(e,t){var a=e.getItemModel(t);return a.getAnimationDelayParams=au,a.isAnimationEnabled=iu,a}function au(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function iu(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function nu(e,t,a,i){var n=new St,o=new St;return n.add(o),n.__pictorialBundle=o,o.x=a.bundlePosition[0],o.y=a.bundlePosition[1],a.symbolRepeat?Jl(n,t,a):Ql(n,0,a),$l(n,a,i),eu(n,t,a,i),n.__pictorialShapeStr=ru(e,a),n.__pictorialSymbolMeta=a,n}function ou(e,t,a,i){var n=i.__pictorialBarRect;n&&n.removeTextContent();var o=[];su(i,function(e){o.push(e)}),i.__pictorialMainPath&&o.push(i.__pictorialMainPath),i.__pictorialClipPath&&(a=null),xt(o,function(e){M(e,{scaleX:0,scaleY:0},a,t,function(){i.parent&&i.parent.remove(i)})}),e.setItemGraphicEl(t,null)}function ru(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function su(e,t,a){xt(e.__pictorialBundle.children(),function(i){i!==e.__pictorialBarRect&&t.call(a,i)})}function lu(e,t,a,i,n,o){t&&e.attr(t),i.symbolClip&&!n?a&&e.attr(a):a&&pe[n?"updateProps":"initProps"](e,a,i.animationModel,i.dataIndex,o)}function uu(e,t,a){var i=a.dataIndex,n=a.itemModel,o=n.getModel("emphasis"),r=o.getModel("itemStyle").getItemStyle(),s=n.getModel(["blur","itemStyle"]).getItemStyle(),l=n.getModel(["select","itemStyle"]).getItemStyle(),u=n.getShallow("cursor"),d=o.get("focus"),c=o.get("blurScope"),h=o.get("scale");su(e,function(e){if(e instanceof _t){var t=e.style;e.useStyle(wt({image:t.image,x:t.x,y:t.y,width:t.width,height:t.height},a.style))}else e.useStyle(a.style);var i=e.ensureState("emphasis");i.style=r,h&&(i.scaleX=1.1*e.scaleX,i.scaleY=1.1*e.scaleY),e.ensureState("blur").style=s,e.ensureState("select").style=l,u&&(e.cursor=u),e.z2=a.z2});var p=t.valueDim.posDesc[+(a.boundingLength>0)],g=e.__pictorialBarRect;g.ignoreClip=!0,_(g,b(n),{labelFetcher:t.seriesModel,labelDataIndex:i,defaultText:Ja(t.seriesModel.getData(),i),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:p}),w(e,d,c,o.get("disabled"))}function du(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var cu=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return e(a,t),a.prototype.getInitialData=function(e){return e.stack=null,t.prototype.getInitialData.apply(this,arguments)},a.type="series.pictorialBar",a.dependencies=["grid"],a.defaultOption=W(Ti.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),a}(Ti);function hu(e){e.registerChartView(Zl),e.registerSeriesModel(cu),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,mt(q,"pictorialBar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,K("pictorialBar"))}var pu=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e._layers=[],e}return e(a,t),a.prototype.render=function(e,t,a){var i=e.getData(),n=this,o=this.group,r=e.getLayerSeries(),s=i.getLayout("layoutInfo"),l=s.rect,u=s.boundaryGap;function d(e){return e.name}o.x=0,o.y=l.y+u[0];var c=new Ae(this._layersSeries||[],r,d,d),h=[];function p(t,a,s){var l=n._layers;if("remove"!==t){for(var u,d,c=[],p=[],g=r[a].indices,f=0;f<g.length;f++){var y=i.getItemLayout(g[f]),S=y.x,I=y.y0,M=y.y;c.push(S,I),p.push(S,I+M),u=i.getItemVisual(g[f],"style")}var L=i.getItemLayout(g[0]),D=e.getModel("label").get("margin"),A=e.getModel("emphasis");if("add"===t){var C=h[a]=new St;d=new gi({shape:{points:c,stackedOnPoints:p,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),C.add(d),o.add(C),e.isAnimationEnabled()&&d.setClipPath(function(e,t,a){var i=new Nt({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return x(i,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,a),i}(d.getBoundingRect(),e,function(){d.removeClipPath()}))}else{C=l[s];d=C.childAt(0),o.add(C),h[a]=C,m(d,{shape:{points:c,stackedOnPoints:p}},e),v(d)}_(d,b(e),{labelDataIndex:g[f-1],defaultText:i.getName(g[f-1]),inheritColor:u.fill},{normal:{verticalAlign:"middle"}}),d.setTextConfig({position:null,local:!0});var N=d.getTextContent();N&&(N.x=L.x-D,N.y=L.y0+L.y/2),d.useStyle(u),i.setItemGraphicEl(a,d),P(d,e),w(d,A.get("focus"),A.get("blurScope"),A.get("disabled"))}else o.remove(l[a])}c.add(Pt(p,this,"add")).update(Pt(p,this,"update")).remove(Pt(p,this,"remove")).execute(),this._layersSeries=r,this._layers=h},a.type="themeRiver",a}(R);var gu=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new oe(Pt(this.getData,this),Pt(this.getRawData,this))},a.prototype.fixData=function(e){var t=e.length,a={},i=We(e,function(e){return a.hasOwnProperty(e[0]+"")||(a[e[0]+""]=-1),e[2]}),n=[];i.buckets.each(function(e,t){n.push({name:t,dataList:e})});for(var o=n.length,r=0;r<o;++r){for(var s=n[r].name,l=0;l<n[r].dataList.length;++l){var u=n[r].dataList[l][0]+"";a[u]=r}for(var u in a)a.hasOwnProperty(u)&&a[u]!==r&&(a[u]=r,e[t]=[u,0,s],t++)}return e},a.prototype.getInitialData=function(e,t){for(var a=this.getReferringComponents("singleAxis",qe).models[0].get("type"),i=ua(e.data,function(e){return void 0!==e[2]}),n=this.fixData(i||[]),o=[],s=this.nameMap=Zt(),u=0,c=0;c<n.length;++c)o.push(n[c][2]),s.get(n[c][2])||(s.set(n[c][2],u),u++);var h=r(n,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:d(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,p=new l(h,this);return p.initData(n),p},a.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),a=[],i=0;i<t;++i)a[i]=i;var n=e.mapDimension("single"),o=We(a,function(t){return e.get("name",t)}),r=[];return o.buckets.each(function(t,a){t.sort(function(t,a){return e.get(n,t)-e.get(n,a)}),r.push({name:a,indices:t})}),r},a.prototype.getAxisTooltipData=function(e,t,a){bt(e)||(e=e?[e]:[]);for(var i,n=this.getData(),o=this.getLayerSeries(),r=[],s=o.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,d=-1,c=o[l].indices.length,h=0;h<c;++h){var p=n.get(e[0],o[l].indices[h]),g=Math.abs(p-t);g<=u&&(i=p,u=g,d=o[l].indices[h])}r.push(d)}return{dataIndices:r,nestestValue:i}},a.prototype.formatTooltip=function(e,t,a){var i=this.getData(),n=i.getName(e),o=i.get(i.mapDimension("value"),e);return Oa("nameValue",{name:n,value:o})},a.type="series.themeRiver",a.dependencies=["singleAxis"],a.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},a}(p);function fu(e,t){e.eachSeriesByType("themeRiver",function(e){var t=e.getData(),a=e.coordinateSystem,i={},n=a.getRect();i.rect=n;var o=e.get("boundaryGap"),r=a.getAxis();(i.boundaryGap=o,"horizontal"===r.orient)?(o[0]=$(o[0],n.height),o[1]=$(o[1],n.height),yu(t,e,n.height-o[0]-o[1])):(o[0]=$(o[0],n.width),o[1]=$(o[1],n.width),yu(t,e,n.width-o[0]-o[1]));t.setLayout("layoutInfo",i)})}function yu(e,t,a){if(e.count())for(var i,n=t.coordinateSystem,o=t.getLayerSeries(),r=e.mapDimension("single"),s=e.mapDimension("value"),l=vt(o,function(t){return vt(t.indices,function(t){var a=n.dataToPoint(e.get(r,t));return a[1]=e.get(s,t),a})}),u=function(e){for(var t=e.length,a=e[0].length,i=[],n=[],o=0,r=0;r<a;++r){for(var s=0,l=0;l<t;++l)s+=e[l][r][1];s>o&&(o=s),i.push(s)}for(var u=0;u<a;++u)n[u]=(o-i[u])/2;o=0;for(var d=0;d<a;++d){var c=i[d]+n[d];c>o&&(o=c)}return{y0:n,max:o}}(l),d=u.y0,c=a/u.max,h=o.length,p=o[0].indices.length,g=0;g<p;++g){i=d[g]*c,e.setItemLayout(o[0].indices[g],{layerIndex:0,x:l[0][g][0],y0:i,y:l[0][g][1]*c});for(var f=1;f<h;++f)i+=l[f-1][g][1]*c,e.setItemLayout(o[f].indices[g],{layerIndex:f,x:l[f][g][0],y0:i,y:l[f][g][1]*c})}}function mu(e){e.registerChartView(pu),e.registerSeriesModel(gu),e.registerLayout(fu),e.registerProcessor(de("themeRiver"))}var vu=function(t){function a(e,a,i,n){var o=t.call(this)||this;o.z2=2,o.textConfig={inside:!0},I(o).seriesIndex=a.seriesIndex;var r=new Rt({z2:4,silent:e.getModel().get(["label","silent"])});return o.setTextContent(r),o.updateData(!0,e,a,i,n),o}return e(a,t),a.prototype.updateData=function(e,t,a,i,n){this.node=t,t.piece=this,a=a||this._seriesModel,i=i||this._ecModel;var o=this;I(o).dataIndex=t.dataIndex;var r=t.getModel(),s=r.getModel("emphasis"),l=t.getLayout(),u=wt({},l);u.label=null;var d=t.getVisual("style");d.lineJoin="bevel";var c=t.getVisual("decal");c&&(d.decal=Ke(c,n));var h=Ei(r.getModel("itemStyle"),u,!0);wt(u,h),xt(G,function(e){var t=o.ensureState(e),a=r.getModel([e,"itemStyle"]);t.style=a.getItemStyle();var i=Ei(a,u);i&&(t.shape=i)}),e?(o.setShape(u),o.shape.r=l.r0,x(o,{shape:{r:l.r}},a,t.dataIndex)):(m(o,{shape:u},a),v(o)),o.useStyle(d),this._updateLabel(a);var p=r.getShallow("cursor");p&&o.attr("cursor",p),this._seriesModel=a||this._seriesModel,this._ecModel=i||this._ecModel;var g=s.get("focus"),f="relative"===g?Kt(t.getAncestorsIndices(),t.getDescendantIndices()):"ancestor"===g?t.getAncestorsIndices():"descendant"===g?t.getDescendantIndices():g;w(this,f,s.get("blurScope"),s.get("disabled"))},a.prototype._updateLabel=function(e){var t=this,a=this.node.getModel(),i=a.getModel("label"),n=this.node.getLayout(),o=n.endAngle-n.startAngle,r=(n.startAngle+n.endAngle)/2,s=Math.cos(r),l=Math.sin(r),u=this,d=u.getTextContent(),c=this.node.dataIndex,h=i.get("minAngle")/180*Math.PI,p=i.get("show")&&!(null!=h&&Math.abs(o)<h);function g(e,t){var a=e.get(t);return null==a?i.get(t):a}d.ignore=!p,xt(Qe,function(i){var h="normal"===i?a.getModel("label"):a.getModel([i,"label"]),p="normal"===i,f=p?d:d.ensureState(i),y=e.getFormattedLabel(c,i);p&&(y=y||t.node.name),f.style=De(h,{},null,"normal"!==i,!0),y&&(f.style.text=y);var m=h.get("show");null==m||p||(f.ignore=!m);var v,x=g(h,"position"),b=p?u:u.states[i],S=b.style.fill;b.textConfig={outsideFill:"inherit"===h.get("color")?S:null,inside:"outside"!==x};var _=g(h,"distance")||0,w=g(h,"align"),I=g(h,"rotate"),M=.5*Math.PI,L=1.5*Math.PI,D=Ea("tangential"===I?Math.PI/2-r:r),A=D>M&&!Je(D-M)&&D<L;"outside"===x?(v=n.r+_,w=A?"right":"left"):w&&"center"!==w?"left"===w?(v=n.r0+_,w=A?"right":"left"):"right"===w&&(v=n.r-_,w=A?"left":"right"):(v=o===2*Math.PI&&0===n.r0?0:(n.r+n.r0)/2,w="center"),f.style.align=w,f.style.verticalAlign=g(h,"verticalAlign")||"middle",f.x=v*s+n.cx,f.y=v*l+n.cy;var C=0;"radial"===I?C=Ea(-r)+(A?Math.PI:0):"tangential"===I?C=Ea(Math.PI/2-r)+(A?Math.PI:0):Mt(I)&&(C=I*Math.PI/180),f.rotation=Ea(C)}),d.dirtyStyle()},a}(Tt),xu="sunburstRootToNode",bu="sunburstHighlight";var Su=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a,i){var n=this;this.seriesModel=e,this.api=a,this.ecModel=t;var o=e.getData(),r=o.tree.root,s=e.getViewRoot(),l=this.group,u=e.get("renderLabelForZeroData"),d=[];s.eachNode(function(e){d.push(e)});var c,h,p=this._oldChildren||[];!function(i,n){if(0===i.length&&0===n.length)return;function s(e){return e.getId()}function d(s,d){!function(i,n){u||!i||i.getValue()||(i=null);if(i!==r&&n!==r)if(n&&n.piece)i?(n.piece.updateData(!1,i,e,t,a),o.setItemGraphicEl(i.dataIndex,n.piece)):function(e){if(!e)return;e.piece&&(l.remove(e.piece),e.piece=null)}(n);else if(i){var s=new vu(i,e,t,a);l.add(s),o.setItemGraphicEl(i.dataIndex,s)}}(null==s?null:i[s],null==d?null:n[d])}new Ae(n,i,s,s).add(d).update(d).remove(mt(d,null)).execute()}(d,p),c=r,(h=s).depth>0?(n.virtualPiece?n.virtualPiece.updateData(!1,c,e,t,a):(n.virtualPiece=new vu(c,e,t,a),l.add(n.virtualPiece)),h.piece.off("click"),n.virtualPiece.on("click",function(e){n._rootToNode(h.parentNode)})):n.virtualPiece&&(l.remove(n.virtualPiece),n.virtualPiece=null),this._initEvents(),this._oldChildren=d},a.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(t){var a=!1;e.seriesModel.getViewRoot().eachNode(function(i){if(!a&&i.piece&&i.piece===t.target){var n=i.getModel().get("nodeClick");if("rootToNode"===n)e._rootToNode(i);else if("link"===n){var o=i.getModel(),r=o.get("link");if(r){var s=o.get("target",!0)||"_blank";Ne(r,s)}}a=!0}})})},a.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:xu,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},a.prototype.containPoint=function(e,t){var a=t.getData().getItemLayout(0);if(a){var i=e[0]-a.cx,n=e[1]-a.cy,o=Math.sqrt(i*i+n*n);return o<=a.r&&o>=a.r0}},a.type="sunburst",a}(R),_u=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.ignoreStyleOnData=!0,e}return e(a,t),a.prototype.getInitialData=function(e,t){var a={name:e.name,children:e.data};wu(a);var i=this._levelModels=vt(e.levels||[],function(e){return new xe(e,this,t)},this),n=be.createTree(a,this,function(e){e.wrapMethod("getItemModel",function(e,t){var a=n.getNodeByDataIndex(t),o=i[a.depth];return o&&(e.parentModel=o),e})});return n.data},a.prototype.optionUpdated=function(){this.resetViewRoot()},a.prototype.getDataParams=function(e){var a=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return a.treePathInfo=ao(i,this),a},a.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},a.prototype.getViewRoot=function(){return this._viewRoot},a.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},a.prototype.enableAriaDecal=function(){uo(this)},a.type="series.sunburst",a.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},a}(p);function wu(e){var t=0;xt(e.children,function(e){wu(e);var a=e.value;bt(a)&&(a=a[0]),t+=a});var a=e.value;bt(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=t),a<0&&(a=0),bt(e.value)?e.value[0]=a:e.value=a}var Iu=Math.PI/180;function Mu(e,t,a){t.eachSeriesByType(e,function(e){var t=e.get("center"),i=e.get("radius");bt(i)||(i=[0,i]),bt(t)||(t=[t,t]);var n=a.getWidth(),o=a.getHeight(),r=Math.min(n,o),s=$(t[0],n),l=$(t[1],o),u=$(i[0],r/2),d=$(i[1],r/2),c=-e.get("startAngle")*Iu,h=e.get("minAngle")*Iu,p=e.getData().tree.root,g=e.getViewRoot(),f=g.depth,y=e.get("sort");null!=y&&Lu(g,y);var m=0;xt(g.children,function(e){!isNaN(e.getValue())&&m++});var v=g.getValue(),x=Math.PI/(v||m)*2,b=g.depth>0,S=g.height-(b?-1:1),_=(d-u)/(S||1),w=e.get("clockwise"),I=e.get("stillShowZeroSum"),M=w?1:-1,L=function(t,a){if(t){var i=a;if(t!==p){var n=t.getValue(),o=0===v&&I?x:n*x;o<h&&(o=h),i=a+M*o;var d=t.depth-f-(b?-1:1),c=u+_*d,g=u+_*(d+1),y=e.getLevelModel(t);if(y){var m=y.get("r0",!0),S=y.get("r",!0),D=y.get("radius",!0);null!=D&&(m=D[0],S=D[1]),null!=m&&(c=$(m,r/2)),null!=S&&(g=$(S,r/2))}t.setLayout({angle:o,startAngle:a,endAngle:i,clockwise:w,cx:s,cy:l,r0:c,r:g})}if(t.children&&t.children.length){var A=0;xt(t.children,function(e){A+=L(e,a+A)})}return i-a}};if(b){var D=u,A=u+_,C=2*Math.PI;p.setLayout({angle:C,startAngle:c,endAngle:c+C,clockwise:w,cx:s,cy:l,r0:D,r:A})}L(g,c)})}function Lu(e,t){var a=e.children||[];e.children=function(e,t){if(yt(t)){var a=vt(e,function(e,t){var a=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return a}},index:t}});return a.sort(function(e,a){return t(e.params,a.params)}),vt(a,function(t){return e[t.index]})}var i="asc"===t;return e.sort(function(e,t){var a=(e.getValue()-t.getValue())*(i?1:-1);return 0===a?(e.dataIndex-t.dataIndex)*(i?-1:1):a})}(a,t),a.length&&xt(e.children,function(e){Lu(e,t)})}function Du(e){var t={};e.eachSeriesByType("sunburst",function(e){var a=e.getData(),i=a.tree;i.eachNode(function(n){var o=n.getModel().getModel("itemStyle").getItemStyle();o.fill||(o.fill=function(e,a,i){for(var n=e;n&&n.depth>1;)n=n.parentNode;var o=a.getColorFromPalette(n.name||n.dataIndex+"",t);return e.depth>1&&$t(o)&&(o=Ra(o,(e.depth-1)/(i-1)*.5)),o}(n,e,i.root.height));var r=a.ensureUniqueItemVisual(n.dataIndex,"style");wt(r,o)})})}function Au(e){e.registerChartView(Su),e.registerSeriesModel(_u),e.registerLayout(mt(Mu,"sunburst")),e.registerProcessor(mt(de,"sunburst")),e.registerVisual(Du),function(e){e.registerAction({type:xu,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(t,a){var i=$n(e,[xu],t);if(i){var n=t.getViewRoot();n&&(e.direction=to(n,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}})}),e.registerAction({type:bu,update:"none"},function(e,t,a){e=wt({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(t){var a=$n(e,[bu],t);a&&(e.dataIndex=a.node.dataIndex)}),a.dispatchAction(wt(e,{type:"highlight"}))}),e.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(e,t,a){e=wt({},e),a.dispatchAction(wt(e,{type:"downplay"}))})}(e)}var Cu={color:"fill",borderColor:"stroke"},Nu={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Tu=t(),Pu=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},a.prototype.getInitialData=function(e,t){return qa(null,this)},a.prototype.getDataParams=function(e,a,i){var n=t.prototype.getDataParams.call(this,e,a);return i&&(n.info=Tu(i).info),n},a.type="series.custom",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},a}(p),Eu="emphasis",Ru="normal",Vu="blur",zu="select",ku=[Ru,Eu,Vu,zu],Ou={normal:["itemStyle"],emphasis:[Eu,"itemStyle"],blur:[Vu,"itemStyle"],select:[zu,"itemStyle"]},Gu={normal:["label"],emphasis:[Eu,"label"],blur:[Vu,"label"],select:[zu,"label"]},Bu=["x","y"],Fu={normal:{},emphasis:{},blur:{},select:{}},Wu={cartesian2d:nt,geo:it,single:at,polar:tt,calendar:et};function Yu(e){return e instanceof Ct}function Hu(e){return e instanceof oa}var Xu=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.render=function(e,t,a,i){this._progressiveEls=null;var n=this._data,o=e.getData(),r=this.group,s=Ku(e,o,t,a);n||r.removeAll(),o.diff(n).add(function(t){Qu(a,null,t,s(t,i),e,r,o)}).remove(function(t){var a=n.getItemGraphicEl(t);a&&$e(a,Tu(a).option,e)}).update(function(t,l){var u=n.getItemGraphicEl(l);Qu(a,u,t,s(t,i),e,r,o)}).execute();var l=e.get("clip",!0)?mi(e.coordinateSystem,!1,e):null;l?r.setClipPath(l):r.removeClipPath(),this._data=o},a.prototype.incrementalPrepareRender=function(e,t,a){this.group.removeAll(),this._data=null},a.prototype.incrementalRender=function(e,t,a,i,n){var o=t.getData(),r=Ku(t,o,a,i),s=this._progressiveEls=[];function l(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}for(var u=e.start;u<e.end;u++){var d=Qu(null,null,u,r(u,n),t,this.group,o);d&&(d.traverse(l),s.push(d))}},a.prototype.eachRendered=function(e){D(this._progressiveEls||this.group,e)},a.prototype.filterForExposedEvent=function(e,t,a,i){var n=t.element;if(null==n||a.name===n)return!0;for(;(a=a.__hostTarget||a.parent)&&a!==this.group;)if(a.name===n)return!0;return!1},a.type="custom",a}(R);function Uu(e){var t,a=e.type;if("path"===a){var i=e.shape,n=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,o=ld(i);t=ut(o,null,n,i.layout||"center"),Tu(t).customPathData=o}else if("image"===a)t=new _t({}),Tu(t).customImagePath=e.style.image;else if("text"===a)t=new Rt({});else if("group"===a)t=new St;else{if("compoundPath"===a)throw new Error('"compoundPath" is not supported yet.');var r=dt(a);if(!r){Ue("")}t=new r}return Tu(t).customGraphicType=a,t.name=e.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function Zu(e,t,a,i,n,o,r){ct(t);var s=n&&n.normal.cfg;s&&t.setTextConfig(s),i&&null==i.transition&&(i.transition=Bu);var l=i&&i.style;if(l){if("text"===t.type){var u=l;Va(u,"textFill")&&(u.fill=u.textFill),Va(u,"textStroke")&&(u.stroke=u.textStroke)}var d=void 0,c=Yu(t)?l.decal:null;e&&c&&(c.dirty=!0,d=Ke(c,e)),l.__decalPattern=d}Hu(t)&&(l&&(d=l.__decalPattern)&&(l.decal=d));ht(t,i,o,{dataIndex:a,isInit:r,clearStyle:!0}),pt(t,i.keyframeAnimation,o)}function ju(e,t,a,i,n){var o=t.isGroup?null:t,r=n&&n[e].cfg;if(o){var s=o.ensureState(e);if(!1===i){var l=o.getState(e);l&&(l.style=null)}else s.style=i||null;r&&(s.textConfig=r),ve(o)}}function qu(e,t,a){var i=a===Ru,n=i?t:ad(t,a),o=n?n.z2:null;null!=o&&((i?e:e.ensureState(a)).z2=o||0)}function Ku(e,t,a,i){var n=e.get("renderItem"),o=e.coordinateSystem,r={};o&&(r=o.prepareCustoms?o.prepareCustoms(o):Wu[o.type](o));for(var s,l,u=Et({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(e,a){return null==a&&(a=s),t.getStore().get(t.getDimensionIndex(e||0),a)},style:function(a,i){null==i&&(i=s);var n=t.getItemVisual(i,"style"),o=n&&n.fill,r=n&&n.opacity,l=v(i,Ru).getItemStyle();null!=o&&(l.fill=o),null!=r&&(l.opacity=r);var u={inheritColor:$t(o)?o:"#000"},d=x(i,Ru),c=De(d,null,u,!1,!0);c.text=d.getShallow("show")?Ma(e.getFormattedLabel(i,Ru),Ja(t,i)):null;var h=ot(d,u,!1);return S(a,l),l=rt(l,c,h),a&&b(l,a),l.legacy=!0,l},ordinalRawValue:function(e,a){null==a&&(a=s),e=e||0;var i=t.getDimensionInfo(e);if(!i){var n=t.getDimensionIndex(e);return n>=0?t.getStore().get(n,a):void 0}var o=t.get(i.name,a),r=i&&i.ordinalMeta;return r?r.categories[o]:o},styleEmphasis:function(a,i){null==i&&(i=s);var n=v(i,Eu).getItemStyle(),o=x(i,Eu),r=De(o,null,null,!0,!0);r.text=o.getShallow("show")?Ft(e.getFormattedLabel(i,Eu),e.getFormattedLabel(i,Ru),Ja(t,i)):null;var l=ot(o,null,!0);return S(a,n),n=rt(n,r,l),a&&b(n,a),n.legacy=!0,n},visual:function(e,a){if(null==a&&(a=s),Va(Cu,e)){var i=t.getItemVisual(a,"style");return i?i[Cu[e]]:null}if(Va(Nu,e))return t.getItemVisual(a,e)},barLayout:function(e){if("cartesian2d"===o.type){var t=o.getBaseAxis();return st(Et({axis:t},e))}},currentSeriesIndices:function(){return a.getCurrentSeriesIndices()},font:function(e){return lt(e,a)}},r.api||{}),d={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:r.coordSys,dataInsideLength:t.count(),encode:Ju(e.getData())},c={},h={},p={},g={},f=0;f<ku.length;f++){var y=ku[f];p[y]=e.getModel(Ou[y]),g[y]=e.getModel(Gu[y])}function m(e){return e===s?l||(l=t.getItemModel(e)):t.getItemModel(e)}function v(e,a){return t.hasItemOption?e===s?c[a]||(c[a]=m(e).getModel(Ou[a])):m(e).getModel(Ou[a]):p[a]}function x(e,a){return t.hasItemOption?e===s?h[a]||(h[a]=m(e).getModel(Gu[a])):m(e).getModel(Gu[a]):g[a]}return function(e,a){return s=e,l=null,c={},h={},n&&n(Et({dataIndexInside:e,dataIndex:t.getRawIndex(e),actionType:a?a.type:null},d),u)};function b(e,t){for(var a in t)Va(t,a)&&(e[a]=t[a])}function S(e,t){e&&(e.textFill&&(t.textFill=e.textFill),e.textPosition&&(t.textPosition=e.textPosition))}}function Ju(e){var t={};return xt(e.dimensions,function(a){var i=e.getDimensionInfo(a);if(!i.isExtraCoord){var n=i.coordDim;(t[n]=t[n]||[])[i.coordDimIndex]=e.getDimensionIndex(a)}}),t}function Qu(e,t,a,i,n,o,r){if(i){var s=$u(e,t,a,i,n,o);return s&&r.setItemGraphicEl(a,s),s&&w(s,i.focus,i.blurScope,i.emphasisDisabled),s}o.remove(t)}function $u(e,t,a,i,n,o){var r=-1,s=t;t&&ed(t,i,n)&&(r=Qt(o.childrenRef(),t),t=null);var l,u,d=!t,c=t;c?c.clearStates():(c=Uu(i),s&&(l=s,(u=c).copyTransform(l),Hu(u)&&Hu(l)&&(u.setStyle(l.style),u.z=l.z,u.z2=l.z2,u.zlevel=l.zlevel,u.invisible=l.invisible,u.ignore=l.ignore,Yu(u)&&Yu(l)&&u.setShape(l.shape)))),!1===i.morph?c.disableMorphing=!0:c.disableMorphing&&(c.disableMorphing=!1),Fu.normal.cfg=Fu.normal.conOpt=Fu.emphasis.cfg=Fu.emphasis.conOpt=Fu.blur.cfg=Fu.blur.conOpt=Fu.select.cfg=Fu.select.conOpt=null,Fu.isLegacy=!1,function(e,t,a,i,n,o){if(e.isGroup)return;td(a,null,o),td(a,Eu,o);var r=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(null!=r||null!=s||null!=u||null!=l){var d=e.getTextContent();if(!1===r)d&&e.removeTextContent();else{r=o.normal.conOpt=r||{type:"text"},d?d.clearStates():(d=Uu(r),e.setTextContent(d)),Zu(null,d,t,r,null,i,n);for(var c=r&&r.style,h=0;h<ku.length;h++){var p=ku[h];if(p!==Ru){var g=o[p].conOpt;ju(p,d,0,id(r,g,p),null)}}c?d.dirty():d.markRedraw()}}}(c,a,i,n,d,Fu),function(e,t,a,i,n){var o=a.clipPath;if(!1===o)e&&e.getClipPath()&&e.removeClipPath();else if(o){var r=e.getClipPath();r&&ed(r,o,i)&&(r=null),r||(r=Uu(o),e.setClipPath(r)),Zu(null,r,t,o,null,i,n)}}(c,a,i,n,d),Zu(e,c,a,i,Fu,n,d),Va(i,"info")&&(Tu(c).info=i.info);for(var h=0;h<ku.length;h++){var p=ku[h];if(p!==Ru){var g=ad(i,p);ju(p,c,0,id(i,g,p),Fu)}}return function(e,t,a){if(!e.isGroup){var i=e,n=a.currentZ,o=a.currentZLevel;i.z=n,i.zlevel=o;var r=t.z2;null!=r&&(i.z2=r||0);for(var s=0;s<ku.length;s++)qu(i,t,ku[s])}}(c,i,n),"group"===i.type&&function(e,t,a,i,n){var o=i.children,r=o?o.length:0,s=i.$mergeChildren,l="byName"===s||i.diffChildrenByName,u=!1===s;if(!r&&!l&&!u)return;if(l)return d={api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:a,seriesModel:n,group:t},void new Ae(d.oldChildren,d.newChildren,od,od,d).add(rd).update(rd).remove(sd).execute();var d;u&&t.removeAll();for(var c=0;c<r;c++){var h=o[c],p=t.childAt(c);h?(null==h.ignore&&(h.ignore=!1),$u(e,p,a,h,n,t)):p.ignore=!0}for(var g=t.childCount()-1;g>=c;g--){var f=t.childAt(g);nd(t,f,n)}}(e,c,a,i,n),r>=0?o.replaceAt(c,r):o.add(c),c}function ed(e,t,a){var i,n=Tu(e),o=t.type,r=t.shape,s=t.style;return a.isUniversalTransitionEnabled()||null!=o&&o!==n.customGraphicType||"path"===o&&((i=r)&&(Va(i,"pathData")||Va(i,"d")))&&ld(r)!==n.customPathData||"image"===o&&Va(s,"image")&&s.image!==n.customImagePath}function td(e,t,a){var i=t?ad(e,t):e,n=t?id(e,i,Eu):e.style,o=e.type,r=i?i.textConfig:null,s=e.textContent,l=s?t?ad(s,t):s:null;if(n&&(a.isLegacy||gt(n,o,!!r,!!l))){a.isLegacy=!0;var u=ft(n,o,!t);!r&&u.textConfig&&(r=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var d=l;!d.type&&(d.type="text")}var c=t?a[t]:a.normal;c.cfg=r,c.conOpt=l}function ad(e,t){return t?e?e[t]:null:e}function id(e,t,a){var i=t&&t.style;return null==i&&a===Eu&&e&&(i=e.styleEmphasis),i}function nd(e,t,a){t&&$e(t,Tu(e).option,a)}function od(e,t){var a=e&&e.name;return null!=a?a:"e\0\0"+t}function rd(e,t){var a=this.context,i=null!=e?a.newChildren[e]:null,n=null!=t?a.oldChildren[t]:null;$u(a.api,n,a.dataIndex,i,a.seriesModel,a.group)}function sd(e){var t=this.context,a=t.oldChildren[e];a&&$e(a,Tu(a).option,t.seriesModel)}function ld(e){return e&&(e.pathData||e.d)}function ud(e){e.registerChartView(Xu),e.registerSeriesModel(Pu)}export{Nr as L,ni as S,Qi as a,yn as b,ja as c,_n as d,Cn as e,Rn as f,so as g,Zo as h,Ni as i,Zr as j,$r as k,os as l,ys as m,Vs as n,Zs as o,vl as p,wl as q,Ol as r,Yl as s,hu as t,mu as u,Au as v,ud as w};
//# sourceMappingURL=echarts-charts-BwTN3nNH.js.map
