{"version":3,"file":"echarts-components-qRndAGwt.js","sources":["../../../node_modules/echarts/lib/component/tooltip/tooltipMarkup.js","../../../node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js","../../../node_modules/echarts/lib/component/axis/AxisBuilder.js","../../../node_modules/echarts/lib/component/axisPointer/modelHelper.js","../../../node_modules/echarts/lib/component/axis/AxisView.js","../../../node_modules/echarts/lib/component/axis/axisSplitHelper.js","../../../node_modules/echarts/lib/component/axis/CartesianAxisView.js","../../../node_modules/echarts/lib/component/grid/installSimple.js","../../../node_modules/echarts/lib/component/radar/RadarView.js","../../../node_modules/echarts/lib/component/radar/install.js","../../../node_modules/echarts/lib/component/helper/interactionMutex.js","../../../node_modules/echarts/lib/component/helper/RoamController.js","../../../node_modules/echarts/lib/component/helper/roamHelper.js","../../../node_modules/echarts/lib/component/helper/cursorHelper.js","../../../node_modules/echarts/lib/component/helper/MapDraw.js","../../../node_modules/echarts/lib/component/geo/GeoView.js","../../../node_modules/echarts/lib/component/geo/install.js","../../../node_modules/echarts/lib/component/parallel/ParallelView.js","../../../node_modules/echarts/lib/component/helper/sliderMove.js","../../../node_modules/echarts/lib/component/helper/BrushController.js","../../../node_modules/echarts/lib/component/helper/brushHelper.js","../../../node_modules/echarts/lib/component/axis/ParallelAxisView.js","../../../node_modules/echarts/lib/component/axis/parallelAxisAction.js","../../../node_modules/echarts/lib/component/parallel/install.js","../../../node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","../../../node_modules/echarts/lib/component/axisPointer/viewHelper.js","../../../node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","../../../node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","../../../node_modules/echarts/lib/component/axisPointer/globalListener.js","../../../node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","../../../node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","../../../node_modules/echarts/lib/component/axisPointer/axisTrigger.js","../../../node_modules/echarts/lib/component/axisPointer/install.js","../../../node_modules/echarts/lib/component/grid/install.js","../../../node_modules/echarts/lib/component/axisPointer/PolarAxisPointer.js","../../../node_modules/echarts/lib/component/axis/AngleAxisView.js","../../../node_modules/echarts/lib/component/axis/RadiusAxisView.js","../../../node_modules/echarts/lib/component/polar/install.js","../../../node_modules/echarts/lib/component/axis/SingleAxisView.js","../../../node_modules/echarts/lib/component/axisPointer/SingleAxisPointer.js","../../../node_modules/echarts/lib/component/singleAxis/install.js","../../../node_modules/echarts/lib/component/calendar/CalendarView.js","../../../node_modules/echarts/lib/component/calendar/install.js","../../../node_modules/echarts/lib/component/graphic/GraphicModel.js","../../../node_modules/echarts/lib/component/graphic/GraphicView.js","../../../node_modules/echarts/lib/component/graphic/install.js","../../../node_modules/echarts/lib/component/dataZoom/helper.js","../../../node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","../../../node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","../../../node_modules/echarts/lib/component/dataZoom/DataZoomView.js","../../../node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","../../../node_modules/echarts/lib/component/dataZoom/AxisProxy.js","../../../node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","../../../node_modules/echarts/lib/component/dataZoom/installCommon.js","../../../node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","../../../node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","../../../node_modules/echarts/lib/component/toolbox/featureManager.js","../../../node_modules/echarts/lib/component/toolbox/ToolboxModel.js","../../../node_modules/echarts/lib/component/helper/listComponent.js","../../../node_modules/echarts/lib/component/toolbox/ToolboxView.js","../../../node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","../../../node_modules/echarts/lib/component/toolbox/feature/MagicType.js","../../../node_modules/echarts/lib/component/toolbox/feature/DataView.js","../../../node_modules/echarts/lib/component/dataZoom/history.js","../../../node_modules/echarts/lib/component/toolbox/feature/Restore.js","../../../node_modules/echarts/lib/component/helper/BrushTargetManager.js","../../../node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","../../../node_modules/echarts/lib/component/toolbox/install.js","../../../node_modules/echarts/lib/component/tooltip/TooltipModel.js","../../../node_modules/echarts/lib/component/tooltip/helper.js","../../../node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","../../../node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","../../../node_modules/echarts/lib/component/tooltip/TooltipView.js","../../../node_modules/echarts/lib/component/tooltip/install.js","../../../node_modules/echarts/lib/component/brush/preprocessor.js","../../../node_modules/echarts/lib/component/brush/selector.js","../../../node_modules/echarts/lib/component/brush/visualEncoding.js","../../../node_modules/echarts/lib/component/brush/BrushView.js","../../../node_modules/echarts/lib/component/brush/BrushModel.js","../../../node_modules/echarts/lib/component/toolbox/feature/Brush.js","../../../node_modules/echarts/lib/component/brush/install.js","../../../node_modules/echarts/lib/component/title/install.js","../../../node_modules/echarts/lib/component/timeline/TimelineModel.js","../../../node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","../../../node_modules/echarts/lib/component/timeline/TimelineView.js","../../../node_modules/echarts/lib/component/timeline/TimelineAxis.js","../../../node_modules/echarts/lib/component/timeline/SliderTimelineView.js","../../../node_modules/echarts/lib/component/timeline/preprocessor.js","../../../node_modules/echarts/lib/component/timeline/install.js","../../../node_modules/echarts/lib/component/timeline/timelineAction.js","../../../node_modules/echarts/lib/component/marker/checkMarkerInSeries.js","../../../node_modules/echarts/lib/component/marker/MarkerModel.js","../../../node_modules/echarts/lib/component/marker/MarkPointModel.js","../../../node_modules/echarts/lib/component/marker/markerHelper.js","../../../node_modules/echarts/lib/component/marker/MarkerView.js","../../../node_modules/echarts/lib/component/marker/MarkPointView.js","../../../node_modules/echarts/lib/component/marker/installMarkPoint.js","../../../node_modules/echarts/lib/component/marker/MarkLineModel.js","../../../node_modules/echarts/lib/component/marker/MarkLineView.js","../../../node_modules/echarts/lib/component/marker/installMarkLine.js","../../../node_modules/echarts/lib/component/marker/MarkAreaModel.js","../../../node_modules/echarts/lib/component/marker/MarkAreaView.js","../../../node_modules/echarts/lib/component/marker/installMarkArea.js","../../../node_modules/echarts/lib/component/legend/LegendModel.js","../../../node_modules/echarts/lib/component/legend/LegendView.js","../../../node_modules/echarts/lib/component/legend/legendFilter.js","../../../node_modules/echarts/lib/component/legend/legendAction.js","../../../node_modules/echarts/lib/component/legend/installLegendPlain.js","../../../node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","../../../node_modules/echarts/lib/component/legend/ScrollableLegendView.js","../../../node_modules/echarts/lib/component/legend/installLegendScroll.js","../../../node_modules/echarts/lib/component/legend/scrollableLegendAction.js","../../../node_modules/echarts/lib/component/legend/install.js","../../../node_modules/echarts/lib/component/dataZoom/InsideZoomModel.js","../../../node_modules/echarts/lib/component/dataZoom/roams.js","../../../node_modules/echarts/lib/component/dataZoom/InsideZoomView.js","../../../node_modules/echarts/lib/component/dataZoom/installDataZoomInside.js","../../../node_modules/echarts/lib/component/dataZoom/SliderZoomModel.js","../../../node_modules/echarts/lib/component/dataZoom/SliderZoomView.js","../../../node_modules/echarts/lib/component/dataZoom/installDataZoomSlider.js","../../../node_modules/echarts/lib/component/dataZoom/install.js","../../../node_modules/echarts/lib/component/visualMap/VisualMapModel.js","../../../node_modules/echarts/lib/component/visualMap/ContinuousModel.js","../../../node_modules/echarts/lib/component/visualMap/VisualMapView.js","../../../node_modules/echarts/lib/component/visualMap/helper.js","../../../node_modules/echarts/lib/component/visualMap/ContinuousView.js","../../../node_modules/echarts/lib/component/visualMap/visualMapAction.js","../../../node_modules/echarts/lib/component/visualMap/visualEncoding.js","../../../node_modules/echarts/lib/component/visualMap/preprocessor.js","../../../node_modules/echarts/lib/component/visualMap/installCommon.js","../../../node_modules/echarts/lib/component/visualMap/installVisualMapContinuous.js","../../../node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","../../../node_modules/echarts/lib/component/visualMap/PiecewiseView.js","../../../node_modules/echarts/lib/component/visualMap/installVisualMapPiecewise.js","../../../node_modules/echarts/lib/component/visualMap/install.js","../../../node_modules/echarts/lib/component/aria/preprocessor.js","../../../node_modules/echarts/lib/component/aria/install.js","../../../node_modules/echarts/lib/component/transform/filterTransform.js","../../../node_modules/echarts/lib/component/transform/sortTransform.js","../../../node_modules/echarts/lib/component/transform/install.js","../../../node_modules/echarts/lib/component/dataset/install.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getTooltipMarker, encodeHTML, makeValueReadable, convertToColorString } from '../../util/format.js';\nimport { isString, each, hasOwn, isArray, map, assert, extend } from 'zrender/lib/core/util.js';\nimport { SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nimport { getRandomIdBase } from '../../util/number.js';\nvar TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1';\nfunction getTooltipLineHeight(textStyle) {\n  var lineHeight = textStyle.lineHeight;\n  if (lineHeight == null) {\n    return TOOLTIP_LINE_HEIGHT_CSS;\n  } else {\n    return \"line-height:\" + encodeHTML(lineHeight + '') + \"px\";\n  }\n}\n// TODO: more textStyle option\nfunction getTooltipTextStyle(textStyle, renderMode) {\n  var nameFontColor = textStyle.color || '#6e7079';\n  var nameFontSize = textStyle.fontSize || 12;\n  var nameFontWeight = textStyle.fontWeight || '400';\n  var valueFontColor = textStyle.color || '#464646';\n  var valueFontSize = textStyle.fontSize || 14;\n  var valueFontWeight = textStyle.fontWeight || '900';\n  if (renderMode === 'html') {\n    // `textStyle` is probably from user input, should be encoded to reduce security risk.\n    return {\n      // eslint-disable-next-line max-len\n      nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n      // eslint-disable-next-line max-len\n      valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n    };\n  } else {\n    return {\n      nameStyle: {\n        fontSize: nameFontSize,\n        fill: nameFontColor,\n        fontWeight: nameFontWeight\n      },\n      valueStyle: {\n        fontSize: valueFontSize,\n        fill: valueFontColor,\n        fontWeight: valueFontWeight\n      }\n    };\n  }\n}\n// See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n// (value from UI design)\nvar HTML_GAPS = [0, 10, 20, 30];\nvar RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n'];\n// eslint-disable-next-line max-len\nexport function createTooltipMarkup(type, option) {\n  option.type = type;\n  return option;\n}\nfunction isSectionFragment(frag) {\n  return frag.type === 'section';\n}\nfunction getBuilder(frag) {\n  return isSectionFragment(frag) ? buildSection : buildNameValue;\n}\nfunction getBlockGapLevel(frag) {\n  if (isSectionFragment(frag)) {\n    var gapLevel_1 = 0;\n    var subBlockLen = frag.blocks.length;\n    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n    each(frag.blocks, function (subBlock) {\n      var subGapLevel = getBlockGapLevel(subBlock);\n      // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n      // should use a larger gap (like 20px) to distinguish those sub-blocks.\n      if (subGapLevel >= gapLevel_1) {\n        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && (\n        // 0 always can not be readable gap level.\n        !subGapLevel\n        // If no header, always keep the sub gap level. Otherwise\n        // look weird in case `multipleSeries`.\n        || isSectionFragment(subBlock) && !subBlock.noHeader));\n      }\n    });\n    return gapLevel_1;\n  }\n  return 0;\n}\nfunction buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var noHeader = fragment.noHeader;\n  var gaps = getGap(getBlockGapLevel(fragment));\n  var subMarkupTextList = [];\n  var subBlocks = fragment.blocks || [];\n  assert(!subBlocks || isArray(subBlocks));\n  subBlocks = subBlocks || [];\n  var orderMode = ctx.orderMode;\n  if (fragment.sortBlocks && orderMode) {\n    subBlocks = subBlocks.slice();\n    var orderMap = {\n      valueAsc: 'asc',\n      valueDesc: 'desc'\n    };\n    if (hasOwn(orderMap, orderMode)) {\n      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n      subBlocks.sort(function (a, b) {\n        return comparator_1.evaluate(a.sortParam, b.sortParam);\n      });\n    }\n    // FIXME 'seriesDesc' necessary?\n    else if (orderMode === 'seriesDesc') {\n      subBlocks.reverse();\n    }\n  }\n  each(subBlocks, function (subBlock, idx) {\n    var valueFormatter = fragment.valueFormatter;\n    var subMarkupText = getBuilder(subBlock)(\n    // Inherit valueFormatter\n    valueFormatter ? extend(extend({}, ctx), {\n      valueFormatter: valueFormatter\n    }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n    subMarkupText != null && subMarkupTextList.push(subMarkupText);\n  });\n  var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(toolTipTextStyle, subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n  if (noHeader) {\n    return subMarkupText;\n  }\n  var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n  var tooltipLineHeight = getTooltipLineHeight(toolTipTextStyle);\n  if (ctx.renderMode === 'richText') {\n    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n  } else {\n    return wrapBlockHTML(toolTipTextStyle, \"<div style=\\\"\" + nameStyle + \";\" + tooltipLineHeight + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n  }\n}\nfunction buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var renderMode = ctx.renderMode;\n  var noName = fragment.noName;\n  var noValue = fragment.noValue;\n  var noMarker = !fragment.markerType;\n  var name = fragment.name;\n  var useUTC = ctx.useUTC;\n  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n    value = isArray(value) ? value : [value];\n    return map(value, function (val, idx) {\n      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n    });\n  };\n  if (noName && noValue) {\n    return;\n  }\n  var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || '#333', renderMode);\n  var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n  var valueTypeOption = fragment.valueType;\n  var readableValueList = noValue ? [] : valueFormatter(fragment.value, fragment.dataIndex);\n  var valueAlignRight = !noMarker || !noName;\n  // It little weird if only value next to marker but far from marker.\n  var valueCloseToMarker = !noMarker && noName;\n  var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n    nameStyle = _a.nameStyle,\n    valueStyle = _a.valueStyle;\n  return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle))\n  // Value has commas inside, so use ' ' as delimiter for multiple values.\n  + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML(toolTipTextStyle, (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n}\n/**\r\n * @return markupText. null/undefined means no content.\r\n */\nexport function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n  if (!fragment) {\n    return;\n  }\n  var builder = getBuilder(fragment);\n  var ctx = {\n    useUTC: useUTC,\n    renderMode: renderMode,\n    orderMode: orderMode,\n    markupStyleCreator: markupStyleCreator,\n    valueFormatter: fragment.valueFormatter\n  };\n  return builder(ctx, fragment, 0, toolTipTextStyle);\n}\nfunction getGap(gapLevel) {\n  return {\n    html: HTML_GAPS[gapLevel],\n    richText: RICH_TEXT_GAPS[gapLevel]\n  };\n}\nfunction wrapBlockHTML(textStyle, encodedContent, topGap) {\n  var clearfix = '<div style=\"clear:both\"></div>';\n  var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n  var tooltipLineHeight = getTooltipLineHeight(textStyle);\n  return \"<div style=\\\"\" + marginCSS + \";\" + tooltipLineHeight + \";\\\">\" + encodedContent + clearfix + '</div>';\n}\nfunction wrapInlineNameHTML(name, leftHasMarker, style) {\n  var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n  return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n}\nfunction wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n  // Do not too close to marker, considering there are multiple values separated by spaces.\n  var paddingStr = valueCloseToMarker ? '10px' : '20px';\n  var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n  valueList = isArray(valueList) ? valueList : [valueList];\n  return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\"\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  + map(valueList, function (value) {\n    return encodeHTML(value);\n  }).join('&nbsp;&nbsp;') + '</span>';\n}\nfunction wrapInlineNameRichText(ctx, name, style) {\n  return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n}\nfunction wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n  var styles = [style];\n  var paddingLeft = valueCloseToMarker ? 10 : 20;\n  alignRight && styles.push({\n    padding: [0, 0, 0, paddingLeft],\n    align: 'right'\n  });\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n}\nexport function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n  var style = series.getData().getItemVisual(dataIndex, 'style');\n  var color = style[series.visualDrawType];\n  return convertToColorString(color);\n}\nexport function getPaddingFromTooltipModel(model, renderMode) {\n  var padding = model.get('padding');\n  return padding != null ? padding\n  // We give slightly different to look pretty.\n  : renderMode === 'richText' ? [8, 10] : 10;\n}\n/**\r\n * The major feature is generate styles for `renderMode: 'richText'`.\r\n * But it also serves `renderMode: 'html'` to provide\r\n * \"renderMode-independent\" API.\r\n */\nvar TooltipMarkupStyleCreator = /** @class */function () {\n  function TooltipMarkupStyleCreator() {\n    this.richTextStyles = {};\n    // Notice that \"generate a style name\" usually happens repeatedly when mouse is moving and\n    // a tooltip is displayed. So we put the `_nextStyleNameId` as a member of each creator\n    // rather than static shared by all creators (which will cause it increase to fast).\n    this._nextStyleNameId = getRandomIdBase();\n  }\n  TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n    return '__EC_aUTo_' + this._nextStyleNameId++;\n  };\n  TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n    var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n    var marker = getTooltipMarker({\n      color: colorStr,\n      type: markerType,\n      renderMode: renderMode,\n      markerId: markerId\n    });\n    if (isString(marker)) {\n      return marker;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(markerId);\n      }\n      this.richTextStyles[markerId] = marker.style;\n      return marker.content;\n    }\n  };\n  /**\r\n   * @usage\r\n   * ```ts\r\n   * const styledText = markupStyleCreator.wrapRichTextStyle([\r\n   *     // The styles will be auto merged.\r\n   *     {\r\n   *         fontSize: 12,\r\n   *         color: 'blue'\r\n   *     },\r\n   *     {\r\n   *         padding: 20\r\n   *     }\r\n   * ]);\r\n   * ```\r\n   */\n  TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n    var finalStl = {};\n    if (isArray(styles)) {\n      each(styles, function (stl) {\n        return extend(finalStl, stl);\n      });\n    } else {\n      extend(finalStl, styles);\n    }\n    var styleName = this._generateStyleName();\n    this.richTextStyles[styleName] = finalStl;\n    return \"{\" + styleName + \"|\" + text + \"}\";\n  };\n  return TooltipMarkupStyleCreator;\n}();\nexport { TooltipMarkupStyleCreator };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isNameSpecified } from '../../util/model.js';\nexport function defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = isArray(value);\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex);\n  // Complicated rule for pretty tooltip.\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks;\n    // Only support tooltip sort by the first inline value. It's enough in most cases.\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  }\n  // Do not show generated series name. It might not be readable.\n  var seriesNameSpecified = isNameSpecified(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return createTooltipMarkup('section', {\n    header: seriesName,\n    // When series name is not specified, do not show a header line with only '-'.\n    // This case always happens in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [createTooltipMarkup('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !trim(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType,\n      dataIndex: dataIndex\n    })].concat(subBlocks || [])\n  });\n}\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? each(tooltipDims, function (dim) {\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n  })\n  // By default, all dims is used on tooltip.\n  : each(value, setEachItem);\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim);\n    // If `dimInfo.tooltip` is not set, show tooltip.\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n    if (isValueMultipleLine) {\n      blocks.push(createTooltipMarkup('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { retrieve, defaults, extend, each, isObject, map, isString, isNumber, isFunction, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport Model from '../../model/Model.js';\nimport { isRadianAroundZero, remRadian } from '../../util/number.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport * as matrixUtil from 'zrender/lib/core/matrix.js';\nimport { applyTransform as v2ApplyTransform } from 'zrender/lib/core/vector.js';\nimport { shouldShowAllLabels } from '../../coord/axisHelper.js';\nimport { prepareLayoutList, hideOverlap } from '../../label/labelLayoutHelper.js';\nvar PI = Math.PI;\n/**\r\n * A final axis is translated and rotated from a \"standard axis\".\r\n * So opt.position and opt.rotation is required.\r\n *\r\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\r\n * for example: (0, 0) ------------> (0, 50)\r\n *\r\n * nameDirection or tickDirection or labelDirection is 1 means tick\r\n * or label is below the standard axis, whereas is -1 means above\r\n * the standard axis. labelOffset means offset between label and axis,\r\n * which is useful when 'onZero', where axisLabel is in the grid and\r\n * label in outside grid.\r\n *\r\n * Tips: like always,\r\n * positive rotation represents anticlockwise, and negative rotation\r\n * represents clockwise.\r\n * The direction of position coordinate is the same as the direction\r\n * of screen coordinate.\r\n *\r\n * Do not need to consider axis 'inverse', which is auto processed by\r\n * axis extent.\r\n */\nvar AxisBuilder = /** @class */function () {\n  function AxisBuilder(axisModel, opt) {\n    this.group = new graphic.Group();\n    this.opt = opt;\n    this.axisModel = axisModel;\n    // Default value\n    defaults(opt, {\n      labelOffset: 0,\n      nameDirection: 1,\n      tickDirection: 1,\n      labelDirection: 1,\n      silent: true,\n      handleAutoShown: function () {\n        return true;\n      }\n    });\n    // FIXME Not use a separate text group?\n    var transformGroup = new graphic.Group({\n      x: opt.position[0],\n      y: opt.position[1],\n      rotation: opt.rotation\n    });\n    // this.group.add(transformGroup);\n    // this._transformGroup = transformGroup;\n    transformGroup.updateTransform();\n    this._transformGroup = transformGroup;\n  }\n  AxisBuilder.prototype.hasBuilder = function (name) {\n    return !!builders[name];\n  };\n  AxisBuilder.prototype.add = function (name) {\n    builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\n  };\n  AxisBuilder.prototype.getGroup = function () {\n    return this.group;\n  };\n  AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n    var rotationDiff = remRadian(textRotation - axisRotation);\n    var textAlign;\n    var textVerticalAlign;\n    if (isRadianAroundZero(rotationDiff)) {\n      // Label is parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI)) {\n      // Label is inverse parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n      if (rotationDiff > 0 && rotationDiff < PI) {\n        textAlign = direction > 0 ? 'right' : 'left';\n      } else {\n        textAlign = direction > 0 ? 'left' : 'right';\n      }\n    }\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  };\n  AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n    var eventData = {\n      componentType: axisModel.mainType,\n      componentIndex: axisModel.componentIndex\n    };\n    eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n    return eventData;\n  };\n  AxisBuilder.isLabelSilent = function (axisModel) {\n    var tooltipOpt = axisModel.get('tooltip');\n    return axisModel.get('silent')\n    // Consider mouse cursor, add these restrictions.\n    || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n  };\n  return AxisBuilder;\n}();\n;\nvar builders = {\n  axisLine: function (opt, axisModel, group, transformGroup) {\n    var shown = axisModel.get(['axisLine', 'show']);\n    if (shown === 'auto' && opt.handleAutoShown) {\n      shown = opt.handleAutoShown('axisLine');\n    }\n    if (!shown) {\n      return;\n    }\n    var extent = axisModel.axis.getExtent();\n    var matrix = transformGroup.transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n    var inverse = pt1[0] > pt2[0];\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n    var line = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    });\n    graphic.subPixelOptimizeLine(line.shape, line.style.lineWidth);\n    line.anid = 'line';\n    group.add(line);\n    var arrows = axisModel.get(['axisLine', 'symbol']);\n    if (arrows != null) {\n      var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n      if (isString(arrows)) {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n      if (isString(arrowSize) || isNumber(arrowSize)) {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n      var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n      var symbolWidth_1 = arrowSize[0];\n      var symbolHeight_1 = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true);\n          // Calculate arrow position with offset\n          var r = point.r + point.offset;\n          var pt = inverse ? pt2 : pt1;\n          symbol.attr({\n            rotation: point.rotate,\n            x: pt[0] + r * Math.cos(opt.rotation),\n            y: pt[1] - r * Math.sin(opt.rotation),\n            silent: true,\n            z2: 11\n          });\n          group.add(symbol);\n        }\n      });\n    }\n  },\n  axisTickLabel: function (opt, axisModel, group, transformGroup) {\n    var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\n    var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection);\n    // This bit fixes the label overlap issue for the time chart.\n    // See https://github.com/apache/echarts/issues/14266 for more.\n    if (axisModel.get(['axisLabel', 'hideOverlap'])) {\n      var labelList = prepareLayoutList(map(labelEls, function (label) {\n        return {\n          label: label,\n          priority: label.z2,\n          defaultAttr: {\n            ignore: label.ignore\n          }\n        };\n      }));\n      hideOverlap(labelList);\n    }\n  },\n  axisName: function (opt, axisModel, group, transformGroup) {\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n    if (!name) {\n      return;\n    }\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2,\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n    var axisNameAvailableWidth;\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation,\n      // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n    var textEl = new graphic.Text({\n      x: pos[0],\n      y: pos[1],\n      rotation: labelLayout.rotation,\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      style: createTextStyle(textStyleModel, {\n        text: name,\n        font: textFont,\n        overflow: 'truncate',\n        width: maxWidth,\n        ellipsis: ellipsis,\n        fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n        align: textStyleModel.get('align') || labelLayout.textAlign,\n        verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n      }),\n      z2: 1\n    });\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: name\n    });\n    textEl.__fullText = name;\n    // Id for animation\n    textEl.anid = 'name';\n    if (axisModel.get('triggerEvent')) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisName';\n      eventData.name = name;\n      getECData(textEl).eventData = eventData;\n    }\n    // FIXME\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\nfunction endTextLayout(rotation, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  }\n  // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n  var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n  var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']);\n  // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\nfunction isTwoLabelOverlapped(current, next) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n  if (!firstRect || !nextRect) {\n    return;\n  }\n  // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    }\n    // Tick line, Not use group transform to have better line draw\n    var tickEl = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      autoBatch: true,\n      silent: true\n    });\n    graphic.subPixelOptimizeLine(tickEl.shape, tickEl.style.lineWidth);\n    tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n    tickEls.push(tickEl);\n  }\n  return tickEls;\n}\nfunction buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n  var shown = tickModel.get('show');\n  if (shown === 'auto' && opt.handleAutoShown) {\n    shown = opt.handleAutoShown('axisTick');\n  }\n  if (!shown || axis.scale.isBlank()) {\n    return;\n  }\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }), 'ticks');\n  for (var i = 0; i < ticksEls.length; i++) {\n    group.add(ticksEls[i]);\n  }\n  return ticksEls;\n}\nfunction buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n  var minorTicksCoords = axis.getMinorTicksCoords();\n  if (!minorTicksCoords.length) {\n    return;\n  }\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }));\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      group.add(minorTicksEls[k]);\n    }\n  }\n}\nfunction buildAxisLabel(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels();\n  // Special label rotate.\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = AxisBuilder.isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n    if (rawCategoryData && rawCategoryData[tickValue]) {\n      var rawCategoryItem = rawCategoryData[tickValue];\n      if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n        itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n      }\n    }\n    var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n    var tickCoord = axis.dataToCoord(tickValue);\n    var align = itemLabelModel.getShallow('align', true) || labelLayout.textAlign;\n    var alignMin = retrieve2(itemLabelModel.getShallow('alignMinLabel', true), align);\n    var alignMax = retrieve2(itemLabelModel.getShallow('alignMaxLabel', true), align);\n    var verticalAlign = itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign;\n    var verticalAlignMin = retrieve2(itemLabelModel.getShallow('verticalAlignMinLabel', true), verticalAlign);\n    var verticalAlignMax = retrieve2(itemLabelModel.getShallow('verticalAlignMaxLabel', true), verticalAlign);\n    var textEl = new graphic.Text({\n      x: tickCoord,\n      y: opt.labelOffset + opt.labelDirection * labelMargin,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10 + (labelItem.level || 0),\n      style: createTextStyle(itemLabelModel, {\n        text: formattedLabel,\n        align: index === 0 ? alignMin : index === labels.length - 1 ? alignMax : align,\n        verticalAlign: index === 0 ? verticalAlignMin : index === labels.length - 1 ? verticalAlignMax : verticalAlign,\n        fill: isFunction(textColor) ? textColor(\n        // (1) In category axis with data zoom, tick is not the original\n        // index of axis.data. So tick should not be exposed to user\n        // in category axis.\n        // (2) Compatible with previous version, which always use formatted label as\n        // input. But in interval scale the formatted label is like '223,445', which\n        // maked user replace ','. So we modify it to return original val but remain\n        // it as 'string' to avoid error in replacing.\n        axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n      })\n    });\n    textEl.anid = 'label_' + tickValue;\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: formattedLabel,\n      formatterParamsExtra: {\n        isTruncated: function () {\n          return textEl.isTruncated;\n        },\n        value: rawLabel,\n        tickIndex: index\n      }\n    });\n    // Pack data for mouse event\n    if (triggerEvent) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisLabel';\n      eventData.value = rawLabel;\n      eventData.tickIndex = index;\n      if (axis.type === 'category') {\n        eventData.dataIndex = tickValue;\n      }\n      getECData(textEl).eventData = eventData;\n    }\n    // FIXME\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\nexport default AxisBuilder;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport Model from '../../model/Model.js';\nimport { each, curry, clone, defaults, isArray, indexOf } from 'zrender/lib/core/util.js';\n// Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\nexport function collect(ecModel, api) {\n  var result = {\n    /**\r\n     * key: makeKey(axis.model)\r\n     * value: {\r\n     *      axis,\r\n     *      coordSys,\r\n     *      axisPointerModel,\r\n     *      triggerTooltip,\r\n     *      triggerEmphasis,\r\n     *      involveSeries,\r\n     *      snap,\r\n     *      seriesModels,\r\n     *      seriesDataCount\r\n     * }\r\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n    /**\r\n     * key: makeKey(coordSys.model)\r\n     * value: Object: key makeKey(axis.model), value: axisInfo\r\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api);\n  // Check seriesInvolved for performance, in case too many series in some chart.\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer');\n  // links can only be set on global.\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = [];\n  // Collect axes info.\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys;\n    // Set tooltip (like 'cross') is a convenient way to show axisPointer\n    // for user. So we enable setting tooltip on coordSys model.\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null));\n    // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n    if (coordSys.getTooltipAxes && globalTooltipModel\n    // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    }\n    // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var triggerEmphasis = axisPointerModel.get('triggerEmphasis');\n      var axisKey = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category';\n      // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n      var axisInfo = result.axesInfo[axisKey] = {\n        key: axisKey,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        triggerEmphasis: triggerEmphasis,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: [],\n        linkGroup: null\n      };\n      axesInfoInCoordSys[axisKey] = axisInfo;\n      result.seriesInvolved = result.seriesInvolved || involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[axisKey] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n  var volatileOption = {};\n  each(fields, function (field) {\n    volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n  });\n  // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip;\n  // Compatible with previous behavior, tooltip axis does not show label by default.\n  // Only these properties can be overridden from tooltip to axisPointer.\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n  var labelOption = volatileOption.label || (volatileOption.label = {});\n  // Follow the convention, do not show label when triggered by tooltip by default.\n  labelOption.show == null && (labelOption.show = false);\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true;\n    // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n    var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n      return;\n    }\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  });\n}\n/**\r\n * For example:\r\n * {\r\n *     axisPointer: {\r\n *         links: [{\r\n *             xAxisIndex: [2, 4],\r\n *             yAxisIndex: 'all'\r\n *         }, {\r\n *             xAxisId: ['a5', 'a7'],\r\n *             xAxisName: 'xxx'\r\n *         }]\r\n *     }\r\n * }\r\n */\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\nexport function fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  if (!axisInfo) {\n    return;\n  }\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value');\n  // Parse init value for category and time axis.\n  if (value != null) {\n    value = scale.parse(value);\n  }\n  var useHandle = isHandleTrigger(axisPointerModel);\n  // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n  if (\n  // Pick a value on axis when initializing.\n  value == null\n  // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n  option.value = value;\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\nexport function getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\nexport function getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get(['handle', 'show']);\n}\n/**\r\n * @param {module:echarts/model/Model} model\r\n * @return {string} unique key\r\n */\nexport function makeKey(model) {\n  return model.type + '||' + model.id;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as axisPointerModelHelper from '../axisPointer/modelHelper.js';\nimport ComponentView from '../../view/Component.js';\nvar axisPointerClazz = {};\n/**\r\n * Base class of AxisView.\r\n */\nvar AxisView = /** @class */function (_super) {\n  __extends(AxisView, _super);\n  function AxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisView.type;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    _super.prototype.render.apply(this, arguments);\n    this._doUpdateAxisPointerClass(axisModel, api, true);\n  };\n  /**\r\n   * Action handler.\r\n   */\n  AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n    this._doUpdateAxisPointerClass(axisModel, api, false);\n  };\n  /**\r\n   * @override\r\n   */\n  AxisView.prototype.remove = function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n  };\n  /**\r\n   * @override\r\n   */\n  AxisView.prototype.dispose = function (ecModel, api) {\n    this._disposeAxisPointer(api);\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n    var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n    if (!Clazz) {\n      return;\n    }\n    var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n  };\n  AxisView.prototype._disposeAxisPointer = function (api) {\n    this._axisPointer && this._axisPointer.dispose(api);\n    this._axisPointer = null;\n  };\n  AxisView.registerAxisPointerClass = function (type, clazz) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (axisPointerClazz[type]) {\n        throw new Error('axisPointer ' + type + ' exists');\n      }\n    }\n    axisPointerClazz[type] = clazz;\n  };\n  ;\n  AxisView.getAxisPointerClass = function (type) {\n    return type && axisPointerClazz[type];\n  };\n  ;\n  AxisView.type = 'axis';\n  return AxisView;\n}(ComponentView);\nexport default AxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n  if (axis.scale.isBlank()) {\n    return;\n  }\n  // TODO: TYPE\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n  if (!ticksCoords.length) {\n    return;\n  }\n  // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport AxisView from './AxisView.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\nvar CartesianAxisView = /** @class */function (_super) {\n  __extends(CartesianAxisView, _super);\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n    if (!axisModel.get('show')) {\n      return;\n    }\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function (elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n        for (var i = 0; i < cartesians.length; i++) {\n          if (isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale)) {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        }\n        // Not show axisTick or axisLine if other axis is category / time\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    this._axisGroup.add(axisBuilder.getGroup());\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this);\n    // THIS is a special case for bar racing chart.\n    // Update the axis label from the natural initial layout to\n    // sorted layout should has no animation.\n    var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n    if (!isInitialSortFromBarRacing) {\n      graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    }\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    if (axis.scale.isBlank()) {\n      return;\n    }\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var showMinLine = splitLineModel.get('showMinLine') !== false;\n    var showMaxLine = splitLineModel.get('showMaxLine') !== false;\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      if (i === 0 && !showMinLine || i === ticksCoords.length - 1 && !showMaxLine) {\n        continue;\n      }\n      var tickValue = ticksCoords[i].tickValue;\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n      var colorIndex = lineCount++ % lineColors.length;\n      var line = new graphic.Line({\n        anid: tickValue != null ? 'line_' + tickValue : null,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n      axisGroup.add(line);\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n    if (!minorTicksCoords.length) {\n      return;\n    }\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n        var line = new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        });\n        graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n        axisGroup.add(line);\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\nvar CartesianXAxisView = /** @class */function (_super) {\n  __extends(CartesianXAxisView, _super);\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\nexport { CartesianXAxisView };\nvar CartesianYAxisView = /** @class */function (_super) {\n  __extends(CartesianYAxisView, _super);\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport GridModel from '../../coord/cartesian/GridModel.js';\nimport { Rect } from '../../util/graphic.js';\nimport { defaults } from 'zrender/lib/core/util.js';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport Grid from '../../coord/cartesian/Grid.js';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView.js';\n// Grid view\nvar GridView = /** @class */function (_super) {\n  __extends(GridView, _super);\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'grid';\n    return _this;\n  }\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport * as graphic from '../../util/graphic.js';\nimport ComponentView from '../../view/Component.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar RadarView = /** @class */function (_super) {\n  __extends(RadarView, _super);\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadarView.type;\n    return _this;\n  }\n  RadarView.prototype.render = function (radarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    this._buildAxes(radarModel);\n    this._buildSplitLineAndArea(radarModel);\n  };\n  RadarView.prototype._buildAxes = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    var axisBuilders = zrUtil.map(indicatorAxes, function (indicatorAxis) {\n      var axisName = indicatorAxis.model.get('showName') ? indicatorAxis.name : ''; // hide name\n      var axisBuilder = new AxisBuilder(indicatorAxis.model, {\n        axisName: axisName,\n        position: [radar.cx, radar.cy],\n        rotation: indicatorAxis.angle,\n        labelDirection: -1,\n        tickDirection: -1,\n        nameDirection: 1\n      });\n      return axisBuilder;\n    });\n    zrUtil.each(axisBuilders, function (axisBuilder) {\n      zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n      this.group.add(axisBuilder.getGroup());\n    }, this);\n  };\n  RadarView.prototype._buildSplitLineAndArea = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    if (!indicatorAxes.length) {\n      return;\n    }\n    var shape = radarModel.get('shape');\n    var splitLineModel = radarModel.getModel('splitLine');\n    var splitAreaModel = radarModel.getModel('splitArea');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var showSplitLine = splitLineModel.get('show');\n    var showSplitArea = splitAreaModel.get('show');\n    var splitLineColors = lineStyleModel.get('color');\n    var splitAreaColors = areaStyleModel.get('color');\n    var splitLineColorsArr = zrUtil.isArray(splitLineColors) ? splitLineColors : [splitLineColors];\n    var splitAreaColorsArr = zrUtil.isArray(splitAreaColors) ? splitAreaColors : [splitAreaColors];\n    var splitLines = [];\n    var splitAreas = [];\n    function getColorIndex(areaOrLine, areaOrLineColorList, idx) {\n      var colorIndex = idx % areaOrLineColorList.length;\n      areaOrLine[colorIndex] = areaOrLine[colorIndex] || [];\n      return colorIndex;\n    }\n    if (shape === 'circle') {\n      var ticksRadius = indicatorAxes[0].getTicksCoords();\n      var cx = radar.cx;\n      var cy = radar.cy;\n      for (var i = 0; i < ticksRadius.length; i++) {\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n          splitLines[colorIndex].push(new graphic.Circle({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r: ticksRadius[i].coord\n            }\n          }));\n        }\n        if (showSplitArea && i < ticksRadius.length - 1) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i);\n          splitAreas[colorIndex].push(new graphic.Ring({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r0: ticksRadius[i].coord,\n              r: ticksRadius[i + 1].coord\n            }\n          }));\n        }\n      }\n    }\n    // Polyyon\n    else {\n      var realSplitNumber_1;\n      var axesTicksPoints = zrUtil.map(indicatorAxes, function (indicatorAxis, idx) {\n        var ticksCoords = indicatorAxis.getTicksCoords();\n        realSplitNumber_1 = realSplitNumber_1 == null ? ticksCoords.length - 1 : Math.min(ticksCoords.length - 1, realSplitNumber_1);\n        return zrUtil.map(ticksCoords, function (tickCoord) {\n          return radar.coordToPoint(tickCoord.coord, idx);\n        });\n      });\n      var prevPoints = [];\n      for (var i = 0; i <= realSplitNumber_1; i++) {\n        var points = [];\n        for (var j = 0; j < indicatorAxes.length; j++) {\n          points.push(axesTicksPoints[j][i]);\n        }\n        // Close\n        if (points[0]) {\n          points.push(points[0].slice());\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            console.error('Can\\'t draw value axis ' + i);\n          }\n        }\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n          splitLines[colorIndex].push(new graphic.Polyline({\n            shape: {\n              points: points\n            }\n          }));\n        }\n        if (showSplitArea && prevPoints) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i - 1);\n          splitAreas[colorIndex].push(new graphic.Polygon({\n            shape: {\n              points: points.concat(prevPoints)\n            }\n          }));\n        }\n        prevPoints = points.slice().reverse();\n      }\n    }\n    var lineStyle = lineStyleModel.getLineStyle();\n    var areaStyle = areaStyleModel.getAreaStyle();\n    // Add splitArea before splitLine\n    zrUtil.each(splitAreas, function (splitAreas, idx) {\n      this.group.add(graphic.mergePath(splitAreas, {\n        style: zrUtil.defaults({\n          stroke: 'none',\n          fill: splitAreaColorsArr[idx % splitAreaColorsArr.length]\n        }, areaStyle),\n        silent: true\n      }));\n    }, this);\n    zrUtil.each(splitLines, function (splitLines, idx) {\n      this.group.add(graphic.mergePath(splitLines, {\n        style: zrUtil.defaults({\n          fill: 'none',\n          stroke: splitLineColorsArr[idx % splitLineColorsArr.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }, this);\n  };\n  RadarView.type = 'radar';\n  return RadarView;\n}(ComponentView);\nexport default RadarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport RadarModel from '../../coord/radar/RadarModel.js';\nimport RadarView from './RadarView.js';\nimport Radar from '../../coord/radar/Radar.js';\nexport function install(registers) {\n  registers.registerCoordinateSystem('radar', Radar);\n  registers.registerComponentModel(RadarModel);\n  registers.registerComponentView(RadarView);\n  registers.registerVisual({\n    seriesType: 'radar',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      // itemVisual symbol is for selected data\n      data.each(function (idx) {\n        data.setItemVisual(idx, 'legendIcon', 'roundRect');\n      });\n      // visual is for unselected data\n      data.setVisual('legendIcon', 'roundRect');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\r\n * payload: {\r\n *     type: 'takeGlobalCursor',\r\n *     key: 'dataZoomSelect', or 'brush', or ...,\r\n *         If no userKey, release global cursor.\r\n * }\r\n */\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, noop);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, clone } from 'zrender/lib/core/util.js';\n;\nvar RoamController = /** @class */function (_super) {\n  __extends(RoamController, _super);\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n    _this._zr = zr;\n    // Avoid two roamController bind the same handler\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\r\n     * Notice: only enable needed types. For example, if 'zoom'\r\n     * is not needed, 'zoom' should not be enabled, otherwise\r\n     * default mousewheel behaviour (scroll page) will be disabled.\r\n     */\n    _this.enable = function (controlType, opt) {\n      // Disable previous first\n      this.disable();\n      this._opt = defaults(clone(opt) || {}, {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true\n      });\n      if (controlType == null) {\n        controlType = true;\n      }\n      if (controlType === true || controlType === 'move' || controlType === 'pan') {\n        zr.on('mousedown', mousedownHandler);\n        zr.on('mousemove', mousemoveHandler);\n        zr.on('mouseup', mouseupHandler);\n      }\n      if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n        zr.on('mousewheel', mousewheelHandler);\n        zr.on('pinch', pinchHandler);\n      }\n    };\n    _this.disable = function () {\n      zr.off('mousedown', mousedownHandler);\n      zr.off('mousemove', mousemoveHandler);\n      zr.off('mouseup', mouseupHandler);\n      zr.off('mousewheel', mousewheelHandler);\n      zr.off('pinch', pinchHandler);\n    };\n    return _this;\n  }\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n  RoamController.prototype.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      return;\n    }\n    var el = e.target;\n    while (el) {\n      if (el.draggable) {\n        return;\n      }\n      // check if host is draggable\n      el = el.__hostTarget || el.parent;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    // Only check on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n    if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n  RoamController.prototype._mousemoveHandler = function (e) {\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n    }\n  };\n  RoamController.prototype._mousewheelHandler = function (e) {\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY;\n    // wheelDelta maybe -0 in chrome mac.\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    }\n    // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta);\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    checkPointerAndTrigger(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n  return RoamController;\n}(Eventful);\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  // TODO should not have type issue.\n  controller.trigger(eventName, contollerEvent);\n}\n// settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\nexport default RoamController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * For geo and graph.\r\n */\nexport function updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  target.x += dx;\n  target.y += dy;\n  target.dirty();\n}\n/**\r\n * For geo and graph.\r\n */\nexport function updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom;\n  // Keep the mouse center when scaling\n  target.x -= (zoomX - target.x) * (zoomScale - 1);\n  target.y -= (zoomY - target.y) * (zoomScale - 1);\n  target.scaleX *= zoomScale;\n  target.scaleY *= zoomScale;\n  target.dirty();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\r\n * Avoid that: mouse click on a elements that is over geo or graph,\r\n * but roam is triggered.\r\n */\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget);\n  // If model is axisModel, it works only if it is injected with coordinateSystem.\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport RoamController from './RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enableComponentHighDownFeatures, setDefaultStateProxy } from '../../util/states.js';\nimport geoSourceManager from '../../coord/geo/geoSourceManager.js';\nimport { getUID } from '../../util/component.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { makeInner } from '../../util/model.js';\n/**\r\n * Only these tags enable use `itemStyle` if they are named in SVG.\r\n * Other tags like <text> <tspan> <image> might not suitable for `itemStyle`.\r\n * They will not be considered to be styled until some requirements come.\r\n */\nvar OPTION_STYLE_ENABLED_TAGS = ['rect', 'circle', 'line', 'ellipse', 'polygon', 'polyline', 'path'];\nvar OPTION_STYLE_ENABLED_TAG_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS);\nvar STATE_TRIGGER_TAG_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(['g']));\nvar LABEL_HOST_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(['g']));\nvar mapLabelRaw = makeInner();\nfunction getFixedItemStyle(model) {\n  var itemStyle = model.getItemStyle();\n  var areaColor = model.get('areaColor');\n  // If user want the color not to be changed when hover,\n  // they should both set areaColor and color to be null.\n  if (areaColor != null) {\n    itemStyle.fill = areaColor;\n  }\n  return itemStyle;\n}\n// Only stroke can be used for line.\n// Using fill in style if stroke not exits.\n// TODO Not sure yet. Perhaps a separate `lineStyle`?\nfunction fixLineStyle(styleHost) {\n  var style = styleHost.style;\n  if (style) {\n    style.stroke = style.stroke || style.fill;\n    style.fill = null;\n  }\n}\nvar MapDraw = /** @class */function () {\n  function MapDraw(api) {\n    var group = new graphic.Group();\n    this.uid = getUID('ec_map_draw');\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    this.group = group;\n    group.add(this._regionsGroup = new graphic.Group());\n    group.add(this._svgGroup = new graphic.Group());\n  }\n  MapDraw.prototype.draw = function (mapOrGeoModel, ecModel, api, fromView, payload) {\n    var isGeo = mapOrGeoModel.mainType === 'geo';\n    // Map series has data. GEO model that controlled by map series\n    // will be assigned with map data. Other GEO model has no data.\n    var data = mapOrGeoModel.getData && mapOrGeoModel.getData();\n    isGeo && ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'map'\n    }, function (mapSeries) {\n      if (!data && mapSeries.getHostGeoModel() === mapOrGeoModel) {\n        data = mapSeries.getData();\n      }\n    });\n    var geo = mapOrGeoModel.coordinateSystem;\n    var regionsGroup = this._regionsGroup;\n    var group = this.group;\n    var transformInfo = geo.getTransformInfo();\n    var transformInfoRaw = transformInfo.raw;\n    var transformInfoRoam = transformInfo.roam;\n    // No animation when first draw or in action\n    var isFirstDraw = !regionsGroup.childAt(0) || payload;\n    if (isFirstDraw) {\n      group.x = transformInfoRoam.x;\n      group.y = transformInfoRoam.y;\n      group.scaleX = transformInfoRoam.scaleX;\n      group.scaleY = transformInfoRoam.scaleY;\n      group.dirty();\n    } else {\n      graphic.updateProps(group, transformInfoRoam, mapOrGeoModel);\n    }\n    var isVisualEncodedByVisualMap = data && data.getVisual('visualMeta') && data.getVisual('visualMeta').length > 0;\n    var viewBuildCtx = {\n      api: api,\n      geo: geo,\n      mapOrGeoModel: mapOrGeoModel,\n      data: data,\n      isVisualEncodedByVisualMap: isVisualEncodedByVisualMap,\n      isGeo: isGeo,\n      transformInfoRaw: transformInfoRaw\n    };\n    if (geo.resourceType === 'geoJSON') {\n      this._buildGeoJSON(viewBuildCtx);\n    } else if (geo.resourceType === 'geoSVG') {\n      this._buildSVG(viewBuildCtx);\n    }\n    this._updateController(mapOrGeoModel, ecModel, api);\n    this._updateMapSelectHandler(mapOrGeoModel, regionsGroup, api, fromView);\n  };\n  MapDraw.prototype._buildGeoJSON = function (viewBuildCtx) {\n    var regionsGroupByName = this._regionsGroupByName = zrUtil.createHashMap();\n    var regionsInfoByName = zrUtil.createHashMap();\n    var regionsGroup = this._regionsGroup;\n    var transformInfoRaw = viewBuildCtx.transformInfoRaw;\n    var mapOrGeoModel = viewBuildCtx.mapOrGeoModel;\n    var data = viewBuildCtx.data;\n    var projection = viewBuildCtx.geo.projection;\n    var projectionStream = projection && projection.stream;\n    function transformPoint(point, project) {\n      if (project) {\n        // projection may return null point.\n        point = project(point);\n      }\n      return point && [point[0] * transformInfoRaw.scaleX + transformInfoRaw.x, point[1] * transformInfoRaw.scaleY + transformInfoRaw.y];\n    }\n    ;\n    function transformPolygonPoints(inPoints) {\n      var outPoints = [];\n      // If projectionStream is provided. Use it instead of single point project.\n      var project = !projectionStream && projection && projection.project;\n      for (var i = 0; i < inPoints.length; ++i) {\n        var newPt = transformPoint(inPoints[i], project);\n        newPt && outPoints.push(newPt);\n      }\n      return outPoints;\n    }\n    function getPolyShape(points) {\n      return {\n        shape: {\n          points: transformPolygonPoints(points)\n        }\n      };\n    }\n    regionsGroup.removeAll();\n    // Only when the resource is GeoJSON, there is `geo.regions`.\n    zrUtil.each(viewBuildCtx.geo.regions, function (region) {\n      var regionName = region.name;\n      // Consider in GeoJson properties.name may be duplicated, for example,\n      // there is multiple region named \"United Kindom\" or \"France\" (so many\n      // colonies). And it is not appropriate to merge them in geo, which\n      // will make them share the same label and bring trouble in label\n      // location calculation.\n      var regionGroup = regionsGroupByName.get(regionName);\n      var _a = regionsInfoByName.get(regionName) || {},\n        dataIdx = _a.dataIdx,\n        regionModel = _a.regionModel;\n      if (!regionGroup) {\n        regionGroup = regionsGroupByName.set(regionName, new graphic.Group());\n        regionsGroup.add(regionGroup);\n        dataIdx = data ? data.indexOfName(regionName) : null;\n        regionModel = viewBuildCtx.isGeo ? mapOrGeoModel.getRegionModel(regionName) : data ? data.getItemModel(dataIdx) : null;\n        var silent = regionModel.get('silent', true);\n        silent != null && (regionGroup.silent = silent);\n        regionsInfoByName.set(regionName, {\n          dataIdx: dataIdx,\n          regionModel: regionModel\n        });\n      }\n      var polygonSubpaths = [];\n      var polylineSubpaths = [];\n      zrUtil.each(region.geometries, function (geometry) {\n        // Polygon and MultiPolygon\n        if (geometry.type === 'polygon') {\n          var polys = [geometry.exterior].concat(geometry.interiors || []);\n          if (projectionStream) {\n            polys = projectPolys(polys, projectionStream);\n          }\n          zrUtil.each(polys, function (poly) {\n            polygonSubpaths.push(new graphic.Polygon(getPolyShape(poly)));\n          });\n        }\n        // LineString and MultiLineString\n        else {\n          var points = geometry.points;\n          if (projectionStream) {\n            points = projectPolys(points, projectionStream, true);\n          }\n          zrUtil.each(points, function (points) {\n            polylineSubpaths.push(new graphic.Polyline(getPolyShape(points)));\n          });\n        }\n      });\n      var centerPt = transformPoint(region.getCenter(), projection && projection.project);\n      function createCompoundPath(subpaths, isLine) {\n        if (!subpaths.length) {\n          return;\n        }\n        var compoundPath = new graphic.CompoundPath({\n          culling: true,\n          segmentIgnoreThreshold: 1,\n          shape: {\n            paths: subpaths\n          }\n        });\n        regionGroup.add(compoundPath);\n        applyOptionStyleForRegion(viewBuildCtx, compoundPath, dataIdx, regionModel);\n        resetLabelForRegion(viewBuildCtx, compoundPath, regionName, regionModel, mapOrGeoModel, dataIdx, centerPt);\n        if (isLine) {\n          fixLineStyle(compoundPath);\n          zrUtil.each(compoundPath.states, fixLineStyle);\n        }\n      }\n      createCompoundPath(polygonSubpaths);\n      createCompoundPath(polylineSubpaths, true);\n    });\n    // Ensure children have been added to `regionGroup` before calling them.\n    regionsGroupByName.each(function (regionGroup, regionName) {\n      var _a = regionsInfoByName.get(regionName),\n        dataIdx = _a.dataIdx,\n        regionModel = _a.regionModel;\n      resetEventTriggerForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel, dataIdx);\n      resetTooltipForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel);\n      resetStateTriggerForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel);\n    }, this);\n  };\n  MapDraw.prototype._buildSVG = function (viewBuildCtx) {\n    var mapName = viewBuildCtx.geo.map;\n    var transformInfoRaw = viewBuildCtx.transformInfoRaw;\n    this._svgGroup.x = transformInfoRaw.x;\n    this._svgGroup.y = transformInfoRaw.y;\n    this._svgGroup.scaleX = transformInfoRaw.scaleX;\n    this._svgGroup.scaleY = transformInfoRaw.scaleY;\n    if (this._svgResourceChanged(mapName)) {\n      this._freeSVG();\n      this._useSVG(mapName);\n    }\n    var svgDispatcherMap = this._svgDispatcherMap = zrUtil.createHashMap();\n    var focusSelf = false;\n    zrUtil.each(this._svgGraphicRecord.named, function (namedItem) {\n      // Note that we also allow different elements have the same name.\n      // For example, a glyph of a city and the label of the city have\n      // the same name and their tooltip info can be defined in a single\n      // region option.\n      var regionName = namedItem.name;\n      var mapOrGeoModel = viewBuildCtx.mapOrGeoModel;\n      var data = viewBuildCtx.data;\n      var svgNodeTagLower = namedItem.svgNodeTagLower;\n      var el = namedItem.el;\n      var dataIdx = data ? data.indexOfName(regionName) : null;\n      var regionModel = mapOrGeoModel.getRegionModel(regionName);\n      if (OPTION_STYLE_ENABLED_TAG_MAP.get(svgNodeTagLower) != null && el instanceof Displayable) {\n        applyOptionStyleForRegion(viewBuildCtx, el, dataIdx, regionModel);\n      }\n      if (el instanceof Displayable) {\n        el.culling = true;\n      }\n      var silent = regionModel.get('silent', true);\n      silent != null && (el.silent = silent);\n      // We do not know how the SVG like so we'd better not to change z2.\n      // Otherwise it might bring some unexpected result. For example,\n      // an area hovered that make some inner city can not be clicked.\n      el.z2EmphasisLift = 0;\n      // If self named:\n      if (!namedItem.namedFrom) {\n        // label should batter to be displayed based on the center of <g>\n        // if it is named rather than displayed on each child.\n        if (LABEL_HOST_MAP.get(svgNodeTagLower) != null) {\n          resetLabelForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, dataIdx, null);\n        }\n        resetEventTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, dataIdx);\n        resetTooltipForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel);\n        if (STATE_TRIGGER_TAG_MAP.get(svgNodeTagLower) != null) {\n          var focus_1 = resetStateTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel);\n          if (focus_1 === 'self') {\n            focusSelf = true;\n          }\n          var els = svgDispatcherMap.get(regionName) || svgDispatcherMap.set(regionName, []);\n          els.push(el);\n        }\n      }\n    }, this);\n    this._enableBlurEntireSVG(focusSelf, viewBuildCtx);\n  };\n  MapDraw.prototype._enableBlurEntireSVG = function (focusSelf, viewBuildCtx) {\n    // It's a little complicated to support blurring the entire geoSVG in series-map.\n    // So do not support it until some requirements come.\n    // At present, in series-map, only regions can be blurred.\n    if (focusSelf && viewBuildCtx.isGeo) {\n      var blurStyle = viewBuildCtx.mapOrGeoModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      // Only support `opacity` here. Because not sure that other props are suitable for\n      // all of the elements generated by SVG (especially for Text/TSpan/Image/... ).\n      var opacity_1 = blurStyle.opacity;\n      this._svgGraphicRecord.root.traverse(function (el) {\n        if (!el.isGroup) {\n          // PENDING: clear those settings to SVG elements when `_freeSVG`.\n          // (Currently it happen not to be needed.)\n          setDefaultStateProxy(el);\n          var style = el.ensureState('blur').style || {};\n          // Do not overwrite the region style that already set from region option.\n          if (style.opacity == null && opacity_1 != null) {\n            style.opacity = opacity_1;\n          }\n          // If `ensureState('blur').style = {}`, there will be default opacity.\n          // Enable `stateTransition` (animation).\n          el.ensureState('emphasis');\n        }\n      });\n    }\n  };\n  MapDraw.prototype.remove = function () {\n    this._regionsGroup.removeAll();\n    this._regionsGroupByName = null;\n    this._svgGroup.removeAll();\n    this._freeSVG();\n    this._controller.dispose();\n    this._controllerHost = null;\n  };\n  MapDraw.prototype.findHighDownDispatchers = function (name, geoModel) {\n    if (name == null) {\n      return [];\n    }\n    var geo = geoModel.coordinateSystem;\n    if (geo.resourceType === 'geoJSON') {\n      var regionsGroupByName = this._regionsGroupByName;\n      if (regionsGroupByName) {\n        var regionGroup = regionsGroupByName.get(name);\n        return regionGroup ? [regionGroup] : [];\n      }\n    } else if (geo.resourceType === 'geoSVG') {\n      return this._svgDispatcherMap && this._svgDispatcherMap.get(name) || [];\n    }\n  };\n  MapDraw.prototype._svgResourceChanged = function (mapName) {\n    return this._svgMapName !== mapName;\n  };\n  MapDraw.prototype._useSVG = function (mapName) {\n    var resource = geoSourceManager.getGeoResource(mapName);\n    if (resource && resource.type === 'geoSVG') {\n      var svgGraphic = resource.useGraphic(this.uid);\n      this._svgGroup.add(svgGraphic.root);\n      this._svgGraphicRecord = svgGraphic;\n      this._svgMapName = mapName;\n    }\n  };\n  MapDraw.prototype._freeSVG = function () {\n    var mapName = this._svgMapName;\n    if (mapName == null) {\n      return;\n    }\n    var resource = geoSourceManager.getGeoResource(mapName);\n    if (resource && resource.type === 'geoSVG') {\n      resource.freeGraphic(this.uid);\n    }\n    this._svgGraphicRecord = null;\n    this._svgDispatcherMap = null;\n    this._svgGroup.removeAll();\n    this._svgMapName = null;\n  };\n  MapDraw.prototype._updateController = function (mapOrGeoModel, ecModel, api) {\n    var geo = mapOrGeoModel.coordinateSystem;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    // @ts-ignore FIXME:TS\n    controllerHost.zoomLimit = mapOrGeoModel.get('scaleLimit');\n    controllerHost.zoom = geo.getZoom();\n    // roamType is will be set default true if it is null\n    // @ts-ignore FIXME:TS\n    controller.enable(mapOrGeoModel.get('roam') || false);\n    var mainType = mapOrGeoModel.mainType;\n    function makeActionBase() {\n      var action = {\n        type: 'geoRoam',\n        componentType: mainType\n      };\n      action[mainType + 'Id'] = mapOrGeoModel.id;\n      return action;\n    }\n    controller.off('pan').on('pan', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        dx: e.dx,\n        dy: e.dy,\n        animation: {\n          duration: 0\n        }\n      }));\n    }, this);\n    controller.off('zoom').on('zoom', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        totalZoom: controllerHost.zoom,\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY,\n        animation: {\n          duration: 0\n        }\n      }));\n    }, this);\n    controller.setPointerChecker(function (e, x, y) {\n      return geo.containPoint([x, y]) && !onIrrelevantElement(e, api, mapOrGeoModel);\n    });\n  };\n  /**\r\n   * FIXME: this is a temporarily workaround.\r\n   * When `geoRoam` the elements need to be reset in `MapView['render']`, because the props like\r\n   * `ignore` might have been modified by `LabelManager`, and `LabelManager#addLabelsOfSeries`\r\n   * will subsequently cache `defaultAttr` like `ignore`. If do not do this reset, the modified\r\n   * props will have no chance to be restored.\r\n   * Note: This reset should be after `clearStates` in `renderSeries` because `useStates` in\r\n   * `renderSeries` will cache the modified `ignore` to `el._normalState`.\r\n   * TODO:\r\n   * Use clone/immutable in `LabelManager`?\r\n   */\n  MapDraw.prototype.resetForLabelLayout = function () {\n    this.group.traverse(function (el) {\n      var label = el.getTextContent();\n      if (label) {\n        label.ignore = mapLabelRaw(label).ignore;\n      }\n    });\n  };\n  MapDraw.prototype._updateMapSelectHandler = function (mapOrGeoModel, regionsGroup, api, fromView) {\n    var mapDraw = this;\n    regionsGroup.off('mousedown');\n    regionsGroup.off('click');\n    // @ts-ignore FIXME:TS resolve type conflict\n    if (mapOrGeoModel.get('selectedMode')) {\n      regionsGroup.on('mousedown', function () {\n        mapDraw._mouseDownFlag = true;\n      });\n      regionsGroup.on('click', function (e) {\n        if (!mapDraw._mouseDownFlag) {\n          return;\n        }\n        mapDraw._mouseDownFlag = false;\n      });\n    }\n  };\n  return MapDraw;\n}();\n;\nfunction applyOptionStyleForRegion(viewBuildCtx, el, dataIndex, regionModel) {\n  // All of the path are using `itemStyle`, because\n  // (1) Some SVG also use fill on polyline (The different between\n  // polyline and polygon is \"open\" or \"close\" but not fill or not).\n  // (2) For the common props like opacity, if some use itemStyle\n  // and some use `lineStyle`, it might confuse users.\n  // (3) Most SVG use <path>, where can not detect whether to draw a \"line\"\n  // or a filled shape, so use `itemStyle` for <path>.\n  var normalStyleModel = regionModel.getModel('itemStyle');\n  var emphasisStyleModel = regionModel.getModel(['emphasis', 'itemStyle']);\n  var blurStyleModel = regionModel.getModel(['blur', 'itemStyle']);\n  var selectStyleModel = regionModel.getModel(['select', 'itemStyle']);\n  // NOTE: DON'T use 'style' in visual when drawing map.\n  // This component is used for drawing underlying map for both geo component and map series.\n  var normalStyle = getFixedItemStyle(normalStyleModel);\n  var emphasisStyle = getFixedItemStyle(emphasisStyleModel);\n  var selectStyle = getFixedItemStyle(selectStyleModel);\n  var blurStyle = getFixedItemStyle(blurStyleModel);\n  // Update the itemStyle if has data visual\n  var data = viewBuildCtx.data;\n  if (data) {\n    // Only visual color of each item will be used. It can be encoded by visualMap\n    // But visual color of series is used in symbol drawing\n    // Visual color for each series is for the symbol draw\n    var style = data.getItemVisual(dataIndex, 'style');\n    var decal = data.getItemVisual(dataIndex, 'decal');\n    if (viewBuildCtx.isVisualEncodedByVisualMap && style.fill) {\n      normalStyle.fill = style.fill;\n    }\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, viewBuildCtx.api);\n    }\n  }\n  // SVG text, tspan and image can be named but not supporeted\n  // to be styled by region option yet.\n  el.setStyle(normalStyle);\n  el.style.strokeNoScale = true;\n  el.ensureState('emphasis').style = emphasisStyle;\n  el.ensureState('select').style = selectStyle;\n  el.ensureState('blur').style = blurStyle;\n  // Enable blur\n  setDefaultStateProxy(el);\n}\nfunction resetLabelForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel,\n// Exist only if `viewBuildCtx.data` exists.\ndataIdx,\n// If labelXY not provided, use `textConfig.position: 'inside'`\nlabelXY) {\n  var data = viewBuildCtx.data;\n  var isGeo = viewBuildCtx.isGeo;\n  var isDataNaN = data && isNaN(data.get(data.mapDimension('value'), dataIdx));\n  var itemLayout = data && data.getItemLayout(dataIdx);\n  // In the following cases label will be drawn\n  // 1. In map series and data value is NaN\n  // 2. In geo component\n  // 3. Region has no series legendIcon, which will be add a showLabel flag in mapSymbolLayout\n  if (isGeo || isDataNaN || itemLayout && itemLayout.showLabel) {\n    var query = !isGeo ? dataIdx : regionName;\n    var labelFetcher = void 0;\n    // Consider dataIdx not found.\n    if (!data || dataIdx >= 0) {\n      labelFetcher = mapOrGeoModel;\n    }\n    var specifiedTextOpt = labelXY ? {\n      normal: {\n        align: 'center',\n        verticalAlign: 'middle'\n      }\n    } : null;\n    // Caveat: must be called after `setDefaultStateProxy(el);` called.\n    // because textContent will be assign with `el.stateProxy` inside.\n    setLabelStyle(el, getLabelStatesModels(regionModel), {\n      labelFetcher: labelFetcher,\n      labelDataIndex: query,\n      defaultText: regionName\n    }, specifiedTextOpt);\n    var textEl = el.getTextContent();\n    if (textEl) {\n      mapLabelRaw(textEl).ignore = textEl.ignore;\n      if (el.textConfig && labelXY) {\n        // Compute a relative offset based on the el bounding rect.\n        var rect = el.getBoundingRect().clone();\n        // Need to make sure the percent position base on the same rect in normal and\n        // emphasis state. Otherwise if using boundingRect of el, but the emphasis state\n        // has borderWidth (even 0.5px), the text position will be changed obviously\n        // if the position is very big like ['1234%', '1345%'].\n        el.textConfig.layoutRect = rect;\n        el.textConfig.position = [(labelXY[0] - rect.x) / rect.width * 100 + '%', (labelXY[1] - rect.y) / rect.height * 100 + '%'];\n      }\n    }\n    // PENDING:\n    // If labelLayout is enabled (test/label-layout.html), el.dataIndex should be specified.\n    // But el.dataIndex is also used to determine whether user event should be triggered,\n    // where el.seriesIndex or el.dataModel must be specified. At present for a single el\n    // there is not case that \"only label layout enabled but user event disabled\", so here\n    // we depends `resetEventTriggerForRegion` to do the job of setting `el.dataIndex`.\n    el.disableLabelAnimation = true;\n  } else {\n    el.removeTextContent();\n    el.removeTextConfig();\n    el.disableLabelAnimation = null;\n  }\n}\nfunction resetEventTriggerForRegion(viewBuildCtx, eventTrigger, regionName, regionModel, mapOrGeoModel,\n// Exist only if `viewBuildCtx.data` exists.\ndataIdx) {\n  // setItemGraphicEl, setHoverStyle after all polygons and labels\n  // are added to the regionGroup\n  if (viewBuildCtx.data) {\n    // FIXME: when series-map use a SVG map, and there are duplicated name specified\n    // on different SVG elements, after `data.setItemGraphicEl(...)`:\n    // (1) all of them will be mounted with `dataIndex`, `seriesIndex`, so that tooltip\n    // can be triggered only mouse hover. That's correct.\n    // (2) only the last element will be kept in `data`, so that if trigger tooltip\n    // by `dispatchAction`, only the last one can be found and triggered. That might be\n    // not correct. We will fix it in future if anyone demanding that.\n    viewBuildCtx.data.setItemGraphicEl(dataIdx, eventTrigger);\n  }\n  // series-map will not trigger \"geoselectchange\" no matter it is\n  // based on a declared geo component. Because series-map will\n  // trigger \"selectchange\". If it trigger both the two events,\n  // If users call `chart.dispatchAction({type: 'toggleSelect'})`,\n  // it not easy to also fire event \"geoselectchanged\".\n  else {\n    // Package custom mouse event for geo component\n    getECData(eventTrigger).eventData = {\n      componentType: 'geo',\n      componentIndex: mapOrGeoModel.componentIndex,\n      geoIndex: mapOrGeoModel.componentIndex,\n      name: regionName,\n      region: regionModel && regionModel.option || {}\n    };\n  }\n}\nfunction resetTooltipForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel) {\n  if (!viewBuildCtx.data) {\n    graphic.setTooltipConfig({\n      el: el,\n      componentModel: mapOrGeoModel,\n      itemName: regionName,\n      // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n      itemTooltipOption: regionModel.get('tooltip')\n    });\n  }\n}\nfunction resetStateTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel) {\n  // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n  el.highDownSilentOnTouch = !!mapOrGeoModel.get('selectedMode');\n  // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n  var emphasisModel = regionModel.getModel('emphasis');\n  var focus = emphasisModel.get('focus');\n  toggleHoverEmphasis(el, focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  if (viewBuildCtx.isGeo) {\n    enableComponentHighDownFeatures(el, mapOrGeoModel, regionName);\n  }\n  return focus;\n}\nfunction projectPolys(rings,\n// Polygons include exterior and interiors. Or polylines.\ncreateStream, isLine) {\n  var polygons = [];\n  var curPoly;\n  function startPolygon() {\n    curPoly = [];\n  }\n  function endPolygon() {\n    if (curPoly.length) {\n      polygons.push(curPoly);\n      curPoly = [];\n    }\n  }\n  var stream = createStream({\n    polygonStart: startPolygon,\n    polygonEnd: endPolygon,\n    lineStart: startPolygon,\n    lineEnd: endPolygon,\n    point: function (x, y) {\n      // May have NaN values from stream.\n      if (isFinite(x) && isFinite(y)) {\n        curPoly.push([x, y]);\n      }\n    },\n    sphere: function () {}\n  });\n  !isLine && stream.polygonStart();\n  zrUtil.each(rings, function (ring) {\n    stream.lineStart();\n    for (var i = 0; i < ring.length; i++) {\n      stream.point(ring[i][0], ring[i][1]);\n    }\n    stream.lineEnd();\n  });\n  !isLine && stream.polygonEnd();\n  return polygons;\n}\nexport default MapDraw;\n// @ts-ignore FIXME:TS fix the \"compatible with each other\"?","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport MapDraw from '../helper/MapDraw.js';\nimport ComponentView from '../../view/Component.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { findEventDispatcher } from '../../util/event.js';\nvar GeoView = /** @class */function (_super) {\n  __extends(GeoView, _super);\n  function GeoView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GeoView.type;\n    _this.focusBlurEnabled = true;\n    return _this;\n  }\n  GeoView.prototype.init = function (ecModel, api) {\n    this._api = api;\n  };\n  GeoView.prototype.render = function (geoModel, ecModel, api, payload) {\n    this._model = geoModel;\n    if (!geoModel.get('show')) {\n      this._mapDraw && this._mapDraw.remove();\n      this._mapDraw = null;\n      return;\n    }\n    if (!this._mapDraw) {\n      this._mapDraw = new MapDraw(api);\n    }\n    var mapDraw = this._mapDraw;\n    mapDraw.draw(geoModel, ecModel, api, this, payload);\n    mapDraw.group.on('click', this._handleRegionClick, this);\n    mapDraw.group.silent = geoModel.get('silent');\n    this.group.add(mapDraw.group);\n    this.updateSelectStatus(geoModel, ecModel, api);\n  };\n  GeoView.prototype._handleRegionClick = function (e) {\n    var eventData;\n    findEventDispatcher(e.target, function (current) {\n      return (eventData = getECData(current).eventData) != null;\n    }, true);\n    if (eventData) {\n      this._api.dispatchAction({\n        type: 'geoToggleSelect',\n        geoId: this._model.id,\n        name: eventData.name\n      });\n    }\n  };\n  GeoView.prototype.updateSelectStatus = function (model, ecModel, api) {\n    var _this = this;\n    this._mapDraw.group.traverse(function (node) {\n      var eventData = getECData(node).eventData;\n      if (eventData) {\n        _this._model.isSelected(eventData.name) ? api.enterSelect(node) : api.leaveSelect(node);\n        // No need to traverse children.\n        return true;\n      }\n    });\n  };\n  GeoView.prototype.findHighDownDispatchers = function (name) {\n    return this._mapDraw && this._mapDraw.findHighDownDispatchers(name, this._model);\n  };\n  GeoView.prototype.dispose = function () {\n    this._mapDraw && this._mapDraw.remove();\n  };\n  GeoView.type = 'geo';\n  return GeoView;\n}(ComponentView);\nexport default GeoView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport GeoModel from '../../coord/geo/GeoModel.js';\nimport geoCreator from '../../coord/geo/geoCreator.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nimport GeoView from './GeoView.js';\nimport geoSourceManager from '../../coord/geo/geoSourceManager.js';\nfunction registerMap(mapName, geoJson, specialAreas) {\n  geoSourceManager.registerMap(mapName, geoJson, specialAreas);\n}\nexport function install(registers) {\n  registers.registerCoordinateSystem('geo', geoCreator);\n  registers.registerComponentModel(GeoModel);\n  registers.registerComponentView(GeoView);\n  registers.registerImpl('registerMap', registerMap);\n  registers.registerImpl('getMap', function (mapName) {\n    return geoSourceManager.getMapForUser(mapName);\n  });\n  function makeAction(method, actionInfo) {\n    actionInfo.update = 'geo:updateSelectStatus';\n    registers.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      var allSelected = [];\n      ecModel.eachComponent({\n        mainType: 'geo',\n        query: payload\n      }, function (geoModel) {\n        geoModel[method](payload.name);\n        var geo = geoModel.coordinateSystem;\n        each(geo.regions, function (region) {\n          selected[region.name] = geoModel.isSelected(region.name) || false;\n        });\n        // Notice: there might be duplicated name in different regions.\n        var names = [];\n        each(selected, function (v, name) {\n          selected[name] && names.push(name);\n        });\n        allSelected.push({\n          geoIndex: geoModel.componentIndex,\n          // Use singular, the same naming convention as the event `selectchanged`.\n          name: names\n        });\n      });\n      return {\n        selected: selected,\n        allSelected: allSelected,\n        name: payload.name\n      };\n    });\n  }\n  makeAction('toggleSelected', {\n    type: 'geoToggleSelect',\n    event: 'geoselectchanged'\n  });\n  makeAction('select', {\n    type: 'geoSelect',\n    event: 'geoselected'\n  });\n  makeAction('unSelect', {\n    type: 'geoUnSelect',\n    event: 'geounselected'\n  });\n  /**\r\n   * @payload\r\n   * @property {string} [componentType=series]\r\n   * @property {number} [dx]\r\n   * @property {number} [dy]\r\n   * @property {number} [zoom]\r\n   * @property {number} [originX]\r\n   * @property {number} [originY]\r\n   */\n  registers.registerAction({\n    type: 'geoRoam',\n    event: 'geoRoam',\n    update: 'updateTransform'\n  }, function (payload, ecModel, api) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      var geo = componentModel.coordinateSystem;\n      if (geo.type !== 'geo') {\n        return;\n      }\n      var res = updateCenterAndZoom(geo, payload, componentModel.get('scaleLimit'), api);\n      componentModel.setCenter && componentModel.setCenter(res.center);\n      componentModel.setZoom && componentModel.setZoom(res.zoom);\n      // All map series with same `map` use the same geo coordinate system\n      // So the center and zoom must be in sync. Include the series not selected by legend\n      if (componentType === 'series') {\n        each(componentModel.seriesGroup, function (seriesModel) {\n          seriesModel.setCenter(res.center);\n          seriesModel.setZoom(res.zoom);\n        });\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport { each, bind, extend } from 'zrender/lib/core/util.js';\nimport { createOrUpdate, clear } from '../../util/throttle.js';\nvar CLICK_THRESHOLD = 5; // > 4\nvar ParallelView = /** @class */function (_super) {\n  __extends(ParallelView, _super);\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelView.type;\n    return _this;\n  }\n  ParallelView.prototype.render = function (parallelModel, ecModel, api) {\n    this._model = parallelModel;\n    this._api = api;\n    if (!this._handlers) {\n      this._handlers = {};\n      each(handlers, function (handler, eventName) {\n        api.getZr().on(eventName, this._handlers[eventName] = bind(handler, this));\n      }, this);\n    }\n    createOrUpdate(this, '_throttledDispatchExpand', parallelModel.get('axisExpandRate'), 'fixRate');\n  };\n  ParallelView.prototype.dispose = function (ecModel, api) {\n    clear(this, '_throttledDispatchExpand');\n    each(this._handlers, function (handler, eventName) {\n      api.getZr().off(eventName, handler);\n    });\n    this._handlers = null;\n  };\n  /**\r\n   * @internal\r\n   * @param {Object} [opt] If null, cancel the last action triggering for debounce.\r\n   */\n  ParallelView.prototype._throttledDispatchExpand = function (opt) {\n    this._dispatchExpand(opt);\n  };\n  /**\r\n   * @internal\r\n   */\n  ParallelView.prototype._dispatchExpand = function (opt) {\n    opt && this._api.dispatchAction(extend({\n      type: 'parallelAxisExpand'\n    }, opt));\n  };\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ComponentView);\nvar handlers = {\n  mousedown: function (e) {\n    if (checkTrigger(this, 'click')) {\n      this._mouseDownPoint = [e.offsetX, e.offsetY];\n    }\n  },\n  mouseup: function (e) {\n    var mouseDownPoint = this._mouseDownPoint;\n    if (checkTrigger(this, 'click') && mouseDownPoint) {\n      var point = [e.offsetX, e.offsetY];\n      var dist = Math.pow(mouseDownPoint[0] - point[0], 2) + Math.pow(mouseDownPoint[1] - point[1], 2);\n      if (dist > CLICK_THRESHOLD) {\n        return;\n      }\n      var result = this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n      result.behavior !== 'none' && this._dispatchExpand({\n        axisExpandWindow: result.axisExpandWindow\n      });\n    }\n    this._mouseDownPoint = null;\n  },\n  mousemove: function (e) {\n    // Should do nothing when brushing.\n    if (this._mouseDownPoint || !checkTrigger(this, 'mousemove')) {\n      return;\n    }\n    var model = this._model;\n    var result = model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n    var behavior = result.behavior;\n    behavior === 'jump' && this._throttledDispatchExpand.debounceNextCall(model.get('axisExpandDebounce'));\n    this._throttledDispatchExpand(behavior === 'none' ? null // Cancel the last trigger, in case that mouse slide out of the area quickly.\n    : {\n      axisExpandWindow: result.axisExpandWindow,\n      // Jumping uses animation, and sliding suppresses animation.\n      animation: behavior === 'jump' ? null : {\n        duration: 0 // Disable animation.\n      }\n    });\n  }\n};\nfunction checkTrigger(view, triggerOn) {\n  var model = view._model;\n  return model.get('axisExpandable') && model.get('axisExpandTriggerOn') === triggerOn;\n}\nexport default ParallelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Calculate slider move result.\r\n * Usage:\r\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\r\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\r\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\r\n *\r\n * @param delta Move length.\r\n * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\r\n *              handleEnds will be modified in this method.\r\n * @param extent handleEnds is restricted by extent.\r\n *              extent[0] should less or equals than extent[1].\r\n * @param handleIndex Can be 'all', means that both move the two handleEnds.\r\n * @param minSpan The range of dataZoom can not be smaller than that.\r\n *              If not set, handle0 and cross handle1. If set as a non-negative\r\n *              number (including `0`), handles will push each other when reaching\r\n *              the minSpan.\r\n * @param maxSpan The range of dataZoom can not be larger than that.\r\n * @return The input handleEnds.\r\n */\nexport default function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0];\n  // Notice maxSpan and minSpan can be null/undefined.\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta;\n  // Restrict in extent.\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent);\n  // Expand span.\n  var currDistSign;\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  }\n  // Shrink span.\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n  return handleEnds;\n}\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex];\n  // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\r\n * params:\r\n *     areas: Array.<Array>, coord relates to container group,\r\n *                             If no container specified, to global.\r\n *     opt {\r\n *         isEnd: boolean,\r\n *         removeOnClick: boolean\r\n *     }\r\n */\nvar BrushController = /** @class */function (_super) {\n  __extends(BrushController, _super);\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\r\n     * @internal\r\n     */\n    _this._track = [];\n    /**\r\n     * @internal\r\n     */\n    _this._covers = [];\n    _this._handlers = {};\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\r\n   * If set to `false`, select disabled.\r\n   */\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr;\n    // Consider roam, which takes globalPan too.\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\r\n   * @param panelOpts If not pass, it is global brush.\r\n   */\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n    return this;\n  };\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n    this._zr.add(thisGroup);\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  };\n  // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n  /**\r\n   * Update covers.\r\n   * @param coverConfigList\r\n   *        If coverConfigList is null/undefined, all covers removed.\r\n   */\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex];\n      // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbidden.\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n    this.enableBrush(false);\n    // container may 'removeAll' outside.\n    clearCovers(this);\n    this._zr.remove(this.group);\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n    return this;\n  };\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n  return BrushController;\n}(Eventful);\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n  return creatingCover;\n}\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n}\n// return target panel or `true` (means global panel)\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n}\n// Return a panel or true\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n  var panelId = cover.__brushOption.panelId;\n  // User may give cover without coord sys info,\n  // which is then treated as global panel.\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n  if (!track.length) {\n    return false;\n  }\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n;\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\nfunction resetCursor(controller, e, localCursorPoint) {\n  if (\n  // Check active\n  !controller._brushType\n  // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint);\n  // Check whether in covers.\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n  currPanel && zr.setCursorStyle('crosshair');\n}\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n  controller._track.push(localCursorPoint.slice());\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n      controller._covers.push(creatingCover);\n    }\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n  return eventParams;\n}\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n    return panel.defaultBrushType;\n  }\n  return brushType;\n}\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null;\n    // trigger event should be at final, after procedure will be nested.\n    eventParams && trigger(controller, eventParams);\n  }\n}\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\r\n * key: brushType\r\n */\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group();\n      // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0));\n      // Use graphic.Polygon close the shape.\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent;\n      // If brushWidth not specified, fit the panel.\n      var panel = getPanelByCover(controller, cover);\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\nimport * as graphicUtil from '../../util/graphic.js';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n}\n// Consider width/height is negative.\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport BrushController from '../helper/BrushController.js';\nimport * as brushHelper from '../helper/brushHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport ComponentView from '../../view/Component.js';\nvar elementList = ['axisLine', 'axisTickLabel', 'axisName'];\nvar ParallelAxisView = /** @class */function (_super) {\n  __extends(ParallelAxisView, _super);\n  function ParallelAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ParallelAxisView.type;\n    return _this;\n  }\n  ParallelAxisView.prototype.init = function (ecModel, api) {\n    _super.prototype.init.apply(this, arguments);\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this));\n  };\n  ParallelAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    if (fromAxisAreaSelect(axisModel, ecModel, payload)) {\n      return;\n    }\n    this.axisModel = axisModel;\n    this.api = api;\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n    if (!axisModel.get('show')) {\n      return;\n    }\n    var coordSysModel = getCoordSysModel(axisModel, ecModel);\n    var coordSys = coordSysModel.coordinateSystem;\n    var areaSelectStyle = axisModel.getAreaSelectStyle();\n    var areaWidth = areaSelectStyle.width;\n    var dim = axisModel.axis.dim;\n    var axisLayout = coordSys.getAxisLayout(dim);\n    var builderOpt = zrUtil.extend({\n      strokeContainThreshold: areaWidth\n    }, axisLayout);\n    var axisBuilder = new AxisBuilder(axisModel, builderOpt);\n    zrUtil.each(elementList, axisBuilder.add, axisBuilder);\n    this._axisGroup.add(axisBuilder.getGroup());\n    this._refreshBrushController(builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n  };\n  // /**\n  //  * @override\n  //  */\n  // updateVisual(axisModel, ecModel, api, payload) {\n  //     this._brushController && this._brushController\n  //         .updateCovers(getCoverInfoList(axisModel));\n  // }\n  ParallelAxisView.prototype._refreshBrushController = function (builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api) {\n    // After filtering, axis may change, select area needs to be update.\n    var extent = axisModel.axis.getExtent();\n    var extentLen = extent[1] - extent[0];\n    var extra = Math.min(30, Math.abs(extentLen) * 0.1); // Arbitrary value.\n    // width/height might be negative, which will be\n    // normalized in BoundingRect.\n    var rect = graphic.BoundingRect.create({\n      x: extent[0],\n      y: -areaWidth / 2,\n      width: extentLen,\n      height: areaWidth\n    });\n    rect.x -= extra;\n    rect.width += 2 * extra;\n    this._brushController.mount({\n      enableGlobalPan: true,\n      rotation: builderOpt.rotation,\n      x: builderOpt.position[0],\n      y: builderOpt.position[1]\n    }).setPanels([{\n      panelId: 'pl',\n      clipPath: brushHelper.makeRectPanelClipPath(rect),\n      isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, coordSysModel),\n      getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect, 0)\n    }]).enableBrush({\n      brushType: 'lineX',\n      brushStyle: areaSelectStyle,\n      removeOnClick: true\n    }).updateCovers(getCoverInfoList(axisModel));\n  };\n  ParallelAxisView.prototype._onBrush = function (eventParam) {\n    var coverInfoList = eventParam.areas;\n    // Do not cache these object, because the mey be changed.\n    var axisModel = this.axisModel;\n    var axis = axisModel.axis;\n    var intervals = zrUtil.map(coverInfoList, function (coverInfo) {\n      return [axis.coordToData(coverInfo.range[0], true), axis.coordToData(coverInfo.range[1], true)];\n    });\n    // If realtime is true, action is not dispatched on drag end, because\n    // the drag end emits the same params with the last drag move event,\n    // and may have some delay when using touch pad.\n    if (!axisModel.option.realtime === eventParam.isEnd || eventParam.removeOnClick) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'axisAreaSelect',\n        parallelAxisId: axisModel.id,\n        intervals: intervals\n      });\n    }\n  };\n  ParallelAxisView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n  ParallelAxisView.type = 'parallelAxis';\n  return ParallelAxisView;\n}(ComponentView);\nfunction fromAxisAreaSelect(axisModel, ecModel, payload) {\n  return payload && payload.type === 'axisAreaSelect' && ecModel.findComponents({\n    mainType: 'parallelAxis',\n    query: payload\n  })[0] === axisModel;\n}\nfunction getCoverInfoList(axisModel) {\n  var axis = axisModel.axis;\n  return zrUtil.map(axisModel.activeIntervals, function (interval) {\n    return {\n      brushType: 'lineX',\n      panelId: 'pl',\n      range: [axis.dataToCoord(interval[0], true), axis.dataToCoord(interval[1], true)]\n    };\n  });\n}\nfunction getCoordSysModel(axisModel, ecModel) {\n  return ecModel.getComponent('parallel', axisModel.get('parallelIndex'));\n}\nexport default ParallelAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar actionInfo = {\n  type: 'axisAreaSelect',\n  event: 'axisAreaSelected'\n  // update: 'updateVisual'\n};\nexport function installParallelActions(registers) {\n  registers.registerAction(actionInfo, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'parallelAxis',\n      query: payload\n    }, function (parallelAxisModel) {\n      parallelAxisModel.axis.model.setActiveIntervals(payload.intervals);\n    });\n  });\n  /**\r\n   * @payload\r\n   */\n  registers.registerAction('parallelAxisExpand', function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'parallel',\n      query: payload\n    }, function (parallelModel) {\n      parallelModel.setAxisExpand(payload);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport parallelPreprocessor from '../../coord/parallel/parallelPreprocessor.js';\nimport ParallelView from './ParallelView.js';\nimport ParallelModel from '../../coord/parallel/ParallelModel.js';\nimport parallelCoordSysCreator from '../../coord/parallel/parallelCreator.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport ParallelAxisModel from '../../coord/parallel/AxisModel.js';\nimport ParallelAxisView from '../axis/ParallelAxisView.js';\nimport { installParallelActions } from '../axis/parallelAxisAction.js';\nvar defaultAxisOption = {\n  type: 'value',\n  areaSelectStyle: {\n    width: 20,\n    borderWidth: 1,\n    borderColor: 'rgba(160,197,232)',\n    color: 'rgba(160,197,232)',\n    opacity: 0.3\n  },\n  realtime: true,\n  z: 10\n};\nexport function install(registers) {\n  registers.registerComponentView(ParallelView);\n  registers.registerComponentModel(ParallelModel);\n  registers.registerCoordinateSystem('parallel', parallelCoordSysCreator);\n  registers.registerPreprocessor(parallelPreprocessor);\n  registers.registerComponentModel(ParallelAxisModel);\n  registers.registerComponentView(ParallelAxisView);\n  axisModelCreator(registers, 'parallel', ParallelAxisModel, defaultAxisOption);\n  installParallelActions(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as axisPointerModelHelper from './modelHelper.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\r\n * Base axis pointer class in 2D.\r\n */\nvar BaseAxisPointer = /** @class */function () {\n  function BaseAxisPointer() {\n    this._dragging = false;\n    /**\r\n     * In px, arbitrary value. Do not set too small,\r\n     * no animation is ok for most cases.\r\n     */\n    this.animationThreshold = 15;\n  }\n  /**\r\n   * @implement\r\n   */\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status');\n    // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api;\n    // Optimize: `render` will be called repeatedly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n    group && group.show();\n    handle && handle.show();\n    // Otherwise status is 'show'\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api);\n    // Enable change axis pointer type.\n    var graphicKey = elOption.graphicKey;\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n    updateMandatoryProps(group, axisPointerModel, true);\n    this._renderHandle(value);\n  };\n  /**\r\n   * @implement\r\n   */\n  BaseAxisPointer.prototype.remove = function (api) {\n    this.clear(api);\n  };\n  /**\r\n   * @implement\r\n   */\n  BaseAxisPointer.prototype.dispose = function (api) {\n    this.clear(api);\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap');\n    // Value axis without snap always do not snap.\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      }\n      // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent();\n        // Approximate band width\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n      return false;\n    }\n    return animation === true;\n  };\n  /**\r\n   * add {pointer, label, graphicKey} to elOption\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    // Should be implemenented by sub-class.\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        // TODOTODO\n        // shape: elOption.label.shape,\n        x: elOption.label.x,\n        y: elOption.label.y\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\r\n   * @private\r\n   */\n  BaseAxisPointer.prototype._renderHandle = function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n    var axisPointerModel = this._axisPointerModel;\n    var zr = this._api.getZr();\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n    var isInit;\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // For mobile device, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n    updateMandatoryProps(handle, axisPointerModel, false);\n    // update style\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY']));\n    // update position\n    var handleSize = handleModel.get('size');\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n    handle.scaleX = handleSize[0] / 2;\n    handle.scaleY = handleSize[1] / 2;\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n    this._moveHandleToValue(value, isInit);\n  };\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  };\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    this._dragging = true;\n    // Persistent for throttle.\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n    this._doDispatchAxisPointer();\n  };\n  /**\r\n   * Throttled method.\r\n   */\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  };\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\n    this._dragging = false;\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var value = this._axisPointerModel.get('value');\n    // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n    this._moveHandleToValue(value);\n    // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  };\n  /**\r\n   * @private\r\n   */\n  BaseAxisPointer.prototype.clear = function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n    throttleUtil.clear(this, '_doDispatchAxisPointer');\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.doClear = function () {\n    // Implemented by sub-class if necessary.\n  };\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  };\n  return BaseAxisPointer;\n}();\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals_1 = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\n    });\n    return !!equals_1;\n  } else {\n    return lastProps === newProps;\n  }\n}\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n}\nfunction getHandleTransProps(trans) {\n  return {\n    x: trans.x || 0,\n    y: trans.y || 0,\n    rotation: trans.rotation || 0\n  };\n}\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\nexport default BaseAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nexport function buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n  return style;\n}\n/**\r\n * @param {Function} labelPos {align, verticalAlign, position}\r\n */\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get(['label', 'precision']),\n    formatter: axisPointerModel.get(['label', 'formatter'])\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2];\n  // Adjust by align.\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2);\n  // Not overflow ec container\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n  }\n  elOption.label = {\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n    x: position[0],\n    y: position[1],\n    style: createTextStyle(labelModel, {\n      text: text,\n      font: font,\n      fill: labelModel.getTextColor(),\n      padding: paddings,\n      backgroundColor: bgColor\n    }),\n    // Label should be over axisPointer.\n    z2: 10\n  };\n}\n// Do not overflow ec container\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel({\n    value: value\n  }, {\n    // If `precision` is set, width can be fixed (like '12.00500'), which\n    // helps to debounce when when moving label.\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n  if (formatter) {\n    var params_1 = {\n      value: axisHelper.getAxisRawValue(axis, {\n        value: value\n      }),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params_1.seriesData.push(dataParams);\n    });\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params_1);\n    }\n  }\n  return text;\n}\nexport function getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  // @ts-ignore\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\nexport function makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\nexport function makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nvar CartesianAxisPointer = /** @class */function (_super) {\n  __extends(CartesianAxisPointer, _super);\n  function CartesianAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * @override\r\n   */\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(\n    // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\r\n   * @override\r\n   */\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    // @ts-ignore\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: pos[0],\n      y: pos[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\r\n   * @override\r\n   */\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    // Make tooltip do not overlap axisPointer and in the middle of the grid.\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  };\n  return CartesianAxisPointer;\n}(BaseAxisPointer);\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\nexport default CartesianAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar AxisPointerModel = /** @class */function (_super) {\n  __extends(AxisPointerModel, _super);\n  function AxisPointerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerModel.type;\n    return _this;\n  }\n  AxisPointerModel.type = 'axisPointer';\n  AxisPointerModel.defaultOption = {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    triggerEmphasis: true,\n    value: null,\n    status: null,\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#B9BEC9',\n      width: 1,\n      type: 'dashed'\n    },\n    shadowStyle: {\n      color: 'rgba(210,219,238,0.2)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      precision: 'auto',\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      borderColor: null,\n      borderWidth: 0,\n      borderRadius: 3\n    },\n    handle: {\n      show: false,\n      // eslint-disable-next-line\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  };\n  return AxisPointerModel;\n}(ComponentModel);\nexport default AxisPointerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\r\n * @param {string} key\r\n * @param {module:echarts/ExtensionAPI} api\r\n * @param {Function} handler\r\n *      param: {string} currTrigger\r\n *      param: {Array.<number>} point\r\n */\nexport function register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove'));\n  // useHandler('mouseout', onLeave);\n  useHandler('globalout', onLeave);\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  };\n  // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\nexport function unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as globalListener from './globalListener.js';\nimport ComponentView from '../../view/Component.js';\nvar AxisPointerView = /** @class */function (_super) {\n  __extends(AxisPointerView, _super);\n  function AxisPointerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerView.type;\n    return _this;\n  }\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click';\n    // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  };\n  AxisPointerView.prototype.remove = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.type = 'axisPointer';\n  return AxisPointerView;\n}(ComponentView);\nexport default AxisPointerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\n/**\r\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\r\n * @param ecModel\r\n * @return  {point: [x, y], el: ...} point Will not be null.\r\n */\nexport default function findPointFromSeries(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    if (finder.isStacked) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var valueAxisDim = valueAxis.dim;\n      var baseAxisDim = baseAxis.dim;\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n      var baseDim = data.mapDimension(baseAxisDim);\n      var stackedData = [];\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n      point = coordSys.dataToPoint(stackedData) || [];\n    } else {\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }), dataIndex)) || [];\n    }\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n  return {\n    point: point,\n    el: el\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner } from '../../util/model.js';\nimport * as modelHelper from './modelHelper.js';\nimport findPointFromSeries from './findPointFromSeries.js';\nimport { each, curry, bind, extend } from 'zrender/lib/core/util.js';\nvar inner = makeInner();\n/**\r\n * Basic logic: check all axis, if they do not demand show/highlight,\r\n * then hide/downplay them.\r\n *\r\n * @return content of event obj for echarts.connect.\r\n */\nexport default function axisTrigger(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n  // Pending\n  // See #6121. But we are not able to reproduce it yet.\n  if (!coordSysAxesInfo) {\n    return;\n  }\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n  var isIllegalPoint = illegalPoint(point);\n  // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputPayload = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  };\n  // Process for triggered axes.\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo);\n      // If no inputAxesInfo, no axis is restricted.\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n      }\n    });\n  });\n  // Process for linked axes.\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup;\n    // If axis has been triggered in the previous stage, it should not be triggered by link.\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey];\n        // If srcValItem exist, source axis is triggered, so link to target axis.\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n  });\n  updateModelActually(showValueMap, axesInfo, outputPayload);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputPayload;\n}\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n  var axis = axisInfo.axis;\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  }\n  // Heavy calculation. So put it after axis.containData checking.\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue;\n  // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    extend(outputFinder, payloadBatch[0]);\n  }\n  // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n  if (!noSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n  updaters.showPointer(axisInfo, newValue, payloadBatch);\n  // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimensionsAll(dim);\n    var seriesNestestValue;\n    var dataIndices;\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value,\n      // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n      if (!dataIndices.length) {\n        return;\n      }\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff);\n    // Consider category case\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel;\n  // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\n  var outputAxesInfo = outputPayload.axesInfo = [];\n  // Basic logic: If no 'show' required, 'hide' this axisPointer.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value;\n      // For label formatter param and highlight.\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    }\n    // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n      // If hide, value still need to be set, consider\n      // click legend to toggle axis blank.\n      !axisInfo.useHandle && (option.status = 'hide');\n    }\n    // If status is 'hide', should be no info in payload.\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  }\n  // In most case only one axis (or event one series is used). It is\n  // convenient to fetch payload.seriesIndex and payload.dataIndex\n  // directly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification should be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {};\n  // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && axisInfo.triggerEmphasis && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  });\n  // Diff.\n  var toHighlight = [];\n  var toDownplay = [];\n  each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toHighlight\n  });\n}\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport AxisView from '../axis/AxisView.js';\nimport CartesianAxisPointer from './CartesianAxisPointer.js';\nimport AxisPointerModel from './AxisPointerModel.js';\nimport AxisPointerView from './AxisPointerView.js';\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { collect } from './modelHelper.js';\nimport axisTrigger from './axisTrigger.js';\nexport function install(registers) {\n  // CartesianAxisPointer is not supposed to be required here. But consider\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\n  // CartesianAxisPointer should be able to required somewhere.\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n  registers.registerComponentModel(AxisPointerModel);\n  registers.registerComponentView(AxisPointerView);\n  registers.registerPreprocessor(function (option) {\n    // Always has a global axisPointerModel for default setting.\n    if (option) {\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n      var link = option.axisPointer.link;\n      // Normalize to array to avoid object mergin. But if link\n      // is not set, remain null/undefined, otherwise it will\n      // override existent link setting.\n      if (link && !isArray(link)) {\n        option.axisPointer.link = [link];\n      }\n    }\n  });\n  // This process should proformed after coordinate systems created\n  // and series data processed. So put it on statistic processing stage.\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n    // allAxesInfo should be updated when setOption performed.\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n  });\n  // Broadcast to all views.\n  registers.registerAction({\n    type: 'updateAxisPointer',\n    event: 'updateAxisPointer',\n    update: ':updateAxisPointer'\n  }, axisTrigger);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { install as installSimple } from './installSimple.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nvar PolarAxisPointer = /** @class */function (_super) {\n  __extends(PolarAxisPointer, _super);\n  function PolarAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * @override\r\n   */\n  PolarAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    if (axis.dim === 'angle') {\n      this.animationThreshold = Math.PI / 18;\n    }\n    var polar = axis.polar;\n    var otherAxis = polar.getOtherAxis(axis);\n    var otherExtent = otherAxis.getExtent();\n    var coordValue = axis.dataToCoord(value);\n    var axisPointerType = axisPointerModel.get('type');\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, polar, coordValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n    var labelMargin = axisPointerModel.get(['label', 'margin']);\n    var labelPos = getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin);\n    viewHelper.buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos);\n  };\n  return PolarAxisPointer;\n}(BaseAxisPointer);\n;\nfunction getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin) {\n  var axis = axisModel.axis;\n  var coord = axis.dataToCoord(value);\n  var axisAngle = polar.getAngleAxis().getExtent()[0];\n  axisAngle = axisAngle / 180 * Math.PI;\n  var radiusExtent = polar.getRadiusAxis().getExtent();\n  var position;\n  var align;\n  var verticalAlign;\n  if (axis.dim === 'radius') {\n    var transform = matrix.create();\n    matrix.rotate(transform, transform, axisAngle);\n    matrix.translate(transform, transform, [polar.cx, polar.cy]);\n    position = graphic.applyTransform([coord, -labelMargin], transform);\n    var labelRotation = axisModel.getModel('axisLabel').get('rotate') || 0;\n    // @ts-ignore\n    var labelLayout = AxisBuilder.innerTextLayout(axisAngle, labelRotation * Math.PI / 180, -1);\n    align = labelLayout.textAlign;\n    verticalAlign = labelLayout.textVerticalAlign;\n  } else {\n    // angle axis\n    var r = radiusExtent[1];\n    position = polar.coordToPoint([r + labelMargin, coord]);\n    var cx = polar.cx;\n    var cy = polar.cy;\n    align = Math.abs(position[0] - cx) / r < 0.3 ? 'center' : position[0] > cx ? 'left' : 'right';\n    verticalAlign = Math.abs(position[1] - cy) / r < 0.3 ? 'middle' : position[1] > cy ? 'top' : 'bottom';\n  }\n  return {\n    position: position,\n    align: align,\n    verticalAlign: verticalAlign\n  };\n}\nvar pointerShapeBuilder = {\n  line: function (axis, polar, coordValue, otherExtent) {\n    return axis.dim === 'angle' ? {\n      type: 'Line',\n      shape: viewHelper.makeLineShape(polar.coordToPoint([otherExtent[0], coordValue]), polar.coordToPoint([otherExtent[1], coordValue]))\n    } : {\n      type: 'Circle',\n      shape: {\n        cx: polar.cx,\n        cy: polar.cy,\n        r: coordValue\n      }\n    };\n  },\n  shadow: function (axis, polar, coordValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var radian = Math.PI / 180;\n    return axis.dim === 'angle' ? {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, otherExtent[0], otherExtent[1],\n      // In ECharts y is negative if angle is positive\n      (-coordValue - bandWidth / 2) * radian, (-coordValue + bandWidth / 2) * radian)\n    } : {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, coordValue - bandWidth / 2, coordValue + bandWidth / 2, 0, Math.PI * 2)\n    };\n  }\n};\nexport default PolarAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport Model from '../../model/Model.js';\nimport AxisView from './AxisView.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport { getECData } from '../../util/innerStore.js';\nvar elementList = ['axisLine', 'axisLabel', 'axisTick', 'minorTick', 'splitLine', 'minorSplitLine', 'splitArea'];\nfunction getAxisLineShape(polar, rExtent, angle) {\n  rExtent[1] > rExtent[0] && (rExtent = rExtent.slice().reverse());\n  var start = polar.coordToPoint([rExtent[0], angle]);\n  var end = polar.coordToPoint([rExtent[1], angle]);\n  return {\n    x1: start[0],\n    y1: start[1],\n    x2: end[0],\n    y2: end[1]\n  };\n}\nfunction getRadiusIdx(polar) {\n  var radiusAxis = polar.getRadiusAxis();\n  return radiusAxis.inverse ? 0 : 1;\n}\n// Remove the last tick which will overlap the first tick\nfunction fixAngleOverlap(list) {\n  var firstItem = list[0];\n  var lastItem = list[list.length - 1];\n  if (firstItem && lastItem && Math.abs(Math.abs(firstItem.coord - lastItem.coord) - 360) < 1e-4) {\n    list.pop();\n  }\n}\nvar AngleAxisView = /** @class */function (_super) {\n  __extends(AngleAxisView, _super);\n  function AngleAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AngleAxisView.type;\n    _this.axisPointerClass = 'PolarAxisPointer';\n    return _this;\n  }\n  AngleAxisView.prototype.render = function (angleAxisModel, ecModel) {\n    this.group.removeAll();\n    if (!angleAxisModel.get('show')) {\n      return;\n    }\n    var angleAxis = angleAxisModel.axis;\n    var polar = angleAxis.polar;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var ticksAngles = angleAxis.getTicksCoords();\n    var minorTickAngles = angleAxis.getMinorTicksCoords();\n    var labels = zrUtil.map(angleAxis.getViewLabels(), function (labelItem) {\n      labelItem = zrUtil.clone(labelItem);\n      var scale = angleAxis.scale;\n      var tickValue = scale.type === 'ordinal' ? scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n      labelItem.coord = angleAxis.dataToCoord(tickValue);\n      return labelItem;\n    });\n    fixAngleOverlap(labels);\n    fixAngleOverlap(ticksAngles);\n    zrUtil.each(elementList, function (name) {\n      if (angleAxisModel.get([name, 'show']) && (!angleAxis.scale.isBlank() || name === 'axisLine')) {\n        angelAxisElementsBuilders[name](this.group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent, labels);\n      }\n    }, this);\n  };\n  AngleAxisView.type = 'angleAxis';\n  return AngleAxisView;\n}(AxisView);\nvar angelAxisElementsBuilders = {\n  axisLine: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var lineStyleModel = angleAxisModel.getModel(['axisLine', 'lineStyle']);\n    var angleAxis = polar.getAngleAxis();\n    var RADIAN = Math.PI / 180;\n    var angleExtent = angleAxis.getExtent();\n    // extent id of the axis radius (r0 and r)\n    var rId = getRadiusIdx(polar);\n    var r0Id = rId ? 0 : 1;\n    var shape;\n    var shapeType = Math.abs(angleExtent[1] - angleExtent[0]) === 360 ? 'Circle' : 'Arc';\n    if (radiusExtent[r0Id] === 0) {\n      shape = new graphic[shapeType]({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: radiusExtent[rId],\n          startAngle: -angleExtent[0] * RADIAN,\n          endAngle: -angleExtent[1] * RADIAN,\n          clockwise: angleAxis.inverse\n        },\n        style: lineStyleModel.getLineStyle(),\n        z2: 1,\n        silent: true\n      });\n    } else {\n      shape = new graphic.Ring({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: radiusExtent[rId],\n          r0: radiusExtent[r0Id]\n        },\n        style: lineStyleModel.getLineStyle(),\n        z2: 1,\n        silent: true\n      });\n    }\n    shape.style.fill = null;\n    group.add(shape);\n  },\n  axisTick: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var tickModel = angleAxisModel.getModel('axisTick');\n    var tickLen = (tickModel.get('inside') ? -1 : 1) * tickModel.get('length');\n    var radius = radiusExtent[getRadiusIdx(polar)];\n    var lines = zrUtil.map(ticksAngles, function (tickAngleItem) {\n      return new graphic.Line({\n        shape: getAxisLineShape(polar, [radius, radius + tickLen], tickAngleItem.coord)\n      });\n    });\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults(tickModel.getModel('lineStyle').getLineStyle(), {\n        stroke: angleAxisModel.get(['axisLine', 'lineStyle', 'color'])\n      })\n    }));\n  },\n  minorTick: function (group, angleAxisModel, polar, tickAngles, minorTickAngles, radiusExtent) {\n    if (!minorTickAngles.length) {\n      return;\n    }\n    var tickModel = angleAxisModel.getModel('axisTick');\n    var minorTickModel = angleAxisModel.getModel('minorTick');\n    var tickLen = (tickModel.get('inside') ? -1 : 1) * minorTickModel.get('length');\n    var radius = radiusExtent[getRadiusIdx(polar)];\n    var lines = [];\n    for (var i = 0; i < minorTickAngles.length; i++) {\n      for (var k = 0; k < minorTickAngles[i].length; k++) {\n        lines.push(new graphic.Line({\n          shape: getAxisLineShape(polar, [radius, radius + tickLen], minorTickAngles[i][k].coord)\n        }));\n      }\n    }\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults(minorTickModel.getModel('lineStyle').getLineStyle(), zrUtil.defaults(tickModel.getLineStyle(), {\n        stroke: angleAxisModel.get(['axisLine', 'lineStyle', 'color'])\n      }))\n    }));\n  },\n  axisLabel: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent, labels) {\n    var rawCategoryData = angleAxisModel.getCategories(true);\n    var commonLabelModel = angleAxisModel.getModel('axisLabel');\n    var labelMargin = commonLabelModel.get('margin');\n    var triggerEvent = angleAxisModel.get('triggerEvent');\n    // Use length of ticksAngles because it may remove the last tick to avoid overlapping\n    zrUtil.each(labels, function (labelItem, idx) {\n      var labelModel = commonLabelModel;\n      var tickValue = labelItem.tickValue;\n      var r = radiusExtent[getRadiusIdx(polar)];\n      var p = polar.coordToPoint([r + labelMargin, labelItem.coord]);\n      var cx = polar.cx;\n      var cy = polar.cy;\n      var labelTextAlign = Math.abs(p[0] - cx) / r < 0.3 ? 'center' : p[0] > cx ? 'left' : 'right';\n      var labelTextVerticalAlign = Math.abs(p[1] - cy) / r < 0.3 ? 'middle' : p[1] > cy ? 'top' : 'bottom';\n      if (rawCategoryData && rawCategoryData[tickValue]) {\n        var rawCategoryItem = rawCategoryData[tickValue];\n        if (zrUtil.isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n          labelModel = new Model(rawCategoryItem.textStyle, commonLabelModel, commonLabelModel.ecModel);\n        }\n      }\n      var textEl = new graphic.Text({\n        silent: AxisBuilder.isLabelSilent(angleAxisModel),\n        style: createTextStyle(labelModel, {\n          x: p[0],\n          y: p[1],\n          fill: labelModel.getTextColor() || angleAxisModel.get(['axisLine', 'lineStyle', 'color']),\n          text: labelItem.formattedLabel,\n          align: labelTextAlign,\n          verticalAlign: labelTextVerticalAlign\n        })\n      });\n      group.add(textEl);\n      // Pack data for mouse event\n      if (triggerEvent) {\n        var eventData = AxisBuilder.makeAxisEventDataBase(angleAxisModel);\n        eventData.targetType = 'axisLabel';\n        eventData.value = labelItem.rawLabel;\n        getECData(textEl).eventData = eventData;\n      }\n    }, this);\n  },\n  splitLine: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var splitLineModel = angleAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n    for (var i = 0; i < ticksAngles.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Line({\n        shape: getAxisLineShape(polar, radiusExtent, ticksAngles[i].coord)\n      }));\n    }\n    // Simple optimization\n    // Batching the lines if color are the same\n    for (var i = 0; i < splitLines.length; i++) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyleModel.getLineStyle()),\n        silent: true,\n        z: angleAxisModel.get('z')\n      }));\n    }\n  },\n  minorSplitLine: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    if (!minorTickAngles.length) {\n      return;\n    }\n    var minorSplitLineModel = angleAxisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var lines = [];\n    for (var i = 0; i < minorTickAngles.length; i++) {\n      for (var k = 0; k < minorTickAngles[i].length; k++) {\n        lines.push(new graphic.Line({\n          shape: getAxisLineShape(polar, radiusExtent, minorTickAngles[i][k].coord)\n        }));\n      }\n    }\n    group.add(graphic.mergePath(lines, {\n      style: lineStyleModel.getLineStyle(),\n      silent: true,\n      z: angleAxisModel.get('z')\n    }));\n  },\n  splitArea: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    if (!ticksAngles.length) {\n      return;\n    }\n    var splitAreaModel = angleAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var RADIAN = Math.PI / 180;\n    var prevAngle = -ticksAngles[0].coord * RADIAN;\n    var r0 = Math.min(radiusExtent[0], radiusExtent[1]);\n    var r1 = Math.max(radiusExtent[0], radiusExtent[1]);\n    var clockwise = angleAxisModel.get('clockwise');\n    for (var i = 1, len = ticksAngles.length; i <= len; i++) {\n      var coord = i === len ? ticksAngles[0].coord : ticksAngles[i].coord;\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: r0,\n          r: r1,\n          startAngle: prevAngle,\n          endAngle: -coord * RADIAN,\n          clockwise: clockwise\n        },\n        silent: true\n      }));\n      prevAngle = -coord * RADIAN;\n    }\n    // Simple optimization\n    // Batching the lines if color are the same\n    for (var i = 0; i < splitAreas.length; i++) {\n      group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n};\nexport default AngleAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport AxisView from './AxisView.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitLine', 'splitArea', 'minorSplitLine'];\nvar RadiusAxisView = /** @class */function (_super) {\n  __extends(RadiusAxisView, _super);\n  function RadiusAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = RadiusAxisView.type;\n    _this.axisPointerClass = 'PolarAxisPointer';\n    return _this;\n  }\n  RadiusAxisView.prototype.render = function (radiusAxisModel, ecModel) {\n    this.group.removeAll();\n    if (!radiusAxisModel.get('show')) {\n      return;\n    }\n    var oldAxisGroup = this._axisGroup;\n    var newAxisGroup = this._axisGroup = new graphic.Group();\n    this.group.add(newAxisGroup);\n    var radiusAxis = radiusAxisModel.axis;\n    var polar = radiusAxis.polar;\n    var angleAxis = polar.getAngleAxis();\n    var ticksCoords = radiusAxis.getTicksCoords();\n    var minorTicksCoords = radiusAxis.getMinorTicksCoords();\n    var axisAngle = angleAxis.getExtent()[0];\n    var radiusExtent = radiusAxis.getExtent();\n    var layout = layoutAxis(polar, radiusAxisModel, axisAngle);\n    var axisBuilder = new AxisBuilder(radiusAxisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    newAxisGroup.add(axisBuilder.getGroup());\n    graphic.groupTransition(oldAxisGroup, newAxisGroup, radiusAxisModel);\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (radiusAxisModel.get([name, 'show']) && !radiusAxis.scale.isBlank()) {\n        axisElementBuilders[name](this.group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords, minorTicksCoords);\n      }\n    }, this);\n  };\n  RadiusAxisView.type = 'radiusAxis';\n  return RadiusAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    var splitLineModel = radiusAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    var angleAxis = polar.getAngleAxis();\n    var RADIAN = Math.PI / 180;\n    var angleExtent = angleAxis.getExtent();\n    var shapeType = Math.abs(angleExtent[1] - angleExtent[0]) === 360 ? 'Circle' : 'Arc';\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic[shapeType]({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          // ensure circle radius >= 0\n          r: Math.max(ticksCoords[i].coord, 0),\n          startAngle: -angleExtent[0] * RADIAN,\n          endAngle: -angleExtent[1] * RADIAN,\n          clockwise: angleAxis.inverse\n        }\n      }));\n    }\n    // Simple optimization\n    // Batching the lines if color are the same\n    for (var i = 0; i < splitLines.length; i++) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length],\n          fill: null\n        }, lineStyleModel.getLineStyle()),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function (group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords, minorTicksCoords) {\n    if (!minorTicksCoords.length) {\n      return;\n    }\n    var minorSplitLineModel = radiusAxisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var lines = [];\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        lines.push(new graphic.Circle({\n          shape: {\n            cx: polar.cx,\n            cy: polar.cy,\n            r: minorTicksCoords[i][k].coord\n          }\n        }));\n      }\n    }\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults({\n        fill: null\n      }, lineStyleModel.getLineStyle()),\n      silent: true\n    }));\n  },\n  splitArea: function (group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    if (!ticksCoords.length) {\n      return;\n    }\n    var splitAreaModel = radiusAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var prevRadius = ticksCoords[0].coord;\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: prevRadius,\n          r: ticksCoords[i].coord,\n          startAngle: 0,\n          endAngle: Math.PI * 2\n        },\n        silent: true\n      }));\n      prevRadius = ticksCoords[i].coord;\n    }\n    // Simple optimization\n    // Batching the lines if color are the same\n    for (var i = 0; i < splitAreas.length; i++) {\n      group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n};\n/**\r\n * @inner\r\n */\nfunction layoutAxis(polar, radiusAxisModel, axisAngle) {\n  return {\n    position: [polar.cx, polar.cy],\n    rotation: axisAngle / 180 * Math.PI,\n    labelDirection: -1,\n    tickDirection: -1,\n    nameDirection: 1,\n    labelRotate: radiusAxisModel.getModel('axisLabel').get('rotate'),\n    // Over splitLine and splitArea\n    z2: 1\n  };\n}\nexport default RadiusAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension.js';\nimport AxisView from '../axis/AxisView.js';\nimport PolarAxisPointer from '../axisPointer/PolarAxisPointer.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport PolarModel from '../../coord/polar/PolarModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport { AngleAxisModel, RadiusAxisModel } from '../../coord/polar/AxisModel.js';\nimport polarCreator from '../../coord/polar/polarCreator.js';\nimport AngleAxisView from '../axis/AngleAxisView.js';\nimport RadiusAxisView from '../axis/RadiusAxisView.js';\nimport ComponentView from '../../view/Component.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport barLayoutPolar from '../../layout/barPolar.js';\nvar angleAxisExtraOption = {\n  startAngle: 90,\n  clockwise: true,\n  splitNumber: 12,\n  axisLabel: {\n    rotate: 0\n  }\n};\nvar radiusAxisExtraOption = {\n  splitNumber: 5\n};\nvar PolarView = /** @class */function (_super) {\n  __extends(PolarView, _super);\n  function PolarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PolarView.type;\n    return _this;\n  }\n  PolarView.type = 'polar';\n  return PolarView;\n}(ComponentView);\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('PolarAxisPointer', PolarAxisPointer);\n  registers.registerCoordinateSystem('polar', polarCreator);\n  registers.registerComponentModel(PolarModel);\n  registers.registerComponentView(PolarView);\n  // Model and view for angleAxis and radiusAxis\n  axisModelCreator(registers, 'angle', AngleAxisModel, angleAxisExtraOption);\n  axisModelCreator(registers, 'radius', RadiusAxisModel, radiusAxisExtraOption);\n  registers.registerComponentView(AngleAxisView);\n  registers.registerComponentView(RadiusAxisView);\n  registers.registerLayout(curry(barLayoutPolar, 'bar'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper.js';\nimport AxisView from './AxisView.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine'];\nvar SingleAxisView = /** @class */function (_super) {\n  __extends(SingleAxisView, _super);\n  function SingleAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SingleAxisView.type;\n    _this.axisPointerClass = 'SingleAxisPointer';\n    return _this;\n  }\n  SingleAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    var layout = singleAxisHelper.layout(axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    group.add(this._axisGroup);\n    group.add(axisBuilder.getGroup());\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this.group, this._axisGroup, axisModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n  SingleAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n  SingleAxisView.type = 'singleAxis';\n  return SingleAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (axisView, group, axisGroup, axisModel) {\n    var axis = axisModel.axis;\n    if (axis.scale.isBlank()) {\n      return;\n    }\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var lineWidth = lineStyleModel.get('width');\n    var gridRect = axisModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var splitLines = [];\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    for (var i = 0; i < ticksCoords.length; ++i) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n      var line = new graphic.Line({\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineWidth);\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(line);\n    }\n    var lineStyle = lineStyleModel.getLineStyle(['color']);\n    for (var i = 0; i < splitLines.length; ++i) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  splitArea: function (axisView, group, axisGroup, axisModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, axisModel);\n  }\n};\nexport default SingleAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper.js';\nvar XY = ['x', 'y'];\nvar WH = ['width', 'height'];\nvar SingleAxisPointer = /** @class */function (_super) {\n  __extends(SingleAxisPointer, _super);\n  function SingleAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * @override\r\n   */\n  SingleAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var otherExtent = getGlobalExtent(coordSys, 1 - getPointDimIndex(axis));\n    var pixelValue = coordSys.dataToPoint(value)[0];\n    var axisPointerType = axisPointerModel.get('type');\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n    var layoutInfo = singleAxisHelper.layout(axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(\n    // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\r\n   * @override\r\n   */\n  SingleAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = singleAxisHelper.layout(axisModel, {\n      labelInside: false\n    });\n    // @ts-ignore\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var position = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: position[0],\n      y: position[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\r\n   * @override\r\n   */\n  SingleAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var dimIndex = getPointDimIndex(axis);\n    var axisExtent = getGlobalExtent(coordSys, dimIndex);\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var otherExtent = getGlobalExtent(coordSys, 1 - dimIndex);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: {\n        verticalAlign: 'middle'\n      }\n    };\n  };\n  return SingleAxisPointer;\n}(BaseAxisPointer);\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getPointDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = axis.getBandWidth();\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getPointDimIndex(axis))\n    };\n  }\n};\nfunction getPointDimIndex(axis) {\n  return axis.isHorizontal() ? 0 : 1;\n}\nfunction getGlobalExtent(coordSys, dimIndex) {\n  var rect = coordSys.getRect();\n  return [rect[XY[dimIndex]], rect[XY[dimIndex]] + rect[WH[dimIndex]]];\n}\nexport default SingleAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension.js';\nimport ComponentView from '../../view/Component.js';\nimport SingleAxisView from '../axis/SingleAxisView.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport SingleAxisModel from '../../coord/single/AxisModel.js';\nimport singleCreator from '../../coord/single/singleCreator.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport AxisView from '../axis/AxisView.js';\nimport SingleAxisPointer from '../axisPointer/SingleAxisPointer.js';\nvar SingleView = /** @class */function (_super) {\n  __extends(SingleView, _super);\n  function SingleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SingleView.type;\n    return _this;\n  }\n  SingleView.type = 'single';\n  return SingleView;\n}(ComponentView);\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('SingleAxisPointer', SingleAxisPointer);\n  registers.registerComponentView(SingleView);\n  // Axis\n  registers.registerComponentView(SingleAxisView);\n  registers.registerComponentModel(SingleAxisModel);\n  axisModelCreator(registers, 'single', SingleAxisModel, SingleAxisModel.defaultOption);\n  registers.registerCoordinateSystem('single', singleCreator);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { isString, extend, map, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { formatTplSimple } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport ComponentView from '../../view/Component.js';\nimport { getLocaleModel } from '../../core/locale.js';\nvar CalendarView = /** @class */function (_super) {\n  __extends(CalendarView, _super);\n  function CalendarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CalendarView.type;\n    return _this;\n  }\n  CalendarView.prototype.render = function (calendarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    var coordSys = calendarModel.coordinateSystem;\n    // range info\n    var rangeData = coordSys.getRangeInfo();\n    var orient = coordSys.getOrient();\n    // locale\n    var localeModel = ecModel.getLocaleModel();\n    this._renderDayRect(calendarModel, rangeData, group);\n    // _renderLines must be called prior to following function\n    this._renderLines(calendarModel, rangeData, orient, group);\n    this._renderYearText(calendarModel, rangeData, orient, group);\n    this._renderMonthText(calendarModel, localeModel, orient, group);\n    this._renderWeekText(calendarModel, localeModel, rangeData, orient, group);\n  };\n  // render day rect\n  CalendarView.prototype._renderDayRect = function (calendarModel, rangeData, group) {\n    var coordSys = calendarModel.coordinateSystem;\n    var itemRectStyleModel = calendarModel.getModel('itemStyle').getItemStyle();\n    var sw = coordSys.getCellWidth();\n    var sh = coordSys.getCellHeight();\n    for (var i = rangeData.start.time; i <= rangeData.end.time; i = coordSys.getNextNDay(i, 1).time) {\n      var point = coordSys.dataToRect([i], false).tl;\n      // every rect\n      var rect = new graphic.Rect({\n        shape: {\n          x: point[0],\n          y: point[1],\n          width: sw,\n          height: sh\n        },\n        cursor: 'default',\n        style: itemRectStyleModel\n      });\n      group.add(rect);\n    }\n  };\n  // render separate line\n  CalendarView.prototype._renderLines = function (calendarModel, rangeData, orient, group) {\n    var self = this;\n    var coordSys = calendarModel.coordinateSystem;\n    var lineStyleModel = calendarModel.getModel(['splitLine', 'lineStyle']).getLineStyle();\n    var show = calendarModel.get(['splitLine', 'show']);\n    var lineWidth = lineStyleModel.lineWidth;\n    this._tlpoints = [];\n    this._blpoints = [];\n    this._firstDayOfMonth = [];\n    this._firstDayPoints = [];\n    var firstDay = rangeData.start;\n    for (var i = 0; firstDay.time <= rangeData.end.time; i++) {\n      addPoints(firstDay.formatedDate);\n      if (i === 0) {\n        firstDay = coordSys.getDateInfo(rangeData.start.y + '-' + rangeData.start.m);\n      }\n      var date = firstDay.date;\n      date.setMonth(date.getMonth() + 1);\n      firstDay = coordSys.getDateInfo(date);\n    }\n    addPoints(coordSys.getNextNDay(rangeData.end.time, 1).formatedDate);\n    function addPoints(date) {\n      self._firstDayOfMonth.push(coordSys.getDateInfo(date));\n      self._firstDayPoints.push(coordSys.dataToRect([date], false).tl);\n      var points = self._getLinePointsOfOneWeek(calendarModel, date, orient);\n      self._tlpoints.push(points[0]);\n      self._blpoints.push(points[points.length - 1]);\n      show && self._drawSplitline(points, lineStyleModel, group);\n    }\n    // render top/left line\n    show && this._drawSplitline(self._getEdgesPoints(self._tlpoints, lineWidth, orient), lineStyleModel, group);\n    // render bottom/right line\n    show && this._drawSplitline(self._getEdgesPoints(self._blpoints, lineWidth, orient), lineStyleModel, group);\n  };\n  // get points at both ends\n  CalendarView.prototype._getEdgesPoints = function (points, lineWidth, orient) {\n    var rs = [points[0].slice(), points[points.length - 1].slice()];\n    var idx = orient === 'horizontal' ? 0 : 1;\n    // both ends of the line are extend half lineWidth\n    rs[0][idx] = rs[0][idx] - lineWidth / 2;\n    rs[1][idx] = rs[1][idx] + lineWidth / 2;\n    return rs;\n  };\n  // render split line\n  CalendarView.prototype._drawSplitline = function (points, lineStyle, group) {\n    var poyline = new graphic.Polyline({\n      z2: 20,\n      shape: {\n        points: points\n      },\n      style: lineStyle\n    });\n    group.add(poyline);\n  };\n  // render month line of one week points\n  CalendarView.prototype._getLinePointsOfOneWeek = function (calendarModel, date, orient) {\n    var coordSys = calendarModel.coordinateSystem;\n    var parsedDate = coordSys.getDateInfo(date);\n    var points = [];\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(parsedDate.time, i);\n      var point = coordSys.dataToRect([tmpD.time], false);\n      points[2 * tmpD.day] = point.tl;\n      points[2 * tmpD.day + 1] = point[orient === 'horizontal' ? 'bl' : 'tr'];\n    }\n    return points;\n  };\n  CalendarView.prototype._formatterLabel = function (formatter, params) {\n    if (isString(formatter) && formatter) {\n      return formatTplSimple(formatter, params);\n    }\n    if (isFunction(formatter)) {\n      return formatter(params);\n    }\n    return params.nameMap;\n  };\n  CalendarView.prototype._yearTextPositionControl = function (textEl, point, orient, position, margin) {\n    var x = point[0];\n    var y = point[1];\n    var aligns = ['center', 'bottom'];\n    if (position === 'bottom') {\n      y += margin;\n      aligns = ['center', 'top'];\n    } else if (position === 'left') {\n      x -= margin;\n    } else if (position === 'right') {\n      x += margin;\n      aligns = ['center', 'top'];\n    } else {\n      // top\n      y -= margin;\n    }\n    var rotate = 0;\n    if (position === 'left' || position === 'right') {\n      rotate = Math.PI / 2;\n    }\n    return {\n      rotation: rotate,\n      x: x,\n      y: y,\n      style: {\n        align: aligns[0],\n        verticalAlign: aligns[1]\n      }\n    };\n  };\n  // render year\n  CalendarView.prototype._renderYearText = function (calendarModel, rangeData, orient, group) {\n    var yearLabel = calendarModel.getModel('yearLabel');\n    if (!yearLabel.get('show')) {\n      return;\n    }\n    var margin = yearLabel.get('margin');\n    var pos = yearLabel.get('position');\n    if (!pos) {\n      pos = orient !== 'horizontal' ? 'top' : 'left';\n    }\n    var points = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]];\n    var xc = (points[0][0] + points[1][0]) / 2;\n    var yc = (points[0][1] + points[1][1]) / 2;\n    var idx = orient === 'horizontal' ? 0 : 1;\n    var posPoints = {\n      top: [xc, points[idx][1]],\n      bottom: [xc, points[1 - idx][1]],\n      left: [points[1 - idx][0], yc],\n      right: [points[idx][0], yc]\n    };\n    var name = rangeData.start.y;\n    if (+rangeData.end.y > +rangeData.start.y) {\n      name = name + '-' + rangeData.end.y;\n    }\n    var formatter = yearLabel.get('formatter');\n    var params = {\n      start: rangeData.start.y,\n      end: rangeData.end.y,\n      nameMap: name\n    };\n    var content = this._formatterLabel(formatter, params);\n    var yearText = new graphic.Text({\n      z2: 30,\n      style: createTextStyle(yearLabel, {\n        text: content\n      }),\n      silent: yearLabel.get('silent')\n    });\n    yearText.attr(this._yearTextPositionControl(yearText, posPoints[pos], orient, pos, margin));\n    group.add(yearText);\n  };\n  CalendarView.prototype._monthTextPositionControl = function (point, isCenter, orient, position, margin) {\n    var align = 'left';\n    var vAlign = 'top';\n    var x = point[0];\n    var y = point[1];\n    if (orient === 'horizontal') {\n      y = y + margin;\n      if (isCenter) {\n        align = 'center';\n      }\n      if (position === 'start') {\n        vAlign = 'bottom';\n      }\n    } else {\n      x = x + margin;\n      if (isCenter) {\n        vAlign = 'middle';\n      }\n      if (position === 'start') {\n        align = 'right';\n      }\n    }\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  };\n  // render month and year text\n  CalendarView.prototype._renderMonthText = function (calendarModel, localeModel, orient, group) {\n    var monthLabel = calendarModel.getModel('monthLabel');\n    if (!monthLabel.get('show')) {\n      return;\n    }\n    var nameMap = monthLabel.get('nameMap');\n    var margin = monthLabel.get('margin');\n    var pos = monthLabel.get('position');\n    var align = monthLabel.get('align');\n    var termPoints = [this._tlpoints, this._blpoints];\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      }\n      // PENDING\n      // for ZH locale, original form is `` but current form is `1`\n      nameMap = localeModel.get(['time', 'monthAbbr']) || [];\n    }\n    var idx = pos === 'start' ? 0 : 1;\n    var axis = orient === 'horizontal' ? 0 : 1;\n    margin = pos === 'start' ? -margin : margin;\n    var isCenter = align === 'center';\n    var labelSilent = monthLabel.get('silent');\n    for (var i = 0; i < termPoints[idx].length - 1; i++) {\n      var tmp = termPoints[idx][i].slice();\n      var firstDay = this._firstDayOfMonth[i];\n      if (isCenter) {\n        var firstDayPoints = this._firstDayPoints[i];\n        tmp[axis] = (firstDayPoints[axis] + termPoints[0][i + 1][axis]) / 2;\n      }\n      var formatter = monthLabel.get('formatter');\n      var name_1 = nameMap[+firstDay.m - 1];\n      var params = {\n        yyyy: firstDay.y,\n        yy: (firstDay.y + '').slice(2),\n        MM: firstDay.m,\n        M: +firstDay.m,\n        nameMap: name_1\n      };\n      var content = this._formatterLabel(formatter, params);\n      var monthText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(monthLabel, {\n          text: content\n        }), this._monthTextPositionControl(tmp, isCenter, orient, pos, margin)),\n        silent: labelSilent\n      });\n      group.add(monthText);\n    }\n  };\n  CalendarView.prototype._weekTextPositionControl = function (point, orient, position, margin, cellSize) {\n    var align = 'center';\n    var vAlign = 'middle';\n    var x = point[0];\n    var y = point[1];\n    var isStart = position === 'start';\n    if (orient === 'horizontal') {\n      x = x + margin + (isStart ? 1 : -1) * cellSize[0] / 2;\n      align = isStart ? 'right' : 'left';\n    } else {\n      y = y + margin + (isStart ? 1 : -1) * cellSize[1] / 2;\n      vAlign = isStart ? 'bottom' : 'top';\n    }\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  };\n  // render weeks\n  CalendarView.prototype._renderWeekText = function (calendarModel, localeModel, rangeData, orient, group) {\n    var dayLabel = calendarModel.getModel('dayLabel');\n    if (!dayLabel.get('show')) {\n      return;\n    }\n    var coordSys = calendarModel.coordinateSystem;\n    var pos = dayLabel.get('position');\n    var nameMap = dayLabel.get('nameMap');\n    var margin = dayLabel.get('margin');\n    var firstDayOfWeek = coordSys.getFirstDayOfWeek();\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      }\n      // Use the first letter of `dayOfWeekAbbr` if `dayOfWeekShort` doesn't exist in the locale file\n      var dayOfWeekShort = localeModel.get(['time', 'dayOfWeekShort']);\n      nameMap = dayOfWeekShort || map(localeModel.get(['time', 'dayOfWeekAbbr']), function (val) {\n        return val[0];\n      });\n    }\n    var start = coordSys.getNextNDay(rangeData.end.time, 7 - rangeData.lweek).time;\n    var cellSize = [coordSys.getCellWidth(), coordSys.getCellHeight()];\n    margin = parsePercent(margin, Math.min(cellSize[1], cellSize[0]));\n    if (pos === 'start') {\n      start = coordSys.getNextNDay(rangeData.start.time, -(7 + rangeData.fweek)).time;\n      margin = -margin;\n    }\n    var labelSilent = dayLabel.get('silent');\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(start, i);\n      var point = coordSys.dataToRect([tmpD.time], false).center;\n      var day = i;\n      day = Math.abs((i + firstDayOfWeek) % 7);\n      var weekText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(dayLabel, {\n          text: nameMap[day]\n        }), this._weekTextPositionControl(point, orient, pos, margin, cellSize)),\n        silent: labelSilent\n      });\n      group.add(weekText);\n    }\n  };\n  CalendarView.type = 'calendar';\n  return CalendarView;\n}(ComponentView);\nexport default CalendarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport CalendarModel from '../../coord/calendar/CalendarModel.js';\nimport CalendarView from './CalendarView.js';\nimport Calendar from '../../coord/calendar/Calendar.js';\nexport function install(registers) {\n  registers.registerComponentModel(CalendarModel);\n  registers.registerComponentView(CalendarView);\n  registers.registerCoordinateSystem('calendar', Calendar);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nimport { copyLayoutParams, mergeLayoutParam } from '../../util/layout.js';\n;\n;\n;\nexport function setKeyInfoToNewElOption(resultItem, newElOption) {\n  var existElOption = resultItem.existing;\n  // Set id and type after id assigned.\n  newElOption.id = resultItem.keyInfo.id;\n  !newElOption.type && existElOption && (newElOption.type = existElOption.type);\n  // Set parent id if not specified\n  if (newElOption.parentId == null) {\n    var newElParentOption = newElOption.parentOption;\n    if (newElParentOption) {\n      newElOption.parentId = newElParentOption.id;\n    } else if (existElOption) {\n      newElOption.parentId = existElOption.parentId;\n    }\n  }\n  // Clear\n  newElOption.parentOption = null;\n}\nfunction isSetLoc(obj, props) {\n  var isSet;\n  zrUtil.each(props, function (prop) {\n    obj[prop] != null && obj[prop] !== 'auto' && (isSet = true);\n  });\n  return isSet;\n}\nfunction mergeNewElOptionToExist(existList, index, newElOption) {\n  // Update existing options, for `getOption` feature.\n  var newElOptCopy = zrUtil.extend({}, newElOption);\n  var existElOption = existList[index];\n  var $action = newElOption.$action || 'merge';\n  if ($action === 'merge') {\n    if (existElOption) {\n      if (process.env.NODE_ENV !== 'production') {\n        var newType = newElOption.type;\n        zrUtil.assert(!newType || existElOption.type === newType, 'Please set $action: \"replace\" to change `type`');\n      }\n      // We can ensure that newElOptCopy and existElOption are not\n      // the same object, so `merge` will not change newElOptCopy.\n      zrUtil.merge(existElOption, newElOptCopy, true);\n      // Rigid body, use ignoreSize.\n      mergeLayoutParam(existElOption, newElOptCopy, {\n        ignoreSize: true\n      });\n      // Will be used in render.\n      copyLayoutParams(newElOption, existElOption);\n      // Copy transition info to new option so it can be used in the transition.\n      // DO IT AFTER merge\n      copyTransitionInfo(newElOption, existElOption);\n      copyTransitionInfo(newElOption, existElOption, 'shape');\n      copyTransitionInfo(newElOption, existElOption, 'style');\n      copyTransitionInfo(newElOption, existElOption, 'extra');\n      // Copy clipPath\n      newElOption.clipPath = existElOption.clipPath;\n    } else {\n      existList[index] = newElOptCopy;\n    }\n  } else if ($action === 'replace') {\n    existList[index] = newElOptCopy;\n  } else if ($action === 'remove') {\n    // null will be cleaned later.\n    existElOption && (existList[index] = null);\n  }\n}\nvar TRANSITION_PROPS_TO_COPY = ['transition', 'enterFrom', 'leaveTo'];\nvar ROOT_TRANSITION_PROPS_TO_COPY = TRANSITION_PROPS_TO_COPY.concat(['enterAnimation', 'updateAnimation', 'leaveAnimation']);\nfunction copyTransitionInfo(target, source, targetProp) {\n  if (targetProp) {\n    if (!target[targetProp] && source[targetProp]) {\n      // TODO avoid creating this empty object when there is no transition configuration.\n      target[targetProp] = {};\n    }\n    target = target[targetProp];\n    source = source[targetProp];\n  }\n  if (!target || !source) {\n    return;\n  }\n  var props = targetProp ? TRANSITION_PROPS_TO_COPY : ROOT_TRANSITION_PROPS_TO_COPY;\n  for (var i = 0; i < props.length; i++) {\n    var prop = props[i];\n    if (target[prop] == null && source[prop] != null) {\n      target[prop] = source[prop];\n    }\n  }\n}\nfunction setLayoutInfoToExist(existItem, newElOption) {\n  if (!existItem) {\n    return;\n  }\n  existItem.hv = newElOption.hv = [\n  // Rigid body, don't care about `width`.\n  isSetLoc(newElOption, ['left', 'right']),\n  // Rigid body, don't care about `height`.\n  isSetLoc(newElOption, ['top', 'bottom'])];\n  // Give default group size. Otherwise layout error may occur.\n  if (existItem.type === 'group') {\n    var existingGroupOpt = existItem;\n    var newGroupOpt = newElOption;\n    existingGroupOpt.width == null && (existingGroupOpt.width = newGroupOpt.width = 0);\n    existingGroupOpt.height == null && (existingGroupOpt.height = newGroupOpt.height = 0);\n  }\n}\nvar GraphicComponentModel = /** @class */function (_super) {\n  __extends(GraphicComponentModel, _super);\n  function GraphicComponentModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphicComponentModel.type;\n    _this.preventAutoZ = true;\n    return _this;\n  }\n  GraphicComponentModel.prototype.mergeOption = function (option, ecModel) {\n    // Prevent default merge to elements\n    var elements = this.option.elements;\n    this.option.elements = null;\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    this.option.elements = elements;\n  };\n  GraphicComponentModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    var newList = (isInit ? thisOption : newOption).elements;\n    var existList = thisOption.elements = isInit ? [] : thisOption.elements;\n    var flattenedList = [];\n    this._flatten(newList, flattenedList, null);\n    var mappingResult = modelUtil.mappingToExists(existList, flattenedList, 'normalMerge');\n    // Clear elOptionsToUpdate\n    var elOptionsToUpdate = this._elOptionsToUpdate = [];\n    zrUtil.each(mappingResult, function (resultItem, index) {\n      var newElOption = resultItem.newOption;\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(zrUtil.isObject(newElOption) || resultItem.existing, 'Empty graphic option definition');\n      }\n      if (!newElOption) {\n        return;\n      }\n      elOptionsToUpdate.push(newElOption);\n      setKeyInfoToNewElOption(resultItem, newElOption);\n      mergeNewElOptionToExist(existList, index, newElOption);\n      setLayoutInfoToExist(existList[index], newElOption);\n    }, this);\n    // Clean\n    thisOption.elements = zrUtil.filter(existList, function (item) {\n      // $action should be volatile, otherwise option gotten from\n      // `getOption` will contain unexpected $action.\n      item && delete item.$action;\n      return item != null;\n    });\n  };\n  /**\r\n   * Convert\r\n   * [{\r\n   *  type: 'group',\r\n   *  id: 'xx',\r\n   *  children: [{type: 'circle'}, {type: 'polygon'}]\r\n   * }]\r\n   * to\r\n   * [\r\n   *  {type: 'group', id: 'xx'},\r\n   *  {type: 'circle', parentId: 'xx'},\r\n   *  {type: 'polygon', parentId: 'xx'}\r\n   * ]\r\n   */\n  GraphicComponentModel.prototype._flatten = function (optionList, result, parentOption) {\n    zrUtil.each(optionList, function (option) {\n      if (!option) {\n        return;\n      }\n      if (parentOption) {\n        option.parentOption = parentOption;\n      }\n      result.push(option);\n      var children = option.children;\n      // here we don't judge if option.type is `group`\n      // when new option doesn't provide `type`, it will cause that the children can't be updated.\n      if (children && children.length) {\n        this._flatten(children, result, option);\n      }\n      // Deleting for JSON output, and for not affecting group creation.\n      delete option.children;\n    }, this);\n  };\n  // FIXME\n  // Pass to view using payload? setOption has a payload?\n  GraphicComponentModel.prototype.useElOptionsToUpdate = function () {\n    var els = this._elOptionsToUpdate;\n    // Clear to avoid render duplicately when zooming.\n    this._elOptionsToUpdate = null;\n    return els;\n  };\n  GraphicComponentModel.type = 'graphic';\n  GraphicComponentModel.defaultOption = {\n    elements: []\n    // parentId: null\n  };\n  return GraphicComponentModel;\n}(ComponentModel);\nexport { GraphicComponentModel };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport { parsePercent } from '../../util/number.js';\nimport ComponentView from '../../view/Component.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isEC4CompatibleStyle, convertFromEC4CompatibleStyle } from '../../util/styleCompat.js';\nimport { applyLeaveTransition, applyUpdateTransition, isTransitionAll, updateLeaveTo } from '../../animation/customGraphicTransition.js';\nimport { updateProps } from '../../animation/basicTransition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar nonShapeGraphicElements = {\n  // Reserved but not supported in graphic component.\n  path: null,\n  compoundPath: null,\n  // Supported in graphic component.\n  group: graphicUtil.Group,\n  image: graphicUtil.Image,\n  text: graphicUtil.Text\n};\nexport var inner = modelUtil.makeInner();\n// ------------------------\n// View\n// ------------------------\nvar GraphicComponentView = /** @class */function (_super) {\n  __extends(GraphicComponentView, _super);\n  function GraphicComponentView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphicComponentView.type;\n    return _this;\n  }\n  GraphicComponentView.prototype.init = function () {\n    this._elMap = zrUtil.createHashMap();\n  };\n  GraphicComponentView.prototype.render = function (graphicModel, ecModel, api) {\n    // Having leveraged between use cases and algorithm complexity, a very\n    // simple layout mechanism is used:\n    // The size(width/height) can be determined by itself or its parent (not\n    // implemented yet), but can not by its children. (Top-down travel)\n    // The location(x/y) can be determined by the bounding rect of itself\n    // (can including its descendants or not) and the size of its parent.\n    // (Bottom-up travel)\n    // When `chart.clear()` or `chart.setOption({...}, true)` with the same id,\n    // view will be reused.\n    if (graphicModel !== this._lastGraphicModel) {\n      this._clear();\n    }\n    this._lastGraphicModel = graphicModel;\n    this._updateElements(graphicModel);\n    this._relocate(graphicModel, api);\n  };\n  /**\r\n   * Update graphic elements.\r\n   */\n  GraphicComponentView.prototype._updateElements = function (graphicModel) {\n    var elOptionsToUpdate = graphicModel.useElOptionsToUpdate();\n    if (!elOptionsToUpdate) {\n      return;\n    }\n    var elMap = this._elMap;\n    var rootGroup = this.group;\n    var globalZ = graphicModel.get('z');\n    var globalZLevel = graphicModel.get('zlevel');\n    // Top-down tranverse to assign graphic settings to each elements.\n    zrUtil.each(elOptionsToUpdate, function (elOption) {\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var elExisting = id != null ? elMap.get(id) : null;\n      var parentId = modelUtil.convertOptionIdName(elOption.parentId, null);\n      var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup;\n      var elType = elOption.type;\n      var elOptionStyle = elOption.style;\n      if (elType === 'text' && elOptionStyle) {\n        // In top/bottom mode, textVerticalAlign should not be used, which cause\n        // inaccurately locating.\n        if (elOption.hv && elOption.hv[1]) {\n          elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = elOptionStyle.verticalAlign = elOptionStyle.align = null;\n        }\n      }\n      var textContentOption = elOption.textContent;\n      var textConfig = elOption.textConfig;\n      if (elOptionStyle && isEC4CompatibleStyle(elOptionStyle, elType, !!textConfig, !!textContentOption)) {\n        var convertResult = convertFromEC4CompatibleStyle(elOptionStyle, elType, true);\n        if (!textConfig && convertResult.textConfig) {\n          textConfig = elOption.textConfig = convertResult.textConfig;\n        }\n        if (!textContentOption && convertResult.textContent) {\n          textContentOption = convertResult.textContent;\n        }\n      }\n      // Remove unnecessary props to avoid potential problems.\n      var elOptionCleaned = getCleanedElOption(elOption);\n      // For simple, do not support parent change, otherwise reorder is needed.\n      if (process.env.NODE_ENV !== 'production') {\n        elExisting && zrUtil.assert(targetElParent === elExisting.parent, 'Changing parent is not supported.');\n      }\n      var $action = elOption.$action || 'merge';\n      var isMerge = $action === 'merge';\n      var isReplace = $action === 'replace';\n      if (isMerge) {\n        var isInit = !elExisting;\n        var el_1 = elExisting;\n        if (isInit) {\n          el_1 = createEl(id, targetElParent, elOption.type, elMap);\n        } else {\n          el_1 && (inner(el_1).isNew = false);\n          // Stop and restore before update any other attributes.\n          stopPreviousKeyframeAnimationAndRestore(el_1);\n        }\n        if (el_1) {\n          applyUpdateTransition(el_1, elOptionCleaned, graphicModel, {\n            isInit: isInit\n          });\n          updateCommonAttrs(el_1, elOption, globalZ, globalZLevel);\n        }\n      } else if (isReplace) {\n        removeEl(elExisting, elOption, elMap, graphicModel);\n        var el_2 = createEl(id, targetElParent, elOption.type, elMap);\n        if (el_2) {\n          applyUpdateTransition(el_2, elOptionCleaned, graphicModel, {\n            isInit: true\n          });\n          updateCommonAttrs(el_2, elOption, globalZ, globalZLevel);\n        }\n      } else if ($action === 'remove') {\n        updateLeaveTo(elExisting, elOption);\n        removeEl(elExisting, elOption, elMap, graphicModel);\n      }\n      var el = elMap.get(id);\n      if (el && textContentOption) {\n        if (isMerge) {\n          var textContentExisting = el.getTextContent();\n          textContentExisting ? textContentExisting.attr(textContentOption) : el.setTextContent(new graphicUtil.Text(textContentOption));\n        } else if (isReplace) {\n          el.setTextContent(new graphicUtil.Text(textContentOption));\n        }\n      }\n      if (el) {\n        var clipPathOption = elOption.clipPath;\n        if (clipPathOption) {\n          var clipPathType = clipPathOption.type;\n          var clipPath = void 0;\n          var isInit = false;\n          if (isMerge) {\n            var oldClipPath = el.getClipPath();\n            isInit = !oldClipPath || inner(oldClipPath).type !== clipPathType;\n            clipPath = isInit ? newEl(clipPathType) : oldClipPath;\n          } else if (isReplace) {\n            isInit = true;\n            clipPath = newEl(clipPathType);\n          }\n          el.setClipPath(clipPath);\n          applyUpdateTransition(clipPath, clipPathOption, graphicModel, {\n            isInit: isInit\n          });\n          applyKeyframeAnimation(clipPath, clipPathOption.keyframeAnimation, graphicModel);\n        }\n        var elInner = inner(el);\n        el.setTextConfig(textConfig);\n        elInner.option = elOption;\n        setEventData(el, graphicModel, elOption);\n        graphicUtil.setTooltipConfig({\n          el: el,\n          componentModel: graphicModel,\n          itemName: el.name,\n          itemTooltipOption: elOption.tooltip\n        });\n        applyKeyframeAnimation(el, elOption.keyframeAnimation, graphicModel);\n      }\n    });\n  };\n  /**\r\n   * Locate graphic elements.\r\n   */\n  GraphicComponentView.prototype._relocate = function (graphicModel, api) {\n    var elOptions = graphicModel.option.elements;\n    var rootGroup = this.group;\n    var elMap = this._elMap;\n    var apiWidth = api.getWidth();\n    var apiHeight = api.getHeight();\n    var xy = ['x', 'y'];\n    // Top-down to calculate percentage width/height of group\n    for (var i = 0; i < elOptions.length; i++) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n      if (!el || !el.isGroup) {\n        continue;\n      }\n      var parentEl = el.parent;\n      var isParentRoot = parentEl === rootGroup;\n      // Like 'position:absolut' in css, default 0.\n      var elInner = inner(el);\n      var parentElInner = inner(parentEl);\n      elInner.width = parsePercent(elInner.option.width, isParentRoot ? apiWidth : parentElInner.width) || 0;\n      elInner.height = parsePercent(elInner.option.height, isParentRoot ? apiHeight : parentElInner.height) || 0;\n    }\n    // Bottom-up tranvese all elements (consider ec resize) to locate elements.\n    for (var i = elOptions.length - 1; i >= 0; i--) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n      if (!el) {\n        continue;\n      }\n      var parentEl = el.parent;\n      var parentElInner = inner(parentEl);\n      var containerInfo = parentEl === rootGroup ? {\n        width: apiWidth,\n        height: apiHeight\n      } : {\n        width: parentElInner.width,\n        height: parentElInner.height\n      };\n      // PENDING\n      // Currently, when `bounding: 'all'`, the union bounding rect of the group\n      // does not include the rect of [0, 0, group.width, group.height], which\n      // is probably weird for users. Should we make a break change for it?\n      var layoutPos = {};\n      var layouted = layoutUtil.positionElement(el, elOption, containerInfo, null, {\n        hv: elOption.hv,\n        boundingMode: elOption.bounding\n      }, layoutPos);\n      if (!inner(el).isNew && layouted) {\n        var transition = elOption.transition;\n        var animatePos = {};\n        for (var k = 0; k < xy.length; k++) {\n          var key = xy[k];\n          var val = layoutPos[key];\n          if (transition && (isTransitionAll(transition) || zrUtil.indexOf(transition, key) >= 0)) {\n            animatePos[key] = val;\n          } else {\n            el[key] = val;\n          }\n        }\n        updateProps(el, animatePos, graphicModel, 0);\n      } else {\n        el.attr(layoutPos);\n      }\n    }\n  };\n  /**\r\n   * Clear all elements.\r\n   */\n  GraphicComponentView.prototype._clear = function () {\n    var _this = this;\n    var elMap = this._elMap;\n    elMap.each(function (el) {\n      removeEl(el, inner(el).option, elMap, _this._lastGraphicModel);\n    });\n    this._elMap = zrUtil.createHashMap();\n  };\n  GraphicComponentView.prototype.dispose = function () {\n    this._clear();\n  };\n  GraphicComponentView.type = 'graphic';\n  return GraphicComponentView;\n}(ComponentView);\nexport { GraphicComponentView };\nfunction newEl(graphicType) {\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(graphicType, 'graphic type MUST be set');\n  }\n  var Clz = zrUtil.hasOwn(nonShapeGraphicElements, graphicType)\n  // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  ? nonShapeGraphicElements[graphicType] : graphicUtil.getShapeClass(graphicType);\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(Clz, \"graphic type \" + graphicType + \" can not be found\");\n  }\n  var el = new Clz({});\n  inner(el).type = graphicType;\n  return el;\n}\nfunction createEl(id, targetElParent, graphicType, elMap) {\n  var el = newEl(graphicType);\n  targetElParent.add(el);\n  elMap.set(id, el);\n  inner(el).id = id;\n  inner(el).isNew = true;\n  return el;\n}\nfunction removeEl(elExisting, elOption, elMap, graphicModel) {\n  var existElParent = elExisting && elExisting.parent;\n  if (existElParent) {\n    elExisting.type === 'group' && elExisting.traverse(function (el) {\n      removeEl(el, elOption, elMap, graphicModel);\n    });\n    applyLeaveTransition(elExisting, elOption, graphicModel);\n    elMap.removeKey(inner(elExisting).id);\n  }\n}\nfunction updateCommonAttrs(el, elOption, defaultZ, defaultZlevel) {\n  if (!el.isGroup) {\n    zrUtil.each([['cursor', Displayable.prototype.cursor],\n    // We should not support configure z and zlevel in the element level.\n    // But seems we didn't limit it previously. So here still use it to avoid breaking.\n    ['zlevel', defaultZlevel || 0], ['z', defaultZ || 0],\n    // z2 must not be null/undefined, otherwise sort error may occur.\n    ['z2', 0]], function (item) {\n      var prop = item[0];\n      if (zrUtil.hasOwn(elOption, prop)) {\n        el[prop] = zrUtil.retrieve2(elOption[prop], item[1]);\n      } else if (el[prop] == null) {\n        el[prop] = item[1];\n      }\n    });\n  }\n  zrUtil.each(zrUtil.keys(elOption), function (key) {\n    // Assign event handlers.\n    // PENDING: should enumerate all event names or use pattern matching?\n    if (key.indexOf('on') === 0) {\n      var val = elOption[key];\n      el[key] = zrUtil.isFunction(val) ? val : null;\n    }\n  });\n  if (zrUtil.hasOwn(elOption, 'draggable')) {\n    el.draggable = elOption.draggable;\n  }\n  // Other attributes\n  elOption.name != null && (el.name = elOption.name);\n  elOption.id != null && (el.id = elOption.id);\n}\n// Remove unnecessary props to avoid potential problems.\nfunction getCleanedElOption(elOption) {\n  elOption = zrUtil.extend({}, elOption);\n  zrUtil.each(['id', 'parentId', '$action', 'hv', 'bounding', 'textContent', 'clipPath'].concat(layoutUtil.LOCATION_PARAMS), function (name) {\n    delete elOption[name];\n  });\n  return elOption;\n}\nfunction setEventData(el, graphicModel, elOption) {\n  var eventData = getECData(el).eventData;\n  // Simple optimize for large amount of elements that no need event.\n  if (!el.silent && !el.ignore && !eventData) {\n    eventData = getECData(el).eventData = {\n      componentType: 'graphic',\n      componentIndex: graphicModel.componentIndex,\n      name: el.name\n    };\n  }\n  // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  if (eventData) {\n    eventData.info = elOption.info;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { GraphicComponentModel } from './GraphicModel.js';\nimport { GraphicComponentView } from './GraphicView.js';\nexport function install(registers) {\n  registers.registerComponentModel(GraphicComponentModel);\n  registers.registerComponentView(GraphicComponentView);\n  registers.registerPreprocessor(function (option) {\n    var graphicOption = option.graphic;\n    // Convert\n    // {graphic: [{left: 10, type: 'circle'}, ...]}\n    // or\n    // {graphic: {left: 10, type: 'circle'}}\n    // to\n    // {graphic: [{elements: [{left: 10, type: 'circle'}, ...]}]}\n    if (isArray(graphicOption)) {\n      if (!graphicOption[0] || !graphicOption[0].elements) {\n        option.graphic = [{\n          elements: graphicOption\n        }];\n      } else {\n        // Only one graphic instance can be instantiated. (We don't\n        // want that too many views are created in echarts._viewMap.)\n        option.graphic = [option.graphic[0]];\n      }\n    } else if (graphicOption && !graphicOption.elements) {\n      option.graphic = [{\n        elements: [graphicOption]\n      }];\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util.js';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single'];\n// Supported coords.\n// FIXME: polar has been broken (but rarely used).\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisId';\n}\n/**\r\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\r\n * This function finds all linked dataZoomModels start from the given payload.\r\n */\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = [];\n  // Key: uid of dataZoomModel\n  var effectedModelMap = createHashMap();\n  // Find the dataZooms specified by payload.\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  });\n  // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n  var foundNewLink;\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n  return effectedModels;\n}\n/**\r\n * Find the first target coordinate system.\r\n * Available after model built.\r\n *\r\n * @return Like {\r\n *                  grid: [\r\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\r\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\r\n *                      ...\r\n *                  ],  // cartesians must not be null/undefined.\r\n *                  polar: [\r\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\r\n *                      ...\r\n *                  ],  // polars must not be null/undefined.\r\n *                  singleAxis: [\r\n *                      {model: coord0, axisModels: [], coordIndex: 0}\r\n *                  ]\r\n *              }\r\n */\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    if (!axisModel) {\n      return;\n    }\n    var coordSysModel = axisModel.getCoordSysModel();\n    if (!coordSysModel) {\n      return;\n    }\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper.js';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model.js';\nvar DataZoomAxisInfo = /** @class */function () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n  return DataZoomAxisInfo;\n}();\nvar DataZoomModel = /** @class */function (_super) {\n  __extends(DataZoomModel, _super);\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\r\n     * It is `[rangeModeForMin, rangeModeForMax]`.\r\n     * The optional values for `rangeMode`:\r\n     * + `'value'` mode: the axis extent will always be determined by\r\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\r\n     *     how data like and how `axis.min` and `axis.max` are.\r\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\r\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\r\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\r\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\r\n     *\r\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\r\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\r\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\r\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\r\n     */\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\r\n     * Suppose a \"main process\" start at the point that model prepared (that is,\r\n     * model initialized or merged or method called in `action`).\r\n     * We should keep the `main process` idempotent, that is, given a set of values\r\n     * on `option`, we get the same result.\r\n     *\r\n     * But sometimes, values on `option` will be updated for providing users\r\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\r\n     * should not be the base/input of the `main process`.\r\n     *\r\n     * So in that case we should save and keep the input of the `main process`\r\n     * separately, called `settledOption`.\r\n     *\r\n     * For example, consider the case:\r\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\r\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\r\n     *     calculated value.\r\n     * (Step)2) click the legend to hide and show a series,\r\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\r\n     *     which brings incorrect result.\r\n     */\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption);\n    // FIX #2591\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option;\n    this._setDefaultThrottle(inputRawOption);\n    this._updateRangeUse(inputRawOption);\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      }\n      // Otherwise do nothing and use the merge result.\n    }, this);\n    this._resetTarget();\n  };\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING);\n      // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occurred.\n      if (!refering.specified) {\n        return;\n      }\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true;\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    }\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function (axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n      if (!axisModel) {\n        return;\n      }\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false;\n      // Find parallel axes in the same grid.\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function (axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim;\n    // Find the first axis\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      }\n      // else remain its original setting.\n    });\n  };\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\r\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\r\n   */\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\r\n   * @return If not found, return null/undefined.\r\n   */\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\r\n   * @return If not found, return null/undefined.\r\n   */\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\r\n   * If not specified, set to undefined.\r\n   */\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n    this._updateRangeUse(opt);\n  };\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\r\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\r\n   *\r\n   * @return [startValue, endValue] value can only be '-' or finite number.\r\n   */\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\r\n   * @param axisModel If axisModel given, find axisProxy\r\n   *      corresponding to the axisModel\r\n   */\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n    // Find the first hosted axisProxy\n    var firstProxy;\n    var axisDimList = this._targetAxisInfoMap.keys();\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    }\n    // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n    return firstProxy;\n  };\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n    return this._orient;\n  };\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\r\n * Retrieve those raw params from option, which will be cached separately,\r\n * because they will be overwritten by normalized/calculated values in the main\r\n * process.\r\n */\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\nexport default DataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nvar SelectDataZoomModel = /** @class */function (_super) {\n  __extends(SelectDataZoomModel, _super);\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nvar DataZoomView = /** @class */function (_super) {\n  __extends(DataZoomView, _super);\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\nexport default DataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\nvar SelectDataZoomView = /** @class */function (_super) {\n  __extends(SelectDataZoomView, _super);\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper.js';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo.js';\nimport { getAxisMainType, isCoordSupported } from './helper.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\r\n * Operate single axis.\r\n * One axis can only operated by one axis operator.\r\n * Different dataZoomModels may be defined to operate the same axis.\r\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\r\n * So dataZoomModels share one axisProxy in that case.\r\n */\nvar AxisProxy = /** @class */function () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel;\n    // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\r\n   * Whether the axisProxy is hosted by dataZoomModel.\r\n   */\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\r\n   * @return Value can only be NaN or finite value.\r\n   */\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\r\n   * @return {Array.<number>}\r\n   */\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\r\n   * Only calculate by given range and this._dataExtent, do not change anything.\r\n   */\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value'];\n      // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]);\n        // Use scale.parse to math round for category or time axis.\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue);\n        // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      }\n      // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n      // fallback to extent start/end when parsed value or percent is invalid\n      valueWindow[idx] = boundValue == null || isNaN(boundValue) ? dataExtent[idx] : boundValue;\n      percentWindow[idx] = boundPercent == null || isNaN(boundPercent) ? percentExtent[idx] : boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow);\n    // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we don't restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\r\n   * Notice: reset should not be called before series.restoreData() is called,\r\n   * so it is recommended to be called in \"process stage\" but not \"model init\r\n   * stage\".\r\n   */\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var targetSeries = this.getTargetSeriesModels();\n    // Culculate data window and data extent, and record them.\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries);\n    // `calculateDataWindow` uses min/maxSpan.\n    this._updateMinMaxSpan();\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow;\n    // Update axis setting then.\n    this._setAxisModel();\n  };\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n    if (filterMode === 'none') {\n      return;\n    }\n    // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n      if (!dataDims.length) {\n        return;\n      }\n      if (filterMode === 'weakFilter') {\n        var store_1 = seriesData.getStore();\n        var dataDimIndices_1 = zrUtil.map(dataDims, function (dim) {\n          return seriesData.getDimensionIndex(dim);\n        }, seriesData);\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = store_1.get(dataDimIndices_1[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          }\n          // If both left out and right out, do not filter.\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow;\n            // console.time('select');\n            seriesData.selectRange(range);\n            // console.timeEnd('select');\n          }\n        });\n      }\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan));\n      // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n    if (!percentWindow) {\n      return;\n    }\n    // [0, 500]: arbitrary value, guess axis extent.\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20);\n    // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n    rawExtentInfo.freeze();\n  };\n  return AxisProxy;\n}();\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  });\n  // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\nexport default AxisProxy;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { getAxisMainType } from './helper.js';\nimport AxisProxy from './AxisProxy.js';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    }\n    // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      });\n      // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport dataZoomProcessor from './dataZoomProcessor.js';\nimport installDataZoomAction from './dataZoomAction.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { findEffectedDataZooms } from './helper.js';\nimport { each } from 'zrender/lib/core/util.js';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport SelectZoomModel from './SelectZoomModel.js';\nimport SelectZoomView from './SelectZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature = /** @class */function () {\n  function ToolboxFeature() {}\n  return ToolboxFeature;\n}();\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\nvar ToolboxModel = /** @class */function (_super) {\n  __extends(ToolboxModel, _super);\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport { getLayoutRect, box as layoutBox, positionElement } from '../../util/layout.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as graphic from '../../util/graphic.js';\n/**\r\n * Layout list like component.\r\n * It will box layout each items in group of component and then position the whole group in the viewport\r\n * @param {module:zrender/group/Group} group\r\n * @param {module:echarts/model/Component} componentModel\r\n * @param {module:echarts/ExtensionAPI}\r\n */\nexport function layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\nexport function makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  });\n  // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n  return rect;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getFont } from '../../label/labelStyle.js';\nvar ToolboxView = /** @class */function (_super) {\n  __extends(ToolboxView, _super);\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute();\n    // Keep for diff.\n    this._featureNames = featureNames;\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature;\n      // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n          if (!Feature) {\n            return;\n          }\n          feature = new Feature();\n        }\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName];\n        // If feature does not exist.\n        if (!feature) {\n          return;\n        }\n      }\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n      createIconPaths(featureModel, feature, featureName);\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']);\n      // If one feature has multiple icons, they are organized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle();\n        // Text position calculation\n        // TODO: extract `textStyle` from `iconStyle` and use `createTextStyle`\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null,\n            font: getFont({\n              fontStyle: iconStyleEmphasisModel.get('textFontStyle'),\n              fontFamily: iconStyleEmphasisModel.get('textFontFamily'),\n              fontSize: iconStyleEmphasisModel.get('textFontSize'),\n              fontWeight: iconStyleEmphasisModel.get('textFontWeight')\n            }, ecModel)\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle');\n          // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n    listComponentHelper.layout(group, toolboxModel, api);\n    // Render background after group is layout\n    // FIXME\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel));\n    // Adjust icon title positions to avoid them out of screen\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title;\n      // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis');\n      // May be background element\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  };\n  // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/* global window, Uint8Array, document */\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar SaveAsImage = /** @class */function (_super) {\n  __extends(SaveAsImage, _super);\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser;\n    // Chrome, Firefox, New Edge\n    if (typeof MouseEvent === 'function' && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    }\n    // IE or old Edge\n    else {\n      // @ts-ignore\n      if (window.navigator.msSaveOrOpenBlob || isSvg) {\n        var parts = url.split(',');\n        // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n        var base64Encoded = parts[0].indexOf('base64') > -1;\n        var bstr = isSvg\n        // should decode the svg data uri first\n        ? decodeURIComponent(parts[1]) : parts[1];\n        // only `atob` when the data uri is encoded with base64\n        // otherwise, like `svg` data uri exported by zrender,\n        // there will be an error, for it's not encoded with base64.\n        // (just a url-encoded string through `encodeURIComponent`)\n        base64Encoded && (bstr = window.atob(bstr));\n        var filename = title + '.' + type;\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob) {\n          var n = bstr.length;\n          var u8arr = new Uint8Array(n);\n          while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n          }\n          var blob = new Blob([u8arr]); // @ts-ignore\n          window.navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          var frame = document.createElement('iframe');\n          document.body.appendChild(frame);\n          var cw = frame.contentWindow;\n          var doc = cw.document;\n          doc.open('image/svg+xml', 'replace');\n          doc.write(bstr);\n          doc.close();\n          cw.focus();\n          doc.execCommand('SaveAs', true, filename);\n          document.body.removeChild(frame);\n        }\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n        tab.document.title = title;\n      }\n    }\n  };\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n  return SaveAsImage;\n}(ToolboxFeature);\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack'];\n// stack and tiled appears in pair for the title\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\nvar MagicType = /** @class */function (_super) {\n  __extends(MagicType, _super);\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]);\n    // Not supported magicType\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n    var newOption = {\n      series: []\n    };\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      }\n      // Modify boundaryGap\n      var coordSys = seriesModel.coordinateSystem;\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type;\n    // Change title of stack\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n  return MagicType;\n}(ToolboxFeature);\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n};\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/* global document */\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\n/* global document */\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\r\n * Group series into two types\r\n *  1. on category axis, like line, bar\r\n *  2. others, like scatter, pie\r\n */\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\r\n * Assemble content of series on cateogory axis\r\n * @inner\r\n */\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    }));\n    // @ts-ignore TODO Polar\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    });\n    // Assemble table content\n    var lines = [headers.join(ITEM_SPLITER)];\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n      lines.push(items.join(ITEM_SPLITER));\n    }\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\r\n * Assemble content of other series\r\n */\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\r\n * If a block is tsv format\r\n */\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\r\n * @param {string} tsv\r\n * @return {Object}\r\n */\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n  return {\n    series: series,\n    categories: categories\n  };\n}\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n    if (!line) {\n      continue;\n    }\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n  return {\n    name: seriesName,\n    data: data\n  };\n}\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\nvar DataView = /** @class */function (_super) {\n  __extends(DataView, _super);\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n    var root = document.createElement('div');\n    // use padding to avoid 5px whitespace\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff';\n    // Create elements\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style;\n      // eslint-disable-next-line max-len\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0';\n    // eslint-disable-next-line max-len\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n        close();\n        return;\n      }\n      var newOption;\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n  return DataView;\n}(ToolboxFeature);\n/**\r\n * @inner\r\n */\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      }\n      // original data has name but new data has no name\n      var shouldDeleteName = original.name != null && newVal.name == null;\n      // Original data has option\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n}\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\r\n * @param ecModel\r\n * @param newSnapshot key is dataZoomId\r\n */\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  // If previous dataZoom can not be found,\n  // complete an range with current range.\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop();\n  // Find top for all dataZoom.\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\r\n * History length of each dataZoom may be different.\r\n * this._history[0] is used to store origin range.\r\n */\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar RestoreOption = /** @class */function (_super) {\n  __extends(RestoreOption, _super);\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n  return RestoreOption;\n}(ToolboxFeature);\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as brushHelper from './brushHelper.js';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model.js';\n// FIXME\n// how to genarialize to more coordinate systems.\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\nvar BrushTargetManager = /** @class */function () {\n  /**\r\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\r\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\r\n   * @param opt.include include coordinate system types.\r\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange);\n      // area.coordRange is the first of area.coordRanges\n      if (!area.coordRange) {\n        area.coordRange = coordRange;\n        // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\r\n   * the `areas` is `BrushModel.areas`.\r\n   * Called in layout stage.\r\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\r\n   */\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n      area.range = area.range || [];\n      // convert coordRange to global range and set panelId.\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId;\n        // (1) area.range should always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\r\n   * If return Object, a coord found.\r\n   * If return true, global found.\r\n   * Otherwise nothing found.\r\n   */\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n    return true;\n  };\n  return BrushTargetManager;\n}();\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels;\n    // Remove duplicated.\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [\n// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n},\n// geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone();\n    // geo roam and zoom transform\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n}\n// We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n// TODO depends on DataZoom and Brush\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\nvar DataZoomFeature = /** @class */function (_super) {\n  __extends(DataZoomFeature, _super);\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n    var snapshot = {};\n    var ecModel = this.ecModel;\n    this._brushController.updateCovers([]); // remove cover\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n      var brushType = area.brushType;\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n    this._dispatchZoomAction(snapshot);\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel);\n      // Restrict range.\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n  ;\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = [];\n    // Convert from hash map to array.\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n  return DataZoomFeature;\n}(ToolboxFeature);\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  };\n  // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n  return setting;\n}\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js';\n// TODOD: REGISTER IN INSTALL\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar TooltipModel = /** @class */function (_super) {\n  __extends(TooltipModel, _super);\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    // zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaut false (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    enterable: false,\n    backgroundColor: '#fff',\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      }\n      // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n    },\n    textStyle: {\n      color: '#666',\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { toCamelCase } from '../../util/format.js';\nimport env from 'zrender/lib/core/env.js';\n/* global document */\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption\n  // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n  var style = document.documentElement.style;\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isString, indexOf, each, bind, isFunction, isArray, isDom, retrieve2 } from 'zrender/lib/core/util.js';\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\nimport { transformLocalCoord } from 'zrender/lib/core/dom.js';\nimport env from 'zrender/lib/core/env.js';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\n/* global document, window */\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform');\n// eslint-disable-next-line\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;z-index:-1;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\nfunction assembleTransition(duration, onlyFade) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n  if (!onlyFade) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n  }\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px';\n  // not support transform, use `left` and `top` instead.\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  }\n  // support transform\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\r\n * @param {Object} textStyle\r\n * @return {string}\r\n * @inner\r\n */\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  // @ts-ignore, leave it to the tooltip refactor.\n  var lineHeight = retrieve2(textStyleModel.get('lineHeight'), Math.round(fontSize * 3 / 2));\n  fontSize && cssText.push('line-height:' + lineHeight + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow);\n  // Animation transition. Do not animate when transitionDuration is 0.\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n  if (backgroundColor) {\n    cssText.push('background-color:' + backgroundColor);\n  }\n  // Border style\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  });\n  // Text style\n  cssText.push(assembleFont(textStyleModel));\n  // Padding\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n  return cssText.join(';') + ';';\n}\n// If not able to make, do not modify the input `out`.\nfunction makeStyleCoord(out, zr, container, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n  if (container) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, container, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY;\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nvar TooltipHTMLContent = /** @class */function () {\n  function TooltipHTMLContent(api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._alwaysShowContent = false;\n    this._firstShow = true;\n    this._longHide = true;\n    if (env.wxa) {\n      return null;\n    }\n    var el = document.createElement('div');\n    // TODO: TYPE\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendTo = opt.appendTo;\n    var container = appendTo && (isString(appendTo) ? document.querySelector(appendTo) : isDom(appendTo) ? appendTo : isFunction(appendTo) && appendTo(api.getDom()));\n    makeStyleCoord(this._styleCoord, zr, container, api.getWidth() / 2, api.getHeight() / 2);\n    (container || api.getDom()).appendChild(el);\n    this._api = api;\n    this._container = container;\n    // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n    var self = this;\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    };\n    el.onmousemove = function (e) {\n      e = e || window.event;\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\r\n   * Update when tooltip is rendered\r\n   */\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    if (!this._container) {\n      var container = this._api.getDom();\n      var position = getComputedStyle(container, 'position');\n      var domStyle = container.style;\n      if (domStyle.position !== 'absolute' && position !== 'absolute') {\n        domStyle.position = 'relative';\n      }\n    }\n    // move tooltip if chart resized\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n    // update className\n    this.el.className = tooltipModel.get('className') || '';\n    // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide)\n      // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '')\n      // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n    var arrow = '';\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n      if (!isArray(content)) {\n        content = [content];\n      }\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      }\n      // no arrow if empty\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return el ? [el.offsetWidth, el.offsetHeight] : [0, 0];\n  };\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    if (!this.el) {\n      return;\n    }\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._container, zrX, zrY);\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\r\n   * when `alwaysShowContent` is true,\r\n   * move the tooltip after chart resized\r\n   */\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n    var style = this.el.style;\n    style.visibility = 'hidden';\n    style.opacity = '0';\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipHTMLContent.prototype.dispose = function () {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var parentNode = this.el.parentNode;\n    parentNode && parentNode.removeChild(this.el);\n    this.el = this._container = null;\n  };\n  return TooltipHTMLContent;\n}();\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\nimport { throwError } from '../../util/log.js';\nvar TooltipRichContent = /** @class */function () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._alwaysShowContent = false;\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\r\n   * Update when tooltip is rendered\r\n   */\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n  };\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n    this.el.show();\n    this._show = true;\n  };\n  /**\r\n   * Set tooltip content\r\n   */\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    var _this = this;\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        borderWidth: 1,\n        borderColor: borderColor,\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n      _this.el.style[propName] = tooltipModel.get(propName);\n    });\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\n    });\n    this._zr.add(this.el);\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n      self._inContent = false;\n    });\n  };\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect();\n    // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style);\n      // rich text x, y do not include border.\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\r\n   * when `alwaysShowContent` is true,\r\n   * move the tooltip after chart resized\r\n   */\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n    this._show = false;\n  };\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n  return TooltipRichContent;\n}();\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\nimport TooltipRichContent from './TooltipRichContent.js';\nimport { convertToColorString, encodeHTML, formatTpl } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport { Rect } from '../../util/graphic.js';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport Model from '../../model/Model.js';\nimport * as globalListener from '../axisPointer/globalListener.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\nimport ComponentView from '../../view/Component.js';\nimport { format as timeFormat } from '../../util/time.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { shouldTooltipConfine } from './helper.js';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\nimport { findEventDispatcher } from '../../util/event.js';\nimport { clear, createOrUpdate } from '../../util/throttle.js';\nvar proxyRect = new Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\nvar TooltipView = /** @class */function (_super) {\n  __extends(TooltipView, _super);\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipView.type;\n    return _this;\n  }\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api, {\n      appendTo: tooltipModel.get('appendToBody', true) ? 'body' : tooltipModel.get('appendTo', true)\n    });\n  };\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    // Reset\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    this._initGlobalListener();\n    this._keepShow();\n    // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the `updatePosition` function was also called frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n    // To avoid frequent triggering,\n    // consider throttling it in 50ms when transition is enabled\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n    } else {\n      clear(this, '_updatePosition');\n    }\n  };\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api;\n    var triggerOn = tooltipModel.get('triggerOn');\n    // Try to keep the tooltip show when refreshing\n    if (this._lastX != null && this._lastY != null\n    // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && triggerOn !== 'none' && triggerOn !== 'click') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\r\n   * Show tip manually by\r\n   * dispatchAction({\r\n   *     type: 'showTip',\r\n   *     x: 10,\r\n   *     y: 10\r\n   * });\r\n   * Or\r\n   * dispatchAction({\r\n   *      type: 'showTip',\r\n   *      seriesIndex: 0,\r\n   *      dataIndex or dataIndexInside or name\r\n   * });\r\n   *\r\n   *  TODO Batch\r\n   */\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node || !api.getDom()) {\n      return;\n    }\n    var dispatchAction = makeDispatchAction(payload, api);\n    // Reset ticket\n    this._ticket = '';\n    // When triggered from axisPointer.\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      };\n      // Manually show tooltip while view is not using zrender elements.\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n    if (this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  };\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    // @ts-ignore\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (!seriesModel) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n    if (!tooltipModel) {\n      return;\n    }\n    // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      var ecData = getECData(el);\n      if (ecData.ssrType === 'legend') {\n        // Don't trigger tooltip for legend tooltip item\n        return;\n      }\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n          return true;\n        }\n        // Tooltip provided directly. Like legend.\n        if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n          return true;\n        }\n      }, true);\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n      this._hide(dispatchAction);\n    }\n  };\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    });\n    // Only for legacy: `Serise['formatTooltip']` returns a string.\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex);\n          // Can't find data.\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel;\n          // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n          var frag = seriesTooltipResult.frag;\n          if (frag) {\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\n              valueFormatter: valueFormatter\n            }, frag) : frag);\n          }\n          if (seriesTooltipResult.text) {\n            markupTextArrLegacy.push(seriesTooltipResult.text);\n          }\n          cbParamsList.push(cbParams);\n        });\n      });\n    });\n    // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    });\n    // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n  };\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher);\n    // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    // For example, graph link.\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var valueFormatter = tooltipModel.get('valueFormatter');\n    var frag = seriesTooltipResult.frag;\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n      valueFormatter: valueFormatter\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    });\n    // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var isHTMLRenderMode = this._renderMode === 'html';\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n    var encodeHTMLContent = tooltipOpt.encodeHTMLContent;\n    if (isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n      // when `tooltipConfig.option` is a string rather than an object,\n      // we can't know if the content needs to be encoded\n      // for the sake of security, encode it by default.\n      encodeHTMLContent = true;\n    }\n    if (encodeHTMLContent && isHTMLRenderMode && tooltipOpt.content) {\n      // clone might be unnecessary?\n      tooltipOpt = clone(tooltipOpt);\n      tooltipOpt.content = encodeHTML(tooltipOpt.content);\n    }\n    var tooltipModelCascade = [tooltipOpt];\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    }\n    // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they cannot share the same formatter. Since the global tooltip formatter is used for series\n    // by convention, we do not use it as the default formatter for component.\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + '';\n    // PENDING: this case do not support richText style yet.\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    });\n    // If not dispatch showTip, tip may be hide triggered by axis.\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showTooltipContent = function (\n  // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n    var nearPointColor = nearPoint.color;\n    if (formatter) {\n      if (isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n        html = formatTpl(html, params, true);\n      } else if (isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n      };\n    }\n    if (!isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x,\n  // Mouse x\n  y,\n  // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n    var viewHeight = this._api.getHeight();\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n    if (isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n    if (isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null;\n      // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n      vAlign = null;\n    }\n    // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (isString(positionExpr) && el) {\n      var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n      x = pos[0];\n      y = pos[1];\n    } else {\n      var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n      x = pos[0];\n      y = pos[1];\n    }\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n    content.moveTo(x, y);\n  };\n  // FIXME\n  // Should we remove this but leave this to user?\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n        // check is cbParams data value changed\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    clear(this, '_updatePosition');\n    this._tooltipContent.dispose();\n    globalListener.unregister('itemTooltip', api);\n  };\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\r\n * From top to bottom. (the last one should be globalTooltipModel);\r\n */\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      }\n      // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n      if (isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n  return resultModel;\n}\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || bind(api.dispatchAction, api);\n}\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in default tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n  return [x, y];\n}\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n  return [x, y];\n}\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\r\n * Find target component by payload like:\r\n * ```js\r\n * { legendId: 'some_id', name: 'xxx' }\r\n * { toolboxIndex: 1, name: 'xxx' }\r\n * { geoName: 'some_name', name: 'xxx' }\r\n * ```\r\n * PENDING: at present only\r\n *\r\n * If not found, return null/undefined.\r\n */\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n  if (!model) {\n    return;\n  }\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nimport TooltipModel from './TooltipModel.js';\nimport TooltipView from './TooltipView.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\r\n   * @action\r\n   * @property {string} type\r\n   * @property {number} seriesIndex\r\n   * @property {number} dataIndex\r\n   * @property {number} [x]\r\n   * @property {number} [y]\r\n   */\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, noop);\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, noop);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nvar DEFAULT_TOOLBOX_BTNS = ['rect', 'polygon', 'keep', 'clear'];\nexport default function brushPreprocessor(option, isNew) {\n  var brushComponents = normalizeToArray(option ? option.brush : []);\n  if (!brushComponents.length) {\n    return;\n  }\n  var brushComponentSpecifiedBtns = [];\n  zrUtil.each(brushComponents, function (brushOpt) {\n    var tbs = brushOpt.hasOwnProperty('toolbox') ? brushOpt.toolbox : [];\n    if (tbs instanceof Array) {\n      brushComponentSpecifiedBtns = brushComponentSpecifiedBtns.concat(tbs);\n    }\n  });\n  var toolbox = option && option.toolbox;\n  if (zrUtil.isArray(toolbox)) {\n    toolbox = toolbox[0];\n  }\n  if (!toolbox) {\n    toolbox = {\n      feature: {}\n    };\n    option.toolbox = [toolbox];\n  }\n  var toolboxFeature = toolbox.feature || (toolbox.feature = {});\n  var toolboxBrush = toolboxFeature.brush || (toolboxFeature.brush = {});\n  var brushTypes = toolboxBrush.type || (toolboxBrush.type = []);\n  brushTypes.push.apply(brushTypes, brushComponentSpecifiedBtns);\n  removeDuplicate(brushTypes);\n  if (isNew && !brushTypes.length) {\n    brushTypes.push.apply(brushTypes, DEFAULT_TOOLBOX_BTNS);\n  }\n}\nfunction removeDuplicate(arr) {\n  var map = {};\n  zrUtil.each(arr, function (val) {\n    map[val] = 1;\n  });\n  arr.length = 0;\n  zrUtil.each(map, function (flag, val) {\n    arr.push(val);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as polygonContain from 'zrender/lib/contain/polygon.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { linePolygonIntersect } from '../../util/graphic.js';\nexport function makeBrushCommonSelectorForSeries(area) {\n  var brushType = area.brushType;\n  // Do not use function binding or curry for performance.\n  var selectors = {\n    point: function (itemLayout) {\n      return selector[brushType].point(itemLayout, selectors, area);\n    },\n    rect: function (itemLayout) {\n      return selector[brushType].rect(itemLayout, selectors, area);\n    }\n  };\n  return selectors;\n}\nvar selector = {\n  lineX: getLineSelectors(0),\n  lineY: getLineSelectors(1),\n  rect: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.intersect(itemLayout);\n    }\n  },\n  polygon: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]) && polygonContain.contain(area.range, itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      var points = area.range;\n      if (!itemLayout || points.length <= 1) {\n        return false;\n      }\n      var x = itemLayout.x;\n      var y = itemLayout.y;\n      var width = itemLayout.width;\n      var height = itemLayout.height;\n      var p = points[0];\n      if (polygonContain.contain(points, x, y) || polygonContain.contain(points, x + width, y) || polygonContain.contain(points, x, y + height) || polygonContain.contain(points, x + width, y + height) || BoundingRect.create(itemLayout).contain(p[0], p[1]) || linePolygonIntersect(x, y, x + width, y, points) || linePolygonIntersect(x, y, x, y + height, points) || linePolygonIntersect(x + width, y, x + width, y + height, points) || linePolygonIntersect(x, y + height, x + width, y + height, points)) {\n        return true;\n      }\n    }\n  }\n};\nfunction getLineSelectors(xyIndex) {\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  return {\n    point: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var p = itemLayout[xyIndex];\n        return inLineRange(p, range);\n      }\n    },\n    rect: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var layoutRange = [itemLayout[xy[xyIndex]], itemLayout[xy[xyIndex]] + itemLayout[wh[xyIndex]]];\n        layoutRange[1] < layoutRange[0] && layoutRange.reverse();\n        return inLineRange(layoutRange[0], range) || inLineRange(layoutRange[1], range) || inLineRange(range[0], layoutRange) || inLineRange(range[1], layoutRange);\n      }\n    }\n  };\n}\nfunction inLineRange(p, range) {\n  return range[0] <= p && p <= range[1];\n}\nexport default selector;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport { makeBrushCommonSelectorForSeries } from './selector.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport BrushTargetManager from '../helper/BrushTargetManager.js';\nvar STATE_LIST = ['inBrush', 'outOfBrush'];\nvar DISPATCH_METHOD = '__ecBrushSelect';\nvar DISPATCH_FLAG = '__ecInBrushSelectEvent';\n;\nexport function layoutCovers(ecModel) {\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    var brushTargetManager = brushModel.brushTargetManager = new BrushTargetManager(brushModel.option, ecModel);\n    brushTargetManager.setInputRanges(brushModel.areas, ecModel);\n  });\n}\n/**\r\n * Register the visual encoding if this modules required.\r\n */\nexport default function brushVisual(ecModel, api, payload) {\n  var brushSelected = [];\n  var throttleType;\n  var throttleDelay;\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    payload && payload.type === 'takeGlobalCursor' && brushModel.setBrushOption(payload.key === 'brush' ? payload.brushOption : {\n      brushType: false\n    });\n  });\n  layoutCovers(ecModel);\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel, brushIndex) {\n    var thisBrushSelected = {\n      brushId: brushModel.id,\n      brushIndex: brushIndex,\n      brushName: brushModel.name,\n      areas: zrUtil.clone(brushModel.areas),\n      selected: []\n    };\n    // Every brush component exists in event params, convenient\n    // for user to find by index.\n    brushSelected.push(thisBrushSelected);\n    var brushOption = brushModel.option;\n    var brushLink = brushOption.brushLink;\n    var linkedSeriesMap = [];\n    var selectedDataIndexForLink = [];\n    var rangeInfoBySeries = [];\n    var hasBrushExists = false;\n    if (!brushIndex) {\n      // Only the first throttle setting works.\n      throttleType = brushOption.throttleType;\n      throttleDelay = brushOption.throttleDelay;\n    }\n    // Add boundingRect and selectors to range.\n    var areas = zrUtil.map(brushModel.areas, function (area) {\n      var builder = boundingRectBuilders[area.brushType];\n      var selectableArea = zrUtil.defaults({\n        boundingRect: builder ? builder(area) : void 0\n      }, area);\n      selectableArea.selectors = makeBrushCommonSelectorForSeries(selectableArea);\n      return selectableArea;\n    });\n    var visualMappings = visualSolution.createVisualMappings(brushModel.option, STATE_LIST, function (mappingOption) {\n      mappingOption.mappingMethod = 'fixed';\n    });\n    zrUtil.isArray(brushLink) && zrUtil.each(brushLink, function (seriesIndex) {\n      linkedSeriesMap[seriesIndex] = 1;\n    });\n    function linkOthers(seriesIndex) {\n      return brushLink === 'all' || !!linkedSeriesMap[seriesIndex];\n    }\n    // If no supported brush or no brush on the series,\n    // all visuals should be in original state.\n    function brushed(rangeInfoList) {\n      return !!rangeInfoList.length;\n    }\n    /**\r\n     * Logic for each series: (If the logic has to be modified one day, do it carefully!)\r\n     *\r\n     * ( brushed  && hasBrushExist  && linkOthers  ) => StepA: record,  StepB: visualByRecord.\r\n     *   !brushed    hasBrushExist                             nothing,        visualByRecord.\r\n     *                !hasBrushExist                                              nothing.\r\n     * ( !brushed  && hasBrushExist  && linkOthers  ) => StepA:  nothing,  StepB: visualByRecord.\r\n     *                !hasBrushExist                                              nothing.\r\n     * ( brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB: visualByCheck.\r\n     *   !brushed                                                                  nothing.\r\n     * ( !brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB:  nothing.\r\n     */\n    // Step A\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var rangeInfoList = rangeInfoBySeries[seriesIndex] = [];\n      seriesModel.subType === 'parallel' ? stepAParallel(seriesModel, seriesIndex) : stepAOthers(seriesModel, seriesIndex, rangeInfoList);\n    });\n    function stepAParallel(seriesModel, seriesIndex) {\n      var coordSys = seriesModel.coordinateSystem;\n      hasBrushExists = hasBrushExists || coordSys.hasAxisBrushed();\n      linkOthers(seriesIndex) && coordSys.eachActiveState(seriesModel.getData(), function (activeState, dataIndex) {\n        activeState === 'active' && (selectedDataIndexForLink[dataIndex] = 1);\n      });\n    }\n    function stepAOthers(seriesModel, seriesIndex, rangeInfoList) {\n      if (!seriesModel.brushSelector || brushModelNotControll(brushModel, seriesIndex)) {\n        return;\n      }\n      zrUtil.each(areas, function (area) {\n        if (brushModel.brushTargetManager.controlSeries(area, seriesModel, ecModel)) {\n          rangeInfoList.push(area);\n        }\n        hasBrushExists = hasBrushExists || brushed(rangeInfoList);\n      });\n      if (linkOthers(seriesIndex) && brushed(rangeInfoList)) {\n        var data_1 = seriesModel.getData();\n        data_1.each(function (dataIndex) {\n          if (checkInRange(seriesModel, rangeInfoList, data_1, dataIndex)) {\n            selectedDataIndexForLink[dataIndex] = 1;\n          }\n        });\n      }\n    }\n    // Step B\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var seriesBrushSelected = {\n        seriesId: seriesModel.id,\n        seriesIndex: seriesIndex,\n        seriesName: seriesModel.name,\n        dataIndex: []\n      };\n      // Every series exists in event params, convenient\n      // for user to find series by seriesIndex.\n      thisBrushSelected.selected.push(seriesBrushSelected);\n      var rangeInfoList = rangeInfoBySeries[seriesIndex];\n      var data = seriesModel.getData();\n      var getValueState = linkOthers(seriesIndex) ? function (dataIndex) {\n        return selectedDataIndexForLink[dataIndex] ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      } : function (dataIndex) {\n        return checkInRange(seriesModel, rangeInfoList, data, dataIndex) ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      };\n      // If no supported brush or no brush, all visuals are in original state.\n      (linkOthers(seriesIndex) ? hasBrushExists : brushed(rangeInfoList)) && visualSolution.applyVisual(STATE_LIST, visualMappings, data, getValueState);\n    });\n  });\n  dispatchAction(api, throttleType, throttleDelay, brushSelected, payload);\n}\n;\nfunction dispatchAction(api, throttleType, throttleDelay, brushSelected, payload) {\n  // This event will not be triggered when `setOpion`, otherwise dead lock may\n  // triggered when do `setOption` in event listener, which we do not find\n  // satisfactory way to solve yet. Some considered resolutions:\n  // (a) Diff with prevoius selected data ant only trigger event when changed.\n  // But store previous data and diff precisely (i.e., not only by dataIndex, but\n  // also detect value changes in selected data) might bring complexity or fragility.\n  // (b) Use spectial param like `silent` to suppress event triggering.\n  // But such kind of volatile param may be weird in `setOption`.\n  if (!payload) {\n    return;\n  }\n  var zr = api.getZr();\n  if (zr[DISPATCH_FLAG]) {\n    return;\n  }\n  if (!zr[DISPATCH_METHOD]) {\n    zr[DISPATCH_METHOD] = doDispatch;\n  }\n  var fn = throttleUtil.createOrUpdate(zr, DISPATCH_METHOD, throttleDelay, throttleType);\n  fn(api, brushSelected);\n}\nfunction doDispatch(api, brushSelected) {\n  if (!api.isDisposed()) {\n    var zr = api.getZr();\n    zr[DISPATCH_FLAG] = true;\n    api.dispatchAction({\n      type: 'brushSelect',\n      batch: brushSelected\n    });\n    zr[DISPATCH_FLAG] = false;\n  }\n}\nfunction checkInRange(seriesModel, rangeInfoList, data, dataIndex) {\n  for (var i = 0, len = rangeInfoList.length; i < len; i++) {\n    var area = rangeInfoList[i];\n    if (seriesModel.brushSelector(dataIndex, data, area.selectors, area)) {\n      return true;\n    }\n  }\n}\nfunction brushModelNotControll(brushModel, seriesIndex) {\n  var seriesIndices = brushModel.option.seriesIndex;\n  return seriesIndices != null && seriesIndices !== 'all' && (zrUtil.isArray(seriesIndices) ? zrUtil.indexOf(seriesIndices, seriesIndex) < 0 : seriesIndex !== seriesIndices);\n}\nvar boundingRectBuilders = {\n  rect: function (area) {\n    return getBoundingRectFromMinMax(area.range);\n  },\n  polygon: function (area) {\n    var minMax;\n    var range = area.range;\n    for (var i = 0, len = range.length; i < len; i++) {\n      minMax = minMax || [[Infinity, -Infinity], [Infinity, -Infinity]];\n      var rg = range[i];\n      rg[0] < minMax[0][0] && (minMax[0][0] = rg[0]);\n      rg[0] > minMax[0][1] && (minMax[0][1] = rg[0]);\n      rg[1] < minMax[1][0] && (minMax[1][0] = rg[1]);\n      rg[1] > minMax[1][1] && (minMax[1][1] = rg[1]);\n    }\n    return minMax && getBoundingRectFromMinMax(minMax);\n  }\n};\nfunction getBoundingRectFromMinMax(minMax) {\n  return new BoundingRect(minMax[0][0], minMax[1][0], minMax[0][1] - minMax[0][0], minMax[1][1] - minMax[1][0]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../helper/BrushController.js';\nimport { layoutCovers } from './visualEncoding.js';\nimport ComponentView from '../../view/Component.js';\nvar BrushView = /** @class */function (_super) {\n  __extends(BrushView, _super);\n  function BrushView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BrushView.type;\n    return _this;\n  }\n  BrushView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n    this.model;\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  };\n  BrushView.prototype.render = function (brushModel, ecModel, api, payload) {\n    this.model = brushModel;\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n  BrushView.prototype.updateTransform = function (brushModel, ecModel, api, payload) {\n    // PENDING: `updateTransform` is a little tricky, whose layout need\n    // to be calculate mandatorily and other stages will not be performed.\n    // Take care the correctness of the logic. See #11754 .\n    layoutCovers(ecModel);\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n  BrushView.prototype.updateVisual = function (brushModel, ecModel, api, payload) {\n    this.updateTransform(brushModel, ecModel, api, payload);\n  };\n  BrushView.prototype.updateView = function (brushModel, ecModel, api, payload) {\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n  BrushView.prototype._updateController = function (brushModel, ecModel, api, payload) {\n    // Do not update controller when drawing.\n    (!payload || payload.$from !== brushModel.id) && this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice());\n  };\n  // updateLayout: updateController,\n  // updateVisual: updateController,\n  BrushView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n  BrushView.prototype._onBrush = function (eventParam) {\n    var modelId = this.model.id;\n    var areas = this.model.brushTargetManager.setOutputRanges(eventParam.areas, this.ecModel);\n    // Action is not dispatched on drag end, because the drag end\n    // emits the same params with the last drag move event, and\n    // may have some delay when using touch pad, which makes\n    // animation not smooth (when using debounce).\n    (!eventParam.isEnd || eventParam.removeOnClick) && this.api.dispatchAction({\n      type: 'brush',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n    eventParam.isEnd && this.api.dispatchAction({\n      type: 'brushEnd',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n  };\n  BrushView.type = 'brush';\n  return BrushView;\n}(ComponentView);\nexport default BrushView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport Model from '../../model/Model.js';\nimport ComponentModel from '../../model/Component.js';\nvar DEFAULT_OUT_OF_BRUSH_COLOR = '#ddd';\nvar BrushModel = /** @class */function (_super) {\n  __extends(BrushModel, _super);\n  function BrushModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BrushModel.type;\n    /**\r\n     * @readOnly\r\n     */\n    _this.areas = [];\n    /**\r\n     * Current brush painting area settings.\r\n     * @readOnly\r\n     */\n    _this.brushOption = {};\n    return _this;\n  }\n  BrushModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, ['inBrush', 'outOfBrush']);\n    var inBrush = thisOption.inBrush = thisOption.inBrush || {};\n    // Always give default visual, consider setOption at the second time.\n    thisOption.outOfBrush = thisOption.outOfBrush || {\n      color: DEFAULT_OUT_OF_BRUSH_COLOR\n    };\n    if (!inBrush.hasOwnProperty('liftZ')) {\n      // Bigger than the highlight z lift, otherwise it will\n      // be effected by the highlight z when brush.\n      inBrush.liftZ = 5;\n    }\n  };\n  /**\r\n   * If `areas` is null/undefined, range state remain.\r\n   */\n  BrushModel.prototype.setAreas = function (areas) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(zrUtil.isArray(areas));\n      zrUtil.each(areas, function (area) {\n        zrUtil.assert(area.brushType, 'Illegal areas');\n      });\n    }\n    // If areas is null/undefined, range state remain.\n    // This helps user to dispatchAction({type: 'brush'}) with no areas\n    // set but just want to get the current brush select info from a `brush` event.\n    if (!areas) {\n      return;\n    }\n    this.areas = zrUtil.map(areas, function (area) {\n      return generateBrushOption(this.option, area);\n    }, this);\n  };\n  /**\r\n   * Set the current painting brush option.\r\n   */\n  BrushModel.prototype.setBrushOption = function (brushOption) {\n    this.brushOption = generateBrushOption(this.option, brushOption);\n    this.brushType = this.brushOption.brushType;\n  };\n  BrushModel.type = 'brush';\n  BrushModel.dependencies = ['geo', 'grid', 'xAxis', 'yAxis', 'parallel', 'series'];\n  BrushModel.defaultOption = {\n    seriesIndex: 'all',\n    brushType: 'rect',\n    brushMode: 'single',\n    transformable: true,\n    brushStyle: {\n      borderWidth: 1,\n      color: 'rgba(210,219,238,0.3)',\n      borderColor: '#D2DBEE'\n    },\n    throttleType: 'fixRate',\n    throttleDelay: 0,\n    removeOnClick: true,\n    z: 10000\n  };\n  return BrushModel;\n}(ComponentModel);\nfunction generateBrushOption(option, brushOption) {\n  return zrUtil.merge({\n    brushType: option.brushType,\n    brushMode: option.brushMode,\n    transformable: option.transformable,\n    brushStyle: new Model(option.brushStyle).getItemStyle(),\n    removeOnClick: option.removeOnClick,\n    z: option.z\n  }, brushOption, true);\n}\nexport default BrushModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar ICON_TYPES = ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'];\nvar BrushFeature = /** @class */function (_super) {\n  __extends(BrushFeature, _super);\n  function BrushFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  BrushFeature.prototype.render = function (featureModel, ecModel, api) {\n    var brushType;\n    var brushMode;\n    var isBrushed;\n    ecModel.eachComponent({\n      mainType: 'brush'\n    }, function (brushModel) {\n      brushType = brushModel.brushType;\n      brushMode = brushModel.brushOption.brushMode || 'single';\n      isBrushed = isBrushed || !!brushModel.areas.length;\n    });\n    this._brushType = brushType;\n    this._brushMode = brushMode;\n    zrUtil.each(featureModel.get('type', true), function (type) {\n      featureModel.setIconStatus(type, (type === 'keep' ? brushMode === 'multiple' : type === 'clear' ? isBrushed : type === brushType) ? 'emphasis' : 'normal');\n    });\n  };\n  BrushFeature.prototype.updateView = function (featureModel, ecModel, api) {\n    this.render(featureModel, ecModel, api);\n  };\n  BrushFeature.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon', true);\n    var icons = {};\n    zrUtil.each(model.get('type', true), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n  ;\n  BrushFeature.prototype.onclick = function (ecModel, api, type) {\n    var brushType = this._brushType;\n    var brushMode = this._brushMode;\n    if (type === 'clear') {\n      // Trigger parallel action firstly\n      api.dispatchAction({\n        type: 'axisAreaSelect',\n        intervals: []\n      });\n      api.dispatchAction({\n        type: 'brush',\n        command: 'clear',\n        // Clear all areas of all brush components.\n        areas: []\n      });\n    } else {\n      api.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'brush',\n        brushOption: {\n          brushType: type === 'keep' ? brushType : brushType === type ? false : type,\n          brushMode: type === 'keep' ? brushMode === 'multiple' ? 'single' : 'multiple' : brushMode\n        }\n      });\n    }\n  };\n  ;\n  BrushFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: ICON_TYPES.slice(),\n      icon: {\n        /* eslint-disable */\n        rect: 'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',\n        polygon: 'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',\n        lineX: 'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',\n        lineY: 'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',\n        keep: 'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',\n        clear: 'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2' // jshint ignore:line\n        /* eslint-enable */\n      },\n      // `rect`, `polygon`, `lineX`, `lineY`, `keep`, `clear`\n      title: ecModel.getLocaleModel().get(['toolbox', 'brush', 'title'])\n    };\n    return defaultOption;\n  };\n  return BrushFeature;\n}(ToolboxFeature);\nexport default BrushFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport brushPreprocessor from './preprocessor.js';\nimport BrushView from './BrushView.js';\nimport BrushModel from './BrushModel.js';\nimport brushVisual from './visualEncoding.js';\n// TODO\nimport BrushFeature from '../toolbox/feature/Brush.js';\nimport { registerFeature } from '../toolbox/featureManager.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  registers.registerComponentView(BrushView);\n  registers.registerComponentModel(BrushModel);\n  registers.registerPreprocessor(brushPreprocessor);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, brushVisual);\n  registers.registerAction({\n    type: 'brush',\n    event: 'brush',\n    update: 'updateVisual'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'brush',\n      query: payload\n    }, function (brushModel) {\n      brushModel.setAreas(payload.areas);\n    });\n  });\n  /**\r\n   * payload: {\r\n   *      brushComponents: [\r\n   *          {\r\n   *              brushId,\r\n   *              brushIndex,\r\n   *              brushName,\r\n   *              series: [\r\n   *                  {\r\n   *                      seriesId,\r\n   *                      seriesIndex,\r\n   *                      seriesName,\r\n   *                      rawIndices: [21, 34, ...]\r\n   *                  },\r\n   *                  ...\r\n   *              ]\r\n   *          },\r\n   *          ...\r\n   *      ]\r\n   * }\r\n   */\n  registers.registerAction({\n    type: 'brushSelect',\n    event: 'brushSelected',\n    update: 'none'\n  }, noop);\n  registers.registerAction({\n    type: 'brushEnd',\n    event: 'brushEnd',\n    update: 'none'\n  }, noop);\n  registerFeature('brush', BrushFeature);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { windowOpen } from '../../util/format.js';\nvar TitleModel = /** @class */function (_super) {\n  __extends(TitleModel, _super);\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    // zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel);\n// View\nvar TitleView = /** @class */function (_super) {\n  __extends(TitleView, _super);\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleView.type;\n    return _this;\n  }\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n    if (!titleModel.get('show')) {\n      return;\n    }\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl);\n    // If no subText, but add subTextEl, there will be an empty line.\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding'));\n    // Adjust text align based on position\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n      // @ts-ignore\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      }\n      // Adjust layout by text align\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n      // @ts-ignore\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle);\n    // Render background\n    // Get groupRect again because textAlign has been changed\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { each, isObject, clone } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName, getDataItemValue } from '../../util/model.js';\nvar TimelineModel = /** @class */function (_super) {\n  __extends(TimelineModel, _super);\n  function TimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TimelineModel.type;\n    _this.layoutMode = 'box';\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  TimelineModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._initData();\n  };\n  /**\r\n   * @override\r\n   */\n  TimelineModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    this._initData();\n  };\n  TimelineModel.prototype.setCurrentIndex = function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n    var count = this._data.count();\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n    this.option.currentIndex = currentIndex;\n  };\n  /**\r\n   * @return {number} currentIndex\r\n   */\n  TimelineModel.prototype.getCurrentIndex = function () {\n    return this.option.currentIndex;\n  };\n  /**\r\n   * @return {boolean}\r\n   */\n  TimelineModel.prototype.isIndexMax = function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  };\n  /**\r\n   * @param {boolean} state true: play, false: stop\r\n   */\n  TimelineModel.prototype.setPlayState = function (state) {\n    this.option.autoPlay = !!state;\n  };\n  /**\r\n   * @return {boolean} true: play, false: stop\r\n   */\n  TimelineModel.prototype.getPlayState = function () {\n    return !!this.option.autoPlay;\n  };\n  /**\r\n   * @private\r\n   */\n  TimelineModel.prototype._initData = function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n    var processedDataArr;\n    if (axisType === 'category') {\n      processedDataArr = [];\n      each(dataArr, function (item, index) {\n        var value = convertOptionIdName(getDataItemValue(item), '');\n        var newItem;\n        if (isObject(item)) {\n          newItem = clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n        processedDataArr.push(newItem);\n        names.push(value);\n      });\n    } else {\n      processedDataArr = dataArr;\n    }\n    var dimType = {\n      category: 'ordinal',\n      time: 'time',\n      value: 'number'\n    }[axisType] || 'number';\n    var data = this._data = new SeriesData([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(processedDataArr, names);\n  };\n  TimelineModel.prototype.getData = function () {\n    return this._data;\n  };\n  /**\r\n   * @public\r\n   * @return {Array.<string>} categoreis\r\n   */\n  TimelineModel.prototype.getCategories = function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  };\n  TimelineModel.type = 'timeline';\n  /**\r\n   * @protected\r\n   */\n  TimelineModel.defaultOption = {\n    // zlevel: 0,                  // \n    z: 4,\n    show: true,\n    axisType: 'time',\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: 5,\n    controlPosition: 'left',\n    autoPlay: false,\n    rewind: false,\n    loop: true,\n    playInterval: 2000,\n    currentIndex: 0,\n    itemStyle: {},\n    label: {\n      color: '#000'\n    },\n    data: []\n  };\n  return TimelineModel;\n}(ComponentModel);\nexport default TimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport TimelineModel from './TimelineModel.js';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar SliderTimelineModel = /** @class */function (_super) {\n  __extends(SliderTimelineModel, _super);\n  function SliderTimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderTimelineModel.type;\n    return _this;\n  }\n  SliderTimelineModel.type = 'timeline.slider';\n  /**\r\n   * @protected\r\n   */\n  SliderTimelineModel.defaultOption = inheritDefaultOption(TimelineModel.defaultOption, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    orient: 'horizontal',\n    inverse: false,\n    tooltip: {\n      trigger: 'item' // data item may also have tootip attr.\n    },\n    symbol: 'circle',\n    symbolSize: 12,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: '#DAE1F5'\n    },\n    label: {\n      position: 'auto',\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      show: true,\n      interval: 'auto',\n      rotate: 0,\n      // formatter: null,\n      // TEXTSTYLE\n      color: '#A4B1D7'\n    },\n    itemStyle: {\n      color: '#A4B1D7',\n      borderWidth: 1\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 15,\n      color: '#316bf3',\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0, 0, 0, 0.3)',\n      // borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 24,\n      itemGap: 12,\n      position: 'left',\n      playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',\n      stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',\n      // eslint-disable-next-line max-len\n      nextIcon: 'M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z',\n      // eslint-disable-next-line max-len\n      prevIcon: 'M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z',\n      prevBtnSize: 18,\n      nextBtnSize: 18,\n      color: '#A4B1D7',\n      borderColor: '#A4B1D7',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true,\n        // TEXTSTYLE\n        color: '#6f778d'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      controlStyle: {\n        color: '#316BF3',\n        borderColor: '#316BF3',\n        borderWidth: 2\n      }\n    },\n    progress: {\n      lineStyle: {\n        color: '#316BF3'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      label: {\n        color: '#6f778d'\n      }\n    },\n    data: []\n  });\n  return SliderTimelineModel;\n}(TimelineModel);\nmixin(SliderTimelineModel, DataFormatMixin.prototype);\nexport default SliderTimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nvar TimelineView = /** @class */function (_super) {\n  __extends(TimelineView, _super);\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TimelineView.type;\n    return _this;\n  }\n  TimelineView.type = 'timeline';\n  return TimelineView;\n}(ComponentView);\nexport default TimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../../coord/Axis.js';\n/**\r\n * Extend axis 2d\r\n */\nvar TimelineAxis = /** @class */function (_super) {\n  __extends(TimelineAxis, _super);\n  function TimelineAxis(dim, scale, coordExtent, axisType) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    _this.type = axisType || 'value';\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  TimelineAxis.prototype.getLabelModel = function () {\n    // Force override\n    return this.model.getModel('label');\n  };\n  /**\r\n   * @override\r\n   */\n  TimelineAxis.prototype.isHorizontal = function () {\n    return this.model.get('orient') === 'horizontal';\n  };\n  return TimelineAxis;\n}(Axis);\nexport default TimelineAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport * as layout from '../../util/layout.js';\nimport TimelineView from './TimelineView.js';\nimport TimelineAxis from './TimelineAxis.js';\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as numberUtil from '../../util/number.js';\nimport { merge, each, extend, isString, bind, defaults, retrieve2 } from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../../scale/Ordinal.js';\nimport TimeScale from '../../scale/Time.js';\nimport IntervalScale from '../../scale/Interval.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../../util/model.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup.js';\nvar PI = Math.PI;\nvar labelDataIndexStore = makeInner();\nvar SliderTimelineView = /** @class */function (_super) {\n  __extends(SliderTimelineView, _super);\n  function SliderTimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderTimelineView.type;\n    return _this;\n  }\n  SliderTimelineView.prototype.init = function (ecModel, api) {\n    this.api = api;\n  };\n  /**\r\n   * @override\r\n   */\n  SliderTimelineView.prototype.render = function (timelineModel, ecModel, api) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n    if (timelineModel.get('show', true)) {\n      var layoutInfo_1 = this._layout(timelineModel, api);\n      var mainGroup_1 = this._createGroup('_mainGroup');\n      var labelGroup = this._createGroup('_labelGroup');\n      var axis_1 = this._axis = this._createAxis(layoutInfo_1, timelineModel);\n      timelineModel.formatTooltip = function (dataIndex) {\n        var name = axis_1.scale.getLabel({\n          value: dataIndex\n        });\n        return createTooltipMarkup('nameValue', {\n          noName: true,\n          value: name\n        });\n      };\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo_1, mainGroup_1, axis_1, timelineModel);\n      }, this);\n      this._renderAxisLabel(layoutInfo_1, labelGroup, axis_1, timelineModel);\n      this._position(layoutInfo_1, timelineModel);\n    }\n    this._doPlayStop();\n    this._updateTicksStatus();\n  };\n  /**\r\n   * @override\r\n   */\n  SliderTimelineView.prototype.remove = function () {\n    this._clearTimer();\n    this.group.removeAll();\n  };\n  /**\r\n   * @override\r\n   */\n  SliderTimelineView.prototype.dispose = function () {\n    this._clearTimer();\n  };\n  SliderTimelineView.prototype._layout = function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get(['label', 'position']);\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api);\n    var parsedLabelPos;\n    // Auto label offset.\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      parsedLabelPos = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isString(labelPosOpt)) {\n      parsedLabelPos = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    } else {\n      // is number\n      parsedLabelPos = labelPosOpt;\n    }\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    };\n    // Position\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show', true);\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap;\n    // Special label rotate.\n    var labelRotation = timelineModel.get(['label', 'rotate']) || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var controlPosition = controlModel.get('position', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength;\n    // position[0] means left, position[1] means middle.\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n    var axisExtent = [xLeft, xRight];\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: parsedLabelPos,\n      labelAlign: timelineModel.get(['label', 'align']) || labelAlignMap[orient],\n      labelBaseline: timelineModel.get(['label', 'verticalAlign']) || timelineModel.get(['label', 'baseline']) || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  };\n  SliderTimelineView.prototype._position = function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n    if (layoutInfo.orient === 'vertical') {\n      // transform to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = [mainGroup.x, mainGroup.y];\n    var labelsPosition = [labelGroup.x, labelGroup.y];\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n    if (labelPosOpt == null || isString(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n    mainGroup.setPosition(mainPosition);\n    labelGroup.setPosition(labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n    function setOrigin(targetGroup) {\n      targetGroup.originX = viewBound[0][0] - targetGroup.x;\n      targetGroup.originY = viewBound[1][0] - targetGroup.y;\n    }\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  };\n  SliderTimelineView.prototype._createAxis = function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = createScaleByModel(timelineModel, axisType);\n    // Customize scale. The `tickValue` is `dataIndex`.\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return {\n          value: value\n        };\n      });\n    };\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    scale.calcNiceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  };\n  SliderTimelineView.prototype._createGroup = function (key) {\n    var newGroup = this[key] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  };\n  SliderTimelineView.prototype._renderAxisLine = function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n    if (!timelineModel.get(['lineStyle', 'show'])) {\n      return;\n    }\n    var line = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(line);\n    var progressLine = this._progressLine = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        x2: this._currentPointer ? this._currentPointer.x : axisExtent[0],\n        y1: 0,\n        y2: 0\n      },\n      style: defaults({\n        lineCap: 'round',\n        lineWidth: line.style.lineWidth\n      }, timelineModel.getModel(['progress', 'lineStyle']).getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(progressLine);\n  };\n  SliderTimelineView.prototype._renderAxisTick = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n    var data = timelineModel.getData();\n    // Show all ticks, despite ignoring strategy.\n    var ticks = axis.scale.getTicks();\n    this._tickSymbols = [];\n    // The value is dataIndex, see the customized scale.\n    each(ticks, function (tick) {\n      var tickCoord = axis.dataToCoord(tick.value);\n      var itemModel = data.getItemModel(tick.value);\n      var itemStyleModel = itemModel.getModel('itemStyle');\n      var hoverStyleModel = itemModel.getModel(['emphasis', 'itemStyle']);\n      var progressStyleModel = itemModel.getModel(['progress', 'itemStyle']);\n      var symbolOpt = {\n        x: tickCoord,\n        y: 0,\n        onclick: bind(_this._changeTimeline, _this, tick.value)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      el.ensureState('emphasis').style = hoverStyleModel.getItemStyle();\n      el.ensureState('progress').style = progressStyleModel.getItemStyle();\n      enableHoverEmphasis(el);\n      var ecData = getECData(el);\n      if (itemModel.get('tooltip')) {\n        ecData.dataIndex = tick.value;\n        ecData.dataModel = timelineModel;\n      } else {\n        ecData.dataIndex = ecData.dataModel = null;\n      }\n      _this._tickSymbols.push(el);\n    });\n  };\n  SliderTimelineView.prototype._renderAxisLabel = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n    var labelModel = axis.getLabelModel();\n    if (!labelModel.get('show')) {\n      return;\n    }\n    var data = timelineModel.getData();\n    var labels = axis.getViewLabels();\n    this._tickLabels = [];\n    each(labels, function (labelItem) {\n      // The tickValue is dataIndex, see the customized scale.\n      var dataIndex = labelItem.tickValue;\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label');\n      var hoverLabelModel = itemModel.getModel(['emphasis', 'label']);\n      var progressLabelModel = itemModel.getModel(['progress', 'label']);\n      var tickCoord = axis.dataToCoord(labelItem.tickValue);\n      var textEl = new graphic.Text({\n        x: tickCoord,\n        y: 0,\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(_this._changeTimeline, _this, dataIndex),\n        silent: false,\n        style: createTextStyle(normalLabelModel, {\n          text: labelItem.formattedLabel,\n          align: layoutInfo.labelAlign,\n          verticalAlign: layoutInfo.labelBaseline\n        })\n      });\n      textEl.ensureState('emphasis').style = createTextStyle(hoverLabelModel);\n      textEl.ensureState('progress').style = createTextStyle(progressLabelModel);\n      group.add(textEl);\n      enableHoverEmphasis(textEl);\n      labelDataIndexStore(textEl).dataIndex = dataIndex;\n      _this._tickLabels.push(textEl);\n    });\n  };\n  SliderTimelineView.prototype._renderControl = function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle').getItemStyle();\n    var hoverStyle = timelineModel.getModel(['emphasis', 'controlStyle']).getItemStyle();\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'next', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'prev', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, playState ? 'stop' : 'play', bind(this._handlePlayClick, this, !playState), true);\n    function makeBtn(position, iconName, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n      var iconSize = parsePercent(retrieve2(timelineModel.get(['controlStyle', iconName + 'BtnSize']), controlSize), controlSize);\n      var rect = [0, -iconSize / 2, iconSize, iconSize];\n      var btn = makeControlIcon(timelineModel, iconName + 'Icon', rect, {\n        x: position[0],\n        y: position[1],\n        originX: controlSize / 2,\n        originY: 0,\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      });\n      btn.ensureState('emphasis').style = hoverStyle;\n      group.add(btn);\n      enableHoverEmphasis(btn);\n    }\n  };\n  SliderTimelineView.prototype._renderCurrentPointer = function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function (pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function (pointer) {\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel);\n      }\n    };\n    // Reuse when exists, for animation and drag.\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  };\n  SliderTimelineView.prototype._handlePlayClick = function (nextState) {\n    this._clearTimer();\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  };\n  SliderTimelineView.prototype._handlePointerDrag = function (dx, dy, e) {\n    this._clearTimer();\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  };\n  SliderTimelineView.prototype._handlePointerDragend = function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  };\n  SliderTimelineView.prototype._pointerChangeTimeline = function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.x = toCoord;\n    this._currentPointer.markRedraw();\n    var progressLine = this._progressLine;\n    if (progressLine) {\n      progressLine.shape.x2 = toCoord;\n      progressLine.dirty();\n    }\n    var targetDataIndex = this._findNearestTick(toCoord);\n    var timelineModel = this.model;\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  };\n  SliderTimelineView.prototype._doPlayStop = function () {\n    var _this = this;\n    this._clearTimer();\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(function () {\n        // Do not cache\n        var timelineModel = _this.model;\n        _this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n      }, this.model.get('playInterval'));\n    }\n  };\n  SliderTimelineView.prototype._toAxisCoord = function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n    return graphic.applyTransform(vertex, trans, true);\n  };\n  SliderTimelineView.prototype._findNearestTick = function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  };\n  SliderTimelineView.prototype._clearTimer = function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  };\n  SliderTimelineView.prototype._changeTimeline = function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  };\n  SliderTimelineView.prototype._updateTicksStatus = function () {\n    var currentIndex = this.model.getCurrentIndex();\n    var tickSymbols = this._tickSymbols;\n    var tickLabels = this._tickLabels;\n    if (tickSymbols) {\n      for (var i = 0; i < tickSymbols.length; i++) {\n        tickSymbols && tickSymbols[i] && tickSymbols[i].toggleState('progress', i < currentIndex);\n      }\n    }\n    if (tickLabels) {\n      for (var i = 0; i < tickLabels.length; i++) {\n        tickLabels && tickLabels[i] && tickLabels[i].toggleState('progress', labelDataIndexStore(tickLabels[i]).dataIndex <= currentIndex);\n      }\n    }\n  };\n  SliderTimelineView.type = 'timeline.slider';\n  return SliderTimelineView;\n}(TimelineView);\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n      default:\n        // default to be value\n        return new IntervalScale();\n    }\n  }\n}\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  }, model.get('padding'));\n}\nfunction makeControlIcon(timelineModel, objPath, rect, opts) {\n  var style = opts.style;\n  var icon = graphic.createIcon(timelineModel.get(['controlStyle', objPath]), opts || {}, new BoundingRect(rect[0], rect[1], rect[2], rect[3]));\n  // TODO createIcon won't use style in opt.\n  if (style) {\n    icon.setStyle(style);\n  }\n  return icon;\n}\n/**\r\n * Create symbol or update symbol\r\n * opt: basic position and event handlers\r\n */\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n    callback && callback.onUpdate(symbol);\n  }\n  // Style\n  var itemStyle = itemStyleModel.getItemStyle(['color']);\n  symbol.setStyle(itemStyle);\n  // Transform and events.\n  opt = merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = normalizeSymbolSize(hostModel.get('symbolSize'));\n  opt.scaleX = symbolSize[0] / 2;\n  opt.scaleY = symbolSize[1] / 2;\n  var symbolOffset = normalizeSymbolOffset(hostModel.get('symbolOffset'), symbolSize);\n  if (symbolOffset) {\n    opt.x = (opt.x || 0) + symbolOffset[0];\n    opt.y = (opt.y || 0) + symbolOffset[1];\n  }\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt);\n  // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n  symbol.updateTransform();\n  return symbol;\n}\nfunction pointerMoveTo(pointer, progressLine, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get('value', dataIndex));\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      x: toCoord,\n      y: 0\n    });\n    progressLine && progressLine.attr({\n      shape: {\n        x2: toCoord\n      }\n    });\n  } else {\n    var animationCfg = {\n      duration: pointerModel.get('animationDuration', true),\n      easing: pointerModel.get('animationEasing', true)\n    };\n    pointer.stopAnimation(null, true);\n    pointer.animateTo({\n      x: toCoord,\n      y: 0\n    }, animationCfg);\n    progressLine && progressLine.animateTo({\n      shape: {\n        x2: toCoord\n      }\n    }, animationCfg);\n  }\n}\nexport default SliderTimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function timelinePreprocessor(option) {\n  var timelineOpt = option && option.timeline;\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n    compatibleEC2(opt);\n  });\n}\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  };\n  // Compatible with ec2\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n  transferItem(opt);\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n    delete opt.controlPosition;\n  }\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n      transferItem(dataItem);\n    }\n  });\n}\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {});\n  // Transfer label out\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport SliderTimelineModel from './SliderTimelineModel.js';\nimport SliderTimelineView from './SliderTimelineView.js';\nimport { installTimelineAction } from './timelineAction.js';\nimport preprocessor from './preprocessor.js';\nexport function install(registers) {\n  registers.registerComponentModel(SliderTimelineModel);\n  registers.registerComponentView(SliderTimelineView);\n  registers.registerSubTypeDefaulter('timeline', function () {\n    // Only slider now.\n    return 'slider';\n  });\n  installTimelineAction(registers);\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { defaults } from 'zrender/lib/core/util.js';\nexport function installTimelineAction(registers) {\n  registers.registerAction({\n    type: 'timelineChange',\n    event: 'timelineChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel, api) {\n    var timelineModel = ecModel.getComponent('timeline');\n    if (timelineModel && payload.currentIndex != null) {\n      timelineModel.setCurrentIndex(payload.currentIndex);\n      if (!timelineModel.get('loop', true) && timelineModel.isIndexMax() && timelineModel.getPlayState()) {\n        timelineModel.setPlayState(false);\n        // The timeline has played to the end, trigger event\n        api.dispatchAction({\n          type: 'timelinePlayChange',\n          playState: false,\n          from: payload.from\n        });\n      }\n    }\n    // Set normalized currentIndex to payload.\n    ecModel.resetOption('timeline', {\n      replaceMerge: timelineModel.get('replaceMerge', true)\n    });\n    return defaults({\n      currentIndex: timelineModel.option.currentIndex\n    }, payload);\n  });\n  registers.registerAction({\n    type: 'timelinePlayChange',\n    event: 'timelinePlayChanged',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n    if (timelineModel && payload.playState != null) {\n      timelineModel.setPlayState(payload.playState);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\nexport default function checkMarkerInSeries(seriesOpts, markerType) {\n  if (!seriesOpts) {\n    return false;\n  }\n  var seriesOptArr = isArray(seriesOpts) ? seriesOpts : [seriesOpts];\n  for (var idx = 0; idx < seriesOptArr.length; idx++) {\n    if (seriesOptArr[idx] && seriesOptArr[idx][markerType]) {\n      return true;\n    }\n  }\n  return false;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat.js';\nimport ComponentModel from '../../model/Component.js';\nimport { makeInner, defaultEmphasis } from '../../util/model.js';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup.js';\nfunction fillLabel(opt) {\n  defaultEmphasis(opt, 'label', ['show']);\n}\n// { [componentType]: MarkerModel }\nvar inner = makeInner();\nvar MarkerModel = /** @class */function (_super) {\n  __extends(MarkerModel, _super);\n  function MarkerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkerModel.type;\n    /**\r\n     * If marker model is created by self from series\r\n     */\n    _this.createdBySelf = false;\n    return _this;\n  }\n  /**\r\n   * @overrite\r\n   */\n  MarkerModel.prototype.init = function (option, parentModel, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.type === 'marker') {\n        throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.');\n      }\n    }\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._mergeOption(option, ecModel, false, true);\n  };\n  MarkerModel.prototype.isAnimationEnabled = function () {\n    if (env.node) {\n      return false;\n    }\n    var hostSeries = this.__hostSeries;\n    return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\n  };\n  /**\r\n   * @overrite\r\n   */\n  MarkerModel.prototype.mergeOption = function (newOpt, ecModel) {\n    this._mergeOption(newOpt, ecModel, false, false);\n  };\n  MarkerModel.prototype._mergeOption = function (newOpt, ecModel, createdBySelf, isInit) {\n    var componentType = this.mainType;\n    if (!createdBySelf) {\n      ecModel.eachSeries(function (seriesModel) {\n        // mainType can be markPoint, markLine, markArea\n        var markerOpt = seriesModel.get(this.mainType, true);\n        var markerModel = inner(seriesModel)[componentType];\n        if (!markerOpt || !markerOpt.data) {\n          inner(seriesModel)[componentType] = null;\n          return;\n        }\n        if (!markerModel) {\n          if (isInit) {\n            // Default label emphasis `position` and `show`\n            fillLabel(markerOpt);\n          }\n          zrUtil.each(markerOpt.data, function (item) {\n            // FIXME Overwrite fillLabel method ?\n            if (item instanceof Array) {\n              fillLabel(item[0]);\n              fillLabel(item[1]);\n            } else {\n              fillLabel(item);\n            }\n          });\n          markerModel = this.createMarkerModelFromSeries(markerOpt, this, ecModel);\n          // markerModel = new ImplementedMarkerModel(\n          //     markerOpt, this, ecModel\n          // );\n          zrUtil.extend(markerModel, {\n            mainType: this.mainType,\n            // Use the same series index and name\n            seriesIndex: seriesModel.seriesIndex,\n            name: seriesModel.name,\n            createdBySelf: true\n          });\n          markerModel.__hostSeries = seriesModel;\n        } else {\n          markerModel._mergeOption(markerOpt, ecModel, true);\n        }\n        inner(seriesModel)[componentType] = markerModel;\n      }, this);\n    }\n  };\n  MarkerModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var itemName = data.getName(dataIndex);\n    return createTooltipMarkup('section', {\n      header: this.name,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: itemName,\n        value: value,\n        noName: !itemName,\n        noValue: value == null\n      })]\n    });\n  };\n  MarkerModel.prototype.getData = function () {\n    return this._data;\n  };\n  MarkerModel.prototype.setData = function (data) {\n    this._data = data;\n  };\n  MarkerModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = DataFormatMixin.prototype.getDataParams.call(this, dataIndex, dataType);\n    var hostSeries = this.__hostSeries;\n    if (hostSeries) {\n      params.seriesId = hostSeries.id;\n      params.seriesName = hostSeries.name;\n      params.seriesType = hostSeries.subType;\n    }\n    return params;\n  };\n  MarkerModel.getMarkerModelFromSeries = function (seriesModel,\n  // Support three types of markers. Strict check.\n  componentType) {\n    return inner(seriesModel)[componentType];\n  };\n  MarkerModel.type = 'marker';\n  MarkerModel.dependencies = ['series', 'grid', 'polar', 'geo'];\n  return MarkerModel;\n}(ComponentModel);\nzrUtil.mixin(MarkerModel, DataFormatMixin.prototype);\nexport default MarkerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\nvar MarkPointModel = /** @class */function (_super) {\n  __extends(MarkPointModel, _super);\n  function MarkPointModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkPointModel.type;\n    return _this;\n  }\n  MarkPointModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkPointModel(markerOpt, masterMarkerModel, ecModel);\n  };\n  MarkPointModel.type = 'markPoint';\n  MarkPointModel.defaultOption = {\n    // zlevel: 0,\n    z: 5,\n    symbol: 'pin',\n    symbolSize: 50,\n    // symbolRotate: 0,\n    // symbolOffset: [0, 0]\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'inside'\n    },\n    itemStyle: {\n      borderWidth: 2\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return MarkPointModel;\n}(MarkerModel);\nexport default MarkPointModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as numberUtil from '../../util/number.js';\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\nimport { indexOf, curry, clone, isArray } from 'zrender/lib/core/util.js';\nimport { parseDataValue } from '../../data/helper/dataValueHelper.js';\nfunction hasXOrY(item) {\n  return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\n}\nfunction hasXAndY(item) {\n  return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\n}\nfunction markerTypeCalculatorWithExtent(markerType, data, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\n  var coordArr = [];\n  var stacked = isDimensionStacked(data, targetDataDim /* , otherDataDim */);\n  var calcDataDim = stacked ? data.getCalculationInfo('stackResultDimension') : targetDataDim;\n  var value = numCalculate(data, calcDataDim, markerType);\n  var dataIndex = data.indicesOfNearest(calcDataDim, value)[0];\n  coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex);\n  coordArr[targetCoordIndex] = data.get(calcDataDim, dataIndex);\n  var coordArrValue = data.get(targetDataDim, dataIndex);\n  // Make it simple, do not visit all stacked value to count precision.\n  var precision = numberUtil.getPrecision(data.get(targetDataDim, dataIndex));\n  precision = Math.min(precision, 20);\n  if (precision >= 0) {\n    coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\n  }\n  return [coordArr, coordArrValue];\n}\n// TODO Specified percent\nvar markerTypeCalculator = {\n  min: curry(markerTypeCalculatorWithExtent, 'min'),\n  max: curry(markerTypeCalculatorWithExtent, 'max'),\n  average: curry(markerTypeCalculatorWithExtent, 'average'),\n  median: curry(markerTypeCalculatorWithExtent, 'median')\n};\n/**\r\n * Transform markPoint data item to format used in List by do the following\r\n * 1. Calculate statistic like `max`, `min`, `average`\r\n * 2. Convert `item.xAxis`, `item.yAxis` to `item.coord` array\r\n */\nexport function dataTransform(seriesModel, item) {\n  if (!item) {\n    return;\n  }\n  var data = seriesModel.getData();\n  var coordSys = seriesModel.coordinateSystem;\n  var dims = coordSys && coordSys.dimensions;\n  // 1. If not specify the position with pixel directly\n  // 2. If `coord` is not a data array. Which uses `xAxis`,\n  // `yAxis` to specify the coord on each dimension\n  // parseFloat first because item.x and item.y can be percent string like '20%'\n  if (!hasXAndY(item) && !isArray(item.coord) && isArray(dims)) {\n    var axisInfo = getAxisInfo(item, data, coordSys, seriesModel);\n    // Clone the option\n    // Transform the properties xAxis, yAxis, radiusAxis, angleAxis, geoCoord to value\n    item = clone(item);\n    if (item.type && markerTypeCalculator[item.type] && axisInfo.baseAxis && axisInfo.valueAxis) {\n      var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\n      var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\n      var coordInfo = markerTypeCalculator[item.type](data, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex);\n      item.coord = coordInfo[0];\n      // Force to use the value of calculated value.\n      // let item use the value without stack.\n      item.value = coordInfo[1];\n    } else {\n      // FIXME Only has one of xAxis and yAxis.\n      item.coord = [item.xAxis != null ? item.xAxis : item.radiusAxis, item.yAxis != null ? item.yAxis : item.angleAxis];\n    }\n  }\n  // x y is provided\n  if (item.coord == null || !isArray(dims)) {\n    item.coord = [];\n  } else {\n    // Each coord support max, min, average\n    var coord = item.coord;\n    for (var i = 0; i < 2; i++) {\n      if (markerTypeCalculator[coord[i]]) {\n        coord[i] = numCalculate(data, data.mapDimension(dims[i]), coord[i]);\n      }\n    }\n  }\n  return item;\n}\nexport function getAxisInfo(item, data, coordSys, seriesModel) {\n  var ret = {};\n  if (item.valueIndex != null || item.valueDim != null) {\n    ret.valueDataDim = item.valueIndex != null ? data.getDimension(item.valueIndex) : item.valueDim;\n    ret.valueAxis = coordSys.getAxis(dataDimToCoordDim(seriesModel, ret.valueDataDim));\n    ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n  } else {\n    ret.baseAxis = seriesModel.getBaseAxis();\n    ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n    ret.valueDataDim = data.mapDimension(ret.valueAxis.dim);\n  }\n  return ret;\n}\nfunction dataDimToCoordDim(seriesModel, dataDim) {\n  var dimItem = seriesModel.getData().getDimensionInfo(dataDim);\n  return dimItem && dimItem.coordDim;\n}\n/**\r\n * Filter data which is out of coordinateSystem range\r\n * [dataFilter description]\r\n */\nexport function dataFilter(\n// Currently only polar and cartesian has containData.\ncoordSys, item) {\n  // Always return true if there is no coordSys\n  return coordSys && coordSys.containData && item.coord && !hasXOrY(item) ? coordSys.containData(item.coord) : true;\n}\nexport function zoneFilter(\n// Currently only polar and cartesian has containData.\ncoordSys, item1, item2) {\n  // Always return true if there is no coordSys\n  return coordSys && coordSys.containZone && item1.coord && item2.coord && !hasXOrY(item1) && !hasXOrY(item2) ? coordSys.containZone(item1.coord, item2.coord) : true;\n}\nexport function createMarkerDimValueGetter(inCoordSys, dims) {\n  return inCoordSys ? function (item, dimName, dataIndex, dimIndex) {\n    var rawVal = dimIndex < 2\n    // x, y, radius, angle\n    ? item.coord && item.coord[dimIndex] : item.value;\n    return parseDataValue(rawVal, dims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dims[dimIndex]);\n  };\n}\nexport function numCalculate(data, valueDataDim, type) {\n  if (type === 'average') {\n    var sum_1 = 0;\n    var count_1 = 0;\n    data.each(valueDataDim, function (val, idx) {\n      if (!isNaN(val)) {\n        sum_1 += val;\n        count_1++;\n      }\n    });\n    return sum_1 / count_1;\n  } else if (type === 'median') {\n    return data.getMedian(valueDataDim);\n  } else {\n    // max & min\n    return data.getDataExtent(valueDataDim)[type === 'max' ? 1 : 0];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport MarkerModel from './MarkerModel.js';\nimport { makeInner } from '../../util/model.js';\nimport { enterBlur, leaveBlur } from '../../util/states.js';\nvar inner = makeInner();\nvar MarkerView = /** @class */function (_super) {\n  __extends(MarkerView, _super);\n  function MarkerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkerView.type;\n    return _this;\n  }\n  MarkerView.prototype.init = function () {\n    this.markerGroupMap = createHashMap();\n  };\n  MarkerView.prototype.render = function (markerModel, ecModel, api) {\n    var _this = this;\n    var markerGroupMap = this.markerGroupMap;\n    markerGroupMap.each(function (item) {\n      inner(item).keep = false;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      markerModel && _this.renderSeries(seriesModel, markerModel, ecModel, api);\n    });\n    markerGroupMap.each(function (item) {\n      !inner(item).keep && _this.group.remove(item.group);\n    });\n  };\n  MarkerView.prototype.markKeep = function (drawGroup) {\n    inner(drawGroup).keep = true;\n  };\n  MarkerView.prototype.toggleBlurSeries = function (seriesModelList, isBlur) {\n    var _this = this;\n    each(seriesModelList, function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      if (markerModel) {\n        var data = markerModel.getData();\n        data.eachItemGraphicEl(function (el) {\n          if (el) {\n            isBlur ? enterBlur(el) : leaveBlur(el);\n          }\n        });\n      }\n    });\n  };\n  MarkerView.type = 'marker';\n  return MarkerView;\n}(ComponentView);\nexport default MarkerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../../chart/helper/SymbolDraw.js';\nimport * as numberUtil from '../../util/number.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as markerHelper from './markerHelper.js';\nimport MarkerView from './MarkerView.js';\nimport MarkerModel from './MarkerModel.js';\nimport { isFunction, map, filter, curry, extend } from 'zrender/lib/core/util.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nfunction updateMarkerLayout(mpData, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  mpData.each(function (idx) {\n    var itemModel = mpData.getItemModel(idx);\n    var point;\n    var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n    var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n    if (!isNaN(xPx) && !isNaN(yPx)) {\n      point = [xPx, yPx];\n    }\n    // Chart like bar may have there own marker positioning logic\n    else if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPosition\n      point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\n    } else if (coordSys) {\n      var x = mpData.get(coordSys.dimensions[0], idx);\n      var y = mpData.get(coordSys.dimensions[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    }\n    // Use x, y if has any\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n    mpData.setItemLayout(idx, point);\n  });\n}\nvar MarkPointView = /** @class */function (_super) {\n  __extends(MarkPointView, _super);\n  function MarkPointView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkPointView.type;\n    return _this;\n  }\n  MarkPointView.prototype.updateTransform = function (markPointModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mpModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markPoint');\n      if (mpModel) {\n        updateMarkerLayout(mpModel.getData(), seriesModel, api);\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n  MarkPointView.prototype.renderSeries = function (seriesModel, mpModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var symbolDrawMap = this.markerGroupMap;\n    var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw());\n    var mpData = createData(coordSys, seriesModel, mpModel);\n    // FIXME\n    mpModel.setData(mpData);\n    updateMarkerLayout(mpModel.getData(), seriesModel, api);\n    mpData.each(function (idx) {\n      var itemModel = mpData.getItemModel(idx);\n      var symbol = itemModel.getShallow('symbol');\n      var symbolSize = itemModel.getShallow('symbolSize');\n      var symbolRotate = itemModel.getShallow('symbolRotate');\n      var symbolOffset = itemModel.getShallow('symbolOffset');\n      var symbolKeepAspect = itemModel.getShallow('symbolKeepAspect');\n      // TODO: refactor needed: single data item should not support callback function\n      if (isFunction(symbol) || isFunction(symbolSize) || isFunction(symbolRotate) || isFunction(symbolOffset)) {\n        var rawIdx = mpModel.getRawValue(idx);\n        var dataParams = mpModel.getDataParams(idx);\n        if (isFunction(symbol)) {\n          symbol = symbol(rawIdx, dataParams);\n        }\n        if (isFunction(symbolSize)) {\n          // FIXME  ECharts 2.x2.x \n          symbolSize = symbolSize(rawIdx, dataParams);\n        }\n        if (isFunction(symbolRotate)) {\n          symbolRotate = symbolRotate(rawIdx, dataParams);\n        }\n        if (isFunction(symbolOffset)) {\n          symbolOffset = symbolOffset(rawIdx, dataParams);\n        }\n      }\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n      if (!style.fill) {\n        style.fill = color;\n      }\n      mpData.setItemVisual(idx, {\n        symbol: symbol,\n        symbolSize: symbolSize,\n        symbolRotate: symbolRotate,\n        symbolOffset: symbolOffset,\n        symbolKeepAspect: symbolKeepAspect,\n        style: style\n      });\n    });\n    // TODO Text are wrong\n    symbolDraw.updateData(mpData);\n    this.group.add(symbolDraw.group);\n    // Set host model for tooltip\n    // FIXME\n    mpData.eachItemGraphicEl(function (el) {\n      el.traverse(function (child) {\n        getECData(child).dataModel = mpModel;\n      });\n    });\n    this.markKeep(symbolDraw);\n    symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\n  };\n  MarkPointView.type = 'markPoint';\n  return MarkPointView;\n}(MarkerView);\nfunction createData(coordSys, seriesModel, mpModel) {\n  var coordDimsInfos;\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {};\n      // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n  var mpData = new SeriesData(coordDimsInfos, mpModel);\n  var dataOpt = map(mpModel.get('data'), curry(markerHelper.dataTransform, seriesModel));\n  if (coordSys) {\n    dataOpt = filter(dataOpt, curry(markerHelper.dataFilter, coordSys));\n  }\n  var dimValueGetter = markerHelper.createMarkerDimValueGetter(!!coordSys, coordDimsInfos);\n  mpData.initData(dataOpt, null, dimValueGetter);\n  return mpData;\n}\nexport default MarkPointView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkPointModel from './MarkPointModel.js';\nimport MarkPointView from './MarkPointView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkPointModel);\n  registers.registerComponentView(MarkPointView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markPoint')) {\n      // Make sure markPoint component is enabled\n      opt.markPoint = opt.markPoint || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\nvar MarkLineModel = /** @class */function (_super) {\n  __extends(MarkLineModel, _super);\n  function MarkLineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkLineModel.type;\n    return _this;\n  }\n  MarkLineModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkLineModel(markerOpt, masterMarkerModel, ecModel);\n  };\n  MarkLineModel.type = 'markLine';\n  MarkLineModel.defaultOption = {\n    // zlevel: 0,\n    z: 5,\n    symbol: ['circle', 'arrow'],\n    symbolSize: [8, 16],\n    // symbolRotate: 0,\n    symbolOffset: 0,\n    precision: 2,\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'end',\n      distance: 5\n    },\n    lineStyle: {\n      type: 'dashed'\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        width: 3\n      }\n    },\n    animationEasing: 'linear'\n  };\n  return MarkLineModel;\n}(MarkerModel);\nexport default MarkLineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as numberUtil from '../../util/number.js';\nimport * as markerHelper from './markerHelper.js';\nimport LineDraw from '../../chart/helper/LineDraw.js';\nimport MarkerView from './MarkerView.js';\nimport { getStackedDimension } from '../../data/helper/dataStackHelper.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getECData } from '../../util/innerStore.js';\nimport MarkerModel from './MarkerModel.js';\nimport { isArray, retrieve, retrieve2, clone, extend, logError, merge, map, curry, filter, isNumber } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nvar inner = makeInner();\nvar markLineTransform = function (seriesModel, coordSys, mlModel, item) {\n  var data = seriesModel.getData();\n  var itemArray;\n  if (!isArray(item)) {\n    // Special type markLine like 'min', 'max', 'average', 'median'\n    var mlType = item.type;\n    if (mlType === 'min' || mlType === 'max' || mlType === 'average' || mlType === 'median'\n    // In case\n    // data: [{\n    //   yAxis: 10\n    // }]\n    || item.xAxis != null || item.yAxis != null) {\n      var valueAxis = void 0;\n      var value = void 0;\n      if (item.yAxis != null || item.xAxis != null) {\n        valueAxis = coordSys.getAxis(item.yAxis != null ? 'y' : 'x');\n        value = retrieve(item.yAxis, item.xAxis);\n      } else {\n        var axisInfo = markerHelper.getAxisInfo(item, data, coordSys, seriesModel);\n        valueAxis = axisInfo.valueAxis;\n        var valueDataDim = getStackedDimension(data, axisInfo.valueDataDim);\n        value = markerHelper.numCalculate(data, valueDataDim, mlType);\n      }\n      var valueIndex = valueAxis.dim === 'x' ? 0 : 1;\n      var baseIndex = 1 - valueIndex;\n      // Normized to 2d data with start and end point\n      var mlFrom = clone(item);\n      var mlTo = {\n        coord: []\n      };\n      mlFrom.type = null;\n      mlFrom.coord = [];\n      mlFrom.coord[baseIndex] = -Infinity;\n      mlTo.coord[baseIndex] = Infinity;\n      var precision = mlModel.get('precision');\n      if (precision >= 0 && isNumber(value)) {\n        value = +value.toFixed(Math.min(precision, 20));\n      }\n      mlFrom.coord[valueIndex] = mlTo.coord[valueIndex] = value;\n      itemArray = [mlFrom, mlTo, {\n        type: mlType,\n        valueIndex: item.valueIndex,\n        // Force to use the value of calculated value.\n        value: value\n      }];\n    } else {\n      // Invalid data\n      if (process.env.NODE_ENV !== 'production') {\n        logError('Invalid markLine data.');\n      }\n      itemArray = [];\n    }\n  } else {\n    itemArray = item;\n  }\n  var normalizedItem = [markerHelper.dataTransform(seriesModel, itemArray[0]), markerHelper.dataTransform(seriesModel, itemArray[1]), extend({}, itemArray[2])];\n  // Avoid line data type is extended by from(to) data type\n  normalizedItem[2].type = normalizedItem[2].type || null;\n  // Merge from option and to option into line option\n  merge(normalizedItem[2], normalizedItem[0]);\n  merge(normalizedItem[2], normalizedItem[1]);\n  return normalizedItem;\n};\nfunction isInfinity(val) {\n  return !isNaN(val) && !isFinite(val);\n}\n// If a markLine has one dim\nfunction ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  var dimName = coordSys.dimensions[dimIndex];\n  return isInfinity(fromCoord[otherDimIndex]) && isInfinity(toCoord[otherDimIndex]) && fromCoord[dimIndex] === toCoord[dimIndex] && coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);\n}\nfunction markLineFilter(coordSys, item) {\n  if (coordSys.type === 'cartesian2d') {\n    var fromCoord = item[0].coord;\n    var toCoord = item[1].coord;\n    // In case\n    // {\n    //  markLine: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n  return markerHelper.dataFilter(coordSys, item[0]) && markerHelper.dataFilter(coordSys, item[1]);\n}\nfunction updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPosition\n      point = seriesModel.getMarkerPosition(data.getValues(data.dimensions, idx));\n    } else {\n      var dims = coordSys.dimensions;\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    }\n    // Expand line to the edge of grid if value on one axis is Inifnity\n    // In case\n    //  markLine: {\n    //    data: [{\n    //      yAxis: 2\n    //      // or\n    //      type: 'average'\n    //    }]\n    //  }\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var dims = coordSys.dimensions;\n      if (isInfinity(data.get(dims[0], idx))) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[isFrom ? 0 : 1]);\n      } else if (isInfinity(data.get(dims[1], idx))) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[isFrom ? 0 : 1]);\n      }\n    }\n    // Use x, y if has any\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n  data.setItemLayout(idx, point);\n}\nvar MarkLineView = /** @class */function (_super) {\n  __extends(MarkLineView, _super);\n  function MarkLineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkLineView.type;\n    return _this;\n  }\n  MarkLineView.prototype.updateTransform = function (markLineModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mlModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markLine');\n      if (mlModel) {\n        var mlData_1 = mlModel.getData();\n        var fromData_1 = inner(mlModel).from;\n        var toData_1 = inner(mlModel).to;\n        // Update visual and layout of from symbol and to symbol\n        fromData_1.each(function (idx) {\n          updateSingleMarkerEndLayout(fromData_1, idx, true, seriesModel, api);\n          updateSingleMarkerEndLayout(toData_1, idx, false, seriesModel, api);\n        });\n        // Update layout of line\n        mlData_1.each(function (idx) {\n          mlData_1.setItemLayout(idx, [fromData_1.getItemLayout(idx), toData_1.getItemLayout(idx)]);\n        });\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n  MarkLineView.prototype.renderSeries = function (seriesModel, mlModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var lineDrawMap = this.markerGroupMap;\n    var lineDraw = lineDrawMap.get(seriesId) || lineDrawMap.set(seriesId, new LineDraw());\n    this.group.add(lineDraw.group);\n    var mlData = createList(coordSys, seriesModel, mlModel);\n    var fromData = mlData.from;\n    var toData = mlData.to;\n    var lineData = mlData.line;\n    inner(mlModel).from = fromData;\n    inner(mlModel).to = toData;\n    // Line data for tooltip and formatter\n    mlModel.setData(lineData);\n    // TODO\n    // Functionally, `symbolSize` & `symbolOffset` can also be 2D array now.\n    // But the related logic and type definition are not finished yet.\n    // Finish it if required\n    var symbolType = mlModel.get('symbol');\n    var symbolSize = mlModel.get('symbolSize');\n    var symbolRotate = mlModel.get('symbolRotate');\n    var symbolOffset = mlModel.get('symbolOffset');\n    // TODO: support callback function like markPoint\n    if (!isArray(symbolType)) {\n      symbolType = [symbolType, symbolType];\n    }\n    if (!isArray(symbolSize)) {\n      symbolSize = [symbolSize, symbolSize];\n    }\n    if (!isArray(symbolRotate)) {\n      symbolRotate = [symbolRotate, symbolRotate];\n    }\n    if (!isArray(symbolOffset)) {\n      symbolOffset = [symbolOffset, symbolOffset];\n    }\n    // Update visual and layout of from symbol and to symbol\n    mlData.from.each(function (idx) {\n      updateDataVisualAndLayout(fromData, idx, true);\n      updateDataVisualAndLayout(toData, idx, false);\n    });\n    // Update visual and layout of line\n    lineData.each(function (idx) {\n      var lineStyle = lineData.getItemModel(idx).getModel('lineStyle').getLineStyle();\n      // lineData.setItemVisual(idx, {\n      //     color: lineColor || fromData.getItemVisual(idx, 'color')\n      // });\n      lineData.setItemLayout(idx, [fromData.getItemLayout(idx), toData.getItemLayout(idx)]);\n      if (lineStyle.stroke == null) {\n        lineStyle.stroke = fromData.getItemVisual(idx, 'style').fill;\n      }\n      lineData.setItemVisual(idx, {\n        fromSymbolKeepAspect: fromData.getItemVisual(idx, 'symbolKeepAspect'),\n        fromSymbolOffset: fromData.getItemVisual(idx, 'symbolOffset'),\n        fromSymbolRotate: fromData.getItemVisual(idx, 'symbolRotate'),\n        fromSymbolSize: fromData.getItemVisual(idx, 'symbolSize'),\n        fromSymbol: fromData.getItemVisual(idx, 'symbol'),\n        toSymbolKeepAspect: toData.getItemVisual(idx, 'symbolKeepAspect'),\n        toSymbolOffset: toData.getItemVisual(idx, 'symbolOffset'),\n        toSymbolRotate: toData.getItemVisual(idx, 'symbolRotate'),\n        toSymbolSize: toData.getItemVisual(idx, 'symbolSize'),\n        toSymbol: toData.getItemVisual(idx, 'symbol'),\n        style: lineStyle\n      });\n    });\n    lineDraw.updateData(lineData);\n    // Set host model for tooltip\n    // FIXME\n    mlData.line.eachItemGraphicEl(function (el) {\n      getECData(el).dataModel = mlModel;\n      el.traverse(function (child) {\n        getECData(child).dataModel = mlModel;\n      });\n    });\n    function updateDataVisualAndLayout(data, idx, isFrom) {\n      var itemModel = data.getItemModel(idx);\n      updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      if (style.fill == null) {\n        style.fill = getVisualFromData(seriesData, 'color');\n      }\n      data.setItemVisual(idx, {\n        symbolKeepAspect: itemModel.get('symbolKeepAspect'),\n        // `0` should be considered as a valid value, so use `retrieve2` instead of `||`\n        symbolOffset: retrieve2(itemModel.get('symbolOffset', true), symbolOffset[isFrom ? 0 : 1]),\n        symbolRotate: retrieve2(itemModel.get('symbolRotate', true), symbolRotate[isFrom ? 0 : 1]),\n        // TODO: when 2d array is supported, it should ignore parent\n        symbolSize: retrieve2(itemModel.get('symbolSize'), symbolSize[isFrom ? 0 : 1]),\n        symbol: retrieve2(itemModel.get('symbol', true), symbolType[isFrom ? 0 : 1]),\n        style: style\n      });\n    }\n    this.markKeep(lineDraw);\n    lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');\n  };\n  MarkLineView.type = 'markLine';\n  return MarkLineView;\n}(MarkerView);\nfunction createList(coordSys, seriesModel, mlModel) {\n  var coordDimsInfos;\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {};\n      // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n  var fromData = new SeriesData(coordDimsInfos, mlModel);\n  var toData = new SeriesData(coordDimsInfos, mlModel);\n  // No dimensions\n  var lineData = new SeriesData([], mlModel);\n  var optData = map(mlModel.get('data'), curry(markLineTransform, seriesModel, coordSys, mlModel));\n  if (coordSys) {\n    optData = filter(optData, curry(markLineFilter, coordSys));\n  }\n  var dimValueGetter = markerHelper.createMarkerDimValueGetter(!!coordSys, coordDimsInfos);\n  fromData.initData(map(optData, function (item) {\n    return item[0];\n  }), null, dimValueGetter);\n  toData.initData(map(optData, function (item) {\n    return item[1];\n  }), null, dimValueGetter);\n  lineData.initData(map(optData, function (item) {\n    return item[2];\n  }));\n  lineData.hasItemOption = true;\n  return {\n    from: fromData,\n    to: toData,\n    line: lineData\n  };\n}\nexport default MarkLineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkLineModel from './MarkLineModel.js';\nimport MarkLineView from './MarkLineView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkLineModel);\n  registers.registerComponentView(MarkLineView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markLine')) {\n      // Make sure markLine component is enabled\n      opt.markLine = opt.markLine || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\nvar MarkAreaModel = /** @class */function (_super) {\n  __extends(MarkAreaModel, _super);\n  function MarkAreaModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkAreaModel.type;\n    return _this;\n  }\n  MarkAreaModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkAreaModel(markerOpt, masterMarkerModel, ecModel);\n  };\n  MarkAreaModel.type = 'markArea';\n  MarkAreaModel.defaultOption = {\n    // zlevel: 0,\n    // PENDING\n    z: 1,\n    tooltip: {\n      trigger: 'item'\n    },\n    // markArea should fixed on the coordinate system\n    animation: false,\n    label: {\n      show: true,\n      position: 'top'\n    },\n    itemStyle: {\n      // color and borderColor default to use color from series\n      // color: 'auto'\n      // borderColor: 'auto'\n      borderWidth: 0\n    },\n    emphasis: {\n      label: {\n        show: true,\n        position: 'top'\n      }\n    }\n  };\n  return MarkAreaModel;\n}(MarkerModel);\nexport default MarkAreaModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n// TODO Optimize on polar\nimport * as colorUtil from 'zrender/lib/tool/color.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as numberUtil from '../../util/number.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport * as markerHelper from './markerHelper.js';\nimport MarkerView from './MarkerView.js';\nimport { retrieve, mergeAll, map, curry, filter, extend, isString } from 'zrender/lib/core/util.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport MarkerModel from './MarkerModel.js';\nimport { makeInner } from '../../util/model.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { parseDataValue } from '../../data/helper/dataValueHelper.js';\nvar inner = makeInner();\nvar markAreaTransform = function (seriesModel, coordSys, maModel, item) {\n  // item may be null\n  var item0 = item[0];\n  var item1 = item[1];\n  if (!item0 || !item1) {\n    return;\n  }\n  var lt = markerHelper.dataTransform(seriesModel, item0);\n  var rb = markerHelper.dataTransform(seriesModel, item1);\n  // FIXME make sure lt is less than rb\n  var ltCoord = lt.coord;\n  var rbCoord = rb.coord;\n  ltCoord[0] = retrieve(ltCoord[0], -Infinity);\n  ltCoord[1] = retrieve(ltCoord[1], -Infinity);\n  rbCoord[0] = retrieve(rbCoord[0], Infinity);\n  rbCoord[1] = retrieve(rbCoord[1], Infinity);\n  // Merge option into one\n  var result = mergeAll([{}, lt, rb]);\n  result.coord = [lt.coord, rb.coord];\n  result.x0 = lt.x;\n  result.y0 = lt.y;\n  result.x1 = rb.x;\n  result.y1 = rb.y;\n  return result;\n};\nfunction isInfinity(val) {\n  return !isNaN(val) && !isFinite(val);\n}\n// If a markArea has one dim\nfunction ifMarkAreaHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  return isInfinity(fromCoord[otherDimIndex]) && isInfinity(toCoord[otherDimIndex]);\n}\nfunction markAreaFilter(coordSys, item) {\n  var fromCoord = item.coord[0];\n  var toCoord = item.coord[1];\n  var item0 = {\n    coord: fromCoord,\n    x: item.x0,\n    y: item.y0\n  };\n  var item1 = {\n    coord: toCoord,\n    x: item.x1,\n    y: item.y1\n  };\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    // In case\n    // {\n    //  markArea: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkAreaHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkAreaHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n    // Directly returning true may also do the work,\n    // because markArea will not be shown automatically\n    // when it's not included in coordinate system.\n    // But filtering ahead can avoid keeping rendering markArea\n    // when there are too many of them.\n    return markerHelper.zoneFilter(coordSys, item0, item1);\n  }\n  return markerHelper.dataFilter(coordSys, item0) || markerHelper.dataFilter(coordSys, item1);\n}\n// dims can be ['x0', 'y0'], ['x1', 'y1'], ['x0', 'y1'], ['x1', 'y0']\nfunction getSingleMarkerEndPoint(data, idx, dims, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get(dims[0]), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get(dims[1]), api.getHeight());\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Consider the case that user input the right-bottom point first\n      // Pick the larger x and y as 'x1' and 'y1'\n      var pointValue0 = data.getValues(['x0', 'y0'], idx);\n      var pointValue1 = data.getValues(['x1', 'y1'], idx);\n      var clampPointValue0 = coordSys.clampData(pointValue0);\n      var clampPointValue1 = coordSys.clampData(pointValue1);\n      var pointValue = [];\n      if (dims[0] === 'x0') {\n        pointValue[0] = clampPointValue0[0] > clampPointValue1[0] ? pointValue1[0] : pointValue0[0];\n      } else {\n        pointValue[0] = clampPointValue0[0] > clampPointValue1[0] ? pointValue0[0] : pointValue1[0];\n      }\n      if (dims[1] === 'y0') {\n        pointValue[1] = clampPointValue0[1] > clampPointValue1[1] ? pointValue1[1] : pointValue0[1];\n      } else {\n        pointValue[1] = clampPointValue0[1] > clampPointValue1[1] ? pointValue0[1] : pointValue1[1];\n      }\n      // Use the getMarkerPosition\n      point = seriesModel.getMarkerPosition(pointValue, dims, true);\n    } else {\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      var pt = [x, y];\n      coordSys.clampData && coordSys.clampData(pt, pt);\n      point = coordSys.dataToPoint(pt, true);\n    }\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      if (isInfinity(x)) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[dims[0] === 'x0' ? 0 : 1]);\n      } else if (isInfinity(y)) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[dims[1] === 'y0' ? 0 : 1]);\n      }\n    }\n    // Use x, y if has any\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n  return point;\n}\nexport var dimPermutations = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']];\nvar MarkAreaView = /** @class */function (_super) {\n  __extends(MarkAreaView, _super);\n  function MarkAreaView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = MarkAreaView.type;\n    return _this;\n  }\n  MarkAreaView.prototype.updateTransform = function (markAreaModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var maModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markArea');\n      if (maModel) {\n        var areaData_1 = maModel.getData();\n        areaData_1.each(function (idx) {\n          var points = map(dimPermutations, function (dim) {\n            return getSingleMarkerEndPoint(areaData_1, idx, dim, seriesModel, api);\n          });\n          // Layout\n          areaData_1.setItemLayout(idx, points);\n          var el = areaData_1.getItemGraphicEl(idx);\n          el.setShape('points', points);\n        });\n      }\n    }, this);\n  };\n  MarkAreaView.prototype.renderSeries = function (seriesModel, maModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var areaGroupMap = this.markerGroupMap;\n    var polygonGroup = areaGroupMap.get(seriesId) || areaGroupMap.set(seriesId, {\n      group: new graphic.Group()\n    });\n    this.group.add(polygonGroup.group);\n    this.markKeep(polygonGroup);\n    var areaData = createList(coordSys, seriesModel, maModel);\n    // Line data for tooltip and formatter\n    maModel.setData(areaData);\n    // Update visual and layout of line\n    areaData.each(function (idx) {\n      // Layout\n      var points = map(dimPermutations, function (dim) {\n        return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\n      });\n      var xAxisScale = coordSys.getAxis('x').scale;\n      var yAxisScale = coordSys.getAxis('y').scale;\n      var xAxisExtent = xAxisScale.getExtent();\n      var yAxisExtent = yAxisScale.getExtent();\n      var xPointExtent = [xAxisScale.parse(areaData.get('x0', idx)), xAxisScale.parse(areaData.get('x1', idx))];\n      var yPointExtent = [yAxisScale.parse(areaData.get('y0', idx)), yAxisScale.parse(areaData.get('y1', idx))];\n      numberUtil.asc(xPointExtent);\n      numberUtil.asc(yPointExtent);\n      var overlapped = !(xAxisExtent[0] > xPointExtent[1] || xAxisExtent[1] < xPointExtent[0] || yAxisExtent[0] > yPointExtent[1] || yAxisExtent[1] < yPointExtent[0]);\n      // If none of the area is inside coordSys, allClipped is set to be true\n      // in layout so that label will not be displayed. See #12591\n      var allClipped = !overlapped;\n      areaData.setItemLayout(idx, {\n        points: points,\n        allClipped: allClipped\n      });\n      var style = areaData.getItemModel(idx).getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n      if (!style.fill) {\n        style.fill = color;\n        if (isString(style.fill)) {\n          style.fill = colorUtil.modifyAlpha(style.fill, 0.4);\n        }\n      }\n      if (!style.stroke) {\n        style.stroke = color;\n      }\n      // Visual\n      areaData.setItemVisual(idx, 'style', style);\n    });\n    areaData.diff(inner(polygonGroup).data).add(function (idx) {\n      var layout = areaData.getItemLayout(idx);\n      if (!layout.allClipped) {\n        var polygon = new graphic.Polygon({\n          shape: {\n            points: layout.points\n          }\n        });\n        areaData.setItemGraphicEl(idx, polygon);\n        polygonGroup.group.add(polygon);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(oldIdx);\n      var layout = areaData.getItemLayout(newIdx);\n      if (!layout.allClipped) {\n        if (polygon) {\n          graphic.updateProps(polygon, {\n            shape: {\n              points: layout.points\n            }\n          }, maModel, newIdx);\n        } else {\n          polygon = new graphic.Polygon({\n            shape: {\n              points: layout.points\n            }\n          });\n        }\n        areaData.setItemGraphicEl(newIdx, polygon);\n        polygonGroup.group.add(polygon);\n      } else if (polygon) {\n        polygonGroup.group.remove(polygon);\n      }\n    }).remove(function (idx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(idx);\n      polygonGroup.group.remove(polygon);\n    }).execute();\n    areaData.eachItemGraphicEl(function (polygon, idx) {\n      var itemModel = areaData.getItemModel(idx);\n      var style = areaData.getItemVisual(idx, 'style');\n      polygon.useStyle(areaData.getItemVisual(idx, 'style'));\n      setLabelStyle(polygon, getLabelStatesModels(itemModel), {\n        labelFetcher: maModel,\n        labelDataIndex: idx,\n        defaultText: areaData.getName(idx) || '',\n        inheritColor: isString(style.fill) ? colorUtil.modifyAlpha(style.fill, 1) : '#000'\n      });\n      setStatesStylesFromModel(polygon, itemModel);\n      toggleHoverEmphasis(polygon, null, null, itemModel.get(['emphasis', 'disabled']));\n      getECData(polygon).dataModel = maModel;\n    });\n    inner(polygonGroup).data = areaData;\n    polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');\n  };\n  MarkAreaView.type = 'markArea';\n  return MarkAreaView;\n}(MarkerView);\nfunction createList(coordSys, seriesModel, maModel) {\n  var areaData;\n  var dataDims;\n  var dims = ['x0', 'y0', 'x1', 'y1'];\n  if (coordSys) {\n    var coordDimsInfos_1 = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var data = seriesModel.getData();\n      var info = data.getDimensionInfo(data.mapDimension(coordDim)) || {};\n      // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n    dataDims = map(dims, function (dim, idx) {\n      return {\n        name: dim,\n        type: coordDimsInfos_1[idx % 2].type\n      };\n    });\n    areaData = new SeriesData(dataDims, maModel);\n  } else {\n    dataDims = [{\n      name: 'value',\n      type: 'float'\n    }];\n    areaData = new SeriesData(dataDims, maModel);\n  }\n  var optData = map(maModel.get('data'), curry(markAreaTransform, seriesModel, coordSys, maModel));\n  if (coordSys) {\n    optData = filter(optData, curry(markAreaFilter, coordSys));\n  }\n  var dimValueGetter = coordSys ? function (item, dimName, dataIndex, dimIndex) {\n    // TODO should convert to ParsedValue?\n    var rawVal = item.coord[Math.floor(dimIndex / 2)][dimIndex % 2];\n    return parseDataValue(rawVal, dataDims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dataDims[dimIndex]);\n  };\n  areaData.initData(optData, null, dimValueGetter);\n  areaData.hasItemOption = true;\n  return areaData;\n}\nexport default MarkAreaView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkAreaModel from './MarkAreaModel.js';\nimport MarkAreaView from './MarkAreaView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkAreaModel);\n  registers.registerComponentView(MarkAreaView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markArea')) {\n      // Make sure markArea component is enabled\n      opt.markArea = opt.markArea || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../../model/Model.js';\nimport { isNameSpecified } from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nvar getDefaultSelectorOptions = function (ecModel, type) {\n  if (type === 'all') {\n    return {\n      type: 'all',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'all'])\n    };\n  } else if (type === 'inverse') {\n    return {\n      type: 'inverse',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'inverse'])\n    };\n  }\n};\nvar LegendModel = /** @class */function (_super) {\n  __extends(LegendModel, _super);\n  function LegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      // legend.width/height are maxWidth/maxHeight actually,\n      // whereas real width/height is calculated by its content.\n      // (Setting {left: 10, right: 10} does not make sense).\n      // So consider the case:\n      // `setOption({legend: {left: 10});`\n      // then `setOption({legend: {right: 10});`\n      // The previous `left` should be cleared by setting `ignoreSize`.\n      ignoreSize: true\n    };\n    return _this;\n  }\n  LegendModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n    this._updateSelector(option);\n  };\n  LegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    this._updateSelector(option);\n  };\n  LegendModel.prototype._updateSelector = function (option) {\n    var selector = option.selector;\n    var ecModel = this.ecModel;\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, getDefaultSelectorOptions(ecModel, item.type));\n      });\n    }\n  };\n  LegendModel.prototype.optionUpdated = function () {\n    this._updateData(this.ecModel);\n    var legendData = this._data;\n    // If selectedMode is single, try to select one\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false;\n      // If has any selected in option.selected\n      for (var i = 0; i < legendData.length; i++) {\n        var name_1 = legendData[i].get('name');\n        if (this.isSelected(name_1)) {\n          // Force to unselect others\n          this.select(name_1);\n          hasSelected = true;\n          break;\n        }\n      }\n      // Try select the first if selectedMode is single\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  };\n  LegendModel.prototype._updateData = function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\r\n     * @type {Array.<string>}\r\n     * @private\r\n     */\n    this._availableNames = availableNames;\n    // If legend.data is not specified in option, use availableNames as data,\n    // which is convenient for user preparing option.\n    var rawData = this.get('data') || potentialData;\n    var legendNameMap = zrUtil.createHashMap();\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (zrUtil.isString(dataItem) || zrUtil.isNumber(dataItem)) {\n        dataItem = {\n          name: dataItem\n        };\n      }\n      if (legendNameMap.get(dataItem.name)) {\n        // remove legend name duplicate\n        return null;\n      }\n      legendNameMap.set(dataItem.name, true);\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\r\n     * @type {Array.<module:echarts/model/Model>}\r\n     * @private\r\n     */\n    this._data = zrUtil.filter(legendData, function (item) {\n      return !!item;\n    });\n  };\n  LegendModel.prototype.getData = function () {\n    return this._data;\n  };\n  LegendModel.prototype.select = function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n    selected[name] = true;\n  };\n  LegendModel.prototype.unSelect = function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  };\n  LegendModel.prototype.toggleSelected = function (name) {\n    var selected = this.option.selected;\n    // Default is true\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  };\n  LegendModel.prototype.allSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  };\n  LegendModel.prototype.inverseSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true);\n      // Initially, default value is true\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n      selected[name] = !selected[name];\n    });\n  };\n  LegendModel.prototype.isSelected = function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  };\n  LegendModel.prototype.getOrient = function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  };\n  LegendModel.type = 'legend.plain';\n  LegendModel.dependencies = ['series'];\n  LegendModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    show: true,\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    itemWidth: 25,\n    itemHeight: 14,\n    symbolRotate: 'inherit',\n    symbolKeepAspect: true,\n    inactiveColor: '#ccc',\n    inactiveBorderColor: '#ccc',\n    inactiveBorderWidth: 'auto',\n    itemStyle: {\n      color: 'inherit',\n      opacity: 'inherit',\n      borderColor: 'inherit',\n      borderWidth: 'auto',\n      borderCap: 'inherit',\n      borderJoin: 'inherit',\n      borderDashOffset: 'inherit',\n      borderMiterLimit: 'inherit'\n    },\n    lineStyle: {\n      width: 'auto',\n      color: 'inherit',\n      inactiveColor: '#ccc',\n      inactiveWidth: 2,\n      opacity: 'inherit',\n      type: 'inherit',\n      cap: 'inherit',\n      join: 'inherit',\n      dashOffset: 'inherit',\n      miterLimit: 'inherit'\n    },\n    textStyle: {\n      color: '#333'\n    },\n    selectedMode: true,\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: 'sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    tooltip: {\n      show: false\n    }\n  };\n  return LegendModel;\n}(ComponentModel);\nexport default LegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parse, stringify } from 'zrender/lib/tool/color.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle.js';\nimport { makeBackground } from '../helper/listComponent.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport ComponentView from '../../view/Component.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { getECData } from '../../util/innerStore.js';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\nvar LegendView = /** @class */function (_super) {\n  __extends(LegendView, _super);\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\r\n   * @protected\r\n   */\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\r\n   * @protected\r\n   */\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\r\n   * @override\r\n   */\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n    // selector has been normalized to an array in model\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    // Perform layout.\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition);\n    // Place mainGroup, based on the calculated `mainRect`.\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw();\n    // Render background after group is layout.\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  };\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var name = legendItemModel.get('name');\n      // Use empty string or \\n as a newline string\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group();\n        // @ts-ignore\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      }\n      // Representitive series.\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n      if (legendDrawnMap.get(name)) {\n        // Have been drawn\n        return;\n      }\n      // Legend to control series.\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\r\n         * `data.getVisual('style')` may be the color from the register\r\n         * in series. For example, for line series,\r\n         */\n        var style = data.getVisual('style');\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        if (ecModel.ssr) {\n          itemGroup.eachChild(function (child) {\n            var ecData = getECData(child);\n            ecData.seriesIndex = seriesModel.seriesIndex;\n            ecData.dataIndex = dataIndex;\n            ecData.ssrType = 'legend';\n          });\n        }\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n            if (!provider.containName(name)) {\n              return;\n            }\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill);\n            // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2;\n              // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n              style = zrUtil.extend(zrUtil.extend({}, style), {\n                fill: stringify(colorArr, 'rgba')\n              });\n            }\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api);\n            // FIXME: consider different series has items with the same name.\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId))\n            // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            if (ecModel.ssr) {\n              itemGroup.eachChild(function (child) {\n                var ecData = getECData(child);\n                ecData.seriesIndex = seriesModel.seriesIndex;\n                ecData.dataIndex = dataIndex;\n                ecData.ssrType = 'legend';\n              });\n            }\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect',\n            legendId: legendModel.id\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n    if (zrUtil.isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    }\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n    if (zrUtil.isString(formatter) && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (zrUtil.isFunction(formatter)) {\n      content = formatter(name);\n    }\n    var textColor = isSelected ? textStyleModel.getTextColor() : legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: textColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      }, {\n        inheritColor: textColor\n      })\n    }));\n    // Add a invisible rect to increase the area of mouse hover\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      style: {\n        // Cannot use 'invisible' because SVG SSR will miss the node\n        fill: 'transparent'\n      }\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup);\n    // @ts-ignore\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup();\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box(\n      // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      }\n      // Always align selector to content as 'middle'\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\nfunction getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n  /**\r\n   * Use series style if is inherit;\r\n   * elsewise, use legend style\r\n   */\n  function handleCommonProps(style, visualStyle) {\n    // If lineStyle.width is 'auto', it is set to be 2 if series has border\n    if (style.lineWidth === 'auto') {\n      style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n    }\n    each(style, function (propVal, propName) {\n      style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n    });\n  }\n  // itemStyle\n  var itemStyleModel = legendItemModel.getModel('itemStyle');\n  var itemStyle = itemStyleModel.getItemStyle();\n  var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n  var decalStyle = itemStyleModel.getShallow('decal');\n  itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);\n  if (itemStyle.fill === 'inherit') {\n    /**\r\n     * Series with visualDrawType as 'stroke' should have\r\n     * series stroke as legend fill\r\n     */\n    itemStyle.fill = itemVisualStyle[drawType];\n  }\n  if (itemStyle.stroke === 'inherit') {\n    /**\r\n     * icon type with \"emptyXXX\" should use fill color\r\n     * in visual style\r\n     */\n    itemStyle.stroke = itemVisualStyle[iconBrushType];\n  }\n  if (itemStyle.opacity === 'inherit') {\n    /**\r\n     * Use lineStyle.opacity if drawType is stroke\r\n     */\n    itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n  }\n  handleCommonProps(itemStyle, itemVisualStyle);\n  // lineStyle\n  var legendLineModel = legendItemModel.getModel('lineStyle');\n  var lineStyle = legendLineModel.getLineStyle();\n  handleCommonProps(lineStyle, lineVisualStyle);\n  // Fix auto color to real color\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n  if (!isSelected) {\n    var borderWidth = legendItemModel.get('inactiveBorderWidth');\n    /**\r\n     * Since stroke is set to be inactiveBorderColor, it may occur that\r\n     * there is no border in series but border in legend, so we need to\r\n     * use border only when series has border if is set to be auto\r\n     */\n    var visualHasBorder = itemStyle[iconBrushType];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendItemModel.get('inactiveColor');\n    itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineModel.get('inactiveColor');\n    lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n  }\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = '#fff';\n    icon.style.lineWidth = 2;\n  }\n  return icon;\n}\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  });\n  // highlight after select\n  // TODO highlight immediately may cause animation loss.\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n  return emphasisState && emphasisState.hoverLayer;\n}\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nexport default LegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function legendFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { curry, each, hasOwn } from 'zrender/lib/core/util.js';\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var isAllSelect = methodName === 'allSelect' || methodName === 'inverseSelect';\n  var selectedMap = {};\n  var actionLegendIndices = [];\n  ecModel.eachComponent({\n    mainType: 'legend',\n    query: payload\n  }, function (legendModel) {\n    if (isAllSelect) {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n    }\n    makeSelectedMap(legendModel, selectedMap);\n    actionLegendIndices.push(legendModel.componentIndex);\n  });\n  var allSelectedMap = {};\n  // make selectedMap from all legend components\n  ecModel.eachComponent('legend', function (legendModel) {\n    each(selectedMap, function (isSelected, name) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](name);\n    });\n    makeSelectedMap(legendModel, allSelectedMap);\n  });\n  // Return the event explicitly\n  return isAllSelect ? {\n    selected: allSelectedMap,\n    // return legendIndex array to tell the developers which legends are allSelect / inverseSelect\n    legendIndex: actionLegendIndices\n  } : {\n    name: payload.name,\n    selected: allSelectedMap\n  };\n}\nfunction makeSelectedMap(legendModel, out) {\n  var selectedMap = out || {};\n  each(legendModel.getData(), function (model) {\n    var name = model.get('name');\n    // Wrap element\n    if (name === '\\n' || name === '') {\n      return;\n    }\n    var isItemSelected = legendModel.isSelected(name);\n    if (hasOwn(selectedMap, name)) {\n      // Unselected if any legend is unselected\n      selectedMap[name] = selectedMap[name] && isItemSelected;\n    } else {\n      selectedMap[name] = isItemSelected;\n    }\n  });\n  return selectedMap;\n}\nexport function installLegendAction(registers) {\n  /**\r\n   * @event legendToggleSelect\r\n   * @type {Object}\r\n   * @property {string} type 'legendToggleSelect'\r\n   * @property {string} [from]\r\n   * @property {string} name Series name or data item name\r\n   */\n  registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n  registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n  registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n  /**\r\n   * @event legendSelect\r\n   * @type {Object}\r\n   * @property {string} type 'legendSelect'\r\n   * @property {string} name Series name or data item name\r\n   */\n  registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n  /**\r\n   * @event legendUnSelect\r\n   * @type {Object}\r\n   * @property {string} type 'legendUnSelect'\r\n   * @property {string} name Series name or data item name\r\n   */\n  registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport LegendModel from './LegendModel.js';\nimport LegendView from './LegendView.js';\nimport legendFilter from './legendFilter.js';\nimport { installLegendAction } from './legendAction.js';\nexport function install(registers) {\n  registers.registerComponentModel(LegendModel);\n  registers.registerComponentView(LegendView);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n  registers.registerSubTypeDefaulter('legend', function () {\n    return 'plain';\n  });\n  installLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport LegendModel from './LegendModel.js';\nimport { mergeLayoutParam, getLayoutParams } from '../../util/layout.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar ScrollableLegendModel = /** @class */function (_super) {\n  __extends(ScrollableLegendModel, _super);\n  function ScrollableLegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendModel.type;\n    return _this;\n  }\n  /**\r\n   * @param {number} scrollDataIndex\r\n   */\n  ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  };\n  ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  };\n  ScrollableLegendModel.type = 'legend.scroll';\n  ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    pageFormatter: '{current}/{total}',\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  });\n  return ScrollableLegendModel;\n}(LegendModel);\n;\n// Do not `ignoreSize` to enable setting {left: 10, right: 10}.\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: !!ignoreSize\n  });\n}\nexport default ScrollableLegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Separate legend and scrollable legend to reduce package size.\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport LegendView from './LegendView.js';\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\nvar ScrollableLegendView = /** @class */function (_super) {\n  __extends(ScrollableLegendView, _super);\n  function ScrollableLegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendView.type;\n    _this.newlineDisabled = true;\n    _this._currentIndex = 0;\n    return _this;\n  }\n  ScrollableLegendView.prototype.init = function () {\n    _super.prototype.init.call(this);\n    this.group.add(this._containerGroup = new Group());\n    this._containerGroup.add(this.getContentGroup());\n    this.group.add(this._controllerGroup = new Group());\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendView.prototype.resetInner = function () {\n    _super.prototype.resetInner.call(this);\n    this._controllerGroup.removeAll();\n    this._containerGroup.removeClipPath();\n    this._containerGroup.__rectSize = null;\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var self = this;\n    // Render content items.\n    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    var controllerGroup = this._controllerGroup;\n    // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n    var pageIconSize = legendModel.get('pageIconSize', true);\n    var pageIconSizeArr = zrUtil.isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        // Placeholder to calculate a proper layout.\n        text: 'xx/xx',\n        fill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        verticalAlign: 'middle',\n        align: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSizeArr[0] / 2,\n        y: -pageIconSizeArr[1] / 2,\n        width: pageIconSizeArr[0],\n        height: pageIconSizeArr[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box(\n    // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      selectorGroup.markRedraw();\n    }\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup;\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box(\n    // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh];\n    // In case that the inner elements of contentGroup layout do not based on [0, 0]\n    var contentPos = [-contentRect.x, -contentRect.y];\n    // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup[xy];\n    }\n    // Layout container group based on 0.\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true));\n    // Place containerGroup and controllerGroup and contentGroup.\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true);\n      // controller is on the right / bottom.\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      }\n      // controller is on the left / top.\n      else {\n        containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n      }\n    }\n    // Always align controller to content as 'middle'.\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.setPosition(contentPos);\n    containerGroup.setPosition(containerPos);\n    controllerGroup.setPosition(controllerPos);\n    // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n    var mainRect = {\n      x: 0,\n      y: 0\n    };\n    // Consider content may be overflow (should be clipped).\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]);\n    // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      }));\n      // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    }\n    // Content translate animation.\n    var pageInfo = this._getPageInfo(legendModel);\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      x: pageInfo.contentPosition[0],\n      y: pageInfo.contentPosition[1]\n    },\n    // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : null);\n    this._updatePageInfoView(legendModel, pageInfo);\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  };\n  ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var key = name + 'DataIndex';\n      var canJump = pageInfo[key] != null;\n      var icon = controllerGroup.childOfName(name);\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n      current: current,\n      total: total\n    }));\n  };\n  /**\r\n   *  contentPosition: Array.<number>, null when data item not found.\r\n   *  pageIndex: number, null when data item not found.\r\n   *  pageCount: number, always be a number, can be 0.\r\n   *  pagePrevDataIndex: number, null when no previous page.\r\n   *  pageNextDataIndex: number, null when no next page.\r\n   * }\r\n   */\n  ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: [contentGroup.x, contentGroup.y],\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n    if (!targetItem) {\n      return result;\n    }\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s;\n    // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize\n      // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      || currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n          ++result.pageCount;\n        }\n      }\n      winEndItemInfo = currItemInfo;\n    }\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)\n      // e.g., when page size is smaller than item size.\n      ) && winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n      winStartItemInfo = currItemInfo;\n    }\n    return result;\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el[xy];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  };\n  ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex;\n      // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defaultIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  };\n  ScrollableLegendView.type = 'legend.scroll';\n  return ScrollableLegendView;\n}(LegendView);\nexport default ScrollableLegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport ScrollableLegendModel from './ScrollableLegendModel.js';\nimport ScrollableLegendView from './ScrollableLegendView.js';\nimport installScrollableLegendAction from './scrollableLegendAction.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  registers.registerComponentModel(ScrollableLegendModel);\n  registers.registerComponentView(ScrollableLegendView);\n  installScrollableLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function installScrollableLegendAction(registers) {\n  /**\r\n   * @event legendScroll\r\n   * @type {Object}\r\n   * @property {string} type 'legendScroll'\r\n   * @property {string} scrollDataIndex\r\n   */\n  registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n    var scrollDataIndex = payload.scrollDataIndex;\n    scrollDataIndex != null && ecModel.eachComponent({\n      mainType: 'legend',\n      subType: 'scroll',\n      query: payload\n    }, function (legendModel) {\n      legendModel.setScrollDataIndex(scrollDataIndex);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport { install as installLegendScroll } from './installLegendScroll.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  use(installLegendScroll);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar InsideZoomModel = /** @class */function (_super) {\n  __extends(InsideZoomModel, _super);\n  function InsideZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = InsideZoomModel.type;\n    return _this;\n  }\n  InsideZoomModel.type = 'dataZoom.inside';\n  InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    disabled: false,\n    zoomLock: false,\n    zoomOnMouseWheel: true,\n    moveOnMouseMove: true,\n    moveOnMouseWheel: false,\n    preventDefaultMouseMove: true\n  });\n  return InsideZoomModel;\n}(DataZoomModel);\nexport default InsideZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Only create one roam controller for each coordinate system.\n// one roam controller might be refered by two inside data zoom\n// components (for example, one for x and one for y). When user\n// pan or zoom, only dispatch one action for those data zoom\n// components.\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nimport { each, curry, createHashMap } from 'zrender/lib/core/util.js';\nimport { collectReferCoordSysModelInfo } from './helper.js';\nvar inner = makeInner();\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\nfunction createCoordSysRecord(api, coordSysModel) {\n  // These init props will never change after record created.\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  };\n  // Must not do anything depends on coordSysRecord outside the event handler here,\n  // because coordSysRecord not completed yet.\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n        // moveOnMouseWheel, ...) enabled.\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n/**\r\n * This action will be throttled.\r\n */\nfunction dispatchAction(api, batch) {\n  if (!api.isDisposed()) {\n    api.dispatchAction({\n      type: 'dataZoom',\n      animation: {\n        easing: 'cubicOut',\n        duration: 100\n      },\n      batch: batch\n    });\n  }\n}\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n/**\r\n * Merge roamController settings when multiple dataZooms share one roamController.\r\n */\nfunction mergeControllerParams(dataZoomInfoMap) {\n  var controlType;\n  // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n  // as string, it is probably revert to reserved word by compress tool. See #7411.\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    }\n    // Prevent default move event by default. If one false, do not prevent. Otherwise\n    // users may be confused why it does not work when multiple insideZooms exist.\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      // RoamController will enable all of these functionalities,\n      // and the final behavior is determined by its event listener\n      // provided by each inside zoom.\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove\n    }\n  };\n}\nexport function installDataZoomRoamProcessor(registers) {\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n    var apiInner = inner(api);\n    var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n    coordSysRecordMap.each(function (coordSysRecord) {\n      // `coordSysRecordMap` always exists (because it holds the `roam controller`, which should\n      // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n      coordSysRecord.dataZoomInfoMap = null;\n    });\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'inside'\n    }, function (dataZoomModel) {\n      var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n      each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n        var coordSysUid = dzCoordSysInfo.model.uid;\n        var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap());\n        // Notice these props might be changed each time for a single dataZoomModel.\n        dataZoomInfoMap.set(dataZoomModel.uid, {\n          dzReferCoordSysInfo: dzCoordSysInfo,\n          model: dataZoomModel,\n          getRange: null\n        });\n      });\n    });\n    // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n    // (2) Clear coord sys if not refered by any dataZoom.\n    coordSysRecordMap.each(function (coordSysRecord) {\n      var controller = coordSysRecord.controller;\n      var firstDzInfo;\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n      if (dataZoomInfoMap) {\n        var firstDzKey = dataZoomInfoMap.keys()[0];\n        if (firstDzKey != null) {\n          firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n        }\n      }\n      if (!firstDzInfo) {\n        disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        return;\n      }\n      var controllerParams = mergeControllerParams(dataZoomInfoMap);\n      controller.enable(controllerParams.controlType, controllerParams.opt);\n      controller.setPointerChecker(coordSysRecord.containsPoint);\n      throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as roams from './roams.js';\nimport { bind } from 'zrender/lib/core/util.js';\nvar InsideZoomView = /** @class */function (_super) {\n  __extends(InsideZoomView, _super);\n  function InsideZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'dataZoom.inside';\n    return _this;\n  }\n  InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n    _super.prototype.render.apply(this, arguments);\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n      return;\n    }\n    // Hence the `throttle` util ensures to preserve command order,\n    // here simply updating range all the time will not cause missing\n    // any of the the roam change.\n    this.range = dataZoomModel.getPercentRange();\n    // Reset controllers.\n    roams.setViewInfoToCoordSysRecord(api, dataZoomModel, {\n      pan: bind(getRangeHandlers.pan, this),\n      zoom: bind(getRangeHandlers.zoom, this),\n      scrollMove: bind(getRangeHandlers.scrollMove, this)\n    });\n  };\n  InsideZoomView.prototype.dispose = function () {\n    this._clear();\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  InsideZoomView.prototype._clear = function () {\n    roams.disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n    this.range = null;\n  };\n  InsideZoomView.type = 'dataZoom.inside';\n  return InsideZoomView;\n}(DataZoomView);\nvar getRangeHandlers = {\n  zoom: function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice();\n    // Calculate transform by the first axis.\n    var axisModel = coordSysInfo.axisModels[0];\n    if (!axisModel) {\n      return;\n    }\n    var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n    var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n    var scale = Math.max(1 / e.scale, 0);\n    range[0] = (range[0] - percentPoint) * scale + percentPoint;\n    range[1] = (range[1] - percentPoint) * scale + percentPoint;\n    // Restrict range.\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n    this.range = range;\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  },\n  pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n  }),\n  scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n  })\n};\nfunction makeMover(getPercentDelta) {\n  return function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice();\n    // Calculate transform by the first axis.\n    var axisModel = coordSysInfo.axisModels[0];\n    if (!axisModel) {\n      return;\n    }\n    var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n    sliderMove(percentDelta, range, [0, 100], 'all');\n    this.range = range;\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  };\n}\nvar getDirectionInfo = {\n  grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    oldPoint = oldPoint || [0, 0];\n    if (axis.dim === 'x') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // axis.dim === 'y'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  },\n  polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var polar = coordSysInfo.model.coordinateSystem;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var angleExtent = polar.getAngleAxis().getExtent();\n    oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n    newPoint = polar.pointToCoord(newPoint);\n    if (axisModel.mainType === 'radiusAxis') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n      // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n      ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n      ret.pixelStart = radiusExtent[0];\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'angleAxis'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n      // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n      ret.pixelLength = angleExtent[1] - angleExtent[0];\n      ret.pixelStart = angleExtent[0];\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  },\n  singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    var ret = {};\n    oldPoint = oldPoint || [0, 0];\n    if (axis.orient === 'horizontal') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'vertical'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  }\n};\nexport default InsideZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport InsideZoomModel from './InsideZoomModel.js';\nimport InsideZoomView from './InsideZoomView.js';\nimport { installDataZoomRoamProcessor } from './roams.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  installCommon(registers);\n  registers.registerComponentModel(InsideZoomModel);\n  registers.registerComponentView(InsideZoomView);\n  installDataZoomRoamProcessor(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar SliderZoomModel = /** @class */function (_super) {\n  __extends(SliderZoomModel, _super);\n  function SliderZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderZoomModel.type;\n    return _this;\n  }\n  SliderZoomModel.type = 'dataZoom.slider';\n  SliderZoomModel.layoutMode = 'box';\n  SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    show: true,\n    // deault value can only be drived in view stage.\n    right: 'ph',\n    top: 'ph',\n    width: 'ph',\n    height: 'ph',\n    left: null,\n    bottom: null,\n    borderColor: '#d2dbee',\n    borderRadius: 3,\n    backgroundColor: 'rgba(47,69,84,0)',\n    // dataBackgroundColor: '#ddd',\n    dataBackground: {\n      lineStyle: {\n        color: '#d2dbee',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#d2dbee',\n        opacity: 0.2\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#8fb0f7',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#8fb0f7',\n        opacity: 0.2\n      }\n    },\n    // Color of selected window.\n    fillerColor: 'rgba(135,175,274,0.2)',\n    handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n    // Percent of the slider height\n    handleSize: '100%',\n    handleStyle: {\n      color: '#fff',\n      borderColor: '#ACB8D1'\n    },\n    moveHandleSize: 7,\n    moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n    moveHandleStyle: {\n      color: '#D2DBEE',\n      opacity: 0.7\n    },\n    showDetail: true,\n    showDataShadow: 'auto',\n    realtime: true,\n    zoomLock: false,\n    textStyle: {\n      color: '#6E7079'\n    },\n    brushSelect: true,\n    brushStyle: {\n      color: 'rgba(135,175,274,0.15)'\n    },\n    emphasis: {\n      handleLabel: {\n        show: true\n      },\n      handleStyle: {\n        borderColor: '#8FB0F7'\n      },\n      moveHandleStyle: {\n        color: '#8FB0F7'\n      }\n    }\n  });\n  return SliderZoomModel;\n}(DataZoomModel);\nexport default SliderZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, isFunction, isString, indexOf } from 'zrender/lib/core/util.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as throttle from '../../util/throttle.js';\nimport DataZoomView from './DataZoomView.js';\nimport { linearMap, asc, parsePercent } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { getAxisMainType, collectReferCoordSysModelInfo } from './helper.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { createSymbol, symbolBuildProxies } from '../../util/symbol.js';\nimport { deprecateLog } from '../../util/log.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar Rect = graphic.Rect;\n// Constants\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar DEFAULT_MOVE_HANDLE_SIZE = 7;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar REALTIME_ANIMATION_CONFIG = {\n  easing: 'cubicOut',\n  duration: 100,\n  delay: 0\n};\nvar SliderZoomView = /** @class */function (_super) {\n  __extends(SliderZoomView, _super);\n  function SliderZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderZoomView.type;\n    _this._displayables = {};\n    return _this;\n  }\n  SliderZoomView.prototype.init = function (ecModel, api) {\n    this.api = api;\n    // A unique handler for each dataZoom component\n    this._onBrush = bind(this._onBrush, this);\n    this._onBrushEnd = bind(this._onBrushEnd, this);\n  };\n  SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    _super.prototype.render.apply(this, arguments);\n    throttle.createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.getOrient();\n    if (dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n      this.group.removeAll();\n      return;\n    }\n    // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n    this._updateView();\n  };\n  SliderZoomView.prototype.dispose = function () {\n    this._clear();\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  SliderZoomView.prototype._clear = function () {\n    throttle.clear(this, '_dispatchZoomAction');\n    var zr = this.api.getZr();\n    zr.off('mousemove', this._onBrush);\n    zr.off('mouseup', this._onBrushEnd);\n  };\n  SliderZoomView.prototype._buildView = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    this._brushing = false;\n    this._displayables.brushRect = null;\n    this._resetLocation();\n    this._resetInterval();\n    var barGroup = this._displayables.sliderGroup = new graphic.Group();\n    this._renderBackground();\n    this._renderHandle();\n    this._renderDataShadow();\n    thisGroup.add(barGroup);\n    this._positionGroup();\n  };\n  SliderZoomView.prototype._resetLocation = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var showMoveHandle = dataZoomModel.get('brushSelect');\n    var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0;\n    // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n    var coordRect = this._findCoordRect();\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    // Default align by coordinate system rect.\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    };\n    // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option);\n    // Replace the placeholder value.\n    each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  };\n  SliderZoomView.prototype._positionGroup = function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient;\n    // Just use the first axis to determine mapping.\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var sliderGroup = this._displayables.sliderGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse;\n    // Transform barGroup.\n    sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: 1\n    } : orient === HORIZONTAL && inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: -1\n    } : orient === VERTICAL && !inverse ? {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: 1,\n      rotation: Math.PI / 2\n    }\n    // Don't use Math.PI, considering shadow direction.\n    : {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: -1,\n      rotation: Math.PI / 2\n    });\n    // Position barGroup\n    var rect = thisGroup.getBoundingRect([sliderGroup]);\n    thisGroup.x = location.x - rect.x;\n    thisGroup.y = location.y - rect.y;\n    thisGroup.markRedraw();\n  };\n  SliderZoomView.prototype._getViewExtent = function () {\n    return [0, this._size[0]];\n  };\n  SliderZoomView.prototype._renderBackground = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.sliderGroup;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    }));\n    // Click panel, over shadow, below handles.\n    var clickPanel = new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: bind(this._onClickPanel, this)\n    });\n    var zr = this.api.getZr();\n    if (brushSelect) {\n      clickPanel.on('mousedown', this._onBrushStart, this);\n      clickPanel.cursor = 'crosshair';\n      zr.on('mousemove', this._onBrush);\n      zr.on('mouseup', this._onBrushEnd);\n    } else {\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    }\n    barGroup.add(clickPanel);\n  };\n  SliderZoomView.prototype._renderDataShadow = function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n    this._displayables.dataShadowSegs = [];\n    if (!info) {\n      return;\n    }\n    var size = this._size;\n    var oldSize = this._shadowSize || [];\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var candlestickDim = seriesModel.getShadowDim && seriesModel.getShadowDim();\n    var otherDim = candlestickDim && data.getDimensionInfo(candlestickDim) ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n    if (otherDim == null) {\n      return;\n    }\n    var polygonPts = this._shadowPolygonPts;\n    var polylinePts = this._shadowPolylinePts;\n    // Not re-render if data doesn't change.\n    if (data !== this._shadowData || otherDim !== this._shadowDim || size[0] !== oldSize[0] || size[1] !== oldSize[1]) {\n      var otherDataExtent_1 = data.getDataExtent(otherDim);\n      // Nice extent.\n      var otherOffset = (otherDataExtent_1[1] - otherDataExtent_1[0]) * 0.3;\n      otherDataExtent_1 = [otherDataExtent_1[0] - otherOffset, otherDataExtent_1[1] + otherOffset];\n      var otherShadowExtent_1 = [0, size[1]];\n      var thisShadowExtent = [0, size[0]];\n      var areaPoints_1 = [[size[0], 0], [0, 0]];\n      var linePoints_1 = [];\n      var step_1 = thisShadowExtent[1] / (data.count() - 1);\n      var thisCoord_1 = 0;\n      // Optimize for large data shadow\n      var stride_1 = Math.round(data.count() / size[0]);\n      var lastIsEmpty_1;\n      data.each([otherDim], function (value, index) {\n        if (stride_1 > 0 && index % stride_1) {\n          thisCoord_1 += step_1;\n          return;\n        }\n        // FIXME\n        // Should consider axis.min/axis.max when drawing dataShadow.\n        // FIXME\n        // list\n        var isEmpty = value == null || isNaN(value) || value === '';\n        // See #4235.\n        var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent_1, otherShadowExtent_1, true);\n        // Attempt to draw data shadow precisely when there are empty value.\n        if (isEmpty && !lastIsEmpty_1 && index) {\n          areaPoints_1.push([areaPoints_1[areaPoints_1.length - 1][0], 0]);\n          linePoints_1.push([linePoints_1[linePoints_1.length - 1][0], 0]);\n        } else if (!isEmpty && lastIsEmpty_1) {\n          areaPoints_1.push([thisCoord_1, 0]);\n          linePoints_1.push([thisCoord_1, 0]);\n        }\n        areaPoints_1.push([thisCoord_1, otherCoord]);\n        linePoints_1.push([thisCoord_1, otherCoord]);\n        thisCoord_1 += step_1;\n        lastIsEmpty_1 = isEmpty;\n      });\n      polygonPts = this._shadowPolygonPts = areaPoints_1;\n      polylinePts = this._shadowPolylinePts = linePoints_1;\n    }\n    this._shadowData = data;\n    this._shadowDim = otherDim;\n    this._shadowSize = [size[0], size[1]];\n    var dataZoomModel = this.dataZoomModel;\n    function createDataShadowGroup(isSelectedArea) {\n      var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n      var group = new graphic.Group();\n      var polygon = new graphic.Polygon({\n        shape: {\n          points: polygonPts\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('areaStyle').getAreaStyle(),\n        silent: true,\n        z2: -20\n      });\n      var polyline = new graphic.Polyline({\n        shape: {\n          points: polylinePts\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('lineStyle').getLineStyle(),\n        silent: true,\n        z2: -19\n      });\n      group.add(polygon);\n      group.add(polyline);\n      return group;\n    }\n    // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n    for (var i = 0; i < 3; i++) {\n      var group = createDataShadowGroup(i === 1);\n      this._displayables.sliderGroup.add(group);\n      this._displayables.dataShadowSegs.push(group);\n    }\n  };\n  SliderZoomView.prototype._prepareDataShadowInfo = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n    if (showDataShadow === false) {\n      return;\n    }\n    // Find a representative series.\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n      each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n        if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n        var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n        var otherDim = getOtherDim(axisDim);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: axisDim,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  };\n  SliderZoomView.prototype._renderHandle = function () {\n    var thisGroup = this.group;\n    var displayables = this._displayables;\n    var handles = displayables.handles = [null, null];\n    var handleLabels = displayables.handleLabels = [null, null];\n    var sliderGroup = this._displayables.sliderGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var borderRadius = dataZoomModel.get('borderRadius') || 0;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    var filler = displayables.filler = new Rect({\n      silent: brushSelect,\n      style: {\n        fill: dataZoomModel.get('fillerColor')\n      },\n      textConfig: {\n        position: 'inside'\n      }\n    });\n    sliderGroup.add(filler);\n    // Frame border.\n    sliderGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1],\n        r: borderRadius\n      },\n      style: {\n        // deprecated option\n        stroke: dataZoomModel.get('dataBackgroundColor') || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    }));\n    // Left and right handle to resize\n    each([0, 1], function (handleIndex) {\n      var iconStr = dataZoomModel.get('handleIcon');\n      if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n        // Compatitable with the old icon parsers. Which can use a path string without path://\n        iconStr = 'path://' + iconStr;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n        }\n      }\n      var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n      path.attr({\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false),\n        z2: 5\n      });\n      var bRect = path.getBoundingRect();\n      var handleSize = dataZoomModel.get('handleSize');\n      this._handleHeight = parsePercent(handleSize, this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      path.style.strokeNoScale = true;\n      path.rectHover = true;\n      path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n      enableHoverEmphasis(path);\n      var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n      // Compatitable with previous version\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n      sliderGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.getModel('textStyle');\n      var handleLabel = dataZoomModel.get('handleLabel') || {};\n      var handleLabelShow = handleLabel.show || false;\n      thisGroup.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: !handleLabelShow,\n        style: createTextStyle(textStyleModel, {\n          x: 0,\n          y: 0,\n          text: '',\n          verticalAlign: 'middle',\n          align: 'center',\n          fill: textStyleModel.getTextColor(),\n          font: textStyleModel.getFont()\n        }),\n        z2: 10\n      }));\n    }, this);\n    // Handle to move. Only visible when brushSelect is set true.\n    var actualMoveZone = filler;\n    if (brushSelect) {\n      var moveHandleHeight = parsePercent(dataZoomModel.get('moveHandleSize'), size[1]);\n      var moveHandle_1 = displayables.moveHandle = new graphic.Rect({\n        style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n        silent: true,\n        shape: {\n          r: [0, 0, 2, 2],\n          y: size[1] - 0.5,\n          height: moveHandleHeight\n        }\n      });\n      var iconSize = moveHandleHeight * 0.8;\n      var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\n      moveHandleIcon.silent = true;\n      moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n      moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n      var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n      actualMoveZone = displayables.moveZone = new graphic.Rect({\n        invisible: true,\n        shape: {\n          y: size[1] - moveZoneExpandSize,\n          height: moveHandleHeight + moveZoneExpandSize\n        }\n      });\n      actualMoveZone.on('mouseover', function () {\n        api.enterEmphasis(moveHandle_1);\n      }).on('mouseout', function () {\n        api.leaveEmphasis(moveHandle_1);\n      });\n      sliderGroup.add(moveHandle_1);\n      sliderGroup.add(moveHandleIcon);\n      sliderGroup.add(actualMoveZone);\n    }\n    actualMoveZone.attr({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false)\n    });\n  };\n  SliderZoomView.prototype._resetInterval = function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n    var viewExtent = this._getViewExtent();\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  };\n  SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n    var viewExtend = this._getViewExtent();\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  };\n  SliderZoomView.prototype._updateView = function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scaleX: handleHeight / 2,\n        scaleY: handleHeight / 2,\n        // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n        // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n        x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n        y: size[1] / 2 - handleHeight / 2\n      });\n    }, this);\n    // Filler\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n    var viewExtent = {\n      x: handleInterval[0],\n      width: handleInterval[1] - handleInterval[0]\n    };\n    // Move handle\n    if (displaybles.moveHandle) {\n      displaybles.moveHandle.setShape(viewExtent);\n      displaybles.moveZone.setShape(viewExtent);\n      // Force update path on the invisible object\n      displaybles.moveZone.getBoundingRect();\n      displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n    }\n    // update clip path of shadow.\n    var dataShadowSegs = displaybles.dataShadowSegs;\n    var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n    for (var i = 0; i < dataShadowSegs.length; i++) {\n      var segGroup = dataShadowSegs[i];\n      var clipPath = segGroup.getClipPath();\n      if (!clipPath) {\n        clipPath = new graphic.Rect();\n        segGroup.setClipPath(clipPath);\n      }\n      clipPath.setShape({\n        x: segIntervals[i],\n        y: 0,\n        width: segIntervals[i + 1] - segIntervals[i],\n        height: size[1]\n      });\n    }\n    this._updateDataInfo(nonRealtime);\n  };\n  SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', ''];\n    // FIXME\n    // dateformatterautoformatterec2 date.getAutoFormatter\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime\n        // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        align: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  };\n  SliderZoomView.prototype._formatLabel = function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n    var valueStr = value == null || isNaN(value) ? ''\n    // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n      value: Math.round(value)\n    })\n    // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  };\n  /**\r\n   * @param isEmphasis true: show, false: hide\r\n   */\n  SliderZoomView.prototype._showDataInfo = function (isEmphasis) {\n    var handleLabel = this.dataZoomModel.get('handleLabel') || {};\n    var normalShow = handleLabel.show || false;\n    var emphasisHandleLabel = this.dataZoomModel.getModel(['emphasis', 'handleLabel']);\n    var emphasisShow = emphasisHandleLabel.get('show') || false;\n    // Dragging is considered as emphasis, unless emphasisShow is false\n    var toShow = isEmphasis || this._dragging ? emphasisShow : normalShow;\n    var displayables = this._displayables;\n    var handleLabels = displayables.handleLabels;\n    handleLabels[0].attr('invisible', !toShow);\n    handleLabels[1].attr('invisible', !toShow);\n    // Highlight move handle\n    displayables.moveHandle && this.api[toShow ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n  };\n  SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n    this._dragging = true;\n    // For mobile device, prevent screen slider on the button.\n    eventTool.stop(event.event);\n    // Transform dx, dy to bar coordination.\n    var barTransform = this._displayables.sliderGroup.getLocalTransform();\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n    var realtime = this.dataZoomModel.get('realtime');\n    this._updateView(!realtime);\n    // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n    changed && realtime && this._dispatchZoomAction(true);\n  };\n  SliderZoomView.prototype._onDragEnd = function () {\n    this._dragging = false;\n    this._showDataInfo(false);\n    // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onClickPanel = function (e) {\n    var size = this._size;\n    var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n    var changed = this._updateInterval('all', localPoint[0] - center);\n    this._updateView();\n    changed && this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onBrushStart = function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    this._brushStart = new graphic.Point(x, y);\n    this._brushing = true;\n    this._brushStartTime = +new Date();\n    // this._updateBrushRect(x, y);\n  };\n  SliderZoomView.prototype._onBrushEnd = function (e) {\n    if (!this._brushing) {\n      return;\n    }\n    var brushRect = this._displayables.brushRect;\n    this._brushing = false;\n    if (!brushRect) {\n      return;\n    }\n    brushRect.attr('ignore', true);\n    var brushShape = brushRect.shape;\n    var brushEndTime = +new Date();\n    // console.log(brushEndTime - this._brushStartTime);\n    if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n      // Will treat it as a click\n      return;\n    }\n    var viewExtend = this._getViewExtent();\n    var percentExtent = [0, 100];\n    this._range = asc([linearMap(brushShape.x, viewExtend, percentExtent, true), linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)]);\n    this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n    this._updateView();\n    this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onBrush = function (e) {\n    if (this._brushing) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n      this._updateBrushRect(e.offsetX, e.offsetY);\n    }\n  };\n  SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n    var displayables = this._displayables;\n    var dataZoomModel = this.dataZoomModel;\n    var brushRect = displayables.brushRect;\n    if (!brushRect) {\n      brushRect = displayables.brushRect = new Rect({\n        silent: true,\n        style: dataZoomModel.getModel('brushStyle').getItemStyle()\n      });\n      displayables.sliderGroup.add(brushRect);\n    }\n    brushRect.attr('ignore', false);\n    var brushStart = this._brushStart;\n    var sliderGroup = this._displayables.sliderGroup;\n    var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n    var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n    var size = this._size;\n    endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n    brushRect.setShape({\n      x: startPoint[0],\n      y: 0,\n      width: endPoint[0] - startPoint[0],\n      height: size[1]\n    });\n  };\n  /**\r\n   * This action will be throttled.\r\n   */\n  SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n      start: range[0],\n      end: range[1]\n    });\n  };\n  SliderZoomView.prototype._findCoordRect = function () {\n    // Find the grid corresponding to the first axis referred by dataZoom.\n    var rect;\n    var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n    if (!rect && coordSysInfoList.length) {\n      var coordSys = coordSysInfoList[0].model.coordinateSystem;\n      rect = coordSys.getRect && coordSys.getRect();\n    }\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n    return rect;\n  };\n  SliderZoomView.type = 'dataZoom.slider';\n  return SliderZoomView;\n}(DataZoomView);\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // getOtherAxis\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\nexport default SliderZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport SliderZoomModel from './SliderZoomModel.js';\nimport SliderZoomView from './SliderZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SliderZoomModel);\n  registers.registerComponentView(SliderZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomInside } from './installDataZoomInside.js';\nimport { install as installDataZoomSlider } from './installDataZoomSlider.js';\nexport function install(registers) {\n  use(installDataZoomInside);\n  use(installDataZoomSlider);\n  // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as numberUtil from '../../util/number.js';\nimport ComponentModel from '../../model/Component.js';\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar VisualMapModel = /** @class */function (_super) {\n  __extends(VisualMapModel, _super);\n  function VisualMapModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = VisualMapModel.type;\n    _this.stateList = ['inRange', 'outOfRange'];\n    _this.replacableOptionKeys = ['inRange', 'outOfRange', 'target', 'controller', 'color'];\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    /**\r\n     * [lowerBound, upperBound]\r\n     */\n    _this.dataBound = [-Infinity, Infinity];\n    _this.targetVisuals = {};\n    _this.controllerVisuals = {};\n    return _this;\n  }\n  VisualMapModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  /**\r\n   * @protected\r\n   */\n  VisualMapModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  };\n  /**\r\n   * @protected\r\n   */\n  VisualMapModel.prototype.resetVisual = function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  };\n  /**\r\n   * @public\r\n   */\n  VisualMapModel.prototype.getItemSymbol = function () {\n    return null;\n  };\n  /**\r\n   * @protected\r\n   * @return {Array.<number>} An array of series indices.\r\n   */\n  VisualMapModel.prototype.getTargetSeriesIndices = function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n    return seriesIndices;\n  };\n  /**\r\n   * @public\r\n   */\n  VisualMapModel.prototype.eachTargetSeries = function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      var seriesModel = this.ecModel.getSeriesByIndex(seriesIndex);\n      if (seriesModel) {\n        callback.call(context, seriesModel);\n      }\n    }, this);\n  };\n  /**\r\n   * @pubilc\r\n   */\n  VisualMapModel.prototype.isTargetSeries = function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  };\n  /**\r\n   * @example\r\n   * this.formatValueText(someVal); // format single numeric value to text.\r\n   * this.formatValueText(someVal, true); // format single category value to text.\r\n   * this.formatValueText([min, max]); // format numeric min-max to text.\r\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\r\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\r\n   *\r\n   * @param value Real value, or this.dataBound[0 or 1].\r\n   * @param isCategory Only available when value is number.\r\n   * @param edgeSymbols Open-close symbol when value is interval.\r\n   * @protected\r\n   */\n  VisualMapModel.prototype.formatValueText = function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n    var textValue = isCategory ? value // Value is string when isCategory\n    : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  VisualMapModel.prototype.resetExtent = function () {\n    var thisOption = this.option;\n    // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  };\n  /**\r\n   * PENDING:\r\n   * delete this method if no outer usage.\r\n   *\r\n   * Return  Concrete dimension. If null/undefined is returned, no dimension is used.\r\n   */\n  // getDataDimension(data: SeriesData) {\n  //     const optDim = this.option.dimension;\n  //     if (optDim != null) {\n  //         return data.getDimension(optDim);\n  //     }\n  //     const dimNames = data.dimensions;\n  //     for (let i = dimNames.length - 1; i >= 0; i--) {\n  //         const dimName = dimNames[i];\n  //         const dimInfo = data.getDimensionInfo(dimName);\n  //         if (!dimInfo.isCalculationCoord) {\n  //             return dimName;\n  //         }\n  //     }\n  // }\n  VisualMapModel.prototype.getDataDimensionIndex = function (data) {\n    var optDim = this.option.dimension;\n    if (optDim != null) {\n      return data.getDimensionIndex(optDim);\n    }\n    var dimNames = data.dimensions;\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = data.getDimensionInfo(dimName);\n      if (!dimInfo.isCalculationCoord) {\n        return dimInfo.storeDimIndex;\n      }\n    }\n  };\n  VisualMapModel.prototype.getExtent = function () {\n    return this._dataExtent.slice();\n  };\n  VisualMapModel.prototype.completeVisualOption = function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n    zrUtil.merge(controller, base); // Do not override\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange');\n    // completeInactive.call(this, target, 'outOfRange', 'inRange');\n    completeController.call(this, controller);\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color)\n      // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      }\n      // Compatible with previous logic, always give a default color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the default color, set inRange: {color: null}.\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      };\n    }\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n          if (defa != null) {\n            optAbsent[visualType] = defa;\n            // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      var itemSymbol = this.getItemSymbol();\n      var defaultSymbol = itemSymbol || 'roundRect';\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state];\n        // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        }\n        // Consistent symbol and symbolSize if not specified.\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? defaultSymbol : [defaultSymbol]);\n        }\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        }\n        // Filter none\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' ? defaultSymbol : symbol;\n        });\n        // Normalize symbolSize\n        var symbolSize = visuals.symbolSize;\n        if (symbolSize != null) {\n          var max_1 = -Infinity;\n          // symbolSize can be object when categories defined.\n          eachVisual(symbolSize, function (value) {\n            value > max_1 && (max_1 = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max_1], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  };\n  VisualMapModel.prototype.resetItemSize = function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  };\n  VisualMapModel.prototype.isCategory = function () {\n    return !!this.option.categories;\n  };\n  /**\r\n   * @public\r\n   * @abstract\r\n   */\n  VisualMapModel.prototype.setSelected = function (selected) {};\n  VisualMapModel.prototype.getSelected = function () {\n    return null;\n  };\n  /**\r\n   * @public\r\n   * @abstract\r\n   */\n  VisualMapModel.prototype.getValueState = function (value) {\n    return null;\n  };\n  /**\r\n   * FIXME\r\n   * Do not publish to thirt-part-dev temporarily\r\n   * util the interface is stable. (Should it return\r\n   * a function but not visual meta?)\r\n   *\r\n   * @pubilc\r\n   * @abstract\r\n   * @param getColorVisual\r\n   *        params: value, valueState\r\n   *        return: color\r\n   * @return {Object} visualMeta\r\n   *        should includes {stops, outerColors}\r\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\r\n   */\n  VisualMapModel.prototype.getVisualMeta = function (getColorVisual) {\n    return null;\n  };\n  VisualMapModel.type = 'visualMap';\n  VisualMapModel.dependencies = ['series'];\n  VisualMapModel.defaultOption = {\n    show: true,\n    // zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    min: 0,\n    max: 200,\n    left: 0,\n    right: null,\n    top: null,\n    bottom: 0,\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    padding: 5,\n    // css\n    textGap: 10,\n    precision: 0,\n    textStyle: {\n      color: '#333' // \n    }\n  };\n  return VisualMapModel;\n}(ComponentModel);\nexport default VisualMapModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport * as numberUtil from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n// Constant\nvar DEFAULT_BAR_BOUND = [20, 140];\nvar ContinuousModel = /** @class */function (_super) {\n  __extends(ContinuousModel, _super);\n  function ContinuousModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ContinuousModel.type;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  ContinuousModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n    this._resetRange();\n  };\n  /**\r\n   * @protected\r\n   * @override\r\n   */\n  ContinuousModel.prototype.resetItemSize = function () {\n    _super.prototype.resetItemSize.apply(this, arguments);\n    var itemSize = this.itemSize;\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  };\n  /**\r\n   * @private\r\n   */\n  ContinuousModel.prototype._resetRange = function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n    if (!range || range.auto) {\n      // `range` should always be array (so we don't use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  };\n  /**\r\n   * @protected\r\n   * @override\r\n   */\n  ContinuousModel.prototype.completeVisualOption = function () {\n    _super.prototype.completeVisualOption.apply(this, arguments);\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = symbolSize[1] / 3; // For good looking.\n      }\n    }, this);\n  };\n  /**\r\n   * @override\r\n   */\n  ContinuousModel.prototype.setSelected = function (selected) {\n    this.option.range = selected.slice();\n    this._resetRange();\n  };\n  /**\r\n   * @public\r\n   */\n  ContinuousModel.prototype.getSelected = function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice());\n    // Clamp\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  };\n  /**\r\n   * @override\r\n   */\n  ContinuousModel.prototype.getValueState = function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent();\n    // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  };\n  ContinuousModel.prototype.findTargetDataIndices = function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\r\n   * @implement\r\n   */\n  ContinuousModel.prototype.getVisualMeta = function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    }\n    // Format to: outOfRange -- inRange -- outOfRange.\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  };\n  ContinuousModel.type = 'visualMap.continuous';\n  ContinuousModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    align: 'auto',\n    calculable: false,\n    hoverLink: true,\n    realtime: true,\n    handleIcon: 'path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z',\n    handleSize: '120%',\n    handleStyle: {\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    indicatorIcon: 'circle',\n    indicatorSize: '50%',\n    indicatorStyle: {\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0,0,0,0.2)'\n    }\n    // emphasis: {\n    //     handleStyle: {\n    //         shadowBlur: 3,\n    //         shadowOffsetX: 1,\n    //         shadowOffsetY: 1,\n    //         shadowColor: 'rgba(0,0,0,0.2)'\n    //     }\n    // }\n  });\n  return ContinuousModel;\n}(VisualMapModel);\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  }\n  // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\nexport default ContinuousModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { Rect } from '../../util/graphic.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as layout from '../../util/layout.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport ComponentView from '../../view/Component.js';\nvar VisualMapView = /** @class */function (_super) {\n  __extends(VisualMapView, _super);\n  function VisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = VisualMapView.type;\n    _this.autoPositionValues = {\n      left: 1,\n      right: 1,\n      top: 1,\n      bottom: 1\n    };\n    return _this;\n  }\n  VisualMapView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  /**\r\n   * @protected\r\n   */\n  VisualMapView.prototype.render = function (visualMapModel, ecModel, api, payload // TODO: TYPE\n  ) {\n    this.visualMapModel = visualMapModel;\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n    this.doRender(visualMapModel, ecModel, api, payload);\n  };\n  /**\r\n   * @protected\r\n   */\n  VisualMapView.prototype.renderBackground = function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new Rect({\n      z2: -1,\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  };\n  /**\r\n   * @protected\r\n   * @param targetValue can be Infinity or -Infinity\r\n   * @param visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\r\n   * @param opts\r\n   * @param opts.forceState Specify state, instead of using getValueState method.\r\n   * @param opts.convertOpacityToAlpha For color gradient in controller widget.\r\n   * @return {*} Visual value.\r\n   */\n  VisualMapView.prototype.getControllerVisual = function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {};\n    // Default values.\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n    function getter(key) {\n      return visualObj[key];\n    }\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  };\n  VisualMapView.prototype.positionGroup = function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n  VisualMapView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {};\n  VisualMapView.type = 'visualMap';\n  return VisualMapView;\n}(ComponentView);\nexport default VisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nvar paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n/**\r\n * @param visualMapModel\r\n * @param api\r\n * @param itemSize always [short, long]\r\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\r\n */\nexport function getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  }\n  // Auto decision align.\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\r\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\r\n * dataIndexInside means filtered index.\r\n */\n// TODO: TYPE more specified payload types.\nexport function makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as helper from './helper.js';\nimport * as modelUtil from '../../util/model.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { setAsHighDownDispatcher } from '../../util/states.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { findEventDispatcher } from '../../util/event.js';\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n// Arbitrary value\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6;\n// Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\nvar ContinuousView = /** @class */function (_super) {\n  __extends(ContinuousView, _super);\n  function ContinuousView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ContinuousView.type;\n    _this._shapes = {};\n    _this._dataInterval = [];\n    _this._handleEnds = [];\n    _this._hoverLinkDataIndices = [];\n    return _this;\n  }\n  ContinuousView.prototype.init = function (ecModel, api) {\n    _super.prototype.init.call(this, ecModel, api);\n    this._hoverLinkFromSeriesMouseOver = zrUtil.bind(this._hoverLinkFromSeriesMouseOver, this);\n    this._hideIndicator = zrUtil.bind(this._hideIndicator, this);\n  };\n  ContinuousView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  };\n  ContinuousView.prototype._buildView = function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n    this._resetInterval();\n    this._renderBar(thisGroup);\n    var dataRangeText = visualMapModel.get('text');\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n    this._renderEndsText(thisGroup, dataRangeText, 1);\n    // Do this for background size calculation.\n    this._updateView(true);\n    // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n    this.renderBackground(thisGroup);\n    // Real update view\n    this._updateView();\n    this._enableHoverLinkToSeries();\n    this._enableHoverLinkFromSeries();\n    this.positionGroup(thisGroup);\n  };\n  ContinuousView.prototype._renderEndsText = function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    }\n    // Compatible with ec2, text[0] map to high value, text[1] map low value.\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.mainGroup;\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: position[0],\n        y: position[1],\n        verticalAlign: orient === 'horizontal' ? 'middle' : align,\n        align: orient === 'horizontal' ? align : 'center',\n        text: text\n      })\n    }));\n  };\n  ContinuousView.prototype._renderBar = function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n    var mainGroup = shapes.mainGroup = this._createBarGroup(itemAlign);\n    var gradientBarGroup = new graphic.Group();\n    mainGroup.add(gradientBarGroup);\n    // Bar\n    gradientBarGroup.add(shapes.outOfRange = createPolygon());\n    gradientBarGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true)));\n    // A border radius clip.\n    gradientBarGroup.setClipPath(new graphic.Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: itemSize[0],\n        height: itemSize[1],\n        r: 3\n      }\n    }));\n    var textRect = visualMapModel.textStyleModel.getTextRect('');\n    var textSize = mathMax(textRect.width, textRect.height);\n    // Handle\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n      this._createHandle(visualMapModel, mainGroup, 0, itemSize, textSize, orient);\n      this._createHandle(visualMapModel, mainGroup, 1, itemSize, textSize, orient);\n    }\n    this._createIndicator(visualMapModel, mainGroup, itemSize, textSize, orient);\n    targetGroup.add(mainGroup);\n  };\n  ContinuousView.prototype._createHandle = function (visualMapModel, mainGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleSize = parsePercent(visualMapModel.get('handleSize'), itemSize[0]);\n    var handleThumb = createSymbol(visualMapModel.get('handleIcon'), -handleSize / 2, -handleSize / 2, handleSize, handleSize, null, true);\n    var cursor = getCursor(this._orient);\n    handleThumb.attr({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      ondragend: onDragEnd,\n      onmousemove: function (e) {\n        eventTool.stop(e.event);\n      }\n    });\n    handleThumb.x = itemSize[0] / 2;\n    handleThumb.useStyle(visualMapModel.getModel('handleStyle').getItemStyle());\n    handleThumb.setStyle({\n      strokeNoScale: true,\n      strokeFirst: true\n    });\n    handleThumb.style.lineWidth *= 2;\n    handleThumb.ensureState('emphasis').style = visualMapModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n    setAsHighDownDispatcher(handleThumb, true);\n    mainGroup.add(handleThumb);\n    // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // For mobile device, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    handleLabel.ensureState('blur').style = {\n      opacity: 0.1\n    };\n    handleLabel.stateTransition = {\n      duration: 200\n    };\n    this.group.add(handleLabel);\n    var handleLabelPoint = [handleSize, 0];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  };\n  ContinuousView.prototype._createIndicator = function (visualMapModel, mainGroup, itemSize, textSize, orient) {\n    var scale = parsePercent(visualMapModel.get('indicatorSize'), itemSize[0]);\n    var indicator = createSymbol(visualMapModel.get('indicatorIcon'), -scale / 2, -scale / 2, scale, scale, null, true);\n    indicator.attr({\n      cursor: 'move',\n      invisible: true,\n      silent: true,\n      x: itemSize[0] / 2\n    });\n    var indicatorStyle = visualMapModel.getModel('indicatorStyle').getItemStyle();\n    if (indicator instanceof ZRImage) {\n      var pathStyle = indicator.style;\n      indicator.useStyle(zrUtil.extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, indicatorStyle));\n    } else {\n      indicator.useStyle(indicatorStyle);\n    }\n    mainGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [(orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT) + itemSize[0] / 2, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n    this._firstShowIndicator = true;\n  };\n  ContinuousView.prototype._dragHandle = function (handleIndex, isEnd,\n  // dx is event from ondragend if isEnd is true. It's not used\n  dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n    this._dragging = !isEnd;\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.mainGroup, true);\n      this._updateInterval(handleIndex, vertex[1]);\n      this._hideIndicator();\n      // Considering realtime, update view should be executed\n      // before dispatch action.\n      this._updateView();\n    }\n    // dragEnd do not dispatch action when realtime.\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  };\n  ContinuousView.prototype._resetInterval = function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  };\n  /**\r\n   * @private\r\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\r\n   * @param {number} dx\r\n   * @param {number} dy\r\n   */\n  ContinuousView.prototype._updateInterval = function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex,\n    // cross is forbidden\n    0);\n    var dataExtent = visualMapModel.getExtent();\n    // Update data interval.\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  };\n  ContinuousView.prototype._updateView = function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor\n      // opacity: visualInRange.opacity\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor\n      // opacity: visualOutOfRange.opacity\n    }).setShape('points', visualOutOfRange.barPoints);\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  };\n  ContinuousView.prototype._createBarVisual = function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  };\n  ContinuousView.prototype._makeColorGradient = function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only calculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  };\n  ContinuousView.prototype._createBarPoints = function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  };\n  ContinuousView.prototype._createBarGroup = function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scaleX: itemAlign === 'bottom' ? 1 : -1,\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scaleX: itemAlign === 'bottom' ? -1 : 1,\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scaleX: itemAlign === 'left' ? 1 : -1,\n      scaleY: -1\n    } : {\n      scaleX: itemAlign === 'left' ? 1 : -1\n    });\n  };\n  ContinuousView.prototype._updateHandle = function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    var itemSize = visualMapModel.itemSize;\n    var dataExtent = visualMapModel.getExtent();\n    var align = this._applyTransform('left', shapes.mainGroup);\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.y = handleEnds[handleIndex];\n      var val = linearMap(handleEnds[handleIndex], [0, itemSize[1]], dataExtent, true);\n      var symbolSize = this.getControllerVisual(val, 'symbolSize');\n      handleThumb.scaleX = handleThumb.scaleY = symbolSize / itemSize[0];\n      handleThumb.x = itemSize[0] - symbolSize / 2;\n      // Update handle label position.\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      if (this._orient === 'horizontal') {\n        // If visualMap controls symbol size, an additional offset needs to be added to labels to avoid collision at minimum size.\n        // Offset reaches value of 0 at \"maximum\" position, so maximum position is not altered at all.\n        var minimumOffset = align === 'left' || align === 'top' ? (itemSize[0] - symbolSize) / 2 : (itemSize[0] - symbolSize) / -2;\n        textPoint[1] += minimumOffset;\n      }\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        verticalAlign: 'middle',\n        align: this._orient === 'vertical' ? this._applyTransform('left', shapes.mainGroup) : 'center'\n      });\n    }, this);\n  };\n  ContinuousView.prototype._showIndicator = function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n    if (!indicator) {\n      return;\n    }\n    indicator.attr('invisible', false);\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    var symbolSize = this.getControllerVisual(cursorValue, 'symbolSize');\n    var y = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var x = itemSize[0] - symbolSize / 2;\n    var oldIndicatorPos = {\n      x: indicator.x,\n      y: indicator.y\n    };\n    // Update handle label position.\n    indicator.y = y;\n    indicator.x = x;\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n    var align = this._applyTransform('left', shapes.mainGroup);\n    var orient = this._orient;\n    var isHorizontal = orient === 'horizontal';\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      verticalAlign: isHorizontal ? align : 'middle',\n      align: isHorizontal ? 'center' : align\n    });\n    var indicatorNewProps = {\n      x: x,\n      y: y,\n      style: {\n        fill: color\n      }\n    };\n    var labelNewProps = {\n      style: {\n        x: textPoint[0],\n        y: textPoint[1]\n      }\n    };\n    if (visualMapModel.ecModel.isAnimationEnabled() && !this._firstShowIndicator) {\n      var animationCfg = {\n        duration: 100,\n        easing: 'cubicInOut',\n        additive: true\n      };\n      indicator.x = oldIndicatorPos.x;\n      indicator.y = oldIndicatorPos.y;\n      indicator.animateTo(indicatorNewProps, animationCfg);\n      indicatorLabel.animateTo(labelNewProps, animationCfg);\n    } else {\n      indicator.attr(indicatorNewProps);\n      indicatorLabel.attr(labelNewProps);\n    }\n    this._firstShowIndicator = false;\n    var handleLabels = this._shapes.handleLabels;\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this.api.enterBlur(handleLabels[i]);\n      }\n    }\n  };\n  ContinuousView.prototype._enableHoverLinkToSeries = function () {\n    var self = this;\n    this._shapes.mainGroup.on('mousemove', function (e) {\n      self._hovering = true;\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.mainGroup, true, true);\n        // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  };\n  ContinuousView.prototype._enableHoverLinkFromSeries = function () {\n    var zr = this.api.getZr();\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  };\n  ContinuousView.prototype._doHoverLinkToSeries = function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent();\n    // For hover link show when hover handle, which might be below or upper than sizeExtent.\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)];\n    // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity);\n    // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, ' ', halfHoverLinkSize);\n      }\n    }\n    // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  };\n  ContinuousView.prototype._hoverLinkFromSeriesMouseOver = function (e) {\n    var ecData;\n    findEventDispatcher(e.target, function (target) {\n      var currECData = getECData(target);\n      if (currECData.dataIndex != null) {\n        ecData = currECData;\n        return true;\n      }\n    }, true);\n    if (!ecData) {\n      return;\n    }\n    var dataModel = this.ecModel.getSeriesByIndex(ecData.seriesIndex);\n    var visualMapModel = this.visualMapModel;\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n    var data = dataModel.getData(ecData.dataType);\n    var value = data.getStore().get(visualMapModel.getDataDimensionIndex(data), ecData.dataIndex);\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  };\n  ContinuousView.prototype._hideIndicator = function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n    var handleLabels = this._shapes.handleLabels;\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this.api.leaveBlur(handleLabels[i]);\n      }\n    }\n  };\n  ContinuousView.prototype._clearHoverLinkToSeries = function () {\n    this._hideIndicator();\n    var indices = this._hoverLinkDataIndices;\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n    indices.length = 0;\n  };\n  ContinuousView.prototype._clearHoverLinkFromSeries = function () {\n    this._hideIndicator();\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  };\n  ContinuousView.prototype._applyTransform = function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return zrUtil.isArray(vertex) ? graphic.applyTransform(vertex, transform, inverse) : graphic.transformDirection(vertex, transform, inverse);\n  };\n  // TODO: TYPE more specified payload types.\n  ContinuousView.prototype._dispatchHighDown = function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  };\n  /**\r\n   * @override\r\n   */\n  ContinuousView.prototype.dispose = function () {\n    this._clearHoverLinkFromSeries();\n    this._clearHoverLinkToSeries();\n  };\n  ContinuousView.type = 'visualMap.continuous';\n  return ContinuousView;\n}(VisualMapView);\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n  return halfHoverLinkSize;\n}\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\nexport default ContinuousView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport var visualMapActionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\nexport var visualMapActionHander = function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nexport var visualMapEncodingHandlers = [{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimensionIndex(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n},\n// Only support color.\n{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var dimIdx = visualMapModel.getDataDimensionIndex(data);\n        if (dimIdx >= 0) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimIdx;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    });\n    // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}];\n// FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: getVisualFromData(seriesModel.getData(), 'color') // default color.\n  };\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n  return resultVisual.color;\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar each = zrUtil.each;\nexport default function visualMapPreprocessor(option) {\n  var visualMap = option && option.visualMap;\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    }\n    // rename splitList to pieces\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n    var pieces = opt.pieces;\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { visualMapActionInfo, visualMapActionHander } from './visualMapAction.js';\nimport { visualMapEncodingHandlers } from './visualEncoding.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport preprocessor from './preprocessor.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n  installed = true;\n  registers.registerSubTypeDefaulter('visualMap', function (option) {\n    // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n    return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n  });\n  registers.registerAction(visualMapActionInfo, visualMapActionHander);\n  each(visualMapEncodingHandlers, function (handler) {\n    registers.registerVisual(registers.PRIORITY.VISUAL.COMPONENT, handler);\n  });\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport ContinuousModel from './ContinuousModel.js';\nimport ContinuousView from './ContinuousView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(ContinuousModel);\n  registers.registerComponentView(ContinuousView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport { reformIntervals } from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar PiecewiseModel = /** @class */function (_super) {\n  __extends(PiecewiseModel, _super);\n  function PiecewiseModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PiecewiseModel.type;\n    /**\r\n     * The order is always [low, ..., high].\r\n     * [{text: string, interval: Array.<number>}, ...]\r\n     */\n    _this._pieceList = [];\n    return _this;\n  }\n  PiecewiseModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    this.resetExtent();\n    var mode = this._mode = this._determineMode();\n    this._pieceList = [];\n    resetMethods[this._mode].call(this, this._pieceList);\n    this._resetSelected(newOption, isInit);\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          piece = zrUtil.clone(piece);\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n          return piece;\n        });\n      }\n    });\n  };\n  /**\r\n   * @protected\r\n   * @override\r\n   */\n  PiecewiseModel.prototype.completeVisualOption = function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = false;\n      zrUtil.each(this.stateList, function (state) {\n        exists = exists || has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n    function has(obj, state, visualType) {\n      return obj && obj[state] && obj[state].hasOwnProperty(visualType);\n    }\n    _super.prototype.completeVisualOption.apply(this, arguments);\n  };\n  PiecewiseModel.prototype._resetSelected = function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    // Selected do not merge but all override.\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected;\n    // Consider 'not specified' means true.\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel_1 = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n        if (selected[key]) {\n          hasSel_1 ? selected[key] = false : hasSel_1 = true;\n        }\n      }, this);\n    }\n    // thisOption.selectedMode === 'multiple', default: all selected.\n  };\n  /**\r\n   * @public\r\n   */\n  PiecewiseModel.prototype.getItemSymbol = function () {\n    return this.get('itemSymbol');\n  };\n  /**\r\n   * @public\r\n   */\n  PiecewiseModel.prototype.getSelectedMapKey = function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  };\n  /**\r\n   * @public\r\n   */\n  PiecewiseModel.prototype.getPieceList = function () {\n    return this._pieceList;\n  };\n  /**\r\n   * @return {string}\r\n   */\n  PiecewiseModel.prototype._determineMode = function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  };\n  /**\r\n   * @override\r\n   */\n  PiecewiseModel.prototype.setSelected = function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  };\n  /**\r\n   * @override\r\n   */\n  PiecewiseModel.prototype.getValueState = function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  };\n  /**\r\n   * @public\r\n   * @param pieceIndex piece index in visualMapModel.getPieceList()\r\n   */\n  PiecewiseModel.prototype.findTargetDataIndices = function (pieceIndex) {\n    var result = [];\n    var pieceList = this._pieceList;\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\r\n   * @private\r\n   * @param piece piece.value or piece.interval is required.\r\n   * @return  Can be Infinity or -Infinity\r\n   */\n  PiecewiseModel.prototype.getRepresentValue = function (piece) {\n    var representValue;\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n    return representValue;\n  };\n  PiecewiseModel.prototype.getVisualMeta = function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n    var stops = [];\n    var outerColors = ['', ''];\n    var visualMapModel = this;\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      }); // Not category\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n      var color = getColorVisual(representValue, valueState);\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    }\n    // Suplement\n    var pieceList = this._pieceList.slice();\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  };\n  PiecewiseModel.type = 'visualMap.piecewise';\n  PiecewiseModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    selected: null,\n    minOpen: false,\n    maxOpen: false,\n    align: 'auto',\n    itemWidth: 20,\n    itemHeight: 14,\n    itemSymbol: 'roundRect',\n    pieces: null,\n    categories: null,\n    splitNumber: 5,\n    selectedMode: 'multiple',\n    itemGap: 10,\n    hoverLink: true // Enable hover highlight.\n  });\n  return PiecewiseModel;\n}(VisualMapModel);\n;\n/**\r\n * Key is this._mode\r\n * @type {Object}\r\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\r\n */\nvar resetMethods = {\n  splitNumber: function (outPieceList) {\n    var thisOption = this.option;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber;\n    // Precision auto-adaption\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n    if (thisOption.minOpen) {\n      outPieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      outPieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n    if (thisOption.maxOpen) {\n      outPieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME categorypieceListvisualMappingpieceList\n      // \n      outPieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this);\n    // See \"Order Rule\".\n    normalizeReverse(thisOption, outPieceList);\n  },\n  pieces: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n      var item = {\n        text: '',\n        index: index\n      };\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommended.\n        var interval = item.interval = [];\n        var close_1 = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close_1[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n        useMinMax[0] && interval[1] === Infinity && (close_1[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close_1[1] = 0);\n        if (process.env.NODE_ENV !== 'production') {\n          if (interval[0] > interval[1]) {\n            console.warn('Piece ' + index + 'is illegal: ' + interval + ' lower bound should not greater then uppper bound.');\n          }\n        }\n        if (interval[0] === interval[1] && close_1[0] && close_1[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      outPieceList.push(item);\n    }, this);\n    // See \"Order Rule\".\n    normalizeReverse(thisOption, outPieceList);\n    // Only pieces\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', ''][close[1]], ['>', ''][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\nexport default PiecewiseModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from './helper.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar PiecewiseVisualMapView = /** @class */function (_super) {\n  __extends(PiecewiseVisualMapView, _super);\n  function PiecewiseVisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PiecewiseVisualMapView.type;\n    return _this;\n  }\n  PiecewiseVisualMapView.prototype.doRender = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var textFont = textStyleModel.getFont();\n    var textFill = textStyleModel.getTextColor();\n    var itemAlign = this._getItemAlign();\n    var itemSize = visualMapModel.itemSize;\n    var viewData = this._getViewData();\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    var silent = !visualMapModel.get('selectedMode');\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, function (item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList);\n      // TODO Category\n      var representValue = visualMapModel.getRepresentValue(piece);\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]], silent);\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        itemGroup.add(new graphic.Text({\n          style: {\n            x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            verticalAlign: 'middle',\n            align: itemAlign,\n            font: textFont,\n            fill: textFill,\n            opacity: visualState === 'outOfRange' ? 0.5 : 1\n          },\n          silent: silent\n        }));\n      }\n      thisGroup.add(itemGroup);\n    }, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n  };\n  PiecewiseVisualMapView.prototype._enableHoverLink = function (itemGroup, pieceIndex) {\n    var _this = this;\n    itemGroup.on('mouseover', function () {\n      return onHoverLink('highlight');\n    }).on('mouseout', function () {\n      return onHoverLink('downplay');\n    });\n    var onHoverLink = function (method) {\n      var visualMapModel = _this.visualMapModel;\n      // TODO: TYPE More detailed action types\n      visualMapModel.option.hoverLink && _this.api.dispatchAction({\n        type: method,\n        batch: helper.makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex), visualMapModel)\n      });\n    };\n  };\n  PiecewiseVisualMapView.prototype._getItemAlign = function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n      return align;\n    }\n  };\n  PiecewiseVisualMapView.prototype._renderEndsText = function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        verticalAlign: 'middle',\n        align: showLabel ? itemAlign : 'center',\n        text: text\n      })\n    }));\n    group.add(itemGroup);\n  };\n  /**\r\n   * @private\r\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\r\n   */\n  PiecewiseVisualMapView.prototype._getViewData = function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text');\n    // Consider orient and inverse.\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse');\n    // Order of model pieceList is always [low, ..., high]\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    }\n    // Origin order of endsText is [high, low]\n    else if (endsText) {\n      endsText = endsText.slice().reverse();\n    }\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  };\n  PiecewiseVisualMapView.prototype._createItemSymbol = function (group, representValue, shapeParam, silent) {\n    var itemSymbol = createSymbol(\n    // symbol will be string\n    this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3],\n    // color will be string\n    this.getControllerVisual(representValue, 'color'));\n    itemSymbol.silent = silent;\n    group.add(itemSymbol);\n  };\n  PiecewiseVisualMapView.prototype._onItemClick = function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selectedMode = option.selectedMode;\n    if (!selectedMode) {\n      return;\n    }\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n    if (selectedMode === 'single' || selectedMode === true) {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  };\n  PiecewiseVisualMapView.type = 'visualMap.piecewise';\n  return PiecewiseVisualMapView;\n}(VisualMapView);\nexport default PiecewiseVisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport PiecewiseModel from './PiecewiseModel.js';\nimport PiecewiseView from './PiecewiseView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(PiecewiseModel);\n  registers.registerComponentView(PiecewiseView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installVisualMapContinuous } from './installVisualMapContinuous.js';\nimport { install as installVisualMapPiecewise } from './installVisualMapPiecewise.js';\nexport function install(registers) {\n  use(installVisualMapContinuous);\n  use(installVisualMapPiecewise);\n  // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function ariaPreprocessor(option) {\n  if (!option || !option.aria) {\n    return;\n  }\n  var aria = option.aria;\n  // aria.show is deprecated and should use aria.enabled instead\n  if (aria.show != null) {\n    aria.enabled = aria.show;\n  }\n  aria.label = aria.label || {};\n  // move description, general, series, data to be under aria.label\n  zrUtil.each(['description', 'general', 'series', 'data'], function (name) {\n    if (aria[name] != null) {\n      aria.label[name] = aria[name];\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport ariaVisual from '../../visual/aria.js';\nimport ariaPreprocessor from './preprocessor.js';\nexport function install(registers) {\n  registers.registerPreprocessor(ariaPreprocessor);\n  registers.registerVisual(registers.PRIORITY.VISUAL.ARIA, ariaVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { parseConditionalExpression } from '../../util/conditionalExpression.js';\nimport { hasOwn, createHashMap } from 'zrender/lib/core/util.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nexport var filterTransform = {\n  type: 'echarts:filter',\n  // PENDING: enhance to filter by index rather than create new data\n  transform: function (params) {\n    // [Caveat] Fail-Fast:\n    // Do not return the whole dataset unless user config indicates it explicitly.\n    // For example, if no condition is specified by mistake, returning an empty result\n    // is better than returning the entire raw source for the user to find the mistake.\n    var upstream = params.upstream;\n    var rawItem;\n    var condition = parseConditionalExpression(params.config, {\n      valueGetterAttrMap: createHashMap({\n        dimension: true\n      }),\n      prepareGetValue: function (exprOption) {\n        var errMsg = '';\n        var dimLoose = exprOption.dimension;\n        if (!hasOwn(exprOption, 'dimension')) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Relation condition must has prop \"dimension\" specified.', 'Illegal condition:', exprOption);\n          }\n          throwError(errMsg);\n        }\n        var dimInfo = upstream.getDimensionInfo(dimLoose);\n        if (!dimInfo) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal condition:', exprOption, '.\\n');\n          }\n          throwError(errMsg);\n        }\n        return {\n          dimIdx: dimInfo.index\n        };\n      },\n      getValue: function (param) {\n        return upstream.retrieveValueFromItem(rawItem, param.dimIdx);\n      }\n    });\n    var resultData = [];\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      rawItem = upstream.getRawDataItem(i);\n      if (condition.evaluate()) {\n        resultData.push(rawItem);\n      }\n    }\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nvar sampleLog = '';\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function (params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = '';\n    // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n    var orderExprList = normalizeToArray(config);\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n      throwError(errMsg);\n    }\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n        throwError(errMsg);\n      }\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n        throwError(errMsg);\n      }\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n        throwError(errMsg_1);\n      }\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n        throwError(errMsg_2);\n      }\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n        throwError(errMsg);\n      }\n      var parser = parserName ? getRawValueParser(parserName) : null;\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n        throwError(errMsg);\n      }\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    });\n    // TODO: support it?\n    var sourceFormat = upstream.sourceFormat;\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n      throwError(errMsg);\n    }\n    // Other upstream format are all array.\n    var resultData = [];\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n        var result = orderDef.comparator.evaluate(val0, val1);\n        if (result !== 0) {\n          return result;\n        }\n      }\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { filterTransform } from './filterTransform.js';\nimport { sortTransform } from './sortTransform.js';\nexport function install(registers) {\n  registers.registerTransform(filterTransform);\n  registers.registerTransform(sortTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * This module is imported by echarts directly.\r\n *\r\n * Notice:\r\n * Always keep this file exists for backward compatibility.\r\n * Because before 4.1.0, dataset is an optional component,\r\n * some users may import this module manually.\r\n */\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { SERIES_LAYOUT_BY_COLUMN } from '../../util/types.js';\nimport { disableTransformOptionMerge, SourceManager } from '../../data/helper/sourceManager.js';\nvar DatasetModel = /** @class */function (_super) {\n  __extends(DatasetModel, _super);\n  function DatasetModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'dataset';\n    return _this;\n  }\n  DatasetModel.prototype.init = function (option, parentModel, ecModel) {\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n    this._sourceManager = new SourceManager(this);\n    disableTransformOptionMerge(this);\n  };\n  DatasetModel.prototype.mergeOption = function (newOption, ecModel) {\n    _super.prototype.mergeOption.call(this, newOption, ecModel);\n    disableTransformOptionMerge(this);\n  };\n  DatasetModel.prototype.optionUpdated = function () {\n    this._sourceManager.dirty();\n  };\n  DatasetModel.prototype.getSourceManager = function () {\n    return this._sourceManager;\n  };\n  DatasetModel.type = 'dataset';\n  DatasetModel.defaultOption = {\n    seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN\n  };\n  return DatasetModel;\n}(ComponentModel);\nexport { DatasetModel };\nvar DatasetView = /** @class */function (_super) {\n  __extends(DatasetView, _super);\n  function DatasetView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'dataset';\n    return _this;\n  }\n  DatasetView.type = 'dataset';\n  return DatasetView;\n}(ComponentView);\nexport function install(registers) {\n  registers.registerComponentModel(DatasetModel);\n  registers.registerComponentView(DatasetView);\n}"],"names":["getTooltipLineHeight","textStyle","lineHeight","encodeHTML","getTooltipTextStyle","renderMode","nameFontColor","color","nameFontSize","fontSize","nameFontWeight","fontWeight","valueFontColor","valueFontSize","valueFontWeight","nameStyle","valueStyle","fill","HTML_GAPS","RICH_TEXT_GAPS","createTooltipMarkup","type","option","isSectionFragment","frag","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","blocks","length","hasInnerGap_1","noHeader","each","subBlock","subGapLevel","ctx","fragment","topMarginForOuterGap","toolTipTextStyle","gapLevel","gaps","html","richText","subMarkupTextList","subBlocks","assert","isArray","orderMode","sortBlocks","slice","orderMap","valueAsc","valueDesc","hasOwn","comparator_1","SortOrderComparator","sort","a","b","evaluate","sortParam","reverse","idx","valueFormatter","subMarkupText","extend","push","join","wrapBlockHTML","displayableHeader","makeValueReadable","header","useUTC","tooltipLineHeight","wrapInlineNameRichText","noName","noValue","noMarker","markerType","name","value","map","val","valueTypeOption","markerStr","markupStyleCreator","makeTooltipMarker","markerColor","readableName","valueType","readableValueList","dataIndex","valueAlignRight","valueCloseToMarker","_a","values","alignRight","style","styles","paddingLeft","padding","align","wrapRichTextStyle","wrapInlineValueRichText","leftHasMarker","wrapInlineNameHTML","valueList","paddingStr","alignCSS","wrapInlineValueHTML","buildTooltipMarkup","builder","encodedContent","topGap","retrieveVisualColorForTooltipMarker","series","getData","getItemVisual","visualDrawType","convertToColorString","getPaddingFromTooltipModel","model","get","TooltipMarkupStyleCreator","this","richTextStyles","_nextStyleNameId","getRandomIdBase","prototype","_generateStyleName","colorStr","markerId","marker","getTooltipMarker","isString","content","text","finalStl","stl","styleName","defaultSeriesFormatTooltip","opt","inlineValue","inlineValueType","multipleSeries","data","tooltipDims","mapDimensionsAll","tooltipDimLen","getRawValue","isValueArr","formatArrResult","isValueMultipleLine","reduce","dimItem","getDimensionInfo","tooltip","displayName","inlineValues","inlineValueTypes","setEachItem","dim","dimInfo","otherDims","retrieveRawValue","formatTooltipArrayValue","seriesNameSpecified","isNameSpecified","seriesName","itemName","getName","inlineName","trim","concat","PI","Math","AxisBuilder","axisModel","group","graphic.Group","defaults","labelOffset","nameDirection","tickDirection","labelDirection","silent","handleAutoShown","transformGroup","x","position","y","rotation","updateTransform","_transformGroup","hasBuilder","builders","add","getGroup","innerTextLayout","axisRotation","textRotation","direction","textAlign","textVerticalAlign","rotationDiff","remRadian","isRadianAroundZero","makeAxisEventDataBase","eventData","componentType","mainType","componentIndex","isLabelSilent","tooltipOpt","show","axisLine","shown","extent","axis","getExtent","matrix","transform","pt1","pt2","inverse","v2ApplyTransform","lineStyle","lineCap","getModel","getLineStyle","line","graphic.Line","shape","x1","y1","x2","y2","strokeContainThreshold","z2","graphic.subPixelOptimizeLine","lineWidth","anid","arrows","arrowSize","isNumber","arrowOffset","normalizeSymbolOffset","symbolWidth_1","symbolHeight_1","rotate","offset","r","sqrt","point","index","symbol","createSymbol","stroke","pt","attr","cos","sin","axisTickLabel","ticksEls","tickModel","scale","isBlank","lineStyleModel","tickEndCoord","createTicks","getTicksCoords","i","buildAxisMajorTicks","labelEls","retrieve","axisLabelShow","labelModel","labelMargin","labels","getViewLabels","labelRotation","labelRotate","labelLayout","rawCategoryData","getCategories","triggerEvent","labelItem","tickValue","getRawOrdinalNumber","formattedLabel","rawLabel","itemLabelModel","rawCategoryItem","isObject","Model","ecModel","textColor","getTextColor","tickCoord","dataToCoord","getShallow","alignMin","retrieve2","alignMax","verticalAlign","verticalAlignMin","verticalAlignMax","textEl","graphic.Text","level","createTextStyle","isFunction","graphic.setTooltipConfig","el","componentModel","formatterParamsExtra","isTruncated","tickIndex","targetType","getECData","decomposeTransform","buildAxisLabel","tickEls","shouldShowAllLabels","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","fixMinMaxLabelShow","minorTickModel","minorTicksCoords","getMinorTicksCoords","minorTickLineStyle","minorTicksEls","k","buildAxisMinorTicks","labelList","prepareLayoutList","label","priority","defaultAttr","ignore","hideOverlap","axisName","axisNameAvailableWidth","nameLocation","textStyleModel","gap","gapSignal","pos","isNameLocationCenter","nameRotation","textPosition","textRotate","onLeft","endTextLayout","abs","isFinite","textFont","getFont","truncateOpt","ellipsis","maxWidth","nameTruncateMaxWidth","font","overflow","width","__fullText","current","next","firstRect","getBoundingRect","clone","nextRect","mRotationBack","matrixUtil.identity","matrixUtil.rotate","applyTransform","matrixUtil.mul","getLocalTransform","intersect","ticksCoords","tickTransform","tickLineStyle","anidPrefix","coord","tickEl","autoBatch","collect","api","result","axesInfo","seriesInvolved","coordSysAxesInfo","coordSysMap","globalTooltipModel","getComponent","globalAxisPointerModel","linksOption","linkGroups","getCoordinateSystems","coordSys","axisPointerEnabled","coordSysKey","makeKey","axesInfoInCoordSys","baseTooltipModel","getAxes","curry","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","triggerTooltip","axisPointerModel","axisPointerShow","isHandleTrigger","tooltipAxisPointerModel","volatileOption","field","snap","labelOption","tooltipAxisPointerLabelShow","crossStyle","makeAxisPointerModel","triggerEmphasis","axisKey","involveSeries","axisInfo","key","useHandle","seriesModels","linkGroup","groupIndex","linkOption","checkPropInLink","id","getLinkGroupIndex","mapper","collectAxesInfo","eachSeries","seriesModel","coordinateSystem","seriesTooltipTrigger","seriesTooltipShow","getAxis","seriesDataCount","count","collectSeriesInfo","linkPropValue","axisPropValue","indexOf","getAxisInfo","axisPointerClazz","AxisView","_super","_this","apply","arguments","__extends","render","payload","axisPointerClass","status","parse","axisPointerModelHelper.fixValue","_doUpdateAxisPointerClass","updateAxisPointer","remove","axisPointer","_axisPointer","dispose","_disposeAxisPointer","forceRender","Clazz","getAxisPointerClass","axisPointerModelHelper.getAxisPointerModel","registerAxisPointerClass","clazz","ComponentView","inner","makeInner","rectCoordAxisBuildSplitArea","axisView","axisGroup","gridModel","splitAreaModel","areaStyleModel","areaColors","gridRect","getRect","clamp","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","zrUtil.createHashMap","colorIndex","cIndex","prev","toGlobalCoord","areaStyle","getAreaStyle","zrUtil.isArray","height","isHorizontal","set","graphic.Rect","zrUtil.defaults","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","removeAll","oldAxisGroup","_axisGroup","getCoordSysModel","layout","cartesianAxisHelper.layout","axisBuilder","zrUtil.extend","elementType","cartesians","getCartesians","isIntervalOrLogScale","getOtherAxis","zrUtil.each","axisElementBuilders","isInitSort","graphic.groupTransition","call","splitLine","splitLineModel","lineColors","showMinLine","showMaxLine","lineCount","p1","p2","minorSplitLine","splitArea","CartesianXAxisView","CartesianYAxisView","GridView","Rect","getItemStyle","extraOption","install","registers","registerComponentView","registerComponentModel","GridModel","registerCoordinateSystem","Grid","axisModelCreator","CartesianAxisModel","registerPreprocessor","xAxis","yAxis","grid","RadarView","radarModel","_buildAxes","_buildSplitLineAndArea","radar","indicatorAxes","getIndicatorAxes","axisBuilders","zrUtil.map","indicatorAxis","cx","cy","angle","showSplitLine","showSplitArea","splitLineColors","splitLineColorsArr","splitAreaColorsArr","splitLines","splitAreas","ticksRadius","getColorIndex","graphic.Circle","graphic.Ring","r0","realSplitNumber_1","axesTicksPoints","min","coordToPoint","prevPoints","points","j","graphic.Polyline","graphic.Polygon","graphic.mergePath","areaOrLine","areaOrLineColorList","Radar","RadarModel","registerVisual","seriesType","reset","setItemVisual","setVisual","ATTR","isTaken","zr","resourceKey","getStore","echarts.registerAction","event","update","noop","RoamController","_zr","mousedownHandler","bind","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","enable","controlType","disable","_opt","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","on","off","isDragging","_dragging","isPinching","_pinching","setPointerChecker","pointerChecker","e","eventTool.isMiddleOrRightButtonOnMouseUpDown","target","draggable","__hostTarget","parent","offsetX","offsetY","_x","_y","isAvailableBehavior","gestureEvent","interactionMutex.isTaken","oldX","oldY","dx","dy","eventTool.stop","trigger","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","originX","originY","factor","checkPointerAndTrigger","absDelta","scrollDelta","pinchScale","pinchX","pinchY","Eventful","controller","eventName","behaviorToCheck","contollerEvent","settings","setting","updateViewOnPan","controllerHost","dirty","updateViewOnZoom","zoomDelta","zoomX","zoomY","zoomLimit","newZoom","zoom","zoomMin","zoomMax","max","Infinity","zoomScale","scaleX","scaleY","IRRELEVANT_EXCLUDES","brush","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","hasOwnProperty","OPTION_STYLE_ENABLED_TAGS","OPTION_STYLE_ENABLED_TAG_MAP","STATE_TRIGGER_TAG_MAP","LABEL_HOST_MAP","mapLabelRaw","getFixedItemStyle","itemStyle","areaColor","fixLineStyle","styleHost","MapDraw","uid","getUID","_controller","getZr","_controllerHost","_regionsGroup","_svgGroup","draw","mapOrGeoModel","fromView","isGeo","eachComponent","subType","mapSeries","getHostGeoModel","geo","regionsGroup","transformInfo","getTransformInfo","transformInfoRaw","raw","transformInfoRoam","roam","childAt","graphic.updateProps","isVisualEncodedByVisualMap","getVisual","viewBuildCtx","resourceType","_buildGeoJSON","_buildSVG","_updateController","_updateMapSelectHandler","regionsGroupByName","_regionsGroupByName","regionsInfoByName","projection","projectionStream","stream","transformPoint","project","transformPolygonPoints","inPoints","outPoints","newPt","getPolyShape","regions","region","regionName","regionGroup","dataIdx","regionModel","indexOfName","getRegionModel","getItemModel","polygonSubpaths","polylineSubpaths","geometries","geometry","polys","exterior","interiors","projectPolys","poly","centerPt","getCenter","createCompoundPath","subpaths","isLine","compoundPath","graphic.CompoundPath","culling","segmentIgnoreThreshold","paths","applyOptionStyleForRegion","resetLabelForRegion","states","resetEventTriggerForRegion","resetTooltipForRegion","resetStateTriggerForRegion","mapName","_svgResourceChanged","_freeSVG","_useSVG","svgDispatcherMap","_svgDispatcherMap","focusSelf","_svgGraphicRecord","named","namedItem","svgNodeTagLower","Displayable","z2EmphasisLift","namedFrom","_enableBlurEntireSVG","opacity_1","opacity","root","traverse","isGroup","setDefaultStateProxy","ensureState","findHighDownDispatchers","geoModel","_svgMapName","resource","geoSourceManager","getGeoResource","svgGraphic","useGraphic","freeGraphic","getZoom","makeActionBase","action","_mouseDownFlag","roamHelper.updateViewOnPan","dispatchAction","animation","duration","roamHelper.updateViewOnZoom","totalZoom","containPoint","resetForLabelLayout","getTextContent","mapDraw","normalStyleModel","emphasisStyleModel","blurStyleModel","selectStyleModel","normalStyle","emphasisStyle","selectStyle","blurStyle","decal","createOrUpdatePatternFromDecal","setStyle","strokeNoScale","labelXY","isDataNaN","isNaN","mapDimension","itemLayout","getItemLayout","showLabel","query","labelFetcher","specifiedTextOpt","normal","setLabelStyle","getLabelStatesModels","labelDataIndex","defaultText","textConfig","rect","layoutRect","disableLabelAnimation","removeTextContent","removeTextConfig","eventTrigger","setItemGraphicEl","geoIndex","itemTooltipOption","highDownSilentOnTouch","emphasisModel","focus","toggleHoverEmphasis","enableComponentHighDownFeatures","rings","createStream","curPoly","polygons","startPolygon","endPolygon","polygonStart","polygonEnd","lineStart","lineEnd","sphere","ring","GeoView","focusBlurEnabled","init","_api","_model","_mapDraw","_handleRegionClick","updateSelectStatus","findEventDispatcher","geoId","node","isSelected","enterSelect","leaveSelect","registerMap","geoJson","specialAreas","makeAction","method","actionInfo","registerAction","selected","allSelected","names","v","geoCreator","GeoModel","registerImpl","getMapForUser","res","updateCenterAndZoom","setCenter","center","setZoom","seriesGroup","ParallelView","parallelModel","_handlers","handlers","handler","createOrUpdate","clear","_throttledDispatchExpand","_dispatchExpand","mousedown","checkTrigger","_mouseDownPoint","mouseup","mouseDownPoint","pow","getSlidedAxisExpandWindow","behavior","axisExpandWindow","mousemove","debounceNextCall","view","triggerOn","sliderMove","delta","handleEnds","handleIndex","minSpan","maxSpan","extentSpan","restrict","handleSpan","originalDistSign","getSpanSign","currDistSign","extentMinSpan","realExtent","sign","span","dist","BRUSH_PANEL_GLOBAL","mathMin","mathMax","mathPow","MUTEX_RESOURCE_KEY","DIRECTION_MAP","w","n","s","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","brushStyle","transformable","brushMode","removeOnClick","baseUID","BrushController","_track","_covers","_uid","pointerHandlers","enableBrush","brushOption","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","userKey","interactionMutex.take","_brushOption","merge","store","interactionMutex.release","setPanels","panelOpts","panels_1","_panels","panelId","mount","enableGlobalPan","thisGroup","_transform","updateCovers","coverConfigList","coverConfig","oldCovers","newCovers","creatingCover","_creatingCover","DataDiffer","cover","getKey","__brushOption","addOrUpdate","oldIndex","execute","newIndex","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","range","z","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","pn","isTargetByCursor","getPanelByCover","covers","originalLength","areas","isEnd","getTrackEnds","track","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","cursor","drift","driftRect","ondragend","nameSequence","invisible","updateBaseRect","localRange","handleSize","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","useStyle","childOfName","globalDir","getGlobalDirection1","localDirNameSeq","getGlobalDirection2","h","xmin","ymin","xmax","ymax","setShape","clipByPanel","formatRectRange","localDirName","dir","graphic.transformDirection","graphic.getTransform","getTransform","left","right","top","bottom","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","localD","transformCoordToLocal","localZero","clipPath","preventDefault","rawE","mainShapeContain","contain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","shouldShowCover","determineBrushType","getCreatingRange","defaultBrushType","handleDragEnd","getWidth","getHeight","isOutsideZrArea","currPanel","setCursorStyle","resetCursor","lineX","getLineRenderer","lineY","returnInput","localTrack","ends","polygon","xyIndex","otherExtent","getLinearBrushOtherExtent","makeRectPanelClipPath","normalizeRect","localPoints","graphicUtil.clipPointsByRect","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","boundingRect","BoundingRect","create","elementList","ParallelAxisView","_brushController","zrUtil.bind","_onBrush","findComponents","fromAxisAreaSelect","coordSysModel","areaSelectStyle","getAreaSelectStyle","areaWidth","axisLayout","getAxisLayout","builderOpt","_refreshBrushController","extentLen","extra","graphic.BoundingRect","brushHelper.makeRectPanelClipPath","brushHelper.makeRectIsTargetByCursor","brushHelper.makeLinearBrushOtherExtent","activeIntervals","interval","getCoverInfoList","eventParam","coverInfoList","intervals","coverInfo","coordToData","realtime","parallelAxisId","defaultAxisOption","borderWidth","borderColor","ParallelModel","parallelCoordSysCreator","parallelPreprocessor","ParallelAxisModel","parallelAxisModel","setActiveIntervals","setAxisExpand","installParallelActions","zrUtil.clone","BaseAxisPointer","animationThreshold","_axisModel","_axisPointerModel","_lastValue","_lastStatus","_group","handle","_handle","hide","elOption","makeElOption","graphicKey","_lastGraphicKey","moveAnimation","_moveAnimation","determineAnimation","doUpdateProps","zrUtil.curry","updateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","updateMandatoryProps","_renderHandle","isCategoryAxis","useSnap","getBandWidth","axisPointerModelHelper.getAxisInfo","axisExtent","pointerOption","pointer","pointerEl","graphic","labelEl","updateLabelShowHide","updateHandleTransform","isInit","handleModel","graphic.createIcon","onmousemove","onmousedown","_onHandleDragMove","_onHandleDragEnd","throttleUtil.createOrUpdate","_moveHandleToValue","getHandleTransProps","getHandleTransform","trans","_payloadInfo","stopAnimation","lastProp","_doDispatchAxisPointer","payloadInfo","cursorPoint","tooltipOption","axisDim","axisIndex","throttleUtil.clear","doClear","buildLabel","xy","wh","xDimIndex","animationModel","props","propsEqual","lastProps","newProps","zrUtil.isObject","equals_1","item","zlevel","buildElStyle","axisPointerType","styleModel","buildLabelElOption","labelPos","getValueLabel","precision","formatter","paddings","formatUtil.normalizeCssArray","textRect","textContain.getBoundingRect","viewWidth","viewHeight","confineInContainer","bgColor","backgroundColor","seriesDataIndices","getLabel","params_1","axisHelper.getAxisRawValue","axisDimension","seriesData","idxItem","getSeriesByIndex","seriesIndex","dataIndexInside","dataParams","getDataParams","zrUtil.isString","replace","zrUtil.isFunction","getTransformedPosition","layoutInfo","matrix.create","matrix.rotate","matrix.translate","graphic.applyTransform","buildCartesianSingleLabelElOption","textLayout","makeLineShape","makeRectShape","makeSectorShape","startAngle","endAngle","clockwise","CartesianAxisPointer","getCartesian","getGlobalExtent","pixelValue","elStyle","viewHelper.buildElStyle","pointerShapeBuilder","viewHelper.buildCartesianSingleLabelElOption","labelInside","viewHelper.getTransformedPosition","dimIndex","currPosition","cursorOtherValue","subPixelOptimize","viewHelper.makeLineShape","getAxisDimIndex","shadow","bandWidth","viewHelper.makeRectShape","AxisPointerModel","defaultOption","link","animationDurationUpdate","shadowStyle","margin","borderRadius","icon","size","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","throttle","ComponentModel","register","env","records","initialized","useHandler","eventType","cb","dis","pendings","showTip","hideTip","pendingList","makeDispatchAction","record","actuallyPayload","showLen","hideLen","dispatchTooltipFinally","doEnter","onLeave","initGlobalListeners","currTrigger","unregister","AxisPointerView","globalListener.register","globalListener.unregister","findPointFromSeries","finder","modelUtil.queryDataIndex","getItemGraphicEl","getTooltipPosition","dataToPoint","isStacked","baseAxis","getBaseAxis","valueAxisDim","baseAxisDim","baseDataOffset","baseDim","stackedData","getCalculationInfo","getValues","dimensions","axisTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","list","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","pointToData","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","outputAxesInfo","valItem","payloadBatch","updateModelActually","sampleItem","dataByAxis","escapeConnect","dispatchTooltipActually","highDownKey","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","notBlur","batch","dispatchHighDownActually","newValue","noSnap","outputFinder","containData","snapToValue","minDist","Number","MAX_VALUE","minDiff","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","nestestValue","indicesOfNearest","diff","getRawIndex","buildPayloadsBySeries","modelHelper.makeKey","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","axisType","axisId","valueLabelOpt","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","use","installSimple","installAxisPointer","PolarAxisPointer","polar","coordValue","axisAngle","getAngleAxis","radiusExtent","getRadiusAxis","getLabelPosition","viewHelper.buildLabelElOption","radian","viewHelper.makeSectorShape","getAxisLineShape","rExtent","start","end","getRadiusIdx","fixAngleOverlap","firstItem","lastItem","pop","AngleAxisView","angleAxisModel","angleAxis","ticksAngles","minorTickAngles","angelAxisElementsBuilders","RADIAN","angleExtent","rId","r0Id","shapeType","axisTick","tickLen","radius","lines","tickAngleItem","minorTick","tickAngles","axisLabel","commonLabelModel","p","labelTextAlign","labelTextVerticalAlign","Array","prevAngle","r1","len","graphic.Sector","RadiusAxisView","radiusAxisModel","newAxisGroup","radiusAxis","layoutAxis","prevRadius","angleAxisExtraOption","splitNumber","radiusAxisExtraOption","PolarView","polarCreator","PolarModel","AngleAxisModel","RadiusAxisModel","registerLayout","barLayoutPolar","SingleAxisView","singleAxisHelper.layout","XY","WH","SingleAxisPointer","getPointDimIndex","SingleView","SingleAxisModel","singleCreator","CalendarView","calendarModel","rangeData","getRangeInfo","orient","getOrient","localeModel","getLocaleModel","_renderDayRect","_renderLines","_renderYearText","_renderMonthText","_renderWeekText","itemRectStyleModel","getCellWidth","sh","getCellHeight","time","getNextNDay","dataToRect","tl","self","_tlpoints","_blpoints","_firstDayOfMonth","_firstDayPoints","firstDay","addPoints","formatedDate","getDateInfo","m","date","setMonth","getMonth","_getLinePointsOfOneWeek","_drawSplitline","_getEdgesPoints","rs","poyline","parsedDate","tmpD","day","_formatterLabel","params","formatTplSimple","nameMap","_yearTextPositionControl","aligns","yearLabel","xc","yc","posPoints","yearText","_monthTextPositionControl","isCenter","vAlign","monthLabel","termPoints","labelSilent","tmp","firstDayPoints","name_1","yyyy","yy","MM","M","monthText","_weekTextPositionControl","cellSize","isStart","dayLabel","firstDayOfWeek","getFirstDayOfWeek","lweek","parsePercent","fweek","weekText","CalendarModel","Calendar","isSetLoc","obj","isSet","prop","TRANSITION_PROPS_TO_COPY","ROOT_TRANSITION_PROPS_TO_COPY","copyTransitionInfo","source","targetProp","GraphicComponentModel","preventAutoZ","mergeOption","elements","optionUpdated","newOption","thisOption","newList","existList","flattenedList","_flatten","mappingResult","modelUtil.mappingToExists","elOptionsToUpdate","_elOptionsToUpdate","resultItem","newElOption","existElOption","existing","keyInfo","parentId","newElParentOption","parentOption","setKeyInfoToNewElOption","newElOptCopy","$action","zrUtil.merge","mergeLayoutParam","ignoreSize","copyLayoutParams","mergeNewElOptionToExist","existItem","hv","existingGroupOpt","newGroupOpt","setLayoutInfoToExist","zrUtil.filter","optionList","children","useElOptionsToUpdate","els","nonShapeGraphicElements","path","graphicUtil.Group","image","graphicUtil.Image","graphicUtil.Text","modelUtil.makeInner","GraphicComponentView","_elMap","graphicModel","_lastGraphicModel","_clear","_updateElements","_relocate","elMap","rootGroup","globalZ","globalZLevel","modelUtil.convertOptionIdName","elExisting","targetElParent","elType","elOptionStyle","textBaseline","textContentOption","textContent","isEC4CompatibleStyle","convertResult","convertFromEC4CompatibleStyle","elOptionCleaned","layoutUtil.LOCATION_PARAMS","getCleanedElOption","isMerge","isReplace","el_1","createEl","isNew","stopPreviousKeyframeAnimationAndRestore","applyUpdateTransition","updateCommonAttrs","removeEl","el_2","updateLeaveTo","textContentExisting","setTextContent","clipPathOption","clipPathType","oldClipPath","getClipPath","newEl","setClipPath","applyKeyframeAnimation","keyframeAnimation","elInner","setTextConfig","info","setEventData","graphicUtil.setTooltipConfig","elOptions","apiWidth","apiHeight","isParentRoot","parentEl","parentElInner","containerInfo","layoutPos","layouted","layoutUtil.positionElement","boundingMode","bounding","transition","animatePos","isTransitionAll","zrUtil.indexOf","graphicType","zrUtil.hasOwn","graphicUtil.getShapeClass","applyLeaveTransition","removeKey","defaultZ","defaultZlevel","zrUtil.retrieve2","zrUtil.keys","graphicOption","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","getAxisMainType","findEffectedDataZooms","foundNewLink","axisRecords","createHashMap","effectedModels","effectedModelMap","dataZoomModel","addToEffected","processSingle","isLink","eachTargetAxis","axisIdxArr","isLinked","dataZoom","collectReferCoordSysModelInfo","coordSysInfoWrap","infoList","infoMap","coordSysUid","coordSysInfo","axisModels","DataZoomAxisInfo","indexList","indexMap","axisCmptIdx","DataZoomModel","_autoThrottle","_noTarget","_rangePropMode","parentModel","inputRawOption","retrieveRawOption","settledOption","mergeDefaultAndTheme","_doInit","_setDefaultThrottle","_updateRangeUse","_resetTarget","optionOrient","targetAxisIndexMap","_targetAxisInfoMap","_fillSpecifiedTargetAxis","_orient","_makeAutoOrientByTargetAxis","_fillAutoTargetAxisByOrient","hasAxisSpecified","refering","getReferringComponents","MULTIPLE_REFERRING","specified","models","needAuto","setParallelAxis","filter","gridModel_1","SINGLE_REFERRING","axModel","globalOption","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","noTarget","getFirstTargetAxisModel","firstAxisModel","callback","context","getAxisProxy","getAxisModel","__dzAxisProxy","setRawRange","setCalculatedRange","getPercentRange","axisProxy","findRepresentativeAxisProxy","getDataPercentWindow","getValueRange","getDataValueWindow","firstProxy","axisDimList","keys","proxy","hostedBy","getRangePropMode","dependencies","filterMode","ret","SelectDataZoomModel","DataZoomView","SelectDataZoomView","asc","numberUtil.asc","AxisProxy","dimName","_dimName","_axisIndex","_dataZoomModel","_valueWindow","_percentWindow","getTargetSeriesModels","coordType","isCoordSupported","axisMainType","getMinMaxSpan","_minMaxSpan","calculateDataWindow","hasPropModeValue","dataExtent","_dataExtent","percentExtent","percentWindow","valueWindow","boundPercent","boundValue","numberUtil.linearMap","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","targetSeries","unionAxisExtentFromData","rawExtentResult","ensureScaleRawExtentInfo","calculate","calculateDataExtent","_updateMinMaxSpan","dataWindow","_setAxisModel","filterData","dataDims","store_1","dataDimIndices_1","getDimensionIndex","filterSelf","leftOut","rightOut","hasValue","thisHasValue","thisLeftOut","thisRightOut","setData","isInWindow","NaN","selectRange","setApproximateExtent","minMaxSpan","minMax","percentSpan","valueSpan","numberUtil.getPixelPrecision","rawExtentInfo","setDeterminedMinMax","toFixed","freeze","dataZoomProcessor","getTargetSeries","eachAxisModel","proxyList","seriesModelMap","overallReset","percentRange","valueRange","startValue","endValue","installed","installCommon","FILTER","installDataZoomAction","registerSubTypeDefaulter","SelectZoomModel","SelectZoomView","ToolboxFeature","features","registerFeature","ctor","getFeature","ToolboxModel","feature","featureOpt","featureName","Feature","featureManager.getFeature","getDefaultOption","layoutMode","itemSize","itemGap","showTitle","iconStyle","emphasis","makeBackground","ToolboxView","toolboxModel","isVertical","featureOpts","_features","featureNames","_featureNames","processFeature","boxLayoutParams","getBoxLayoutParams","viewportSize","getLayoutRect","layoutBox","positionElement","listComponentHelper.layout","listComponentHelper.makeBackground","eachChild","titleText","__title","emphasisState","emphasisTextConfig","emphasisTextState","emphasisTextStyle","ZRText","makeFont","needPutOnTop","topOffset","oldName","featureModel","newTitle","title","isUserFeatureName","onclick","isToolboxFeature","unusable","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","iconPaths","iconStr","iconName","fontStyle","fontFamily","hoverStyle","defaultTextPosition","enterEmphasis","leaveEmphasis","createIconPaths","setIconStatus","iconStatus","updateView","SaveAsImage","isSvg","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","browser","MouseEvent","newEdge","ie","edge","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","document","createElement","body","appendChild","cw","contentWindow","doc","open","write","close","execCommand","removeChild","lang","tab","$a","download","href","evt","defaultView","bubbles","cancelable","dispatchEvent","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","bar","stack","seriesOptGenreator","radio","seriesId","newSeriesOpt","categoryAxis","getAxesByScale","boundaryGap","currentType","tiled","markPoint","markLine","isStack","BLOCK_SPLITER","ITEM_SPLITER","str","itemSplitRegex","RegExp","parseContents","blockMetaList","block","isTSVFormat","tsv","tsvLines","headers","shift","categories","items","parseTSVContents","blockMeta","hasName","parseListContents","DataView","setTimeout","container","getDom","_dom","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","groups","tables","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","valueAxis","other","groupSeries","columns","rawData","getRawData","mapArray","vals","argLen","getContentFromModel","htmlOrDom","getOption","zrUtil.isDom","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","addEventListener","Error","clientHeight","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","getStoreSnapshots","snapshots","RestoreOption","history.clear","from","resetOption","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","include","setOutputRanges","matchOutputRanges","area","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","xyMinMax","targetInfo","findTargetInfo","coordSyses","setInputRanges","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","sizeOrigin","scales","rangeOffset","getSize","makePanelOpts","getDefaultBrushType","getPanelRect","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","modelUtilParseFinder","includeMainTypes","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","cartesian","panelRectBuilders","xAxisDeclared","yAxisDeclared","geoModels","xAxisModel","yAxisModel","master","axisConvert","to","rangeOrCoordRange","xminymin","xmaxymax","axisNameIndex","toLocalCoord","axisDiffProcessor","refer","DATA_ZOOM_ID_BASE","makeInternalComponentId","DataZoomFeature","zoomActive","_isZoomActive","dataZoomSelectActive","brushTargetManager","makeAxisFinder","updateZoomBtnStatus","history.count","updateBackBtnStatus","snapshot","setBatch","newSnapshot","storedSnapshots","dataZoomId","queryComponents","history.push","_dispatchZoomAction","found","dzModel","findDataZoom","minValueSpan","maxValueSpan","back","nextActive","head","history.pop","dzFeatureModel","xAxisIndex","yAxisIndex","xAxisId","yAxisId","DataZoom","Restore","installDataZoomSelect","registerInternalOptionCreator","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","$fromToolbox","TooltipModel","showContent","alwaysShowContent","displayMode","confine","showDelay","hideDelay","transitionDuration","enterable","extraCssText","animationEasingUpdate","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","domSupported","documentElement","TRANSFORM_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","toCamelCase","toLowerCase","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","transform3dSupported","assembleTransform","toString","x0","y0","transformSupported","is3d","translate","assembleCssText","enableTransition","onlyFade","boxShadow","transitionCurve","transitionOption","transitionText","assembleTransition","borderName","camelCase","round","assembleFont","normalizeCssArray","makeStyleCoord","out","zrX","zrY","zrPainter","zrViewportRoot","getViewportRoot","transformLocalCoord","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","TooltipHTMLContent","_show","_styleCoord","_enterable","_alwaysShowContent","_firstShow","_longHide","wxa","domBelongToZr","appendTo","querySelector","isDom","_container","onmouseenter","clearTimeout","_hideTimeout","_inContent","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","currentStyle","getComputedStyle","domStyle","_moveIfResized","className","nearPointColor","_longHideTimeout","styleCoord","display","setContent","markers","arrowPosition","arrow","rotateDeg","arrowPos","positionStyle","transformStyle","rotateRadian","arrowWH","rotatedWH","borderStyle","SQRT2","assembleArrow","parentNode","childNodes","arrowEl","setEnterable","offsetWidth","offsetHeight","moveTo","style_1","transforms","ratioX","ratioY","visibility","willChange","isShow","TooltipRichContent","throwError","rich","textShadowColor","propName","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","markRedraw","proxyRect","TooltipView","_renderMode","getTooltipRenderMode","_tooltipContent","_tooltipModel","_ecModel","tooltipContent","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","self_1","_refreshUpdateTimeout","isDisposed","manuallyShowTip","_lastDataByCoordSys","_ticket","cmptRef","queryOptionMap","preParseFinder","componentMainType","queryResult","queryReferringComponents","useDefault","enableAll","enableNone","getViewOfComponentModel","subEl","tooltipConfig","findComponentReference","positionDefault","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","buildTooltipModel","_showAxisTooltip","seriesDispatcher_1","cmptDispatcher_1","ssrType","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","singleTooltipModel","cbParamsList","articleMarkup","markupTextArrLegacy","itemCoordSys","axisItem","axisValue","axisValueLabel","axisPointerViewHelper.getValueLabel","axisSectionMarkup","cbParams","seriesTooltipResult","normalizeTooltipFormatResult","formatTooltip","positionExpr","builtMarkupText","unshift","blockBreak","allMarkupText","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","dispatcher","ecData","dataModel","dataType","tooltipTrigger","markupText","asyncTicket","isHTMLRenderMode","encodeHTMLContent","tooltipModelCascade","cmpt","subTooltipModel","defaultHtml","formatterParams","_getNearestPoint","params0","timeFormat","formatTpl","cbTicket","tooltipDataParams","contentSize","viewSize","boxLayoutPosition","domWidth","domHeight","ceil","rectWidth","rectHeight","calcTooltipPosition","gapH","gapV","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","_cbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisDataByAxis","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","newIdxItem","seriesIdx","lastCbParams","modelCascade","defaultTooltipOption","resultModel","DEFAULT_TOOLBOX_BTNS","brushPreprocessor","brushComponents","normalizeToArray","brushComponentSpecifiedBtns","brushOpt","tbs","toolbox","arr","toolboxFeature","toolboxBrush","brushTypes","flag","selector","getLineSelectors","selectors","polygonContain.contain","linePolygonIntersect","inLineRange","layoutRange","STATE_LIST","DISPATCH_METHOD","DISPATCH_FLAG","layoutCovers","brushModel","brushVisual","throttleType","throttleDelay","brushSelected","setBrushOption","brushIndex","thisBrushSelected","brushId","brushName","brushLink","linkedSeriesMap","selectedDataIndexForLink","rangeInfoBySeries","hasBrushExists","boundingRectBuilders","selectableArea","makeBrushCommonSelectorForSeries","visualMappings","visualSolution.createVisualMappings","mappingOption","mappingMethod","linkOthers","brushed","rangeInfoList","hasAxisBrushed","eachActiveState","activeState","stepAParallel","brushSelector","seriesIndices","brushModelNotControll","data_1","checkInRange","stepAOthers","seriesBrushSelected","getValueState","visualSolution.applyVisual","doDispatch","fn","getBoundingRectFromMinMax","rg","BrushView","updateVisual","$from","modelId","BrushModel","visualSolution.replaceVisualOption","inBrush","outOfBrush","liftZ","setAreas","generateBrushOption","ICON_TYPES","BrushFeature","isBrushed","_brushMode","command","keep","VISUAL","BRUSH","TitleModel","subtext","subtarget","subtextStyle","TitleView","titleModel","subtextStyleModel","disableBox","subText","subTextEl","sublink","windowOpen","groupRect","layoutOption","alignStyle","TimelineModel","_initData","setCurrentIndex","currentIndex","_data","loop","getCurrentIndex","isIndexMax","setPlayState","state","autoPlay","getPlayState","processedDataArr","dataArr","_names","newItem","convertOptionIdName","getDataItemValue","dimType","category","SeriesData","initData","controlPosition","rewind","playInterval","SliderTimelineModel","inheritDefaultOption","symbolSize","checkpointStyle","animationDuration","animationEasing","controlStyle","showPlayBtn","showPrevBtn","showNextBtn","playIcon","stopIcon","nextIcon","prevIcon","prevBtnSize","nextBtnSize","progress","mixin","DataFormatMixin","TimelineView","TimelineAxis","coordExtent","getLabelModel","Axis","labelDataIndexStore","SliderTimelineView","timelineModel","layoutInfo_1","_layout","mainGroup_1","_createGroup","labelGroup","axis_1","_axis","_createAxis","_renderAxisLabel","_position","_doPlayStop","_updateTicksStatus","_clearTimer","parsedLabelPos","playPosition","prevBtnPosition","nextBtnPosition","labelPosOpt","viewRect","layout.getLayoutRect","getViewRect","labelAlignMap","horizontal","vertical","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","xLeft","xRight","labelAlign","labelBaseline","mainGroup","_mainGroup","_labelGroup","rotateOriginX","rotateOriginY","viewBound","getBound","mainBound","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","fromPos","dimIdx","boundIdx","setPosition","OrdinalScale","ordinalMeta","TimeScale","locale","IntervalScale","createScaleByModel","getTicks","getDataExtent","setExtent","calcNiceTicks","newGroup","_renderAxisLine","progressLine","_progressLine","_currentPointer","_renderAxisTick","ticks","_tickSymbols","tick","itemModel","itemStyleModel","hoverStyleModel","progressStyleModel","symbolOpt","_changeTimeline","giveSymbol","enableHoverEmphasis","_tickLabels","normalLabelModel","hoverLabelModel","progressLabelModel","_renderControl","playState","makeBtn","willRotate","iconSize","btn","objPath","opts","makeControlIcon","rectHover","_handlePlayClick","_renderCurrentPointer","pointerModel","me","onCreate","_handlePointerDrag","_handlePointerDragend","pointerMoveTo","onUpdate","nextState","_pointerChangeTimeline","mousePos","toCoord","_toAxisCoord","targetDataIndex","_findNearestTick","_timer","vertex","axisCoord","d","nextIndex","tickSymbols","tickLabels","toggleState","hostModel","setColor","symbolType","normalizeSymbolSize","symbolOffset","symbolRotate","noAnimation","dragging","animationCfg","easing","animateTo","timelinePreprocessor","timelineOpt","timeline","ec2Types","number","transferItem","has","dataItem","compatibleEC2","itemStyleEmphasis","labelNormal","excludeLabelAttr","replaceMerge","installTimelineAction","preprocessor","checkMarkerInSeries","seriesOpts","seriesOptArr","fillLabel","defaultEmphasis","MarkerModel","createdBySelf","_mergeOption","isAnimationEnabled","hostSeries","__hostSeries","markerOpt","markerModel","createMarkerModelFromSeries","getMarkerModelFromSeries","zrUtil.mixin","MarkPointModel","masterMarkerModel","hasXOrY","parseFloat","markerTypeCalculatorWithExtent","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","calcDataDim","isDimensionStacked","numCalculate","coordArrValue","numberUtil.getPrecision","markerTypeCalculator","average","median","dataTransform","dims","hasXAndY","coordInfo","baseDataDim","valueDataDim","valueIndex","valueDim","getDimension","coordDim","dataDimToCoordDim","dataFilter","createMarkerDimValueGetter","inCoordSys","rawVal","parseDataValue","sum_1","count_1","getMedian","MarkerView","markerGroupMap","renderSeries","markKeep","drawGroup","toggleBlurSeries","seriesModelList","isBlur","eachItemGraphicEl","enterBlur","leaveBlur","updateMarkerLayout","mpData","xPx","numberUtil.parsePercent","yPx","getMarkerPosition","setItemLayout","MarkPointView","markPointModel","mpModel","updateLayout","symbolDrawMap","symbolDraw","SymbolDraw","coordDimsInfos","dataOpt","markerHelper.dataTransform","markerHelper.dataFilter","dimValueGetter","markerHelper.createMarkerDimValueGetter","createData","symbolKeepAspect","rawIdx","getVisualFromData","updateData","child","MarkLineModel","distance","markLineTransform","mlModel","itemArray","mlType","markerHelper.getAxisInfo","markerHelper.numCalculate","getStackedDimension","baseIndex","mlFrom","mlTo","normalizedItem","isInfinity","ifMarkLineHasOnlyDim","fromCoord","otherDimIndex","markLineFilter","updateSingleMarkerEndLayout","isFrom","isCoordinateSystemType","MarkLineView","markLineModel","mlData_1","fromData_1","toData_1","lineDrawMap","lineDraw","LineDraw","mlData","fromData","toData","lineData","optData","hasItemOption","createList","updateDataVisualAndLayout","fromSymbolKeepAspect","fromSymbolOffset","fromSymbolRotate","fromSymbolSize","fromSymbol","toSymbolKeepAspect","toSymbolOffset","toSymbolRotate","toSymbolSize","toSymbol","MarkAreaModel","markAreaTransform","maModel","item0","item1","lt","rb","ltCoord","rbCoord","mergeAll","ifMarkAreaHasOnlyDim","markAreaFilter","item2","containZone","markerHelper.zoneFilter","getSingleMarkerEndPoint","pointValue0","pointValue1","clampPointValue0","clampData","clampPointValue1","pointValue","dimPermutations","MarkAreaView","markAreaModel","areaData_1","areaGroupMap","polygonGroup","areaData","coordDimsInfos_1","floor","xAxisScale","yAxisScale","xAxisExtent","yAxisExtent","xPointExtent","yPointExtent","allClipped","colorUtil.modifyAlpha","newIdx","oldIdx","inheritColor","setStatesStylesFromModel","markArea","LegendModel","_updateSelector","getDefaultSelectorOptions","_updateData","legendData","hasSelected","select","potentialData","availableNames","isPotential","legendVisualProvider","getAllNames","isSeriesFiltered","_availableNames","legendNameMap","zrUtil.isNumber","unSelect","toggleSelected","allSelect","inverseSelect","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","inactiveBorderWidth","borderCap","borderJoin","borderDashOffset","borderMiterLimit","inactiveWidth","cap","dashOffset","miterLimit","selectedMode","selectorLabel","selectorPosition","selectorItemGap","selectorButtonGap","Group","LegendView","newlineDisabled","_contentGroup","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","legendModel","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","maxSize","layoutUtil.getLayoutRect","mainRect","layoutInner","_backgroundEl","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","legendItemModel","g","newline","lineVisualStyle","legendIcon","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","ssr","provider","containName","colorArr","stringify","_createSelector","selectorGroup","selectorItem","labelText","legendId","emphasisLabelModel","itemVisualStyle","drawType","iconRotate","legendIconType","iconType","handleCommonProps","visualStyle","propVal","iconBrushType","lastIndexOf","decalStyle","legendLineModel","visualHasBorder","getLegendStyle","getLegendIcon","symboType","getDefaultLegendIcon","textX","hitRect","__legendDataIndex","layoutUtil.box","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","dataName","isUseHoverLayer","storage","getDisplayList","hoverLayer","legendFilter","legendModels","filterSeries","legendSelectActionHandler","methodName","isAllSelect","selectedMap","actionLegendIndices","makeSelectedMap","allSelectedMap","legendIndex","isItemSelected","SERIES_FILTER","installLegendAction","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","inputPositionParams","getLayoutParams","mergeAndNormalizeLayoutParams","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","ScrollableLegendView","_currentIndex","_containerGroup","_controllerGroup","removeClipPath","__rectSize","controllerGroup","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","processMaxSize","_layoutContentAndController","containerGroup","controllerRect","showController","_showController","containerPos","controllerPos","clipShape","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","canJump","pageText","total","pageCount","containerRectSize","targetItemIndex","_findTargetItemIndex","targetItem","itemCount","pCount","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","itemRect","itemInfo","winStart","legendDataIdx","defaultIndex","installLegendPlain","installScrollableLegendAction","installLegendScroll","InsideZoomModel","disabled","zoomLock","disposeCoordSysRecord","coordSysRecordMap","coordSysRecord","containsPoint","installDataZoomRoamProcessor","apiInner","dataZoomInfoMap","dzReferCoordSysWrap","dzCoordSysInfo","dzInfo","getRange","dzReferCoordSysInfo","createCoordSysRecord","firstDzInfo","firstDzKey","controllerParams","prefix","typePriority","type_true","type_move","type_false","type_undefined","dataZoomInfo","oneType","mergeControllerParams","InsideZoomView","roams.setViewInfoToCoordSysRecord","pan","getRangeHandlers","scrollMove","coordSysKeyArr","dzUid","roams.disposeCoordSysRecordIfNeeded","lastRange","directionInfo","getDirectionInfo","percentPoint","signal","pixelStart","pixelLength","pixel","makeMover","getPercentDelta","oldPoint","newPoint","pointToCoord","singleAxis","SliderZoomModel","dataBackground","selectedDataBackground","fillerColor","handleIcon","handleStyle","moveHandleSize","moveHandleIcon","moveHandleStyle","showDetail","showDataShadow","brushSelect","handleLabel","HORIZONTAL","VERTICAL","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","_displayables","_onBrushEnd","throttle.createOrUpdate","_buildView","_updateView","throttle.clear","_brushing","brushRect","_resetLocation","_resetInterval","barGroup","sliderGroup","_renderBackground","_renderDataShadow","_positionGroup","coordRect","_findCoordRect","ecSize","layoutParams","layout.getLayoutParams","_location","_size","location","targetAxisModel","otherAxisInverse","_dataShadowInfo","_getViewExtent","clickPanel","_onClickPanel","_onBrushStart","_prepareDataShadowInfo","dataShadowSegs","oldSize","_shadowSize","candlestickDim","getShadowDim","otherDim","polygonPts","_shadowPolygonPts","polylinePts","_shadowPolylinePts","_shadowData","_shadowDim","otherDataExtent_1","otherOffset","lastIsEmpty_1","otherShadowExtent_1","thisShadowExtent","areaPoints_1","linePoints_1","step_1","thisCoord_1","stride_1","isEmpty","otherCoord","linearMap","createDataShadowGroup","isSelectedArea","polyline","thisAxis","thisDim","displayables","handles","handleLabels","filler","symbolBuildProxies","getCursor","_onDragMove","_onDragEnd","onmouseover","_showDataInfo","onmouseout","bRect","_handleHeight","_handleWidth","handleColor","handleLabelShow","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandle","moveZoneExpandSize","moveZone","ondragstart","_range","viewExtent","_handleEnds","_updateInterval","viewExtend","nonRealtime","displaybles","handleInterval","handleHeight","segIntervals","segGroup","_updateDataInfo","labelTexts","dataInterval","_formatLabel","orderedHandleEnds","setLabel","barTransform","textPoint","labelFormatter","labelPrecision","getPixelPrecision","valueStr","isEmphasis","normalShow","emphasisShow","toShow","changed","localPoint","_brushStart","graphic.Point","_brushStartTime","Date","brushShape","_updateBrushRect","mouseX","mouseY","brushStart","endPoint","startPoint","coordSysInfoList","installDataZoomInside","installDataZoomSlider","mapVisual","VisualMapping","eachVisual","VisualMapModel","stateList","replacableOptionKeys","dataBound","targetVisuals","controllerVisuals","resetItemSize","completeVisualOption","resetVisual","supplementVisualOption","getItemSymbol","getTargetSeriesIndices","optionSeriesIndex","modelUtil.normalizeToArray","eachTargetSeries","isTargetSeries","is","formatValueText","isCategory","edgeSymbols","isMinMax","textValue","resetExtent","getDataDimensionIndex","optDim","dimension","dimNames","isCalculationCoord","storeDimIndex","inRange","outOfRange","completeSingle","stateExist","stateAbsent","optExist","optAbsent","visualData","visualType","isValidType","defa","visualDefault","symbolExists","symbolSizeExists","defaultSymbol","visuals","max_1","setSelected","getSelected","getVisualMeta","getColorVisual","contentColor","textGap","DEFAULT_BAR_BOUND","ContinuousModel","_resetRange","auto","findTargetDataIndices","oVals","getColorStopValues","iVals","stops","setStop","valueState","iIdx","oIdx","iLen","oLen","first","stopsLen","outerColors","calculable","hoverLink","indicatorIcon","indicatorSize","indicatorStyle","visualMapModel","step","stopValues","VisualMapView","autoPositionValues","doRender","renderBackground","getControllerVisual","targetValue","visualCluster","forceState","visualObj","defaultColor","getter","setter","mappings","visualTypes","prepareVisualTypes","visualMapping","convertOpacityToAlpha","__alphaForOpacity","dependsOn","applyVisual","positionGroup","layout.positionElement","paramsSet","getItemAlign","modelOption","realIndex","reals","fakeValue","layoutInput","rParam","makeHighDownBatch","highlightKey","ContinuousView","_shapes","_dataInterval","_hoverLinkDataIndices","_hoverLinkFromSeriesMouseOver","_hideIndicator","_useHandle","_renderBar","dataRangeText","_renderEndsText","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","endsIndex","_applyTransform","shapes","helper.getItemAlign","_createBarGroup","gradientBarGroup","createPolygon","_dragHandle","getTextRect","textSize","handleThumbs","handleLabelPoints","_createHandle","_createIndicator","onDrift","onDragEnd","handleThumb","strokeFirst","setAsHighDownDispatcher","stateTransition","handleLabelPoint","indicator","ZRImage","pathStyle","indicatorLabel","indicatorLabelPoint","_firstShowIndicator","visualMapId","_hovering","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","sizeExtent","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","barColor","barPoints","_updateHandle","colorStops","_makeColorGradient","symbolSizes","_createBarPoints","LinearGradient","handlesColor","currValue","minimumOffset","_showIndicator","cursorValue","rangeSymbol","halfHoverLinkSize","oldIndicatorPos","indicatorNewProps","labelNewProps","additive","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","HOVER_LINK_SIZE","hoverLinkDataSize","getHalfHoverLinkSize","hoverRange","oldBatch","newBatch","resultBatches","modelUtil.compressBatches","_dispatchHighDown","helper.makeHighDownBatch","currECData","indices","element","global","hoverLinkOnHandle","visualMapActionInfo","visualMapActionHander","visualMapEncodingHandlers","createOnAllSeries","resetDefines","pipelineContext","large","visualSolution.incrementalApplyVisual","visualMetaList","visualMeta","resultVisual","mapping","visualMapPreprocessor","visualMap","pieces","splitList","piece","COMPONENT","PiecewiseModel","_pieceList","mode","_mode","_determineMode","resetMethods","_resetSelected","pieceList","visual","visualTypesInPieces","listVisualTypes","exists","getSelectedMapKey","hasSel_1","getPieceList","findPieceIndex","pieceIndex","getRepresentValue","representValue","pieceInterval","curr","minOpen","maxOpen","itemSymbol","outPieceList","parseInt","splitStep","reformIntervals","cate","normalizeReverse","pieceListItem","close_1","closeList","infinityList","useMinMax","lg","retrieveVisuals","PiecewiseVisualMapView","textFill","_getItemAlign","viewData","_getViewData","endsText","zrUtil.retrieve","viewPieceList","_onItemClick","_enableHoverLink","indexInModelPieceList","_createItemSymbol","visualState","layout.box","onHoverLink","shapeParam","newKey","o","PiecewiseView","installVisualMapContinuous","installVisualMapPiecewise","ariaPreprocessor","aria","enabled","ARIA","ariaVisual","filterTransform","rawItem","upstream","condition","parseConditionalExpression","config","valueGetterAttrMap","prepareGetValue","exprOption","dimLoose","getValue","param","retrieveValueFromItem","resultData","getRawDataItem","sortTransform","errMsg","orderExprList","orderDefList","orderExpr","order","parserName","parser","incomparable","getRawValueParser","comparator","sourceFormat","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","orderDef","val0","val1","registerTransform","DatasetModel","_sourceManager","SourceManager","disableTransformOptionMerge","getSourceManager","seriesLayoutBy","SERIES_LAYOUT_BY_COLUMN","DatasetView"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140]}