import{ak as t,a as e,aj as n,e as i,b as o,al as r,m as a,F as s,am as l,an as u,G as p,l as h,T as c,n as d,ao as g,a3 as f,d as y,a9 as m,i as v,ap as x,aq as _,ar as b,f as M,c as S,w,E as I,x as C,R as T,C as A,as as D,s as k,v as P,H as L,k as O,at as R,au as z,av as V,aw as B,N as E,y as G,B as N,ax as H,J as W,I as Z,ay as F,S as Y,U as X,az as U,Z as K,aA as j,aB as q,aC as $,aD as J,aE as Q,a8 as tt,p as et,Q as nt,af as it,aF as ot,aG as rt,r as at,L as st}from"./echarts-vendor-D7t-5Co9.js";import{D as lt,b5 as ut,b6 as pt,b7 as ht,b8 as ct,r as dt,b9 as gt,ba as ft,aq as yt,bb as mt,v as vt,bc as xt,bd as _t,be as bt,o as Mt,h as St,ai as wt,bf as It,aO as Ct,bg as Tt,m as At,bh as Dt,bi as kt,bj as Pt,bk as Lt,bl as Ot,bm as Rt,bn as zt,bo as Vt,bp as Bt,bq as Et,br as Gt,bs as Nt,u as Ht,ah as Wt,ae as Zt,aN as Ft,q as Yt,n as Xt,t as Ut,bt as Kt,bu as jt,bv as qt,bw as $t,ak as Jt,bx as Qt,by as te,ar as ee,bz as ne,bA as ie,bB as oe,bC as re,bD as ae,bE as se,bF as le,ac as ue,bG as pe,bH as he,bI as ce,bJ as de,bK as ge,F as fe,ab as ye,bL as me,bM as ve,bN as xe,bO as _e,bP as be,bQ as Me,bR as Se,bS as we,bT as Ie,_ as Ce,bU as Te,bV as Ae,bW as De,bX as ke,bY as Pe,bZ as Le,ao as Oe,b3 as Re,b4 as ze,b0 as Ve,b1 as Be,b_ as Ee,b2 as Ge,an as Ne,b$ as He,c0 as We,aQ as Ze,a$ as Fe,c1 as Ye,aM as Xe,Y as Ue,aG as Ke,c2 as je,c3 as qe,c4 as $e,Z as Je,c5 as Qe,j as tn,l as en,aZ as nn,c6 as on,c7 as rn,c8 as an,c9 as sn,aJ as ln,ca as un,cb as pn,cc as hn,cd as cn,ce as dn,cf as gn,am as fn,cg as yn,ch as mn,ci as vn,cj as xn,at as _n,f as bn,b as Mn,O as Sn,ck as wn,cl as In,cm as Cn,cn as Tn,co as An,cp as Dn,x as kn,a7 as Pn,cq as Ln,z as On,cr as Rn,cs as zn,ct as Vn,cu as Bn,K as En,cv as Gn,E as Nn,cw as Hn,cx as Wn,ay as Zn,cy as Fn,av as Yn,cz as Xn,cA as Un,cB as Kn,cC as jn,cD as qn,cE as $n,aI as Jn,cF as Qn,cG as ti,cH as ei,cI as ni}from"./echarts-core-DHH3aYep.js";import{b0 as ii}from"./vendor-CG-KndAb.js";import{S as oi,L as ri}from"./echarts-charts-BwTN3nNH.js";function ai(t){var e=t.lineHeight;return null==e?"line-height:1":"line-height:"+r(e+"")+"px"}function si(t,e){var n=t.color||"#6e7079",i=t.fontSize||12,o=t.fontWeight||"400",a=t.color||"#464646",s=t.fontSize||14,l=t.fontWeight||"900";return"html"===e?{nameStyle:"font-size:"+r(i+"")+"px;color:"+r(n)+";font-weight:"+r(o+""),valueStyle:"font-size:"+r(s+"")+"px;color:"+r(a)+";font-weight:"+r(l+"")}:{nameStyle:{fontSize:i,fill:n,fontWeight:o},valueStyle:{fontSize:s,fill:a,fontWeight:l}}}var li=[0,10,20,30],ui=["","\n","\n\n","\n\n\n"];function pi(t,e){return e.type=t,e}function hi(t){return"section"===t.type}function ci(t){return hi(t)?gi:fi}function di(t){if(hi(t)){var e=0,n=t.blocks.length,o=n>1||n>0&&!t.noHeader;return i(t.blocks,function(t){var n=di(t);n>=e&&(e=n+ +(o&&(!n||hi(t)&&!t.noHeader)))}),e}return 0}function gi(a,s,l,u){var p,h=s.noHeader,c=(p=di(s),{html:li[p],richText:ui[p]}),d=[],g=s.blocks||[];t(!g||e(g)),g=g||[];var f=a.orderMode;if(s.sortBlocks&&f){g=g.slice();var y={valueAsc:"asc",valueDesc:"desc"};if(n(y,f)){var m=new pt(y[f],null);g.sort(function(t,e){return m.evaluate(t.sortParam,e.sortParam)})}else"seriesDesc"===f&&g.reverse()}i(g,function(t,e){var n=s.valueFormatter,i=ci(t)(n?o(o({},a),{valueFormatter:n}):a,t,e>0?c.html:0,u);null!=i&&d.push(i)});var v="richText"===a.renderMode?d.join(c.richText):mi(u,d.join(""),h?l:c.html);if(h)return v;var x=ht(s.header,"ordinal",a.useUTC),_=si(u,a.renderMode).nameStyle,b=ai(u);return"richText"===a.renderMode?vi(a,x,_)+c.richText+v:mi(u,'<div style="'+_+";"+b+';">'+r(x)+"</div>"+v,l)}function fi(t,n,i,o){var s=t.renderMode,l=n.noName,u=n.noValue,p=!n.markerType,h=n.name,c=t.useUTC,d=n.valueFormatter||t.valueFormatter||function(t){return t=e(t)?t:[t],a(t,function(t,n){return ht(t,e(y)?y[n]:y,c)})};if(!l||!u){var g=p?"":t.markupStyleCreator.makeTooltipMarker(n.markerType,n.markerColor||"#333",s),f=l?"":ht(h,"ordinal",c),y=n.valueType,m=u?[]:d(n.value,n.dataIndex),v=!p||!l,x=!p&&l,_=si(o,s),b=_.nameStyle,M=_.valueStyle;return"richText"===s?(p?"":g)+(l?"":vi(t,f,b))+(u?"":function(t,n,i,o,r){var a=[r],s=o?10:20;return i&&a.push({padding:[0,0,0,s],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(e(n)?n.join("  "):n,a)}(t,m,v,x,M)):mi(o,(p?"":g)+(l?"":function(t,e,n){return'<span style="'+n+";"+(e?"margin-left:2px":"")+'">'+r(t)+"</span>"}(f,!p,b))+(u?"":function(t,n,i,o){var s=i?"10px":"20px",l=n?"float:right;margin-left:"+s:"";return t=e(t)?t:[t],'<span style="'+l+";"+o+'">'+a(t,function(t){return r(t)}).join("&nbsp;&nbsp;")+"</span>"}(m,v,x,M)),i)}}function yi(t,e,n,i,o,r){if(t)return ci(t)({useUTC:o,renderMode:n,orderMode:i,markupStyleCreator:e,valueFormatter:t.valueFormatter},t,0,r)}function mi(t,e,n){return'<div style="'+("margin: "+n+"px 0 0")+";"+ai(t)+';">'+e+'<div style="clear:both"></div></div>'}function vi(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function xi(t,e){var n=t.getData().getItemVisual(e,"style")[t.visualDrawType];return lt(n)}function _i(t,e){var n=t.get("padding");return null!=n?n:"richText"===e?[8,10]:10}var bi=function(){function t(){this.richTextStyles={},this._nextStyleNameId=ut()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(t,e,n){var i="richText"===n?this._generateStyleName():null,o=ct({color:e,type:t,renderMode:n,markerId:i});return s(o)?o:(this.richTextStyles[i]=o.style,o.content)},t.prototype.wrapRichTextStyle=function(t,n){var r={};e(n)?i(n,function(t){return o(r,t)}):o(r,n);var a=this._generateStyleName();return this.richTextStyles[a]=r,"{"+a+"|"+t+"}"},t}();function Mi(t){var n,o,r,a,s=t.series,p=t.dataIndex,h=t.multipleSeries,c=s.getData(),d=c.mapDimensionsAll("defaultedTooltip"),g=d.length,f=s.getRawValue(p),y=e(f),m=xi(s,p);if(g>1||y&&!g){var v=function(t,e,n,o,r){var a=e.getData(),s=u(t,function(t,e,n){var i=a.getDimensionInfo(n);return t||i&&!1!==i.tooltip&&null!=i.displayName},!1),l=[],p=[],h=[];function c(t,e){var n=a.getDimensionInfo(e);n&&!1!==n.otherDims.tooltip&&(s?h.push(pi("nameValue",{markerType:"subItem",markerColor:r,name:n.displayName,value:t,valueType:n.type})):(l.push(t),p.push(n.type)))}return o.length?i(o,function(t){c(dt(a,n,t),t)}):i(t,c),{inlineValues:l,inlineValueTypes:p,blocks:h}}(f,s,p,d,m);n=v.inlineValues,o=v.inlineValueTypes,r=v.blocks,a=v.inlineValues[0]}else if(g){var x=c.getDimensionInfo(d[0]);a=n=dt(c,p,d[0]),o=x.type}else a=n=y?f[0]:f;var _=gt(s),b=_&&s.name||"",M=c.getName(p),S=h?b:M;return pi("section",{header:b,noHeader:h||!_,sortParam:a,blocks:[pi("nameValue",{markerType:"item",markerColor:m,name:S,noName:!l(S),value:n,valueType:o,dataIndex:p})].concat(r||[])})}var Si=Math.PI,wi=function(){function t(t,e){this.group=new p,this.opt=e,this.axisModel=t,h(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new p({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return t.prototype.hasBuilder=function(t){return!!Ii[t]},t.prototype.add=function(t){Ii[t](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(t,e,n){var i,o,r=ft(e-t);return Ct(r)?(o=n>0?"top":"bottom",i="center"):Ct(r-Si)?(o=n>0?"bottom":"top",i="center"):(o="middle",i=r>0&&r<Si?n>0?"right":"left":n>0?"left":"right"),{rotation:r,textAlign:i,textVerticalAlign:o}},t.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},t.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},t}(),Ii={axisLine:function(t,e,n,r){var a=e.get(["axisLine","show"]);if("auto"===a&&t.handleAutoShown&&(a=t.handleAutoShown("axisLine")),a){var l=e.axis.getExtent(),u=r.transform,p=[l[0],0],h=[l[1],0],c=p[0]>h[0];u&&(g(p,p,u),g(h,h,u));var d=o({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),y=new f({shape:{x1:p[0],y1:p[1],x2:h[0],y2:h[1]},style:d,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});bt(y.shape,y.style.lineWidth),y.anid="line",n.add(y);var m=e.get(["axisLine","symbol"]);if(null!=m){var v=e.get(["axisLine","symbolSize"]);s(m)&&(m=[m,m]),(s(v)||M(v))&&(v=[v,v]);var x=Mt(e.get(["axisLine","symbolOffset"])||0,v),_=v[0],b=v[1];i([{rotate:t.rotation+Math.PI/2,offset:x[0],r:0},{rotate:t.rotation-Math.PI/2,offset:x[1],r:Math.sqrt((p[0]-h[0])*(p[0]-h[0])+(p[1]-h[1])*(p[1]-h[1]))}],function(e,i){if("none"!==m[i]&&null!=m[i]){var o=St(m[i],-_/2,-b/2,_,b,d.stroke,!0),r=e.r+e.offset,a=c?h:p;o.attr({rotation:e.rotate,x:a[0]+r*Math.cos(t.rotation),y:a[1]-r*Math.sin(t.rotation),silent:!0,z2:11}),n.add(o)}})}}},axisTickLabel:function(t,e,n,o){var r=function(t,e,n,i){var o=n.axis,r=n.getModel("axisTick"),a=r.get("show");"auto"===a&&i.handleAutoShown&&(a=i.handleAutoShown("axisTick"));if(!a||o.scale.isBlank())return;for(var s=r.getModel("lineStyle"),l=i.tickDirection*r.get("length"),u=Di(o.getTicksCoords(),e.transform,l,h(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),p=0;p<u.length;p++)t.add(u[p]);return u}(n,o,e,t),s=function(t,e,n,o){var r=n.axis,a=c(o.axisLabelShow,n.get(["axisLabel","show"]));if(!a||r.scale.isBlank())return;var s=n.getModel("axisLabel"),l=s.get("margin"),u=r.getViewLabels(),p=(c(o.labelRotate,s.get("rotate"))||0)*Si/180,h=wi.innerTextLayout(o.rotation,p,o.labelDirection),g=n.getCategories&&n.getCategories(!0),f=[],x=wi.isLabelSilent(n),_=n.get("triggerEvent");return i(u,function(i,a){var p="ordinal"===r.scale.type?r.scale.getRawOrdinalNumber(i.tickValue):i.tickValue,c=i.formattedLabel,b=i.rawLabel,M=s;if(g&&g[p]){var S=g[p];y(S)&&S.textStyle&&(M=new wt(S.textStyle,s,n.ecModel))}var w=M.getTextColor()||n.get(["axisLine","lineStyle","color"]),I=r.dataToCoord(p),C=M.getShallow("align",!0)||h.textAlign,T=m(M.getShallow("alignMinLabel",!0),C),A=m(M.getShallow("alignMaxLabel",!0),C),D=M.getShallow("verticalAlign",!0)||M.getShallow("baseline",!0)||h.textVerticalAlign,k=m(M.getShallow("verticalAlignMinLabel",!0),D),P=m(M.getShallow("verticalAlignMaxLabel",!0),D),L=new d({x:I,y:o.labelOffset+o.labelDirection*l,rotation:h.rotation,silent:x,z2:10+(i.level||0),style:yt(M,{text:c,align:0===a?T:a===u.length-1?A:C,verticalAlign:0===a?k:a===u.length-1?P:D,fill:v(w)?w("category"===r.type?b:"value"===r.type?p+"":p,a):w})});if(L.anid="label_"+p,mt({el:L,componentModel:n,itemName:c,formatterParamsExtra:{isTruncated:function(){return L.isTruncated},value:b,tickIndex:a}}),_){var O=wi.makeAxisEventDataBase(n);O.targetType="axisLabel",O.value=b,O.tickIndex=a,"category"===r.type&&(O.dataIndex=p),vt(L).eventData=O}e.add(L),L.updateTransform(),f.push(L),t.add(L),L.decomposeTransform()}),f}(n,o,e,t);if(function(t,e,n){if(It(t.axis))return;var i=t.get(["axisLabel","showMinLabel"]),o=t.get(["axisLabel","showMaxLabel"]);e=e||[],n=n||[];var r=e[0],a=e[1],s=e[e.length-1],l=e[e.length-2],u=n[0],p=n[1],h=n[n.length-1],c=n[n.length-2];!1===i?(Ci(r),Ci(u)):Ti(r,a)&&(i?(Ci(a),Ci(p)):(Ci(r),Ci(u)));!1===o?(Ci(s),Ci(h)):Ti(l,s)&&(o?(Ci(l),Ci(c)):(Ci(s),Ci(h)))}(e,s,r),function(t,e,n,i){var o=n.axis,r=n.getModel("minorTick");if(!r.get("show")||o.scale.isBlank())return;var a=o.getMinorTicksCoords();if(!a.length)return;for(var s=r.getModel("lineStyle"),l=i*r.get("length"),u=h(s.getLineStyle(),h(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),p=0;p<a.length;p++)for(var c=Di(a[p],e.transform,l,u,"minorticks_"+p),d=0;d<c.length;d++)t.add(c[d])}(n,o,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])){var l=xt(a(s,function(t){return{label:t,priority:t.z2,defaultAttr:{ignore:t.ignore}}}));_t(l)}},axisName:function(t,e,n,i){var o=c(t.axisName,e.get("name"));if(o){var r,a,s=e.get("nameLocation"),l=t.nameDirection,u=e.getModel("nameTextStyle"),p=e.get("nameGap")||0,h=e.axis.getExtent(),g=h[0]>h[1]?-1:1,f=["start"===s?h[0]-g*p:"end"===s?h[1]+g*p:(h[0]+h[1])/2,Ai(s)?t.labelOffset+l*p:0],y=e.get("nameRotate");null!=y&&(y=y*Si/180),Ai(s)?r=wi.innerTextLayout(t.rotation,null!=y?y:t.rotation,l):(r=function(t,e,n,i){var o,r,a=ft(n-t),s=i[0]>i[1],l="start"===e&&!s||"start"!==e&&s;Ct(a-Si/2)?(r=l?"bottom":"top",o="center"):Ct(a-1.5*Si)?(r=l?"top":"bottom",o="center"):(r="middle",o=a<1.5*Si&&a>Si/2?l?"left":"right":l?"right":"left");return{rotation:a,textAlign:o,textVerticalAlign:r}}(t.rotation,s,y||0,h),null!=(a=t.axisNameAvailableWidth)&&(a=Math.abs(a/Math.sin(r.rotation)),!isFinite(a)&&(a=null)));var m=u.getFont(),v=e.get("nameTruncate",!0)||{},x=v.ellipsis,_=c(t.nameTruncateMaxWidth,v.maxWidth,a),b=new d({x:f[0],y:f[1],rotation:r.rotation,silent:wi.isLabelSilent(e),style:yt(u,{text:o,font:m,overflow:"truncate",width:_,ellipsis:x,fill:u.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:u.get("align")||r.textAlign,verticalAlign:u.get("verticalAlign")||r.textVerticalAlign}),z2:1});if(mt({el:b,componentModel:e,itemName:o}),b.__fullText=o,b.anid="name",e.get("triggerEvent")){var M=wi.makeAxisEventDataBase(e);M.targetType="axisName",M.name=o,vt(b).eventData=M}i.add(b),b.updateTransform(),n.add(b),b.decomposeTransform()}}};function Ci(t){t&&(t.ignore=!0)}function Ti(t,e){var n=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(n&&i){var o=x([]);return _(o,o,-t.rotation),n.applyTransform(b([],o,t.getLocalTransform())),i.applyTransform(b([],o,e.getLocalTransform())),n.intersect(i)}}function Ai(t){return"middle"===t||"center"===t}function Di(t,e,n,i,o){for(var r=[],a=[],s=[],l=0;l<t.length;l++){var u=t[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=n,e&&(g(a,a,e),g(s,s,e));var p=new f({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:i,z2:2,autoBatch:!0,silent:!0});bt(p.shape,p.style.lineWidth),p.anid=o+"_"+t[l].tickValue,r.push(p)}return r}function ki(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,e,n){var o=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),a=r.get("link",!0)||[],s=[];i(n.getCoordinateSystems(),function(n){if(n.axisPointerEnabled){var l=Ri(n.model),u=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=n;var p=n.model.getModel("tooltip",o);if(i(n.getAxes(),S(f,!1,null)),n.getTooltipAxes&&o&&p.get("show")){var c="axis"===p.get("trigger"),d="cross"===p.get(["axisPointer","type"]),g=n.getTooltipAxes(p.get(["axisPointer","axis"]));(c||d)&&i(g.baseAxes,S(f,!d||"cross",c)),d&&i(g.otherAxes,S(f,"cross",!1))}}function f(o,l,c){var d=c.model.getModel("axisPointer",r),g=d.get("show");if(g&&("auto"!==g||o||Oi(d))){null==l&&(l=d.get("triggerTooltip")),d=o?function(t,e,n,o,r,a){var s=e.getModel("axisPointer"),l={};i(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){l[t]=w(s.get(t))}),l.snap="category"!==t.type&&!!a,"cross"===s.get("type")&&(l.type="line");var u=l.label||(l.label={});if(null==u.show&&(u.show=!1),"cross"===r){var p=s.get(["label","show"]);if(u.show=null==p||p,!a){var c=l.lineStyle=s.get("crossStyle");c&&h(u,c.textStyle)}}return t.model.getModel("axisPointer",new wt(l,n,o))}(c,p,r,e,o,l):d;var f=d.get("snap"),y=d.get("triggerEmphasis"),m=Ri(c.model),v=l||f||"category"===c.type,x=t.axesInfo[m]={key:m,axis:c,coordSys:n,axisPointerModel:d,triggerTooltip:l,triggerEmphasis:y,involveSeries:v,snap:f,useHandle:Oi(d),seriesModels:[],linkGroup:null};u[m]=x,t.seriesInvolved=t.seriesInvolved||v;var _=function(t,e){for(var n=e.model,i=e.dim,o=0;o<t.length;o++){var r=t[o]||{};if(Pi(r[i+"AxisId"],n.id)||Pi(r[i+"AxisIndex"],n.componentIndex)||Pi(r[i+"AxisName"],n.name))return o}}(a,c);if(null!=_){var b=s[_]||(s[_]={axesInfo:{}});b.axesInfo[m]=x,b.mapper=a[_].mapper,x.linkGroup=b}}}})}(n,t,e),n.seriesInvolved&&function(t,e){e.eachSeries(function(e){var n=e.coordinateSystem,o=e.get(["tooltip","trigger"],!0),r=e.get(["tooltip","show"],!0);n&&"none"!==o&&!1!==o&&"item"!==o&&!1!==r&&!1!==e.get(["axisPointer","show"],!0)&&i(t.coordSysAxesInfo[Ri(n.model)],function(t){var i=t.axis;n.getAxis(i.dim)===i&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})})}(n,t),n}function Pi(t,n){return"all"===t||e(t)&&I(t,n)>=0||t===n}function Li(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Ri(t)]}function Oi(t){return!!t.get(["handle","show"])}function Ri(t){return t.type+"||"+t.id}var zi={},Vi=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.render=function(e,n,i,o){this.axisPointerClass&&function(t){var e=Li(t);if(e){var n=e.axisPointerModel,i=e.axis.scale,o=n.option,r=n.get("status"),a=n.get("value");null!=a&&(a=i.parse(a));var s=Oi(n);null==r&&(o.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),o.value=a,s&&(o.status=e.axis.scale.isBlank()?"hide":"show")}}(e),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,i,!0)},e.prototype.updateAxisPointer=function(t,e,n,i){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,e){var n=this._axisPointer;n&&n.remove(e)},e.prototype.dispose=function(e,n){this._disposeAxisPointer(n),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,n,i){var o=e.getAxisPointerClass(this.axisPointerClass);if(o){var r=function(t){var e=Li(t);return e&&e.axisPointerModel}(t);r?(this._axisPointer||(this._axisPointer=new o)).render(t,r,n,i):this._disposeAxisPointer(n)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,e){zi[t]=e},e.getAxisPointerClass=function(t){return t&&zi[t]},e.type="axis",e}(Tt),Bi=At();function Ei(t,n,i,o){var r=i.axis;if(!r.scale.isBlank()){var a=i.getModel("splitArea"),s=a.getModel("areaStyle"),l=s.get("color"),u=o.coordinateSystem.getRect(),p=r.getTicksCoords({tickModel:a,clamp:!0});if(p.length){var c=l.length,d=Bi(t).splitAreaColors,g=C(),f=0;if(d)for(var y=0;y<p.length;y++){var m=d.get(p[y].tickValue);if(null!=m){f=(m+(c-1)*y)%c;break}}var v=r.toGlobalCoord(p[0].coord),x=s.getAreaStyle();l=e(l)?l:[l];for(y=1;y<p.length;y++){var _=r.toGlobalCoord(p[y].coord),b=void 0,M=void 0,S=void 0,w=void 0;r.isHorizontal()?(b=v,M=u.y,S=_-b,w=u.height,v=b+S):(b=u.x,M=v,S=u.width,v=M+(w=_-M));var I=p[y-1].tickValue;null!=I&&g.set(I,f),n.add(new T({anid:null!=I?"area_"+I:null,shape:{x:b,y:M,width:S,height:w},style:h({fill:l[f]},x),autoBatch:!0,silent:!0})),f=(f+1)%c}Bi(t).splitAreaColors=g}}}function Gi(t){Bi(t).splitAreaColors=null}var Ni=["axisLine","axisTickLabel","axisName"],Hi=["splitArea","splitLine","minorSplitLine"],Wi=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return ii(e,t),e.prototype.render=function(e,n,r,a){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new p,this.group.add(this._axisGroup),e.get("show")){var l=e.getCoordSysModel(),u=Dt(l,e),h=new wi(e,o({handleAutoShown:function(t){for(var n=l.coordinateSystem.getCartesians(),i=0;i<n.length;i++)if(kt(n[i].getOtherAxis(e.axis).scale))return!0;return!1}},u));i(Ni,h.add,h),this._axisGroup.add(h.getGroup()),i(Hi,function(t){e.get([t,"show"])&&Zi[t](this,this._axisGroup,e,l)},this),a&&"changeAxisOrder"===a.type&&a.isInitSort||Pt(s,this._axisGroup,e),t.prototype.render.call(this,e,n,r,a)}},e.prototype.remove=function(){Gi(this)},e.type="cartesianAxis",e}(Vi),Zi={splitLine:function(t,n,i,o){var r=i.axis;if(!r.scale.isBlank()){var a=i.getModel("splitLine"),s=a.getModel("lineStyle"),l=s.get("color"),u=!1!==a.get("showMinLine"),p=!1!==a.get("showMaxLine");l=e(l)?l:[l];for(var c=o.coordinateSystem.getRect(),d=r.isHorizontal(),g=0,y=r.getTicksCoords({tickModel:a}),m=[],v=[],x=s.getLineStyle(),_=0;_<y.length;_++){var b=r.toGlobalCoord(y[_].coord);if((0!==_||u)&&(_!==y.length-1||p)){var M=y[_].tickValue;d?(m[0]=b,m[1]=c.y,v[0]=b,v[1]=c.y+c.height):(m[0]=c.x,m[1]=b,v[0]=c.x+c.width,v[1]=b);var S=g++%l.length,w=new f({anid:null!=M?"line_"+M:null,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:v[0],y2:v[1]},style:h({stroke:l[S]},x),silent:!0});bt(w.shape,x.lineWidth),n.add(w)}}}},minorSplitLine:function(t,e,n,i){var o=n.axis,r=n.getModel("minorSplitLine").getModel("lineStyle"),a=i.coordinateSystem.getRect(),s=o.isHorizontal(),l=o.getMinorTicksCoords();if(l.length)for(var u=[],p=[],h=r.getLineStyle(),c=0;c<l.length;c++)for(var d=0;d<l[c].length;d++){var g=o.toGlobalCoord(l[c][d].coord);s?(u[0]=g,u[1]=a.y,p[0]=g,p[1]=a.y+a.height):(u[0]=a.x,u[1]=g,p[0]=a.x+a.width,p[1]=g);var y=new f({anid:"minor_line_"+l[c][d].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:p[0],y2:p[1]},style:h,silent:!0});bt(y.shape,h.lineWidth),e.add(y)}},splitArea:function(t,e,n,i){Ei(t,e,n,i)}},Fi=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="xAxis",e}(Wi),Yi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Fi.type,e}return ii(e,t),e.type="yAxis",e}(Wi),Xi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="grid",e}return ii(e,t),e.prototype.render=function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new T({shape:t.coordinateSystem.getRect(),style:h({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Tt),Ui={offset:0};function Ki(t){t.registerComponentView(Xi),t.registerComponentModel(Lt),t.registerCoordinateSystem("cartesian2d",Ot),Rt(t,"x",zt,Ui),Rt(t,"y",zt,Ui),t.registerComponentView(Fi),t.registerComponentView(Yi),t.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}var ji=["axisLine","axisTickLabel","axisName"],qi=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return ii(n,t),n.prototype.render=function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},n.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),o=a(n,function(t){var n=t.model.get("showName")?t.name:"";return new wi(t.model,{axisName:n,position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});i(o,function(t){i(ji,t.add,t),this.group.add(t.getGroup())},this)},n.prototype._buildSplitLineAndArea=function(t){var n=t.coordinateSystem,o=n.getIndicatorAxes();if(o.length){var r=t.get("shape"),s=t.getModel("splitLine"),l=t.getModel("splitArea"),u=s.getModel("lineStyle"),p=l.getModel("areaStyle"),c=s.get("show"),d=l.get("show"),g=u.get("color"),f=p.get("color"),y=e(g)?g:[g],m=e(f)?f:[f],v=[],x=[];if("circle"===r)for(var _=o[0].getTicksCoords(),b=n.cx,M=n.cy,S=0;S<_.length;S++){if(c)v[z(v,y,S)].push(new A({shape:{cx:b,cy:M,r:_[S].coord}}));if(d&&S<_.length-1)x[z(x,m,S)].push(new D({shape:{cx:b,cy:M,r0:_[S].coord,r:_[S+1].coord}}))}else{var w,I=a(o,function(t,e){var i=t.getTicksCoords();return w=null==w?i.length-1:Math.min(i.length-1,w),a(i,function(t){return n.coordToPoint(t.coord,e)})}),C=[];for(S=0;S<=w;S++){for(var T=[],L=0;L<o.length;L++)T.push(I[L][S]);if(T[0]&&T.push(T[0].slice()),c)v[z(v,y,S)].push(new k({shape:{points:T}}));if(d&&C)x[z(x,m,S-1)].push(new P({shape:{points:T.concat(C)}}));C=T.slice().reverse()}}var O=u.getLineStyle(),R=p.getAreaStyle();i(x,function(t,e){this.group.add(Vt(t,{style:h({stroke:"none",fill:m[e%m.length]},R),silent:!0}))},this),i(v,function(t,e){this.group.add(Vt(t,{style:h({fill:"none",stroke:y[e%y.length]},O),silent:!0}))},this)}function z(t,e,n){var i=n%e.length;return t[i]=t[i]||[],i}},n.type="radar",n}(Tt);function $i(t){t.registerCoordinateSystem("radar",Bt),t.registerComponentModel(Et),t.registerComponentView(qi),t.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(t){e.setItemVisual(t,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}var Ji="\0_ec_interaction_mutex";function Qi(t,e){return!!to(t)[e]}function to(t){return t[Ji]||(t[Ji]={})}Gt({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},L);var eo=function(t){function e(e){var n=t.call(this)||this;n._zr=e;var i=O(n._mousedownHandler,n),o=O(n._mousemoveHandler,n),r=O(n._mouseupHandler,n),a=O(n._mousewheelHandler,n),s=O(n._pinchHandler,n);return n.enable=function(t,n){this.disable(),this._opt=h(w(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",i),e.on("mousemove",o),e.on("mouseup",r)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",a),e.on("pinch",s))},n.disable=function(){e.off("mousedown",i),e.off("mousemove",o),e.off("mouseup",r),e.off("mousewheel",a),e.off("pinch",s)},n}return ii(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!R(t)){for(var e=t.target;e;){if(e.draggable)return;e=e.__hostTarget||e.parent}var n=t.offsetX,i=t.offsetY;this.pointerChecker&&this.pointerChecker(t,n,i)&&(this._x=n,this._y=i,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&oo("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!Qi(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,i=this._x,o=this._y,r=e-i,a=n-o;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&z(t.event),io(this,"pan","moveOnMouseMove",t,{dx:r,dy:a,oldX:i,oldY:o,newX:e,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){R(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=oo("zoomOnMouseWheel",t,this._opt),n=oo("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,o=Math.abs(i),r=t.offsetX,a=t.offsetY;if(0!==i&&(e||n)){if(e){var s=o>3?1.4:o>1?1.2:1.1;no(this,"zoom","zoomOnMouseWheel",t,{scale:i>0?s:1/s,originX:r,originY:a,isAvailableBehavior:null})}if(n){var l=Math.abs(i);no(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(i>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:r,originY:a,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){Qi(this._zr,"globalPan")||no(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})},e}(V);function no(t,e,n,i,o){t.pointerChecker&&t.pointerChecker(i,o.originX,o.originY)&&(z(i.event),io(t,e,n,i,o))}function io(t,e,n,i,o){o.isAvailableBehavior=O(oo,null,n,i),t.trigger(e,o)}function oo(t,e,n){var i=n[t];return!t||i&&(!s(i)||e.event[i+"Key"])}function ro(t,e,n){var i=t.target;i.x+=e,i.y+=n,i.dirty()}function ao(t,e,n,i){var o=t.target,r=t.zoomLimit,a=t.zoom=t.zoom||1;if(a*=e,r){var s=r.min||0,l=r.max||1/0;a=Math.max(Math.min(l,a),s)}var u=a/t.zoom;t.zoom=a,o.x-=(n-o.x)*(u-1),o.y-=(i-o.y)*(u-1),o.scaleX*=u,o.scaleY*=u,o.dirty()}var so={axisPointer:1,tooltip:1,brush:1};function lo(t,e,n){var i=e.getComponentByElement(t.topTarget),o=i&&i.coordinateSystem;return i&&i!==n&&!so.hasOwnProperty(i.mainType)&&o&&o.model!==n}var uo=["rect","circle","line","ellipse","polygon","polyline","path"],po=C(uo),ho=C(uo.concat(["g"])),co=C(uo.concat(["g"])),go=At();function fo(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}function yo(t){var e=t.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var mo=function(){function t(t){var e=new p;this.uid=Nt("ec_map_draw"),this._controller=new eo(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new p),e.add(this._svgGroup=new p)}return t.prototype.draw=function(t,e,n,i,o){var r="geo"===t.mainType,a=t.getData&&t.getData();r&&e.eachComponent({mainType:"series",subType:"map"},function(e){a||e.getHostGeoModel()!==t||(a=e.getData())});var s=t.coordinateSystem,l=this._regionsGroup,u=this.group,p=s.getTransformInfo(),h=p.raw,c=p.roam;!l.childAt(0)||o?(u.x=c.x,u.y=c.y,u.scaleX=c.scaleX,u.scaleY=c.scaleY,u.dirty()):Ht(u,c,t);var d=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,g={api:n,geo:s,mapOrGeoModel:t,data:a,isVisualEncodedByVisualMap:d,isGeo:r,transformInfoRaw:h};"geoJSON"===s.resourceType?this._buildGeoJSON(g):"geoSVG"===s.resourceType&&this._buildSVG(g),this._updateController(t,e,n),this._updateMapSelectHandler(t,l,n,i)},t.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=C(),n=C(),o=this._regionsGroup,r=t.transformInfoRaw,a=t.mapOrGeoModel,s=t.data,l=t.geo.projection,u=l&&l.stream;function h(t,e){return e&&(t=e(t)),t&&[t[0]*r.scaleX+r.x,t[1]*r.scaleY+r.y]}function c(t){for(var e=[],n=!u&&l&&l.project,i=0;i<t.length;++i){var o=h(t[i],n);o&&e.push(o)}return e}function d(t){return{shape:{points:c(t)}}}o.removeAll(),i(t.geo.regions,function(r){var c=r.name,g=e.get(c),f=n.get(c)||{},y=f.dataIdx,m=f.regionModel;if(!g){g=e.set(c,new p),o.add(g),y=s?s.indexOfName(c):null;var v=(m=t.isGeo?a.getRegionModel(c):s?s.getItemModel(y):null).get("silent",!0);null!=v&&(g.silent=v),n.set(c,{dataIdx:y,regionModel:m})}var x=[],_=[];i(r.geometries,function(t){if("polygon"===t.type){var e=[t.exterior].concat(t.interiors||[]);u&&(e=So(e,u)),i(e,function(t){x.push(new P(d(t)))})}else{var n=t.points;u&&(n=So(n,u,!0)),i(n,function(t){_.push(new k(d(t)))})}});var b=h(r.getCenter(),l&&l.project);function M(e,n){if(e.length){var o=new B({culling:!0,segmentIgnoreThreshold:1,shape:{paths:e}});g.add(o),vo(t,o,y,m),xo(t,o,c,m,a,y,b),n&&(yo(o),i(o.states,yo))}}M(x),M(_,!0)}),e.each(function(e,i){var o=n.get(i),r=o.dataIdx,s=o.regionModel;_o(t,e,i,s,a,r),bo(t,e,i,s,a),Mo(t,e,i,s,a)},this)},t.prototype._buildSVG=function(t){var e=t.geo.map,n=t.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var o=this._svgDispatcherMap=C(),r=!1;i(this._svgGraphicRecord.named,function(e){var n=e.name,i=t.mapOrGeoModel,a=t.data,s=e.svgNodeTagLower,l=e.el,u=a?a.indexOfName(n):null,p=i.getRegionModel(n);null!=po.get(s)&&l instanceof E&&vo(t,l,u,p),l instanceof E&&(l.culling=!0);var h=p.get("silent",!0);(null!=h&&(l.silent=h),l.z2EmphasisLift=0,e.namedFrom)||(null!=co.get(s)&&xo(t,l,n,p,i,u,null),_o(t,l,n,p,i,u),bo(t,l,n,p,i),null!=ho.get(s)&&("self"===Mo(t,l,n,p,i)&&(r=!0),(o.get(n)||o.set(n,[])).push(l)))},this),this._enableBlurEntireSVG(r,t)},t.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var n=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(t){if(!t.isGroup){Wt(t);var e=t.ensureState("blur").style||{};null==e.opacity&&null!=n&&(e.opacity=n),t.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(t,e){if(null==t)return[];var n=e.coordinateSystem;if("geoJSON"===n.resourceType){var i=this._regionsGroupByName;if(i){var o=i.get(t);return o?[o]:[]}}else if("geoSVG"===n.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},t.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},t.prototype._useSVG=function(t){var e=Zt.getGeoResource(t);if(e&&"geoSVG"===e.type){var n=e.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=t}},t.prototype._freeSVG=function(){var t=this._svgMapName;if(null!=t){var e=Zt.getGeoResource(t);e&&"geoSVG"===e.type&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(t,e,n){var i=t.coordinateSystem,r=this._controller,a=this._controllerHost;a.zoomLimit=t.get("scaleLimit"),a.zoom=i.getZoom(),r.enable(t.get("roam")||!1);var s=t.mainType;function l(){var e={type:"geoRoam",componentType:s};return e[s+"Id"]=t.id,e}r.off("pan").on("pan",function(t){this._mouseDownFlag=!1,ro(a,t.dx,t.dy),n.dispatchAction(o(l(),{dx:t.dx,dy:t.dy,animation:{duration:0}}))},this),r.off("zoom").on("zoom",function(t){this._mouseDownFlag=!1,ao(a,t.scale,t.originX,t.originY),n.dispatchAction(o(l(),{totalZoom:a.zoom,zoom:t.scale,originX:t.originX,originY:t.originY,animation:{duration:0}}))},this),r.setPointerChecker(function(e,o,r){return i.containPoint([o,r])&&!lo(e,n,t)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=go(e).ignore)})},t.prototype._updateMapSelectHandler=function(t,e,n,i){var o=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){o._mouseDownFlag=!0}),e.on("click",function(t){o._mouseDownFlag&&(o._mouseDownFlag=!1)}))},t}();function vo(t,e,n,i){var o=i.getModel("itemStyle"),r=i.getModel(["emphasis","itemStyle"]),a=i.getModel(["blur","itemStyle"]),s=i.getModel(["select","itemStyle"]),l=fo(o),u=fo(r),p=fo(s),h=fo(a),c=t.data;if(c){var d=c.getItemVisual(n,"style"),g=c.getItemVisual(n,"decal");t.isVisualEncodedByVisualMap&&d.fill&&(l.fill=d.fill),g&&(l.decal=Ft(g,t.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=u,e.ensureState("select").style=p,e.ensureState("blur").style=h,Wt(e)}function xo(t,e,n,i,o,r,a){var s=t.data,l=t.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),r)),p=s&&s.getItemLayout(r);if(l||u||p&&p.showLabel){var h=l?n:r,c=void 0;(!s||r>=0)&&(c=o);var d=a?{normal:{align:"center",verticalAlign:"middle"}}:null;Yt(e,Xt(i),{labelFetcher:c,labelDataIndex:h,defaultText:n},d);var g=e.getTextContent();if(g&&(go(g).ignore=g.ignore,e.textConfig&&a)){var f=e.getBoundingRect().clone();e.textConfig.layoutRect=f,e.textConfig.position=[(a[0]-f.x)/f.width*100+"%",(a[1]-f.y)/f.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function _o(t,e,n,i,o,r){t.data?t.data.setItemGraphicEl(r,e):vt(e).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:n,region:i&&i.option||{}}}function bo(t,e,n,i,o){t.data||mt({el:e,componentModel:o,itemName:n,itemTooltipOption:i.get("tooltip")})}function Mo(t,e,n,i,o){e.highDownSilentOnTouch=!!o.get("selectedMode");var r=i.getModel("emphasis"),a=r.get("focus");return Ut(e,a,r.get("blurScope"),r.get("disabled")),t.isGeo&&Kt(e,o,n),a}function So(t,e,n){var o,r=[];function a(){o=[]}function s(){o.length&&(r.push(o),o=[])}var l=e({polygonStart:a,polygonEnd:s,lineStart:a,lineEnd:s,point:function(t,e){isFinite(t)&&isFinite(e)&&o.push([t,e])},sphere:function(){}});return!n&&l.polygonStart(),i(t,function(t){l.lineStart();for(var e=0;e<t.length;e++)l.point(t[e][0],t[e][1]);l.lineEnd()}),!n&&l.polygonEnd(),r}var wo=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.focusBlurEnabled=!0,n}return ii(e,t),e.prototype.init=function(t,e){this._api=e},e.prototype.render=function(t,e,n,i){if(this._model=t,!t.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new mo(n));var o=this._mapDraw;o.draw(t,e,n,this,i),o.group.on("click",this._handleRegionClick,this),o.group.silent=t.get("silent"),this.group.add(o.group),this.updateSelectStatus(t,e,n)},e.prototype._handleRegionClick=function(t){var e;jt(t.target,function(t){return null!=(e=vt(t).eventData)},!0),e&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:e.name})},e.prototype.updateSelectStatus=function(t,e,n){var i=this;this._mapDraw.group.traverse(function(t){var e=vt(t).eventData;if(e)return i._model.isSelected(e.name)?n.enterSelect(t):n.leaveSelect(t),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(Tt);function Io(t,e,n){Zt.registerMap(t,e,n)}function Co(t){function e(e,n){n.update="geo:updateSelectStatus",t.registerAction(n,function(t,n){var o={},r=[];return n.eachComponent({mainType:"geo",query:t},function(n){n[e](t.name);var a=n.coordinateSystem;i(a.regions,function(t){o[t.name]=n.isSelected(t.name)||!1});var s=[];i(o,function(t,e){o[e]&&s.push(e)}),r.push({geoIndex:n.componentIndex,name:s})}),{selected:o,allSelected:r,name:t.name}})}t.registerCoordinateSystem("geo",qt),t.registerComponentModel($t),t.registerComponentView(wo),t.registerImpl("registerMap",Io),t.registerImpl("getMap",function(t){return Zt.getMapForUser(t)}),e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e,n){var o=t.componentType||"series";e.eachComponent({mainType:o,query:t},function(e){var r=e.coordinateSystem;if("geo"===r.type){var a=Jt(r,t,e.get("scaleLimit"),n);e.setCenter&&e.setCenter(a.center),e.setZoom&&e.setZoom(a.zoom),"series"===o&&i(e.seriesGroup,function(t){t.setCenter(a.center),t.setZoom(a.zoom)})}})})}var To=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.render=function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},i(Ao,function(t,e){n.getZr().on(e,this._handlers[e]=O(t,this))},this)),Qt(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,e){te(this,"_throttledDispatchExpand"),i(this._handlers,function(t,n){e.getZr().off(n,t)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(o({type:"parallelAxisExpand"},t))},e.type="parallel",e}(Tt),Ao={mousedown:function(t){Do(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(Do(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)>5)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&Do(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i?null:{duration:0}})}}};function Do(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}function ko(t,e,n,i,o,r){t=t||0;var a=n[1]-n[0];if(null!=o&&(o=Lo(o,[0,a])),null!=r&&(r=Math.max(r,null!=o?o:0)),"all"===i){var s=Math.abs(e[1]-e[0]);s=Lo(s,[0,a]),o=r=Lo(s,[o,r]),i=0}e[0]=Lo(e[0],n),e[1]=Lo(e[1],n);var l=Po(e,i);e[i]+=t;var u,p=o||0,h=n.slice();return l.sign<0?h[0]+=p:h[1]-=p,e[i]=Lo(e[i],h),u=Po(e,i),null!=o&&(u.sign!==l.sign||u.span<o)&&(e[1-i]=e[i]+l.sign*o),u=Po(e,i),null!=r&&u.span>r&&(e[1-i]=e[i]+u.sign*r),e}function Po(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function Lo(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var Oo=!0,Ro=Math.min,zo=Math.max,Vo=Math.pow,Bo="globalPan",Eo={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Go={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},No={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Ho=0,Wo=function(t){function e(e){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new p,n._uid="brushController_"+Ho++,i(fr,function(t,e){this._handlers[e]=O(t,this)},n),n}return ii(e,t),e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var e=this._zr;this._enableGlobalPan||function(t,e,n){to(t)[e]=n}(e,Bo,this._uid),i(this._handlers,function(t,n){e.on(n,t)}),this._brushType=t.brushType,this._brushOption=G(w(No),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;!function(t,e,n){var i=to(t);i[e]===n&&(i[e]=null)}(t,Bo,this._uid),i(this._handlers,function(e,n){t.off(n,e)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var e=this._panels={};i(t,function(t){e[t.panelId]=w(t)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=e.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=a(t,function(t){return G(w(No),t,!0)});var e=this._covers,n=this._covers=[],i=this,o=this._creatingCover;return new ee(e,t,function(t,e){return r(t.__brushOption,e)},r).add(s).update(s).remove(function(t){e[t]!==o&&i.group.remove(e[t])}).execute(),this;function r(t,e){return(null!=t.id?t.id:"\0-brush-index-"+e)+"-"+t.brushType}function s(r,a){var s=t[r];if(null!=a&&e[a]===o)n[r]=e[a];else{var l=n[r]=null!=a?(e[a].__brushOption=s,e[a]):Fo(i,Zo(i,s));Uo(i,l)}}},e.prototype.unmount=function(){return this.enableBrush(!1),$o(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(V);function Zo(t,e){var n=mr[e.brushType].createCover(t,e);return n.__brushOption=e,Xo(n,e),t.group.add(n),n}function Fo(t,e){var n=Ko(e);return n.endCreating&&(n.endCreating(t,e),Xo(e,e.__brushOption)),e}function Yo(t,e){var n=e.__brushOption;Ko(e).updateCoverShape(t,e,n.range,n)}function Xo(t,e){var n=e.z;null==n&&(n=1e4),t.traverse(function(t){t.z=n,t.z2=n})}function Uo(t,e){Ko(e).updateCommon(t,e),Yo(t,e)}function Ko(t){return mr[t.__brushOption.brushType]}function jo(t,e,n){var o,r=t._panels;if(!r)return Oo;var a=t._transform;return i(r,function(t){t.isTargetByCursor(e,n,a)&&(o=t)}),o}function qo(t,e){var n=t._panels;if(!n)return Oo;var i=e.__brushOption.panelId;return null!=i?n[i]:Oo}function $o(t){var e=t._covers,n=e.length;return i(e,function(e){t.group.remove(e)},t),e.length=0,!!n}function Jo(t,e){var n=a(t._covers,function(t){var e=t.__brushOption,n=w(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}});t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Qo(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function tr(t,e,n,o){var r=new p;return r.add(new T({name:"main",style:or(n),silent:!0,draggable:!0,cursor:"move",drift:S(sr,t,e,r,["n","s","w","e"]),ondragend:S(Jo,e,{isEnd:!0})})),i(o,function(n){r.add(new T({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:S(sr,t,e,r,n),ondragend:S(Jo,e,{isEnd:!0})}))}),r}function er(t,e,n,i){var o=i.brushStyle.lineWidth||0,r=zo(o,6),a=n[0][0],s=n[1][0],l=a-o/2,u=s-o/2,p=n[0][1],h=n[1][1],c=p-r+o/2,d=h-r+o/2,g=p-a,f=h-s,y=g+o,m=f+o;ir(t,e,"main",a,s,g,f),i.transformable&&(ir(t,e,"w",l,u,r,m),ir(t,e,"e",c,u,r,m),ir(t,e,"n",l,u,y,r),ir(t,e,"s",l,d,y,r),ir(t,e,"nw",l,u,r,r),ir(t,e,"ne",c,u,r,r),ir(t,e,"sw",l,d,r,r),ir(t,e,"se",c,d,r,r))}function nr(t,e){var n=e.__brushOption,o=n.transformable,r=e.childAt(0);r.useStyle(or(n)),r.attr({silent:!o,cursor:o?"move":"default"}),i([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(n){var i=e.childOfName(n.join("")),r=1===n.length?ar(t,n[0]):function(t,e){var n=[ar(t,e[0]),ar(t,e[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(t,n);i&&i.attr({silent:!o,invisible:!o,cursor:o?Go[r]+"-resize":null})})}function ir(t,e,n,i,o,r,a){var s,l,u,p,h,c=e.childOfName(n);c&&c.setShape((s=pr(t,e,[[i,o],[i+r,o+a]]),l=Ro(s[0][0],s[1][0]),u=Ro(s[0][1],s[1][1]),p=zo(s[0][0],s[1][0]),h=zo(s[0][1],s[1][1]),{x:l,y:u,width:p-l,height:h-u}))}function or(t){return h({strokeNoScale:!0},t.brushStyle)}function rr(t,e,n,i){var o=[Ro(t,n),Ro(e,i)],r=[zo(t,n),zo(e,i)];return[[o[0],r[0]],[o[1],r[1]]]}function ar(t,e){var n=ne({w:"left",e:"right",n:"top",s:"bottom"}[e],function(t){return ie(t.group)}(t));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function sr(t,e,n,o,r,a){var s=n.__brushOption,l=t.toRectRange(s.range),u=ur(e,r,a);i(o,function(t){var e=Eo[t];l[e[0]][e[1]]+=u[e[0]]}),s.range=t.fromRectRange(rr(l[0][0],l[1][0],l[0][1],l[1][1])),Uo(e,n),Jo(e,{isEnd:!1})}function lr(t,e,n,o){var r=e.__brushOption.range,a=ur(t,n,o);i(r,function(t){t[0]+=a[0],t[1]+=a[1]}),Uo(t,e),Jo(t,{isEnd:!1})}function ur(t,e,n){var i=t.group,o=i.transformCoordToLocal(e,n),r=i.transformCoordToLocal(0,0);return[o[0]-r[0],o[1]-r[1]]}function pr(t,e,n){var i=qo(t,e);return i&&i!==Oo?i.clipPath(n,t._transform):w(n)}function hr(t){var e=t.event;e.preventDefault&&e.preventDefault()}function cr(t,e,n){return t.childOfName("main").contain(e,n)}function dr(t,e,n,i){var o,r=t._creatingCover,a=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],i=e[0],o=n[0]-i[0],r=n[1]-i[1];return Vo(o*o+r*r,.5)>6}(t)||r){if(a&&!r){"single"===s.brushMode&&$o(t);var l=w(s);l.brushType=gr(l.brushType,a),l.panelId=a===Oo?null:a.panelId,r=t._creatingCover=Zo(t,l),t._covers.push(r)}if(r){var u=mr[gr(t._brushType,a)];r.__brushOption.range=u.getCreatingRange(pr(t,r,t._track)),i&&(Fo(t,r),u.updateCommon(t,r)),Yo(t,r),o={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&jo(t,e,n)&&$o(t)&&(o={isEnd:i,removeOnClick:!0});return o}function gr(t,e){return"auto"===t?e.defaultBrushType:t}var fr={mousedown:function(t){if(this._dragging)yr(this,t);else if(!t.target||!t.target.draggable){hr(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=jo(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,i=this.group.transformCoordToLocal(e,n);if(function(t,e,n){if(t._brushType&&!function(t,e,n){var i=t._zr;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}(t,e.offsetX,e.offsetY)){var i=t._zr,o=t._covers,r=jo(t,e,n);if(!t._dragging)for(var a=0;a<o.length;a++){var s=o[a].__brushOption;if(r&&(r===Oo||s.panelId===r.panelId)&&mr[s.brushType].contain(o[a],n[0],n[1]))return}r&&i.setCursorStyle("crosshair")}}(this,t,i),this._dragging){hr(t);var o=dr(this,t,i,!1);o&&Jo(this,o)}},mouseup:function(t){yr(this,t)}};function yr(t,e){if(t._dragging){hr(e);var n=e.offsetX,i=e.offsetY,o=t.group.transformCoordToLocal(n,i),r=dr(t,e,o,!0);t._dragging=!1,t._track=[],t._creatingCover=null,r&&Jo(t,r)}}var mr={lineX:vr(0),lineY:vr(1),rect:{createCover:function(t,e){function n(t){return t}return tr({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=Qo(t);return rr(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){er(t,e,n,i)},updateCommon:nr,contain:cr},polygon:{createCover:function(t,e){var n=new p;return n.add(new k({name:"main",style:or(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new P({name:"main",draggable:!0,drift:S(lr,t,e),ondragend:S(Jo,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:pr(t,e,n)})},updateCommon:nr,contain:cr}};function vr(t){return{createCover:function(e,n){return tr({toRectRange:function(e){var n=[e,[0,100]];return t&&n.reverse(),n},fromRectRange:function(e){return e[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=Qo(e);return[Ro(n[0][t],n[1][t]),zo(n[0][t],n[1][t])]},updateCoverShape:function(e,n,i,o){var r,a=qo(e,n);if(a!==Oo&&a.getLinearBrushOtherExtent)r=a.getLinearBrushOtherExtent(t);else{var s=e._zr;r=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,r];t&&l.reverse(),er(e,n,l,o)},updateCommon:nr,contain:cr}}function xr(t){return t=Mr(t),function(e){return oe(e,t)}}function _r(t,e){return t=Mr(t),function(n){var i=null!=e?e:n,o=i?t.width:t.height,r=i?t.x:t.y;return[r,r+(o||0)]}}function br(t,e,n){var i=Mr(t);return function(t,o){return i.contain(o[0],o[1])&&!lo(t,e,n)}}function Mr(t){return N.create(t)}var Sr=["axisLine","axisTickLabel","axisName"],wr=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.init=function(e,n){t.prototype.init.apply(this,arguments),(this._brushController=new Wo(n.getZr())).on("brush",O(this._onBrush,this))},e.prototype.render=function(t,e,n,r){if(!function(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}(t,e,r)){this.axisModel=t,this.api=n,this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new p,this.group.add(this._axisGroup),t.get("show")){var s=function(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}(t,e),l=s.coordinateSystem,u=t.getAreaSelectStyle(),h=u.width,c=t.axis.dim,d=l.getAxisLayout(c),g=o({strokeContainThreshold:h},d),f=new wi(t,g);i(Sr,f.add,f),this._axisGroup.add(f.getGroup()),this._refreshBrushController(g,u,t,s,h,n),Pt(a,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,e,n,i,o,r){var s=n.axis.getExtent(),l=s[1]-s[0],u=Math.min(30,.1*Math.abs(l)),p=N.create({x:s[0],y:-o/2,width:l,height:o});p.x-=u,p.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:xr(p),isTargetByCursor:br(p,r,i),getLinearBrushOtherExtent:_r(p,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(function(t){var e=t.axis;return a(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}(n))},e.prototype._onBrush=function(t){var e=t.areas,n=this.axisModel,i=n.axis,o=a(e,function(t){return[i.coordToData(t.range[0],!0),i.coordToData(t.range[1],!0)]});(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Tt);var Ir={type:"axisAreaSelect",event:"axisAreaSelected"};var Cr={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Tr(t){t.registerComponentView(To),t.registerComponentModel(re),t.registerCoordinateSystem("parallel",ae),t.registerPreprocessor(se),t.registerComponentModel(le),t.registerComponentView(wr),Rt(t,"parallel",le,Cr),function(t){t.registerAction(Ir,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),t.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})})}(t)}var Ar=At(),Dr=w,kr=O,Pr=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(t,e,n,i){var o=e.get("value"),r=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==o||this._lastStatus!==r){this._lastValue=o,this._lastStatus=r;var a=this._group,s=this._handle;if(!r||"hide"===r)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,o,t,e,n);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(t,e);if(a){var c=S(Lr,e,h);this.updatePointerEl(a,l,c),this.updateLabelEl(a,l,c,e)}else a=this._group=new p,this.createPointerEl(a,l,t,e),this.createLabelEl(a,l,t,e),n.getZr().add(a);Vr(a,e,!0),this._renderHandle(o)}},t.prototype.remove=function(t){this.clear(t)},t.prototype.dispose=function(t){this.clear(t)},t.prototype.determineAnimation=function(t,e){var n=e.get("animation"),i=t.axis,o="category"===i.type,r=e.get("snap");if(!r&&!o)return!1;if("auto"===n||null==n){var a=this.animationThreshold;if(o&&i.getBandWidth()>a)return!0;if(r){var s=Li(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1}return!0===n},t.prototype.makeElOption=function(t,e,n,i,o){},t.prototype.createPointerEl=function(t,e,n,i){var o=e.pointer;if(o){var r=Ar(t).pointerEl=new ue[o.type](Dr(e.pointer));t.add(r)}},t.prototype.createLabelEl=function(t,e,n,i){if(e.label){var o=Ar(t).labelEl=new d(Dr(e.label));t.add(o),Rr(o,i)}},t.prototype.updatePointerEl=function(t,e,n){var i=Ar(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},t.prototype.updateLabelEl=function(t,e,n,i){var o=Ar(t).labelEl;o&&(o.setStyle(e.label.style),n(o,{x:e.label.x,y:e.label.y}),Rr(o,i))},t.prototype._renderHandle=function(t){if(!this._dragging&&this.updateHandleTransform){var n,i=this._axisPointerModel,o=this._api.getZr(),r=this._handle,a=i.getModel("handle"),s=i.get("status");if(!a.get("show")||!s||"hide"===s)return r&&o.remove(r),void(this._handle=null);this._handle||(n=!0,r=this._handle=pe(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){z(t.event)},onmousedown:kr(this._onHandleDragMove,this,0,0),drift:kr(this._onHandleDragMove,this),ondragend:kr(this._onHandleDragEnd,this)}),o.add(r)),Vr(r,i,!1),r.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");e(l)||(l=[l,l]),r.scaleX=l[0]/2,r.scaleY=l[1]/2,Qt(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,n)}},t.prototype._moveHandleToValue=function(t,e){Lr(this._axisPointerModel,!e&&this._moveAnimation,this._handle,zr(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(zr(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(zr(i)),Ar(n).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),te(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}},t}();function Lr(t,e,n,i){Or(Ar(n).lastProp,i)||(Ar(n).lastProp=i,e?Ht(n,i,t):(n.stopAnimation(),n.attr(i)))}function Or(t,e){if(y(t)&&y(e)){var n=!0;return i(e,function(e,i){n=n&&Or(t[i],e)}),!!n}return t===e}function Rr(t,e){t[e.get(["label","show"])?"show":"hide"]()}function zr(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function Vr(t,e,n){var i=e.get("z"),o=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=o&&(t.zlevel=o),t.silent=n)})}function Br(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle()).fill=null:"shadow"===n&&((e=i.getAreaStyle()).stroke=null),e}function Er(t,e,n,i,o){var r=Gr(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),a=n.getModel("label"),s=he(a.get("padding")||0),l=a.getFont(),u=H(r,l),p=o.position,h=u.width+s[1]+s[3],c=u.height+s[0]+s[2],d=o.align;"right"===d&&(p[0]-=h),"center"===d&&(p[0]-=h/2);var g=o.verticalAlign;"bottom"===g&&(p[1]-=c),"middle"===g&&(p[1]-=c/2),function(t,e,n,i){var o=i.getWidth(),r=i.getHeight();t[0]=Math.min(t[0]+e,o)-e,t[1]=Math.min(t[1]+n,r)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(p,h,c,i);var f=a.get("backgroundColor");f&&"auto"!==f||(f=e.get(["axisLine","lineStyle","color"])),t.label={x:p[0],y:p[1],style:yt(a,{text:r,font:l,fill:a.getTextColor(),padding:s,backgroundColor:f}),z2:10}}function Gr(t,e,n,o,r){t=e.scale.parse(t);var a=e.scale.getLabel({value:t},{precision:r.precision}),l=r.formatter;if(l){var u={value:de(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};i(o,function(t){var e=n.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,o=e&&e.getDataParams(i);o&&u.seriesData.push(o)}),s(l)?a=l.replace("{value}",a):v(l)&&(a=l(u))}return a}function Nr(t,e,n){var i=W();return _(i,i,n.rotation),Z(i,i,n.position),ce([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function Hr(t,e,n,i,o,r){var a=wi.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=o.get(["label","margin"]),Er(e,i,o,r,{position:Nr(i.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function Wr(t,e,n){return{x1:t[n=n||0],y1:t[1-n],x2:e[n],y2:e[1-n]}}function Zr(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}function Fr(t,e,n,i,o,r){return{cx:t,cy:e,r0:n,r:i,startAngle:o,endAngle:r,clockwise:!0}}var Yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.makeElOption=function(t,e,n,i,o){var r=n.axis,a=r.grid,s=i.get("type"),l=Xr(a,r).getOtherAxis(r).getGlobalExtent(),u=r.toGlobalCoord(r.dataToCoord(e,!0));if(s&&"none"!==s){var p=Br(i),h=Ur[s](r,u,l);h.style=p,t.graphicKey=h.type,t.pointer=h}Hr(e,t,Dt(a.model,n),n,i,o)},e.prototype.getHandleTransform=function(t,e,n){var i=Dt(e.axis.grid.model,e,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var o=Nr(e.axis,t,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,i){var o=n.axis,r=o.grid,a=o.getGlobalExtent(!0),s=Xr(r,o).getOtherAxis(o).getGlobalExtent(),l="x"===o.dim?0:1,u=[t.x,t.y];u[l]+=e[l],u[l]=Math.min(a[1],u[l]),u[l]=Math.max(a[0],u[l]);var p=(s[1]+s[0])/2,h=[p,p];h[l]=u[l];return{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:h,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}},e}(Pr);function Xr(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var Ur={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:Wr([e,n[0]],[e,n[1]],Kr(t))}},shadow:function(t,e,n){var i=Math.max(1,t.getBandWidth()),o=n[1]-n[0];return{type:"Rect",shape:Zr([e-i/2,n[0]],[i,o],Kr(t))}}};function Kr(t){return"x"===t.dim?0:1}var jr=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(ge),qr=At(),$r=i;function Jr(t,e,n){if(!F.node){var i=e.getZr();qr(i).records||(qr(i).records={}),function(t,e){if(qr(t).initialized)return;function n(n,i){t.on(n,function(n){var o=function(t){var e={showTip:[],hideTip:[]},n=function(i){var o=e[i.type];o?o.push(i):(i.dispatchAction=n,t.dispatchAction(i))};return{dispatchAction:n,pendings:e}}(e);$r(qr(t).records,function(t){t&&i(t,n,o.dispatchAction)}),function(t,e){var n,i=t.showTip.length,o=t.hideTip.length;i?n=t.showTip[i-1]:o&&(n=t.hideTip[o-1]);n&&(n.dispatchAction=null,e.dispatchAction(n))}(o.pendings,e)})}qr(t).initialized=!0,n("click",S(ta,"click")),n("mousemove",S(ta,"mousemove")),n("globalout",Qr)}(i,e),(qr(i).records[t]||(qr(i).records[t]={})).handler=n}}function Qr(t,e,n){t.handler("leave",null,n)}function ta(t,e,n,i){e.handler(t,n,i)}function ea(t,e){if(!F.node){var n=e.getZr();(qr(n).records||{})[t]&&(qr(n).records[t]=null)}}var na=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.render=function(t,e,n){var i=e.getComponent("tooltip"),o=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";Jr("axisPointer",n,function(t,e,n){"none"!==o&&("leave"===t||o.indexOf(t)>=0)&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},e.prototype.remove=function(t,e){ea("axisPointer",e)},e.prototype.dispose=function(t,e){ea("axisPointer",e)},e.type="axisPointer",e}(Tt);function ia(t,n){var i,o=[],r=t.seriesIndex;if(null==r||!(i=n.getSeriesByIndex(r)))return{point:[]};var s=i.getData(),l=fe(s,t);if(null==l||l<0||e(l))return{point:[]};var u=s.getItemGraphicEl(l),p=i.coordinateSystem;if(i.getTooltipPosition)o=i.getTooltipPosition(l)||[];else if(p&&p.dataToPoint)if(t.isStacked){var h=p.getBaseAxis(),c=p.getOtherAxis(h).dim,d=h.dim,g="x"===c||"radius"===c?1:0,f=s.mapDimension(d),y=[];y[g]=s.get(f,l),y[1-g]=s.get(s.getCalculationInfo("stackResultDimension"),l),o=p.dataToPoint(y)||[]}else o=p.dataToPoint(s.getValues(a(p.dimensions,function(t){return s.mapDimension(t)}),l))||[];else if(u){var m=u.getBoundingRect().clone();m.applyTransform(u.transform),o=[m.x+m.width/2,m.y+m.height/2]}return{point:o,el:u}}var oa=At();function ra(t,e,n){var o=t.currTrigger,r=[t.x,t.y],a=t,s=t.dispatchAction||O(n.dispatchAction,n),l=e.getComponent("axisPointer").coordSysAxesInfo;if(l){pa(r)&&(r=ia({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var u=pa(r),p=a.axesInfo,h=l.axesInfo,c="leave"===o||pa(r),d={},g={},f={list:[],map:{}},y={showPointer:S(sa,g),showTooltip:S(la,f)};i(l.coordSysMap,function(t,e){var n=u||t.containPoint(r);i(l.coordSysAxesInfo[e],function(t,e){var i=t.axis,o=function(t,e){for(var n=0;n<(t||[]).length;n++){var i=t[n];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}(p,t);if(!c&&n&&(!p||o)){var a=o&&o.value;null!=a||u||(a=i.pointToData(r)),null!=a&&aa(t,a,y,!1,d)}})});var m={};return i(h,function(t,e){var n=t.linkGroup;n&&!g[e]&&i(n.axesInfo,function(e,i){var o=g[i];if(e!==t&&o){var r=o.value;n.mapper&&(r=t.axis.scale.parse(n.mapper(r,ua(e),ua(t)))),m[t.key]=r}})}),i(m,function(t,e){aa(h[e],t,y,!0,d)}),function(t,e,n){var o=n.axesInfo=[];i(e,function(e,n){var i=e.axisPointerModel.option,r=t[n];r?(!e.useHandle&&(i.status="show"),i.value=r.value,i.seriesDataIndices=(r.payloadBatch||[]).slice()):!e.useHandle&&(i.status="hide"),"show"===i.status&&o.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:i.value})})}(g,h,d),function(t,e,n,i){if(pa(e)||!t.list.length)return void i({type:"hideTip"});var o=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:t.list})}(f,r,t,s),function(t,e,n){var o=n.getZr(),r="axisPointerLastHighlights",a=oa(o)[r]||{},s=oa(o)[r]={};i(t,function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&t.triggerEmphasis&&i(n.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;s[e]=t})});var l=[],u=[];i(a,function(t,e){!s[e]&&u.push(t)}),i(s,function(t,e){!a[e]&&l.push(t)}),u.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:u}),l.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:l})}(h,0,n),d}}function aa(t,e,n,r,a){var s=t.axis;if(!s.scale.isBlank()&&s.containData(e))if(t.involveSeries){var l=function(t,e){var n=e.axis,o=n.dim,r=t,a=[],s=Number.MAX_VALUE,l=-1;return i(e.seriesModels,function(e,u){var p,h,c=e.getData().mapDimensionsAll(o);if(e.getAxisTooltipData){var d=e.getAxisTooltipData(c,t,n);h=d.dataIndices,p=d.nestestValue}else{if(!(h=e.getData().indicesOfNearest(c[0],t,"category"===n.type?.5:null)).length)return;p=e.getData().get(c[0],h[0])}if(null!=p&&isFinite(p)){var g=t-p,f=Math.abs(g);f<=s&&((f<s||g>=0&&l<0)&&(s=f,l=g,r=p,a.length=0),i(h,function(t){a.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:a,snapToValue:r}}(e,t),u=l.payloadBatch,p=l.snapToValue;u[0]&&null==a.seriesIndex&&o(a,u[0]),!r&&t.snap&&s.containData(p)&&null!=p&&(e=p),n.showPointer(t,e,u),n.showTooltip(t,l,p)}else n.showPointer(t,e)}function sa(t,e,n,i){t[e.key]={value:n,payloadBatch:i}}function la(t,e,n,i){var o=n.payloadBatch,r=e.axis,a=r.model,s=e.axisPointerModel;if(e.triggerTooltip&&o.length){var l=e.coordSys.model,u=Ri(l),p=t.map[u];p||(p=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(p)),p.dataByAxis.push({axisDim:r.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function ua(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function pa(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function ha(t){Vi.registerAxisPointerClass("CartesianAxisPointer",Yr),t.registerComponentModel(jr),t.registerComponentView(na),t.registerPreprocessor(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var n=t.axisPointer.link;n&&!e(n)&&(t.axisPointer.link=[n])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=ki(t,e)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},ra)}function ca(t){ye(Ki),ye(ha)}var da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.makeElOption=function(t,e,n,i,o){var r=n.axis;"angle"===r.dim&&(this.animationThreshold=Math.PI/18);var a=r.polar,s=a.getOtherAxis(r).getExtent(),l=r.dataToCoord(e),u=i.get("type");if(u&&"none"!==u){var p=Br(i),h=ga[u](r,a,l,s);h.style=p,t.graphicKey=h.type,t.pointer=h}var c=function(t,e,n,i,o){var r=e.axis,a=r.dataToCoord(t),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,u,p,h=i.getRadiusAxis().getExtent();if("radius"===r.dim){var c=W();_(c,c,s),Z(c,c,[i.cx,i.cy]),l=ce([a,-o],c);var d=e.getModel("axisLabel").get("rotate")||0,g=wi.innerTextLayout(s,d*Math.PI/180,-1);u=g.textAlign,p=g.textVerticalAlign}else{var f=h[1];l=i.coordToPoint([f+o,a]);var y=i.cx,m=i.cy;u=Math.abs(l[0]-y)/f<.3?"center":l[0]>y?"left":"right",p=Math.abs(l[1]-m)/f<.3?"middle":l[1]>m?"top":"bottom"}return{position:l,align:u,verticalAlign:p}}(e,n,0,a,i.get(["label","margin"]));Er(t,n,i,o,c)},e}(Pr);var ga={line:function(t,e,n,i){return"angle"===t.dim?{type:"Line",shape:Wr(e.coordToPoint([i[0],n]),e.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,i){var o=Math.max(1,t.getBandWidth()),r=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:Fr(e.cx,e.cy,i[0],i[1],(-n-o/2)*r,(o/2-n)*r)}:{type:"Sector",shape:Fr(e.cx,e.cy,n-o/2,n+o/2,0,2*Math.PI)}}},fa=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function ya(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],n]),o=t.coordToPoint([e[1],n]);return{x1:i[0],y1:i[1],x2:o[0],y2:o[1]}}function ma(t){return t.getRadiusAxis().inverse?0:1}function va(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}var xa=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return ii(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,o=n.polar,r=o.getRadiusAxis().getExtent(),s=n.getTicksCoords(),l=n.getMinorTicksCoords(),u=a(n.getViewLabels(),function(t){t=w(t);var e=n.scale,i="ordinal"===e.type?e.getRawOrdinalNumber(t.tickValue):t.tickValue;return t.coord=n.dataToCoord(i),t});va(u),va(s),i(fa,function(e){!t.get([e,"show"])||n.scale.isBlank()&&"axisLine"!==e||_a[e](this.group,t,o,s,l,r,u)},this)}},e.type="angleAxis",e}(Vi),_a={axisLine:function(t,e,n,i,o,r){var a,s=e.getModel(["axisLine","lineStyle"]),l=n.getAngleAxis(),u=Math.PI/180,p=l.getExtent(),h=ma(n),c=h?0:1,d=360===Math.abs(p[1]-p[0])?"Circle":"Arc";(a=0===r[c]?new ue[d]({shape:{cx:n.cx,cy:n.cy,r:r[h],startAngle:-p[0]*u,endAngle:-p[1]*u,clockwise:l.inverse},style:s.getLineStyle(),z2:1,silent:!0}):new D({shape:{cx:n.cx,cy:n.cy,r:r[h],r0:r[c]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,t.add(a)},axisTick:function(t,e,n,i,o,r){var s=e.getModel("axisTick"),l=(s.get("inside")?-1:1)*s.get("length"),u=r[ma(n)],p=a(i,function(t){return new f({shape:ya(n,[u,u+l],t.coord)})});t.add(Vt(p,{style:h(s.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,n,i,o,r){if(o.length){for(var a=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(a.get("inside")?-1:1)*s.get("length"),u=r[ma(n)],p=[],c=0;c<o.length;c++)for(var d=0;d<o[c].length;d++)p.push(new f({shape:ya(n,[u,u+l],o[c][d].coord)}));t.add(Vt(p,{style:h(s.getModel("lineStyle").getLineStyle(),h(a.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,n,o,r,a,s){var l=e.getCategories(!0),u=e.getModel("axisLabel"),p=u.get("margin"),h=e.get("triggerEvent");i(s,function(i,o){var r=u,s=i.tickValue,c=a[ma(n)],g=n.coordToPoint([c+p,i.coord]),f=n.cx,m=n.cy,v=Math.abs(g[0]-f)/c<.3?"center":g[0]>f?"left":"right",x=Math.abs(g[1]-m)/c<.3?"middle":g[1]>m?"top":"bottom";if(l&&l[s]){var _=l[s];y(_)&&_.textStyle&&(r=new wt(_.textStyle,u,u.ecModel))}var b=new d({silent:wi.isLabelSilent(e),style:yt(r,{x:g[0],y:g[1],fill:r.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:i.formattedLabel,align:v,verticalAlign:x})});if(t.add(b),h){var M=wi.makeAxisEventDataBase(e);M.targetType="axisLabel",M.value=i.rawLabel,vt(b).eventData=M}},this)},splitLine:function(t,e,n,i,o,r){var a=e.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],p=0;p<i.length;p++){var c=l++%s.length;u[c]=u[c]||[],u[c].push(new f({shape:ya(n,r,i[p].coord)}))}for(p=0;p<u.length;p++)t.add(Vt(u[p],{style:h({stroke:s[p%s.length]},a.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,n,i,o,r){if(o.length){for(var a=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<o.length;l++)for(var u=0;u<o[l].length;u++)s.push(new f({shape:ya(n,r,o[l][u].coord)}));t.add(Vt(s,{style:a.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,n,i,o,r){if(i.length){var a=e.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],p=Math.PI/180,c=-i[0].coord*p,d=Math.min(r[0],r[1]),g=Math.max(r[0],r[1]),f=e.get("clockwise"),y=1,m=i.length;y<=m;y++){var v=y===m?i[0].coord:i[y].coord,x=l++%s.length;u[x]=u[x]||[],u[x].push(new Y({shape:{cx:n.cx,cy:n.cy,r0:d,r:g,startAngle:c,endAngle:-v*p,clockwise:f},silent:!0})),c=-v*p}for(y=0;y<u.length;y++)t.add(Vt(u[y],{style:h({fill:s[y%s.length]},a.getAreaStyle()),silent:!0}))}}},ba=["axisLine","axisTickLabel","axisName"],Ma=["splitLine","splitArea","minorSplitLine"],Sa=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return ii(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=this._axisGroup,o=this._axisGroup=new p;this.group.add(o);var r=t.axis,a=r.polar,s=a.getAngleAxis(),l=r.getTicksCoords(),u=r.getMinorTicksCoords(),h=s.getExtent()[0],c=r.getExtent(),d=function(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}(a,t,h),g=new wi(t,d);i(ba,g.add,g),o.add(g.getGroup()),Pt(n,o,t),i(Ma,function(e){t.get([e,"show"])&&!r.scale.isBlank()&&wa[e](this.group,t,a,h,c,l,u)},this)}},e.type="radiusAxis",e}(Vi),wa={splitLine:function(t,e,n,i,o,r){var a=e.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),l=0,u=n.getAngleAxis(),p=Math.PI/180,c=u.getExtent(),d=360===Math.abs(c[1]-c[0])?"Circle":"Arc";s=s instanceof Array?s:[s];for(var g=[],f=0;f<r.length;f++){var y=l++%s.length;g[y]=g[y]||[],g[y].push(new ue[d]({shape:{cx:n.cx,cy:n.cy,r:Math.max(r[f].coord,0),startAngle:-c[0]*p,endAngle:-c[1]*p,clockwise:u.inverse}}))}for(f=0;f<g.length;f++)t.add(Vt(g[f],{style:h({stroke:s[f%s.length],fill:null},a.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,n,i,o,r,a){if(a.length){for(var s=e.getModel("minorSplitLine").getModel("lineStyle"),l=[],u=0;u<a.length;u++)for(var p=0;p<a[u].length;p++)l.push(new A({shape:{cx:n.cx,cy:n.cy,r:a[u][p].coord}}));t.add(Vt(l,{style:h({fill:null},s.getLineStyle()),silent:!0}))}},splitArea:function(t,e,n,i,o,r){if(r.length){var a=e.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],p=r[0].coord,c=1;c<r.length;c++){var d=l++%s.length;u[d]=u[d]||[],u[d].push(new Y({shape:{cx:n.cx,cy:n.cy,r0:p,r:r[c].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),p=r[c].coord}for(c=0;c<u.length;c++)t.add(Vt(u[c],{style:h({fill:s[c%s.length]},a.getAreaStyle()),silent:!0}))}}};var Ia={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},Ca={splitNumber:5},Ta=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="polar",e}(Tt);function Aa(t){ye(ha),Vi.registerAxisPointerClass("PolarAxisPointer",da),t.registerCoordinateSystem("polar",me),t.registerComponentModel(ve),t.registerComponentView(Ta),Rt(t,"angle",xe,Ia),Rt(t,"radius",_e,Ca),t.registerComponentView(xa),t.registerComponentView(Sa),t.registerLayout(S(be,"bar"))}var Da=["axisLine","axisTickLabel","axisName"],ka=["splitArea","splitLine"],Pa=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="SingleAxisPointer",n}return ii(e,t),e.prototype.render=function(e,n,o,r){var a=this.group;a.removeAll();var s=this._axisGroup;this._axisGroup=new p;var l=Me(e),u=new wi(e,l);i(Da,u.add,u),a.add(this._axisGroup),a.add(u.getGroup()),i(ka,function(t){e.get([t,"show"])&&La[t](this,this.group,this._axisGroup,e)},this),Pt(s,this._axisGroup,e),t.prototype.render.call(this,e,n,o,r)},e.prototype.remove=function(){Gi(this)},e.type="singleAxis",e}(Vi),La={splitLine:function(t,e,n,i){var o=i.axis;if(!o.scale.isBlank()){var r=i.getModel("splitLine"),a=r.getModel("lineStyle"),s=a.get("color");s=s instanceof Array?s:[s];for(var l=a.get("width"),u=i.coordinateSystem.getRect(),p=o.isHorizontal(),c=[],d=0,g=o.getTicksCoords({tickModel:r}),y=[],m=[],v=0;v<g.length;++v){var x=o.toGlobalCoord(g[v].coord);p?(y[0]=x,y[1]=u.y,m[0]=x,m[1]=u.y+u.height):(y[0]=u.x,y[1]=x,m[0]=u.x+u.width,m[1]=x);var _=new f({shape:{x1:y[0],y1:y[1],x2:m[0],y2:m[1]},silent:!0});bt(_.shape,l);var b=d++%s.length;c[b]=c[b]||[],c[b].push(_)}var M=a.getLineStyle(["color"]);for(v=0;v<c.length;++v)e.add(Vt(c[v],{style:h({stroke:s[v%s.length]},M),silent:!0}))}},splitArea:function(t,e,n,i){Ei(t,n,i,i)}},Oa=["x","y"],Ra=["width","height"],za=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.makeElOption=function(t,e,n,i,o){var r=n.axis,a=r.coordinateSystem,s=Ea(a,1-Ba(r)),l=a.dataToPoint(e)[0],u=i.get("type");if(u&&"none"!==u){var p=Br(i),h=Va[u](r,l,s);h.style=p,t.graphicKey=h.type,t.pointer=h}Hr(e,t,Me(n),n,i,o)},e.prototype.getHandleTransform=function(t,e,n){var i=Me(e,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var o=Nr(e.axis,t,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,i){var o=n.axis,r=o.coordinateSystem,a=Ba(o),s=Ea(r,a),l=[t.x,t.y];l[a]+=e[a],l[a]=Math.min(s[1],l[a]),l[a]=Math.max(s[0],l[a]);var u=Ea(r,1-a),p=(u[1]+u[0])/2,h=[p,p];return h[a]=l[a],{x:l[0],y:l[1],rotation:t.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}},e}(Pr),Va={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:Wr([e,n[0]],[e,n[1]],Ba(t))}},shadow:function(t,e,n){var i=t.getBandWidth(),o=n[1]-n[0];return{type:"Rect",shape:Zr([e-i/2,n[0]],[i,o],Ba(t))}}};function Ba(t){return t.isHorizontal()?0:1}function Ea(t,e){var n=t.getRect();return[n[Oa[e]],n[Oa[e]]+n[Ra[e]]]}var Ga=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="single",e}(Tt);function Na(t){ye(ha),Vi.registerAxisPointerClass("SingleAxisPointer",za),t.registerComponentView(Ga),t.registerComponentView(Pa),t.registerComponentModel(Se),Rt(t,"single",Se,Se.defaultOption),t.registerCoordinateSystem("single",we)}var Ha=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.render=function(t,e,n){var i=this.group;i.removeAll();var o=t.coordinateSystem,r=o.getRangeInfo(),a=o.getOrient(),s=e.getLocaleModel();this._renderDayRect(t,r,i),this._renderLines(t,r,a,i),this._renderYearText(t,r,a,i),this._renderMonthText(t,s,a,i),this._renderWeekText(t,s,r,a,i)},e.prototype._renderDayRect=function(t,e,n){for(var i=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),r=i.getCellWidth(),a=i.getCellHeight(),s=e.start.time;s<=e.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,u=new T({shape:{x:l[0],y:l[1],width:r,height:a},cursor:"default",style:o});n.add(u)}},e.prototype._renderLines=function(t,e,n,i){var o=this,r=t.coordinateSystem,a=t.getModel(["splitLine","lineStyle"]).getLineStyle(),s=t.get(["splitLine","show"]),l=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var u=e.start,p=0;u.time<=e.end.time;p++){c(u.formatedDate),0===p&&(u=r.getDateInfo(e.start.y+"-"+e.start.m));var h=u.date;h.setMonth(h.getMonth()+1),u=r.getDateInfo(h)}function c(e){o._firstDayOfMonth.push(r.getDateInfo(e)),o._firstDayPoints.push(r.dataToRect([e],!1).tl);var l=o._getLinePointsOfOneWeek(t,e,n);o._tlpoints.push(l[0]),o._blpoints.push(l[l.length-1]),s&&o._drawSplitline(l,a,i)}c(r.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,l,n),a,i),s&&this._drawSplitline(o._getEdgesPoints(o._blpoints,l,n),a,i)},e.prototype._getEdgesPoints=function(t,e,n){var i=[t[0].slice(),t[t.length-1].slice()],o="horizontal"===n?0:1;return i[0][o]=i[0][o]-e/2,i[1][o]=i[1][o]+e/2,i},e.prototype._drawSplitline=function(t,e,n){var i=new k({z2:20,shape:{points:t},style:e});n.add(i)},e.prototype._getLinePointsOfOneWeek=function(t,e,n){for(var i=t.coordinateSystem,o=i.getDateInfo(e),r=[],a=0;a<7;a++){var s=i.getNextNDay(o.time,a),l=i.dataToRect([s.time],!1);r[2*s.day]=l.tl,r[2*s.day+1]=l["horizontal"===n?"bl":"tr"]}return r},e.prototype._formatterLabel=function(t,e){return s(t)&&t?Ie(t,e):v(t)?t(e):e.nameMap},e.prototype._yearTextPositionControl=function(t,e,n,i,o){var r=e[0],a=e[1],s=["center","bottom"];"bottom"===i?(a+=o,s=["center","top"]):"left"===i?r-=o:"right"===i?(r+=o,s=["center","top"]):a-=o;var l=0;return"left"!==i&&"right"!==i||(l=Math.PI/2),{rotation:l,x:r,y:a,style:{align:s[0],verticalAlign:s[1]}}},e.prototype._renderYearText=function(t,e,n,i){var o=t.getModel("yearLabel");if(o.get("show")){var r=o.get("margin"),a=o.get("position");a||(a="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,u=(s[0][1]+s[1][1])/2,p="horizontal"===n?0:1,h={top:[l,s[p][1]],bottom:[l,s[1-p][1]],left:[s[1-p][0],u],right:[s[p][0],u]},c=e.start.y;+e.end.y>+e.start.y&&(c=c+"-"+e.end.y);var g=o.get("formatter"),f={start:e.start.y,end:e.end.y,nameMap:c},y=this._formatterLabel(g,f),m=new d({z2:30,style:yt(o,{text:y}),silent:o.get("silent")});m.attr(this._yearTextPositionControl(m,h[a],n,a,r)),i.add(m)}},e.prototype._monthTextPositionControl=function(t,e,n,i,o){var r="left",a="top",s=t[0],l=t[1];return"horizontal"===n?(l+=o,e&&(r="center"),"start"===i&&(a="bottom")):(s+=o,e&&(a="middle"),"start"===i&&(r="right")),{x:s,y:l,align:r,verticalAlign:a}},e.prototype._renderMonthText=function(t,e,n,i){var r=t.getModel("monthLabel");if(r.get("show")){var a=r.get("nameMap"),l=r.get("margin"),u=r.get("position"),p=r.get("align"),h=[this._tlpoints,this._blpoints];a&&!s(a)||(a&&(e=Te(a)||e),a=e.get(["time","monthAbbr"])||[]);var c="start"===u?0:1,g="horizontal"===n?0:1;l="start"===u?-l:l;for(var f="center"===p,y=r.get("silent"),m=0;m<h[c].length-1;m++){var v=h[c][m].slice(),x=this._firstDayOfMonth[m];if(f){var _=this._firstDayPoints[m];v[g]=(_[g]+h[0][m+1][g])/2}var b=r.get("formatter"),M=a[+x.m-1],S={yyyy:x.y,yy:(x.y+"").slice(2),MM:x.m,M:+x.m,nameMap:M},w=this._formatterLabel(b,S),I=new d({z2:30,style:o(yt(r,{text:w}),this._monthTextPositionControl(v,f,n,u,l)),silent:y});i.add(I)}}},e.prototype._weekTextPositionControl=function(t,e,n,i,o){var r="center",a="middle",s=t[0],l=t[1],u="start"===n;return"horizontal"===e?(s=s+i+(u?1:-1)*o[0]/2,r=u?"right":"left"):(l=l+i+(u?1:-1)*o[1]/2,a=u?"bottom":"top"),{x:s,y:l,align:r,verticalAlign:a}},e.prototype._renderWeekText=function(t,e,n,i,r){var l=t.getModel("dayLabel");if(l.get("show")){var u=t.coordinateSystem,p=l.get("position"),h=l.get("nameMap"),c=l.get("margin"),g=u.getFirstDayOfWeek();if(!h||s(h))h&&(e=Te(h)||e),h=e.get(["time","dayOfWeekShort"])||a(e.get(["time","dayOfWeekAbbr"]),function(t){return t[0]});var f=u.getNextNDay(n.end.time,7-n.lweek).time,y=[u.getCellWidth(),u.getCellHeight()];c=Ce(c,Math.min(y[1],y[0])),"start"===p&&(f=u.getNextNDay(n.start.time,-(7+n.fweek)).time,c=-c);for(var m=l.get("silent"),v=0;v<7;v++){var x,_=u.getNextNDay(f,v),b=u.dataToRect([_.time],!1).center;x=Math.abs((v+g)%7);var M=new d({z2:30,style:o(yt(l,{text:h[x]}),this._weekTextPositionControl(b,i,p,c,y)),silent:m});r.add(M)}}},e.type="calendar",e}(Tt);function Wa(t){t.registerComponentModel(Ae),t.registerComponentView(Ha),t.registerCoordinateSystem("calendar",De)}function Za(t,e){var n;return i(e,function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)}),n}var Fa=["transition","enterFrom","leaveTo"],Ya=Fa.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Xa(t,e,n){if(n&&(!t[n]&&e[n]&&(t[n]={}),t=t[n],e=e[n]),t&&e)for(var i=n?Fa:Ya,o=0;o<i.length;o++){var r=i[o];null==t[r]&&null!=e[r]&&(t[r]=e[r])}}var Ua=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return ii(e,t),e.prototype.mergeOption=function(e,n){var i=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,e,n),this.option.elements=i},e.prototype.optionUpdated=function(t,e){var n=this.option,r=(e?n:t).elements,a=n.elements=e?[]:n.elements,s=[];this._flatten(r,s,null);var l=ke(a,s,"normalMerge"),u=this._elOptionsToUpdate=[];i(l,function(t,e){var n=t.newOption;n&&(u.push(n),function(t,e){var n=t.existing;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var i=e.parentOption;i?e.parentId=i.id:n&&(e.parentId=n.parentId)}e.parentOption=null}(t,n),function(t,e,n){var i=o({},n),r=t[e],a=n.$action||"merge";"merge"===a?r?(G(r,i,!0),Pe(r,i,{ignoreSize:!0}),Le(n,r),Xa(n,r),Xa(n,r,"shape"),Xa(n,r,"style"),Xa(n,r,"extra"),n.clipPath=r.clipPath):t[e]=i:"replace"===a?t[e]=i:"remove"===a&&r&&(t[e]=null)}(a,e,n),function(t,e){if(t&&(t.hv=e.hv=[Za(e,["left","right"]),Za(e,["top","bottom"])],"group"===t.type)){var n=t,i=e;null==n.width&&(n.width=i.width=0),null==n.height&&(n.height=i.height=0)}}(a[e],n))},this),n.elements=X(a,function(t){return t&&delete t.$action,null!=t})},e.prototype._flatten=function(t,e,n){i(t,function(t){if(t){n&&(t.parentOption=n),e.push(t);var i=t.children;i&&i.length&&this._flatten(i,e,t),delete t.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(ge),Ka={path:null,compoundPath:null,group:p,image:K,text:d},ja=At(),qa=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.init=function(){this._elMap=C()},e.prototype.render=function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,r=this.group,a=t.get("z"),s=t.get("zlevel");i(e,function(e){var l=Oe(e.id,null),u=null!=l?n.get(l):null,p=Oe(e.parentId,null),h=null!=p?n.get(p):r,c=e.type,g=e.style;"text"===c&&g&&e.hv&&e.hv[1]&&(g.textVerticalAlign=g.textBaseline=g.verticalAlign=g.align=null);var f=e.textContent,y=e.textConfig;if(g&&Re(g,c,!!y,!!f)){var m=ze(g,c,!0);!y&&m.textConfig&&(y=e.textConfig=m.textConfig),!f&&m.textContent&&(f=m.textContent)}var v=function(t){return t=o({},t),i(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(We),function(e){delete t[e]}),t}(e),x=e.$action||"merge",_="merge"===x,b="replace"===x;if(_){var M=u;(D=!u)?M=Ja(l,h,e.type,n):(M&&(ja(M).isNew=!1),Ve(M)),M&&(Be(M,v,t,{isInit:D}),ts(M,e,a,s))}else if(b){Qa(u,e,n,t);var S=Ja(l,h,e.type,n);S&&(Be(S,v,t,{isInit:!0}),ts(S,e,a,s))}else"remove"===x&&(Ee(u,e),Qa(u,e,n,t));var w=n.get(l);if(w&&f)if(_){var I=w.getTextContent();I?I.attr(f):w.setTextContent(new d(f))}else b&&w.setTextContent(new d(f));if(w){var C=e.clipPath;if(C){var T=C.type,A=void 0,D=!1;if(_){var k=w.getClipPath();A=(D=!k||ja(k).type!==T)?$a(T):k}else b&&(D=!0,A=$a(T));w.setClipPath(A),Be(A,C,t,{isInit:D}),Ge(A,C.keyframeAnimation,t)}var P=ja(w);w.setTextConfig(y),P.option=e,function(t,e,n){var i=vt(t).eventData;t.silent||t.ignore||i||(i=vt(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name});i&&(i.info=n.info)}(w,t,e),mt({el:w,componentModel:t,itemName:w.name,itemTooltipOption:e.tooltip}),Ge(w,e.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,e){for(var n=t.option.elements,i=this.group,o=this._elMap,r=e.getWidth(),a=e.getHeight(),s=["x","y"],l=0;l<n.length;l++){var u=n[l];if((g=null!=(d=Oe(u.id,null))?o.get(d):null)&&g.isGroup){var p=(f=g.parent)===i,h=ja(g),c=ja(f);h.width=Ce(h.option.width,p?r:c.width)||0,h.height=Ce(h.option.height,p?a:c.height)||0}}for(l=n.length-1;l>=0;l--){var d,g;u=n[l];if(g=null!=(d=Oe(u.id,null))?o.get(d):null){var f=g.parent,y=(c=ja(f),f===i?{width:r,height:a}:{width:c.width,height:c.height}),m={},v=Ne(g,u,y,null,{hv:u.hv,boundingMode:u.bounding},m);if(!ja(g).isNew&&v){for(var x=u.transition,_={},b=0;b<s.length;b++){var M=s[b],S=m[M];x&&(He(x)||I(x,M)>=0)?_[M]=S:g[M]=S}Ht(g,_,t,0)}else g.attr(m)}}},e.prototype._clear=function(){var t=this,e=this._elMap;e.each(function(n){Qa(n,ja(n).option,e,t._lastGraphicModel)}),this._elMap=C()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Tt);function $a(t){var e=new(n(Ka,t)?Ka[t]:Fe(t))({});return ja(e).type=t,e}function Ja(t,e,n,i){var o=$a(n);return e.add(o),i.set(t,o),ja(o).id=t,ja(o).isNew=!0,o}function Qa(t,e,n,i){t&&t.parent&&("group"===t.type&&t.traverse(function(t){Qa(t,e,n,i)}),Ze(t,e,i),n.removeKey(ja(t).id))}function ts(t,e,o,r){t.isGroup||i([["cursor",E.prototype.cursor],["zlevel",r||0],["z",o||0],["z2",0]],function(i){var o=i[0];n(e,o)?t[o]=m(e[o],i[1]):null==t[o]&&(t[o]=i[1])}),i(U(e),function(n){if(0===n.indexOf("on")){var i=e[n];t[n]=v(i)?i:null}}),n(e,"draggable")&&(t.draggable=e.draggable),null!=e.name&&(t.name=e.name),null!=e.id&&(t.id=e.id)}function es(t){t.registerComponentModel(Ua),t.registerComponentView(qa),t.registerPreprocessor(function(t){var n=t.graphic;e(n)?n[0]&&n[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:n}]:n&&!n.elements&&(t.graphic=[{elements:[n]}])})}var ns=["x","y","radius","angle","single"],is=["cartesian2d","polar","singleAxis"];function os(t){return t+"Axis"}function rs(t,e){var n,i=C(),o=[],r=C();t.eachComponent({mainType:"dataZoom",query:e},function(t){r.get(t.uid)||s(t)});do{n=!1,t.eachComponent("dataZoom",a)}while(n);function a(t){!r.get(t.uid)&&function(t){var e=!1;return t.eachTargetAxis(function(t,n){var o=i.get(t);o&&o[n]&&(e=!0)}),e}(t)&&(s(t),n=!0)}function s(t){r.set(t.uid,!0),o.push(t),t.eachTargetAxis(function(t,e){(i.get(t)||i.set(t,[]))[e]=!0})}return o}function as(t){var e=t.ecModel,n={infoList:[],infoMap:C()};return t.eachTargetAxis(function(t,i){var o=e.getComponent(os(t),i);if(o){var r=o.getCoordSysModel();if(r){var a=r.uid,s=n.infoMap.get(a);s||(s={model:r,axisModels:[]},n.infoList.push(s),n.infoMap.set(a,s)),s.axisModels.push(o)}}}),n}var ss=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}(),ls=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return ii(e,t),e.prototype.init=function(t,e,n){var i=us(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this._doInit(i)},e.prototype.mergeOption=function(t){var e=us(t);G(this.option,t,!0),G(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;i([["start","startValue"],["end","endValue"]],function(t,i){"value"===this._rangePropMode[i]&&(e[t[0]]=n[t[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=C();this._fillSpecifiedTargetAxis(e)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each(function(t){t.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return i(ns,function(n){var o=this.getReferringComponents(os(n),Ye);if(o.specified){e=!0;var r=new ss;i(o.models,function(t){r.add(t.componentIndex)}),t.set(n,r)}},this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var n=this.ecModel,o=!0;if(o){var r="vertical"===e?"y":"x";a(n.findComponents({mainType:r+"Axis"}),r)}o&&a(n.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}}),"single");function a(e,n){var r=e[0];if(r){var a=new ss;if(a.add(r.componentIndex),t.set(n,a),o=!1,"x"===n||"y"===n){var s=r.getReferringComponents("grid",Xe).models[0];s&&i(e,function(t){r.componentIndex!==t.componentIndex&&s===t.getReferringComponents("grid",Xe).models[0]&&a.add(t.componentIndex)})}}}o&&i(ns,function(e){if(o){var i=n.findComponents({mainType:os(e),filter:function(t){return"category"===t.get("type",!0)}});if(i[0]){var r=new ss;r.add(i[0].componentIndex),t.set(e,r),o=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(e){!t&&(t=e)},this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,n=this.get("rangeMode");i([["start","startValue"],["end","endValue"]],function(i,o){var r=null!=t[i[0]],a=null!=t[i[1]];r&&!a?e[o]="percent":!r&&a?e[o]="value":n?e[o]=n[o]:r&&(e[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(e,n){null==t&&(t=this.ecModel.getComponent(os(e),n))},this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each(function(n,o){i(n.indexList,function(n){t.call(e,o,n)})})},e.prototype.getAxisProxy=function(t,e){var n=this.getAxisModel(t,e);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[e])return this.ecModel.getComponent(os(t),e)},e.prototype.setRawRange=function(t){var e=this.option,n=this.settledOption;i([["start","startValue"],["end","endValue"]],function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=n[i[0]]=t[i[0]],e[i[1]]=n[i[1]]=t[i[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;i(["start","startValue","end","endValue"],function(n){e[n]=t[n]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var o=n[i],r=this._targetAxisInfoMap.get(o),a=0;a<r.indexList.length;a++){var s=this.getAxisProxy(o,r.indexList[a]);if(s.hostedBy(this))return s;e||(e=s)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(ge);function us(t){var e={};return i(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var ps=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="dataZoom.select",e}(ls),hs=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.render=function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},e.type="dataZoom",e}(Tt),cs=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="dataZoom.select",e}(hs),ds=i,gs=Ke,fs=function(){function t(t,e,n,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=n}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(function(t){var e=t.get("coordinateSystem");return I(is,e)>=0}(e)){var n=os(this._dimName),i=e.getReferringComponents(n,Xe).models[0];i&&this._axisIndex===i.componentIndex&&t.push(e)}},this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return w(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,n=this._dataExtent,i=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),r=[0,100],a=[],s=[];ds(["start","end"],function(l,u){var p=t[l],h=t[l+"Value"];"percent"===o[u]?(null==p&&(p=r[u]),h=i.parse(Ue(p,r,n))):(e=!0,h=null==h?n[u]:i.parse(h),p=Ue(h,n,r)),s[u]=null==h||isNaN(h)?n[u]:h,a[u]=null==p||isNaN(p)?r[u]:p}),gs(s),gs(a);var l=this._minMaxSpan;function u(t,e,n,o,r){var a=r?"Span":"ValueSpan";ko(0,t,n,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)e[s]=Ue(t[s],n,o,!0),r&&(e[s]=i.parse(e[s]))}return e?u(s,a,n,r,!1):u(a,s,r,n,!0),{valueWindow:s,percentWindow:a}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var i=[1/0,-1/0];ds(n,function(t){qe(i,t.getData(),e)});var o=t.getAxisModel(),r=$e(o.axis.scale,o,i).calculate();return[r.min,r.max]}(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),o=t.get("filterMode"),r=this._valueWindow;"none"!==o&&ds(i,function(t){var e=t.getData(),i=e.mapDimensionsAll(n);if(i.length){if("weakFilter"===o){var s=e.getStore(),l=a(i,function(t){return e.getDimensionIndex(t)},e);e.filterSelf(function(t){for(var e,n,o,a=0;a<i.length;a++){var u=s.get(l[a],t),p=!isNaN(u),h=u<r[0],c=u>r[1];if(p&&!h&&!c)return!0;p&&(o=!0),h&&(e=!0),c&&(n=!0)}return o&&e&&n})}else ds(i,function(n){if("empty"===o)t.setData(e=e.map(n,function(t){return function(t){return t>=r[0]&&t<=r[1]}(t)?t:NaN}));else{var i={};i[n]=r,e.selectRange(i)}});ds(i,function(t){e.setApproximateExtent(r,t)})}})}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;ds(["min","max"],function(i){var o=e.get(i+"Span"),r=e.get(i+"ValueSpan");null!=r&&(r=this.getAxisModel().axis.scale.parse(r)),null!=r?o=Ue(n[0]+r,n,[0,100],!0):null!=o&&(r=Ue(o,[0,100],n,!0)-n[0]),t[i+"Span"]=o,t[i+"ValueSpan"]=r},this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var i=je(n,[0,500]);i=Math.min(i,20);var o=t.axis.scale.rawExtentInfo;0!==e[0]&&o.setDeterminedMinMax("min",+n[0].toFixed(i)),100!==e[1]&&o.setDeterminedMinMax("max",+n[1].toFixed(i)),o.freeze()}},t}();var ys={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(i,o){var r=t.getComponent(os(i),o);e(i,o,r,n)})})}e(function(t,e,n,i){n.__dzAxisProxy=null});var n=[];e(function(e,i,o,r){o.__dzAxisProxy||(o.__dzAxisProxy=new fs(e,i,r,t),n.push(o.__dzAxisProxy))});var o=C();return i(n,function(t){i(t.getTargetSeriesModels(),function(t){o.set(t.uid,t)})}),o},overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(e,n){t.getAxisProxy(e,n).reset(t)}),t.eachTargetAxis(function(n,i){t.getAxisProxy(n,i).filterData(t,e)})}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy();if(e){var n=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}})}};var ms=!1;function vs(t){ms||(ms=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,ys),function(t){t.registerAction("dataZoom",function(t,e){var n=rs(e,t);i(n,function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function xs(t){t.registerComponentModel(ps),t.registerComponentView(cs),vs(t)}var _s=function(){return function(){}}(),bs={};function Ms(t,e){bs[t]=e}function Ss(t){return bs[t]}var ws=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;i(this.option.feature,function(t,n){var i=Ss(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),G(t,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(ge);function Is(t,e){var n=he(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),t=new T({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}var Cs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.render=function(t,e,n,o){var r=this.group;if(r.removeAll(),t.get("show")){var a=+t.get("itemSize"),l="vertical"===t.get("orient"),u=t.get("feature")||{},p=this._features||(this._features={}),h=[];i(u,function(t,e){h.push(e)}),new ee(this._featureNames||[],h).add(c).update(c).remove(S(c,null)).execute(),this._featureNames=h,function(t,e,n){var i=e.getBoxLayoutParams(),o=e.get("padding"),r={width:n.getWidth(),height:n.getHeight()},a=Je(i,r,o);Qe(e.get("orient"),t,e.get("itemGap"),a.width,a.height),Ne(t,i,r,o)}(r,t,n),r.add(Is(r.getBoundingRect(),t)),l||r.eachChild(function(t){var e=t.__title,i=t.ensureState("emphasis"),o=i.textConfig||(i.textConfig={}),s=t.getTextContent(),l=s&&s.ensureState("emphasis");if(l&&!v(l)&&e){var u=l.style||(l.style={}),p=H(e,d.makeFont(u)),h=t.x+r.x,c=!1;t.y+r.y+a+p.height>n.getHeight()&&(o.position="top",c=!0);var g=c?-5-p.height:a+10;h+p.width/2>n.getWidth()?(o.position=["100%",g],u.align="right"):h-p.width/2<0&&(o.position=[0,g],u.align="left")}})}function c(c,g){var f,y=h[c],m=h[g],v=u[y],x=new wt(v,t,t.ecModel);if(o&&null!=o.newTitle&&o.featureName===y&&(v.title=o.newTitle),y&&!m){if(function(t){return 0===t.indexOf("my")}(y))f={onclick:x.option.onclick,featureName:y};else{var _=Ss(y);if(!_)return;f=new _}p[y]=f}else if(!(f=p[m]))return;f.uid=Nt("toolbox-feature"),f.model=x,f.ecModel=e,f.api=n;var b=f instanceof _s;y||!m?!x.get("show")||b&&f.unusable?b&&f.remove&&f.remove(e,n):(!function(o,u,p){var h,c,g=o.getModel("iconStyle"),f=o.getModel(["emphasis","iconStyle"]),y=u instanceof _s&&u.getIcons?u.getIcons():o.get("icon"),m=o.get("title")||{};s(y)?(h={})[p]=y:h=y;s(m)?(c={})[p]=m:c=m;var v=o.iconPaths={};i(h,function(i,s){var p=pe(i,{},{x:-a/2,y:-a/2,width:a,height:a});p.setStyle(g.getItemStyle()),p.ensureState("emphasis").style=f.getItemStyle();var h=new d({style:{text:c[s],align:f.get("textAlign"),borderRadius:f.get("textBorderRadius"),padding:f.get("textPadding"),fill:null,font:nn({fontStyle:f.get("textFontStyle"),fontFamily:f.get("textFontFamily"),fontSize:f.get("textFontSize"),fontWeight:f.get("textFontWeight")},e)},ignore:!0});p.setTextContent(h),mt({el:p,componentModel:t,itemName:s,formatterParamsExtra:{title:c[s]}}),p.__title=c[s],p.on("mouseover",function(){var e=f.getItemStyle(),i=l?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";h.setStyle({fill:f.get("textFill")||e.fill||e.stroke||"#000",backgroundColor:f.get("textBackgroundColor")}),p.setTextConfig({position:f.get("textPosition")||i}),h.ignore=!t.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==o.get(["iconStatus",s])&&n.leaveEmphasis(this),h.hide()}),("emphasis"===o.get(["iconStatus",s])?tn:en)(p),r.add(p),p.on("click",O(u.onclick,u,e,n,s)),v[s]=p})}(x,f,y),x.setIconStatus=function(t,e){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,i[t]&&("emphasis"===e?tn:en)(i[t])},f instanceof _s&&f.render&&f.render(x,e,n,o)):b&&f.dispose&&f.dispose(e,n)}},e.prototype.updateView=function(t,e,n,o){i(this._features,function(t){t instanceof _s&&t.updateView&&t.updateView(t.model,e,n,o)})},e.prototype.remove=function(t,e){i(this._features,function(n){n instanceof _s&&n.remove&&n.remove(t,e)}),this.group.removeAll()},e.prototype.dispose=function(t,e){i(this._features,function(n){n instanceof _s&&n.dispose&&n.dispose(t,e)})},e.type="toolbox",e}(Tt);var Ts=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",o="svg"===e.getZr().painter.getType(),r=o?"svg":n.get("type",!0)||"png",a=e.getConnectedDataURL({type:r,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=F.browser;if("function"!=typeof MouseEvent||!s.newEdge&&(s.ie||s.edge))if(window.navigator.msSaveOrOpenBlob||o){var l=a.split(","),u=l[0].indexOf("base64")>-1,p=o?decodeURIComponent(l[1]):l[1];u&&(p=window.atob(p));var h=i+"."+r;if(window.navigator.msSaveOrOpenBlob){for(var c=p.length,d=new Uint8Array(c);c--;)d[c]=p.charCodeAt(c);var g=new Blob([d]);window.navigator.msSaveOrOpenBlob(g,h)}else{var f=document.createElement("iframe");document.body.appendChild(f);var y=f.contentWindow,m=y.document;m.open("image/svg+xml","replace"),m.write(p),m.close(),y.focus(),m.execCommand("SaveAs",!0,h),document.body.removeChild(f)}}else{var v=n.get("lang"),x='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(v&&v[0]||"")+'" /></body>',_=window.open();_.document.write(x),_.document.title=i}else{var b=document.createElement("a");b.download=i+"."+r,b.target="_blank",b.href=a;var M=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(M)}},e.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},e}(_s),As="__ec_magicType_stack__",Ds=[["line","bar"],["stack"]],ks=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return i(t.get("type"),function(t){e[t]&&(n[t]=e[t])}),n},e.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},e.prototype.onclick=function(t,e,n){var o=this.model,r=o.get(["seriesIndex",n]);if(Ps[n]){var a,s={series:[]};i(Ds,function(t){I(t,n)>=0&&i(t,function(t){o.setIconStatus(t,"normal")})}),o.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},function(t){var e=t.subType,i=t.id,r=Ps[n](e,i,t,o);r&&(h(r,t.option),s.series.push(r));var a=t.coordinateSystem;if(a&&"cartesian2d"===a.type&&("line"===n||"bar"===n)){var l=a.getAxesByScale("ordinal")[0];if(l){var u=l.dim+"Axis",p=t.getReferringComponents(u,Xe).models[0].componentIndex;s[u]=s[u]||[];for(var c=0;c<=p;c++)s[u][p]=s[u][p]||{};s[u][p].boundaryGap="bar"===n}}});var l=n;"stack"===n&&(a=G({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),"emphasis"!==o.get(["iconStatus",n])&&(l="tiled")),e.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:a,featureName:"magicType"})}},e}(_s),Ps={line:function(t,e,n,i){if("bar"===t)return G({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(t,e,n,i){if("line"===t)return G({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(t,e,n,i){var o=n.get("stack")===As;if("line"===t||"bar"===t)return i.setIconStatus("stack",o?"normal":"emphasis"),G({id:e,stack:o?"":As},i.get(["option","stack"])||{},!0)}};Gt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});var Ls=new Array(60).join("-"),Os="\t";function Rs(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var zs=new RegExp("[\t]+","g");function Vs(t,e){var n=t.split(new RegExp("\n*"+Ls+"\n*","g")),o={series:[]};return i(n,function(t,n){if(function(t){if(t.slice(0,t.indexOf("\n")).indexOf(Os)>=0)return!0}(t)){var i=function(t){for(var e=t.split(/\n+/g),n=Rs(e.shift()).split(zs),i=[],o=a(n,function(t){return{name:t,data:[]}}),r=0;r<e.length;r++){var s=Rs(e[r]).split(zs);i.push(s.shift());for(var l=0;l<s.length;l++)o[l]&&(o[l].data[r]=s[l])}return{series:o,categories:i}}(t),r=e[n],s=r.axisDim+"Axis";r&&(o[s]=o[s]||[],o[s][r.axisIndex]={data:i.categories},o.series=o.series.concat(i.series))}else{i=function(t){for(var e=t.split(/\n+/g),n=Rs(e.shift()),i=[],o=0;o<e.length;o++){var r=Rs(e[o]);if(r){var a=r.split(zs),s="",l=void 0,u=!1;isNaN(a[0])?(u=!0,s=a[0],a=a.slice(1),i[o]={name:s,value:[]},l=i[o].value):l=i[o]=[];for(var p=0;p<a.length;p++)l.push(+a[p]);1===l.length&&(u?i[o].value=l[0]:i[o]=l[0])}}return{name:n,data:i}}(t);o.series.push(i)}}),o}var Bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.onclick=function(t,e){setTimeout(function(){e.dispatchAction({type:"hideTip"})});var n=e.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=o.get("backgroundColor")||"#fff";var l=document.createElement("h4"),u=o.get("lang")||[];l.innerHTML=u[0]||o.get("title"),l.style.cssText="margin:10px 20px",l.style.color=o.get("textColor");var p=document.createElement("div"),h=document.createElement("textarea");p.style.cssText="overflow:auto";var c=o.get("optionToContent"),d=o.get("contentToOption"),g=function(t){var e,n,o,r=function(t){var e={},n=[],i=[];return t.eachRawSeries(function(t){var o=t.coordinateSystem;if(!o||"cartesian2d"!==o.type&&"polar"!==o.type)n.push(t);else{var r=o.getBaseAxis();if("category"===r.type){var a=r.dim+"_"+r.index;e[a]||(e[a]={categoryAxis:r,valueAxis:o.getOtherAxis(r),series:[]},i.push({axisDim:r.dim,axisIndex:r.index})),e[a].series.push(t)}else n.push(t)}}),{seriesGroupByCategoryAxis:e,other:n,meta:i}}(t);return{value:X([(n=r.seriesGroupByCategoryAxis,o=[],i(n,function(t,e){var n=t.categoryAxis,r=t.valueAxis.dim,s=[" "].concat(a(t.series,function(t){return t.name})),l=[n.model.getCategories()];i(t.series,function(t){var e=t.getRawData();l.push(t.getRawData().mapArray(e.mapDimension(r),function(t){return t}))});for(var u=[s.join(Os)],p=0;p<l[0].length;p++){for(var h=[],c=0;c<l.length;c++)h.push(l[c][p]);u.push(h.join(Os))}o.push(u.join("\n"))}),o.join("\n\n"+Ls+"\n\n")),(e=r.other,a(e,function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,function(){for(var t=arguments.length,o=arguments[t-1],r=e.getName(o),a=0;a<t-1;a++)i[a]=arguments[a];n.push((r?r+Os:"")+i.join(Os))}),n.join("\n")}).join("\n\n"+Ls+"\n\n"))],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join("\n\n"+Ls+"\n\n"),meta:r.meta}}(t);if(v(c)){var f=c(e.getOption());s(f)?p.innerHTML=f:j(f)&&p.appendChild(f)}else{h.readOnly=o.get("readOnly");var y=h.style;y.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",y.color=o.get("textColor"),y.borderColor=o.get("textareaBorderColor"),y.backgroundColor=o.get("textareaColor"),h.value=g.value,p.appendChild(h)}var m=g.meta,x=document.createElement("div");x.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),M=document.createElement("div");_+=";background-color:"+o.get("buttonColor"),_+=";color:"+o.get("buttonTextColor");var S=this;function w(){n.removeChild(r),S._dom=null}q(b,"click",w),q(M,"click",function(){if(null==d&&null!=c||null!=d&&null==c)w();else{var t;try{t=v(d)?d(p,e.getOption()):Vs(h.value,m)}catch(n){throw w(),new Error("Data view format error "+n)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),w()}}),b.innerHTML=u[1],M.innerHTML=u[2],M.style.cssText=b.style.cssText=_,!o.get("readOnly")&&x.appendChild(M),x.appendChild(b),r.appendChild(l),r.appendChild(p),r.appendChild(x),p.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},e.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},e}(_s);function Es(t,n){return a(t,function(t,i){var o=n&&n[i];if(y(o)&&!e(o)){y(t)&&!e(t)||(t={value:t});var r=null!=o.name&&null==t.name;return t=h(t,o),r&&delete t.name,t}return t})}Gt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];i(t.newOption.series,function(t){var i=e.getSeriesByName(t.name)[0];if(i){var r=i.get("data");n.push({name:t.name,data:Es(t.data,r)})}else n.push(o({type:"scatter"},t))}),e.mergeOption(h({series:n},t.newOption))});var Gs=i,Ns=At();function Hs(t){var e=Ns(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var Ws=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.onclick=function(t,e){!function(t){Ns(t).snapshots=null}(t),e.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},e}(_s);Gt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var Zs=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Fs=function(){function t(t,e,n){var o=this;this._targetInfoList=[];var r=Xs(e,t);i(Us,function(t,e){(!n||!n.include||I(n.include,e)>=0)&&t(r,o._targetInfoList)})}return t.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var i=qs[t.brushType](0,n,e);t.__rangeOffset={offset:Js[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}}),t},t.prototype.matchOutputRanges=function(t,e,n){i(t,function(t){var o=this.findTargetInfo(t,e);o&&!0!==o&&i(o.coordSyses,function(i){var o=qs[t.brushType](1,i,t.range,!0);n(t,o.values,i,e)})},this)},t.prototype.setInputRanges=function(t,e){i(t,function(t){var n,i,o,r,a,s=this.findTargetInfo(t,e);if(t.range=t.range||[],s&&!0!==s){t.panelId=s.panelId;var l=qs[t.brushType](0,s.coordSys,t.coordRange),u=t.__rangeOffset;t.range=u?Js[t.brushType](l.values,u.offset,(n=l.xyMinMax,i=u.xyMinMax,o=tl(n),r=tl(i),a=[o[0]/r[0],o[1]/r[1]],isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a)):l.values}},this)},t.prototype.makePanelOpts=function(t,e){return a(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:xr(i),isTargetByCursor:br(i,t,n.coordSysModel),getLinearBrushOtherExtent:_r(i)}})},t.prototype.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&I(i.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=Xs(e,t),o=0;o<n.length;o++){var r=n[o],a=t.panelId;if(a){if(r.panelId===a)return r}else for(var s=0;s<Ks.length;s++)if(Ks[s](i,r))return r}return!0},t}();function Ys(t){return t[0]>t[1]&&t.reverse(),t}function Xs(t,e){return on(t,e,{includeMainTypes:Zs})}var Us={grid:function(t,e){var n=t.xAxisModels,o=t.yAxisModels,r=t.gridModels,a=C(),s={},l={};(n||o||r)&&(i(n,function(t){var e=t.axis.grid.model;a.set(e.id,e),s[e.id]=!0}),i(o,function(t){var e=t.axis.grid.model;a.set(e.id,e),l[e.id]=!0}),i(r,function(t){a.set(t.id,t),s[t.id]=!0,l[t.id]=!0}),a.each(function(t){var r=t.coordinateSystem,a=[];i(r.getCartesians(),function(t,e){(I(n,t.getAxis("x").model)>=0||I(o,t.getAxis("y").model)>=0)&&a.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:a[0],coordSyses:a,getPanelRect:js.grid,xAxisDeclared:s[t.id],yAxisDeclared:l[t.id]})}))},geo:function(t,e){i(t.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:js.geo})})}},Ks=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,o=t.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&i&&(o=i.axis.grid.model),o&&o===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],js={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(ie(t)),e}},qs={lineX:S($s,0),lineY:S($s,1),rect:function(t,e,n,i){var o=t?e.pointToData([n[0][0],n[1][0]],i):e.dataToPoint([n[0][0],n[1][0]],i),r=t?e.pointToData([n[0][1],n[1][1]],i):e.dataToPoint([n[0][1],n[1][1]],i),a=[Ys([o[0],r[0]]),Ys([o[1],r[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n,i){var o=[[1/0,-1/0],[1/0,-1/0]];return{values:a(n,function(n){var r=t?e.pointToData(n,i):e.dataToPoint(n,i);return o[0][0]=Math.min(o[0][0],r[0]),o[1][0]=Math.min(o[1][0],r[1]),o[0][1]=Math.max(o[0][1],r[0]),o[1][1]=Math.max(o[1][1],r[1]),r}),xyMinMax:o}}};function $s(t,e,n,i){var o=n.getAxis(["x","y"][t]),r=Ys(a([0,1],function(t){return e?o.coordToData(o.toLocalCoord(i[t]),!0):o.toGlobalCoord(o.dataToCoord(i[t]))})),s=[];return s[t]=r,s[1-t]=[NaN,NaN],{values:r,xyMinMax:s}}var Js={lineX:S(Qs,0),lineY:S(Qs,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return a(t,function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]})}};function Qs(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function tl(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var el=i,nl=an("toolbox-dataZoom_"),il=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.render=function(t,e,n,i){this._brushController||(this._brushController=new Wo(n.getZr()),this._brushController.on("brush",O(this._onBrush,this)).mount()),function(t,e,n,i,o){var r=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(r="dataZoomSelect"===i.key&&i.dataZoomSelectActive);n._isZoomActive=r,t.setIconStatus("zoom",r?"emphasis":"normal");var a=new Fs(rl(t),e,{include:["grid"]}),s=a.makePanelOpts(o,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(s).enableBrush(!(!r||!s.length)&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,e,this,i,n),function(t,e){t.setIconStatus("back",function(t){return Hs(t).length}(e)>1?"emphasis":"normal")}(t,e)},e.prototype.onclick=function(t,e,n){ol[n].call(this)},e.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new Fs(rl(this.model),i,{include:["grid"]}).matchOutputRanges(e,i,function(t,e,n){if("cartesian2d"===n.type){var i=t.brushType;"rect"===i?(o("x",n,e[0]),o("y",n,e[1])):o({lineX:"x",lineY:"y"}[i],n,e)}}),function(t,e){var n=Hs(t);Gs(e,function(e,i){for(var o=n.length-1;o>=0&&!n[o][i];o--);if(o<0){var r=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(r){var a=r.getPercentRange();n[0][i]={dataZoomId:i,start:a[0],end:a[1]}}}}),n.push(e)}(i,n),this._dispatchZoomAction(n)}function o(t,e,o){var r=e.getAxis(t),a=r.model,s=function(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(t,e.componentIndex)&&(i=n)}),i}(t,a,i),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(o=ko(0,o.slice(),r.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:o[0],endValue:o[1]})}},e.prototype._dispatchZoomAction=function(t){var e=[];el(t,function(t,n){e.push(w(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},e.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},e}(_s),ol={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(function(t){var e=Hs(t),n=e[e.length-1];e.length>1&&e.pop();var i={};return Gs(n,function(t,n){for(var o=e.length-1;o>=0;o--)if(t=e[o][n]){i[n]=t;break}}),i}(this.ecModel))}};function rl(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}function al(t){t.registerComponentModel(ws),t.registerComponentView(Cs),Ms("saveAsImage",Ts),Ms("magicType",ks),Ms("dataView",Bs),Ms("dataZoom",il),Ms("restore",Ws),ye(xs)}rn("dataZoom",function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(e&&null!=e.get(n)){var i=e.getModel(n),o=[],r=rl(i),a=on(t,r);return el(a.xAxisModels,function(t){return s(t,"xAxis","xAxisIndex")}),el(a.yAxisModels,function(t){return s(t,"yAxis","yAxisIndex")}),o}function s(t,e,n){var r=t.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:nl+e+r};a[n]=r,o.push(a)}});var sl=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(ge);function ll(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function ul(t){if(F.domSupported)for(var e=document.documentElement.style,n=0,i=t.length;n<i;n++)if(t[n]in e)return t[n]}var pl=ul(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function hl(t,e){if(!t)return e;e=sn(e,!0);var n=t.indexOf(e);return(t=-1===n?e:"-"+t.slice(0,n)+"-"+e).toLowerCase()}var cl=hl(ul(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),dl=hl(pl,"transform"),gl="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(F.transform3dSupported?"will-change:transform;":"");function fl(t,e,n){var i=t.toFixed(0)+"px",o=e.toFixed(0)+"px";if(!F.transformSupported)return n?"top:"+o+";left:"+i+";":[["top",o],["left",i]];var r=F.transform3dSupported,a="translate"+(r?"3d":"")+"("+i+","+o+(r?",0":"")+")";return n?"top:0;left:0;"+dl+":"+a+";":[["top",0],["left",0],[pl,a]]}function yl(t,e,n){var o=[],r=t.get("transitionDuration"),a=t.get("backgroundColor"),s=t.get("shadowBlur"),l=t.get("shadowColor"),u=t.get("shadowOffsetX"),p=t.get("shadowOffsetY"),h=t.getModel("textStyle"),c=_i(t,"html"),d=u+"px "+p+"px "+s+"px "+l;return o.push("box-shadow:"+d),e&&r&&o.push(function(t,e){var n="cubic-bezier(0.23,1,0.32,1)",i=" "+t/2+"s "+n,o="opacity"+i+",visibility"+i;return e||(i=" "+t+"s "+n,o+=F.transformSupported?","+dl+i:",left"+i+",top"+i),cl+":"+o}(r,n)),a&&o.push("background-color:"+a),i(["width","color","radius"],function(e){var n="border-"+e,i=sn(n),r=t.get(i);null!=r&&o.push(n+":"+r+("color"===e?"":"px"))}),o.push(function(t){var e=[],n=t.get("fontSize"),o=t.getTextColor();o&&e.push("color:"+o),e.push("font:"+t.getFont());var r=m(t.get("lineHeight"),Math.round(3*n/2));n&&e.push("line-height:"+r+"px");var a=t.get("textShadowColor"),s=t.get("textShadowBlur")||0,l=t.get("textShadowOffsetX")||0,u=t.get("textShadowOffsetY")||0;return a&&s&&e.push("text-shadow:"+l+"px "+u+"px "+s+"px "+a),i(["decoration","align"],function(n){var i=t.get(n);i&&e.push("text-"+n+":"+i)}),e.join(";")}(h)),null!=c&&o.push("padding:"+he(c).join("px ")+"px"),o.join(";")+";"}function ml(t,e,n,i,o){var r=e&&e.painter;if(n){var a=r&&r.getViewportRoot();a&&J(t,a,n,i,o)}else{t[0]=i,t[1]=o;var s=r&&r.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var vl=function(){function t(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,F.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var i=this._zr=t.getZr(),o=e.appendTo,r=o&&(s(o)?document.querySelector(o):j(o)?o:v(o)&&o(t.getDom()));ml(this._styleCoord,i,r,t.getWidth()/2,t.getHeight()/2),(r||t.getDom()).appendChild(n),this._api=t,this._container=r;var a=this;n.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},n.onmousemove=function(t){if(t=t||window.event,!a._enterable){var e=i.handler,n=i.painter.getViewportRoot();$(n,t,!0),e.dispatch("mousemove",t)}},n.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return t.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),n=(r="position",(a=(o=e).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(o))?a[r]:null),i=e.style;"absolute"!==i.position&&"absolute"!==n&&(i.position="relative")}var o,r,a,s=t.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=gl+yl(t,!this._firstShow,this._longHide)+fl(o[0],o[1],!0)+"border-color:"+lt(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(t,n,i,o,r){var a=this.el;if(null!=t){var l="";if(s(r)&&"item"===i.get("trigger")&&!ll(i)&&(l=function(t,e,n){if(!s(n)||"inside"===n)return"";var i=t.get("backgroundColor"),o=t.get("borderWidth");e=lt(e);var r,a,l="left"===(r=n)?"right":"right"===r?"left":"top"===r?"bottom":"top",u=Math.max(1.5*Math.round(o),6),p="",h=dl+":";I(["left","right"],l)>-1?(p+="top:50%",h+="translateY(-50%) rotate("+(a="left"===l?-225:-45)+"deg)"):(p+="left:50%",h+="translateX(-50%) rotate("+(a="top"===l?225:45)+"deg)");var c=a*Math.PI/180,d=u+o,g=d*Math.abs(Math.cos(c))+d*Math.abs(Math.sin(c)),f=e+" solid "+o+"px;";return'<div style="'+["position:absolute;width:"+u+"px;height:"+u+"px;z-index:-1;",(p+=";"+l+":-"+Math.round(100*((g-Math.SQRT2*o)/2+Math.SQRT2*o-(g-d)/2))/100+"px")+";"+h+";","border-bottom:"+f,"border-right:"+f,"background-color:"+i+";"].join("")+'"></div>'}(i,o,r)),s(t))a.innerHTML=t+l;else if(t){a.innerHTML="",e(t)||(t=[t]);for(var u=0;u<t.length;u++)j(t[u])&&t[u].parentNode!==a&&a.appendChild(t[u]);if(l&&a.childNodes.length){var p=document.createElement("div");p.innerHTML=l,a.appendChild(p)}}}else a.innerHTML=""},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return t?[t.offsetWidth,t.offsetHeight]:[0,0]},t.prototype.moveTo=function(t,e){if(this.el){var n=this._styleCoord;if(ml(n,this._zr,this._container,t,e),null!=n[0]&&null!=n[1]){var o=this.el.style,r=fl(n[0],n[1]);i(r,function(t){o[t[0]]=t[1]})}}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",F.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(O(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},t}(),xl=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),Ml(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,e,n,o,r){var a=this;y(t)&&ln(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new d({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:_i(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),i(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(t){a.el.style[t]=n.get(t)}),i(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(t){a.el.style[t]=s.get(t)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=bl(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},t.prototype.moveTo=function(t,e){var n=this.el;if(n){var i=this._styleCoord;Ml(i,this._zr,t,e),t=i[0],e=i[1];var o=n.style,r=_l(o.borderWidth||0),a=bl(o);n.x=t+r+a.left,n.y=e+r+a.top,n.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(O(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function _l(t){return Math.max(0,t)}function bl(t){var e=_l(t.shadowBlur||0),n=_l(t.shadowOffsetX||0),i=_l(t.shadowOffsetY||0);return{left:_l(e-n),right:_l(e+n),top:_l(e-i),bottom:_l(e+i)}}function Ml(t,e,n,i){t[0]=n,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Sl=new T({shape:{x:-1,y:-1,width:2,height:2}}),wl=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return ii(n,t),n.prototype.init=function(t,e){if(!F.node&&e.getDom()){var n=t.getComponent("tooltip"),i=this._renderMode=un(n.get("renderMode"));this._tooltipContent="richText"===i?new xl(e):new vl(e,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},n.prototype.render=function(t,e,n){if(!F.node&&n.getDom()){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n;var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&t.get("transitionDuration")?Qt(this,"_updatePosition",50,"fixRate"):te(this,"_updatePosition")}},n.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");Jr("itemTooltip",this._api,O(function(e,n,i){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(n,i):"leave"===e&&this._hide(i))},this))},n.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,n=this._api,i=t.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==i&&"click"!==i){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&o.manuallyShowTip(t,e,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},n.prototype.manuallyShowTip=function(t,e,n,i){if(i.from!==this.uid&&!F.node&&n.getDom()){var o=Cl(i,n);this._ticket="";var r=i.dataByCoordSys,a=function(t,e,n){var i=dn(t).queryOptionMap,o=i.keys()[0];if(!o||"series"===o)return;var r=gn(e,o,i.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),a=r.models[0];if(!a)return;var s,l=n.getViewOfComponentModel(a);if(l.group.traverse(function(e){var n=vt(e).tooltipConfig;if(n&&n.name===t.name)return s=e,!0}),s)return{componentMainType:o,componentIndex:a.componentIndex,el:s}}(i,e,n);if(a){var s=a.el.getBoundingRect().clone();s.applyTransform(a.el.transform),this._tryShow({offsetX:s.x+s.width/2,offsetY:s.y+s.height/2,target:a.el,position:i.position,positionDefault:"bottom"},o)}else if(i.tooltip&&null!=i.x&&null!=i.y){var l=Sl;l.x=i.x,l.y=i.y,l.update(),vt(l).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:l},o)}else if(r)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:r,tooltipOption:i.tooltipOption},o);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var u=ia(i,e),p=u.point[0],h=u.point[1];null!=p&&null!=h&&this._tryShow({offsetX:p,offsetY:h,target:u.el,position:i.position,positionDefault:"bottom"},o)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},o))}},n.prototype.manuallyHideTip=function(t,e,n,i){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(Cl(i,n))},n.prototype._manuallyAxisShowTip=function(t,e,n,i){var o=i.seriesIndex,r=i.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=r&&null!=a){var s=e.getSeriesByIndex(o);if(s)if("axis"===Il([s.getData().getItemModel(r),s,(s.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:r,position:i.position}),!0}},n.prototype._tryShow=function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,t);else if(n){var o,r;if("legend"===vt(n).ssrType)return;this._lastDataByCoordSys=null,jt(n,function(t){return null!=vt(t).dataIndex?(o=t,!0):null!=vt(t).tooltipConfig?(r=t,!0):void 0},!0),o?this._showSeriesItemTooltip(t,o,e):r?this._showComponentItemTooltip(t,r,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},n.prototype._showOrMove=function(t,e){var n=t.get("showDelay");e=O(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},n.prototype._showAxisTooltip=function(t,e){var n=this._ecModel,r=this._tooltipModel,a=[e.offsetX,e.offsetY],s=Il([e.tooltipOption],r),u=this._renderMode,p=[],h=pi("section",{blocks:[],noHeader:!0}),c=[],d=new bi;i(t,function(t){i(t.dataByAxis,function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),a=t.value;if(e&&null!=a){var s=Gr(a,e.axis,n,t.seriesDataIndices,t.valueLabelOpt),g=pi("section",{header:s,noHeader:!l(s),sortBlocks:!0,blocks:[]});h.blocks.push(g),i(t.seriesDataIndices,function(i){var l=n.getSeriesByIndex(i.seriesIndex),h=i.dataIndexInside,f=l.getDataParams(h);if(!(f.dataIndex<0)){f.axisDim=t.axisDim,f.axisIndex=t.axisIndex,f.axisType=t.axisType,f.axisId=t.axisId,f.axisValue=de(e.axis,{value:a}),f.axisValueLabel=s,f.marker=d.makeTooltipMarker("item",lt(f.color),u);var y=pn(l.formatTooltip(h,!0,null)),m=y.frag;if(m){var v=Il([l],r).get("valueFormatter");g.blocks.push(v?o({valueFormatter:v},m):m)}y.text&&c.push(y.text),p.push(f)}})}})}),h.blocks.reverse(),c.reverse();var g=e.position,f=s.get("order"),y=yi(h,d,u,f,n.get("useUTC"),s.get("textStyle"));y&&c.unshift(y);var m="richText"===u?"\n\n":"<br/>",v=c.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,p)?this._updatePosition(s,g,a[0],a[1],this._tooltipContent,p):this._showTooltipContent(s,v,p,Math.random()+"",a[0],a[1],g,null,d)})},n.prototype._showSeriesItemTooltip=function(t,e,n){var i=this._ecModel,r=vt(e),a=r.seriesIndex,s=i.getSeriesByIndex(a),l=r.dataModel||s,u=r.dataIndex,p=r.dataType,h=l.getData(p),c=this._renderMode,d=t.positionDefault,g=Il([h.getItemModel(u),l,s&&(s.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),f=g.get("trigger");if(null==f||"item"===f){var y=l.getDataParams(u,p),m=new bi;y.marker=m.makeTooltipMarker("item",lt(y.color),c);var v=pn(l.formatTooltip(u,!1,p)),x=g.get("order"),_=g.get("valueFormatter"),b=v.frag,M=b?yi(_?o({valueFormatter:_},b):b,m,c,x,i.get("useUTC"),g.get("textStyle")):v.text,S="item_"+l.name+"_"+u;this._showOrMove(g,function(){this._showTooltipContent(g,M,y,S,t.offsetX,t.offsetY,t.position,t.target,m)}),n({type:"showTip",dataIndexInside:u,dataIndex:h.getRawIndex(u),seriesIndex:a,from:this.uid})}},n.prototype._showComponentItemTooltip=function(t,e,n){var i="html"===this._renderMode,o=vt(e),a=o.tooltipConfig.option||{},l=a.encodeHTMLContent;if(s(a)){a={content:a,formatter:a},l=!0}l&&i&&a.content&&((a=w(a)).content=r(a.content));var u=[a],p=this._ecModel.getComponent(o.componentMainType,o.componentIndex);p&&u.push(p),u.push({formatter:a.content});var h=t.positionDefault,c=Il(u,this._tooltipModel,h?{position:h}:null),d=c.get("content"),g=Math.random()+"",f=new bi;this._showOrMove(c,function(){var n=w(c.get("formatterParams")||{});this._showTooltipContent(c,d,n,g,t.offsetX,t.offsetY,t.position,e,f)}),n({type:"showTip",from:this.uid})},n.prototype._showTooltipContent=function(t,n,i,o,r,a,l,u,p){if(this._ticket="",t.get("showContent")&&t.get("show")){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var c=t.get("formatter");l=l||t.get("position");var d=n,g=this._getNearestPoint([r,a],i,t.get("trigger"),t.get("borderColor")).color;if(c)if(s(c)){var f=t.ecModel.get("useUTC"),y=e(i)?i[0]:i;d=c,y&&y.axisType&&y.axisType.indexOf("time")>=0&&(d=hn(y.axisValue,d,f)),d=cn(d,i,!0)}else if(v(c)){var m=O(function(e,n){e===this._ticket&&(h.setContent(n,p,t,g,l),this._updatePosition(t,l,r,a,h,i,u))},this);this._ticket=o,d=c(i,o,m)}else d=c;h.setContent(d,p,t,g,l),h.show(t,g),this._updatePosition(t,l,r,a,h,i,u)}},n.prototype._getNearestPoint=function(t,n,i,o){return"axis"===i||e(n)?{color:o||("html"===this._renderMode?"#fff":"none")}:e(n)?void 0:{color:o||n.color||n.borderColor}},n.prototype._updatePosition=function(t,n,i,o,r,a,l){var u=this._api.getWidth(),p=this._api.getHeight();n=n||t.get("position");var h=r.getSize(),c=t.get("align"),d=t.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),v(n)&&(n=n([i,o],a,r.el,g,{viewSize:[u,p],contentSize:h.slice()})),e(n))i=Ce(n[0],u),o=Ce(n[1],p);else if(y(n)){var f=n;f.width=h[0],f.height=h[1];var m=Je(f,{width:u,height:p});i=m.x,o=m.y,c=null,d=null}else if(s(n)&&l){var x=function(t,e,n,i){var o=n[0],r=n[1],a=Math.ceil(Math.SQRT2*i)+8,s=0,l=0,u=e.width,p=e.height;switch(t){case"inside":s=e.x+u/2-o/2,l=e.y+p/2-r/2;break;case"top":s=e.x+u/2-o/2,l=e.y-r-a;break;case"bottom":s=e.x+u/2-o/2,l=e.y+p+a;break;case"left":s=e.x-o-a,l=e.y+p/2-r/2;break;case"right":s=e.x+u+a,l=e.y+p/2-r/2}return[s,l]}(n,g,h,t.get("borderWidth"));i=x[0],o=x[1]}else{x=function(t,e,n,i,o,r,a){var s=n.getSize(),l=s[0],u=s[1];null!=r&&(t+l+r+2>i?t-=l+r:t+=r);null!=a&&(e+u+a>o?e-=u+a:e+=a);return[t,e]}(i,o,r,u,p,c?null:20,d?null:20);i=x[0],o=x[1]}if(c&&(i-=Tl(c)?h[0]/2:"right"===c?h[0]:0),d&&(o-=Tl(d)?h[1]/2:"bottom"===d?h[1]:0),ll(t)){x=function(t,e,n,i,o){var r=n.getSize(),a=r[0],s=r[1];return t=Math.min(t+a,i)-a,e=Math.min(e+s,o)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(i,o,r,u,p);i=x[0],o=x[1]}r.moveTo(i,o)},n.prototype._updateContentNotChangedOnAxis=function(t,e){var n=this._lastDataByCoordSys,o=this._cbParamsList,r=!!n&&n.length===t.length;return r&&i(n,function(n,a){var s=n.dataByAxis||[],l=(t[a]||{}).dataByAxis||[];(r=r&&s.length===l.length)&&i(s,function(t,n){var a=l[n]||{},s=t.seriesDataIndices||[],u=a.seriesDataIndices||[];(r=r&&t.value===a.value&&t.axisType===a.axisType&&t.axisId===a.axisId&&s.length===u.length)&&i(s,function(t,e){var n=u[e];r=r&&t.seriesIndex===n.seriesIndex&&t.dataIndex===n.dataIndex}),o&&i(t.seriesDataIndices,function(t){var n=t.seriesIndex,i=e[n],a=o[n];i&&a&&a.data!==i.data&&(r=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=e,!!r},n.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},n.prototype.dispose=function(t,e){!F.node&&e.getDom()&&(te(this,"_updatePosition"),this._tooltipContent.dispose(),ea("itemTooltip",e))},n.type="tooltip",n}(Tt);function Il(t,e,n){var i,o=e.ecModel;n?(i=new wt(n,o,o),i=new wt(e.option,i,o)):i=e;for(var r=t.length-1;r>=0;r--){var a=t[r];a&&(a instanceof wt&&(a=a.get("tooltip",!0)),s(a)&&(a={formatter:a}),a&&(i=new wt(a,i,o)))}return i}function Cl(t,e){return t.dispatchAction||O(e.dispatchAction,e)}function Tl(t){return"center"===t||"middle"===t}function Al(t){ye(ha),t.registerComponentModel(sl),t.registerComponentView(wl),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},L),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},L)}var Dl=["rect","polygon","keep","clear"];function kl(t,n){var o=fn(t?t.brush:[]);if(o.length){var r=[];i(o,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(r=r.concat(e))});var a=t&&t.toolbox;e(a)&&(a=a[0]),a||(a={feature:{}},t.toolbox=[a]);var s,l,u=a.feature||(a.feature={}),p=u.brush||(u.brush={}),h=p.type||(p.type=[]);h.push.apply(h,r),l={},i(s=h,function(t){l[t]=1}),s.length=0,i(l,function(t,e){s.push(e)}),n&&!h.length&&h.push.apply(h,Dl)}}var Pl={lineX:Ll(0),lineY:Ll(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&Q(n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var o=t.x,r=t.y,a=t.width,s=t.height,l=i[0];return!!(Q(i,o,r)||Q(i,o+a,r)||Q(i,o,r+s)||Q(i,o+a,r+s)||N.create(t).contain(l[0],l[1])||yn(o,r,o+a,r,i)||yn(o,r,o,r+s,i)||yn(o+a,r,o+a,r+s,i)||yn(o,r+s,o+a,r+s,i))||void 0}}};function Ll(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,i){if(e){var o=i.range;return Ol(e[t],o)}},rect:function(i,o,r){if(i){var a=r.range,s=[i[e[t]],i[e[t]]+i[n[t]]];return s[1]<s[0]&&s.reverse(),Ol(s[0],a)||Ol(s[1],a)||Ol(a[0],s)||Ol(a[1],s)}}}}function Ol(t,e){return e[0]<=t&&t<=e[1]}var Rl=["inBrush","outOfBrush"],zl="__ecBrushSelect",Vl="__ecInBrushSelectEvent";function Bl(t){t.eachComponent({mainType:"brush"},function(e){(e.brushTargetManager=new Fs(e.option,t)).setInputRanges(e.areas,t)})}function El(t,n,o){var r,s,l=[];t.eachComponent({mainType:"brush"},function(t){o&&"takeGlobalCursor"===o.type&&t.setBrushOption("brush"===o.key?o.brushOption:{brushType:!1})}),Bl(t),t.eachComponent({mainType:"brush"},function(n,o){var u={brushId:n.id,brushIndex:o,brushName:n.name,areas:w(n.areas),selected:[]};l.push(u);var p=n.option,c=p.brushLink,d=[],g=[],f=[],y=!1;o||(r=p.throttleType,s=p.throttleDelay);var m=a(n.areas,function(t){var e=Hl[t.brushType],n=h({boundingRect:e?e(t):void 0},t);return n.selectors=function(t){var e=t.brushType,n={point:function(i){return Pl[e].point(i,n,t)},rect:function(i){return Pl[e].rect(i,n,t)}};return n}(n),n}),v=mn(n.option,Rl,function(t){t.mappingMethod="fixed"});function x(t){return"all"===c||!!d[t]}function _(t){return!!t.length}e(c)&&i(c,function(t){d[t]=1}),t.eachSeries(function(o,r){var a=f[r]=[];"parallel"===o.subType?function(t,e){var n=t.coordinateSystem;y=y||n.hasAxisBrushed(),x(e)&&n.eachActiveState(t.getData(),function(t,e){"active"===t&&(g[e]=1)})}(o,r):function(o,r,a){if(!o.brushSelector||function(t,n){var i=t.option.seriesIndex;return null!=i&&"all"!==i&&(e(i)?I(i,n)<0:n!==i)}(n,r))return;if(i(m,function(e){n.brushTargetManager.controlSeries(e,o,t)&&a.push(e),y=y||_(a)}),x(r)&&_(a)){var s=o.getData();s.each(function(t){Nl(o,a,s,t)&&(g[t]=1)})}}(o,r,a)}),t.eachSeries(function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};u.selected.push(n);var i=f[e],o=t.getData(),r=x(e)?function(t){return g[t]?(n.dataIndex.push(o.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(e){return Nl(t,i,o,e)?(n.dataIndex.push(o.getRawIndex(e)),"inBrush"):"outOfBrush"};(x(e)?y:_(i))&&vn(Rl,v,o,r)})}),function(t,e,n,i,o){if(!o)return;var r=t.getZr();if(r[Vl])return;r[zl]||(r[zl]=Gl);var a=Qt(r,zl,n,e);a(t,i)}(n,r,s,l,o)}function Gl(t,e){if(!t.isDisposed()){var n=t.getZr();n[Vl]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[Vl]=!1}}function Nl(t,e,n,i){for(var o=0,r=e.length;o<r;o++){var a=e[o];if(t.brushSelector(i,n,a.selectors,a))return!0}}var Hl={rect:function(t){return Wl(t.range)},polygon:function(t){for(var e,n=t.range,i=0,o=n.length;i<o;i++){e=e||[[1/0,-1/0],[1/0,-1/0]];var r=n[i];r[0]<e[0][0]&&(e[0][0]=r[0]),r[0]>e[0][1]&&(e[0][1]=r[0]),r[1]<e[1][0]&&(e[1][0]=r[1]),r[1]>e[1][1]&&(e[1][1]=r[1])}return e&&Wl(e)}};function Wl(t){return new N(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var Zl=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new Wo(e.getZr())).on("brush",O(this._onBrush,this)).mount()},e.prototype.render=function(t,e,n,i){this.model=t,this._updateController(t,e,n,i)},e.prototype.updateTransform=function(t,e,n,i){Bl(e),this._updateController(t,e,n,i)},e.prototype.updateVisual=function(t,e,n,i){this.updateTransform(t,e,n,i)},e.prototype.updateView=function(t,e,n,i){this._updateController(t,e,n,i)},e.prototype._updateController=function(t,e,n,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var e=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:e,areas:w(n),$from:e}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:e,areas:w(n),$from:e})},e.type="brush",e}(Tt),Fl=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.areas=[],n.brushOption={},n}return ii(e,t),e.prototype.optionUpdated=function(t,e){var n=this.option;!e&&xn(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:"#ddd"},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=a(t,function(t){return Yl(this.option,t)},this))},e.prototype.setBrushOption=function(t){this.brushOption=Yl(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(ge);function Yl(t,e){return G({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new wt(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var Xl=["rect","polygon","lineX","lineY","keep","clear"],Ul=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.render=function(t,e,n){var o,r,a;e.eachComponent({mainType:"brush"},function(t){o=t.brushType,r=t.brushOption.brushMode||"single",a=a||!!t.areas.length}),this._brushType=o,this._brushMode=r,i(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===r:"clear"===e?a:e===o)?"emphasis":"normal")})},e.prototype.updateView=function(t,e,n){this.render(t,e,n)},e.prototype.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return i(t.get("type",!0),function(t){e[t]&&(n[t]=e[t])}),n},e.prototype.onclick=function(t,e,n){var i=this._brushType,o=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===o?"single":"multiple":o}})},e.getDefaultOption=function(t){return{show:!0,type:Xl.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])}},e}(_s);function Kl(t){t.registerComponentView(Zl),t.registerComponentModel(Fl),t.registerPreprocessor(kl),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,El),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},L),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},L),Ms("brush",Ul)}var jl=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return ii(e,t),e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(ge),ql=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.render=function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,o=t.getModel("textStyle"),r=t.getModel("subtextStyle"),a=t.get("textAlign"),s=m(t.get("textBaseline"),t.get("textVerticalAlign")),l=new d({style:yt(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),p=t.get("subtext"),h=new d({style:yt(r,{text:p,fill:r.getTextColor(),y:u.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),c=t.get("link"),g=t.get("sublink"),f=t.get("triggerEvent",!0);l.silent=!c&&!f,h.silent=!g&&!f,c&&l.on("click",function(){_n(c,"_"+t.get("target"))}),g&&h.on("click",function(){_n(g,"_"+t.get("subtarget"))}),vt(l).eventData=vt(h).eventData=f?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(l),p&&i.add(h);var y=i.getBoundingRect(),v=t.getBoxLayoutParams();v.width=y.width,v.height=y.height;var x=Je(v,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));a||("middle"===(a=t.get("left")||t.get("right"))&&(a="center"),"right"===a?x.x+=x.width:"center"===a&&(x.x+=x.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?x.y+=x.height:"middle"===s&&(x.y+=x.height/2),s=s||"top"),i.x=x.x,i.y=x.y,i.markRedraw();var _={align:a,verticalAlign:s};l.setStyle(_),h.setStyle(_),y=i.getBoundingRect();var b=x.margin,M=t.getItemStyle(["color","opacity"]);M.fill=t.get("backgroundColor");var S=new T({shape:{x:y.x-b[3],y:y.y-b[0],width:y.width+b[1]+b[3],height:y.height+b[0]+b[2],r:t.get("borderRadius")},style:M,subPixelOptimize:!0,silent:!0});i.add(S)}},e.type="title",e}(Tt);function $l(t){t.registerComponentModel(jl),t.registerComponentView(ql)}var Jl=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return ii(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t,e=this.option,n=e.data||[],o=e.axisType,r=this._names=[];"category"===o?(t=[],i(n,function(e,n){var i,o=Oe(bn(e),"");y(e)?(i=w(e)).value=n:i=n,t.push(i),r.push(o)})):t=n;var a={category:"ordinal",time:"time",value:"number"}[o]||"number";(this._data=new Mn([{name:"value",type:a}],this)).initData(t,r)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(ge),Ql=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="timeline.slider",e.defaultOption=Sn(Jl.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(Jl);tt(Ql,wn.prototype);var tu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="timeline",e}(Tt),eu=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i)||this;return r.type=o||"value",r}return ii(e,t),e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},e}(In),nu=Math.PI,iu=At(),ou=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.init=function(t,e){this.api=e},e.prototype.render=function(t,e,n){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var o=this._layout(t,n),r=this._createGroup("_mainGroup"),a=this._createGroup("_labelGroup"),s=this._axis=this._createAxis(o,t);t.formatTooltip=function(t){return pi("nameValue",{noName:!0,value:s.scale.getLabel({value:t})})},i(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](o,r,s,t)},this),this._renderAxisLabel(o,a,s,t),this._position(o,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,e){var n,i,o,r,a=t.get(["label","position"]),l=t.get("orient"),u=function(t,e){return Je(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}(t,e),p={horizontal:"center",vertical:(n=null==a||"auto"===a?"horizontal"===l?u.y+u.height/2<e.getHeight()/2?"-":"+":u.x+u.width/2<e.getWidth()/2?"+":"-":s(a)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[l][a]:a)>=0||"+"===n?"left":"right"},h={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:nu/2},d="vertical"===l?u.height:u.width,g=t.getModel("controlStyle"),f=g.get("show",!0),y=f?g.get("itemSize"):0,m=f?g.get("itemGap"):0,v=y+m,x=t.get(["label","rotate"])||0;x=x*nu/180;var _=g.get("position",!0),b=f&&g.get("showPlayBtn",!0),M=f&&g.get("showPrevBtn",!0),S=f&&g.get("showNextBtn",!0),w=0,I=d;"left"===_||"bottom"===_?(b&&(i=[0,0],w+=v),M&&(o=[w,0],w+=v),S&&(r=[I-y,0],I-=v)):(b&&(i=[I-y,0],I-=v),M&&(o=[0,0],w+=v),S&&(r=[I-y,0],I-=v));var C=[w,I];return t.get("inverse")&&C.reverse(),{viewRect:u,mainLength:d,orient:l,rotation:c[l],labelRotation:x,labelPosOpt:n,labelAlign:t.get(["label","align"])||p[l],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||h[l],playPosition:i,prevBtnPosition:o,nextBtnPosition:r,axisExtent:C,controlSize:y,controlGap:m}},e.prototype._position=function(t,e){var n=this._mainGroup,i=this._labelGroup,o=t.viewRect;if("vertical"===t.orient){var r=W(),a=o.x,l=o.y+o.height;Z(r,r,[-a,-l]),_(r,r,-nu/2),Z(r,r,[a,l]),(o=o.clone()).applyTransform(r)}var u=m(o),p=m(n.getBoundingRect()),h=m(i.getBoundingRect()),c=[n.x,n.y],d=[i.x,i.y];d[0]=c[0]=u[0][0];var g,f=t.labelPosOpt;null==f||s(f)?(v(c,p,u,1,g="+"===f?0:1),v(d,h,u,1,1-g)):(v(c,p,u,1,g=f>=0?0:1),d[1]=c[1]+f);function y(t){t.originX=u[0][0]-t.x,t.originY=u[1][0]-t.y}function m(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function v(t,e,n,i,o){t[i]+=n[i][o]-e[i][o]}n.setPosition(c),i.setPosition(d),n.rotation=i.rotation=t.rotation,y(n),y(i)},e.prototype._createAxis=function(t,e){var n=e.getData(),i=e.get("axisType"),o=function(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new Dn({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new An({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new Tn}}(e,i);o.getTicks=function(){return n.mapArray(["value"],function(t){return{value:t}})};var r=n.getDataExtent("value");o.setExtent(r[0],r[1]),o.calcNiceTicks();var a=new eu("value",o,t.axisExtent,i);return a.model=e,a},e.prototype._createGroup=function(t){var e=this[t]=new p;return this.group.add(e),e},e.prototype._renderAxisLine=function(t,e,n,i){var r=n.getExtent();if(i.get(["lineStyle","show"])){var a=new f({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:o({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});e.add(a);var s=this._progressLine=new f({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:h({lineCap:"round",lineWidth:a.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});e.add(s)}},e.prototype._renderAxisTick=function(t,e,n,o){var r=this,a=o.getData(),s=n.scale.getTicks();this._tickSymbols=[],i(s,function(t){var i=n.dataToCoord(t.value),s=a.getItemModel(t.value),l=s.getModel("itemStyle"),u=s.getModel(["emphasis","itemStyle"]),p=s.getModel(["progress","itemStyle"]),h={x:i,y:0,onclick:O(r._changeTimeline,r,t.value)},c=ru(s,l,e,h);c.ensureState("emphasis").style=u.getItemStyle(),c.ensureState("progress").style=p.getItemStyle(),Cn(c);var d=vt(c);s.get("tooltip")?(d.dataIndex=t.value,d.dataModel=o):d.dataIndex=d.dataModel=null,r._tickSymbols.push(c)})},e.prototype._renderAxisLabel=function(t,e,n,o){var r=this;if(n.getLabelModel().get("show")){var a=o.getData(),s=n.getViewLabels();this._tickLabels=[],i(s,function(i){var o=i.tickValue,s=a.getItemModel(o),l=s.getModel("label"),u=s.getModel(["emphasis","label"]),p=s.getModel(["progress","label"]),h=n.dataToCoord(i.tickValue),c=new d({x:h,y:0,rotation:t.labelRotation-t.rotation,onclick:O(r._changeTimeline,r,o),silent:!1,style:yt(l,{text:i.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});c.ensureState("emphasis").style=yt(u),c.ensureState("progress").style=yt(p),e.add(c),Cn(c),iu(c).dataIndex=o,r._tickLabels.push(c)})}},e.prototype._renderControl=function(t,e,n,i){var o=t.controlSize,r=t.rotation,a=i.getModel("controlStyle").getItemStyle(),s=i.getModel(["emphasis","controlStyle"]).getItemStyle(),l=i.getPlayState(),u=i.get("inverse",!0);function p(t,n,l,u){if(t){var p=et(m(i.get(["controlStyle",n+"BtnSize"]),o),o),h=function(t,e,n,i){var o=i.style,r=pe(t.get(["controlStyle",e]),i||{},new N(n[0],n[1],n[2],n[3]));o&&r.setStyle(o);return r}(i,n+"Icon",[0,-p/2,p,p],{x:t[0],y:t[1],originX:o/2,originY:0,rotation:u?-r:0,rectHover:!0,style:a,onclick:l});h.ensureState("emphasis").style=s,e.add(h),Cn(h)}}p(t.nextBtnPosition,"next",O(this._changeTimeline,this,u?"-":"+")),p(t.prevBtnPosition,"prev",O(this._changeTimeline,this,u?"+":"-")),p(t.playPosition,l?"stop":"play",O(this._handlePlayClick,this,!l),!0)},e.prototype._renderCurrentPointer=function(t,e,n,i){var o=i.getData(),r=i.getCurrentIndex(),a=o.getItemModel(r).getModel("checkpointStyle"),s=this,l={onCreate:function(t){t.draggable=!0,t.drift=O(s._handlePointerDrag,s),t.ondragend=O(s._handlePointerDragend,s),au(t,s._progressLine,r,n,i,!0)},onUpdate:function(t){au(t,s._progressLine,r,n,i)}};this._currentPointer=ru(a,a,this._mainGroup,{},this._currentPointer,l)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,e){var n=this._toAxisCoord(t)[0],i=this._axis,o=Ke(i.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var r=this._progressLine;r&&(r.shape.x2=n,r.dirty());var a=this._findNearestTick(n),s=this.model;(e||a!==s.getCurrentIndex()&&s.get("realtime"))&&this._changeTimeline(a)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var e=t.model;t._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var e=this._mainGroup.getLocalTransform();return ce(t,e,!0)},e.prototype._findNearestTick=function(t){var e,n=this.model.getData(),i=1/0,o=this._axis;return n.each(["value"],function(n,r){var a=o.dataToCoord(n),s=Math.abs(a-t);s<i&&(i=s,e=r)}),e},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),e=this._tickSymbols,n=this._tickLabels;if(e)for(var i=0;i<e.length;i++)e&&e[i]&&e[i].toggleState("progress",i<t);if(n)for(i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",iu(n[i]).dataIndex<=t)},e.type="timeline.slider",e}(tu);function ru(t,e,n,i,o,r){var a=e.get("color");if(o)o.setColor(a),n.add(o),r&&r.onUpdate(o);else{var s=t.get("symbol");(o=St(s,-1,-1,2,2,a)).setStyle("strokeNoScale",!0),n.add(o),r&&r.onCreate(o)}var l=e.getItemStyle(["color"]);o.setStyle(l),i=G({rectHover:!0,z2:100},i,!0);var u=kn(t.get("symbolSize"));i.scaleX=u[0]/2,i.scaleY=u[1]/2;var p=Mt(t.get("symbolOffset"),u);p&&(i.x=(i.x||0)+p[0],i.y=(i.y||0)+p[1]);var h=t.get("symbolRotate");return i.rotation=(h||0)*Math.PI/180||0,o.attr(i),o.updateTransform(),o}function au(t,e,n,i,o,r){if(!t.dragging){var a=o.getModel("checkpointStyle"),s=i.dataToCoord(o.getData().get("value",n));if(r||!a.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function su(t){var n=t&&t.timeline;e(n)||(n=n?[n]:[]),i(n,function(t){t&&function(t){var n=t.type,o={number:"value",time:"time"};o[n]&&(t.axisType=o[n],delete t.type);if(lu(t),uu(t,"controlPosition")){var r=t.controlStyle||(t.controlStyle={});uu(r,"position")||(r.position=t.controlPosition),"none"!==r.position||uu(r,"show")||(r.show=!1,delete r.position),delete t.controlPosition}i(t.data||[],function(t){y(t)&&!e(t)&&(!uu(t,"value")&&uu(t,"name")&&(t.value=t.name),lu(t))})}(t)})}function lu(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),o=t.label||t.label||{},r=o.normal||(o.normal={}),a={normal:1,emphasis:1};i(o,function(t,e){a[e]||uu(r,e)||(r[e]=t)}),n.label&&!uu(o,"emphasis")&&(o.emphasis=n.label,delete n.label)}function uu(t,e){return t.hasOwnProperty(e)}function pu(t){t.registerComponentModel(Ql),t.registerComponentView(ou),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),function(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e,n){var i=e.getComponent("timeline");return i&&null!=t.currentIndex&&(i.setCurrentIndex(t.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),h({currentIndex:i.option.currentIndex},t)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)})}(t),t.registerPreprocessor(su)}function hu(t,n){if(!t)return!1;for(var i=e(t)?t:[t],o=0;o<i.length;o++)if(i[o]&&i[o][n])return!0;return!1}function cu(t){Pn(t,"label",["show"])}var du=At(),gu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return ii(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(F.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,e){this._mergeOption(t,e,!1,!1)},e.prototype._mergeOption=function(t,e,n,r){var a=this.mainType;n||e.eachSeries(function(t){var n=t.get(this.mainType,!0),s=du(t)[a];n&&n.data?(s?s._mergeOption(n,e,!0):(r&&cu(n),i(n.data,function(t){t instanceof Array?(cu(t[0]),cu(t[1])):cu(t)}),s=this.createMarkerModelFromSeries(n,this,e),o(s,{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),s.__hostSeries=t),du(t)[a]=s):du(t)[a]=null},this)},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),o=this.getRawValue(t),r=i.getName(t);return pi("section",{header:this.name,blocks:[pi("nameValue",{name:r,value:o,noName:!r,noValue:null==o})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,e){var n=wn.prototype.getDataParams.call(this,t,e),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},e.getMarkerModelFromSeries=function(t,e){return du(t)[e]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(ge);tt(gu,wn.prototype);var fu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(gu);function yu(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function mu(t,e,n,i,o,r){var a=[],s=On(e,i)?e.getCalculationInfo("stackResultDimension"):i,l=Su(e,s,t),u=e.indicesOfNearest(s,l)[0];a[o]=e.get(n,u),a[r]=e.get(s,u);var p=e.get(i,u),h=Rn(e.get(i,u));return(h=Math.min(h,20))>=0&&(a[r]=+a[r].toFixed(h)),[a,p]}var vu={min:S(mu,"min"),max:S(mu,"max"),average:S(mu,"average"),median:S(mu,"median")};function xu(t,n){if(n){var i=t.getData(),o=t.coordinateSystem,r=o&&o.dimensions;if(!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(n)&&!e(n.coord)&&e(r)){var a=_u(n,i,o,t);if((n=w(n)).type&&vu[n.type]&&a.baseAxis&&a.valueAxis){var s=I(r,a.baseAxis.dim),l=I(r,a.valueAxis.dim),u=vu[n.type](i,a.baseDataDim,a.valueDataDim,s,l);n.coord=u[0],n.value=u[1]}else n.coord=[null!=n.xAxis?n.xAxis:n.radiusAxis,null!=n.yAxis?n.yAxis:n.angleAxis]}if(null!=n.coord&&e(r))for(var p=n.coord,h=0;h<2;h++)vu[p[h]]&&(p[h]=Su(i,i.mapDimension(r[h]),p[h]));else n.coord=[];return n}}function _u(t,e,n,i){var o={};return null!=t.valueIndex||null!=t.valueDim?(o.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,o.valueAxis=n.getAxis(function(t,e){var n=t.getData().getDimensionInfo(e);return n&&n.coordDim}(i,o.valueDataDim)),o.baseAxis=n.getOtherAxis(o.valueAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim)):(o.baseAxis=i.getBaseAxis(),o.valueAxis=n.getOtherAxis(o.baseAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim),o.valueDataDim=e.mapDimension(o.valueAxis.dim)),o}function bu(t,e){return!(t&&t.containData&&e.coord&&!yu(e))||t.containData(e.coord)}function Mu(t,e){return t?function(t,n,i,o){var r=o<2?t.coord&&t.coord[o]:t.value;return Ln(r,e[o])}:function(t,n,i,o){return Ln(t.value,e[o])}}function Su(t,e,n){if("average"===n){var i=0,o=0;return t.each(e,function(t,e){isNaN(t)||(i+=t,o++)}),i/o}return"median"===n?t.getMedian(e):t.getDataExtent(e)["max"===n?1:0]}var wu=At(),Iu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.init=function(){this.markerGroupMap=C()},e.prototype.render=function(t,e,n){var i=this,o=this.markerGroupMap;o.each(function(t){wu(t).keep=!1}),e.eachSeries(function(t){var o=gu.getMarkerModelFromSeries(t,i.type);o&&i.renderSeries(t,o,e,n)}),o.each(function(t){!wu(t).keep&&i.group.remove(t.group)})},e.prototype.markKeep=function(t){wu(t).keep=!0},e.prototype.toggleBlurSeries=function(t,e){var n=this;i(t,function(t){var i=gu.getMarkerModelFromSeries(t,n.type);i&&i.getData().eachItemGraphicEl(function(t){t&&(e?zn(t):Vn(t))})})},e.type="marker",e}(Tt);function Cu(t,e,n){var i=e.coordinateSystem;t.each(function(o){var r,a=t.getItemModel(o),s=Ce(a.get("x"),n.getWidth()),l=Ce(a.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(e.getMarkerPosition)r=e.getMarkerPosition(t.getValues(t.dimensions,o));else if(i){var u=t.get(i.dimensions[0],o),p=t.get(i.dimensions[1],o);r=i.dataToPoint([u,p])}}else r=[s,l];isNaN(s)||(r[0]=s),isNaN(l)||(r[1]=l),t.setItemLayout(o,r)})}var Tu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=gu.getMarkerModelFromSeries(t,"markPoint");e&&(Cu(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout())},this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,p=u.get(s)||u.set(s,new oi),h=function(t,e,n){var i;i=t?a(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return o(o({},n),{name:t,ordinalMeta:null})}):[{name:"value",type:"float"}];var r=new Mn(i,n),s=a(n.get("data"),S(xu,e));t&&(s=X(s,S(bu,t)));var l=Mu(!!t,i);return r.initData(s,null,l),r}(r,t,e);e.setData(h),Cu(e.getData(),t,i),h.each(function(t){var n=h.getItemModel(t),i=n.getShallow("symbol"),o=n.getShallow("symbolSize"),r=n.getShallow("symbolRotate"),a=n.getShallow("symbolOffset"),s=n.getShallow("symbolKeepAspect");if(v(i)||v(o)||v(r)||v(a)){var u=e.getRawValue(t),p=e.getDataParams(t);v(i)&&(i=i(u,p)),v(o)&&(o=o(u,p)),v(r)&&(r=r(u,p)),v(a)&&(a=a(u,p))}var c=n.getModel("itemStyle").getItemStyle(),d=Bn(l,"color");c.fill||(c.fill=d),h.setItemVisual(t,{symbol:i,symbolSize:o,symbolRotate:r,symbolOffset:a,symbolKeepAspect:s,style:c})}),p.updateData(h),this.group.add(p.group),h.eachItemGraphicEl(function(t){t.traverse(function(t){vt(t).dataModel=e})}),this.markKeep(p),p.group.silent=e.get("silent")||t.get("silent")},e.type="markPoint",e}(Iu);function Au(t){t.registerComponentModel(fu),t.registerComponentView(Tu),t.registerPreprocessor(function(t){hu(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var Du=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(gu),ku=At(),Pu=function(t,n,i,r){var a,s=t.getData();if(e(r))a=r;else{var l=r.type;if("min"===l||"max"===l||"average"===l||"median"===l||null!=r.xAxis||null!=r.yAxis){var u=void 0,p=void 0;if(null!=r.yAxis||null!=r.xAxis)u=n.getAxis(null!=r.yAxis?"y":"x"),p=c(r.yAxis,r.xAxis);else{var h=_u(r,s,n,t);u=h.valueAxis,p=Su(s,Gn(s,h.valueDataDim),l)}var d="x"===u.dim?0:1,g=1-d,f=w(r),y={coord:[]};f.type=null,f.coord=[],f.coord[g]=-1/0,y.coord[g]=1/0;var m=i.get("precision");m>=0&&M(p)&&(p=+p.toFixed(Math.min(m,20))),f.coord[d]=y.coord[d]=p,a=[f,y,{type:l,valueIndex:r.valueIndex,value:p}]}else a=[]}var v=[xu(t,a[0]),xu(t,a[1]),o({},a[2])];return v[2].type=v[2].type||null,G(v[2],v[0]),G(v[2],v[1]),v};function Lu(t){return!isNaN(t)&&!isFinite(t)}function Ou(t,e,n,i){var o=1-t,r=i.dimensions[t];return Lu(e[o])&&Lu(n[o])&&e[t]===n[t]&&i.getAxis(r).containData(e[t])}function Ru(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(Ou(1,n,i,t)||Ou(0,n,i,t)))return!0}return bu(t,e[0])&&bu(t,e[1])}function zu(t,e,n,i,o){var r,a=i.coordinateSystem,s=t.getItemModel(e),l=Ce(s.get("x"),o.getWidth()),u=Ce(s.get("y"),o.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)r=i.getMarkerPosition(t.getValues(t.dimensions,e));else{var p=a.dimensions,h=t.get(p[0],e),c=t.get(p[1],e);r=a.dataToPoint([h,c])}if(En(a,"cartesian2d")){var d=a.getAxis("x"),g=a.getAxis("y");p=a.dimensions;Lu(t.get(p[0],e))?r[0]=d.toGlobalCoord(d.getExtent()[n?0:1]):Lu(t.get(p[1],e))&&(r[1]=g.toGlobalCoord(g.getExtent()[n?0:1]))}isNaN(l)||(r[0]=l),isNaN(u)||(r[1]=u)}else r=[l,u];t.setItemLayout(e,r)}var Vu=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return ii(n,t),n.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=gu.getMarkerModelFromSeries(t,"markLine");if(e){var i=e.getData(),o=ku(e).from,r=ku(e).to;o.each(function(e){zu(o,e,!0,t,n),zu(r,e,!1,t,n)}),i.each(function(t){i.setItemLayout(t,[o.getItemLayout(t),r.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},n.prototype.renderSeries=function(t,n,i,r){var s=t.coordinateSystem,l=t.id,u=t.getData(),p=this.markerGroupMap,h=p.get(l)||p.set(l,new ri);this.group.add(h.group);var c=function(t,e,n){var i;i=t?a(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return o(o({},n),{name:t,ordinalMeta:null})}):[{name:"value",type:"float"}];var r=new Mn(i,n),s=new Mn(i,n),l=new Mn([],n),u=a(n.get("data"),S(Pu,e,t,n));t&&(u=X(u,S(Ru,t)));var p=Mu(!!t,i);return r.initData(a(u,function(t){return t[0]}),null,p),s.initData(a(u,function(t){return t[1]}),null,p),l.initData(a(u,function(t){return t[2]})),l.hasItemOption=!0,{from:r,to:s,line:l}}(s,t,n),d=c.from,g=c.to,f=c.line;ku(n).from=d,ku(n).to=g,n.setData(f);var y=n.get("symbol"),v=n.get("symbolSize"),x=n.get("symbolRotate"),_=n.get("symbolOffset");function b(e,n,i){var o=e.getItemModel(n);zu(e,n,i,t,r);var a=o.getModel("itemStyle").getItemStyle();null==a.fill&&(a.fill=Bn(u,"color")),e.setItemVisual(n,{symbolKeepAspect:o.get("symbolKeepAspect"),symbolOffset:m(o.get("symbolOffset",!0),_[i?0:1]),symbolRotate:m(o.get("symbolRotate",!0),x[i?0:1]),symbolSize:m(o.get("symbolSize"),v[i?0:1]),symbol:m(o.get("symbol",!0),y[i?0:1]),style:a})}e(y)||(y=[y,y]),e(v)||(v=[v,v]),e(x)||(x=[x,x]),e(_)||(_=[_,_]),c.from.each(function(t){b(d,t,!0),b(g,t,!1)}),f.each(function(t){var e=f.getItemModel(t).getModel("lineStyle").getLineStyle();f.setItemLayout(t,[d.getItemLayout(t),g.getItemLayout(t)]),null==e.stroke&&(e.stroke=d.getItemVisual(t,"style").fill),f.setItemVisual(t,{fromSymbolKeepAspect:d.getItemVisual(t,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(t,"symbolOffset"),fromSymbolRotate:d.getItemVisual(t,"symbolRotate"),fromSymbolSize:d.getItemVisual(t,"symbolSize"),fromSymbol:d.getItemVisual(t,"symbol"),toSymbolKeepAspect:g.getItemVisual(t,"symbolKeepAspect"),toSymbolOffset:g.getItemVisual(t,"symbolOffset"),toSymbolRotate:g.getItemVisual(t,"symbolRotate"),toSymbolSize:g.getItemVisual(t,"symbolSize"),toSymbol:g.getItemVisual(t,"symbol"),style:e})}),h.updateData(f),c.line.eachItemGraphicEl(function(t){vt(t).dataModel=n,t.traverse(function(t){vt(t).dataModel=n})}),this.markKeep(h),h.group.silent=n.get("silent")||t.get("silent")},n.type="markLine",n}(Iu);function Bu(t){t.registerComponentModel(Du),t.registerComponentView(Vu),t.registerPreprocessor(function(t){hu(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Eu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(gu),Gu=At(),Nu=function(t,e,n,i){var o=i[0],r=i[1];if(o&&r){var a=xu(t,o),s=xu(t,r),l=a.coord,u=s.coord;l[0]=c(l[0],-1/0),l[1]=c(l[1],-1/0),u[0]=c(u[0],1/0),u[1]=c(u[1],1/0);var p=it([{},a,s]);return p.coord=[a.coord,s.coord],p.x0=a.x,p.y0=a.y,p.x1=s.x,p.y1=s.y,p}};function Hu(t){return!isNaN(t)&&!isFinite(t)}function Wu(t,e,n,i){var o=1-t;return Hu(e[o])&&Hu(n[o])}function Zu(t,e){var n=e.coord[0],i=e.coord[1],o={coord:n,x:e.x0,y:e.y0},r={coord:i,x:e.x1,y:e.y1};return En(t,"cartesian2d")?!(!n||!i||!Wu(1,n,i)&&!Wu(0,n,i))||function(t,e,n){return!(t&&t.containZone&&e.coord&&n.coord&&!yu(e)&&!yu(n))||t.containZone(e.coord,n.coord)}(t,o,r):bu(t,o)||bu(t,r)}function Fu(t,e,n,i,o){var r,a=i.coordinateSystem,s=t.getItemModel(e),l=Ce(s.get(n[0]),o.getWidth()),u=Ce(s.get(n[1]),o.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition){var p=t.getValues(["x0","y0"],e),h=t.getValues(["x1","y1"],e),c=a.clampData(p),d=a.clampData(h),g=[];"x0"===n[0]?g[0]=c[0]>d[0]?h[0]:p[0]:g[0]=c[0]>d[0]?p[0]:h[0],"y0"===n[1]?g[1]=c[1]>d[1]?h[1]:p[1]:g[1]=c[1]>d[1]?p[1]:h[1],r=i.getMarkerPosition(g,n,!0)}else{var f=[v=t.get(n[0],e),x=t.get(n[1],e)];a.clampData&&a.clampData(f,f),r=a.dataToPoint(f,!0)}if(En(a,"cartesian2d")){var y=a.getAxis("x"),m=a.getAxis("y"),v=t.get(n[0],e),x=t.get(n[1],e);Hu(v)?r[0]=y.toGlobalCoord(y.getExtent()["x0"===n[0]?0:1]):Hu(x)&&(r[1]=m.toGlobalCoord(m.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(r[0]=l),isNaN(u)||(r[1]=u)}else r=[l,u];return r}var Yu=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Xu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=gu.getMarkerModelFromSeries(t,"markArea");if(e){var i=e.getData();i.each(function(e){var o=a(Yu,function(o){return Fu(i,e,o,t,n)});i.setItemLayout(e,o),i.getItemGraphicEl(e).setShape("points",o)})}},this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,l=t.id,u=t.getData(),h=this.markerGroupMap,c=h.get(l)||h.set(l,{group:new p});this.group.add(c.group),this.markKeep(c);var d=function(t,e,n){var i,r,s=["x0","y0","x1","y1"];if(t){var l=a(t&&t.dimensions,function(t){var n=e.getData(),i=n.getDimensionInfo(n.mapDimension(t))||{};return o(o({},i),{name:t,ordinalMeta:null})});r=a(s,function(t,e){return{name:t,type:l[e%2].type}}),i=new Mn(r,n)}else i=new Mn(r=[{name:"value",type:"float"}],n);var u=a(n.get("data"),S(Nu,e,t,n));t&&(u=X(u,S(Zu,t)));var p=t?function(t,e,n,i){var o=t.coord[Math.floor(i/2)][i%2];return Ln(o,r[i])}:function(t,e,n,i){return Ln(t.value,r[i])};return i.initData(u,null,p),i.hasItemOption=!0,i}(r,t,e);e.setData(d),d.each(function(e){var n=a(Yu,function(n){return Fu(d,e,n,t,i)}),o=r.getAxis("x").scale,l=r.getAxis("y").scale,p=o.getExtent(),h=l.getExtent(),c=[o.parse(d.get("x0",e)),o.parse(d.get("x1",e))],g=[l.parse(d.get("y0",e)),l.parse(d.get("y1",e))];Ke(c),Ke(g);var f=!!(p[0]>c[1]||p[1]<c[0]||h[0]>g[1]||h[1]<g[0]);d.setItemLayout(e,{points:n,allClipped:f});var y=d.getItemModel(e).getModel("itemStyle").getItemStyle(),m=Bn(u,"color");y.fill||(y.fill=m,s(y.fill)&&(y.fill=nt(y.fill,.4))),y.stroke||(y.stroke=m),d.setItemVisual(e,"style",y)}),d.diff(Gu(c).data).add(function(t){var e=d.getItemLayout(t);if(!e.allClipped){var n=new P({shape:{points:e.points}});d.setItemGraphicEl(t,n),c.group.add(n)}}).update(function(t,n){var i=Gu(c).data.getItemGraphicEl(n),o=d.getItemLayout(t);o.allClipped?i&&c.group.remove(i):(i?Ht(i,{shape:{points:o.points}},e,t):i=new P({shape:{points:o.points}}),d.setItemGraphicEl(t,i),c.group.add(i))}).remove(function(t){var e=Gu(c).data.getItemGraphicEl(t);c.group.remove(e)}).execute(),d.eachItemGraphicEl(function(t,n){var i=d.getItemModel(n),o=d.getItemVisual(n,"style");t.useStyle(d.getItemVisual(n,"style")),Yt(t,Xt(i),{labelFetcher:e,labelDataIndex:n,defaultText:d.getName(n)||"",inheritColor:s(o.fill)?nt(o.fill,1):"#000"}),Nn(t,i),Ut(t,null,null,i.get(["emphasis","disabled"])),vt(t).dataModel=e}),Gu(c).data=d,c.group.silent=e.get("silent")||t.get("silent")},e.type="markArea",e}(Iu);function Uu(t){t.registerComponentModel(Eu),t.registerComponentView(Xu),t.registerPreprocessor(function(t){hu(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Ku=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e.layoutMode={type:"box",ignoreSize:!0},e}return ii(n,t),n.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},n.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},n.prototype._updateSelector=function(t){var n=t.selector,o=this.ecModel;!0===n&&(n=t.selector=["all","inverse"]),e(n)&&i(n,function(t,e){s(t)&&(t={type:t}),n[e]=G(t,function(t,e){return"all"===e?{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])}:"inverse"===e?{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(o,t.type))})},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},n.prototype._updateData=function(t){var e=[],n=[];t.eachRawSeries(function(i){var o,r=i.name;if(n.push(r),i.legendVisualProvider){var a=i.legendVisualProvider.getAllNames();t.isSeriesFiltered(i)||(n=n.concat(a)),a.length?e=e.concat(a):o=!0}else o=!0;o&&gt(i)&&e.push(i.name)}),this._availableNames=n;var i=this.get("data")||e,o=C(),r=a(i,function(t){return(s(t)||M(t))&&(t={name:t}),o.get(t.name)?null:(o.set(t.name,!0),new wt(t,this,this.ecModel))},this);this._data=X(r,function(t){return!!t})},n.prototype.getData=function(){return this._data},n.prototype.select=function(t){var e=this.option.selected;if("single"===this.get("selectedMode")){var n=this._data;i(n,function(t){e[t.get("name")]=!1})}e[t]=!0},n.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},n.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},n.prototype.allSelect=function(){var t=this._data,e=this.option.selected;i(t,function(t){e[t.get("name",!0)]=!0})},n.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;i(t,function(t){var n=t.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]})},n.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&I(this._availableNames,t)>=0},n.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n}(ge),ju=S,qu=i,$u=p,Ju=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return ii(e,t),e.prototype.init=function(){this.group.add(this._contentGroup=new $u),this.group.add(this._selectorGroup=new $u),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,e,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var o=t.get("align"),r=t.get("orient");o&&"auto"!==o||(o="right"===t.get("left")&&"vertical"===r?"right":"left");var a=t.get("selector",!0),s=t.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===r?"end":"start"),this.renderInner(o,t,e,n,a,r,s);var l=t.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},p=t.get("padding"),c=Je(l,u,p),d=this.layoutInner(t,o,c,i,a,s),g=Je(h({width:d.width,height:d.height},l),u,p);this.group.x=g.x-d.x,this.group.y=g.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Is(d,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,e,n,i,r,a,s){var l=this.getContentGroup(),u=C(),p=e.get("selectedMode"),h=[];n.eachRawSeries(function(t){!t.get("legendHoverLink")&&h.push(t.id)}),qu(e.getData(),function(r,a){var s=r.get("name");if(!this.newlineDisabled&&(""===s||"\n"===s)){var c=new $u;return c.newline=!0,void l.add(c)}var d=n.getSeriesByName(s)[0];if(!u.get(s))if(d){var g=d.getData(),f=g.getVisual("legendLineStyle")||{},y=g.getVisual("legendIcon"),m=g.getVisual("style"),v=this._createItem(d,s,a,r,e,t,f,m,y,p,i);v.on("click",ju(Qu,s,null,i,h)).on("mouseover",ju(ep,d.name,null,i,h)).on("mouseout",ju(np,d.name,null,i,h)),n.ssr&&v.eachChild(function(t){var e=vt(t);e.seriesIndex=d.seriesIndex,e.dataIndex=a,e.ssrType="legend"}),u.set(s,!0)}else n.eachRawSeries(function(l){if(!u.get(s)&&l.legendVisualProvider){var c=l.legendVisualProvider;if(!c.containName(s))return;var d=c.indexOfName(s),g=c.getItemVisual(d,"style"),f=c.getItemVisual(d,"legendIcon"),y=ot(g.fill);y&&0===y[3]&&(y[3]=.2,g=o(o({},g),{fill:rt(y,"rgba")}));var m=this._createItem(l,s,a,r,e,t,{},g,f,p,i);m.on("click",ju(Qu,null,s,i,h)).on("mouseover",ju(ep,null,s,i,h)).on("mouseout",ju(np,null,s,i,h)),n.ssr&&m.eachChild(function(t){var e=vt(t);e.seriesIndex=l.seriesIndex,e.dataIndex=a,e.ssrType="legend"}),u.set(s,!0)}},this)},this),r&&this._createSelector(r,e,i,a,s)},e.prototype._createSelector=function(t,e,n,i,o){var r=this.getSelectorGroup();qu(t,function(t){var i=t.type,o=new d({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect",legendId:e.id})}});r.add(o);var a=e.getModel("selectorLabel"),s=e.getModel(["emphasis","selectorLabel"]);Yt(o,{normal:a,emphasis:s},{defaultText:t.title}),Cn(o)})},e.prototype._createItem=function(t,e,n,i,o,r,a,l,u,p,h){var c=t.visualDrawType,g=o.get("itemWidth"),f=o.get("itemHeight"),y=o.isSelected(e),m=i.get("symbolRotate"),x=i.get("symbolKeepAspect"),_=i.get("icon"),b=function(t,e,n,i,o,r,a){function s(t,e){"auto"===t.lineWidth&&(t.lineWidth=e.lineWidth>0?2:0),qu(t,function(n,i){"inherit"===t[i]&&(t[i]=e[i])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),p=0===t.lastIndexOf("empty",0)?"fill":"stroke",h=l.getShallow("decal");u.decal=h&&"inherit"!==h?Ft(h,a):i.decal,"inherit"===u.fill&&(u.fill=i[o]);"inherit"===u.stroke&&(u.stroke=i[p]);"inherit"===u.opacity&&(u.opacity=("fill"===o?i:n).opacity);s(u,i);var c=e.getModel("lineStyle"),d=c.getLineStyle();if(s(d,n),"auto"===u.fill&&(u.fill=i.fill),"auto"===u.stroke&&(u.stroke=i.fill),"auto"===d.stroke&&(d.stroke=i.fill),!r){var g=e.get("inactiveBorderWidth"),f=u[p];u.lineWidth="auto"===g?i.lineWidth>0&&f?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),d.stroke=c.get("inactiveColor"),d.lineWidth=c.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}(u=_||u||"roundRect",i,a,l,c,y,h),M=new $u,S=i.getModel("textStyle");if(!v(t.getLegendIcon)||_&&"inherit"!==_){var w="inherit"===_&&t.getData().getVisual("symbol")?"inherit"===m?t.getData().getVisual("symbolRotate"):m:0;M.add(function(t){var e=t.icon||"roundRect",n=St(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2);return n}({itemWidth:g,itemHeight:f,icon:u,iconRotate:w,itemStyle:b.itemStyle,symbolKeepAspect:x}))}else M.add(t.getLegendIcon({itemWidth:g,itemHeight:f,icon:u,iconRotate:m,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:x}));var I="left"===r?g+5:-5,C=r,A=o.get("formatter"),D=e;s(A)&&A?D=A.replace("{name}",null!=e?e:""):v(A)&&(D=A(e));var k=y?S.getTextColor():i.get("inactiveColor");M.add(new d({style:yt(S,{text:D,x:I,y:f/2,fill:k,align:C,verticalAlign:"middle"},{inheritColor:k})}));var P=new T({shape:M.getBoundingRect(),style:{fill:"transparent"}}),L=i.getModel("tooltip");return L.get("show")&&mt({el:P,componentModel:o,itemName:e,itemTooltipOption:L.option}),M.add(P),M.eachChild(function(t){t.silent=!0}),P.silent=!p,this.getContentGroup().add(M),Cn(M),M.__legendDataIndex=n,M},e.prototype.layoutInner=function(t,e,n,i,o,r){var a=this.getContentGroup(),s=this.getSelectorGroup();Qe(t.get("orient"),a,t.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),u=[-l.x,-l.y];if(s.markRedraw(),a.markRedraw(),o){Qe("horizontal",s,t.get("selectorItemGap",!0));var p=s.getBoundingRect(),h=[-p.x,-p.y],c=t.get("selectorButtonGap",!0),d=t.getOrient().index,g=0===d?"width":"height",f=0===d?"height":"width",y=0===d?"y":"x";"end"===r?h[d]+=l[g]+c:u[d]+=p[g]+c,h[1-d]+=l[f]/2-p[f]/2,s.x=h[0],s.y=h[1],a.x=u[0],a.y=u[1];var m={x:0,y:0};return m[g]=l[g]+c+p[g],m[f]=Math.max(l[f],p[f]),m[y]=Math.min(0,p[y]+h[1-d]),m}return a.x=u[0],a.y=u[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Tt);function Qu(t,e,n,i){np(t,e,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),ep(t,e,n,i)}function tp(t){for(var e,n=t.getZr().storage.getDisplayList(),i=0,o=n.length;i<o&&!(e=n[i].states.emphasis);)i++;return e&&e.hoverLayer}function ep(t,e,n,i){tp(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function np(t,e,n,i){tp(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}function ip(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})}function op(t,e,n){var o="allSelect"===t||"inverseSelect"===t,r={},a=[];n.eachComponent({mainType:"legend",query:e},function(n){o?n[t]():n[t](e.name),rp(n,r),a.push(n.componentIndex)});var s={};return n.eachComponent("legend",function(t){i(r,function(e,n){t[e?"select":"unSelect"](n)}),rp(t,s)}),o?{selected:s,legendIndex:a}:{name:e.name,selected:s}}function rp(t,e){var o=e||{};return i(t.getData(),function(e){var i=e.get("name");if("\n"!==i&&""!==i){var r=t.isSelected(i);n(o,i)?o[i]=o[i]&&r:o[i]=r}}),o}function ap(t){t.registerComponentModel(Ku),t.registerComponentView(Ju),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,ip),t.registerSubTypeDefaulter("legend",function(){return"plain"}),function(t){t.registerAction("legendToggleSelect","legendselectchanged",S(op,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",S(op,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",S(op,"inverseSelect")),t.registerAction("legendSelect","legendselected",S(op,"select")),t.registerAction("legendUnSelect","legendunselected",S(op,"unSelect"))}(t)}var sp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(e,n,i){var o=Hn(e);t.prototype.init.call(this,e,n,i),lp(this,e,o)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),lp(this,this.option,e)},e.type="legend.scroll",e.defaultOption=Sn(Ku.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(Ku);function lp(t,e,n){var i=[1,1];i[t.getOrient().index]=0,Pe(e,n,{type:"box",ignoreSize:!!i})}var up=p,pp=["width","height"],hp=["x","y"],cp=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e.newlineDisabled=!0,e._currentIndex=0,e}return ii(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new up),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new up)},n.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(n,i,o,r,a,s,l){var u=this;t.prototype.renderInner.call(this,n,i,o,r,a,s,l);var p=this._controllerGroup,h=i.get("pageIconSize",!0),c=e(h)?h:[h,h];f("pagePrev",0);var g=i.getModel("pageTextStyle");function f(t,e){var n=t+"DataIndex",o=pe(i.get("pageIcons",!0)[i.getOrient().name][e],{onclick:O(u._pageGo,u,n,i,r)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});o.name=t,p.add(o)}p.add(new d({name:"pageText",style:{text:"xx/xx",fill:g.getTextColor(),font:g.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),f("pageNext",1)},n.prototype.layoutInner=function(t,e,n,i,o,r){var a=this.getSelectorGroup(),s=t.getOrient().index,l=pp[s],u=hp[s],p=pp[1-s],h=hp[1-s];o&&Qe("horizontal",a,t.get("selectorItemGap",!0));var c=t.get("selectorButtonGap",!0),d=a.getBoundingRect(),g=[-d.x,-d.y],f=w(n);o&&(f[l]=n[l]-d[l]-c);var y=this._layoutContentAndController(t,i,f,s,l,p,h,u);if(o){if("end"===r)g[s]+=y[l]+c;else{var m=d[l]+c;g[s]-=m,y[u]-=m}y[l]+=d[l]+c,g[1-s]+=y[h]+y[p]/2-d[p]/2,y[p]=Math.max(y[p],d[p]),y[h]=Math.min(y[h],d[h]+g[1-s]),a.x=g[0],a.y=g[1],a.markRedraw()}return y},n.prototype._layoutContentAndController=function(t,e,n,i,o,r,a,s){var l=this.getContentGroup(),u=this._containerGroup,p=this._controllerGroup;Qe(t.get("orient"),l,t.get("itemGap"),i?n.width:null,i?null:n.height),Qe("horizontal",p,t.get("pageButtonItemGap",!0));var h=l.getBoundingRect(),c=p.getBoundingRect(),d=this._showController=h[o]>n[o],g=[-h.x,-h.y];e||(g[i]=l[s]);var f=[0,0],y=[-c.x,-c.y],v=m(t.get("pageButtonGap",!0),t.get("itemGap",!0));d&&("end"===t.get("pageButtonPosition",!0)?y[i]+=n[o]-c[o]:f[i]+=c[o]+v);y[1-i]+=h[r]/2-c[r]/2,l.setPosition(g),u.setPosition(f),p.setPosition(y);var x={x:0,y:0};if(x[o]=d?n[o]:h[o],x[r]=Math.max(h[r],c[r]),x[a]=Math.min(0,c[a]+y[1-i]),u.__rectSize=n[o],d){var _={x:0,y:0};_[o]=Math.max(n[o]-c[o]-v,0),_[r]=x[r],u.setClipPath(new T({shape:_})),u.__rectSize=_[o]}else p.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var b=this._getPageInfo(t);return null!=b.pageIndex&&Ht(l,{x:b.contentPosition[0],y:b.contentPosition[1]},d?t:null),this._updatePageInfoView(t,b),x},n.prototype._pageGo=function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},n.prototype._updatePageInfoView=function(t,e){var n=this._controllerGroup;i(["pagePrev","pageNext"],function(i){var o=null!=e[i+"DataIndex"],r=n.childOfName(i);r&&(r.setStyle("fill",o?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),r.cursor=o?"pointer":"default")});var o=n.childOfName("pageText"),r=t.get("pageFormatter"),a=e.pageIndex,l=null!=a?a+1:0,u=e.pageCount;o&&r&&o.setStyle("text",s(r)?r.replace("{current}",null==l?"":l+"").replace("{total}",null==u?"":u+""):r({current:l,total:u}))},n.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=t.getOrient().index,r=pp[o],a=hp[o],s=this._findTargetItemIndex(e),l=n.children(),u=l[s],p=l.length,h=p?1:0,c={contentPosition:[n.x,n.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return c;var d=v(u);c.contentPosition[o]=-d.s;for(var g=s+1,f=d,y=d,m=null;g<=p;++g)(!(m=v(l[g]))&&y.e>f.s+i||m&&!x(m,f.s))&&(f=y.i>f.i?y:m)&&(null==c.pageNextDataIndex&&(c.pageNextDataIndex=f.i),++c.pageCount),y=m;for(g=s-1,f=d,y=d,m=null;g>=-1;--g)(m=v(l[g]))&&x(y,m.s)||!(f.i<y.i)||(y=f,null==c.pagePrevDataIndex&&(c.pagePrevDataIndex=f.i),++c.pageCount,++c.pageIndex),f=m;return c;function v(t){if(t){var e=t.getBoundingRect(),n=e[a]+t[a];return{s:n,e:n+e[r],i:t.__legendDataIndex}}}function x(t,e){return t.e>=e&&t.s<=e+i}},n.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild(function(i,o){var r=i.__legendDataIndex;null==n&&null!=r&&(n=o),r===t&&(e=o)}),null!=e?e:n):0;var e,n},n.type="legend.scroll",n}(Ju);function dp(t){ye(ap),t.registerComponentModel(sp),t.registerComponentView(cp),function(t){t.registerAction("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(n)})})}(t)}function gp(t){ye(ap),ye(dp)}var fp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="dataZoom.inside",e.defaultOption=Sn(ls.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(ls),yp=At();function mp(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function vp(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function xp(t,e,n,i){return t.coordinateSystem.containPoint([n,i])}function _p(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(t,e){var n=yp(e),o=n.coordSysRecordMap||(n.coordSysRecordMap=C());o.each(function(t){t.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(t){var n=as(t);i(n.infoList,function(n){var r=n.model.uid,a=o.get(r)||o.set(r,function(t,e){var n={model:e,containsPoint:S(xp,e),dispatchAction:S(vp,t),dataZoomInfoMap:null,controller:null},o=n.controller=new eo(t.getZr());return i(["pan","zoom","scrollMove"],function(t){o.on(t,function(e){var i=[];n.dataZoomInfoMap.each(function(o){if(e.isAvailableBehavior(o.model.option)){var r=(o.getRange||{})[t],a=r&&r(o.dzReferCoordSysInfo,n.model.mainType,n.controller,e);!o.model.get("disabled",!0)&&a&&i.push({dataZoomId:o.model.id,start:a[0],end:a[1]})}}),i.length&&n.dispatchAction(i)})}),n}(e,n.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=C())).set(t.uid,{dzReferCoordSysInfo:n,model:t,getRange:null})})}),o.each(function(t){var e,n=t.controller,i=t.dataZoomInfoMap;if(i){var r=i.keys()[0];null!=r&&(e=i.get(r))}if(e){var a=function(t){var e,n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return t.each(function(t){var r=t.model,a=!r.get("disabled",!0)&&(!r.get("zoomLock",!0)||"move");i[n+a]>i[n+e]&&(e=a),o=o&&r.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}(i);n.enable(a.controlType,a.opt),n.setPointerChecker(t.containsPoint),Qt(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else mp(o,t)})})}var bp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return ii(e,t),e.prototype.render=function(e,n,i){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),function(t,e,n){yp(t).coordSysRecordMap.each(function(t){var i=t.dataZoomInfoMap.get(e.uid);i&&(i.getRange=n)})}(i,e,{pan:O(Mp.pan,this),zoom:O(Mp.zoom,this),scrollMove:O(Mp.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){!function(t,e){for(var n=yp(t).coordSysRecordMap,i=n.keys(),o=0;o<i.length;o++){var r=i[o],a=n.get(r),s=a.dataZoomInfoMap;if(s){var l=e.uid;s.get(l)&&(s.removeKey(l),s.keys().length||mp(n,a))}}}(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(hs),Mp={zoom:function(t,e,n,i){var o=this.range,r=o.slice(),a=t.axisModels[0];if(a){var s=wp[e](null,[i.originX,i.originY],a,n,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(r[1]-r[0])+r[0],u=Math.max(1/i.scale,0);r[0]=(r[0]-l)*u+l,r[1]=(r[1]-l)*u+l;var p=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return ko(0,r,[0,100],0,p.minSpan,p.maxSpan),this.range=r,o[0]!==r[0]||o[1]!==r[1]?r:void 0}},pan:Sp(function(t,e,n,i,o,r){var a=wp[i]([r.oldX,r.oldY],[r.newX,r.newY],e,o,n);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength}),scrollMove:Sp(function(t,e,n,i,o,r){return wp[i]([0,0],[r.scrollDelta,r.scrollDelta],e,o,n).signal*(t[1]-t[0])*r.scrollDelta})};function Sp(t){return function(e,n,i,o){var r=this.range,a=r.slice(),s=e.axisModels[0];if(s)return ko(t(a,s,e,n,i,o),a,[0,100],"all"),this.range=a,r[0]!==a[0]||r[1]!==a[1]?a:void 0}}var wp={grid:function(t,e,n,i,o){var r=n.axis,a={},s=o.model.coordinateSystem.getRect();return t=t||[0,0],"x"===r.dim?(a.pixel=e[0]-t[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=r.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=r.inverse?-1:1),a},polar:function(t,e,n,i,o){var r=n.axis,a={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(a.pixel=e[0]-t[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=r.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=u[1]-u[0],a.pixelStart=u[0],a.signal=r.inverse?-1:1),a},singleAxis:function(t,e,n,i,o){var r=n.axis,a=o.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===r.orient?(s.pixel=e[0]-t[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=r.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=r.inverse?-1:1),s}};function Ip(t){vs(t),t.registerComponentModel(fp),t.registerComponentView(bp),_p(t)}var Cp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Sn(ls.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(ls),Tp=T,Ap="horizontal",Dp="vertical",kp=["line","bar","candlestick","scatter"],Pp={easing:"cubicOut",duration:100,delay:0},Lp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return ii(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=O(this._onBrush,this),this._onBrushEnd=O(this._onBrushEnd,this)},e.prototype.render=function(e,n,i,o){if(t.prototype.render.apply(this,arguments),Qt(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();o&&"dataZoom"===o.type&&o.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){te(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new p;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,n=t.get("brushSelect")?7:0,o=this._findCoordRect(),r={width:e.getWidth(),height:e.getHeight()},a=this._orient===Ap?{right:r.width-o.x-o.width,top:r.height-30-7-n,width:o.width,height:30}:{right:7,top:o.y,width:30,height:o.height},s=Hn(t.option);i(["right","top","width","height"],function(t){"ph"===s[t]&&(s[t]=a[t])});var l=Je(s,r);this._location={x:l.x,y:l.y},this._size=[l.width,l.height],this._orient===Dp&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),r=this._displayables.sliderGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;r.attr(n!==Ap||o?n===Ap&&o?{scaleY:a?1:-1,scaleX:-1}:n!==Dp||o?{scaleY:a?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:a?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:a?1:-1,scaleX:1});var s=t.getBoundingRect([r]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.sliderGroup,i=t.get("brushSelect");n.add(new Tp({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new Tp({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:O(this._onClickPanel,this)}),r=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",r.on("mousemove",this._onBrush),r.on("mouseup",this._onBrushEnd)):(r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)),n.add(o)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,n=this._shadowSize||[],i=t.series,o=i.getRawData(),r=i.getShadowDim&&i.getShadowDim(),a=r&&o.getDimensionInfo(r)?i.getShadowDim():t.otherDim;if(null!=a){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(o!==this._shadowData||a!==this._shadowDim||e[0]!==n[0]||e[1]!==n[1]){var u=o.getDataExtent(a),h=.3*(u[1]-u[0]);u=[u[0]-h,u[1]+h];var c,d=[0,e[1]],g=[0,e[0]],f=[[e[0],0],[0,0]],y=[],m=g[1]/(o.count()-1),v=0,x=Math.round(o.count()/e[0]);o.each([a],function(t,e){if(x>0&&e%x)v+=m;else{var n=null==t||isNaN(t)||""===t,i=n?0:Ue(t,u,d,!0);n&&!c&&e?(f.push([f[f.length-1][0],0]),y.push([y[y.length-1][0],0])):!n&&c&&(f.push([v,0]),y.push([v,0])),f.push([v,i]),y.push([v,i]),v+=m,c=n}}),s=this._shadowPolygonPts=f,l=this._shadowPolylinePts=y}this._shadowData=o,this._shadowDim=a,this._shadowSize=[e[0],e[1]];for(var _=this.dataZoomModel,b=0;b<3;b++){var M=S(1===b);this._displayables.sliderGroup.add(M),this._displayables.dataShadowSegs.push(M)}}}function S(t){var e=_.getModel(t?"selectedDataBackground":"dataBackground"),n=new p,i=new P({shape:{points:s},segmentIgnoreThreshold:1,style:e.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),o=new k({shape:{points:l},segmentIgnoreThreshold:1,style:e.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(i),n.add(o),n}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,o=this.ecModel;return t.eachTargetAxis(function(r,a){var s=t.getAxisProxy(r,a).getTargetSeriesModels();i(s,function(t){if(!(n||!0!==e&&I(kp,t.get("type"))<0)){var i,s=o.getComponent(os(r),a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[r],u=t.coordinateSystem;null!=l&&u.getOtherAxis&&(i=u.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:r,otherDim:l,otherAxisInverse:i}}},this)},this),n}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,n=e.handles=[null,null],o=e.handleLabels=[null,null],r=this._displayables.sliderGroup,a=this._size,s=this.dataZoomModel,l=this.api,u=s.get("borderRadius")||0,p=s.get("brushSelect"),h=e.filler=new Tp({silent:p,style:{fill:s.get("fillerColor")},textConfig:{position:"inside"}});r.add(h),r.add(new Tp({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:u},style:{stroke:s.get("dataBackgroundColor")||s.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),i([0,1],function(e){var i=s.get("handleIcon");!Wn[i]&&i.indexOf("path://")<0&&i.indexOf("image://")<0&&(i="path://"+i);var a=St(i,-1,0,2,2,null,!0);a.attr({cursor:Op(this._orient),draggable:!0,drift:O(this._onDragMove,this,e),ondragend:O(this._onDragEnd,this),onmouseover:O(this._showDataInfo,this,!0),onmouseout:O(this._showDataInfo,this,!1),z2:5});var l=a.getBoundingRect(),u=s.get("handleSize");this._handleHeight=Ce(u,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,a.setStyle(s.getModel("handleStyle").getItemStyle()),a.style.strokeNoScale=!0,a.rectHover=!0,a.ensureState("emphasis").style=s.getModel(["emphasis","handleStyle"]).getItemStyle(),Cn(a);var p=s.get("handleColor");null!=p&&(a.style.fill=p),r.add(n[e]=a);var h=s.getModel("textStyle"),c=(s.get("handleLabel")||{}).show||!1;t.add(o[e]=new d({silent:!0,invisible:!c,style:yt(h,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:h.getTextColor(),font:h.getFont()}),z2:10}))},this);var c=h;if(p){var g=Ce(s.get("moveHandleSize"),a[1]),f=e.moveHandle=new T({style:s.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:g}}),y=.8*g,m=e.moveHandleIcon=St(s.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);m.silent=!0,m.y=a[1]+g/2-.5,f.ensureState("emphasis").style=s.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var v=Math.min(a[1]/2,Math.max(g,10));(c=e.moveZone=new T({invisible:!0,shape:{y:a[1]-v,height:g+v}})).on("mouseover",function(){l.enterEmphasis(f)}).on("mouseout",function(){l.leaveEmphasis(f)}),r.add(f),r.add(m),r.add(c)}c.attr({draggable:!0,cursor:Op(this._orient),drift:O(this._onDragMove,this,"all"),ondragstart:O(this._showDataInfo,this,!0),ondragend:O(this._onDragEnd,this),onmouseover:O(this._showDataInfo,this,!0),onmouseout:O(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[Ue(t[0],[0,100],e,!0),Ue(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),r=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];ko(e,i,o,n.get("zoomLock")?"all":t,null!=r.minSpan?Ue(r.minSpan,a,o,!0):null,null!=r.maxSpan?Ue(r.maxSpan,a,o,!0):null);var s=this._range,l=this._range=Ke([Ue(i[0],o,a,!0),Ue(i[1],o,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,n=this._handleEnds,o=Ke(n.slice()),r=this._size;i([0,1],function(t){var i=e.handles[t],o=this._handleHeight;i.attr({scaleX:o/2,scaleY:o/2,x:n[t]+(t?-1:1),y:r[1]/2-o/2})},this),e.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:r[1]});var a={x:o[0],width:o[1]-o[0]};e.moveHandle&&(e.moveHandle.setShape(a),e.moveZone.setShape(a),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",a.x+a.width/2));for(var s=e.dataShadowSegs,l=[0,o[0],o[1],r[0]],u=0;u<s.length;u++){var p=s[u],h=p.getClipPath();h||(h=new T,p.setClipPath(h)),h.setShape({x:l[u],y:0,width:l[u+1]-l[u],height:r[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,r=["",""];if(e.get("showDetail")){var a=e.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,u=t?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();r=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var p=Ke(this._handleEnds.slice());function h(t){var e=ie(n.handles[t].parent,this.group),a=ne(0===t?"right":"left",e),s=this._handleWidth/2+5,l=ce([p[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],verticalAlign:o===Ap?"middle":a,align:o===Ap?a:"center",text:r[t]})}h.call(this,0),h.call(this,1)},e.prototype._formatLabel=function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=e.getPixelPrecision());var r=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return v(i)?i(t,r):s(i)?i.replace("{value}",r):r},e.prototype._showDataInfo=function(t){var e=(this.dataZoomModel.get("handleLabel")||{}).show||!1,n=this.dataZoomModel.getModel(["emphasis","handleLabel"]).get("show")||!1,i=t||this._dragging?n:e,o=this._displayables,r=o.handleLabels;r[0].attr("invisible",!i),r[1].attr("invisible",!i),o.moveHandle&&this.api[i?"enterEmphasis":"leaveEmphasis"](o.moveHandle,1)},e.prototype._onDragMove=function(t,e,n,i){this._dragging=!0,z(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),r=ce([e,n],o,!0),a=this._updateInterval(t,r[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),a&&s&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,r=this._updateInterval("all",n[0]-o);this._updateView(),r&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,n=t.offsetY;this._brushStart=new at(e,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var n=e.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var i=this._getViewExtent(),o=[0,100];this._range=Ke([Ue(n.x,i,o,!0),Ue(n.x+n.width,i,o,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(z(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var n=this._displayables,i=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new Tp({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var r=this._brushStart,a=this._displayables.sliderGroup,s=a.transformCoordToLocal(t,e),l=a.transformCoordToLocal(r.x,r.y),u=this._size;s[0]=Math.max(Math.min(u[0],s[0]),0),o.setShape({x:l[0],y:0,width:s[0]-l[0],height:u[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?Pp:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=as(this.dataZoomModel).infoList;if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var i=this.api.getWidth(),o=this.api.getHeight();t={x:.2*i,y:.2*o,width:.6*i,height:.6*o}}return t},e.type="dataZoom.slider",e}(hs);function Op(t){return"vertical"===t?"ns-resize":"ew-resize"}function Rp(t){t.registerComponentModel(Cp),t.registerComponentView(Lp),vs(t)}function zp(t){ye(Ip),ye(Rp)}var Vp=Zn.mapVisual,Bp=Zn.eachVisual,Ep=e,Gp=i,Np=Ke,Hp=Ue,Wp=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return ii(n,t),n.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},n.prototype.optionUpdated=function(t,e){var n=this.option;!e&&xn(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(t){var e=this.stateList;t=O(t,this),this.controllerVisuals=mn(this.option.controller,e,t),this.targetVisuals=mn(this.option.target,e,t)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,n){e.push(n)}):e=fn(t),e},n.prototype.eachTargetSeries=function(t,e){i(this.getTargetSeriesIndices(),function(n){var i=this.ecModel.getSeriesByIndex(n);i&&t.call(e,i)},this)},n.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},n.prototype.formatValueText=function(t,n,i){var o,r=this.option,a=r.precision,l=this.dataBound,u=r.formatter;i=i||["<",">"],e(t)&&(t=t.slice(),o=!0);var p=n?t:o?[h(t[0]),h(t[1])]:h(t);return s(u)?u.replace("{value}",o?p[0]:p).replace("{value2}",o?p[1]:p):v(u)?o?u(t[0],t[1]):u(t):o?t[0]===l[0]?i[0]+" "+p[1]:t[1]===l[1]?i[1]+" "+p[0]:p[0]+" - "+p[1]:p;function h(t){return t===l[0]?"min":t===l[1]?"max":(+t).toFixed(Math.min(a,20))}},n.prototype.resetExtent=function(){var t=this.option,e=Np([t.min,t.max]);this._dataExtent=e},n.prototype.getDataDimensionIndex=function(t){var e=this.option.dimension;if(null!=e)return t.getDimensionIndex(e);for(var n=t.dimensions,i=n.length-1;i>=0;i--){var o=n[i],r=t.getDimensionInfo(o);if(!r.isCalculationCoord)return r.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},i=e.target||(e.target={}),o=e.controller||(e.controller={});G(i,n),G(o,n);var r=this.isCategory();function a(n){Ep(e.color)&&!n.inRange&&(n.inRange={color:e.color.slice().reverse()}),n.inRange=n.inRange||{color:t.get("gradientColor")}}a.call(this,i),a.call(this,o),function(t,e,n){var i=t[e],o=t[n];i&&!o&&(o=t[n]={},Gp(i,function(t,e){if(Zn.isValidType(e)){var n=Fn.get(e,"inactive",r);null!=n&&(o[e]=n,"color"!==e||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}}))}.call(this,i,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor"),o=this.getItemSymbol()||"roundRect";Gp(this.stateList,function(a){var s=this.itemSize,l=t[a];l||(l=t[a]={color:r?i:[i]}),null==l.symbol&&(l.symbol=e&&w(e)||(r?o:[o])),null==l.symbolSize&&(l.symbolSize=n&&w(n)||(r?s[0]:[s[0],s[0]])),l.symbol=Vp(l.symbol,function(t){return"none"===t?o:t});var u=l.symbolSize;if(null!=u){var p=-1/0;Bp(u,function(t){t>p&&(p=t)}),l.symbolSize=Vp(u,function(t){return Hp(t,[0,p],[0,s[0]],!0)})}},this)}.call(this,o)},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(t){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(t){return null},n.prototype.getVisualMeta=function(t){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},n}(ge),Zp=[20,140],Fp=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return ii(n,t),n.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},n.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=Zp[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=Zp[1])},n.prototype._resetRange=function(){var t=this.getExtent(),n=this.option.range;!n||n.auto?(t.auto=1,this.option.range=t):e(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],t[0]),n[1]=Math.min(n[1],t[1]))},n.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),i(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)},this)},n.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},n.prototype.getSelected=function(){var t=this.getExtent(),e=Ke((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},n.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries(function(n){var i=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(e,n){t[0]<=e&&e<=t[1]&&i.push(n)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},n.prototype.getVisualMeta=function(t){var e=Yp(this,"outOfRange",this.getExtent()),n=Yp(this,"inRange",this.option.range.slice()),i=[];function o(e,n){i.push({value:e,color:t(e,n)})}for(var r=0,a=0,s=n.length,l=e.length;a<l&&(!n.length||e[a]<=n[0]);a++)e[a]<n[r]&&o(e[a],"outOfRange");for(var u=1;r<s;r++,u=0)u&&i.length&&o(n[r],"outOfRange"),o(n[r],"inRange");for(u=1;a<l;a++)(!n.length||n[n.length-1]<e[a])&&(u&&(i.length&&o(i[i.length-1].value,"outOfRange"),u=0),o(e[a],"outOfRange"));var p=i.length;return{stops:i,outerColors:[p?i[0].color:"transparent",p?i[p-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=Sn(Wp.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),n}(Wp);function Yp(t,e,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,o=n[0],r=[],a=0;a<=200&&o<n[1];a++)r.push(o),o+=i;return r.push(n[1]),r}var Xp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return ii(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,i){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,i):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=he(e.get("padding")||0),i=t.getBoundingRect();t.add(new T({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){var o=(n=n||{}).forceState,r=this.visualMapModel,a={};if("color"===e){var s=r.get("contentColor");a.color=s}function l(t){return a[t]}function u(t,e){a[t]=e}var p=r.controllerVisuals[o||r.getValueState(t)],h=Zn.prepareVisualTypes(p);return i(h,function(i){var o=p[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",o=p.__alphaForOpacity),Zn.dependsOn(i,e)&&o&&o.applyVisual(t,l,u)}),a[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;Ne(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,i){},e.type="visualMap",e}(Tt),Up=[["left","right","width"],["top","bottom","height"]];function Kp(t,e,n){var i=t.option,o=i.align;if(null!=o&&"auto"!==o)return o;for(var r={width:e.getWidth(),height:e.getHeight()},a="horizontal"===i.orient?1:0,s=Up[a],l=[0,null,10],u={},p=0;p<3;p++)u[Up[1-a][p]]=l[p],u[s[p]]=2===p?n[0]:i[s[p]];var h=[["x","width",3],["y","height",0]][a],c=Je(u,r,i.padding);return s[(c.margin[h[2]]||0)+c[h[0]]+.5*c[h[1]]<.5*r[h[1]]?0:1]}function jp(t,e){return i(t||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var qp=Ue,$p=i,Jp=Math.min,Qp=Math.max,th=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return ii(n,t),n.prototype.init=function(e,n){t.prototype.init.call(this,e,n),this._hoverLinkFromSeriesMouseOver=O(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=O(this._hideIndicator,this)},n.prototype.doRender=function(t,e,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},n.prototype._renderEndsText=function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var o=this.visualMapModel,r=o.get("textGap"),a=o.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([a[0]/2,0===n?-r:a[1]+r],s),u=this._applyTransform(0===n?"bottom":"top",s),p=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new d({style:yt(h,{x:l[0],y:l[1],verticalAlign:"horizontal"===p?"middle":u,align:"horizontal"===p?u:"center",text:i})}))}},n.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,i=e.itemSize,o=this._orient,r=this._useHandle,a=Kp(e,this.api,i),s=n.mainGroup=this._createBarGroup(a),l=new p;s.add(l),l.add(n.outOfRange=eh()),l.add(n.inRange=eh(null,r?ih(this._orient):null,O(this._dragHandle,this,"all",!1),O(this._dragHandle,this,"all",!0))),l.setClipPath(new T({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var u=e.textStyleModel.getTextRect(""),h=Qp(u.width,u.height);r&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,s,0,i,h,o),this._createHandle(e,s,1,i,h,o)),this._createIndicator(e,s,i,h,o),t.add(s)},n.prototype._createHandle=function(t,e,n,i,o,r){var a=O(this._dragHandle,this,n,!1),s=O(this._dragHandle,this,n,!0),l=et(t.get("handleSize"),i[0]),u=St(t.get("handleIcon"),-l/2,-l/2,l,l,null,!0),p=ih(this._orient);u.attr({cursor:p,draggable:!0,drift:a,ondragend:s,onmousemove:function(t){z(t.event)}}),u.x=i[0]/2,u.useStyle(t.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Yn(u,!0),e.add(u);var h=this.visualMapModel.textStyleModel,c=new d({cursor:p,draggable:!0,drift:a,onmousemove:function(t){z(t.event)},ondragend:s,style:yt(h,{x:0,y:0,text:""})});c.ensureState("blur").style={opacity:.1},c.stateTransition={duration:200},this.group.add(c);var g=[l,0],f=this._shapes;f.handleThumbs[n]=u,f.handleLabelPoints[n]=g,f.handleLabels[n]=c},n.prototype._createIndicator=function(t,e,n,i,r){var a=et(t.get("indicatorSize"),n[0]),s=St(t.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);s.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var l=t.getModel("indicatorStyle").getItemStyle();if(s instanceof K){var u=s.style;s.useStyle(o({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},l))}else s.useStyle(l);e.add(s);var p=this.visualMapModel.textStyleModel,h=new d({silent:!0,invisible:!0,style:yt(p,{x:0,y:0,text:""})});this.group.add(h);var c=[("horizontal"===r?i/2:6)+n[0]/2,0],g=this._shapes;g.indicator=s,g.indicatorLabel=h,g.indicatorLabelPoint=c,this._firstShowIndicator=!0},n.prototype._dragHandle=function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([n,i],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():nh(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},n.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[qp(e[0],n,i,!0),qp(e[1],n,i,!0)]},n.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,i=this._handleEnds,o=[0,n.itemSize[1]];ko(e,i,o,t,0);var r=n.getExtent();this._dataInterval=[qp(i[0],o,r,!0),qp(i[1],o,r,!0)]},n.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,o=[0,e.itemSize[1]],r=t?o:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,r,"inRange"),s=this._createBarVisual(n,n,o,"outOfRange");i.inRange.setStyle({fill:a.barColor}).setShape("points",a.barPoints),i.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(r,a)},n.prototype._createBarVisual=function(t,e,n,i){var o={forceState:i,convertOpacityToAlpha:!0},r=this._makeColorGradient(t,o),a=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],s=this._createBarPoints(n,a);return{barColor:new st(0,0,0,1,r),barPoints:s,handlesColor:[r[0].color,r[r.length-1].color]}},n.prototype._makeColorGradient=function(t,e){var n=[],i=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var o=1;o<100;o++){var r=t[0]+i*o;if(r>t[1])break;n.push({color:this.getControllerVisual(r,"color",e),offset:o/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},n.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},n.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new p("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},n.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,o=n.handleThumbs,r=n.handleLabels,a=i.itemSize,s=i.getExtent(),l=this._applyTransform("left",n.mainGroup);$p([0,1],function(u){var p=o[u];p.setStyle("fill",e.handlesColor[u]),p.y=t[u];var h=qp(t[u],[0,a[1]],s,!0),c=this.getControllerVisual(h,"symbolSize");p.scaleX=p.scaleY=c/a[0],p.x=a[0]-c/2;var d=ce(n.handleLabelPoints[u],ie(p,this.group));if("horizontal"===this._orient){var g="left"===l||"top"===l?(a[0]-c)/2:(a[0]-c)/-2;d[1]+=g}r[u].setStyle({x:d[0],y:d[1],text:i.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})},this)}},n.prototype._showIndicator=function(t,e,n,i){var o=this.visualMapModel,r=o.getExtent(),a=o.itemSize,s=[0,a[1]],l=this._shapes,u=l.indicator;if(u){u.attr("invisible",!1);var p=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),h=this.getControllerVisual(t,"symbolSize"),c=qp(t,r,s,!0),d=a[0]-h/2,g={x:u.x,y:u.y};u.y=c,u.x=d;var f=ce(l.indicatorLabelPoint,ie(u,this.group)),y=l.indicatorLabel;y.attr("invisible",!1);var m=this._applyTransform("left",l.mainGroup),v="horizontal"===this._orient;y.setStyle({text:(n||"")+o.formatValueText(e),verticalAlign:v?m:"middle",align:v?"center":m});var x={x:d,y:c,style:{fill:p}},_={style:{x:f[0],y:f[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var b={duration:100,easing:"cubicInOut",additive:!0};u.x=g.x,u.y=g.y,u.animateTo(x,b),y.animateTo(_,b)}else u.attr(x),y.attr(_);this._firstShowIndicator=!1;var M=this._shapes.handleLabels;if(M)for(var S=0;S<M.length;S++)this.api.enterBlur(M[S])}},n.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);i[1]=Jp(Qp(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},n.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var o=[0,i[1]],r=n.getExtent();t=Jp(Qp(o[0],t),o[1]);var a=function(t,e,n){var i=6,o=t.get("hoverLinkDataSize");o&&(i=qp(o,e,n,!0)/2);return i}(n,r,o),s=[t-a,t+a],l=qp(t,o,r,!0),u=[qp(s[0],o,r,!0),qp(s[1],o,r,!0)];s[0]<o[0]&&(u[0]=-1/0),s[1]>o[1]&&(u[1]=1/0),e&&(u[0]===-1/0?this._showIndicator(l,u[1],"< ",a):u[1]===1/0?this._showIndicator(l,u[0],"> ",a):this._showIndicator(l,l," ",a));var p=this._hoverLinkDataIndices,h=[];(e||nh(n))&&(h=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var c=Xn(p,h);this._dispatchHighDown("downplay",jp(c[0],n)),this._dispatchHighDown("highlight",jp(c[1],n))}},n.prototype._hoverLinkFromSeriesMouseOver=function(t){var e;if(jt(t.target,function(t){var n=vt(t);if(null!=n.dataIndex)return e=n,!0},!0),e){var n=this.ecModel.getSeriesByIndex(e.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(n)){var o=n.getData(e.dataType),r=o.getStore().get(i.getDataDimensionIndex(o),e.dataIndex);isNaN(r)||this._showIndicator(r,r)}}},n.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var n=0;n<e.length;n++)this.api.leaveBlur(e[n])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",jp(t,this.visualMapModel)),t.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(t,n,i,o){var r=ie(n,o?null:this.group);return e(t)?ce(t,r,i):ne(t,r,i)},n.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n}(Xp);function eh(t,e,n,i){return new P({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){z(t.event)},ondragend:i})}function nh(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function ih(t){return"vertical"===t?"ns-resize":"ew-resize"}var oh={type:"selectDataRange",event:"dataRangeSelected",update:"update"},rh=function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})},ah=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(e){var i=t.pipelineContext;!e.isTargetSeries(t)||i&&i.large||n.push(Un(e.stateList,e.targetVisuals,O(e.getValueState,e),e.getDataDimensionIndex(t.getData())))}),n}},{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),i=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var o=e.getVisualMeta(O(sh,null,t,e))||{stops:[],outerColors:[]},r=e.getDataDimensionIndex(n);r>=0&&(o.dimension=r,i.push(o))}}),t.getData().setVisual("visualMeta",i)}}];function sh(t,e,n,i){for(var o=e.targetVisuals[i],r=Zn.prepareVisualTypes(o),a={color:Bn(t.getData(),"color")},s=0,l=r.length;s<l;s++){var u=r[s],p=o["opacity"===u?"__alphaForOpacity":u];p&&p.applyVisual(n,h,c)}return a.color;function h(t){return a[t]}function c(t,e){a[t]=e}}var lh=i;function uh(t){var n=t&&t.visualMap;e(n)||(n=n?[n]:[]),lh(n,function(t){if(t){ph(t,"splitList")&&!ph(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var n=t.pieces;n&&e(n)&&lh(n,function(t){y(t)&&(ph(t,"start")&&!ph(t,"min")&&(t.min=t.start),ph(t,"end")&&!ph(t,"max")&&(t.max=t.end))})}})}function ph(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var hh=!1;function ch(t){hh||(hh=!0,t.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"}),t.registerAction(oh,rh),i(ah,function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)}),t.registerPreprocessor(uh))}function dh(t){t.registerComponentModel(Fp),t.registerComponentView(th),ch(t)}var gh=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return ii(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],fh[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var o=this.option.categories;this.resetVisual(function(t,e){"categories"===i?(t.mappingMethod="category",t.categories=w(o)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=a(this._pieceList,function(t){return t=w(t),"inRange"!==e&&(t.visual=null),t}))})},e.prototype.completeVisualOption=function(){var e=this.option,n={},o=Zn.listVisualTypes(),r=this.isCategory();function a(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}i(e.pieces,function(t){i(o,function(e){t.hasOwnProperty(e)&&(n[e]=1)})}),i(n,function(t,n){var o=!1;i(this.stateList,function(t){o=o||a(e,t,n)||a(e.target,t,n)},this),!o&&i(this.stateList,function(t){(e[t]||(e[t]={}))[n]=Fn.get(n,"inRange"===t?"active":"inactive",r)})},this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,o=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,i(o,function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)},this),"single"===n.selectedMode){var a=!1;i(o,function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(a?r[n]=!1:a=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=w(t)},e.prototype.getValueState=function(t){var e=Zn.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries(function(i){var o=[],r=i.getData();r.each(this.getDataDimensionIndex(r),function(e,i){Zn.findPieceIndex(e,n)===t&&o.push(i)},this),e.push({seriesId:i.id,dataIndex:o})},this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],o=this,r=this._pieceList.slice();if(r.length){var a=r[0].interval[0];a!==-1/0&&r.unshift({interval:[-1/0,a]}),(a=r[r.length-1].interval[1])!==1/0&&r.push({interval:[a,1/0]})}else r.push({interval:[-1/0,1/0]});var s=-1/0;return i(r,function(t){var e=t.interval;e&&(e[0]>s&&l([s,e[0]],"outOfRange"),l(e.slice()),s=e[1])},this),{stops:e,outerColors:n}}function l(i,r){var a=o.getRepresentValue({interval:i});r||(r=o.getValueState(a));var s=t(a,r);i[0]===-1/0?n[0]=s:i[1]===1/0?n[1]=s:e.push({value:i[0],color:s},{value:i[1],color:s})}},e.type="visualMap.piecewise",e.defaultOption=Sn(Wp.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(Wp),fh={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),o=this.getExtent(),r=e.splitNumber;r=Math.max(parseInt(r,10),1),e.splitNumber=r;for(var a=(o[1]-o[0])/r;+a.toFixed(n)!==a&&n<5;)n++;e.precision=n,a=+a.toFixed(n),e.minOpen&&t.push({interval:[-1/0,o[0]],close:[0,0]});for(var s=0,l=o[0];s<r;l+=a,s++){var u=s===r-1?o[1]:l+a;t.push({interval:[l,u],close:[1,1]})}e.maxOpen&&t.push({interval:[o[1],1/0],close:[0,0]}),Kn(t),i(t,function(t,e){t.index=e,t.text=this.formatValueText(t.interval)},this)},categories:function(t){var e=this.option;i(e.categories,function(e){t.push({text:this.formatValueText(e,!0),value:e})},this),yh(e,t)},pieces:function(t){var e=this.option;i(e.pieces,function(e,n){y(e)||(e={value:e});var i={text:"",index:n};if(null!=e.label&&(i.text=e.label),e.hasOwnProperty("value")){var o=i.value=e.value;i.interval=[o,o],i.close=[1,1]}else{for(var r=i.interval=[],a=i.close=[0,0],s=[1,0,1],l=[-1/0,1/0],u=[],p=0;p<2;p++){for(var h=[["gte","gt","min"],["lte","lt","max"]][p],c=0;c<3&&null==r[p];c++)r[p]=e[h[c]],a[p]=s[c],u[p]=2===c;null==r[p]&&(r[p]=l[p])}u[0]&&r[1]===1/0&&(a[0]=0),u[1]&&r[0]===-1/0&&(a[1]=0),r[0]===r[1]&&a[0]&&a[1]&&(i.value=r[0])}i.visual=Zn.retrieveVisuals(e),t.push(i)},this),yh(e,t),Kn(t),i(t,function(t){var e=t.close,n=[["<",""][e[1]],[">",""][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)},this)}};function yh(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var mh=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ii(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),o=e.textStyleModel,r=o.getFont(),a=o.getTextColor(),s=this._getItemAlign(),l=e.itemSize,u=this._getViewData(),h=u.endsText,g=c(e.get("showLabel",!0),!h),f=!e.get("selectedMode");h&&this._renderEndsText(t,h[0],l,g,s),i(u.viewPieceList,function(i){var o=i.piece,u=new p;u.onclick=O(this._onItemClick,this,o),this._enableHoverLink(u,i.indexInModelPieceList);var h=e.getRepresentValue(o);if(this._createItemSymbol(u,h,[0,0,l[0],l[1]],f),g){var c=this.visualMapModel.getValueState(h);u.add(new d({style:{x:"right"===s?-n:l[0]+n,y:l[1]/2,text:o.text,verticalAlign:"middle",align:s,font:r,fill:a,opacity:"outOfRange"===c?.5:1},silent:f}))}t.add(u)},this),h&&this._renderEndsText(t,h[1],l,g,s),Qe(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(t){var i=n.visualMapModel;i.option.hoverLink&&n.api.dispatchAction({type:t,batch:jp(i.findTargetDataIndices(e),i)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return Kp(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,e,n,i,o){if(e){var r=new p,a=this.visualMapModel.textStyleModel;r.add(new d({style:yt(a,{x:i?"right"===o?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:i?o:"center",text:e})})),t.add(r)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=a(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),n=t.get("text"),i=t.get("orient"),o=t.get("inverse");return("horizontal"===i?o:!o)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n,i){var o=St(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color"));o.silent=i,t.add(o)},e.prototype._onItemClick=function(t){var e=this.visualMapModel,n=e.option,o=n.selectedMode;if(o){var r=w(n.selected),a=e.getSelectedMapKey(t);"single"===o||!0===o?(r[a]=!0,i(r,function(t,e){r[e]=e===a})):r[a]=!r[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})}},e.type="visualMap.piecewise",e}(Xp);function vh(t){t.registerComponentModel(gh),t.registerComponentView(mh),ch(t)}function xh(t){ye(dh),ye(vh)}function _h(t){if(t&&t.aria){var e=t.aria;null!=e.show&&(e.enabled=e.show),e.label=e.label||{},i(["description","general","series","data"],function(t){null!=e[t]&&(e.label[t]=e[t])})}}function bh(t){t.registerPreprocessor(_h),t.registerVisual(t.PRIORITY.VISUAL.ARIA,jn)}var Mh={type:"echarts:filter",transform:function(t){for(var e,i=t.upstream,o=qn(t.config,{valueGetterAttrMap:C({dimension:!0}),prepareGetValue:function(t){var e=t.dimension;n(t,"dimension")||ln("");var o=i.getDimensionInfo(e);return o||ln(""),{dimIdx:o.index}},getValue:function(t){return i.retrieveValueFromItem(e,t.dimIdx)}}),r=[],a=0,s=i.count();a<s;a++)e=i.getRawDataItem(a),o.evaluate()&&r.push(e);return{data:r}}},Sh={type:"echarts:sort",transform:function(t){var e=t.upstream,n=t.config,o="",r=fn(n);r.length||ln(o);var a=[];i(r,function(t){var n=t.dimension,i=t.order,r=t.parser,s=t.incomparable;if(null==n&&ln(o),"asc"!==i&&"desc"!==i&&ln(o),s&&"min"!==s&&"max"!==s){ln("")}if("asc"!==i&&"desc"!==i){ln("")}var l=e.getDimensionInfo(n);l||ln(o);var u=r?$n(r):null;r&&!u&&ln(o),a.push({dimIdx:l.index,parser:u,comparator:new pt(i,s)})});var s=e.sourceFormat;s!==Jn&&s!==Qn&&ln(o);for(var l=[],u=0,p=e.count();u<p;u++)l.push(e.getRawDataItem(u));return l.sort(function(t,n){for(var i=0;i<a.length;i++){var o=a[i],r=e.retrieveValueFromItem(t,o.dimIdx),s=e.retrieveValueFromItem(n,o.dimIdx);o.parser&&(r=o.parser(r),s=o.parser(s));var l=o.comparator.evaluate(r,s);if(0!==l)return l}return 0}),{data:l}}};function wh(t){t.registerTransform(Mh),t.registerTransform(Sh)}var Ih=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return ii(e,t),e.prototype.init=function(e,n,i){t.prototype.init.call(this,e,n,i),this._sourceManager=new ti(this),ei(this)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),ei(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:ni},e}(ge),Ch=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return ii(e,t),e.type="dataset",e}(Tt);function Th(t){t.registerComponentModel(Ih),t.registerComponentView(Ch)}export{zp as A,Ip as B,Rp as C,xh as D,dh as E,vh as F,bh as G,wh as H,Th as I,mo as M,eo as R,$i as a,Co as b,pi as c,ao as d,Mi as e,Tr as f,ca as g,Aa as h,Ki as i,Na as j,Wa as k,es as l,al as m,Al as n,lo as o,ha as p,Kl as q,xi as r,ko as s,$l as t,ro as u,pu as v,Au as w,Bu as x,Uu as y,gp as z};
//# sourceMappingURL=echarts-components-qRndAGwt.js.map
