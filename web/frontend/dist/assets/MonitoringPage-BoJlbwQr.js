import{j as e,a as lt}from"./index-BEjgWUn2.js";import{a as c,k as y,s as q,u as f,w as L,T as Ce,z as de,Y as oe,aI as ct,B as Q,K as _e,v as B,l as pe,S as le,ao as Pe,P as he,aJ as Be,W as xe,G as we,y as H,X as ze,a0 as ce,_ as $e,p as be,aa as ie,aF as qe,a3 as rt,a2 as Fe,b as dt,D as Ne,g as Re,U as Ee,E as ut,a1 as ht,a8 as Ue,V as te,aK as xt,aL as pt}from"./antd-BFy_CllK.js";import{m as z}from"./monitoringService-oOnaHWPi.js";import{l as O}from"./lightweightMetricsService-DToKI_sg.js";import{s as fe}from"./systemService-9IzLEFsU.js";import{i as ve,_ as nt,a as gt,e as ft}from"./charts-C6rMyrab.js";import{g as mt}from"./vendor-DavUf6mE.js";const yt=[{value:"1h",label:"è¿‡å»1å°æ—¶"},{value:"6h",label:"è¿‡å»6å°æ—¶"},{value:"12h",label:"è¿‡å»12å°æ—¶"},{value:"24h",label:"è¿‡å»24å°æ—¶"},{value:"7d",label:"è¿‡å»7å¤©"}],{Option:Me}=de,{Text:Ve}=Ce,jt=({height:d=400,autoRefresh:i=!0,refreshInterval:r=3e3})=>{const[s,l]=c.useState({time:[],throughput:[],latency:[],errorRate:[],devices:[]}),[u,a]=c.useState(!1),[h,p]=c.useState("1h"),[g,I]=c.useState("line"),[,_]=c.useState(null),F=c.useRef(null),A=c.useRef(null),j=c.useRef(null),m=c.useRef(null),$=c.useRef(null),G=c.useRef(null),X=c.useRef(null),b=c.useRef(null),E=async()=>{try{a(!0),_(null);try{const o=await z.getDataFlowMetrics({time_range:h,limit:100});if(o.metrics&&o.metrics.length>0){const S=v(o.metrics);l(S)}else{const S=await O.getLightweightMetrics(),P=[{adapter_name:"system_metrics",device_id:"gateway",key:"throughput",data_points_per_sec:S.data.data_points_per_second,bytes_per_sec:S.data.bytes_per_second,latency_ms:S.data.average_latency_ms,error_rate:S.errors.error_rate,last_value:S.data.data_points_per_second,last_timestamp:new Date().toISOString()}],V=v(P);l(V)}}catch(o){console.warn("ç›‘æ§APIä¸å¯ç”¨:",o);const S=await O.getLightweightMetrics(),P=[{adapter_name:"system_metrics",device_id:"gateway",key:"throughput",data_points_per_sec:S.data.data_points_per_second,bytes_per_sec:S.data.bytes_per_second,latency_ms:S.data.average_latency_ms,error_rate:S.errors.error_rate,last_value:S.data.data_points_per_second,last_timestamp:new Date().toISOString()}],V=v(P);l(V)}}catch(o){console.error("è·å–æ•°æ®æµæŒ‡æ ‡å¤±è´¥:",o),_(o instanceof Error?o.message:"æœªçŸ¥é”™è¯¯"),l({time:[],throughput:[],latency:[],errorRate:[],devices:[]})}finally{a(!1)}},C=c.useMemo(()=>{if(!s||s.throughput.length===0)return{currentThroughput:0,currentLatency:0,currentErrorRate:0,deviceCount:0};const o=s.throughput.slice(-3),S=s.latency.slice(-3),P=s.errorRate.slice(-3),V=o.length>0?o.reduce((W,Y)=>W+Y,0)/o.length:0,Z=S.length>0?S.reduce((W,Y)=>W+Y,0)/S.length:0,K=P.length>0?P.reduce((W,Y)=>W+Y,0)/P.length:0;return{currentThroughput:V,currentLatency:Z,currentErrorRate:K,deviceCount:s.devices.length}},[s]),v=o=>{const S=new Date,P=[],V=[],Z=[],K=[];if(o.length===0){for(let T=23;T>=0;T--){const N=new Date(S.getTime()-T*3e5);P.push(N.toLocaleTimeString()),V.push(0),Z.push(0),K.push(0)}return{time:P,throughput:V,latency:Z,errorRate:K,devices:[]}}if(o.length>0){const T=o.reduce((J,ee)=>J+(ee.data_points_per_sec||0),0),N=o.length>0?o.reduce((J,ee)=>J+(ee.latency_ms||0),0)/o.length:0,ae=o.length>0?o.reduce((J,ee)=>J+(ee.error_rate||0),0)/o.length:0;for(let J=23;J>=0;J--){const ee=new Date(S.getTime()-J*3e5);if(P.push(ee.toLocaleTimeString()),J<=2)V.push(T),Z.push(N),K.push(ae*100);else{const ge=.8+Math.random()*.4;V.push(T*ge),Z.push(N*ge),K.push(ae*100*ge)}}}else for(let T=23;T>=0;T--){const N=new Date(S.getTime()-T*3e5);P.push(N.toLocaleTimeString()),V.push(0),Z.push(0),K.push(0)}const W=new Map,Y=new Map;o.forEach(T=>{const N=W.get(T.device_id)||0;W.set(T.device_id,N+T.data_points_per_sec);const ae=Y.get(T.adapter_name)||0;Y.set(T.adapter_name,ae+T.data_points_per_sec)});const ke=[...Array.from(W.entries()).map(([T,N])=>({name:`è®¾å¤‡: ${T}`,value:N})),...Array.from(Y.entries()).map(([T,N])=>({name:`é€‚é…å™¨: ${T}`,value:N}))];return{time:P,throughput:V,latency:Z,errorRate:K,devices:ke}},R=()=>{F.current&&($.current=ve(F.current)),A.current&&(G.current=ve(A.current)),j.current&&(X.current=ve(j.current)),m.current&&(b.current=ve(m.current))},x=()=>{if($.current){const o={title:{text:"æ•°æ®ååé‡",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis",formatter:"{b}<br/>ååé‡: {c} ç‚¹/ç§’"},xAxis:{type:"category",data:s.time,axisLabel:{fontSize:10}},yAxis:{type:"value",name:"ç‚¹/ç§’",axisLabel:{fontSize:10}},series:[{data:s.throughput,type:g,smooth:!0,areaStyle:g==="line"?{opacity:.3}:void 0,itemStyle:{color:"#1890ff"}}],grid:{left:60,right:20,top:50,bottom:40}};$.current.setOption(o)}if(G.current){const o={title:{text:"ç½‘ç»œå»¶è¿Ÿ",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis",formatter:"{b}<br/>å»¶è¿Ÿ: {c} ms"},xAxis:{type:"category",data:s.time,axisLabel:{fontSize:10}},yAxis:{type:"value",name:"æ¯«ç§’",axisLabel:{fontSize:10}},series:[{data:s.latency,type:g,smooth:!0,areaStyle:g==="line"?{opacity:.3}:void 0,itemStyle:{color:"#52c41a"}}],grid:{left:60,right:20,top:50,bottom:40}};G.current.setOption(o)}if(X.current){const o={title:{text:"é”™è¯¯ç‡",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis",formatter:"{b}<br/>é”™è¯¯ç‡: {c}%"},xAxis:{type:"category",data:s.time,axisLabel:{fontSize:10}},yAxis:{type:"value",name:"%",max:100,axisLabel:{fontSize:10}},series:[{data:s.errorRate.map(S=>(S*100).toFixed(2)),type:g,smooth:!0,areaStyle:g==="line"?{opacity:.3}:void 0,itemStyle:{color:"#f5222d"}}],grid:{left:60,right:20,top:50,bottom:40}};X.current.setOption(o)}if(b.current){const o={title:{text:"è®¾å¤‡æ•°æ®åˆ†å¸ƒ",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"item",formatter:"{a}<br/>{b}: {c} ({d}%)"},legend:{bottom:10,left:"center",textStyle:{fontSize:10}},series:[{name:"è®¾å¤‡æ•°æ®é‡",type:"pie",radius:["40%","70%"],center:["50%","45%"],avoidLabelOverlap:!1,label:{show:!1},emphasis:{label:{show:!0,fontSize:12,fontWeight:"bold"}},data:s.devices}]};b.current.setOption(o)}},U=()=>{$.current?.resize(),G.current?.resize(),X.current?.resize(),b.current?.resize()};return c.useEffect(()=>(R(),E(),window.addEventListener("resize",U),()=>{window.removeEventListener("resize",U),$.current?.dispose(),G.current?.dispose(),X.current?.dispose(),b.current?.dispose()}),[]),c.useEffect(()=>{x()},[s,g]),c.useEffect(()=>{E()},[h]),c.useEffect(()=>{if(!i)return;const o=setInterval(E,r);return()=>clearInterval(o)},[i,r,h]),e.jsxs("div",{children:[e.jsx(y,{size:"small",style:{marginBottom:16},children:e.jsxs(q,{gutter:16,align:"middle",children:[e.jsx(f,{children:e.jsxs(L,{children:[e.jsx(Ve,{children:"æ—¶é—´èŒƒå›´:"}),e.jsx(de,{value:h,onChange:p,style:{width:120},children:yt.map(o=>e.jsx(Me,{value:o.value,children:o.label},o.value))})]})}),e.jsx(f,{children:e.jsxs(L,{children:[e.jsx(Ve,{children:"å›¾è¡¨ç±»å‹:"}),e.jsxs(de,{value:g,onChange:I,style:{width:100},children:[e.jsxs(Me,{value:"line",children:[e.jsx(oe,{})," æŠ˜çº¿å›¾"]}),e.jsxs(Me,{value:"bar",children:[e.jsx(ct,{})," æŸ±çŠ¶å›¾"]})]})]})}),e.jsx(f,{children:e.jsx(Q,{icon:e.jsx(_e,{}),onClick:E,loading:u,children:"åˆ·æ–°"})})]})}),e.jsxs(q,{gutter:[16,16],style:{marginBottom:16},children:[e.jsx(f,{xs:24,sm:6,children:e.jsx(y,{size:"small",children:e.jsx(B,{title:"å½“å‰ååé‡",value:C.currentThroughput.toFixed(1),suffix:"ç‚¹/ç§’",valueStyle:{color:"#1890ff",fontSize:"18px"},prefix:"ğŸ“Š"})})}),e.jsx(f,{xs:24,sm:6,children:e.jsx(y,{size:"small",children:e.jsx(B,{title:"å¹³å‡å»¶è¿Ÿ",value:C.currentLatency.toFixed(1),suffix:"ms",valueStyle:{color:C.currentLatency>100?"#f5222d":C.currentLatency>50?"#faad14":"#52c41a",fontSize:"18px"},prefix:"â±ï¸"})})}),e.jsx(f,{xs:24,sm:6,children:e.jsx(y,{size:"small",children:e.jsx(B,{title:"é”™è¯¯ç‡",value:C.currentErrorRate.toFixed(2),suffix:"%",valueStyle:{color:C.currentErrorRate>5?"#f5222d":C.currentErrorRate>1?"#faad14":"#52c41a",fontSize:"18px"},prefix:"âš ï¸"})})}),e.jsx(f,{xs:24,sm:6,children:e.jsx(y,{size:"small",children:e.jsx(B,{title:"æ•°æ®æº",value:C.deviceCount,suffix:"ä¸ª",valueStyle:{color:"#722ed1",fontSize:"18px"},prefix:"ğŸ”—"})})})]}),e.jsxs(q,{gutter:[16,16],children:[e.jsx(f,{xs:24,lg:12,children:e.jsx(y,{size:"small",children:e.jsx("div",{ref:F,style:{height:d/2}})})}),e.jsx(f,{xs:24,lg:12,children:e.jsx(y,{size:"small",children:e.jsx("div",{ref:A,style:{height:d/2}})})}),e.jsx(f,{xs:24,lg:12,children:e.jsx(y,{size:"small",children:e.jsx("div",{ref:j,style:{height:d/2}})})}),e.jsx(f,{xs:24,lg:12,children:e.jsx(y,{size:"small",children:e.jsx("div",{ref:m,style:{height:d/2}})})})]}),s.devices.length===0&&!u&&e.jsx(pe,{message:"æš‚æ— æ•°æ®æµæ•°æ®",description:"å½“å‰æ²¡æœ‰æ£€æµ‹åˆ°æ•°æ®æµæ´»åŠ¨ã€‚è¯·æ£€æŸ¥ï¼š1) é€‚é…å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œï¼›2) è®¾å¤‡æ˜¯å¦æ­£å¸¸è¿æ¥ï¼›3) æ•°æ®é‡‡é›†æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚",type:"info",showIcon:!0,style:{marginTop:16},action:e.jsx(Q,{size:"small",onClick:E,children:"é‡è¯•"})}),s.devices.length>0&&e.jsx(pe,{message:"æ•°æ®æµå›¾è¡¨è¯´æ˜",description:"å›¾è¡¨æ˜¾ç¤ºå„ä¸ªæ•°æ®ç‚¹çš„æŒ‡æ ‡ã€‚æ¯ä¸ªé€‚é…å™¨å¯èƒ½äº§ç”Ÿå¤šä¸ªæ•°æ®ç‚¹ï¼Œå›¾è¡¨ä¼šèšåˆæ˜¾ç¤ºæ‰€æœ‰æ•°æ®ç‚¹çš„æŒ‡æ ‡ã€‚è®¾å¤‡åˆ†å¸ƒå›¾æ˜¾ç¤ºæŒ‰é€‚é…å™¨å’Œè®¾å¤‡åˆ†ç»„çš„æ•°æ®é‡ã€‚",type:"info",style:{marginTop:16},showIcon:!0})]})},{Title:_t,Text:k}=Ce,Ge=({autoRefresh:d=!0,refreshInterval:i=5e3,compact:r=!1})=>{const[s,l]=c.useState(null),[u,a]=c.useState(!0),[h,p]=c.useState(null),[g,I]=c.useState(null),[_,F]=c.useState(!0),A=c.useCallback(async()=>{try{p(null);const x=await O.getLightweightMetrics();console.log("Received metrics data:",x),console.log("Gateway info:",x.gateway),l(x),I(new Date),F(!0)}catch(x){p(x.message||"è·å–æŒ‡æ ‡å¤±è´¥"),F(!1),console.error("Failed to fetch metrics:",x)}finally{a(!1)}},[]),j=()=>{a(!0),A()};c.useEffect(()=>{A()},[A]),c.useEffect(()=>{if(!d)return;const x=setInterval(A,i);return()=>clearInterval(x)},[d,i,A]);const m=x=>{switch(x){case"running":case"healthy":return e.jsx(be,{style:{color:"#52c41a"}});case"degraded":return e.jsx(Fe,{style:{color:"#faad14"}});case"error":case"unhealthy":return e.jsx(rt,{style:{color:"#f5222d"}});default:return e.jsx(qe,{style:{color:"#d9d9d9"}})}},$=()=>{if(!s?.system)return 0;const{memory_usage_bytes:x,heap_size_bytes:U}=s.system;return U>0?x/U*100:0},G=x=>x>.05?"#f5222d":x>.01?"#faad14":"#52c41a";if(u&&!s)return e.jsx(y,{children:e.jsxs("div",{style:{textAlign:"center",padding:"40px 0"},children:[e.jsx(le,{size:"large"}),e.jsx("div",{style:{marginTop:16},children:e.jsx(k,{children:"åŠ è½½å®æ—¶æŒ‡æ ‡ä¸­..."})})]})});if(h&&!s)return e.jsx(y,{children:e.jsx(pe,{message:"æ— æ³•è·å–å®æ—¶æŒ‡æ ‡",description:h,type:"error",showIcon:!0,action:e.jsx(Q,{size:"small",onClick:j,loading:u,children:"é‡è¯•"})})});if(!s)return null;const X=[{title:"ç³»ç»Ÿè¿è¡Œæ—¶é—´",value:O.formatUptime(s.system.uptime_seconds),icon:e.jsx(Pe,{}),color:"#1890ff"},{title:"å†…å­˜ä½¿ç”¨ç‡",value:`${$().toFixed(1)}%`,icon:e.jsx(Be,{}),color:$()>80?"#f5222d":"#52c41a",extra:e.jsx(he,{percent:$(),size:"small",strokeColor:$()>80?"#f5222d":"#52c41a",showInfo:!1})},{title:"CPUä½¿ç”¨ç‡",value:`${s.system.cpu_usage_percent.toFixed(1)}%`,icon:e.jsx(xe,{}),color:s.system.cpu_usage_percent>80?"#f5222d":"#52c41a",extra:e.jsx(he,{percent:s.system.cpu_usage_percent,size:"small",strokeColor:s.system.cpu_usage_percent>80?"#f5222d":"#52c41a",showInfo:!1})},{title:"Goroutines",value:s.system.goroutine_count,icon:e.jsx(we,{}),color:"#722ed1"}],b=[{title:"ç½‘å…³çŠ¶æ€",value:s.gateway.status,icon:m(s.gateway.status),color:O.getStatusColor(s.gateway.status),valueRender:x=>e.jsx(H,{color:O.getStatusColor(String(x)),children:String(x).toUpperCase()})},{title:"æ´»è·ƒé€‚é…å™¨",value:`${s.gateway.running_adapters}/${s.gateway.total_adapters}`,icon:e.jsx(ze,{}),color:"#1890ff",extra:e.jsx(he,{percent:s.gateway.total_adapters>0?s.gateway.running_adapters/s.gateway.total_adapters*100:0,size:"small",strokeColor:"#1890ff",showInfo:!1})},{title:"æ´»è·ƒè¿æ¥å™¨",value:`${s.gateway.running_sinks}/${s.gateway.total_sinks}`,icon:e.jsx(xe,{}),color:"#52c41a",extra:e.jsx(he,{percent:s.gateway.total_sinks>0?s.gateway.running_sinks/s.gateway.total_sinks*100:0,size:"small",strokeColor:"#52c41a",showInfo:!1})},{title:"NATSè¿æ¥",value:s.gateway.nats_connected?"å·²è¿æ¥":"æœªè¿æ¥",icon:e.jsx(we,{}),color:s.gateway.nats_connected?"#52c41a":"#f5222d",valueRender:x=>e.jsx(ce,{status:s.gateway.nats_connected?"success":"error",text:String(x)})}],E=[{title:"æ•°æ®ç‚¹/ç§’",value:s.data.data_points_per_second.toFixed(1),icon:e.jsx(oe,{}),color:"#722ed1"},{title:"å­—èŠ‚/ç§’",value:O.formatBytes(s.data.bytes_per_second),icon:e.jsx(ze,{}),color:"#13c2c2"},{title:"å¹³å‡å»¶è¿Ÿ",value:O.formatLatency(s.data.average_latency_ms),icon:e.jsx(Pe,{}),color:s.data.average_latency_ms>100?"#faad14":"#52c41a"},{title:"é”™è¯¯ç‡",value:`${(s.errors.error_rate*100).toFixed(2)}%`,icon:e.jsx($e,{}),color:G(s.errors.error_rate)}],C=[{title:"å¯ç”¨è§„åˆ™",value:`${s.rules.enabled_rules}/${s.rules.total_rules}`,icon:e.jsx(we,{}),color:"#1890ff"},{title:"è§„åˆ™åŒ¹é…",value:O.formatNumber(s.rules.rules_matched),icon:e.jsx(be,{}),color:"#52c41a"},{title:"åŠ¨ä½œæ‰§è¡Œ",value:O.formatNumber(s.rules.actions_executed),icon:e.jsx(xe,{}),color:"#722ed1"},{title:"æ‰§è¡ŒæˆåŠŸç‡",value:s.rules.actions_executed>0?`${(s.rules.actions_succeeded/s.rules.actions_executed*100).toFixed(1)}%`:"0%",icon:e.jsx(be,{}),color:"#52c41a"}],v=x=>e.jsxs(y,{size:"small",children:[e.jsx(B,{title:x.title,value:x.value,prefix:x.icon,valueStyle:{color:x.color},valueRender:x.valueRender}),x.extra&&e.jsx("div",{style:{marginTop:8},children:x.extra})]},x.title),R=(x,U,o)=>e.jsx(y,{title:e.jsxs(L,{children:[o,e.jsx("span",{children:x})]}),size:"small",style:{marginBottom:16},children:e.jsx(q,{gutter:[16,16],children:U.map((S,P)=>e.jsx(f,{xs:24,sm:12,lg:r?12:6,children:v(S)},P))})});return e.jsxs("div",{children:[e.jsx(y,{size:"small",style:{marginBottom:16},children:e.jsxs(q,{justify:"space-between",align:"middle",children:[e.jsx(f,{children:e.jsxs(L,{children:[e.jsxs(_t,{level:4,style:{margin:0},children:[e.jsx(oe,{})," å®æ—¶ç³»ç»ŸæŒ‡æ ‡"]}),e.jsx(ce,{status:_?"success":"error",text:_?"åœ¨çº¿":"ç¦»çº¿"})]})}),e.jsx(f,{children:e.jsxs(L,{children:[g&&e.jsxs(k,{type:"secondary",children:["æ›´æ–°æ—¶é—´: ",g.toLocaleTimeString()]}),e.jsx(Q,{icon:e.jsx(_e,{}),onClick:j,loading:u,size:"small",children:"åˆ·æ–°"})]})})]})}),h&&e.jsx(pe,{message:"æ•°æ®æ›´æ–°å¤±è´¥",description:h,type:"warning",showIcon:!0,closable:!0,style:{marginBottom:16}}),R("ç³»ç»Ÿèµ„æº",X,e.jsx(Be,{})),R("ç½‘å…³çŠ¶æ€",b,e.jsx(qe,{})),R("æ•°æ®å¤„ç†",E,e.jsx(oe,{})),R("è§„åˆ™å¼•æ“",C,e.jsx(xe,{})),!r&&e.jsx(y,{title:e.jsxs(L,{children:[e.jsx($e,{}),e.jsx("span",{children:"è¯¦ç»†ä¿¡æ¯"})]}),size:"small",children:e.jsxs(q,{gutter:[16,16],children:[e.jsx(f,{xs:24,sm:12,lg:8,children:e.jsx(y,{size:"small",title:"ç³»ç»Ÿä¿¡æ¯",children:e.jsxs(L,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"ç‰ˆæœ¬: "}),e.jsx(k,{children:s.system.version})]}),e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"Goç‰ˆæœ¬: "}),e.jsx(k,{children:s.system.go_version})]}),e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"é…ç½®æ–‡ä»¶: "}),e.jsx(k,{code:!0,children:s.gateway.config_file})]}),e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"æ’ä»¶ç›®å½•: "}),e.jsx(k,{code:!0,children:s.gateway.plugins_directory})]})]})})}),e.jsx(f,{xs:24,sm:12,lg:8,children:e.jsx(y,{size:"small",title:"è¿æ¥ç»Ÿè®¡",children:e.jsxs(L,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"æ´»è·ƒè¿æ¥: "}),e.jsx(k,{children:s.connections.active_connections})]}),e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"æ€»è¿æ¥æ•°: "}),e.jsx(k,{children:O.formatNumber(s.connections.total_connections)})]}),e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"å¤±è´¥è¿æ¥: "}),e.jsx(k,{type:"danger",children:O.formatNumber(s.connections.failed_connections)})]}),e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"é‡è¿æ¬¡æ•°: "}),e.jsx(k,{children:O.formatNumber(s.connections.reconnection_count)})]})]})})}),e.jsx(f,{xs:24,sm:12,lg:8,children:e.jsx(y,{size:"small",title:"é”™è¯¯ç»Ÿè®¡",children:e.jsxs(L,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"æ€»é”™è¯¯æ•°: "}),e.jsx(k,{type:"danger",children:O.formatNumber(s.errors.total_errors)})]}),e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"é”™è¯¯/ç§’: "}),e.jsx(k,{children:s.errors.errors_per_second.toFixed(2)})]}),e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"æ¢å¤æ¬¡æ•°: "}),e.jsx(k,{type:"success",children:O.formatNumber(s.errors.recovery_count)})]}),s.errors.last_error&&e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"æœ€åé”™è¯¯: "}),e.jsx(ie,{title:s.errors.last_error,children:e.jsxs(k,{type:"danger",ellipsis:!0,children:[s.errors.last_error.substring(0,30),"..."]})})]})]})})})]})})]})};var se={},re={},De={},He;function vt(){return He||(He=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var i=1,r=function(){return"".concat(i++)};d.default=r}(De)),De}var me={},ye={},Oe={},Ke;function at(){return Ke||(Ke=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var i=function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,u=null;return function(){for(var a=this,h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];clearTimeout(u),u=setTimeout(function(){s.apply(a,p)},l)}};d.default=i}(Oe)),Oe}var ne={},We;function Ae(){if(We)return ne;We=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.SizeSensorId=ne.SensorTabIndex=ne.SensorClassName=void 0;var d="size-sensor-id";ne.SizeSensorId=d;var i="size-sensor-object";ne.SensorClassName=i;var r="-1";return ne.SensorTabIndex=r,ne}var Je;function St(){if(Je)return ye;Je=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.createSensor=void 0;var d=r(at()),i=Ae();function r(l){return l&&l.__esModule?l:{default:l}}var s=function(u,a){var h=void 0,p=[],g=function(){getComputedStyle(u).position==="static"&&(u.style.position="relative");var m=document.createElement("object");return m.onload=function(){m.contentDocument.defaultView.addEventListener("resize",I),I()},m.style.display="block",m.style.position="absolute",m.style.top="0",m.style.left="0",m.style.height="100%",m.style.width="100%",m.style.overflow="hidden",m.style.pointerEvents="none",m.style.zIndex="-1",m.style.opacity="0",m.setAttribute("class",i.SensorClassName),m.setAttribute("tabindex",i.SensorTabIndex),m.type="text/html",u.appendChild(m),m.data="about:blank",m},I=(0,d.default)(function(){p.forEach(function(j){j(u)})}),_=function(m){h||(h=g()),p.indexOf(m)===-1&&p.push(m)},F=function(){h&&h.parentNode&&(h.contentDocument&&h.contentDocument.defaultView.removeEventListener("resize",I),h.parentNode.removeChild(h),u.removeAttribute(i.SizeSensorId),h=void 0,p=[],a&&a())},A=function(m){var $=p.indexOf(m);$!==-1&&p.splice($,1),p.length===0&&h&&F()};return{element:u,bind:_,destroy:F,unbind:A}};return ye.createSensor=s,ye}var je={},Xe;function wt(){if(Xe)return je;Xe=1,Object.defineProperty(je,"__esModule",{value:!0}),je.createSensor=void 0;var d=Ae(),i=r(at());function r(l){return l&&l.__esModule?l:{default:l}}var s=function(u,a){var h=void 0,p=[],g=(0,i.default)(function(){p.forEach(function(j){j(u)})}),I=function(){var m=new ResizeObserver(g);return m.observe(u),g(),m},_=function(m){h||(h=I()),p.indexOf(m)===-1&&p.push(m)},F=function(){h.disconnect(),p=[],h=void 0,u.removeAttribute(d.SizeSensorId),a&&a()},A=function(m){var $=p.indexOf(m);$!==-1&&p.splice($,1),p.length===0&&h&&F()};return{element:u,bind:_,destroy:F,unbind:A}};return je.createSensor=s,je}var Ye;function bt(){if(Ye)return me;Ye=1,Object.defineProperty(me,"__esModule",{value:!0}),me.createSensor=void 0;var d=St(),i=wt(),r=typeof ResizeObserver<"u"?i.createSensor:d.createSensor;return me.createSensor=r,me}var Qe;function zt(){if(Qe)return re;Qe=1,Object.defineProperty(re,"__esModule",{value:!0}),re.removeSensor=re.getSensor=re.Sensors=void 0;var d=s(vt()),i=bt(),r=Ae();function s(p){return p&&p.__esModule?p:{default:p}}var l={};re.Sensors=l;function u(p){p&&l[p]&&delete l[p]}var a=function(g){var I=g.getAttribute(r.SizeSensorId);if(I&&l[I])return l[I];var _=(0,d.default)();g.setAttribute(r.SizeSensorId,_);var F=(0,i.createSensor)(g,function(){return u(_)});return l[_]=F,F};re.getSensor=a;var h=function(g){var I=g.element.getAttribute(r.SizeSensorId);g.destroy(),u(I)};return re.removeSensor=h,re}var Ze;function Ct(){if(Ze)return se;Ze=1,Object.defineProperty(se,"__esModule",{value:!0}),se.ver=se.clear=se.bind=void 0;var d=zt(),i=function(u,a){var h=(0,d.getSensor)(u);return h.bind(a),function(){h.unbind(a)}};se.bind=i;var r=function(u){var a=(0,d.getSensor)(u);(0,d.removeSensor)(a)};se.clear=r;var s="1.0.2";return se.ver=s,se}var et=Ct();function tt(d,i){var r={};return i.forEach(function(s){r[s]=d[s]}),r}function Te(d){return typeof d=="function"}function kt(d){return typeof d=="string"}var Le,st;function It(){return st||(st=1,Le=function d(i,r){if(i===r)return!0;if(i&&r&&typeof i=="object"&&typeof r=="object"){if(i.constructor!==r.constructor)return!1;var s,l,u;if(Array.isArray(i)){if(s=i.length,s!=r.length)return!1;for(l=s;l--!==0;)if(!d(i[l],r[l]))return!1;return!0}if(i.constructor===RegExp)return i.source===r.source&&i.flags===r.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===r.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===r.toString();if(u=Object.keys(i),s=u.length,s!==Object.keys(r).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(r,u[l]))return!1;for(l=s;l--!==0;){var a=u[l];if(!d(i[a],r[a]))return!1}return!0}return i!==i&&r!==r}),Le}var Rt=It();const ue=mt(Rt);var Et=function(d){nt(i,d);function i(r){var s=d.call(this,r)||this;return s.echarts=r.echarts,s.ele=null,s.isInitialResize=!0,s}return i.prototype.componentDidMount=function(){this.renderNewEcharts()},i.prototype.componentDidUpdate=function(r){var s=this.props.shouldSetOption;if(!(Te(s)&&!s(r,this.props))){if(!ue(r.theme,this.props.theme)||!ue(r.opts,this.props.opts)||!ue(r.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var l=["option","notMerge","lazyUpdate","showLoading","loadingOption"];ue(tt(this.props,l),tt(r,l))||this.updateEChartsOption(),(!ue(r.style,this.props.style)||!ue(r.className,this.props.className))&&this.resize()}},i.prototype.componentWillUnmount=function(){this.dispose()},i.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},i.prototype.dispose=function(){if(this.ele){try{et.clear(this.ele)}catch(r){console.warn(r)}this.echarts.dispose(this.ele)}},i.prototype.renderNewEcharts=function(){var r=this,s=this.props,l=s.onEvents,u=s.onChartReady,a=this.updateEChartsOption();this.bindEvents(a,l||{}),Te(u)&&u(a),this.ele&&et.bind(this.ele,function(){r.resize()})},i.prototype.bindEvents=function(r,s){function l(a,h){kt(a)&&Te(h)&&r.on(a,function(p){h(p,r)})}for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&l(u,s[u])},i.prototype.updateEChartsOption=function(){var r=this.props,s=r.option,l=r.notMerge,u=l===void 0?!1:l,a=r.lazyUpdate,h=a===void 0?!1:a,p=r.showLoading,g=r.loadingOption,I=g===void 0?null:g,_=this.getEchartsInstance();return _.setOption(s,u,h),p?_.showLoading(I):_.hideLoading(),_},i.prototype.resize=function(){var r=this.getEchartsInstance();if(!this.isInitialResize)try{r.resize()}catch(s){console.warn(s)}this.isInitialResize=!1},i.prototype.render=function(){var r=this,s=this.props,l=s.style,u=s.className,a=u===void 0?"":u,h=gt({height:300},l);return dt.createElement("div",{ref:function(p){r.ele=p},style:h,className:"echarts-for-react "+a})},i}(c.PureComponent),Mt=function(d){nt(i,d);function i(r){var s=d.call(this,r)||this;return s.echarts=ft,s}return i}(Et);const{Option:Dt}=de,{Text:Se}=Ce,Ot=({height:d=300,autoRefresh:i=!0,refreshInterval:r=5e3})=>{const[s,l]=c.useState(!1),[u,a]=c.useState(null),[h,p]=c.useState("cpu"),[g,I]=c.useState({cpu:[],memory:[],goroutines:[],dataPoints:[],errors:[]}),[_,F]=c.useState(null),A=c.useRef(null),j=async()=>{try{a(null);const b=await O.getLightweightMetrics();F(b);const E=Date.now(),C=b.system.heap_size_bytes>0?b.system.memory_usage_bytes/b.system.heap_size_bytes*100:0;I(v=>{const x=(U,o)=>[...U,{timestamp:E,value:o}].slice(-50);return{cpu:x(v.cpu,b.system.cpu_usage_percent),memory:x(v.memory,C),goroutines:x(v.goroutines,b.system.goroutine_count),dataPoints:x(v.dataPoints,b.data.data_points_per_second),errors:x(v.errors,b.errors.errors_per_second)}})}catch(b){a(b.message||"è·å–æŒ‡æ ‡å¤±è´¥"),console.error("Failed to fetch metrics:",b)}},m=async()=>{l(!0),await j(),l(!1)};c.useEffect(()=>{j()},[]),c.useEffect(()=>{if(i)return A.current=setInterval(j,r),()=>{A.current&&clearInterval(A.current)}},[i,r]);const $=()=>{const b=g[h]||[],C=(v=>{switch(v){case"cpu":return{title:"CPUä½¿ç”¨ç‡ (%)",color:"#1890ff",yMax:100,formatter:R=>`${R.toFixed(1)}%`};case"memory":return{title:"å†…å­˜ä½¿ç”¨ç‡ (%)",color:"#52c41a",yMax:100,formatter:R=>`${R.toFixed(1)}%`};case"goroutines":return{title:"Goroutinesæ•°é‡",color:"#722ed1",yMax:null,formatter:R=>`${Math.round(R)}`};case"dataPoints":return{title:"æ•°æ®ç‚¹/ç§’",color:"#13c2c2",yMax:null,formatter:R=>`${R.toFixed(1)}/s`};case"errors":return{title:"é”™è¯¯/ç§’",color:"#f5222d",yMax:null,formatter:R=>`${R.toFixed(2)}/s`};default:return{title:"æœªçŸ¥æŒ‡æ ‡",color:"#d9d9d9",yMax:null,formatter:R=>`${R}`}}})(h);return{title:{text:C.title,left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:v=>{const R=v[0],x=new Date(R.axisValue).toLocaleTimeString(),U=C.formatter(R.value);return`${x}<br/>${C.title}: ${U}`}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"time",boundaryGap:!1,axisLabel:{formatter:v=>new Date(v).toLocaleTimeString()},splitLine:{show:!1}},yAxis:{type:"value",max:C.yMax,axisLabel:{formatter:C.formatter},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:C.title,type:"line",data:b.map(v=>[v.timestamp,v.value]),smooth:!0,lineStyle:{color:C.color},itemStyle:{color:C.color},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:C.color+"40"},{offset:1,color:C.color+"10"}]}},symbol:"circle",symbolSize:4,showSymbol:!1}]}},G=[{value:"cpu",label:"CPUä½¿ç”¨ç‡"},{value:"memory",label:"å†…å­˜ä½¿ç”¨ç‡"},{value:"goroutines",label:"Goroutines"},{value:"dataPoints",label:"æ•°æ®ç‚¹/ç§’"},{value:"errors",label:"é”™è¯¯/ç§’"}],X=()=>{if(!_)return"N/A";switch(h){case"cpu":return`${_.system.cpu_usage_percent.toFixed(1)}%`;case"memory":return _.system.heap_size_bytes>0?`${(_.system.memory_usage_bytes/_.system.heap_size_bytes*100).toFixed(1)}%`:"N/A";case"goroutines":return`${_.system.goroutine_count}`;case"dataPoints":return`${_.data.data_points_per_second.toFixed(1)}/s`;case"errors":return`${_.errors.errors_per_second.toFixed(2)}/s`;default:return"N/A"}};return e.jsxs(y,{title:e.jsxs(L,{children:[e.jsx(oe,{}),e.jsx("span",{children:"ç³»ç»ŸæŒ‡æ ‡è¶‹åŠ¿"})]}),extra:e.jsxs(L,{children:[e.jsx(de,{value:h,onChange:p,style:{width:120},size:"small",children:G.map(b=>e.jsx(Dt,{value:b.value,children:b.label},b.value))}),e.jsx(Q,{icon:e.jsx(_e,{}),onClick:m,loading:s,size:"small",children:"åˆ·æ–°"})]}),size:"small",children:[u&&e.jsx(pe,{message:"æ•°æ®åŠ è½½å¤±è´¥",description:u,type:"error",showIcon:!0,style:{marginBottom:16}}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs(L,{children:[e.jsx(Se,{strong:!0,children:"å½“å‰å€¼:"}),e.jsx(Se,{children:X()}),e.jsxs(Se,{type:"secondary",children:["(",g[h]?.length||0," ä¸ªæ•°æ®ç‚¹)"]})]})}),s&&g[h]?.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px 0"},children:[e.jsx(le,{size:"large"}),e.jsx("div",{style:{marginTop:16},children:e.jsx(Se,{children:"åŠ è½½æŒ‡æ ‡æ•°æ®ä¸­..."})})]}):e.jsx(Mt,{option:$(),style:{height:d},notMerge:!0,lazyUpdate:!0})]})},Tt=[{label:"5åˆ†é’Ÿ",value:"5m"},{label:"15åˆ†é’Ÿ",value:"15m"},{label:"1å°æ—¶",value:"1h"},{label:"6å°æ—¶",value:"6h"},{label:"24å°æ—¶",value:"24h"},{label:"7å¤©",value:"7d"}],{Title:Lt,Text:D}=Ce,{Option:$t}=de,Vt=()=>{const[d,i]=c.useState(!0),[r,s]=c.useState([]),[l,u]=c.useState([]),[a,h]=c.useState(null),[p,g]=c.useState([]),[I,_]=c.useState("5m"),[F,A]=c.useState(null),[j,m]=c.useState(null),[$,G]=c.useState(!1),[X,b]=c.useState("overview"),[E,C]=c.useState(null),[v,R]=c.useState(null),[x,U]=c.useState(null),[o,S]=c.useState(null),P=!0,V=async()=>{try{const t=await O.getLightweightMetrics();S(t);const n={system_health:t.gateway.status==="running"?"healthy":"degraded",active_connections:t.connections.active_connections,total_adapters:t.gateway.total_adapters,running_adapters:t.gateway.running_adapters,healthy_adapters:t.gateway.running_adapters,total_sinks:t.gateway.total_sinks,running_sinks:t.gateway.running_sinks,healthy_sinks:t.gateway.running_sinks,total_data_points_per_sec:t.data.data_points_per_second,total_errors_per_sec:t.errors.errors_per_second,top_adapters_by_traffic:[]};h(n),console.log("ä»è½»é‡çº§æŒ‡æ ‡è·å–æ¦‚è§ˆæ•°æ®:",n)}catch(t){console.warn("è½»é‡çº§æŒ‡æ ‡ä¸å¯ç”¨ï¼Œä½¿ç”¨é»˜è®¤æ¦‚è§ˆæ•°æ®:",t),S(null),h({system_health:"healthy",active_connections:0,total_adapters:0,running_adapters:0,healthy_adapters:0,total_sinks:0,running_sinks:0,healthy_sinks:0,total_data_points_per_sec:0,total_errors_per_sec:0,top_adapters_by_traffic:[]})}},Z=async()=>{try{const t=fe.getAuthState?fe.getAuthState():null;console.log("ğŸ” å½“å‰è®¤è¯çŠ¶æ€:",t);const[n,M,w]=await Promise.allSettled([fe.getStatus(),fe.getMetrics(),fe.getHealth()]);n.status==="fulfilled"?(C(n.value),console.log("âœ… ç³»ç»ŸçŠ¶æ€åŠ è½½æˆåŠŸ:",n.value)):(console.warn("âš ï¸ ç³»ç»ŸçŠ¶æ€åŠ è½½å¤±è´¥:",n.reason),C(null)),M.status==="fulfilled"?(R(M.value),console.log("âœ… ç³»ç»ŸæŒ‡æ ‡åŠ è½½æˆåŠŸ:",M.value)):(console.warn("âš ï¸ ç³»ç»ŸæŒ‡æ ‡åŠ è½½å¤±è´¥:",M.reason),R(null)),w.status==="fulfilled"?(U(w.value),console.log("âœ… å¥åº·æ£€æŸ¥åŠ è½½æˆåŠŸ:",w.value)):(console.warn("âš ï¸ å¥åº·æ£€æŸ¥åŠ è½½å¤±è´¥:",w.reason),U(null))}catch(t){console.error("âŒ ç³»ç»Ÿç›‘æ§æ•°æ®åŠ è½½å¤±è´¥:",t)}},K=async()=>{console.log("ğŸš€ MonitoringPage loadData å¼€å§‹");try{i(!0),console.log("ğŸ“Š åŠ è½½è½»é‡çº§æŒ‡æ ‡æ•°æ®å’Œç³»ç»Ÿç›‘æ§æ•°æ®..."),await Promise.all([V(),Z()]);try{console.log("ğŸ” å¼€å§‹åŠ è½½æ’ä»¶æ•°æ®...");const t=await z.getPlugins();console.log("âœ… æ’ä»¶æ•°æ®åŠ è½½å®Œæˆ:",t);const n=[...t.adapters].sort((w,Ie)=>w.name.localeCompare(Ie.name)),M=[...t.sinks].sort((w,Ie)=>w.name.localeCompare(Ie.name));s(n),u(M),console.log("ğŸ“Š è®¾ç½®çŠ¶æ€:",{adapters:t.adapters.length,sinks:t.sinks.length});try{const w=await z.getDataFlowMetrics({time_range:I});w.metrics&&w.metrics.length>0?(g(w.metrics),console.log("æ•°æ®æµæŒ‡æ ‡è·å–æˆåŠŸ:",w.metrics.length,"ä¸ªæ•°æ®æµ"),console.log("æ•°æ®æµè¯¦æƒ…:",w.metrics)):(g([]),console.log("å½“å‰æ²¡æœ‰æ•°æ®æµæ•°æ®ï¼ŒAPIè¿”å›:",w))}catch(w){console.warn("æ•°æ®æµæŒ‡æ ‡è·å–å¤±è´¥:",w),g([])}}catch(t){console.error("âŒ æ’ä»¶APIè°ƒç”¨å¤±è´¥:",t),te.error("è·å–æ’ä»¶æ•°æ®å¤±è´¥: "+t.message),s([]),u([]),g([])}}catch(t){console.error("âŒ åŠ è½½ç›‘æ§æ•°æ®å¤±è´¥:",t),te.error("åŠ è½½ç›‘æ§æ•°æ®å¤±è´¥: "+t.message)}finally{i(!1)}},W=async()=>{await K(),te.success("æ•°æ®å·²åˆ·æ–°")},Y=async t=>{try{const n=await z.testAdapterConnection(t);n.success?te.success(`${t} è¿æ¥æµ‹è¯•æˆåŠŸ`):te.error(`${t} è¿æ¥æµ‹è¯•å¤±è´¥: ${n.error}`)}catch(n){te.error("è¿æ¥æµ‹è¯•å¤±è´¥: "+n.message)}},ke=async t=>{Ue.confirm({title:"ç¡®è®¤é‡å¯",content:`ç¡®å®šè¦é‡å¯é€‚é…å™¨ "${t}" å—ï¼Ÿ`,onOk:async()=>{try{await z.restartAdapter(t),te.success("é‡å¯è¯·æ±‚å·²æäº¤"),setTimeout(K,2e3)}catch(n){te.error("é‡å¯å¤±è´¥: "+n.message)}}})},T=async t=>{try{A(t);const n=await z.getAdapterDiagnostics(t);m(n),G(!0)}catch(n){te.error("è·å–è¯Šæ–­ä¿¡æ¯å¤±è´¥: "+n.message)}},{isAuthenticated:N,isInitialized:ae}=lt();c.useEffect(()=>{ae?(console.log("ğŸ” è®¤è¯çŠ¶æ€å·²åˆå§‹åŒ–ï¼Œå¼€å§‹åŠ è½½æ•°æ®:",{isAuthenticated:N,isInitialized:ae}),K()):console.log("â³ ç­‰å¾…è®¤è¯çŠ¶æ€åˆå§‹åŒ–...")},[ae,N]),c.useEffect(()=>{I&&z.getDataFlowMetrics({time_range:I}).then(t=>{g(t.metrics),console.log("æ•°æ®æµæŒ‡æ ‡å·²æ›´æ–°:",t.metrics)}).catch(t=>{console.error("è·å–æ•°æ®æµæŒ‡æ ‡å¤±è´¥:",t),O.getLightweightMetrics().then(n=>{const M=new Date,w=[{adapter_name:"system_metrics",device_id:"gateway",key:"data_throughput",data_points_per_sec:n.data.data_points_per_second,bytes_per_sec:n.data.bytes_per_second,latency_ms:n.data.average_latency_ms,error_rate:n.errors.error_rate,last_value:n.data.data_points_per_second,last_timestamp:M.toISOString()}];g(w),console.log("ä½¿ç”¨è½»é‡çº§æŒ‡æ ‡ä½œä¸ºæ•°æ®æµåå¤‡æ•°æ®")}).catch(n=>{console.error("è½»é‡çº§æŒ‡æ ‡ä¹Ÿå¤±è´¥:",n),g([])})})},[I]),c.useEffect(()=>{},[P]);const J=t=>{switch(t){case"healthy":return e.jsx(be,{style:{color:"#52c41a"}});case"degraded":return e.jsx(Fe,{style:{color:"#faad14"}});case"unhealthy":return e.jsx(rt,{style:{color:"#f5222d"}});default:return e.jsx(Re,{style:{color:"#d9d9d9"}})}},ee=[{title:"åç§°",dataIndex:"name",key:"name",render:(t,n)=>e.jsxs(L,{children:[e.jsx("span",{style:{fontSize:"16px"},children:z.getAdapterIcon(n.type)}),e.jsx(D,{strong:!0,children:t})]})},{title:"ç±»å‹",dataIndex:"type",key:"type",render:t=>e.jsx(H,{children:t.toUpperCase()})},{title:"çŠ¶æ€",dataIndex:"status",key:"status",render:t=>e.jsx(ce,{status:z.getStatusColor(t),text:z.getStatusText(t)})},{title:"å¥åº·çŠ¶æ€",dataIndex:"health",key:"health",render:(t,n)=>e.jsx(ie,{title:n.health_message,children:e.jsx(H,{color:z.getHealthColor(t),children:z.getHealthText(t)})})},{title:"è¿è¡Œæ—¶é—´",dataIndex:"connection_uptime",key:"connection_uptime",render:t=>z.formatUptime(t)},{title:"æ•°æ®ç‚¹",dataIndex:"data_points_count",key:"data_points_count",render:t=>z.formatNumber(t)},{title:"é”™è¯¯æ•°",dataIndex:"errors_count",key:"errors_count",render:(t,n)=>{const M=n.data_points_count>0?(t/n.data_points_count*100).toFixed(2):"0";return e.jsx(ie,{title:`é”™è¯¯ç‡: ${M}%`,children:e.jsx(D,{type:t>0?"danger":"secondary",children:t})})}},{title:"å“åº”æ—¶é—´",dataIndex:"response_time_ms",key:"response_time_ms",render:t=>z.formatLatency(t)},{title:"æ“ä½œ",key:"actions",render:(t,n)=>e.jsxs(L,{size:"small",children:[e.jsx(ie,{title:"æµ‹è¯•è¿æ¥",children:e.jsx(Q,{size:"small",icon:e.jsx(xt,{}),onClick:()=>Y(n.name),disabled:n.status!=="running"})}),e.jsx(ie,{title:"è¯Šæ–­",children:e.jsx(Q,{size:"small",icon:e.jsx($e,{}),onClick:()=>T(n.name)})}),e.jsx(ie,{title:"é‡å¯",children:e.jsx(Q,{size:"small",icon:e.jsx(pt,{}),onClick:()=>ke(n.name),disabled:n.status==="stopped",danger:!0})})]})}],ge=[{title:"åç§°",dataIndex:"name",key:"name",render:(t,n)=>e.jsxs(L,{children:[e.jsx("span",{style:{fontSize:"16px"},children:z.getSinkIcon(n.type)}),e.jsx(D,{strong:!0,children:t})]})},{title:"ç±»å‹",dataIndex:"type",key:"type",render:t=>e.jsx(H,{children:t.toUpperCase()})},{title:"çŠ¶æ€",dataIndex:"status",key:"status",render:t=>e.jsx(ce,{status:z.getStatusColor(t),text:z.getStatusText(t)})},{title:"å¥åº·çŠ¶æ€",dataIndex:"health",key:"health",render:(t,n)=>e.jsx(ie,{title:n.health_message,children:e.jsx(H,{color:z.getHealthColor(t),children:z.getHealthText(t)})})},{title:"è¿è¡Œæ—¶é—´",dataIndex:"connection_uptime",key:"connection_uptime",render:t=>z.formatUptime(t)},{title:"æ¶ˆæ¯å‘å¸ƒ",dataIndex:"messages_published",key:"messages_published",render:t=>z.formatNumber(t)},{title:"é”™è¯¯æ•°",dataIndex:"errors_count",key:"errors_count",render:t=>e.jsx(D,{type:t>0?"danger":"secondary",children:t})},{title:"å“åº”æ—¶é—´",dataIndex:"response_time_ms",key:"response_time_ms",render:t=>z.formatLatency(t)}],it=[{title:"é€‚é…å™¨",dataIndex:"adapter_name",key:"adapter_name",render:t=>{const n=r.find(M=>M.name===t);return e.jsxs(L,{children:[e.jsx("span",{style:{fontSize:"16px"},children:n?z.getAdapterIcon(n.type):"ğŸ“±"}),e.jsx(D,{strong:!0,children:t})]})}},{title:"è®¾å¤‡ID",dataIndex:"device_id",key:"device_id",render:t=>e.jsx(H,{color:"blue",children:t})},{title:"æ•°æ®é”®",dataIndex:"key",key:"key",render:t=>e.jsx(D,{code:!0,children:t})},{title:"æ•°æ®ç‚¹/ç§’",dataIndex:"data_points_per_sec",key:"data_points_per_sec",render:t=>e.jsx(B,{value:t.toFixed(1),valueStyle:{fontSize:"14px",color:t>0?"#1890ff":"#999"},suffix:"ç‚¹/ç§’"})},{title:"å­—èŠ‚/ç§’",dataIndex:"bytes_per_sec",key:"bytes_per_sec",render:t=>e.jsx(D,{style:{color:t>0?"#52c41a":"#999"},children:z.formatBytes(t)})},{title:"å»¶è¿Ÿ",dataIndex:"latency_ms",key:"latency_ms",render:t=>e.jsx(H,{color:t>100?"red":t>50?"orange":"green",children:z.formatLatency(t)})},{title:"é”™è¯¯ç‡",dataIndex:"error_rate",key:"error_rate",render:t=>e.jsxs(D,{type:t>.05?"danger":t>.01?"warning":"success",children:[(t*100).toFixed(2),"%"]})},{title:"æœ€åæ•°å€¼",dataIndex:"last_value",key:"last_value",render:(t,n)=>{if(!t)return e.jsx(D,{type:"secondary",children:"-"});const M=typeof t=="number"?t.toFixed(2):JSON.stringify(t);return e.jsx(ie,{title:`æ—¶é—´: ${new Date(n.last_timestamp).toLocaleString()}`,children:e.jsx(D,{code:!0,style:{fontSize:"12px"},children:M})})}}],ot=[{key:"overview",label:e.jsxs("span",{children:[e.jsx(Re,{}),"ç³»ç»Ÿæ¦‚è§ˆ"]}),children:e.jsxs("div",{children:[e.jsx(Ge,{autoRefresh:!0,refreshInterval:5e3}),a&&e.jsxs(q,{gutter:[24,24],style:{marginBottom:24},children:[e.jsx(f,{xs:24,sm:12,lg:6,children:e.jsx(y,{children:e.jsx(B,{title:"ç³»ç»Ÿå¥åº·",value:a.system_health,prefix:J(a.system_health),valueStyle:{color:a.system_health==="healthy"?"#52c41a":a.system_health==="degraded"?"#faad14":"#f5222d"}})})}),e.jsx(f,{xs:24,sm:12,lg:6,children:e.jsx(y,{children:e.jsx(B,{title:"æ´»è·ƒè¿æ¥",value:a.active_connections,prefix:e.jsx(we,{}),suffix:`/ ${a.total_adapters+a.total_sinks}`,valueStyle:{color:"#1890ff"}})})}),e.jsx(f,{xs:24,sm:12,lg:6,children:e.jsx(y,{children:e.jsx(B,{title:"æ•°æ®ç‚¹/ç§’",value:a.total_data_points_per_sec.toFixed(1),prefix:e.jsx(oe,{}),valueStyle:{color:"#722ed1"}})})}),e.jsx(f,{xs:24,sm:12,lg:6,children:e.jsx(y,{children:e.jsx(B,{title:"é”™è¯¯/ç§’",value:a.total_errors_per_sec.toFixed(2),prefix:e.jsx(Fe,{}),valueStyle:{color:a.total_errors_per_sec>0?"#f5222d":"#52c41a"}})})})]}),a&&e.jsxs(q,{gutter:[24,24],children:[e.jsx(f,{xs:24,lg:12,children:e.jsxs(y,{title:"é€‚é…å™¨çŠ¶æ€",size:"small",children:[e.jsxs(q,{gutter:16,children:[e.jsx(f,{span:8,children:e.jsx(B,{title:"æ€»æ•°",value:a.total_adapters,prefix:e.jsx(ze,{})})}),e.jsx(f,{span:8,children:e.jsx(B,{title:"è¿è¡Œä¸­",value:a.running_adapters,valueStyle:{color:"#1890ff"}})}),e.jsx(f,{span:8,children:e.jsx(B,{title:"å¥åº·",value:a.healthy_adapters,valueStyle:{color:"#52c41a"}})})]}),e.jsx(Ne,{}),e.jsx(he,{percent:a.total_adapters>0?a.healthy_adapters/a.total_adapters*100:0,strokeColor:"#52c41a",format:()=>`${a.healthy_adapters}/${a.total_adapters} å¥åº·`})]})}),e.jsx(f,{xs:24,lg:12,children:e.jsxs(y,{title:"è¿æ¥å™¨çŠ¶æ€",size:"small",children:[e.jsxs(q,{gutter:16,children:[e.jsx(f,{span:8,children:e.jsx(B,{title:"æ€»æ•°",value:a.total_sinks,prefix:e.jsx(xe,{})})}),e.jsx(f,{span:8,children:e.jsx(B,{title:"è¿è¡Œä¸­",value:a.running_sinks,valueStyle:{color:"#1890ff"}})}),e.jsx(f,{span:8,children:e.jsx(B,{title:"å¥åº·",value:a.healthy_sinks,valueStyle:{color:"#52c41a"}})})]}),e.jsx(Ne,{}),e.jsx(he,{percent:a.total_sinks>0?a.healthy_sinks/a.total_sinks*100:0,strokeColor:"#52c41a",format:()=>`${a.healthy_sinks}/${a.total_sinks} å¥åº·`})]})})]})]})},{key:"adapters",label:e.jsxs("span",{children:[e.jsx(ze,{}),"é€‚é…å™¨ç›‘æ§",r.filter(t=>t.status==="error").length>0&&e.jsx(ce,{count:r.filter(t=>t.status==="error").length,style:{marginLeft:8}})]}),children:e.jsx(y,{children:e.jsx(Ee,{columns:ee,dataSource:r,rowKey:"name",loading:d,pagination:{pageSize:10},scroll:{x:1200}})})},{key:"sinks",label:e.jsxs("span",{children:[e.jsx(xe,{}),"è¿æ¥å™¨ç›‘æ§",l.filter(t=>t.status==="error").length>0&&e.jsx(ce,{count:l.filter(t=>t.status==="error").length,style:{marginLeft:8}})]}),children:e.jsx(y,{children:e.jsx(Ee,{columns:ge,dataSource:l,rowKey:"name",loading:d,pagination:{pageSize:10},scroll:{x:1e3}})})},{key:"metrics",label:e.jsxs("span",{children:[e.jsx(oe,{}),"ç³»ç»ŸæŒ‡æ ‡"]}),children:e.jsxs("div",{children:[e.jsxs(q,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(f,{xs:24,lg:8,children:e.jsx(y,{title:"ç³»ç»ŸåŸºæœ¬ä¿¡æ¯",size:"small",children:E?e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"çŠ¶æ€:"})," ",e.jsx(H,{color:E.status==="running"?"green":"red",children:E.status})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ç‰ˆæœ¬:"})," ",E.version]}),e.jsxs("p",{children:[e.jsx("strong",{children:"è¿è¡Œæ—¶é—´:"})," ",E.uptime]}),e.jsxs("p",{children:[e.jsx("strong",{children:"å¯åŠ¨æ—¶é—´:"})," ",new Date(E.start_time).toLocaleString()]})]}):e.jsx(le,{size:"small"})})}),e.jsx(f,{xs:24,lg:8,children:e.jsx(y,{title:"ç³»ç»Ÿèµ„æº",size:"small",children:o?e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"å†…å­˜ä½¿ç”¨:"})," ",O.formatBytes(o.system.memory_usage_bytes)," / å †å†…å­˜: ",O.formatBytes(o.system.heap_in_use_bytes)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"CPUä½¿ç”¨ç‡:"})," ",o.system.cpu_usage_percent.toFixed(1),"%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ç£ç›˜ä½¿ç”¨ç‡:"})," ",o.system.disk_usage_percent.toFixed(1),"%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"åç¨‹æ•°:"})," ",o.system.goroutine_count]})]}):v?e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"CPUä½¿ç”¨ç‡:"})," ",v.cpu_usage?v.cpu_usage.toFixed(1):"0.0","%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"å†…å­˜ä½¿ç”¨ç‡:"})," ",v.memory_usage?v.memory_usage.toFixed(1):"0.0","%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ç£ç›˜ä½¿ç”¨ç‡:"})," ",v.disk_usage?v.disk_usage.toFixed(1):"0.0","%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ•°æ®åå:"})," ",v.data_points_per_second||0," ç‚¹/ç§’"]})]}):e.jsxs("div",{children:[e.jsx(le,{size:"small"}),e.jsx("p",{style:{color:"#999",fontSize:"12px",marginTop:"8px"},children:"æ­£åœ¨åŠ è½½ç³»ç»Ÿèµ„æºæ•°æ®..."})]})})}),e.jsx(f,{xs:24,lg:8,children:e.jsx(y,{title:"è¿æ¥çŠ¶æ€",size:"small",children:o?e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"æ´»è·ƒè¿æ¥:"})," ",o.connections.active_connections]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ€»è¿æ¥æ•°:"})," ",o.connections.total_connections]}),e.jsxs("p",{children:[e.jsx("strong",{children:"å¤±è´¥è¿æ¥:"})," ",o.connections.failed_connections]}),e.jsxs("p",{children:[e.jsx("strong",{children:"å¹³å‡å“åº”:"})," ",o.connections.average_response_time_ms.toFixed(1)," ms"]})]}):E?e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"æ´»è·ƒè¿æ¥:"})," ",E.active_connections||0]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ€»è¿æ¥æ•°:"})," ",E.total_connections||0]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ç½‘ç»œæ¥æ”¶:"})," ",E.network_in?O.formatBytes(E.network_in):"0 B"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ç½‘ç»œå‘é€:"})," ",E.network_out?O.formatBytes(E.network_out):"0 B"]})]}):e.jsxs("div",{children:[e.jsx(le,{size:"small"}),e.jsx("p",{style:{color:"#999",fontSize:"12px",marginTop:"8px"},children:"æ­£åœ¨åŠ è½½è¿æ¥çŠ¶æ€æ•°æ®..."})]})})})]}),x&&e.jsx(q,{gutter:[16,16],style:{marginBottom:24},children:e.jsx(f,{span:24,children:e.jsxs(y,{title:"ç³»ç»Ÿå¥åº·æ£€æŸ¥",size:"small",children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"æœåŠ¡:"})," ",x.service]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ•´ä½“çŠ¶æ€:"})," ",e.jsx(H,{color:x.status==="healthy"?"green":"red",children:x.status})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ£€æŸ¥æ—¶é—´:"})," ",new Date(x.timestamp).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ç‰ˆæœ¬:"})," ",x.version]})]}),x.checks&&x.checks.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"å¥åº·æ£€æŸ¥é¡¹:"}),e.jsx("div",{style:{marginTop:8},children:x.checks.map((t,n)=>e.jsxs(H,{color:t.status==="pass"?"green":t.status==="warn"?"orange":"red",style:{marginBottom:4},children:[t.name,": ",t.status," (",t.duration,"ms)"]},n))})]})]})})}),o&&e.jsxs(q,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(f,{xs:24,lg:12,children:e.jsx(y,{title:"æ•°æ®å¤„ç†æŒ‡æ ‡",size:"small",children:e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"æ€»æ•°æ®ç‚¹:"})," ",O.formatNumber(o.data.total_data_points)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"å¤„ç†é€Ÿåº¦:"})," ",o.data.data_points_per_second.toFixed(2)," ç‚¹/ç§’"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ•°æ®æµé‡:"})," ",O.formatBytes(o.data.bytes_per_second),"/ç§’"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"é˜Ÿåˆ—é•¿åº¦:"})," ",o.data.data_queue_length]})]})})}),e.jsx(f,{xs:24,lg:12,children:e.jsx(y,{title:"è§„åˆ™å¼•æ“çŠ¶æ€",size:"small",children:e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"çŠ¶æ€:"})," ",e.jsx(H,{color:o.rules.rule_engine_status==="running"?"green":o.rules.rule_engine_status===""?"orange":"red",children:o.rules.rule_engine_status||"æœªçŸ¥"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"è§„åˆ™æ€»æ•°:"})," ",o.rules.total_rules]}),e.jsxs("p",{children:[e.jsx("strong",{children:"å¯ç”¨è§„åˆ™:"})," ",o.rules.enabled_rules]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ‰§è¡ŒåŠ¨ä½œ:"})," ",o.rules.actions_executed]})]})})})]}),e.jsx(Ot,{height:400,autoRefresh:!0,refreshInterval:5e3}),e.jsx("div",{style:{marginTop:16},children:e.jsx(Ge,{autoRefresh:!0,refreshInterval:5e3,compact:!0})})]})},{key:"dataflow",label:e.jsxs("span",{children:[e.jsx(oe,{}),"æ•°æ®æµç›‘æ§"]}),children:e.jsxs("div",{children:[e.jsx(jt,{height:400,autoRefresh:!0,refreshInterval:3e3}),e.jsxs(y,{title:"æ•°æ®æµè¯¦æƒ…",style:{marginTop:16},children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(L,{children:[e.jsx(D,{children:"æ—¶é—´èŒƒå›´:"}),e.jsx(de,{value:I,onChange:_,style:{width:120},children:Tt.map(t=>e.jsx($t,{value:t.value,children:t.label},t.value))}),e.jsx(Q,{icon:e.jsx(_e,{}),onClick:W,children:"åˆ·æ–°"})]})}),p.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pe,{message:"æ•°æ®æµè¯´æ˜",description:"æ¯è¡Œæ˜¾ç¤ºä¸€ä¸ªæ•°æ®ç‚¹çš„æŒ‡æ ‡ã€‚å¦‚æœä¸€ä¸ªé€‚é…å™¨é…ç½®äº†å¤šä¸ªæ•°æ®ç‚¹ï¼ˆå¦‚æ¸©åº¦ã€æ¹¿åº¦ï¼‰ï¼Œæ¯ä¸ªæ•°æ®ç‚¹éƒ½ä¼šå•ç‹¬æ˜¾ç¤ºã€‚æ•°æ®ç‚¹/ç§’è¡¨ç¤ºè¯¥ç‰¹å®šæ•°æ®ç‚¹çš„ç”Ÿæˆé¢‘ç‡ã€‚",type:"info",style:{marginBottom:16},showIcon:!0}),e.jsx(y,{title:"é€‚é…å™¨èšåˆç»Ÿè®¡",size:"small",style:{marginBottom:16},children:e.jsx(q,{gutter:16,children:(()=>{const t=p.reduce((n,M)=>{const w=M.adapter_name;return n[w]||(n[w]={name:w,device_id:M.device_id,totalPoints:0,totalBytes:0,dataPointCount:0,avgLatency:0,avgErrorRate:0,keys:[]}),n[w].totalPoints+=M.data_points_per_sec,n[w].totalBytes+=M.bytes_per_sec,n[w].dataPointCount++,n[w].avgLatency+=M.latency_ms,n[w].avgErrorRate+=M.error_rate,n[w].keys.push(M.key),n},{});return Object.values(t).map(n=>e.jsx(f,{xs:24,sm:12,lg:8,children:e.jsxs(y,{size:"small",style:{marginBottom:8},children:[e.jsxs(L,{children:[e.jsx("span",{style:{fontSize:"16px"},children:r.find(M=>M.name===n.name)?.type==="mock"?"ğŸ­":"ğŸ“±"}),e.jsx(D,{strong:!0,children:n.name})]}),e.jsxs("div",{style:{marginTop:8,fontSize:"12px"},children:[e.jsxs("div",{children:["è®¾å¤‡: ",e.jsx(D,{code:!0,children:n.device_id})]}),e.jsxs("div",{children:["æ•°æ®ç‚¹: ",e.jsx(D,{code:!0,children:n.keys.join(", ")})]}),e.jsxs("div",{children:["æ€»é¢‘ç‡: ",e.jsxs(D,{type:"success",children:[n.totalPoints.toFixed(1)," ç‚¹/ç§’"]})]}),e.jsxs("div",{children:["å¹³å‡å»¶è¿Ÿ: ",e.jsxs(D,{children:[(n.avgLatency/n.dataPointCount).toFixed(1)," ms"]})]})]})]})},n.name))})()})}),e.jsx(Ee,{columns:it,dataSource:p,rowKey:t=>`${t.adapter_name}-${t.device_id}-${t.key}`,pagination:{pageSize:10},scroll:{x:1e3},expandable:{expandedRowRender:t=>e.jsx("div",{style:{padding:"16px",background:"#fafafa"},children:e.jsxs(q,{gutter:16,children:[e.jsxs(f,{span:12,children:[e.jsx("strong",{children:"æ•°æ®ç‚¹è¯¦æƒ…ï¼š"}),e.jsxs("ul",{style:{marginTop:8},children:[e.jsxs("li",{children:["é€‚é…å™¨: ",t.adapter_name]}),e.jsxs("li",{children:["è®¾å¤‡ID: ",t.device_id]}),e.jsxs("li",{children:["æ•°æ®é”®: ",t.key]}),e.jsxs("li",{children:["æœ€åæ›´æ–°: ",new Date(t.last_timestamp).toLocaleString()]})]})]}),e.jsxs(f,{span:12,children:[e.jsx("strong",{children:"æ€§èƒ½æŒ‡æ ‡ï¼š"}),e.jsxs("ul",{style:{marginTop:8},children:[e.jsxs("li",{children:["æ•°æ®ç‚¹é¢‘ç‡: ",t.data_points_per_sec.toFixed(2)," ç‚¹/ç§’"]}),e.jsxs("li",{children:["æ•°æ®ä¼ è¾“: ",z.formatBytes(t.bytes_per_sec),"/ç§’"]}),e.jsxs("li",{children:["ç½‘ç»œå»¶è¿Ÿ: ",t.latency_ms.toFixed(1)," ms"]}),e.jsxs("li",{children:["é”™è¯¯ç‡: ",(t.error_rate*100).toFixed(2),"%"]})]})]})]})}),expandRowByClick:!0}})]}):e.jsx(ut,{description:"æš‚æ— æ•°æ®æµæ•°æ®"})]})]})}];return d&&!r.length&&!l.length&&!a?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(le,{size:"large",tip:"åŠ è½½ç›‘æ§æ•°æ®ä¸­..."})}):e.jsxs("div",{children:[e.jsxs(q,{justify:"space-between",align:"middle",style:{marginBottom:24},children:[e.jsxs(f,{children:[e.jsxs(Lt,{level:2,style:{margin:0},children:[e.jsx(Re,{})," è¿æ¥ç›‘æ§"]}),e.jsx(D,{type:"secondary",children:"å®æ—¶ç›‘æ§é€‚é…å™¨å’Œè¿æ¥å™¨çŠ¶æ€"})]}),e.jsx(f,{children:e.jsxs(L,{children:[e.jsx(ce,{status:"success",text:"WebSocketå·²è¿æ¥"}),e.jsx(Q,{icon:e.jsx(_e,{}),onClick:W,loading:d,children:"åˆ·æ–°æ•°æ®"})]})})]}),!P,e.jsx(ht,{activeKey:X,onChange:b,items:ot,size:"large"}),e.jsx(Ue,{title:`é€‚é…å™¨è¯Šæ–­ - ${F}`,open:$,onCancel:()=>G(!1),footer:[e.jsx(Q,{onClick:()=>G(!1),children:"å…³é—­"},"close")],width:800,children:j?e.jsxs("div",{children:[j.connection_test&&e.jsx(y,{title:"è¿æ¥æµ‹è¯•",size:"small",style:{marginBottom:16},children:e.jsxs(L,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(D,{strong:!0,children:"çŠ¶æ€: "}),e.jsx(H,{color:j.connection_test.success?"success":"error",children:j.connection_test.success?"æˆåŠŸ":"å¤±è´¥"})]}),e.jsxs("div",{children:[e.jsx(D,{strong:!0,children:"å“åº”æ—¶é—´: "}),e.jsxs(D,{children:[j.connection_test.response_time,"ms"]})]}),j.connection_test.error&&e.jsxs("div",{children:[e.jsx(D,{strong:!0,children:"é”™è¯¯: "}),e.jsx(D,{type:"danger",children:j.connection_test.error})]})]})}),j.health_checks.length>0&&e.jsx(y,{title:"å¥åº·æ£€æŸ¥",size:"small",style:{marginBottom:16},children:e.jsx(L,{direction:"vertical",style:{width:"100%"},children:j.health_checks.map((t,n)=>e.jsx("div",{children:e.jsxs(L,{children:[e.jsx(H,{color:t.status==="pass"?"success":t.status==="warn"?"warning":"error",children:t.check_name}),e.jsx(D,{children:t.message}),e.jsxs(D,{type:"secondary",children:["(",t.duration,"ms)"]})]})},n))})}),j.performance_test&&e.jsx(y,{title:"æ€§èƒ½æµ‹è¯•",size:"small",style:{marginBottom:16},children:e.jsxs(q,{gutter:16,children:[e.jsx(f,{span:12,children:e.jsx(B,{title:"ååé‡",value:j.performance_test.throughput_per_sec,suffix:"ops/sec"})}),e.jsx(f,{span:12,children:e.jsx(B,{title:"å¹³å‡å»¶è¿Ÿ",value:j.performance_test.avg_latency,suffix:"ns"})})]})}),j.recommendations.length>0&&e.jsx(y,{title:"ä¼˜åŒ–å»ºè®®",size:"small",children:e.jsx("ul",{children:j.recommendations.map((t,n)=>e.jsx("li",{children:t},n))})})]}):e.jsx(le,{})})]})};export{Vt as default};
