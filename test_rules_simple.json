[
  {
    "id": "temp_alert_simple",
    "name": "简单温度报警",
    "description": "温度超过35度时触发报警",
    "enabled": true,
    "priority": 100,
    "conditions": {
      "type": "and",
      "conditions": [
        {
          "type": "simple",
          "field": "key",
          "operator": "eq",
          "value": "temperature"
        },
        {
          "type": "simple", 
          "field": "value",
          "operator": "gt",
          "value": 35
        }
      ]
    },
    "actions": [
      {
        "type": "alert",
        "config": {
          "level": "warning",
          "message": "设备 {{.DeviceID}} 温度报警: {{.Value}}°C"
        }
      }
    ]
  },
  {
    "id": "humidity_stats",
    "name": "湿度统计",
    "description": "计算湿度的统计信息",
    "enabled": true,
    "priority": 50,
    "conditions": {
      "type": "simple",
      "field": "key", 
      "operator": "eq",
      "value": "humidity"
    },
    "actions": [
      {
        "type": "aggregate",
        "config": {
          "window_type": "count",
          "size": 5,
          "functions": ["avg", "max", "min"],
          "group_by": ["device_id"],
          "output_key": "humidity_stats",
          "forward": true
        }
      }
    ]
  },
  {
    "id": "vibration_check",
    "name": "振动检查",
    "description": "检查振动传感器数据",
    "enabled": true,
    "priority": 80,
    "conditions": {
      "type": "and",
      "conditions": [
        {
          "type": "simple",
          "field": "key",
          "operator": "eq", 
          "value": "vibration"
        },
        {
          "type": "simple",
          "field": "value",
          "operator": "gt",
          "value": 7.0
        }
      ]
    },
    "actions": [
      {
        "type": "alert",
        "config": {
          "level": "critical",
          "message": "设备 {{.DeviceID}} 振动过大: {{.Value}}g"
        }
      },
      {
        "type": "transform",
        "config": {
          "field": "value",
          "transforms": [
            {
              "type": "round",
              "precision": 2
            }
          ],
          "add_tags": {
            "alert_type": "vibration_high",
            "severity": "critical"
          }
        }
      }
    ]
  },
  {
    "id": "pressure_filter",
    "name": "压力过滤",
    "description": "过滤压力数据并添加标签",
    "enabled": true,
    "priority": 60,
    "conditions": {
      "type": "simple",
      "field": "key",
      "operator": "eq",
      "value": "pressure"
    },
    "actions": [
      {
        "type": "filter",
        "config": {
          "type": "range",
          "min": 950,
          "max": 1050,
          "drop_on_match": false
        }
      },
      {
        "type": "transform", 
        "config": {
          "field": "value",
          "transforms": [
            {
              "type": "round",
              "precision": 1
            }
          ],
          "add_tags": {
            "sensor_type": "pressure",
            "validated": "true"
          }
        }
      }
    ]
  }
]