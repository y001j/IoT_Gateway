{
  "id": "comprehensive_sensor_pipeline",
  "name": "综合传感器数据处理管道",
  "description": "完整的数据处理链：过滤→转换→聚合→告警",
  "enabled": true,
  "priority": 20,
  "version": 1,
  "conditions": {
    "type": "simple",
    "field": "device_id",
    "operator": "regex",
    "value": "^(temp_sensor|pressure_sensor|vibration_sensor)_\\d+"
  },
  "actions": [
    {
      "type": "filter",
      "config": {
        "type": "quality",
        "null_check": true,
        "range_check": true,
        "drop_on_match": false
      }
    },
    {
      "type": "transform",
      "config": {
        "type": "scale",
        "factor": 1.0,
        "offset": 0,
        "add_tags": {
          "pipeline_stage": "transform",
          "normalization": "min_max_scaling"
        }
      }
    },
    {
      "type": "transform",
      "config": {
        "add_tags": {
          "pipeline_stage": "filter",
          "quality_verified": "true"
        }
      }
    },
    {
      "type": "aggregate",
      "config": {
        "window_type": "count",
        "size": 20,
        "functions": ["count", "avg", "stddev", "p95"],
        "group_by": ["device_id"],
        "output_key": "{{.Key}}_aggregated",
        "forward": true,
        "add_tags": {
          "pipeline_stage": "aggregate",
          "window_config": "sliding_20"
        }
      }
    },
    {
      "type": "alert",
      "config": {
        "level": "warning",
        "message": "传感器数据异常：均值={{avg}}, 标准差={{stddev}}",
        "channels": ["console"],
        "add_tags": {
          "pipeline_stage": "alert",
          "alert_source": "comprehensive_pipeline"
        }
      }
    }
  ],
  "created_at": "2025-08-10T22:00:00Z",
  "updated_at": "2025-08-10T22:00:00Z"
}